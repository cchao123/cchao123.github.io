function makeMap(G,U){const L=Object.create(null),Y=G.split(",");for(let X=0;X<Y.length;X++)L[Y[X]]=!0;return U?X=>!!L[X.toLowerCase()]:X=>!!L[X]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(G){return!!G||G===""}function normalizeStyle(G){if(isArray$3(G)){const U={};for(let L=0;L<G.length;L++){const Y=G[L],X=isString$1(Y)?parseStringStyle(Y):normalizeStyle(Y);if(X)for(const W in X)U[W]=X[W]}return U}else{if(isString$1(G))return G;if(isObject$4(G))return G}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(G){const U={};return G.split(listDelimiterRE).forEach(L=>{if(L){const Y=L.split(propertyDelimiterRE);Y.length>1&&(U[Y[0].trim()]=Y[1].trim())}}),U}function normalizeClass(G){let U="";if(isString$1(G))U=G;else if(isArray$3(G))for(let L=0;L<G.length;L++){const Y=normalizeClass(G[L]);Y&&(U+=Y+" ")}else if(isObject$4(G))for(const L in G)G[L]&&(U+=L+" ");return U.trim()}const toDisplayString=G=>isString$1(G)?G:G==null?"":isArray$3(G)||isObject$4(G)&&(G.toString===objectToString$1||!isFunction$2(G.toString))?JSON.stringify(G,replacer,2):String(G),replacer=(G,U)=>U&&U.__v_isRef?replacer(G,U.value):isMap(U)?{[`Map(${U.size})`]:[...U.entries()].reduce((L,[Y,X])=>(L[`${Y} =>`]=X,L),{})}:isSet(U)?{[`Set(${U.size})`]:[...U.values()]}:isObject$4(U)&&!isArray$3(U)&&!isPlainObject$2(U)?String(U):U,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=G=>onRE.test(G),isModelListener=G=>G.startsWith("onUpdate:"),extend$2=Object.assign,remove=(G,U)=>{const L=G.indexOf(U);L>-1&&G.splice(L,1)},hasOwnProperty$4=Object.prototype.hasOwnProperty,hasOwn=(G,U)=>hasOwnProperty$4.call(G,U),isArray$3=Array.isArray,isMap=G=>toTypeString(G)==="[object Map]",isSet=G=>toTypeString(G)==="[object Set]",isFunction$2=G=>typeof G=="function",isString$1=G=>typeof G=="string",isSymbol$1=G=>typeof G=="symbol",isObject$4=G=>G!==null&&typeof G=="object",isPromise$1=G=>isObject$4(G)&&isFunction$2(G.then)&&isFunction$2(G.catch),objectToString$1=Object.prototype.toString,toTypeString=G=>objectToString$1.call(G),toRawType=G=>toTypeString(G).slice(8,-1),isPlainObject$2=G=>toTypeString(G)==="[object Object]",isIntegerKey=G=>isString$1(G)&&G!=="NaN"&&G[0]!=="-"&&""+parseInt(G,10)===G,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=G=>{const U=Object.create(null);return L=>U[L]||(U[L]=G(L))},camelizeRE$1=/-(\w)/g,camelize$1=cacheStringFunction(G=>G.replace(camelizeRE$1,(U,L)=>L?L.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(G=>G.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(G=>G.charAt(0).toUpperCase()+G.slice(1)),toHandlerKey=cacheStringFunction(G=>G?`on${capitalize(G)}`:""),hasChanged=(G,U)=>!Object.is(G,U),invokeArrayFns=(G,U)=>{for(let L=0;L<G.length;L++)G[L](U)},def=(G,U,L)=>{Object.defineProperty(G,U,{configurable:!0,enumerable:!1,value:L})},toNumber$1=G=>{const U=parseFloat(G);return isNaN(U)?G:U};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(U=!1){this.active=!0,this.effects=[],this.cleanups=[],!U&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(U){if(this.active)try{return activeEffectScope=this,U()}finally{activeEffectScope=this.parent}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(U){if(this.active){let L,Y;for(L=0,Y=this.effects.length;L<Y;L++)this.effects[L].stop();for(L=0,Y=this.cleanups.length;L<Y;L++)this.cleanups[L]();if(this.scopes)for(L=0,Y=this.scopes.length;L<Y;L++)this.scopes[L].stop(!0);if(this.parent&&!U){const X=this.parent.scopes.pop();X&&X!==this&&(this.parent.scopes[this.index]=X,X.index=this.index)}this.active=!1}}}function effectScope(G){return new EffectScope(G)}function recordEffectScope(G,U=activeEffectScope){U&&U.active&&U.effects.push(G)}const createDep=G=>{const U=new Set(G);return U.w=0,U.n=0,U},wasTracked=G=>(G.w&trackOpBit)>0,newTracked=G=>(G.n&trackOpBit)>0,initDepMarkers=({deps:G})=>{if(G.length)for(let U=0;U<G.length;U++)G[U].w|=trackOpBit},finalizeDepMarkers=G=>{const{deps:U}=G;if(U.length){let L=0;for(let Y=0;Y<U.length;Y++){const X=U[Y];wasTracked(X)&&!newTracked(X)?X.delete(G):U[L++]=X,X.w&=~trackOpBit,X.n&=~trackOpBit}U.length=L}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(U,L=null,Y){this.fn=U,this.scheduler=L,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,Y)}run(){if(!this.active)return this.fn();let U=activeEffect,L=shouldTrack;for(;U;){if(U===this)return;U=U.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=L,this.parent=void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(G){const{deps:U}=G;if(U.length){for(let L=0;L<U.length;L++)U[L].delete(G);U.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const G=trackStack.pop();shouldTrack=G===void 0?!0:G}function track(G,U,L){if(shouldTrack&&activeEffect){let Y=targetMap.get(G);Y||targetMap.set(G,Y=new Map);let X=Y.get(L);X||Y.set(L,X=createDep()),trackEffects(X)}}function trackEffects(G,U){let L=!1;effectTrackDepth<=maxMarkerBits?newTracked(G)||(G.n|=trackOpBit,L=!wasTracked(G)):L=!G.has(activeEffect),L&&(G.add(activeEffect),activeEffect.deps.push(G))}function trigger(G,U,L,Y,X,W){const z=targetMap.get(G);if(!z)return;let J=[];if(U==="clear")J=[...z.values()];else if(L==="length"&&isArray$3(G))z.forEach((Z,ee)=>{(ee==="length"||ee>=Y)&&J.push(Z)});else switch(L!==void 0&&J.push(z.get(L)),U){case"add":isArray$3(G)?isIntegerKey(L)&&J.push(z.get("length")):(J.push(z.get(ITERATE_KEY)),isMap(G)&&J.push(z.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(G)||(J.push(z.get(ITERATE_KEY)),isMap(G)&&J.push(z.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(G)&&J.push(z.get(ITERATE_KEY));break}if(J.length===1)J[0]&&triggerEffects(J[0]);else{const Z=[];for(const ee of J)ee&&Z.push(...ee);triggerEffects(createDep(Z))}}function triggerEffects(G,U){for(const L of isArray$3(G)?G:[...G])(L!==activeEffect||L.allowRecurse)&&(L.scheduler?L.scheduler():L.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(G=>Symbol[G]).filter(isSymbol$1)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const G={};return["includes","indexOf","lastIndexOf"].forEach(U=>{G[U]=function(...L){const Y=toRaw(this);for(let W=0,z=this.length;W<z;W++)track(Y,"get",W+"");const X=Y[U](...L);return X===-1||X===!1?Y[U](...L.map(toRaw)):X}}),["push","pop","shift","unshift","splice"].forEach(U=>{G[U]=function(...L){pauseTracking();const Y=toRaw(this)[U].apply(this,L);return resetTracking(),Y}}),G}function createGetter(G=!1,U=!1){return function(Y,X,W){if(X==="__v_isReactive")return!G;if(X==="__v_isReadonly")return G;if(X==="__v_isShallow")return U;if(X==="__v_raw"&&W===(G?U?shallowReadonlyMap:readonlyMap:U?shallowReactiveMap:reactiveMap).get(Y))return Y;const z=isArray$3(Y);if(!G&&z&&hasOwn(arrayInstrumentations,X))return Reflect.get(arrayInstrumentations,X,W);const J=Reflect.get(Y,X,W);return(isSymbol$1(X)?builtInSymbols.has(X):isNonTrackableKeys(X))||(G||track(Y,"get",X),U)?J:isRef(J)?!z||!isIntegerKey(X)?J.value:J:isObject$4(J)?G?readonly(J):reactive(J):J}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(G=!1){return function(L,Y,X,W){let z=L[Y];if(isReadonly(z)&&isRef(z)&&!isRef(X))return!1;if(!G&&!isReadonly(X)&&(isShallow(X)||(X=toRaw(X),z=toRaw(z)),!isArray$3(L)&&isRef(z)&&!isRef(X)))return z.value=X,!0;const J=isArray$3(L)&&isIntegerKey(Y)?Number(Y)<L.length:hasOwn(L,Y),Z=Reflect.set(L,Y,X,W);return L===toRaw(W)&&(J?hasChanged(X,z)&&trigger(L,"set",Y,X):trigger(L,"add",Y,X)),Z}}function deleteProperty(G,U){const L=hasOwn(G,U);G[U];const Y=Reflect.deleteProperty(G,U);return Y&&L&&trigger(G,"delete",U,void 0),Y}function has(G,U){const L=Reflect.has(G,U);return(!isSymbol$1(U)||!builtInSymbols.has(U))&&track(G,"has",U),L}function ownKeys(G){return track(G,"iterate",isArray$3(G)?"length":ITERATE_KEY),Reflect.ownKeys(G)}const mutableHandlers={get:get$1,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(G,U){return!0},deleteProperty(G,U){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=G=>G,getProto=G=>Reflect.getPrototypeOf(G);function get$1$1(G,U,L=!1,Y=!1){G=G.__v_raw;const X=toRaw(G),W=toRaw(U);U!==W&&!L&&track(X,"get",U),!L&&track(X,"get",W);const{has:z}=getProto(X),J=Y?toShallow:L?toReadonly:toReactive;if(z.call(X,U))return J(G.get(U));if(z.call(X,W))return J(G.get(W));G!==X&&G.get(U)}function has$1(G,U=!1){const L=this.__v_raw,Y=toRaw(L),X=toRaw(G);return G!==X&&!U&&track(Y,"has",G),!U&&track(Y,"has",X),G===X?L.has(G):L.has(G)||L.has(X)}function size(G,U=!1){return G=G.__v_raw,!U&&track(toRaw(G),"iterate",ITERATE_KEY),Reflect.get(G,"size",G)}function add(G){G=toRaw(G);const U=toRaw(this);return getProto(U).has.call(U,G)||(U.add(G),trigger(U,"add",G,G)),this}function set$1(G,U){U=toRaw(U);const L=toRaw(this),{has:Y,get:X}=getProto(L);let W=Y.call(L,G);W||(G=toRaw(G),W=Y.call(L,G));const z=X.call(L,G);return L.set(G,U),W?hasChanged(U,z)&&trigger(L,"set",G,U):trigger(L,"add",G,U),this}function deleteEntry(G){const U=toRaw(this),{has:L,get:Y}=getProto(U);let X=L.call(U,G);X||(G=toRaw(G),X=L.call(U,G)),Y&&Y.call(U,G);const W=U.delete(G);return X&&trigger(U,"delete",G,void 0),W}function clear(){const G=toRaw(this),U=G.size!==0,L=G.clear();return U&&trigger(G,"clear",void 0,void 0),L}function createForEach(G,U){return function(Y,X){const W=this,z=W.__v_raw,J=toRaw(z),Z=U?toShallow:G?toReadonly:toReactive;return!G&&track(J,"iterate",ITERATE_KEY),z.forEach((ee,te)=>Y.call(X,Z(ee),Z(te),W))}}function createIterableMethod(G,U,L){return function(...Y){const X=this.__v_raw,W=toRaw(X),z=isMap(W),J=G==="entries"||G===Symbol.iterator&&z,Z=G==="keys"&&z,ee=X[G](...Y),te=L?toShallow:U?toReadonly:toReactive;return!U&&track(W,"iterate",Z?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:re,done:ie}=ee.next();return ie?{value:re,done:ie}:{value:J?[te(re[0]),te(re[1])]:te(re),done:ie}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(G){return function(...U){return G==="delete"?!1:this}}function createInstrumentations(){const G={get(W){return get$1$1(this,W)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},U={get(W){return get$1$1(this,W,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},L={get(W){return get$1$1(this,W,!0)},get size(){return size(this,!0)},has(W){return has$1.call(this,W,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},Y={get(W){return get$1$1(this,W,!0,!0)},get size(){return size(this,!0)},has(W){return has$1.call(this,W,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(W=>{G[W]=createIterableMethod(W,!1,!1),L[W]=createIterableMethod(W,!0,!1),U[W]=createIterableMethod(W,!1,!0),Y[W]=createIterableMethod(W,!0,!0)}),[G,L,U,Y]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(G,U){const L=U?G?shallowReadonlyInstrumentations:shallowInstrumentations:G?readonlyInstrumentations:mutableInstrumentations;return(Y,X,W)=>X==="__v_isReactive"?!G:X==="__v_isReadonly"?G:X==="__v_raw"?Y:Reflect.get(hasOwn(L,X)&&X in Y?L:Y,X,W)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(G){switch(G){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(G){return G.__v_skip||!Object.isExtensible(G)?0:targetTypeMap(toRawType(G))}function reactive(G){return isReadonly(G)?G:createReactiveObject(G,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(G){return createReactiveObject(G,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(G){return createReactiveObject(G,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(G,U,L,Y,X){if(!isObject$4(G)||G.__v_raw&&!(U&&G.__v_isReactive))return G;const W=X.get(G);if(W)return W;const z=getTargetType(G);if(z===0)return G;const J=new Proxy(G,z===2?Y:L);return X.set(G,J),J}function isReactive(G){return isReadonly(G)?isReactive(G.__v_raw):!!(G&&G.__v_isReactive)}function isReadonly(G){return!!(G&&G.__v_isReadonly)}function isShallow(G){return!!(G&&G.__v_isShallow)}function isProxy(G){return isReactive(G)||isReadonly(G)}function toRaw(G){const U=G&&G.__v_raw;return U?toRaw(U):G}function markRaw(G){return def(G,"__v_skip",!0),G}const toReactive=G=>isObject$4(G)?reactive(G):G,toReadonly=G=>isObject$4(G)?readonly(G):G;function trackRefValue(G){shouldTrack&&activeEffect&&(G=toRaw(G),trackEffects(G.dep||(G.dep=createDep())))}function triggerRefValue(G,U){G=toRaw(G),G.dep&&triggerEffects(G.dep)}function isRef(G){return!!(G&&G.__v_isRef===!0)}function ref(G){return createRef(G,!1)}function shallowRef(G){return createRef(G,!0)}function createRef(G,U){return isRef(G)?G:new RefImpl(G,U)}class RefImpl{constructor(U,L){this.__v_isShallow=L,this.dep=void 0,this.__v_isRef=!0,this._rawValue=L?U:toRaw(U),this._value=L?U:toReactive(U)}get value(){return trackRefValue(this),this._value}set value(U){U=this.__v_isShallow?U:toRaw(U),hasChanged(U,this._rawValue)&&(this._rawValue=U,this._value=this.__v_isShallow?U:toReactive(U),triggerRefValue(this))}}function unref(G){return isRef(G)?G.value:G}const shallowUnwrapHandlers={get:(G,U,L)=>unref(Reflect.get(G,U,L)),set:(G,U,L,Y)=>{const X=G[U];return isRef(X)&&!isRef(L)?(X.value=L,!0):Reflect.set(G,U,L,Y)}};function proxyRefs(G){return isReactive(G)?G:new Proxy(G,shallowUnwrapHandlers)}function toRefs(G){const U=isArray$3(G)?new Array(G.length):{};for(const L in G)U[L]=toRef(G,L);return U}class ObjectRefImpl{constructor(U,L,Y){this._object=U,this._key=L,this._defaultValue=Y,this.__v_isRef=!0}get value(){const U=this._object[this._key];return U===void 0?this._defaultValue:U}set value(U){this._object[this._key]=U}}function toRef(G,U,L){const Y=G[U];return isRef(Y)?Y:new ObjectRefImpl(G,U,L)}class ComputedRefImpl{constructor(U,L,Y,X){this._setter=L,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(U,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!X,this.__v_isReadonly=Y}get value(){const U=toRaw(this);return trackRefValue(U),(U._dirty||!U._cacheable)&&(U._dirty=!1,U._value=U.effect.run()),U._value}set value(U){this._setter(U)}}function computed$1(G,U,L=!1){let Y,X;const W=isFunction$2(G);return W?(Y=G,X=NOOP):(Y=G.get,X=G.set),new ComputedRefImpl(Y,X,W||!X,L)}Promise.resolve();function callWithErrorHandling(G,U,L,Y){let X;try{X=Y?G(...Y):G()}catch(W){handleError(W,U,L)}return X}function callWithAsyncErrorHandling(G,U,L,Y){if(isFunction$2(G)){const W=callWithErrorHandling(G,U,L,Y);return W&&isPromise$1(W)&&W.catch(z=>{handleError(z,U,L)}),W}const X=[];for(let W=0;W<G.length;W++)X.push(callWithAsyncErrorHandling(G[W],U,L,Y));return X}function handleError(G,U,L,Y=!0){const X=U?U.vnode:null;if(U){let W=U.parent;const z=U.proxy,J=L;for(;W;){const ee=W.ec;if(ee){for(let te=0;te<ee.length;te++)if(ee[te](G,z,J)===!1)return}W=W.parent}const Z=U.appContext.config.errorHandler;if(Z){callWithErrorHandling(Z,null,10,[G,z,J]);return}}logError(G,L,X,Y)}function logError(G,U,L,Y=!0){console.error(G)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(G){const U=currentFlushPromise||resolvedPromise;return G?U.then(this?G.bind(this):G):U}function findInsertionIndex(G){let U=flushIndex+1,L=queue$1.length;for(;U<L;){const Y=U+L>>>1;getId(queue$1[Y])<G?U=Y+1:L=Y}return U}function queueJob(G){(!queue$1.length||!queue$1.includes(G,isFlushing&&G.allowRecurse?flushIndex+1:flushIndex))&&G!==currentPreFlushParentJob&&(G.id==null?queue$1.push(G):queue$1.splice(findInsertionIndex(G.id),0,G),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(G){const U=queue$1.indexOf(G);U>flushIndex&&queue$1.splice(U,1)}function queueCb(G,U,L,Y){isArray$3(G)?L.push(...G):(!U||!U.includes(G,G.allowRecurse?Y+1:Y))&&L.push(G),queueFlush()}function queuePreFlushCb(G){queueCb(G,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(G){queueCb(G,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(G,U=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=U,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(G,U)}}function flushPostFlushCbs(G){if(pendingPostFlushCbs.length){const U=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...U);return}for(activePostFlushCbs=U,activePostFlushCbs.sort((L,Y)=>getId(L)-getId(Y)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=G=>G.id==null?1/0:G.id;function flushJobs(G){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(G),queue$1.sort((L,Y)=>getId(L)-getId(Y));const U=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const L=queue$1[flushIndex];L&&L.active!==!1&&callWithErrorHandling(L,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(G)}}function emit$1(G,U,...L){const Y=G.vnode.props||EMPTY_OBJ;let X=L;const W=U.startsWith("update:"),z=W&&U.slice(7);if(z&&z in Y){const te=`${z==="modelValue"?"model":z}Modifiers`,{number:re,trim:ie}=Y[te]||EMPTY_OBJ;ie?X=L.map(ne=>ne.trim()):re&&(X=L.map(toNumber$1))}let J,Z=Y[J=toHandlerKey(U)]||Y[J=toHandlerKey(camelize$1(U))];!Z&&W&&(Z=Y[J=toHandlerKey(hyphenate(U))]),Z&&callWithAsyncErrorHandling(Z,G,6,X);const ee=Y[J+"Once"];if(ee){if(!G.emitted)G.emitted={};else if(G.emitted[J])return;G.emitted[J]=!0,callWithAsyncErrorHandling(ee,G,6,X)}}function normalizeEmitsOptions(G,U,L=!1){const Y=U.emitsCache,X=Y.get(G);if(X!==void 0)return X;const W=G.emits;let z={},J=!1;if(!isFunction$2(G)){const Z=ee=>{const te=normalizeEmitsOptions(ee,U,!0);te&&(J=!0,extend$2(z,te))};!L&&U.mixins.length&&U.mixins.forEach(Z),G.extends&&Z(G.extends),G.mixins&&G.mixins.forEach(Z)}return!W&&!J?(Y.set(G,null),null):(isArray$3(W)?W.forEach(Z=>z[Z]=null):extend$2(z,W),Y.set(G,z),z)}function isEmitListener(G,U){return!G||!isOn(U)?!1:(U=U.slice(2).replace(/Once$/,""),hasOwn(G,U[0].toLowerCase()+U.slice(1))||hasOwn(G,hyphenate(U))||hasOwn(G,U))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(G){const U=currentRenderingInstance;return currentRenderingInstance=G,currentScopeId=G&&G.type.__scopeId||null,U}function pushScopeId(G){currentScopeId=G}function popScopeId(){currentScopeId=null}function withCtx(G,U=currentRenderingInstance,L){if(!U||G._n)return G;const Y=(...X)=>{Y._d&&setBlockTracking(-1);const W=setCurrentRenderingInstance(U),z=G(...X);return setCurrentRenderingInstance(W),Y._d&&setBlockTracking(1),z};return Y._n=!0,Y._c=!0,Y._d=!0,Y}function markAttrsAccessed(){}function renderComponentRoot(G){const{type:U,vnode:L,proxy:Y,withProxy:X,props:W,propsOptions:[z],slots:J,attrs:Z,emit:ee,render:te,renderCache:re,data:ie,setupState:ne,ctx:oe,inheritAttrs:se}=G;let ae,le;const ue=setCurrentRenderingInstance(G);try{if(L.shapeFlag&4){const he=X||Y;ae=normalizeVNode(te.call(he,he,re,W,ne,ie,oe)),le=Z}else{const he=U;ae=normalizeVNode(he.length>1?he(W,{attrs:Z,slots:J,emit:ee}):he(W,null)),le=U.props?Z:getFunctionalFallthrough(Z)}}catch(he){blockStack.length=0,handleError(he,G,1),ae=createVNode(Comment)}let ce=ae;if(le&&se!==!1){const he=Object.keys(le),{shapeFlag:fe}=ce;he.length&&fe&7&&(z&&he.some(isModelListener)&&(le=filterModelListeners(le,z)),ce=cloneVNode(ce,le))}return L.dirs&&(ce.dirs=ce.dirs?ce.dirs.concat(L.dirs):L.dirs),L.transition&&(ce.transition=L.transition),ae=ce,setCurrentRenderingInstance(ue),ae}const getFunctionalFallthrough=G=>{let U;for(const L in G)(L==="class"||L==="style"||isOn(L))&&((U||(U={}))[L]=G[L]);return U},filterModelListeners=(G,U)=>{const L={};for(const Y in G)(!isModelListener(Y)||!(Y.slice(9)in U))&&(L[Y]=G[Y]);return L};function shouldUpdateComponent(G,U,L){const{props:Y,children:X,component:W}=G,{props:z,children:J,patchFlag:Z}=U,ee=W.emitsOptions;if(U.dirs||U.transition)return!0;if(L&&Z>=0){if(Z&1024)return!0;if(Z&16)return Y?hasPropsChanged(Y,z,ee):!!z;if(Z&8){const te=U.dynamicProps;for(let re=0;re<te.length;re++){const ie=te[re];if(z[ie]!==Y[ie]&&!isEmitListener(ee,ie))return!0}}}else return(X||J)&&(!J||!J.$stable)?!0:Y===z?!1:Y?z?hasPropsChanged(Y,z,ee):!0:!!z;return!1}function hasPropsChanged(G,U,L){const Y=Object.keys(U);if(Y.length!==Object.keys(G).length)return!0;for(let X=0;X<Y.length;X++){const W=Y[X];if(U[W]!==G[W]&&!isEmitListener(L,W))return!0}return!1}function updateHOCHostEl({vnode:G,parent:U},L){for(;U&&U.subTree===G;)(G=U.vnode).el=L,U=U.parent}const isSuspense=G=>G.__isSuspense;function queueEffectWithSuspense(G,U){U&&U.pendingBranch?isArray$3(G)?U.effects.push(...G):U.effects.push(G):queuePostFlushCb(G)}function provide(G,U){if(currentInstance){let L=currentInstance.provides;const Y=currentInstance.parent&&currentInstance.parent.provides;Y===L&&(L=currentInstance.provides=Object.create(Y)),L[G]=U}}function inject(G,U,L=!1){const Y=currentInstance||currentRenderingInstance;if(Y){const X=Y.parent==null?Y.vnode.appContext&&Y.vnode.appContext.provides:Y.parent.provides;if(X&&G in X)return X[G];if(arguments.length>1)return L&&isFunction$2(U)?U.call(Y.proxy):U}}const INITIAL_WATCHER_VALUE={};function watch(G,U,L){return doWatch(G,U,L)}function doWatch(G,U,{immediate:L,deep:Y,flush:X,onTrack:W,onTrigger:z}=EMPTY_OBJ){const J=currentInstance;let Z,ee=!1,te=!1;if(isRef(G)?(Z=()=>G.value,ee=isShallow(G)):isReactive(G)?(Z=()=>G,Y=!0):isArray$3(G)?(te=!0,ee=G.some(isReactive),Z=()=>G.map(le=>{if(isRef(le))return le.value;if(isReactive(le))return traverse(le);if(isFunction$2(le))return callWithErrorHandling(le,J,2)})):isFunction$2(G)?U?Z=()=>callWithErrorHandling(G,J,2):Z=()=>{if(!(J&&J.isUnmounted))return re&&re(),callWithAsyncErrorHandling(G,J,3,[ie])}:Z=NOOP,U&&Y){const le=Z;Z=()=>traverse(le())}let re,ie=le=>{re=ae.onStop=()=>{callWithErrorHandling(le,J,4)}};if(isInSSRComponentSetup)return ie=NOOP,U?L&&callWithAsyncErrorHandling(U,J,3,[Z(),te?[]:void 0,ie]):Z(),NOOP;let ne=te?[]:INITIAL_WATCHER_VALUE;const oe=()=>{if(!!ae.active)if(U){const le=ae.run();(Y||ee||(te?le.some((ue,ce)=>hasChanged(ue,ne[ce])):hasChanged(le,ne)))&&(re&&re(),callWithAsyncErrorHandling(U,J,3,[le,ne===INITIAL_WATCHER_VALUE?void 0:ne,ie]),ne=le)}else ae.run()};oe.allowRecurse=!!U;let se;X==="sync"?se=oe:X==="post"?se=()=>queuePostRenderEffect(oe,J&&J.suspense):se=()=>{!J||J.isMounted?queuePreFlushCb(oe):oe()};const ae=new ReactiveEffect(Z,se);return U?L?oe():ne=ae.run():X==="post"?queuePostRenderEffect(ae.run.bind(ae),J&&J.suspense):ae.run(),()=>{ae.stop(),J&&J.scope&&remove(J.scope.effects,ae)}}function instanceWatch(G,U,L){const Y=this.proxy,X=isString$1(G)?G.includes(".")?createPathGetter(Y,G):()=>Y[G]:G.bind(Y,Y);let W;isFunction$2(U)?W=U:(W=U.handler,L=U);const z=currentInstance;setCurrentInstance(this);const J=doWatch(X,W.bind(Y),L);return z?setCurrentInstance(z):unsetCurrentInstance(),J}function createPathGetter(G,U){const L=U.split(".");return()=>{let Y=G;for(let X=0;X<L.length&&Y;X++)Y=Y[L[X]];return Y}}function traverse(G,U){if(!isObject$4(G)||G.__v_skip||(U=U||new Set,U.has(G)))return G;if(U.add(G),isRef(G))traverse(G.value,U);else if(isArray$3(G))for(let L=0;L<G.length;L++)traverse(G[L],U);else if(isSet(G)||isMap(G))G.forEach(L=>{traverse(L,U)});else if(isPlainObject$2(G))for(const L in G)traverse(G[L],U);return G}function useTransitionState(){const G={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{G.isMounted=!0}),onBeforeUnmount(()=>{G.isUnmounting=!0}),G}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(G,{slots:U}){const L=getCurrentInstance(),Y=useTransitionState();let X;return()=>{const W=U.default&&getTransitionRawChildren(U.default(),!0);if(!W||!W.length)return;const z=toRaw(G),{mode:J}=z,Z=W[0];if(Y.isLeaving)return emptyPlaceholder(Z);const ee=getKeepAliveChild(Z);if(!ee)return emptyPlaceholder(Z);const te=resolveTransitionHooks(ee,z,Y,L);setTransitionHooks(ee,te);const re=L.subTree,ie=re&&getKeepAliveChild(re);let ne=!1;const{getTransitionKey:oe}=ee.type;if(oe){const se=oe();X===void 0?X=se:se!==X&&(X=se,ne=!0)}if(ie&&ie.type!==Comment&&(!isSameVNodeType(ee,ie)||ne)){const se=resolveTransitionHooks(ie,z,Y,L);if(setTransitionHooks(ie,se),J==="out-in")return Y.isLeaving=!0,se.afterLeave=()=>{Y.isLeaving=!1,L.update()},emptyPlaceholder(Z);J==="in-out"&&ee.type!==Comment&&(se.delayLeave=(ae,le,ue)=>{const ce=getLeavingNodesForType(Y,ie);ce[String(ie.key)]=ie,ae._leaveCb=()=>{le(),ae._leaveCb=void 0,delete te.delayedLeave},te.delayedLeave=ue})}return Z}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(G,U){const{leavingVNodes:L}=G;let Y=L.get(U.type);return Y||(Y=Object.create(null),L.set(U.type,Y)),Y}function resolveTransitionHooks(G,U,L,Y){const{appear:X,mode:W,persisted:z=!1,onBeforeEnter:J,onEnter:Z,onAfterEnter:ee,onEnterCancelled:te,onBeforeLeave:re,onLeave:ie,onAfterLeave:ne,onLeaveCancelled:oe,onBeforeAppear:se,onAppear:ae,onAfterAppear:le,onAppearCancelled:ue}=U,ce=String(G.key),he=getLeavingNodesForType(L,G),fe=(_e,me)=>{_e&&callWithAsyncErrorHandling(_e,Y,9,me)},de={mode:W,persisted:z,beforeEnter(_e){let me=J;if(!L.isMounted)if(X)me=se||J;else return;_e._leaveCb&&_e._leaveCb(!0);const ve=he[ce];ve&&isSameVNodeType(G,ve)&&ve.el._leaveCb&&ve.el._leaveCb(),fe(me,[_e])},enter(_e){let me=Z,ve=ee,ye=te;if(!L.isMounted)if(X)me=ae||Z,ve=le||ee,ye=ue||te;else return;let be=!1;const Te=_e._enterCb=Se=>{be||(be=!0,Se?fe(ye,[_e]):fe(ve,[_e]),de.delayedLeave&&de.delayedLeave(),_e._enterCb=void 0)};me?(me(_e,Te),me.length<=1&&Te()):Te()},leave(_e,me){const ve=String(G.key);if(_e._enterCb&&_e._enterCb(!0),L.isUnmounting)return me();fe(re,[_e]);let ye=!1;const be=_e._leaveCb=Te=>{ye||(ye=!0,me(),Te?fe(oe,[_e]):fe(ne,[_e]),_e._leaveCb=void 0,he[ve]===G&&delete he[ve])};he[ve]=G,ie?(ie(_e,be),ie.length<=1&&be()):be()},clone(_e){return resolveTransitionHooks(_e,U,L,Y)}};return de}function emptyPlaceholder(G){if(isKeepAlive(G))return G=cloneVNode(G),G.children=null,G}function getKeepAliveChild(G){return isKeepAlive(G)?G.children?G.children[0]:void 0:G}function setTransitionHooks(G,U){G.shapeFlag&6&&G.component?setTransitionHooks(G.component.subTree,U):G.shapeFlag&128?(G.ssContent.transition=U.clone(G.ssContent),G.ssFallback.transition=U.clone(G.ssFallback)):G.transition=U}function getTransitionRawChildren(G,U=!1){let L=[],Y=0;for(let X=0;X<G.length;X++){const W=G[X];W.type===Fragment?(W.patchFlag&128&&Y++,L=L.concat(getTransitionRawChildren(W.children,U))):(U||W.type!==Comment)&&L.push(W)}if(Y>1)for(let X=0;X<L.length;X++)L[X].patchFlag=-2;return L}function defineComponent(G){return isFunction$2(G)?{setup:G,name:G.name}:G}const isAsyncWrapper=G=>!!G.type.__asyncLoader,isKeepAlive=G=>G.type.__isKeepAlive;function onActivated(G,U){registerKeepAliveHook(G,"a",U)}function onDeactivated(G,U){registerKeepAliveHook(G,"da",U)}function registerKeepAliveHook(G,U,L=currentInstance){const Y=G.__wdc||(G.__wdc=()=>{let X=L;for(;X;){if(X.isDeactivated)return;X=X.parent}return G()});if(injectHook(U,Y,L),L){let X=L.parent;for(;X&&X.parent;)isKeepAlive(X.parent.vnode)&&injectToKeepAliveRoot(Y,U,L,X),X=X.parent}}function injectToKeepAliveRoot(G,U,L,Y){const X=injectHook(U,G,Y,!0);onUnmounted(()=>{remove(Y[U],X)},L)}function injectHook(G,U,L=currentInstance,Y=!1){if(L){const X=L[G]||(L[G]=[]),W=U.__weh||(U.__weh=(...z)=>{if(L.isUnmounted)return;pauseTracking(),setCurrentInstance(L);const J=callWithAsyncErrorHandling(U,L,G,z);return unsetCurrentInstance(),resetTracking(),J});return Y?X.unshift(W):X.push(W),W}}const createHook=G=>(U,L=currentInstance)=>(!isInSSRComponentSetup||G==="sp")&&injectHook(G,U,L),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(G,U=currentInstance){injectHook("ec",G,U)}let shouldCacheAccess=!0;function applyOptions(G){const U=resolveMergedOptions(G),L=G.proxy,Y=G.ctx;shouldCacheAccess=!1,U.beforeCreate&&callHook$1(U.beforeCreate,G,"bc");const{data:X,computed:W,methods:z,watch:J,provide:Z,inject:ee,created:te,beforeMount:re,mounted:ie,beforeUpdate:ne,updated:oe,activated:se,deactivated:ae,beforeDestroy:le,beforeUnmount:ue,destroyed:ce,unmounted:he,render:fe,renderTracked:de,renderTriggered:_e,errorCaptured:me,serverPrefetch:ve,expose:ye,inheritAttrs:be,components:Te,directives:Se,filters:Ue}=U;if(ee&&resolveInjections(ee,Y,null,G.appContext.config.unwrapInjectedRef),z)for(const Ve in z){const ze=z[Ve];isFunction$2(ze)&&(Y[Ve]=ze.bind(L))}if(X){const Ve=X.call(L,L);isObject$4(Ve)&&(G.data=reactive(Ve))}if(shouldCacheAccess=!0,W)for(const Ve in W){const ze=W[Ve],Ze=isFunction$2(ze)?ze.bind(L,L):isFunction$2(ze.get)?ze.get.bind(L,L):NOOP,Ae=!isFunction$2(ze)&&isFunction$2(ze.set)?ze.set.bind(L):NOOP,De=computed({get:Ze,set:Ae});Object.defineProperty(Y,Ve,{enumerable:!0,configurable:!0,get:()=>De.value,set:Ke=>De.value=Ke})}if(J)for(const Ve in J)createWatcher(J[Ve],Y,L,Ve);if(Z){const Ve=isFunction$2(Z)?Z.call(L):Z;Reflect.ownKeys(Ve).forEach(ze=>{provide(ze,Ve[ze])})}te&&callHook$1(te,G,"c");function Ne(Ve,ze){isArray$3(ze)?ze.forEach(Ze=>Ve(Ze.bind(L))):ze&&Ve(ze.bind(L))}if(Ne(onBeforeMount,re),Ne(onMounted,ie),Ne(onBeforeUpdate,ne),Ne(onUpdated,oe),Ne(onActivated,se),Ne(onDeactivated,ae),Ne(onErrorCaptured,me),Ne(onRenderTracked,de),Ne(onRenderTriggered,_e),Ne(onBeforeUnmount,ue),Ne(onUnmounted,he),Ne(onServerPrefetch,ve),isArray$3(ye))if(ye.length){const Ve=G.exposed||(G.exposed={});ye.forEach(ze=>{Object.defineProperty(Ve,ze,{get:()=>L[ze],set:Ze=>L[ze]=Ze})})}else G.exposed||(G.exposed={});fe&&G.render===NOOP&&(G.render=fe),be!=null&&(G.inheritAttrs=be),Te&&(G.components=Te),Se&&(G.directives=Se)}function resolveInjections(G,U,L=NOOP,Y=!1){isArray$3(G)&&(G=normalizeInject(G));for(const X in G){const W=G[X];let z;isObject$4(W)?"default"in W?z=inject(W.from||X,W.default,!0):z=inject(W.from||X):z=inject(W),isRef(z)&&Y?Object.defineProperty(U,X,{enumerable:!0,configurable:!0,get:()=>z.value,set:J=>z.value=J}):U[X]=z}}function callHook$1(G,U,L){callWithAsyncErrorHandling(isArray$3(G)?G.map(Y=>Y.bind(U.proxy)):G.bind(U.proxy),U,L)}function createWatcher(G,U,L,Y){const X=Y.includes(".")?createPathGetter(L,Y):()=>L[Y];if(isString$1(G)){const W=U[G];isFunction$2(W)&&watch(X,W)}else if(isFunction$2(G))watch(X,G.bind(L));else if(isObject$4(G))if(isArray$3(G))G.forEach(W=>createWatcher(W,U,L,Y));else{const W=isFunction$2(G.handler)?G.handler.bind(L):U[G.handler];isFunction$2(W)&&watch(X,W,G)}}function resolveMergedOptions(G){const U=G.type,{mixins:L,extends:Y}=U,{mixins:X,optionsCache:W,config:{optionMergeStrategies:z}}=G.appContext,J=W.get(U);let Z;return J?Z=J:!X.length&&!L&&!Y?Z=U:(Z={},X.length&&X.forEach(ee=>mergeOptions$1(Z,ee,z,!0)),mergeOptions$1(Z,U,z)),W.set(U,Z),Z}function mergeOptions$1(G,U,L,Y=!1){const{mixins:X,extends:W}=U;W&&mergeOptions$1(G,W,L,!0),X&&X.forEach(z=>mergeOptions$1(G,z,L,!0));for(const z in U)if(!(Y&&z==="expose")){const J=internalOptionMergeStrats[z]||L&&L[z];G[z]=J?J(G[z],U[z]):U[z]}return G}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(G,U){return U?G?function(){return extend$2(isFunction$2(G)?G.call(this,this):G,isFunction$2(U)?U.call(this,this):U)}:U:G}function mergeInject(G,U){return mergeObjectOptions(normalizeInject(G),normalizeInject(U))}function normalizeInject(G){if(isArray$3(G)){const U={};for(let L=0;L<G.length;L++)U[G[L]]=G[L];return U}return G}function mergeAsArray(G,U){return G?[...new Set([].concat(G,U))]:U}function mergeObjectOptions(G,U){return G?extend$2(extend$2(Object.create(null),G),U):U}function mergeWatchOptions(G,U){if(!G)return U;if(!U)return G;const L=extend$2(Object.create(null),G);for(const Y in U)L[Y]=mergeAsArray(G[Y],U[Y]);return L}function initProps(G,U,L,Y=!1){const X={},W={};def(W,InternalObjectKey,1),G.propsDefaults=Object.create(null),setFullProps(G,U,X,W);for(const z in G.propsOptions[0])z in X||(X[z]=void 0);L?G.props=Y?X:shallowReactive(X):G.type.props?G.props=X:G.props=W,G.attrs=W}function updateProps(G,U,L,Y){const{props:X,attrs:W,vnode:{patchFlag:z}}=G,J=toRaw(X),[Z]=G.propsOptions;let ee=!1;if((Y||z>0)&&!(z&16)){if(z&8){const te=G.vnode.dynamicProps;for(let re=0;re<te.length;re++){let ie=te[re];const ne=U[ie];if(Z)if(hasOwn(W,ie))ne!==W[ie]&&(W[ie]=ne,ee=!0);else{const oe=camelize$1(ie);X[oe]=resolvePropValue(Z,J,oe,ne,G,!1)}else ne!==W[ie]&&(W[ie]=ne,ee=!0)}}}else{setFullProps(G,U,X,W)&&(ee=!0);let te;for(const re in J)(!U||!hasOwn(U,re)&&((te=hyphenate(re))===re||!hasOwn(U,te)))&&(Z?L&&(L[re]!==void 0||L[te]!==void 0)&&(X[re]=resolvePropValue(Z,J,re,void 0,G,!0)):delete X[re]);if(W!==J)for(const re in W)(!U||!hasOwn(U,re)&&!0)&&(delete W[re],ee=!0)}ee&&trigger(G,"set","$attrs")}function setFullProps(G,U,L,Y){const[X,W]=G.propsOptions;let z=!1,J;if(U)for(let Z in U){if(isReservedProp(Z))continue;const ee=U[Z];let te;X&&hasOwn(X,te=camelize$1(Z))?!W||!W.includes(te)?L[te]=ee:(J||(J={}))[te]=ee:isEmitListener(G.emitsOptions,Z)||(!(Z in Y)||ee!==Y[Z])&&(Y[Z]=ee,z=!0)}if(W){const Z=toRaw(L),ee=J||EMPTY_OBJ;for(let te=0;te<W.length;te++){const re=W[te];L[re]=resolvePropValue(X,Z,re,ee[re],G,!hasOwn(ee,re))}}return z}function resolvePropValue(G,U,L,Y,X,W){const z=G[L];if(z!=null){const J=hasOwn(z,"default");if(J&&Y===void 0){const Z=z.default;if(z.type!==Function&&isFunction$2(Z)){const{propsDefaults:ee}=X;L in ee?Y=ee[L]:(setCurrentInstance(X),Y=ee[L]=Z.call(null,U),unsetCurrentInstance())}else Y=Z}z[0]&&(W&&!J?Y=!1:z[1]&&(Y===""||Y===hyphenate(L))&&(Y=!0))}return Y}function normalizePropsOptions(G,U,L=!1){const Y=U.propsCache,X=Y.get(G);if(X)return X;const W=G.props,z={},J=[];let Z=!1;if(!isFunction$2(G)){const te=re=>{Z=!0;const[ie,ne]=normalizePropsOptions(re,U,!0);extend$2(z,ie),ne&&J.push(...ne)};!L&&U.mixins.length&&U.mixins.forEach(te),G.extends&&te(G.extends),G.mixins&&G.mixins.forEach(te)}if(!W&&!Z)return Y.set(G,EMPTY_ARR),EMPTY_ARR;if(isArray$3(W))for(let te=0;te<W.length;te++){const re=camelize$1(W[te]);validatePropName(re)&&(z[re]=EMPTY_OBJ)}else if(W)for(const te in W){const re=camelize$1(te);if(validatePropName(re)){const ie=W[te],ne=z[re]=isArray$3(ie)||isFunction$2(ie)?{type:ie}:ie;if(ne){const oe=getTypeIndex(Boolean,ne.type),se=getTypeIndex(String,ne.type);ne[0]=oe>-1,ne[1]=se<0||oe<se,(oe>-1||hasOwn(ne,"default"))&&J.push(re)}}}const ee=[z,J];return Y.set(G,ee),ee}function validatePropName(G){return G[0]!=="$"}function getType(G){const U=G&&G.toString().match(/^\s*function (\w+)/);return U?U[1]:G===null?"null":""}function isSameType(G,U){return getType(G)===getType(U)}function getTypeIndex(G,U){return isArray$3(U)?U.findIndex(L=>isSameType(L,G)):isFunction$2(U)&&isSameType(U,G)?0:-1}const isInternalKey=G=>G[0]==="_"||G==="$stable",normalizeSlotValue=G=>isArray$3(G)?G.map(normalizeVNode):[normalizeVNode(G)],normalizeSlot$1=(G,U,L)=>{const Y=withCtx((...X)=>normalizeSlotValue(U(...X)),L);return Y._c=!1,Y},normalizeObjectSlots=(G,U,L)=>{const Y=G._ctx;for(const X in G){if(isInternalKey(X))continue;const W=G[X];if(isFunction$2(W))U[X]=normalizeSlot$1(X,W,Y);else if(W!=null){const z=normalizeSlotValue(W);U[X]=()=>z}}},normalizeVNodeSlots=(G,U)=>{const L=normalizeSlotValue(U);G.slots.default=()=>L},initSlots=(G,U)=>{if(G.vnode.shapeFlag&32){const L=U._;L?(G.slots=toRaw(U),def(U,"_",L)):normalizeObjectSlots(U,G.slots={})}else G.slots={},U&&normalizeVNodeSlots(G,U);def(G.slots,InternalObjectKey,1)},updateSlots=(G,U,L)=>{const{vnode:Y,slots:X}=G;let W=!0,z=EMPTY_OBJ;if(Y.shapeFlag&32){const J=U._;J?L&&J===1?W=!1:(extend$2(X,U),!L&&J===1&&delete X._):(W=!U.$stable,normalizeObjectSlots(U,X)),z=U}else U&&(normalizeVNodeSlots(G,U),z={default:1});if(W)for(const J in X)!isInternalKey(J)&&!(J in z)&&delete X[J]};function withDirectives(G,U){const L=currentRenderingInstance;if(L===null)return G;const Y=L.proxy,X=G.dirs||(G.dirs=[]);for(let W=0;W<U.length;W++){let[z,J,Z,ee=EMPTY_OBJ]=U[W];isFunction$2(z)&&(z={mounted:z,updated:z}),z.deep&&traverse(J),X.push({dir:z,instance:Y,value:J,oldValue:void 0,arg:Z,modifiers:ee})}return G}function invokeDirectiveHook(G,U,L,Y){const X=G.dirs,W=U&&U.dirs;for(let z=0;z<X.length;z++){const J=X[z];W&&(J.oldValue=W[z].value);let Z=J.dir[Y];Z&&(pauseTracking(),callWithAsyncErrorHandling(Z,L,8,[G.el,J,G,U]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$2=0;function createAppAPI(G,U){return function(Y,X=null){X!=null&&!isObject$4(X)&&(X=null);const W=createAppContext(),z=new Set;let J=!1;const Z=W.app={_uid:uid$2++,_component:Y,_props:X,_container:null,_context:W,_instance:null,version,get config(){return W.config},set config(ee){},use(ee,...te){return z.has(ee)||(ee&&isFunction$2(ee.install)?(z.add(ee),ee.install(Z,...te)):isFunction$2(ee)&&(z.add(ee),ee(Z,...te))),Z},mixin(ee){return W.mixins.includes(ee)||W.mixins.push(ee),Z},component(ee,te){return te?(W.components[ee]=te,Z):W.components[ee]},directive(ee,te){return te?(W.directives[ee]=te,Z):W.directives[ee]},mount(ee,te,re){if(!J){const ie=createVNode(Y,X);return ie.appContext=W,te&&U?U(ie,ee):G(ie,ee,re),J=!0,Z._container=ee,ee.__vue_app__=Z,getExposeProxy(ie.component)||ie.component.proxy}},unmount(){J&&(G(null,Z._container),delete Z._container.__vue_app__)},provide(ee,te){return W.provides[ee]=te,Z}};return Z}}function setRef(G,U,L,Y,X=!1){if(isArray$3(G)){G.forEach((ie,ne)=>setRef(ie,U&&(isArray$3(U)?U[ne]:U),L,Y,X));return}if(isAsyncWrapper(Y)&&!X)return;const W=Y.shapeFlag&4?getExposeProxy(Y.component)||Y.component.proxy:Y.el,z=X?null:W,{i:J,r:Z}=G,ee=U&&U.r,te=J.refs===EMPTY_OBJ?J.refs={}:J.refs,re=J.setupState;if(ee!=null&&ee!==Z&&(isString$1(ee)?(te[ee]=null,hasOwn(re,ee)&&(re[ee]=null)):isRef(ee)&&(ee.value=null)),isFunction$2(Z))callWithErrorHandling(Z,J,12,[z,te]);else{const ie=isString$1(Z),ne=isRef(Z);if(ie||ne){const oe=()=>{if(G.f){const se=ie?te[Z]:Z.value;X?isArray$3(se)&&remove(se,W):isArray$3(se)?se.includes(W)||se.push(W):ie?te[Z]=[W]:(Z.value=[W],G.k&&(te[G.k]=Z.value))}else ie?(te[Z]=z,hasOwn(re,Z)&&(re[Z]=z)):isRef(Z)&&(Z.value=z,G.k&&(te[G.k]=z))};z?(oe.id=-1,queuePostRenderEffect(oe,L)):oe()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(G){return baseCreateRenderer(G)}function baseCreateRenderer(G,U){const L=getGlobalThis();L.__VUE__=!0;const{insert:Y,remove:X,patchProp:W,createElement:z,createText:J,createComment:Z,setText:ee,setElementText:te,parentNode:re,nextSibling:ie,setScopeId:ne=NOOP,cloneNode:oe,insertStaticContent:se}=G,ae=(pe,ge,Ee,Ce=null,Fe=null,Be=null,qe=!1,je=null,We=!!ge.dynamicChildren)=>{if(pe===ge)return;pe&&!isSameVNodeType(pe,ge)&&(Ce=Ye(pe),Qe(pe,Fe,Be,!0),pe=null),ge.patchFlag===-2&&(We=!1,ge.dynamicChildren=null);const{type:Ge,ref:lt,shapeFlag:at}=ge;switch(Ge){case Text$1:le(pe,ge,Ee,Ce);break;case Comment:ue(pe,ge,Ee,Ce);break;case Static:pe==null&&ce(ge,Ee,Ce,qe);break;case Fragment:Se(pe,ge,Ee,Ce,Fe,Be,qe,je,We);break;default:at&1?de(pe,ge,Ee,Ce,Fe,Be,qe,je,We):at&6?Ue(pe,ge,Ee,Ce,Fe,Be,qe,je,We):(at&64||at&128)&&Ge.process(pe,ge,Ee,Ce,Fe,Be,qe,je,We,Re)}lt!=null&&Fe&&setRef(lt,pe&&pe.ref,Be,ge||pe,!ge)},le=(pe,ge,Ee,Ce)=>{if(pe==null)Y(ge.el=J(ge.children),Ee,Ce);else{const Fe=ge.el=pe.el;ge.children!==pe.children&&ee(Fe,ge.children)}},ue=(pe,ge,Ee,Ce)=>{pe==null?Y(ge.el=Z(ge.children||""),Ee,Ce):ge.el=pe.el},ce=(pe,ge,Ee,Ce)=>{[pe.el,pe.anchor]=se(pe.children,ge,Ee,Ce,pe.el,pe.anchor)},he=({el:pe,anchor:ge},Ee,Ce)=>{let Fe;for(;pe&&pe!==ge;)Fe=ie(pe),Y(pe,Ee,Ce),pe=Fe;Y(ge,Ee,Ce)},fe=({el:pe,anchor:ge})=>{let Ee;for(;pe&&pe!==ge;)Ee=ie(pe),X(pe),pe=Ee;X(ge)},de=(pe,ge,Ee,Ce,Fe,Be,qe,je,We)=>{qe=qe||ge.type==="svg",pe==null?_e(ge,Ee,Ce,Fe,Be,qe,je,We):ye(pe,ge,Fe,Be,qe,je,We)},_e=(pe,ge,Ee,Ce,Fe,Be,qe,je)=>{let We,Ge;const{type:lt,props:at,shapeFlag:ct,transition:ft,patchFlag:Et,dirs:Mt}=pe;if(pe.el&&oe!==void 0&&Et===-1)We=pe.el=oe(pe.el);else{if(We=pe.el=z(pe.type,Be,at&&at.is,at),ct&8?te(We,pe.children):ct&16&&ve(pe.children,We,null,Ce,Fe,Be&&lt!=="foreignObject",qe,je),Mt&&invokeDirectiveHook(pe,null,Ce,"created"),at){for(const Dt in at)Dt!=="value"&&!isReservedProp(Dt)&&W(We,Dt,null,at[Dt],Be,pe.children,Ce,Fe,Me);"value"in at&&W(We,"value",null,at.value),(Ge=at.onVnodeBeforeMount)&&invokeVNodeHook(Ge,Ce,pe)}me(We,pe,pe.scopeId,qe,Ce)}Mt&&invokeDirectiveHook(pe,null,Ce,"beforeMount");const xt=(!Fe||Fe&&!Fe.pendingBranch)&&ft&&!ft.persisted;xt&&ft.beforeEnter(We),Y(We,ge,Ee),((Ge=at&&at.onVnodeMounted)||xt||Mt)&&queuePostRenderEffect(()=>{Ge&&invokeVNodeHook(Ge,Ce,pe),xt&&ft.enter(We),Mt&&invokeDirectiveHook(pe,null,Ce,"mounted")},Fe)},me=(pe,ge,Ee,Ce,Fe)=>{if(Ee&&ne(pe,Ee),Ce)for(let Be=0;Be<Ce.length;Be++)ne(pe,Ce[Be]);if(Fe){let Be=Fe.subTree;if(ge===Be){const qe=Fe.vnode;me(pe,qe,qe.scopeId,qe.slotScopeIds,Fe.parent)}}},ve=(pe,ge,Ee,Ce,Fe,Be,qe,je,We=0)=>{for(let Ge=We;Ge<pe.length;Ge++){const lt=pe[Ge]=je?cloneIfMounted(pe[Ge]):normalizeVNode(pe[Ge]);ae(null,lt,ge,Ee,Ce,Fe,Be,qe,je)}},ye=(pe,ge,Ee,Ce,Fe,Be,qe)=>{const je=ge.el=pe.el;let{patchFlag:We,dynamicChildren:Ge,dirs:lt}=ge;We|=pe.patchFlag&16;const at=pe.props||EMPTY_OBJ,ct=ge.props||EMPTY_OBJ;let ft;Ee&&toggleRecurse(Ee,!1),(ft=ct.onVnodeBeforeUpdate)&&invokeVNodeHook(ft,Ee,ge,pe),lt&&invokeDirectiveHook(ge,pe,Ee,"beforeUpdate"),Ee&&toggleRecurse(Ee,!0);const Et=Fe&&ge.type!=="foreignObject";if(Ge?be(pe.dynamicChildren,Ge,je,Ee,Ce,Et,Be):qe||Ze(pe,ge,je,null,Ee,Ce,Et,Be,!1),We>0){if(We&16)Te(je,ge,at,ct,Ee,Ce,Fe);else if(We&2&&at.class!==ct.class&&W(je,"class",null,ct.class,Fe),We&4&&W(je,"style",at.style,ct.style,Fe),We&8){const Mt=ge.dynamicProps;for(let xt=0;xt<Mt.length;xt++){const Dt=Mt[xt],Wt=at[Dt],nr=ct[Dt];(nr!==Wt||Dt==="value")&&W(je,Dt,Wt,nr,Fe,pe.children,Ee,Ce,Me)}}We&1&&pe.children!==ge.children&&te(je,ge.children)}else!qe&&Ge==null&&Te(je,ge,at,ct,Ee,Ce,Fe);((ft=ct.onVnodeUpdated)||lt)&&queuePostRenderEffect(()=>{ft&&invokeVNodeHook(ft,Ee,ge,pe),lt&&invokeDirectiveHook(ge,pe,Ee,"updated")},Ce)},be=(pe,ge,Ee,Ce,Fe,Be,qe)=>{for(let je=0;je<ge.length;je++){const We=pe[je],Ge=ge[je],lt=We.el&&(We.type===Fragment||!isSameVNodeType(We,Ge)||We.shapeFlag&70)?re(We.el):Ee;ae(We,Ge,lt,null,Ce,Fe,Be,qe,!0)}},Te=(pe,ge,Ee,Ce,Fe,Be,qe)=>{if(Ee!==Ce){for(const je in Ce){if(isReservedProp(je))continue;const We=Ce[je],Ge=Ee[je];We!==Ge&&je!=="value"&&W(pe,je,Ge,We,qe,ge.children,Fe,Be,Me)}if(Ee!==EMPTY_OBJ)for(const je in Ee)!isReservedProp(je)&&!(je in Ce)&&W(pe,je,Ee[je],null,qe,ge.children,Fe,Be,Me);"value"in Ce&&W(pe,"value",Ee.value,Ce.value)}},Se=(pe,ge,Ee,Ce,Fe,Be,qe,je,We)=>{const Ge=ge.el=pe?pe.el:J(""),lt=ge.anchor=pe?pe.anchor:J("");let{patchFlag:at,dynamicChildren:ct,slotScopeIds:ft}=ge;ft&&(je=je?je.concat(ft):ft),pe==null?(Y(Ge,Ee,Ce),Y(lt,Ee,Ce),ve(ge.children,Ee,lt,Fe,Be,qe,je,We)):at>0&&at&64&&ct&&pe.dynamicChildren?(be(pe.dynamicChildren,ct,Ee,Fe,Be,qe,je),(ge.key!=null||Fe&&ge===Fe.subTree)&&traverseStaticChildren(pe,ge,!0)):Ze(pe,ge,Ee,lt,Fe,Be,qe,je,We)},Ue=(pe,ge,Ee,Ce,Fe,Be,qe,je,We)=>{ge.slotScopeIds=je,pe==null?ge.shapeFlag&512?Fe.ctx.activate(ge,Ee,Ce,qe,We):Pe(ge,Ee,Ce,Fe,Be,qe,We):Ne(pe,ge,We)},Pe=(pe,ge,Ee,Ce,Fe,Be,qe)=>{const je=pe.component=createComponentInstance(pe,Ce,Fe);if(isKeepAlive(pe)&&(je.ctx.renderer=Re),setupComponent(je),je.asyncDep){if(Fe&&Fe.registerDep(je,Ve),!pe.el){const We=je.subTree=createVNode(Comment);ue(null,We,ge,Ee)}return}Ve(je,pe,ge,Ee,Fe,Be,qe)},Ne=(pe,ge,Ee)=>{const Ce=ge.component=pe.component;if(shouldUpdateComponent(pe,ge,Ee))if(Ce.asyncDep&&!Ce.asyncResolved){ze(Ce,ge,Ee);return}else Ce.next=ge,invalidateJob(Ce.update),Ce.update();else ge.component=pe.component,ge.el=pe.el,Ce.vnode=ge},Ve=(pe,ge,Ee,Ce,Fe,Be,qe)=>{const je=()=>{if(pe.isMounted){let{next:lt,bu:at,u:ct,parent:ft,vnode:Et}=pe,Mt=lt,xt;toggleRecurse(pe,!1),lt?(lt.el=Et.el,ze(pe,lt,qe)):lt=Et,at&&invokeArrayFns(at),(xt=lt.props&&lt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(xt,ft,lt,Et),toggleRecurse(pe,!0);const Dt=renderComponentRoot(pe),Wt=pe.subTree;pe.subTree=Dt,ae(Wt,Dt,re(Wt.el),Ye(Wt),pe,Fe,Be),lt.el=Dt.el,Mt===null&&updateHOCHostEl(pe,Dt.el),ct&&queuePostRenderEffect(ct,Fe),(xt=lt.props&&lt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(xt,ft,lt,Et),Fe)}else{let lt;const{el:at,props:ct}=ge,{bm:ft,m:Et,parent:Mt}=pe,xt=isAsyncWrapper(ge);if(toggleRecurse(pe,!1),ft&&invokeArrayFns(ft),!xt&&(lt=ct&&ct.onVnodeBeforeMount)&&invokeVNodeHook(lt,Mt,ge),toggleRecurse(pe,!0),at&&Le){const Dt=()=>{pe.subTree=renderComponentRoot(pe),Le(at,pe.subTree,pe,Fe,null)};xt?ge.type.__asyncLoader().then(()=>!pe.isUnmounted&&Dt()):Dt()}else{const Dt=pe.subTree=renderComponentRoot(pe);ae(null,Dt,Ee,Ce,pe,Fe,Be),ge.el=Dt.el}if(Et&&queuePostRenderEffect(Et,Fe),!xt&&(lt=ct&&ct.onVnodeMounted)){const Dt=ge;queuePostRenderEffect(()=>invokeVNodeHook(lt,Mt,Dt),Fe)}ge.shapeFlag&256&&pe.a&&queuePostRenderEffect(pe.a,Fe),pe.isMounted=!0,ge=Ee=Ce=null}},We=pe.effect=new ReactiveEffect(je,()=>queueJob(pe.update),pe.scope),Ge=pe.update=We.run.bind(We);Ge.id=pe.uid,toggleRecurse(pe,!0),Ge()},ze=(pe,ge,Ee)=>{ge.component=pe;const Ce=pe.vnode.props;pe.vnode=ge,pe.next=null,updateProps(pe,ge.props,Ce,Ee),updateSlots(pe,ge.children,Ee),pauseTracking(),flushPreFlushCbs(void 0,pe.update),resetTracking()},Ze=(pe,ge,Ee,Ce,Fe,Be,qe,je,We=!1)=>{const Ge=pe&&pe.children,lt=pe?pe.shapeFlag:0,at=ge.children,{patchFlag:ct,shapeFlag:ft}=ge;if(ct>0){if(ct&128){De(Ge,at,Ee,Ce,Fe,Be,qe,je,We);return}else if(ct&256){Ae(Ge,at,Ee,Ce,Fe,Be,qe,je,We);return}}ft&8?(lt&16&&Me(Ge,Fe,Be),at!==Ge&&te(Ee,at)):lt&16?ft&16?De(Ge,at,Ee,Ce,Fe,Be,qe,je,We):Me(Ge,Fe,Be,!0):(lt&8&&te(Ee,""),ft&16&&ve(at,Ee,Ce,Fe,Be,qe,je,We))},Ae=(pe,ge,Ee,Ce,Fe,Be,qe,je,We)=>{pe=pe||EMPTY_ARR,ge=ge||EMPTY_ARR;const Ge=pe.length,lt=ge.length,at=Math.min(Ge,lt);let ct;for(ct=0;ct<at;ct++){const ft=ge[ct]=We?cloneIfMounted(ge[ct]):normalizeVNode(ge[ct]);ae(pe[ct],ft,Ee,null,Fe,Be,qe,je,We)}Ge>lt?Me(pe,Fe,Be,!0,!1,at):ve(ge,Ee,Ce,Fe,Be,qe,je,We,at)},De=(pe,ge,Ee,Ce,Fe,Be,qe,je,We)=>{let Ge=0;const lt=ge.length;let at=pe.length-1,ct=lt-1;for(;Ge<=at&&Ge<=ct;){const ft=pe[Ge],Et=ge[Ge]=We?cloneIfMounted(ge[Ge]):normalizeVNode(ge[Ge]);if(isSameVNodeType(ft,Et))ae(ft,Et,Ee,null,Fe,Be,qe,je,We);else break;Ge++}for(;Ge<=at&&Ge<=ct;){const ft=pe[at],Et=ge[ct]=We?cloneIfMounted(ge[ct]):normalizeVNode(ge[ct]);if(isSameVNodeType(ft,Et))ae(ft,Et,Ee,null,Fe,Be,qe,je,We);else break;at--,ct--}if(Ge>at){if(Ge<=ct){const ft=ct+1,Et=ft<lt?ge[ft].el:Ce;for(;Ge<=ct;)ae(null,ge[Ge]=We?cloneIfMounted(ge[Ge]):normalizeVNode(ge[Ge]),Ee,Et,Fe,Be,qe,je,We),Ge++}}else if(Ge>ct)for(;Ge<=at;)Qe(pe[Ge],Fe,Be,!0),Ge++;else{const ft=Ge,Et=Ge,Mt=new Map;for(Ge=Et;Ge<=ct;Ge++){const qt=ge[Ge]=We?cloneIfMounted(ge[Ge]):normalizeVNode(ge[Ge]);qt.key!=null&&Mt.set(qt.key,Ge)}let xt,Dt=0;const Wt=ct-Et+1;let nr=!1,br=0;const ur=new Array(Wt);for(Ge=0;Ge<Wt;Ge++)ur[Ge]=0;for(Ge=ft;Ge<=at;Ge++){const qt=pe[Ge];if(Dt>=Wt){Qe(qt,Fe,Be,!0);continue}let zt;if(qt.key!=null)zt=Mt.get(qt.key);else for(xt=Et;xt<=ct;xt++)if(ur[xt-Et]===0&&isSameVNodeType(qt,ge[xt])){zt=xt;break}zt===void 0?Qe(qt,Fe,Be,!0):(ur[zt-Et]=Ge+1,zt>=br?br=zt:nr=!0,ae(qt,ge[zt],Ee,null,Fe,Be,qe,je,We),Dt++)}const Ir=nr?getSequence(ur):EMPTY_ARR;for(xt=Ir.length-1,Ge=Wt-1;Ge>=0;Ge--){const qt=Et+Ge,zt=ge[qt],Cr=qt+1<lt?ge[qt+1].el:Ce;ur[Ge]===0?ae(null,zt,Ee,Cr,Fe,Be,qe,je,We):nr&&(xt<0||Ge!==Ir[xt]?Ke(zt,Ee,Cr,2):xt--)}}},Ke=(pe,ge,Ee,Ce,Fe=null)=>{const{el:Be,type:qe,transition:je,children:We,shapeFlag:Ge}=pe;if(Ge&6){Ke(pe.component.subTree,ge,Ee,Ce);return}if(Ge&128){pe.suspense.move(ge,Ee,Ce);return}if(Ge&64){qe.move(pe,ge,Ee,Re);return}if(qe===Fragment){Y(Be,ge,Ee);for(let at=0;at<We.length;at++)Ke(We[at],ge,Ee,Ce);Y(pe.anchor,ge,Ee);return}if(qe===Static){he(pe,ge,Ee);return}if(Ce!==2&&Ge&1&&je)if(Ce===0)je.beforeEnter(Be),Y(Be,ge,Ee),queuePostRenderEffect(()=>je.enter(Be),Fe);else{const{leave:at,delayLeave:ct,afterLeave:ft}=je,Et=()=>Y(Be,ge,Ee),Mt=()=>{at(Be,()=>{Et(),ft&&ft()})};ct?ct(Be,Et,Mt):Mt()}else Y(Be,ge,Ee)},Qe=(pe,ge,Ee,Ce=!1,Fe=!1)=>{const{type:Be,props:qe,ref:je,children:We,dynamicChildren:Ge,shapeFlag:lt,patchFlag:at,dirs:ct}=pe;if(je!=null&&setRef(je,null,Ee,pe,!0),lt&256){ge.ctx.deactivate(pe);return}const ft=lt&1&&ct,Et=!isAsyncWrapper(pe);let Mt;if(Et&&(Mt=qe&&qe.onVnodeBeforeUnmount)&&invokeVNodeHook(Mt,ge,pe),lt&6)ke(pe.component,Ee,Ce);else{if(lt&128){pe.suspense.unmount(Ee,Ce);return}ft&&invokeDirectiveHook(pe,null,ge,"beforeUnmount"),lt&64?pe.type.remove(pe,ge,Ee,Fe,Re,Ce):Ge&&(Be!==Fragment||at>0&&at&64)?Me(Ge,ge,Ee,!1,!0):(Be===Fragment&&at&384||!Fe&&lt&16)&&Me(We,ge,Ee),Ce&&tt(pe)}(Et&&(Mt=qe&&qe.onVnodeUnmounted)||ft)&&queuePostRenderEffect(()=>{Mt&&invokeVNodeHook(Mt,ge,pe),ft&&invokeDirectiveHook(pe,null,ge,"unmounted")},Ee)},tt=pe=>{const{type:ge,el:Ee,anchor:Ce,transition:Fe}=pe;if(ge===Fragment){Ie(Ee,Ce);return}if(ge===Static){fe(pe);return}const Be=()=>{X(Ee),Fe&&!Fe.persisted&&Fe.afterLeave&&Fe.afterLeave()};if(pe.shapeFlag&1&&Fe&&!Fe.persisted){const{leave:qe,delayLeave:je}=Fe,We=()=>qe(Ee,Be);je?je(pe.el,Be,We):We()}else Be()},Ie=(pe,ge)=>{let Ee;for(;pe!==ge;)Ee=ie(pe),X(pe),pe=Ee;X(ge)},ke=(pe,ge,Ee)=>{const{bum:Ce,scope:Fe,update:Be,subTree:qe,um:je}=pe;Ce&&invokeArrayFns(Ce),Fe.stop(),Be&&(Be.active=!1,Qe(qe,pe,ge,Ee)),je&&queuePostRenderEffect(je,ge),queuePostRenderEffect(()=>{pe.isUnmounted=!0},ge),ge&&ge.pendingBranch&&!ge.isUnmounted&&pe.asyncDep&&!pe.asyncResolved&&pe.suspenseId===ge.pendingId&&(ge.deps--,ge.deps===0&&ge.resolve())},Me=(pe,ge,Ee,Ce=!1,Fe=!1,Be=0)=>{for(let qe=Be;qe<pe.length;qe++)Qe(pe[qe],ge,Ee,Ce,Fe)},Ye=pe=>pe.shapeFlag&6?Ye(pe.component.subTree):pe.shapeFlag&128?pe.suspense.next():ie(pe.anchor||pe.el),xe=(pe,ge,Ee)=>{pe==null?ge._vnode&&Qe(ge._vnode,null,null,!0):ae(ge._vnode||null,pe,ge,null,null,null,Ee),flushPostFlushCbs(),ge._vnode=pe},Re={p:ae,um:Qe,m:Ke,r:tt,mt:Pe,mc:ve,pc:Ze,pbc:be,n:Ye,o:G};let we,Le;return U&&([we,Le]=U(Re)),{render:xe,hydrate:we,createApp:createAppAPI(xe,we)}}function toggleRecurse({effect:G,update:U},L){G.allowRecurse=U.allowRecurse=L}function traverseStaticChildren(G,U,L=!1){const Y=G.children,X=U.children;if(isArray$3(Y)&&isArray$3(X))for(let W=0;W<Y.length;W++){const z=Y[W];let J=X[W];J.shapeFlag&1&&!J.dynamicChildren&&((J.patchFlag<=0||J.patchFlag===32)&&(J=X[W]=cloneIfMounted(X[W]),J.el=z.el),L||traverseStaticChildren(z,J))}}function getSequence(G){const U=G.slice(),L=[0];let Y,X,W,z,J;const Z=G.length;for(Y=0;Y<Z;Y++){const ee=G[Y];if(ee!==0){if(X=L[L.length-1],G[X]<ee){U[Y]=X,L.push(Y);continue}for(W=0,z=L.length-1;W<z;)J=W+z>>1,G[L[J]]<ee?W=J+1:z=J;ee<G[L[W]]&&(W>0&&(U[Y]=L[W-1]),L[W]=Y)}}for(W=L.length,z=L[W-1];W-- >0;)L[W]=z,z=U[z];return L}const isTeleport=G=>G.__isTeleport,isTeleportDisabled=G=>G&&(G.disabled||G.disabled===""),isTargetSVG=G=>typeof SVGElement!="undefined"&&G instanceof SVGElement,resolveTarget=(G,U)=>{const L=G&&G.to;return isString$1(L)?U?U(L):null:L},TeleportImpl={__isTeleport:!0,process(G,U,L,Y,X,W,z,J,Z,ee){const{mc:te,pc:re,pbc:ie,o:{insert:ne,querySelector:oe,createText:se,createComment:ae}}=ee,le=isTeleportDisabled(U.props);let{shapeFlag:ue,children:ce,dynamicChildren:he}=U;if(G==null){const fe=U.el=se(""),de=U.anchor=se("");ne(fe,L,Y),ne(de,L,Y);const _e=U.target=resolveTarget(U.props,oe),me=U.targetAnchor=se("");_e&&(ne(me,_e),z=z||isTargetSVG(_e));const ve=(ye,be)=>{ue&16&&te(ce,ye,be,X,W,z,J,Z)};le?ve(L,de):_e&&ve(_e,me)}else{U.el=G.el;const fe=U.anchor=G.anchor,de=U.target=G.target,_e=U.targetAnchor=G.targetAnchor,me=isTeleportDisabled(G.props),ve=me?L:de,ye=me?fe:_e;if(z=z||isTargetSVG(de),he?(ie(G.dynamicChildren,he,ve,X,W,z,J),traverseStaticChildren(G,U,!0)):Z||re(G,U,ve,ye,X,W,z,J,!1),le)me||moveTeleport(U,L,fe,ee,1);else if((U.props&&U.props.to)!==(G.props&&G.props.to)){const be=U.target=resolveTarget(U.props,oe);be&&moveTeleport(U,be,null,ee,0)}else me&&moveTeleport(U,de,_e,ee,1)}},remove(G,U,L,Y,{um:X,o:{remove:W}},z){const{shapeFlag:J,children:Z,anchor:ee,targetAnchor:te,target:re,props:ie}=G;if(re&&W(te),(z||!isTeleportDisabled(ie))&&(W(ee),J&16))for(let ne=0;ne<Z.length;ne++){const oe=Z[ne];X(oe,U,L,!0,!!oe.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(G,U,L,{o:{insert:Y},m:X},W=2){W===0&&Y(G.targetAnchor,U,L);const{el:z,anchor:J,shapeFlag:Z,children:ee,props:te}=G,re=W===2;if(re&&Y(z,U,L),(!re||isTeleportDisabled(te))&&Z&16)for(let ie=0;ie<ee.length;ie++)X(ee[ie],U,L,2);re&&Y(J,U,L)}function hydrateTeleport(G,U,L,Y,X,W,{o:{nextSibling:z,parentNode:J,querySelector:Z}},ee){const te=U.target=resolveTarget(U.props,Z);if(te){const re=te._lpa||te.firstChild;U.shapeFlag&16&&(isTeleportDisabled(U.props)?(U.anchor=ee(z(G),U,J(G),L,Y,X,W),U.targetAnchor=re):(U.anchor=z(G),U.targetAnchor=ee(re,U,te,L,Y,X,W)),te._lpa=U.targetAnchor&&z(U.targetAnchor))}return U.anchor&&z(U.anchor)}const Teleport=TeleportImpl,COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(G,U){return resolveAsset(COMPONENTS,G,!0,U)||G}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDirective(G){return resolveAsset(DIRECTIVES,G)}function resolveAsset(G,U,L=!0,Y=!1){const X=currentRenderingInstance||currentInstance;if(X){const W=X.type;if(G===COMPONENTS){const J=getComponentName(W);if(J&&(J===U||J===camelize$1(U)||J===capitalize(camelize$1(U))))return W}const z=resolve$3(X[G]||W[G],U)||resolve$3(X.appContext[G],U);return!z&&Y?W:z}}function resolve$3(G,U){return G&&(G[U]||G[camelize$1(U)]||G[capitalize(camelize$1(U))])}const Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(G=!1){blockStack.push(currentBlock=G?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(G){isBlockTreeEnabled+=G}function setupBlock(G){return G.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(G),G}function createElementBlock(G,U,L,Y,X,W){return setupBlock(createBaseVNode(G,U,L,Y,X,W,!0))}function createBlock(G,U,L,Y,X){return setupBlock(createVNode(G,U,L,Y,X,!0))}function isVNode(G){return G?G.__v_isVNode===!0:!1}function isSameVNodeType(G,U){return G.type===U.type&&G.key===U.key}const InternalObjectKey="__vInternal",normalizeKey=({key:G})=>G!=null?G:null,normalizeRef=({ref:G,ref_key:U,ref_for:L})=>G!=null?isString$1(G)||isRef(G)||isFunction$2(G)?{i:currentRenderingInstance,r:G,k:U,f:!!L}:G:null;function createBaseVNode(G,U=null,L=null,Y=0,X=null,W=G===Fragment?0:1,z=!1,J=!1){const Z={__v_isVNode:!0,__v_skip:!0,type:G,props:U,key:U&&normalizeKey(U),ref:U&&normalizeRef(U),scopeId:currentScopeId,slotScopeIds:null,children:L,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:W,patchFlag:Y,dynamicProps:X,dynamicChildren:null,appContext:null};return J?(normalizeChildren(Z,L),W&128&&G.normalize(Z)):L&&(Z.shapeFlag|=isString$1(L)?8:16),isBlockTreeEnabled>0&&!z&&currentBlock&&(Z.patchFlag>0||W&6)&&Z.patchFlag!==32&&currentBlock.push(Z),Z}const createVNode=_createVNode;function _createVNode(G,U=null,L=null,Y=0,X=null,W=!1){if((!G||G===NULL_DYNAMIC_COMPONENT)&&(G=Comment),isVNode(G)){const J=cloneVNode(G,U,!0);return L&&normalizeChildren(J,L),J}if(isClassComponent(G)&&(G=G.__vccOpts),U){U=guardReactiveProps(U);let{class:J,style:Z}=U;J&&!isString$1(J)&&(U.class=normalizeClass(J)),isObject$4(Z)&&(isProxy(Z)&&!isArray$3(Z)&&(Z=extend$2({},Z)),U.style=normalizeStyle(Z))}const z=isString$1(G)?1:isSuspense(G)?128:isTeleport(G)?64:isObject$4(G)?4:isFunction$2(G)?2:0;return createBaseVNode(G,U,L,Y,X,z,W,!0)}function guardReactiveProps(G){return G?isProxy(G)||InternalObjectKey in G?extend$2({},G):G:null}function cloneVNode(G,U,L=!1){const{props:Y,ref:X,patchFlag:W,children:z}=G,J=U?mergeProps(Y||{},U):Y;return{__v_isVNode:!0,__v_skip:!0,type:G.type,props:J,key:J&&normalizeKey(J),ref:U&&U.ref?L&&X?isArray$3(X)?X.concat(normalizeRef(U)):[X,normalizeRef(U)]:normalizeRef(U):X,scopeId:G.scopeId,slotScopeIds:G.slotScopeIds,children:z,target:G.target,targetAnchor:G.targetAnchor,staticCount:G.staticCount,shapeFlag:G.shapeFlag,patchFlag:U&&G.type!==Fragment?W===-1?16:W|16:W,dynamicProps:G.dynamicProps,dynamicChildren:G.dynamicChildren,appContext:G.appContext,dirs:G.dirs,transition:G.transition,component:G.component,suspense:G.suspense,ssContent:G.ssContent&&cloneVNode(G.ssContent),ssFallback:G.ssFallback&&cloneVNode(G.ssFallback),el:G.el,anchor:G.anchor}}function createTextVNode(G=" ",U=0){return createVNode(Text$1,null,G,U)}function createStaticVNode(G,U){const L=createVNode(Static,null,G);return L.staticCount=U,L}function createCommentVNode(G="",U=!1){return U?(openBlock(),createBlock(Comment,null,G)):createVNode(Comment,null,G)}function normalizeVNode(G){return G==null||typeof G=="boolean"?createVNode(Comment):isArray$3(G)?createVNode(Fragment,null,G.slice()):typeof G=="object"?cloneIfMounted(G):createVNode(Text$1,null,String(G))}function cloneIfMounted(G){return G.el===null||G.memo?G:cloneVNode(G)}function normalizeChildren(G,U){let L=0;const{shapeFlag:Y}=G;if(U==null)U=null;else if(isArray$3(U))L=16;else if(typeof U=="object")if(Y&65){const X=U.default;X&&(X._c&&(X._d=!1),normalizeChildren(G,X()),X._c&&(X._d=!0));return}else{L=32;const X=U._;!X&&!(InternalObjectKey in U)?U._ctx=currentRenderingInstance:X===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?U._=1:(U._=2,G.patchFlag|=1024))}else isFunction$2(U)?(U={default:U,_ctx:currentRenderingInstance},L=32):(U=String(U),Y&64?(L=16,U=[createTextVNode(U)]):L=8);G.children=U,G.shapeFlag|=L}function mergeProps(...G){const U={};for(let L=0;L<G.length;L++){const Y=G[L];for(const X in Y)if(X==="class")U.class!==Y.class&&(U.class=normalizeClass([U.class,Y.class]));else if(X==="style")U.style=normalizeStyle([U.style,Y.style]);else if(isOn(X)){const W=U[X],z=Y[X];z&&W!==z&&!(isArray$3(W)&&W.includes(z))&&(U[X]=W?[].concat(W,z):z)}else X!==""&&(U[X]=Y[X])}return U}function invokeVNodeHook(G,U,L,Y=null){callWithAsyncErrorHandling(G,U,7,[L,Y])}function renderList(G,U,L,Y){let X;const W=L&&L[Y];if(isArray$3(G)||isString$1(G)){X=new Array(G.length);for(let z=0,J=G.length;z<J;z++)X[z]=U(G[z],z,void 0,W&&W[z])}else if(typeof G=="number"){X=new Array(G);for(let z=0;z<G;z++)X[z]=U(z+1,z,void 0,W&&W[z])}else if(isObject$4(G))if(G[Symbol.iterator])X=Array.from(G,(z,J)=>U(z,J,void 0,W&&W[J]));else{const z=Object.keys(G);X=new Array(z.length);for(let J=0,Z=z.length;J<Z;J++){const ee=z[J];X[J]=U(G[ee],ee,J,W&&W[J])}}else X=[];return L&&(L[Y]=X),X}function renderSlot(G,U,L={},Y,X){if(currentRenderingInstance.isCE)return createVNode("slot",U==="default"?null:{name:U},Y&&Y());let W=G[U];W&&W._c&&(W._d=!1),openBlock();const z=W&&ensureValidVNode(W(L)),J=createBlock(Fragment,{key:L.key||`_${U}`},z||(Y?Y():[]),z&&G._===1?64:-2);return!X&&J.scopeId&&(J.slotScopeIds=[J.scopeId+"-s"]),W&&W._c&&(W._d=!0),J}function ensureValidVNode(G){return G.some(U=>isVNode(U)?!(U.type===Comment||U.type===Fragment&&!ensureValidVNode(U.children)):!0)?G:null}const getPublicInstance=G=>G?isStatefulComponent(G)?getExposeProxy(G)||G.proxy:getPublicInstance(G.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:G=>G,$el:G=>G.vnode.el,$data:G=>G.data,$props:G=>G.props,$attrs:G=>G.attrs,$slots:G=>G.slots,$refs:G=>G.refs,$parent:G=>getPublicInstance(G.parent),$root:G=>getPublicInstance(G.root),$emit:G=>G.emit,$options:G=>resolveMergedOptions(G),$forceUpdate:G=>()=>queueJob(G.update),$nextTick:G=>nextTick.bind(G.proxy),$watch:G=>instanceWatch.bind(G)}),PublicInstanceProxyHandlers={get({_:G},U){const{ctx:L,setupState:Y,data:X,props:W,accessCache:z,type:J,appContext:Z}=G;let ee;if(U[0]!=="$"){const ne=z[U];if(ne!==void 0)switch(ne){case 1:return Y[U];case 2:return X[U];case 4:return L[U];case 3:return W[U]}else{if(Y!==EMPTY_OBJ&&hasOwn(Y,U))return z[U]=1,Y[U];if(X!==EMPTY_OBJ&&hasOwn(X,U))return z[U]=2,X[U];if((ee=G.propsOptions[0])&&hasOwn(ee,U))return z[U]=3,W[U];if(L!==EMPTY_OBJ&&hasOwn(L,U))return z[U]=4,L[U];shouldCacheAccess&&(z[U]=0)}}const te=publicPropertiesMap[U];let re,ie;if(te)return U==="$attrs"&&track(G,"get",U),te(G);if((re=J.__cssModules)&&(re=re[U]))return re;if(L!==EMPTY_OBJ&&hasOwn(L,U))return z[U]=4,L[U];if(ie=Z.config.globalProperties,hasOwn(ie,U))return ie[U]},set({_:G},U,L){const{data:Y,setupState:X,ctx:W}=G;return X!==EMPTY_OBJ&&hasOwn(X,U)?(X[U]=L,!0):Y!==EMPTY_OBJ&&hasOwn(Y,U)?(Y[U]=L,!0):hasOwn(G.props,U)||U[0]==="$"&&U.slice(1)in G?!1:(W[U]=L,!0)},has({_:{data:G,setupState:U,accessCache:L,ctx:Y,appContext:X,propsOptions:W}},z){let J;return!!L[z]||G!==EMPTY_OBJ&&hasOwn(G,z)||U!==EMPTY_OBJ&&hasOwn(U,z)||(J=W[0])&&hasOwn(J,z)||hasOwn(Y,z)||hasOwn(publicPropertiesMap,z)||hasOwn(X.config.globalProperties,z)},defineProperty(G,U,L){return L.get!=null?this.set(G,U,L.get(),null):L.value!=null&&this.set(G,U,L.value,null),Reflect.defineProperty(G,U,L)}},emptyAppContext=createAppContext();let uid$1$1=0;function createComponentInstance(G,U,L){const Y=G.type,X=(U?U.appContext:G.appContext)||emptyAppContext,W={uid:uid$1$1++,vnode:G,type:Y,parent:U,appContext:X,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:U?U.provides:Object.create(X.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Y,X),emitsOptions:normalizeEmitsOptions(Y,X),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Y.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:L,suspenseId:L?L.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return W.ctx={_:W},W.root=U?U.root:W,W.emit=emit$1.bind(null,W),G.ce&&G.ce(W),W}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=G=>{currentInstance=G,G.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(G){return G.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(G,U=!1){isInSSRComponentSetup=U;const{props:L,children:Y}=G.vnode,X=isStatefulComponent(G);initProps(G,L,X,U),initSlots(G,Y);const W=X?setupStatefulComponent(G,U):void 0;return isInSSRComponentSetup=!1,W}function setupStatefulComponent(G,U){const L=G.type;G.accessCache=Object.create(null),G.proxy=markRaw(new Proxy(G.ctx,PublicInstanceProxyHandlers));const{setup:Y}=L;if(Y){const X=G.setupContext=Y.length>1?createSetupContext(G):null;setCurrentInstance(G),pauseTracking();const W=callWithErrorHandling(Y,G,0,[G.props,X]);if(resetTracking(),unsetCurrentInstance(),isPromise$1(W)){if(W.then(unsetCurrentInstance,unsetCurrentInstance),U)return W.then(z=>{handleSetupResult(G,z,U)}).catch(z=>{handleError(z,G,0)});G.asyncDep=W}else handleSetupResult(G,W,U)}else finishComponentSetup(G,U)}function handleSetupResult(G,U,L){isFunction$2(U)?G.type.__ssrInlineRender?G.ssrRender=U:G.render=U:isObject$4(U)&&(G.setupState=proxyRefs(U)),finishComponentSetup(G,L)}let compile;function finishComponentSetup(G,U,L){const Y=G.type;if(!G.render){if(!U&&compile&&!Y.render){const X=Y.template;if(X){const{isCustomElement:W,compilerOptions:z}=G.appContext.config,{delimiters:J,compilerOptions:Z}=Y,ee=extend$2(extend$2({isCustomElement:W,delimiters:J},z),Z);Y.render=compile(X,ee)}}G.render=Y.render||NOOP}setCurrentInstance(G),pauseTracking(),applyOptions(G),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(G){return new Proxy(G.attrs,{get(U,L){return track(G,"get","$attrs"),U[L]}})}function createSetupContext(G){const U=Y=>{G.exposed=Y||{}};let L;return{get attrs(){return L||(L=createAttrsProxy(G))},slots:G.slots,emit:G.emit,expose:U}}function getExposeProxy(G){if(G.exposed)return G.exposeProxy||(G.exposeProxy=new Proxy(proxyRefs(markRaw(G.exposed)),{get(U,L){if(L in U)return U[L];if(L in publicPropertiesMap)return publicPropertiesMap[L](G)}}))}function getComponentName(G){return isFunction$2(G)&&G.displayName||G.name}function isClassComponent(G){return isFunction$2(G)&&"__vccOpts"in G}const computed=(G,U)=>computed$1(G,U,isInSSRComponentSetup);function h$4(G,U,L){const Y=arguments.length;return Y===2?isObject$4(U)&&!isArray$3(U)?isVNode(U)?createVNode(G,null,[U]):createVNode(G,U):createVNode(G,null,U):(Y>3?L=Array.prototype.slice.call(arguments,2):Y===3&&isVNode(L)&&(L=[L]),createVNode(G,U,L))}const version="3.2.31",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(G,U,L)=>{U.insertBefore(G,L||null)},remove:G=>{const U=G.parentNode;U&&U.removeChild(G)},createElement:(G,U,L,Y)=>{const X=U?doc.createElementNS(svgNS,G):doc.createElement(G,L?{is:L}:void 0);return G==="select"&&Y&&Y.multiple!=null&&X.setAttribute("multiple",Y.multiple),X},createText:G=>doc.createTextNode(G),createComment:G=>doc.createComment(G),setText:(G,U)=>{G.nodeValue=U},setElementText:(G,U)=>{G.textContent=U},parentNode:G=>G.parentNode,nextSibling:G=>G.nextSibling,querySelector:G=>doc.querySelector(G),setScopeId(G,U){G.setAttribute(U,"")},cloneNode(G){const U=G.cloneNode(!0);return"_value"in G&&(U._value=G._value),U},insertStaticContent(G,U,L,Y,X,W){const z=L?L.previousSibling:U.lastChild;if(X&&(X===W||X.nextSibling))for(;U.insertBefore(X.cloneNode(!0),L),!(X===W||!(X=X.nextSibling)););else{templateContainer.innerHTML=Y?`<svg>${G}</svg>`:G;const J=templateContainer.content;if(Y){const Z=J.firstChild;for(;Z.firstChild;)J.appendChild(Z.firstChild);J.removeChild(Z)}U.insertBefore(J,L)}return[z?z.nextSibling:U.firstChild,L?L.previousSibling:U.lastChild]}};function patchClass(G,U,L){const Y=G._vtc;Y&&(U=(U?[U,...Y]:[...Y]).join(" ")),U==null?G.removeAttribute("class"):L?G.setAttribute("class",U):G.className=U}function patchStyle(G,U,L){const Y=G.style,X=isString$1(L);if(L&&!X){for(const W in L)setStyle(Y,W,L[W]);if(U&&!isString$1(U))for(const W in U)L[W]==null&&setStyle(Y,W,"")}else{const W=Y.display;X?U!==L&&(Y.cssText=L):U&&G.removeAttribute("style"),"_vod"in G&&(Y.display=W)}}const importantRE=/\s*!important$/;function setStyle(G,U,L){if(isArray$3(L))L.forEach(Y=>setStyle(G,U,Y));else if(U.startsWith("--"))G.setProperty(U,L);else{const Y=autoPrefix(G,U);importantRE.test(L)?G.setProperty(hyphenate(Y),L.replace(importantRE,""),"important"):G[Y]=L}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(G,U){const L=prefixCache[U];if(L)return L;let Y=camelize$1(U);if(Y!=="filter"&&Y in G)return prefixCache[U]=Y;Y=capitalize(Y);for(let X=0;X<prefixes.length;X++){const W=prefixes[X]+Y;if(W in G)return prefixCache[U]=W}return U}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(G,U,L,Y,X){if(Y&&U.startsWith("xlink:"))L==null?G.removeAttributeNS(xlinkNS,U.slice(6,U.length)):G.setAttributeNS(xlinkNS,U,L);else{const W=isSpecialBooleanAttr(U);L==null||W&&!includeBooleanAttr(L)?G.removeAttribute(U):G.setAttribute(U,W?"":L)}}function patchDOMProp(G,U,L,Y,X,W,z){if(U==="innerHTML"||U==="textContent"){Y&&z(Y,X,W),G[U]=L==null?"":L;return}if(U==="value"&&G.tagName!=="PROGRESS"&&!G.tagName.includes("-")){G._value=L;const J=L==null?"":L;(G.value!==J||G.tagName==="OPTION")&&(G.value=J),L==null&&G.removeAttribute(U);return}if(L===""||L==null){const J=typeof G[U];if(J==="boolean"){G[U]=includeBooleanAttr(L);return}else if(L==null&&J==="string"){G[U]="",G.removeAttribute(U);return}else if(J==="number"){try{G[U]=0}catch(Z){}G.removeAttribute(U);return}}try{G[U]=L}catch(J){}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const G=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(G&&Number(G[1])<=53)}let cachedNow=0;const p$2=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$2.then(reset),cachedNow=_getNow());function addEventListener(G,U,L,Y){G.addEventListener(U,L,Y)}function removeEventListener(G,U,L,Y){G.removeEventListener(U,L,Y)}function patchEvent(G,U,L,Y,X=null){const W=G._vei||(G._vei={}),z=W[U];if(Y&&z)z.value=Y;else{const[J,Z]=parseName(U);if(Y){const ee=W[U]=createInvoker(Y,X);addEventListener(G,J,ee,Z)}else z&&(removeEventListener(G,J,z,Z),W[U]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(G){let U;if(optionsModifierRE.test(G)){U={};let L;for(;L=G.match(optionsModifierRE);)G=G.slice(0,G.length-L[0].length),U[L[0].toLowerCase()]=!0}return[hyphenate(G.slice(2)),U]}function createInvoker(G,U){const L=Y=>{const X=Y.timeStamp||_getNow();(skipTimestampCheck||X>=L.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(Y,L.value),U,5,[Y])};return L.value=G,L.attached=getNow(),L}function patchStopImmediatePropagation(G,U){if(isArray$3(U)){const L=G.stopImmediatePropagation;return G.stopImmediatePropagation=()=>{L.call(G),G._stopped=!0},U.map(Y=>X=>!X._stopped&&Y&&Y(X))}else return U}const nativeOnRE=/^on[a-z]/,patchProp=(G,U,L,Y,X=!1,W,z,J,Z)=>{U==="class"?patchClass(G,Y,X):U==="style"?patchStyle(G,L,Y):isOn(U)?isModelListener(U)||patchEvent(G,U,L,Y,z):(U[0]==="."?(U=U.slice(1),!0):U[0]==="^"?(U=U.slice(1),!1):shouldSetAsProp(G,U,Y,X))?patchDOMProp(G,U,Y,W,z,J,Z):(U==="true-value"?G._trueValue=Y:U==="false-value"&&(G._falseValue=Y),patchAttr(G,U,Y,X))};function shouldSetAsProp(G,U,L,Y){return Y?!!(U==="innerHTML"||U==="textContent"||U in G&&nativeOnRE.test(U)&&isFunction$2(L)):U==="spellcheck"||U==="draggable"||U==="form"||U==="list"&&G.tagName==="INPUT"||U==="type"&&G.tagName==="TEXTAREA"||nativeOnRE.test(U)&&isString$1(L)?!1:U in G}const TRANSITION="transition",ANIMATION="animation",Transition=(G,{slots:U})=>h$4(BaseTransition,resolveTransitionProps(G),U);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$2({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(G,U=[])=>{isArray$3(G)?G.forEach(L=>L(...U)):G&&G(...U)},hasExplicitCallback=G=>G?isArray$3(G)?G.some(U=>U.length>1):G.length>1:!1;function resolveTransitionProps(G){const U={};for(const Te in G)Te in DOMTransitionPropsValidators||(U[Te]=G[Te]);if(G.css===!1)return U;const{name:L="v",type:Y,duration:X,enterFromClass:W=`${L}-enter-from`,enterActiveClass:z=`${L}-enter-active`,enterToClass:J=`${L}-enter-to`,appearFromClass:Z=W,appearActiveClass:ee=z,appearToClass:te=J,leaveFromClass:re=`${L}-leave-from`,leaveActiveClass:ie=`${L}-leave-active`,leaveToClass:ne=`${L}-leave-to`}=G,oe=normalizeDuration(X),se=oe&&oe[0],ae=oe&&oe[1],{onBeforeEnter:le,onEnter:ue,onEnterCancelled:ce,onLeave:he,onLeaveCancelled:fe,onBeforeAppear:de=le,onAppear:_e=ue,onAppearCancelled:me=ce}=U,ve=(Te,Se,Ue)=>{removeTransitionClass(Te,Se?te:J),removeTransitionClass(Te,Se?ee:z),Ue&&Ue()},ye=(Te,Se)=>{removeTransitionClass(Te,ne),removeTransitionClass(Te,ie),Se&&Se()},be=Te=>(Se,Ue)=>{const Pe=Te?_e:ue,Ne=()=>ve(Se,Te,Ue);callHook(Pe,[Se,Ne]),nextFrame(()=>{removeTransitionClass(Se,Te?Z:W),addTransitionClass(Se,Te?te:J),hasExplicitCallback(Pe)||whenTransitionEnds(Se,Y,se,Ne)})};return extend$2(U,{onBeforeEnter(Te){callHook(le,[Te]),addTransitionClass(Te,W),addTransitionClass(Te,z)},onBeforeAppear(Te){callHook(de,[Te]),addTransitionClass(Te,Z),addTransitionClass(Te,ee)},onEnter:be(!1),onAppear:be(!0),onLeave(Te,Se){const Ue=()=>ye(Te,Se);addTransitionClass(Te,re),forceReflow(),addTransitionClass(Te,ie),nextFrame(()=>{removeTransitionClass(Te,re),addTransitionClass(Te,ne),hasExplicitCallback(he)||whenTransitionEnds(Te,Y,ae,Ue)}),callHook(he,[Te,Ue])},onEnterCancelled(Te){ve(Te,!1),callHook(ce,[Te])},onAppearCancelled(Te){ve(Te,!0),callHook(me,[Te])},onLeaveCancelled(Te){ye(Te),callHook(fe,[Te])}})}function normalizeDuration(G){if(G==null)return null;if(isObject$4(G))return[NumberOf(G.enter),NumberOf(G.leave)];{const U=NumberOf(G);return[U,U]}}function NumberOf(G){return toNumber$1(G)}function addTransitionClass(G,U){U.split(/\s+/).forEach(L=>L&&G.classList.add(L)),(G._vtc||(G._vtc=new Set)).add(U)}function removeTransitionClass(G,U){U.split(/\s+/).forEach(Y=>Y&&G.classList.remove(Y));const{_vtc:L}=G;L&&(L.delete(U),L.size||(G._vtc=void 0))}function nextFrame(G){requestAnimationFrame(()=>{requestAnimationFrame(G)})}let endId=0;function whenTransitionEnds(G,U,L,Y){const X=G._endId=++endId,W=()=>{X===G._endId&&Y()};if(L)return setTimeout(W,L);const{type:z,timeout:J,propCount:Z}=getTransitionInfo(G,U);if(!z)return Y();const ee=z+"end";let te=0;const re=()=>{G.removeEventListener(ee,ie),W()},ie=ne=>{ne.target===G&&++te>=Z&&re()};setTimeout(()=>{te<Z&&re()},J+1),G.addEventListener(ee,ie)}function getTransitionInfo(G,U){const L=window.getComputedStyle(G),Y=oe=>(L[oe]||"").split(", "),X=Y(TRANSITION+"Delay"),W=Y(TRANSITION+"Duration"),z=getTimeout(X,W),J=Y(ANIMATION+"Delay"),Z=Y(ANIMATION+"Duration"),ee=getTimeout(J,Z);let te=null,re=0,ie=0;U===TRANSITION?z>0&&(te=TRANSITION,re=z,ie=W.length):U===ANIMATION?ee>0&&(te=ANIMATION,re=ee,ie=Z.length):(re=Math.max(z,ee),te=re>0?z>ee?TRANSITION:ANIMATION:null,ie=te?te===TRANSITION?W.length:Z.length:0);const ne=te===TRANSITION&&/\b(transform|all)(,|$)/.test(L[TRANSITION+"Property"]);return{type:te,timeout:re,propCount:ie,hasTransform:ne}}function getTimeout(G,U){for(;G.length<U.length;)G=G.concat(G);return Math.max(...U.map((L,Y)=>toMs(L)+toMs(G[Y])))}function toMs(G){return Number(G.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const vShow={beforeMount(G,{value:U},{transition:L}){G._vod=G.style.display==="none"?"":G.style.display,L&&U?L.beforeEnter(G):setDisplay(G,U)},mounted(G,{value:U},{transition:L}){L&&U&&L.enter(G)},updated(G,{value:U,oldValue:L},{transition:Y}){!U!=!L&&(Y?U?(Y.beforeEnter(G),setDisplay(G,!0),Y.enter(G)):Y.leave(G,()=>{setDisplay(G,!1)}):setDisplay(G,U))},beforeUnmount(G,{value:U}){setDisplay(G,U)}};function setDisplay(G,U){G.style.display=U?G._vod:"none"}const rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...G)=>{const U=ensureRenderer().createApp(...G),{mount:L}=U;return U.mount=Y=>{const X=normalizeContainer(Y);if(!X)return;const W=U._component;!isFunction$2(W)&&!W.render&&!W.template&&(W.template=X.innerHTML),X.innerHTML="";const z=L(X,!1,X instanceof SVGElement);return X instanceof Element&&(X.removeAttribute("v-cloak"),X.setAttribute("data-v-app","")),z},U};function normalizeContainer(G){return isString$1(G)?document.querySelector(G):G}var isVue2=!1;/*!
  * pinia v2.0.12
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=G=>activePinia=G,piniaSymbol=Symbol();function isPlainObject$1(G){return G&&typeof G=="object"&&Object.prototype.toString.call(G)==="[object Object]"&&typeof G.toJSON!="function"}var MutationType;(function(G){G.direct="direct",G.patchObject="patch object",G.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const G=effectScope(!0),U=G.run(()=>ref({}));let L=[],Y=[];const X=markRaw({install(W){setActivePinia(X),X._a=W,W.provide(piniaSymbol,X),W.config.globalProperties.$pinia=X,Y.forEach(z=>L.push(z)),Y=[]},use(W){return!this._a&&!isVue2?Y.push(W):L.push(W),this},_p:L,_a:null,_e:G,_s:new Map,state:U});return X}const noop$5=()=>{};function addSubscription(G,U,L,Y=noop$5){G.push(U);const X=()=>{const W=G.indexOf(U);W>-1&&(G.splice(W,1),Y())};return!L&&getCurrentInstance()&&onUnmounted(X),X}function triggerSubscriptions(G,...U){G.slice().forEach(L=>{L(...U)})}function mergeReactiveObjects(G,U){for(const L in U){const Y=U[L],X=G[L];isPlainObject$1(X)&&isPlainObject$1(Y)&&!isRef(Y)&&!isReactive(Y)?G[L]=mergeReactiveObjects(X,Y):G[L]=Y}return G}const skipHydrateSymbol=Symbol();function shouldHydrate(G){return!isPlainObject$1(G)||!G.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(G){return!!(isRef(G)&&G.effect)}function createOptionsStore(G,U,L,Y){const{state:X,actions:W,getters:z}=U,J=L.state.value[G];let Z;function ee(){J||(L.state.value[G]=X?X():{});const te=toRefs(L.state.value[G]);return assign$1(te,W,Object.keys(z||{}).reduce((re,ie)=>(re[ie]=markRaw(computed(()=>{setActivePinia(L);const ne=L._s.get(G);return z[ie].call(ne,ne)})),re),{}))}return Z=createSetupStore(G,ee,U,L),Z.$reset=function(){const re=X?X():{};this.$patch(ie=>{assign$1(ie,re)})},Z}function createSetupStore(G,U,L={},Y,X){let W;const z=L.state,J=assign$1({actions:{}},L),Z={deep:!0};let ee,te,re=markRaw([]),ie=markRaw([]),ne;const oe=Y.state.value[G];!z&&!oe&&(Y.state.value[G]={}),ref({});function se(de){let _e;ee=te=!1,typeof de=="function"?(de(Y.state.value[G]),_e={type:MutationType.patchFunction,storeId:G,events:ne}):(mergeReactiveObjects(Y.state.value[G],de),_e={type:MutationType.patchObject,payload:de,storeId:G,events:ne}),nextTick().then(()=>{ee=!0}),te=!0,triggerSubscriptions(re,_e,Y.state.value[G])}const ae=noop$5;function le(){W.stop(),re=[],ie=[],Y._s.delete(G)}function ue(de,_e){return function(){setActivePinia(Y);const me=Array.from(arguments),ve=[],ye=[];function be(Ue){ve.push(Ue)}function Te(Ue){ye.push(Ue)}triggerSubscriptions(ie,{args:me,name:de,store:he,after:be,onError:Te});let Se;try{Se=_e.apply(this&&this.$id===G?this:he,me)}catch(Ue){throw triggerSubscriptions(ye,Ue),Ue}return Se instanceof Promise?Se.then(Ue=>(triggerSubscriptions(ve,Ue),Ue)).catch(Ue=>(triggerSubscriptions(ye,Ue),Promise.reject(Ue))):(triggerSubscriptions(ve,Se),Se)}}const ce={_p:Y,$id:G,$onAction:addSubscription.bind(null,ie),$patch:se,$reset:ae,$subscribe(de,_e={}){const me=addSubscription(re,de,_e.detached,()=>ve()),ve=W.run(()=>watch(()=>Y.state.value[G],ye=>{(_e.flush==="sync"?te:ee)&&de({storeId:G,type:MutationType.direct,events:ne},ye)},assign$1({},Z,_e)));return me},$dispose:le},he=reactive(assign$1({},ce));Y._s.set(G,he);const fe=Y._e.run(()=>(W=effectScope(),W.run(()=>U())));for(const de in fe){const _e=fe[de];if(isRef(_e)&&!isComputed(_e)||isReactive(_e))z||(oe&&shouldHydrate(_e)&&(isRef(_e)?_e.value=oe[de]:mergeReactiveObjects(_e,oe[de])),Y.state.value[G][de]=_e);else if(typeof _e=="function"){const me=ue(de,_e);fe[de]=me,J.actions[de]=_e}}return assign$1(he,fe),assign$1(toRaw(he),fe),Object.defineProperty(he,"$state",{get:()=>Y.state.value[G],set:de=>{se(_e=>{assign$1(_e,de)})}}),Y._p.forEach(de=>{assign$1(he,W.run(()=>de({store:he,app:Y._a,pinia:Y,options:J})))}),oe&&z&&L.hydrate&&L.hydrate(he.$state,oe),ee=!0,te=!0,he}function defineStore(G,U,L){let Y,X;const W=typeof U=="function";typeof G=="string"?(Y=G,X=W?L:U):(X=G,Y=G.id);function z(J,Z){const ee=getCurrentInstance();return J=J||ee&&inject(piniaSymbol),J&&setActivePinia(J),J=activePinia,J._s.has(Y)||(W?createSetupStore(Y,U,X,J):createOptionsStore(Y,X,J)),J._s.get(Y)}return z.$id=Y,z}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter$j(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})}function ua$2(G){var U,L=typeof window!="undefined"&&((U=window==null?void 0:window.navigator)===null||U===void 0?void 0:U.userAgent)||"";return G?L.toLowerCase():L}function isIos$1(){return/iPad|iPhone|iPod/.test(ua$2())}function isAndroid$1(){return ua$2("l").indexOf("android")>-1}function isQQNews$1(){return/qqnews/.test(ua$2())}var Deferred$1=function(){function G(U){var L=this,Y=U||{},X=Y.timeout,W=Y.timeoutError,z=W===void 0?{code:-1,message:"timeout"}:W,J;this.promise=new Promise(function(Z,ee){L.resolve=function(te){J&&clearTimeout(J),Z(te)},L.reject=ee,X&&(J=setTimeout(function(){ee(z)},X))})}return G}();new Deferred$1;var ErrCode;(function(G){G.SUCCESS="0",G[G.SUCCESS_NUMBER=0]="SUCCESS_NUMBER",G[G.FAILED_NUMBER=-1]="FAILED_NUMBER",G[G.VAR_UNDEFINED=1001]="VAR_UNDEFINED",G[G.UNSUPPORTED_API=1002]="UNSUPPORTED_API",G[G.INVALID_PARAM=1003]="INVALID_PARAM",G[G.NOT_SUPPORT=1004]="NOT_SUPPORT",G[G.UNSUPPORTED_RUNTIME=1005]="UNSUPPORTED_RUNTIME",G[G.EXECUTION_FAILED=1006]="EXECUTION_FAILED",G[G.INJECTION_TIMINIG=1007]="INJECTION_TIMINIG",G.SHOW_CAPTURE_FAILED="-3000"})(ErrCode||(ErrCode={}));var PolyfillKey;(function(G){G.comment="comment",G.data="data",G.params="params",G.supportType="supportType",G.shareType="shareType",G.omgbizid="omgbizid",G.omgBizid="omgBizid",G.networkStatus="networkStatus",G.isWeakLogin="isWeakLogin",G.isLogin="isLogin"})(PolyfillKey||(PolyfillKey={}));var ApiName;(function(G){G.getAppInfo="getAppInfo",G.getConfigInfo="getConfigInfo",G.appConfig="appConfig",G.getABTestInfo="getABTestInfo",G.appUsedSeconds="appUsedSeconds",G.getRemoteConfig="getRemoteConfig",G.login="login",G.logout="logout",G.getUserInfo="getUserInfo",G.changeMainAccount="changeMainAccount",G.refreshWxAccessToken="refreshWxAccessToken",G.share="share",G.showActionMenu="showActionMenu",G.dismissShareDialog="dismissShareDialog",G.setShareArticleInfo="setShareArticleInfo",G.showBigImageShareMenu="showBigImageShareMenu",G.showCaptureBigImageShareMenu="showCaptureBigImageShareMenu",G.disableSnapshotShare="disableSnapshotShare",G.enableShare="enableShare",G.setNativeData="setNativeData",G.getNativeData="getNativeData",G.setAppLocalStorage="setAppletData",G.getAppLocalStorage="getAppletData",G.setLocalStorage="setLocalStorage",G.getLocalStorage="getLocalStorage",G.setNativeMutualData="setNativeMutualData",G.getNativeMutualData="getNativeMutualData",G.setTitle="setTitle",G.setClosePanelShow="setClosePanelShow",G.setStatusBarColor="setStatusBarColor",G.setActionBtn="setActionBtn",G.setReturnBtn="setReturnBtn",G.setReturnBtnActionType="setReturnBtnActionType",G.setGestureQuit="setGestureQuit",G.getGestureQuit="getGestureQuit",G.setLeftScrollEnable="setLeftScrollEnable",G.setBottomBarVisibility="setBottomBarVisibility",G.setOrientationEnable="setOrientationEnable",G.openUrl="openUrl",G.openWebViewWithType="openWebViewWithType",G.showNews="showNews",G.navigationWithItem="navigationWithItem",G.openMiniProgram="openMiniProgram",G.closeWebview="closeWebview",G.closePopupView="closePopupView",G.gotoPushHistoryPage="gotoPushHistoryPage",G.previewDetailImage="previewDetailImage",G.switchSearchTab="switchSearchTab",G.writeLog="writeLog",G.reportToBoss="reportToBoss",G.reportCellExposure="reportCellExposure",G.reportDuration="reportDuration",G.setReportParams="setReportParams",G.reportToDT="reportToDT",G.reportUserSensitive="reportUserSensitiveInfo",G.sendRequest="sendRequest",G.regReceiver="regReceiver",G.notifyAppMsg="notifyAppMsg",G.broadcastMsg="broadcastMsg",G.downloadMedia="downloadMedia",G.isAppInstalled="isAppInstalled",G.checkAppStatus="checkAppStatus",G.launchApp="launchApp",G.installApp="installApp",G.downloadApp="downloadApp",G.downloadApp_gdt="downloadApp_gdt",G.showToast="showToast",G.showAlert="showAlert",G.supportLauncherShortcut="supportLauncherShortcut",G.createLauncherShortcut="createLauncherShortcut",G.showImageBrowser="showImageBrowser",G.showH5Dialog="showH5Dialog",G.createMaskShortcut="createMaskShortcut",G.isNotificationEnabled="isNotificationEnabled",G.requestCalendarAuthority="requestCalendarAuthority",G.tryAddCalendarEvent="tryAddCalendarEvent",G.isAllPushClose="isAllPushClose",G.getCurrentLocationInfo="getCurrentLocationInfo",G.enableLocalPush="enableLocalPush",G.gotoPushSwitchSettingPage="gotoPushSwitchSettingPage",G.getUserPhotoLocations="getUserPhotoLocations",G.userPhotoAuthorization="userPhotoAuthorization",G.jumpToSysAuthorizationPage="jumpToSysAuthorizationPage",G.gotoSysPushSettingPage="gotoSysPushSettingPage",G.checkCalendarAuthority="checkCalendarAuthority",G.uploadImage="uploadImage",G.chooseMedia="chooseMedia",G.editVideo="editVideo",G.previewVideo="previewVideo",G.chooseVideoCover="chooseVideoCover",G.copy="copy",G.invokeBonBeanPanel="invokeBonBeanPanel",G.saveImageToLocal="saveImageToLocal",G.syncRedpacketUpdateInfo="syncRedpacketUpdateInfo",G.onReportSuccess="onReportSuccess",G.getSecurityRequestCheckCode="getSecurityRequestCheckCode",G.isFocus="isFocus",G.updateEditStatus="updateEditStatus",G.deleteFavoriteItems="deleteFavoriteItems",G.onWebCellReady="onWebCellReady",G.onWebCellError="onWebCellError",G.adjustWebViewInfo="adjustWebViewInfo",G.onWebCellUIChanged="onWebCellUIChanged",G.updatePubContent="updatePubContent",G.publishWeibo="publishWeibo",G.multiFollow="multiFollow",G.reportToBeacon="reportToBeacon",G.reLogin="reLogin",G.enableLogin="enableLogin",G.showOmAccountAlert="showOmAccountAlert",G.readOmAccountLocalDraft="readOmAccountLocalDraft",G.publishOmAccountLocalDraft="publishOmAccountArticleFromLocalDraft",G.deleteOmAccountLocalDraft="deleteOmAccountLocalDraft",G.broadcastEvent="broadcastEvent",G.setAppConfig="setAppConfig",G.hideKeyboard="hideKeyboard",G.preloadLottie="preloadLottie",G.fetchLocalData="fetchLocalData",G.setTmpObj="setTmpObj",G.getTmpObj="getTmpObj",G.isPageShowing="isPageShowing",G.traversePage="traversePage",G.pageRefreshStart="pageRefreshStart",G.pageRefreshEnd="pageRefreshEnd",G.hippyHasShowContent="hippyHasShowContent",G.openApp="openApp",G.handleCurDownloadGame="handleCurDownloadGame",G.sendRequestSpeed="sendRequestSpeed",G.navigateToNewMyFocus="navigateToNewMyFocus",G.navigateToAudioHistoryPage="navigateToAudioHistoryPage",G.closePage="closePage",G.changeCityChannel="changeCityChannel",G.showCitySelector="showCitySelector",G.queryChannelInfo="queryChannelInfo",G.navigateToUserCenter="navigateToUserCenter",G.navigateOrPreviewChannel="navigateOrPreviewChannel",G.showTipsDialog="showTipsDialog",G.pageOnBack="pageOnBack",G.showMedalView="showMedalView",G.navigateToTopicPage="navigateToTopicPage",G.navigateWithComment="navigateWithComment",G.navigateToUserPage="navigateToUserPage",G.openNativeUrl="openNativeUrl",G.removeTmpObj="removeTmpObj",G.isPublishForbidden="isPublishForbidden",G.addChatHistory="addChatHistory",G.encryptAiseeUrlParams="encryptAiseeUrlParams",G.uploadLogForAiSeeById="uploadLogForAiSeeById"})(ApiName||(ApiName={}));const NATIVE_MODULE_NAME="QNBridge",NATIVE_METHOD_NAME="callMethod";var ToSchemeOrWebType;(function(G){G.WebType="1",G.EntryIdType="3",G.BonBonType="9",G.TxShiPinType="19",G.FullScreenType="100"})(ToSchemeOrWebType||(ToSchemeOrWebType={}));const isHippy=()=>{try{return!!Hippy&&!!__ISHIPPY__}catch(G){return!1}},isHippyIos=()=>{var G;try{return isHippy()&&((G=Hippy==null?void 0:Hippy.device)===null||G===void 0?void 0:G.platform.OS)==="ios"}catch(U){return!1}},isHippyAndroid=()=>{var G;try{return isHippy()&&((G=Hippy==null?void 0:Hippy.device)===null||G===void 0?void 0:G.platform.OS)==="android"}catch(U){return!1}},hippyNotSupport=()=>Promise.reject({errCode:ErrCode.UNSUPPORTED_API,errStr:HIPPY_NOT_SUPPORT}),webNotSupport=()=>Promise.reject({errCode:ErrCode.UNSUPPORTED_API,errStr:WEB_NOT_SUPPORT}),iosNotSupportResult=()=>Promise.reject({errCode:ErrCode.UNSUPPORTED_API,errStr:IOS_NOT_SUPPORT}),iosNotSupport=()=>isIos$1()||isHippyIos()?iosNotSupportResult:void 0,androidNotSupportResult=()=>Promise.reject({errCode:ErrCode.UNSUPPORTED_API,errStr:ANDROID_NOT_SUPPORT}),androidNotSupport=()=>isAndroid$1()||isHippyAndroid()?androidNotSupportResult:void 0,versionNotSupportResult=()=>Promise.reject({errCode:ErrCode.UNSUPPORTED_API,errStr:VERSION_NOT_SUPPORT}),isCurrentVersionInvalid=G=>isHippy()?getHippyVersion()<G:getAppVersion()<G,versionNotSupport=G=>isCurrentVersionInvalid(G)?versionNotSupportResult:void 0,environmentVersionNotSupport=(G,U)=>G&&isCurrentVersionInvalid(U)?versionNotSupportResult:void 0,replaceKeyOrValueAttribute=({data:G})=>{if(!G)return G;const U={};return Object.entries(G).forEach(([L,Y])=>{if(L in REPLACE_MAP){const X=()=>{var z;U[(z=REPLACE_MAP[L])===null||z===void 0?void 0:z.targetValue]=Y},W=()=>{var z,J;isObject$3((z=REPLACE_MAP[L])===null||z===void 0?void 0:z.targetValue)?U[L]=(J=REPLACE_MAP[L].targetValue[Y])!==null&&J!==void 0?J:Y:U[L]=REPLACE_MAP[L].targetValue};REPLACE_MAP[L].isValue?W():X()}else U[L]=Y}),U},isNullOrUndefined=G=>G==null,isTrue=G=>{if(isNullOrUndefined(G))return!1;if(typeof G=="boolean")return G;if(typeof G=="number")return G!==0;const U=`${G}`;return U?!["0","false"].includes(U):!1},stringToJson=G=>{if(typeof G!="string")return G;try{return JSON.parse(G)}catch(U){return G}},isObject$3=G=>String(G)==="[object Object]",shouldStringify=({param:G,key:U,condition:L})=>!isHippy()&&!L||!G||!U,handleKeyToJsonString=({param:G,key:U,condition:L})=>{if(shouldStringify({param:G,key:U,condition:L}))return G;const Y=G;return G!=null&&G[U]&&(Y[U]=JSON.stringify(G[U])),Y},isWindowEnvironment=()=>typeof window!="undefined",NoNetwork="Net-None",WiFi="wifi",MobileNetwork="gsm",NETWORK_STATUS={[NoNetwork]:"0",[WiFi]:"1",[MobileNetwork]:"2"},WEAK_LOGIN_STATUS={0:!1,1:!0},REPLACE_MAP={[PolyfillKey.networkStatus]:{targetValue:NETWORK_STATUS,isValue:!0},[PolyfillKey.omgbizid]:{targetValue:PolyfillKey.omgBizid,isValue:!1},[PolyfillKey.isWeakLogin]:{targetValue:WEAK_LOGIN_STATUS,isValue:!0},[PolyfillKey.isLogin]:{targetValue:WEAK_LOGIN_STATUS,isValue:!0}},IS_NOT_QQNEWS="\u5F53\u524D\u975E\u817E\u8BAF\u65B0\u95FB\u5BA2\u6237\u7AEF\u73AF\u5883",API_ERROR="JSAPI\u8C03\u7528\u5F02\u5E38",IOS_NOT_SUPPORT="iOS\u6682\u672A\u652F\u6301",ANDROID_NOT_SUPPORT="Android\u6682\u672A\u652F\u6301",VERSION_NOT_SUPPORT="\u5F53\u524D\u7248\u672C\u6682\u4E0D\u652F\u6301",HIPPY_NOT_SUPPORT="Hippy\u6682\u672A\u652F\u6301",WEB_NOT_SUPPORT="Web\u6682\u672A\u652F\u6301",ANDROID_JS_URL="https://mat1.gtimg.com/www/js/newsapp/jsapi/news.js?_tsid=1",IFRAME_SDK_URL="https://mat1.gtimg.com/qqcdn/news-h5/iframe-communicate-sdk.js",IOS_DELAYED_LOADING=800,API_SUPPORT_VERSION_MAP={disableCaptureImageShare:6160,createMaskShortcut:6290,setClosePanelShow:6290,getUserPhotoLocations:6350,getUserPhotoAuthorization:6350,openAuthorizationPage:6350,reportDT:6550,queryChannelInfo:6607,multiFollow:6670,navigateToNewMyFocus:6697,omAccountVersion:6797,isPublishForbidden:6857,addChatHistory:6867,encryptAiseeUrlParams:6877,uploadLogForAiSeeById:6887},SUCCESS_ASSIGN={errCode:ErrCode.SUCCESS_NUMBER,errStr:""},loadJs=(G,U)=>{const L=document.createElement("script");L.type="text/javascript",L.async=!0,L.onload=()=>{U()},L.src=G;const Y=document.getElementsByTagName("script")[0];Y.parentNode&&Y.parentNode.insertBefore(L,Y)},isInclude=G=>{var U;const L=document==null?void 0:document.getElementsByTagName("script");if(!L||(L==null?void 0:L.length)===0)return!1;for(const Y of L)if(((U=Y==null?void 0:Y.src)===null||U===void 0?void 0:U.indexOf(G))!==-1)return!0;return!1},onAndroidJsReady=G=>{window!=null&&window.TencentNews?G.resolve():loadJs(ANDROID_JS_URL,()=>{G.resolve()})},onIosJsReady=G=>{window!=null&&window.TencentNews?G.resolve():(document==null||document.addEventListener("TencentNewsJSInjectionComplete",()=>{G.resolve()}),setTimeout(()=>{G.resolve()},IOS_DELAYED_LOADING))},onJsReady=G=>{isAndroid$1()&&isQQNews$1()?onAndroidJsReady(G):isIos$1()&&isQQNews$1()?onIosJsReady(G):setTimeout(()=>{G.resolve()},IOS_DELAYED_LOADING)},jsApiReady=G=>{onJsReady(G)},callIframeCellInvoke=({eventName:G,param:U})=>{const L=()=>{var Y,X;const W=U;W&&(W.url=window==null?void 0:window.location.href),(X=(Y=window==null?void 0:window.iframeCommunicateSDK)===null||Y===void 0?void 0:Y.iframeInvoke)===null||X===void 0||X.call(Y,{eventName:G,paramTemp:W})};isInclude(IFRAME_SDK_URL)?L():loadJs(IFRAME_SDK_URL,()=>{L()})},getAppVersion=()=>{if(!isWindowEnvironment())return 0;const U=window.navigator.userAgent.toLowerCase().match(/qqnews\/([\d.]+)/),L=U==null?void 0:U[1];return Number(L?L.replace(/\./g,""):0)},getHippyVersion=()=>{var G;try{const U=(G=__HIPPYNATIVEGLOBAL__==null?void 0:__HIPPYNATIVEGLOBAL__.Platform)===null||G===void 0?void 0:G.VersionName;if(!U)return-1;const L=parseInt(U.replace(/[^0-9]/gi,""),10);return isNaN(L)?-1:L}catch(U){return-1}};var _a$e,_b$2,_c$1;const hippyNotSupportMap={hippy:hippyNotSupport},webNotSupportMap={web:webNotSupport},hippyNotSupportList={[ApiName.appUsedSeconds]:hippyNotSupportMap,[ApiName.supportLauncherShortcut]:hippyNotSupportMap,[ApiName.createLauncherShortcut]:hippyNotSupportMap,[ApiName.showH5Dialog]:hippyNotSupportMap,[ApiName.downloadApp]:hippyNotSupportMap,[ApiName.uploadImage]:hippyNotSupportMap,[ApiName.chooseMedia]:hippyNotSupportMap,[ApiName.editVideo]:hippyNotSupportMap,[ApiName.chooseVideoCover]:hippyNotSupportMap,[ApiName.showNews]:hippyNotSupportMap,[ApiName.openMiniProgram]:hippyNotSupportMap,[ApiName.closeWebview]:hippyNotSupportMap,[ApiName.closePopupView]:hippyNotSupportMap,[ApiName.gotoPushHistoryPage]:hippyNotSupportMap,[ApiName.switchSearchTab]:hippyNotSupportMap,[ApiName.regReceiver]:hippyNotSupportMap,[ApiName.notifyAppMsg]:hippyNotSupportMap,[ApiName.setClosePanelShow]:hippyNotSupportMap,[ApiName.setReturnBtn]:hippyNotSupportMap,[ApiName.setReturnBtnActionType]:hippyNotSupportMap,[ApiName.requestCalendarAuthority]:hippyNotSupportMap,[ApiName.tryAddCalendarEvent]:hippyNotSupportMap,[ApiName.getCurrentLocationInfo]:hippyNotSupportMap,[ApiName.getUserPhotoLocations]:hippyNotSupportMap,[ApiName.userPhotoAuthorization]:hippyNotSupportMap,[ApiName.checkCalendarAuthority]:hippyNotSupportMap,[ApiName.setReportParams]:hippyNotSupportMap,[ApiName.changeMainAccount]:hippyNotSupportMap,[ApiName.showBigImageShareMenu]:hippyNotSupportMap,[ApiName.showCaptureBigImageShareMenu]:hippyNotSupportMap,[ApiName.disableSnapshotShare]:hippyNotSupportMap,[ApiName.setAppLocalStorage]:hippyNotSupportMap,[ApiName.getAppLocalStorage]:hippyNotSupportMap,[ApiName.setLocalStorage]:hippyNotSupportMap,[ApiName.getLocalStorage]:hippyNotSupportMap,[ApiName.copy]:hippyNotSupportMap,[ApiName.invokeBonBeanPanel]:hippyNotSupportMap,[ApiName.saveImageToLocal]:hippyNotSupportMap,[ApiName.syncRedpacketUpdateInfo]:hippyNotSupportMap,[ApiName.onReportSuccess]:hippyNotSupportMap,[ApiName.getSecurityRequestCheckCode]:hippyNotSupportMap,[ApiName.onWebCellReady]:hippyNotSupportMap,[ApiName.onWebCellError]:hippyNotSupportMap,[ApiName.adjustWebViewInfo]:hippyNotSupportMap,[ApiName.onWebCellUIChanged]:hippyNotSupportMap,[ApiName.reportUserSensitive]:hippyNotSupportMap},webNotSupportList={[ApiName.updateEditStatus]:webNotSupportMap,[ApiName.updatePubContent]:webNotSupportMap,[ApiName.deleteFavoriteItems]:webNotSupportMap,[ApiName.getABTestInfo]:webNotSupportMap,[ApiName.getRemoteConfig]:webNotSupportMap,[ApiName.enableShare]:webNotSupportMap,[ApiName.setNativeData]:webNotSupportMap,[ApiName.getNativeData]:webNotSupportMap,[ApiName.setNativeMutualData]:webNotSupportMap,[ApiName.getNativeMutualData]:webNotSupportMap,[ApiName.navigationWithItem]:webNotSupportMap,[ApiName.reportCellExposure]:webNotSupportMap,[ApiName.reportDuration]:webNotSupportMap,[ApiName.reLogin]:webNotSupportMap,[ApiName.enableLogin]:webNotSupportMap,[ApiName.broadcastEvent]:webNotSupportMap,[ApiName.setAppConfig]:webNotSupportMap,[ApiName.preloadLottie]:webNotSupportMap,[ApiName.fetchLocalData]:webNotSupportMap,[ApiName.setTmpObj]:webNotSupportMap,[ApiName.getTmpObj]:webNotSupportMap,[ApiName.isPageShowing]:webNotSupportMap,[ApiName.traversePage]:webNotSupportMap,[ApiName.pageRefreshStart]:webNotSupportMap,[ApiName.pageRefreshEnd]:webNotSupportMap,[ApiName.hippyHasShowContent]:webNotSupportMap,[ApiName.sendRequestSpeed]:webNotSupportMap,[ApiName.navigateToAudioHistoryPage]:webNotSupportMap,[ApiName.closePage]:webNotSupportMap,[ApiName.changeCityChannel]:webNotSupportMap,[ApiName.showCitySelector]:webNotSupportMap,[ApiName.navigateToUserCenter]:webNotSupportMap,[ApiName.navigateOrPreviewChannel]:webNotSupportMap,[ApiName.showTipsDialog]:webNotSupportMap,[ApiName.pageOnBack]:webNotSupportMap,[ApiName.showMedalView]:webNotSupportMap,[ApiName.navigateToTopicPage]:webNotSupportMap,[ApiName.navigateWithComment]:webNotSupportMap,[ApiName.navigateToUserPage]:webNotSupportMap,[ApiName.removeTmpObj]:webNotSupportMap},INTERCEPT_INVOKE_MAP=Object.assign(Object.assign(Object.assign({},hippyNotSupportList),webNotSupportList),{[ApiName.setAppLocalStorage]:{web:iosNotSupport()},[ApiName.checkAppStatus]:{web:iosNotSupport(),hippy:hippyNotSupport},[ApiName.launchApp]:{web:iosNotSupport(),hippy:hippyNotSupport},[ApiName.installApp]:{web:iosNotSupport(),hippy:hippyNotSupport},[ApiName.downloadApp_gdt]:{web:iosNotSupport(),hippy:hippyNotSupport},[ApiName.downloadApp_gdt]:{web:(_a$e=iosNotSupport())!==null&&_a$e!==void 0?_a$e:versionNotSupport(API_SUPPORT_VERSION_MAP.createMaskShortcut)},[ApiName.setClosePanelShow]:{web:(_b$2=iosNotSupport())!==null&&_b$2!==void 0?_b$2:versionNotSupport(API_SUPPORT_VERSION_MAP.setClosePanelShow)},[ApiName.getUserPhotoLocations]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.getUserPhotoLocations)},[ApiName.userPhotoAuthorization]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.getUserPhotoAuthorization)},[ApiName.jumpToSysAuthorizationPage]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.openAuthorizationPage)},[ApiName.disableSnapshotShare]:{web:(_c$1=androidNotSupport())!==null&&_c$1!==void 0?_c$1:versionNotSupport(API_SUPPORT_VERSION_MAP.disableCaptureImageShare)},[ApiName.multiFollow]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.multiFollow),hippy:hippyNotSupport},[ApiName.hideKeyboard]:{web:webNotSupport,hippy:androidNotSupport()},[ApiName.openApp]:{web:iosNotSupport(),hippy:iosNotSupport()},[ApiName.navigateToNewMyFocus]:{web:webNotSupport,hippy:versionNotSupport(API_SUPPORT_VERSION_MAP.navigateToNewMyFocus)},[ApiName.queryChannelInfo]:{web:webNotSupport,hippy:versionNotSupport(API_SUPPORT_VERSION_MAP.queryChannelInfo)},[ApiName.reportToDT]:{web:environmentVersionNotSupport(isQQNews$1()&&isAndroid$1(),API_SUPPORT_VERSION_MAP.reportDT),hippy:hippyNotSupport},[ApiName.showOmAccountAlert]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.omAccountVersion),hippy:hippyNotSupport},[ApiName.readOmAccountLocalDraft]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.omAccountVersion),hippy:hippyNotSupport},[ApiName.publishOmAccountLocalDraft]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.omAccountVersion),hippy:hippyNotSupport},[ApiName.deleteOmAccountLocalDraft]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.omAccountVersion),hippy:hippyNotSupport},[ApiName.isPublishForbidden]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.isPublishForbidden),hippy:hippyNotSupport},[ApiName.addChatHistory]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.addChatHistory),hippy:hippyNotSupport},[ApiName.encryptAiseeUrlParams]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.encryptAiseeUrlParams),hippy:hippyNotSupport},[ApiName.uploadLogForAiSeeById]:{web:versionNotSupport(API_SUPPORT_VERSION_MAP.uploadLogForAiSeeById),hippy:hippyNotSupport}});ApiName.adjustWebViewInfo+"";const hippyJsApiInvoke=(G,U={})=>new Promise((L,Y)=>{var X;try{(X=Hippy==null?void 0:Hippy.bridge)===null||X===void 0||X.callNativeWithPromise(NATIVE_MODULE_NAME,NATIVE_METHOD_NAME,Object.assign(Object.assign({},U),{methodName:G})).then(W=>{L(stringToJson(W))},()=>{Y({errCode:ErrCode.INJECTION_TIMINIG,errStr:""})})}catch(W){Y({errCode:ErrCode.INJECTION_TIMINIG,errStr:W.message})}}),JSAPI={invoke(G,U={},L){return __awaiter$j(this,void 0,void 0,function*(){isQQNews$1()||L({errCode:ErrCode.INJECTION_TIMINIG,errStr:IS_NOT_QQNEWS});try{yield ensureJsBridgeReady();const{invoke:Y}=TencentNews;Y(G,U)}catch(Y){L({errCode:ErrCode.INJECTION_TIMINIG,errStr:API_ERROR})}})}},webJsApiInvoke=(G,U={})=>new Promise((L,Y)=>{JSAPI.invoke(G,Object.assign(Object.assign({},U),{onCallback:X=>{const{errCode:W}=X;String(W)!==ErrCode.SUCCESS?Y(X):L(X)}}),Y)}),reportDTInvoke=({eventName:G,param:U={}})=>{var L,Y;if(!((L=INTERCEPT_INVOKE_MAP[G])===null||L===void 0)&&L.web)return INTERCEPT_INVOKE_MAP[G].web();if(!U)return Promise.reject({errCode:ErrCode.INVALID_PARAM,errStr:""});if(isAndroid$1()&&((Y=window==null?void 0:window.DtJsReporter)===null||Y===void 0?void 0:Y.reportEvent)){const X=U;X.eventId=U.eventID,window.DtJsReporter.reportEvent(X);const W={errCode:ErrCode.SUCCESS,errStr:""};return Promise.resolve(W)}return webJsApiInvoke(G,U)},deferred=new Deferred$1;jsApiReady(deferred);const ensureJsBridgeReady=()=>deferred.promise,promiseInvoke=({eventName:G,param:U={}})=>{var L,Y;return isHippy()?!((L=INTERCEPT_INVOKE_MAP[G])===null||L===void 0)&&L.hippy?INTERCEPT_INVOKE_MAP[G].hippy():hippyJsApiInvoke(G,U):!((Y=INTERCEPT_INVOKE_MAP[G])===null||Y===void 0)&&Y.web?INTERCEPT_INVOKE_MAP[G].web():webJsApiInvoke(G,U)},openUrl=G=>promiseInvoke({eventName:ApiName.openUrl,param:G}),getAppInfo=()=>new Promise((G,U)=>{promiseInvoke({eventName:ApiName.getAppInfo}).then(L=>{const Y=replaceKeyOrValueAttribute({data:L});G(Y)},L=>{U(L)})}),isFocus=G=>promiseInvoke({eventName:ApiName.isFocus,param:G}),multiFollow=G=>promiseInvoke({eventName:ApiName.multiFollow,param:G}),showToast=G=>promiseInvoke({eventName:ApiName.showToast,param:G}),login=G=>new Promise((U,L)=>{promiseInvoke({eventName:ApiName.login,param:handleKeyToJsonString({param:G,key:PolyfillKey.supportType})}).then(Y=>{const X=replaceKeyOrValueAttribute({data:Y});U(X)},Y=>{L(Y)})}),getUserInfo=()=>new Promise((G,U)=>{promiseInvoke({eventName:ApiName.getUserInfo,param:{ignorePhone:!1}}).then(L=>{const Y=replaceKeyOrValueAttribute({data:L});G(Y)},L=>{U(L)})}),isLogin=()=>new Promise((G,U)=>{promiseInvoke({eventName:ApiName.getUserInfo,param:{ignorePhone:!1}}).then(L=>{const Y=!!(L!=null&&L[L==null?void 0:L.account]),X=L==null?void 0:L.isWeakLogin,W=Object.assign({hasLogin:Y&&isTrue(!X)},SUCCESS_ASSIGN);G(W)},L=>{U(L)})}),setShareInfo=G=>promiseInvoke({eventName:ApiName.setShareArticleInfo,param:G}),setTitle=G=>promiseInvoke({eventName:ApiName.setTitle,param:G}),setActionBtnStyle=G=>promiseInvoke({eventName:ApiName.setActionBtn,param:G}),reportToDT=G=>reportDTInvoke({eventName:ApiName.reportToDT,param:G});var IEvent;(function(G){G.themeChanged="themeChanged",G.loginStatueChanged="loginStatueChanged",G.onRefresh="onRefresh",G.OnShow="OnShow",G.OnHide="OnHide"})(IEvent||(IEvent={}));function ua$1(G){var U,L=typeof window!="undefined"&&((U=window==null?void 0:window.navigator)===null||U===void 0?void 0:U.userAgent)||"";return G?L.toLowerCase():L}function isIos(){return/iPad|iPhone|iPod/.test(ua$1())}function isAndroid(){return ua$1("l").indexOf("android")>-1}function isWeixin(){return/MicroMessenger/i.test(ua$1("l"))}function isQQ(){return/qq\//.test(ua$1("l"))}function isQQNews(){return/qqnews/.test(ua$1())}var Deferred=function(){function G(U){var L=this,Y=U||{},X=Y.timeout,W=Y.timeoutError,z=W===void 0?{code:-1,message:"timeout"}:W,J;this.promise=new Promise(function(Z,ee){L.resolve=function(te){J&&clearTimeout(J),Z(te)},L.reject=ee,X&&(J=setTimeout(function(){ee(z)},X))})}return G}();new Deferred;var commonjsGlobal$1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},axios$2={exports:{}},bind$3=function(U,L){return function(){for(var X=new Array(arguments.length),W=0;W<X.length;W++)X[W]=arguments[W];return U.apply(L,X)}},bind$2=bind$3,toString=Object.prototype.toString;function isArray$2(G){return Array.isArray(G)}function isUndefined(G){return typeof G=="undefined"}function isBuffer(G){return G!==null&&!isUndefined(G)&&G.constructor!==null&&!isUndefined(G.constructor)&&typeof G.constructor.isBuffer=="function"&&G.constructor.isBuffer(G)}function isArrayBuffer(G){return toString.call(G)==="[object ArrayBuffer]"}function isFormData(G){return toString.call(G)==="[object FormData]"}function isArrayBufferView(G){var U;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?U=ArrayBuffer.isView(G):U=G&&G.buffer&&isArrayBuffer(G.buffer),U}function isString(G){return typeof G=="string"}function isNumber$1(G){return typeof G=="number"}function isObject$2(G){return G!==null&&typeof G=="object"}function isPlainObject(G){if(toString.call(G)!=="[object Object]")return!1;var U=Object.getPrototypeOf(G);return U===null||U===Object.prototype}function isDate(G){return toString.call(G)==="[object Date]"}function isFile(G){return toString.call(G)==="[object File]"}function isBlob(G){return toString.call(G)==="[object Blob]"}function isFunction$1(G){return toString.call(G)==="[object Function]"}function isStream(G){return isObject$2(G)&&isFunction$1(G.pipe)}function isURLSearchParams(G){return toString.call(G)==="[object URLSearchParams]"}function trim(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(G,U){if(!(G===null||typeof G=="undefined"))if(typeof G!="object"&&(G=[G]),isArray$2(G))for(var L=0,Y=G.length;L<Y;L++)U.call(null,G[L],L,G);else for(var X in G)Object.prototype.hasOwnProperty.call(G,X)&&U.call(null,G[X],X,G)}function merge(){var G={};function U(X,W){isPlainObject(G[W])&&isPlainObject(X)?G[W]=merge(G[W],X):isPlainObject(X)?G[W]=merge({},X):isArray$2(X)?G[W]=X.slice():G[W]=X}for(var L=0,Y=arguments.length;L<Y;L++)forEach(arguments[L],U);return G}function extend$1(G,U,L){return forEach(U,function(X,W){L&&typeof X=="function"?G[W]=bind$2(X,L):G[W]=X}),G}function stripBOM(G){return G.charCodeAt(0)===65279&&(G=G.slice(1)),G}var utils$f={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber:isNumber$1,isObject:isObject$2,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$1,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend:extend$1,trim,stripBOM},utils$e=utils$f;function encode$2(G){return encodeURIComponent(G).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(U,L,Y){if(!L)return U;var X;if(Y)X=Y(L);else if(utils$e.isURLSearchParams(L))X=L.toString();else{var W=[];utils$e.forEach(L,function(Z,ee){Z===null||typeof Z=="undefined"||(utils$e.isArray(Z)?ee=ee+"[]":Z=[Z],utils$e.forEach(Z,function(re){utils$e.isDate(re)?re=re.toISOString():utils$e.isObject(re)&&(re=JSON.stringify(re)),W.push(encode$2(ee)+"="+encode$2(re))}))}),X=W.join("&")}if(X){var z=U.indexOf("#");z!==-1&&(U=U.slice(0,z)),U+=(U.indexOf("?")===-1?"?":"&")+X}return U},utils$d=utils$f;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(U,L,Y){return this.handlers.push({fulfilled:U,rejected:L,synchronous:Y?Y.synchronous:!1,runWhen:Y?Y.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(U){this.handlers[U]&&(this.handlers[U]=null)};InterceptorManager$1.prototype.forEach=function(U){utils$d.forEach(this.handlers,function(Y){Y!==null&&U(Y)})};var InterceptorManager_1=InterceptorManager$1,utils$c=utils$f,normalizeHeaderName$1=function(U,L){utils$c.forEach(U,function(X,W){W!==L&&W.toUpperCase()===L.toUpperCase()&&(U[L]=X,delete U[W])})},enhanceError$2=function(U,L,Y,X,W){return U.config=L,Y&&(U.code=Y),U.request=X,U.response=W,U.isAxiosError=!0,U.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},U},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(U,L,Y,X,W){var z=new Error(U);return enhanceError$1(z,L,Y,X,W)},createError$1=createError$2,settle$1=function(U,L,Y){var X=Y.config.validateStatus;!Y.status||!X||X(Y.status)?U(Y):L(createError$1("Request failed with status code "+Y.status,Y.config,null,Y.request,Y))},utils$b=utils$f,cookies$1=utils$b.isStandardBrowserEnv()?function(){return{write:function(L,Y,X,W,z,J){var Z=[];Z.push(L+"="+encodeURIComponent(Y)),utils$b.isNumber(X)&&Z.push("expires="+new Date(X).toGMTString()),utils$b.isString(W)&&Z.push("path="+W),utils$b.isString(z)&&Z.push("domain="+z),J===!0&&Z.push("secure"),document.cookie=Z.join("; ")},read:function(L){var Y=document.cookie.match(new RegExp("(^|;\\s*)("+L+")=([^;]*)"));return Y?decodeURIComponent(Y[3]):null},remove:function(L){this.write(L,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(U){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(U)},combineURLs$1=function(U,L){return L?U.replace(/\/+$/,"")+"/"+L.replace(/^\/+/,""):U},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(U,L){return U&&!isAbsoluteURL(L)?combineURLs(U,L):L},utils$a=utils$f,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(U){var L={},Y,X,W;return U&&utils$a.forEach(U.split(`
`),function(J){if(W=J.indexOf(":"),Y=utils$a.trim(J.substr(0,W)).toLowerCase(),X=utils$a.trim(J.substr(W+1)),Y){if(L[Y]&&ignoreDuplicateOf.indexOf(Y)>=0)return;Y==="set-cookie"?L[Y]=(L[Y]?L[Y]:[]).concat([X]):L[Y]=L[Y]?L[Y]+", "+X:X}}),L},utils$9=utils$f,isURLSameOrigin$1=utils$9.isStandardBrowserEnv()?function(){var U=/(msie|trident)/i.test(navigator.userAgent),L=document.createElement("a"),Y;function X(W){var z=W;return U&&(L.setAttribute("href",z),z=L.href),L.setAttribute("href",z),{href:L.href,protocol:L.protocol?L.protocol.replace(/:$/,""):"",host:L.host,search:L.search?L.search.replace(/^\?/,""):"",hash:L.hash?L.hash.replace(/^#/,""):"",hostname:L.hostname,port:L.port,pathname:L.pathname.charAt(0)==="/"?L.pathname:"/"+L.pathname}}return Y=X(window.location.href),function(z){var J=utils$9.isString(z)?X(z):z;return J.protocol===Y.protocol&&J.host===Y.host}}():function(){return function(){return!0}}();function Cancel$3(G){this.message=G}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$8=utils$f,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(U){return new Promise(function(Y,X){var W=U.data,z=U.headers,J=U.responseType,Z;function ee(){U.cancelToken&&U.cancelToken.unsubscribe(Z),U.signal&&U.signal.removeEventListener("abort",Z)}utils$8.isFormData(W)&&delete z["Content-Type"];var te=new XMLHttpRequest;if(U.auth){var re=U.auth.username||"",ie=U.auth.password?unescape(encodeURIComponent(U.auth.password)):"";z.Authorization="Basic "+btoa(re+":"+ie)}var ne=buildFullPath(U.baseURL,U.url);te.open(U.method.toUpperCase(),buildURL$1(ne,U.params,U.paramsSerializer),!0),te.timeout=U.timeout;function oe(){if(!!te){var ae="getAllResponseHeaders"in te?parseHeaders(te.getAllResponseHeaders()):null,le=!J||J==="text"||J==="json"?te.responseText:te.response,ue={data:le,status:te.status,statusText:te.statusText,headers:ae,config:U,request:te};settle(function(he){Y(he),ee()},function(he){X(he),ee()},ue),te=null}}if("onloadend"in te?te.onloadend=oe:te.onreadystatechange=function(){!te||te.readyState!==4||te.status===0&&!(te.responseURL&&te.responseURL.indexOf("file:")===0)||setTimeout(oe)},te.onabort=function(){!te||(X(createError("Request aborted",U,"ECONNABORTED",te)),te=null)},te.onerror=function(){X(createError("Network Error",U,null,te)),te=null},te.ontimeout=function(){var le=U.timeout?"timeout of "+U.timeout+"ms exceeded":"timeout exceeded",ue=U.transitional||transitionalDefaults$1;U.timeoutErrorMessage&&(le=U.timeoutErrorMessage),X(createError(le,U,ue.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",te)),te=null},utils$8.isStandardBrowserEnv()){var se=(U.withCredentials||isURLSameOrigin(ne))&&U.xsrfCookieName?cookies.read(U.xsrfCookieName):void 0;se&&(z[U.xsrfHeaderName]=se)}"setRequestHeader"in te&&utils$8.forEach(z,function(le,ue){typeof W=="undefined"&&ue.toLowerCase()==="content-type"?delete z[ue]:te.setRequestHeader(ue,le)}),utils$8.isUndefined(U.withCredentials)||(te.withCredentials=!!U.withCredentials),J&&J!=="json"&&(te.responseType=U.responseType),typeof U.onDownloadProgress=="function"&&te.addEventListener("progress",U.onDownloadProgress),typeof U.onUploadProgress=="function"&&te.upload&&te.upload.addEventListener("progress",U.onUploadProgress),(U.cancelToken||U.signal)&&(Z=function(ae){!te||(X(!ae||ae&&ae.type?new Cancel$2("canceled"):ae),te.abort(),te=null)},U.cancelToken&&U.cancelToken.subscribe(Z),U.signal&&(U.signal.aborted?Z():U.signal.addEventListener("abort",Z))),W||(W=null),te.send(W)})},utils$7=utils$f,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(G,U){!utils$7.isUndefined(G)&&utils$7.isUndefined(G["Content-Type"])&&(G["Content-Type"]=U)}function getDefaultAdapter(){var G;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(G=xhr),G}function stringifySafely(G,U,L){if(utils$7.isString(G))try{return(U||JSON.parse)(G),utils$7.trim(G)}catch(Y){if(Y.name!=="SyntaxError")throw Y}return(L||JSON.stringify)(G)}var defaults$4={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(U,L){return normalizeHeaderName(L,"Accept"),normalizeHeaderName(L,"Content-Type"),utils$7.isFormData(U)||utils$7.isArrayBuffer(U)||utils$7.isBuffer(U)||utils$7.isStream(U)||utils$7.isFile(U)||utils$7.isBlob(U)?U:utils$7.isArrayBufferView(U)?U.buffer:utils$7.isURLSearchParams(U)?(setContentTypeIfUnset(L,"application/x-www-form-urlencoded;charset=utf-8"),U.toString()):utils$7.isObject(U)||L&&L["Content-Type"]==="application/json"?(setContentTypeIfUnset(L,"application/json"),stringifySafely(U)):U}],transformResponse:[function(U){var L=this.transitional||defaults$4.transitional,Y=L&&L.silentJSONParsing,X=L&&L.forcedJSONParsing,W=!Y&&this.responseType==="json";if(W||X&&utils$7.isString(U)&&U.length)try{return JSON.parse(U)}catch(z){if(W)throw z.name==="SyntaxError"?enhanceError(z,this,"E_JSON_PARSE"):z}return U}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(U){return U>=200&&U<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$7.forEach(["delete","get","head"],function(U){defaults$4.headers[U]={}});utils$7.forEach(["post","put","patch"],function(U){defaults$4.headers[U]=utils$7.merge(DEFAULT_CONTENT_TYPE)});var defaults_1$1=defaults$4,utils$6=utils$f,defaults$3=defaults_1$1,transformData$1=function(U,L,Y){var X=this||defaults$3;return utils$6.forEach(Y,function(z){U=z.call(X,U,L)}),U},isCancel$1=function(U){return!!(U&&U.__CANCEL__)},utils$5=utils$f,transformData=transformData$1,isCancel=isCancel$1,defaults$2=defaults_1$1,Cancel$1=Cancel_1;function throwIfCancellationRequested(G){if(G.cancelToken&&G.cancelToken.throwIfRequested(),G.signal&&G.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(U){throwIfCancellationRequested(U),U.headers=U.headers||{},U.data=transformData.call(U,U.data,U.headers,U.transformRequest),U.headers=utils$5.merge(U.headers.common||{},U.headers[U.method]||{},U.headers),utils$5.forEach(["delete","get","head","post","put","patch","common"],function(X){delete U.headers[X]});var L=U.adapter||defaults$2.adapter;return L(U).then(function(X){return throwIfCancellationRequested(U),X.data=transformData.call(U,X.data,X.headers,U.transformResponse),X},function(X){return isCancel(X)||(throwIfCancellationRequested(U),X&&X.response&&(X.response.data=transformData.call(U,X.response.data,X.response.headers,U.transformResponse))),Promise.reject(X)})},utils$4=utils$f,mergeConfig$2=function(U,L){L=L||{};var Y={};function X(te,re){return utils$4.isPlainObject(te)&&utils$4.isPlainObject(re)?utils$4.merge(te,re):utils$4.isPlainObject(re)?utils$4.merge({},re):utils$4.isArray(re)?re.slice():re}function W(te){if(utils$4.isUndefined(L[te])){if(!utils$4.isUndefined(U[te]))return X(void 0,U[te])}else return X(U[te],L[te])}function z(te){if(!utils$4.isUndefined(L[te]))return X(void 0,L[te])}function J(te){if(utils$4.isUndefined(L[te])){if(!utils$4.isUndefined(U[te]))return X(void 0,U[te])}else return X(void 0,L[te])}function Z(te){if(te in L)return X(U[te],L[te]);if(te in U)return X(void 0,U[te])}var ee={url:z,method:z,data:z,baseURL:J,transformRequest:J,transformResponse:J,paramsSerializer:J,timeout:J,timeoutMessage:J,withCredentials:J,adapter:J,responseType:J,xsrfCookieName:J,xsrfHeaderName:J,onUploadProgress:J,onDownloadProgress:J,decompress:J,maxContentLength:J,maxBodyLength:J,transport:J,httpAgent:J,httpsAgent:J,cancelToken:J,socketPath:J,responseEncoding:J,validateStatus:Z};return utils$4.forEach(Object.keys(U).concat(Object.keys(L)),function(re){var ie=ee[re]||W,ne=ie(re);utils$4.isUndefined(ne)&&ie!==Z||(Y[re]=ne)}),Y},data={version:"0.26.1"},VERSION$7=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(G,U){validators$1[G]=function(Y){return typeof Y===G||"a"+(U<1?"n ":" ")+G}});var deprecatedWarnings={};validators$1.transitional=function(U,L,Y){function X(W,z){return"[Axios v"+VERSION$7+"] Transitional option '"+W+"'"+z+(Y?". "+Y:"")}return function(W,z,J){if(U===!1)throw new Error(X(z," has been removed"+(L?" in "+L:"")));return L&&!deprecatedWarnings[z]&&(deprecatedWarnings[z]=!0,console.warn(X(z," has been deprecated since v"+L+" and will be removed in the near future"))),U?U(W,z,J):!0}};function assertOptions(G,U,L){if(typeof G!="object")throw new TypeError("options must be an object");for(var Y=Object.keys(G),X=Y.length;X-- >0;){var W=Y[X],z=U[W];if(z){var J=G[W],Z=J===void 0||z(J,W,G);if(Z!==!0)throw new TypeError("option "+W+" must be "+Z);continue}if(L!==!0)throw Error("Unknown option "+W)}}var validator$1={assertOptions,validators:validators$1},utils$3=utils$f,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(G){this.defaults=G,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(U,L){typeof U=="string"?(L=L||{},L.url=U):L=U||{},L=mergeConfig$1(this.defaults,L),L.method?L.method=L.method.toLowerCase():this.defaults.method?L.method=this.defaults.method.toLowerCase():L.method="get";var Y=L.transitional;Y!==void 0&&validator.assertOptions(Y,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var X=[],W=!0;this.interceptors.request.forEach(function(ne){typeof ne.runWhen=="function"&&ne.runWhen(L)===!1||(W=W&&ne.synchronous,X.unshift(ne.fulfilled,ne.rejected))});var z=[];this.interceptors.response.forEach(function(ne){z.push(ne.fulfilled,ne.rejected)});var J;if(!W){var Z=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(Z,X),Z=Z.concat(z),J=Promise.resolve(L);Z.length;)J=J.then(Z.shift(),Z.shift());return J}for(var ee=L;X.length;){var te=X.shift(),re=X.shift();try{ee=te(ee)}catch(ie){re(ie);break}}try{J=dispatchRequest(ee)}catch(ie){return Promise.reject(ie)}for(;z.length;)J=J.then(z.shift(),z.shift());return J};Axios$1.prototype.getUri=function(U){return U=mergeConfig$1(this.defaults,U),buildURL(U.url,U.params,U.paramsSerializer).replace(/^\?/,"")};utils$3.forEach(["delete","get","head","options"],function(U){Axios$1.prototype[U]=function(L,Y){return this.request(mergeConfig$1(Y||{},{method:U,url:L,data:(Y||{}).data}))}});utils$3.forEach(["post","put","patch"],function(U){Axios$1.prototype[U]=function(L,Y,X){return this.request(mergeConfig$1(X||{},{method:U,url:L,data:Y}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(G){if(typeof G!="function")throw new TypeError("executor must be a function.");var U;this.promise=new Promise(function(X){U=X});var L=this;this.promise.then(function(Y){if(!!L._listeners){var X,W=L._listeners.length;for(X=0;X<W;X++)L._listeners[X](Y);L._listeners=null}}),this.promise.then=function(Y){var X,W=new Promise(function(z){L.subscribe(z),X=z}).then(Y);return W.cancel=function(){L.unsubscribe(X)},W},G(function(X){L.reason||(L.reason=new Cancel(X),U(L.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(U){if(this.reason){U(this.reason);return}this._listeners?this._listeners.push(U):this._listeners=[U]};CancelToken.prototype.unsubscribe=function(U){if(!!this._listeners){var L=this._listeners.indexOf(U);L!==-1&&this._listeners.splice(L,1)}};CancelToken.source=function(){var U,L=new CancelToken(function(X){U=X});return{token:L,cancel:U}};var CancelToken_1=CancelToken,spread=function(U){return function(Y){return U.apply(null,Y)}},utils$2=utils$f,isAxiosError=function(U){return utils$2.isObject(U)&&U.isAxiosError===!0},utils$1=utils$f,bind$1=bind$3,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1$1;function createInstance(G){var U=new Axios(G),L=bind$1(Axios.prototype.request,U);return utils$1.extend(L,Axios.prototype,U),utils$1.extend(L,U),L.create=function(X){return createInstance(mergeConfig(G,X))},L}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(U){return Promise.all(U)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports;function finallyConstructor(G){var U=this.constructor;return this.then(function(L){return U.resolve(G()).then(function(){return L})},function(L){return U.resolve(G()).then(function(){return U.reject(L)})})}function allSettled(G){var U=this;return new U(function(L,Y){if(!(G&&typeof G.length!="undefined"))return Y(new TypeError(typeof G+" "+G+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var X=Array.prototype.slice.call(G);if(X.length===0)return L([]);var W=X.length;function z(Z,ee){if(ee&&(typeof ee=="object"||typeof ee=="function")){var te=ee.then;if(typeof te=="function"){te.call(ee,function(re){z(Z,re)},function(re){X[Z]={status:"rejected",reason:re},--W===0&&L(X)});return}}X[Z]={status:"fulfilled",value:ee},--W===0&&L(X)}for(var J=0;J<X.length;J++)z(J,X[J])})}var setTimeoutFunc=setTimeout;function isArray$1(G){return Boolean(G&&typeof G.length!="undefined")}function noop$4(){}function bind(G,U){return function(){G.apply(U,arguments)}}function Promise$1(G){if(!(this instanceof Promise$1))throw new TypeError("Promises must be constructed via new");if(typeof G!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(G,this)}function handle(G,U){for(;G._state===3;)G=G._value;if(G._state===0){G._deferreds.push(U);return}G._handled=!0,Promise$1._immediateFn(function(){var L=G._state===1?U.onFulfilled:U.onRejected;if(L===null){(G._state===1?resolve$2:reject)(U.promise,G._value);return}var Y;try{Y=L(G._value)}catch(X){reject(U.promise,X);return}resolve$2(U.promise,Y)})}function resolve$2(G,U){try{if(U===G)throw new TypeError("A promise cannot be resolved with itself.");if(U&&(typeof U=="object"||typeof U=="function")){var L=U.then;if(U instanceof Promise$1){G._state=3,G._value=U,finale(G);return}else if(typeof L=="function"){doResolve(bind(L,U),G);return}}G._state=1,G._value=U,finale(G)}catch(Y){reject(G,Y)}}function reject(G,U){G._state=2,G._value=U,finale(G)}function finale(G){G._state===2&&G._deferreds.length===0&&Promise$1._immediateFn(function(){G._handled||Promise$1._unhandledRejectionFn(G._value)});for(var U=0,L=G._deferreds.length;U<L;U++)handle(G,G._deferreds[U]);G._deferreds=null}function Handler(G,U,L){this.onFulfilled=typeof G=="function"?G:null,this.onRejected=typeof U=="function"?U:null,this.promise=L}function doResolve(G,U){var L=!1;try{G(function(Y){L||(L=!0,resolve$2(U,Y))},function(Y){L||(L=!0,reject(U,Y))})}catch(Y){if(L)return;L=!0,reject(U,Y)}}Promise$1.prototype.catch=function(G){return this.then(null,G)};Promise$1.prototype.then=function(G,U){var L=new this.constructor(noop$4);return handle(this,new Handler(G,U,L)),L};Promise$1.prototype.finally=finallyConstructor;Promise$1.all=function(G){return new Promise$1(function(U,L){if(!isArray$1(G))return L(new TypeError("Promise.all accepts an array"));var Y=Array.prototype.slice.call(G);if(Y.length===0)return U([]);var X=Y.length;function W(J,Z){try{if(Z&&(typeof Z=="object"||typeof Z=="function")){var ee=Z.then;if(typeof ee=="function"){ee.call(Z,function(te){W(J,te)},L);return}}Y[J]=Z,--X===0&&U(Y)}catch(te){L(te)}}for(var z=0;z<Y.length;z++)W(z,Y[z])})};Promise$1.allSettled=allSettled;Promise$1.resolve=function(G){return G&&typeof G=="object"&&G.constructor===Promise$1?G:new Promise$1(function(U){U(G)})};Promise$1.reject=function(G){return new Promise$1(function(U,L){L(G)})};Promise$1.race=function(G){return new Promise$1(function(U,L){if(!isArray$1(G))return L(new TypeError("Promise.race accepts an array"));for(var Y=0,X=G.length;Y<X;Y++)Promise$1.resolve(G[Y]).then(U,L)})};Promise$1._immediateFn=typeof setImmediate=="function"&&function(G){setImmediate(G)}||function(G){setTimeoutFunc(G,0)};Promise$1._unhandledRejectionFn=function(U){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",U)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$3=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(G){if(G==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(G)}function shouldUseNative(){try{if(!Object.assign)return!1;var G=new String("abc");if(G[5]="de",Object.getOwnPropertyNames(G)[0]==="5")return!1;for(var U={},L=0;L<10;L++)U["_"+String.fromCharCode(L)]=L;var Y=Object.getOwnPropertyNames(U).map(function(W){return U[W]});if(Y.join("")!=="0123456789")return!1;var X={};return"abcdefghijklmnopqrst".split("").forEach(function(W){X[W]=W}),Object.keys(Object.assign({},X)).join("")==="abcdefghijklmnopqrst"}catch(W){return!1}}var objectAssign=shouldUseNative()?Object.assign:function(G,U){for(var L,Y=toObject(G),X,W=1;W<arguments.length;W++){L=Object(arguments[W]);for(var z in L)hasOwnProperty$3.call(L,z)&&(Y[z]=L[z]);if(getOwnPropertySymbols){X=getOwnPropertySymbols(L);for(var J=0;J<X.length;J++)propIsEnumerable.call(L,X[J])&&(Y[X[J]]=L[X[J]])}}return Y};/*!
 * @pixi/polyfill - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis=="undefined"&&(typeof self!="undefined"?self.globalThis=self:typeof global!="undefined"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=Promise$1);Object.assign||(Object.assign=objectAssign);var ONE_FRAME_TIME=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var startTime_1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-startTime_1}}var lastTime=Date.now(),vendors=["ms","moz","webkit","o"];for(var x$2=0;x$2<vendors.length&&!globalThis.requestAnimationFrame;++x$2){var p$1=vendors[x$2];globalThis.requestAnimationFrame=globalThis[p$1+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[p$1+"CancelAnimationFrame"]||globalThis[p$1+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(G){if(typeof G!="function")throw new TypeError(G+"is not a function");var U=Date.now(),L=ONE_FRAME_TIME+lastTime-U;return L<0&&(L=0),lastTime=U,globalThis.self.setTimeout(function(){lastTime=Date.now(),G(performance.now())},L)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(G){return clearTimeout(G)});Math.sign||(Math.sign=function(U){return U=Number(U),U===0||isNaN(U)?U:U>0?1:-1});Number.isInteger||(Number.isInteger=function(U){return typeof U=="number"&&isFinite(U)&&Math.floor(U)===U});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);var appleIphone$1=/iPhone/i,appleIpod$1=/iPod/i,appleTablet$1=/iPad/i,appleUniversal$1=/\biOS-universal(?:.+)Mac\b/i,androidPhone$1=/\bAndroid(?:.+)Mobile\b/i,androidTablet$1=/Android/i,amazonPhone$1=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet$1=/Silk/i,windowsPhone$1=/Windows Phone/i,windowsTablet$1=/\bWindows(?:.+)ARM\b/i,otherBlackBerry$1=/BlackBerry/i,otherBlackBerry10$1=/BB10/i,otherOpera$1=/Opera Mini/i,otherChrome$1=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox$1=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13$1=function(G){return typeof G!="undefined"&&G.platform==="MacIntel"&&typeof G.maxTouchPoints=="number"&&G.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch$1(G){return function(U){return U.test(G)}}function isMobile$5(G){var U={userAgent:"",platform:"",maxTouchPoints:0};!G&&typeof navigator!="undefined"?U={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof G=="string"?U.userAgent=G:G&&G.userAgent&&(U={userAgent:G.userAgent,platform:G.platform,maxTouchPoints:G.maxTouchPoints||0});var L=U.userAgent,Y=L.split("[FBAN");typeof Y[1]!="undefined"&&(L=Y[0]),Y=L.split("Twitter"),typeof Y[1]!="undefined"&&(L=Y[0]);var X=createMatch$1(L),W={apple:{phone:X(appleIphone$1)&&!X(windowsPhone$1),ipod:X(appleIpod$1),tablet:!X(appleIphone$1)&&(X(appleTablet$1)||isAppleTabletOnIos13$1(U))&&!X(windowsPhone$1),universal:X(appleUniversal$1),device:(X(appleIphone$1)||X(appleIpod$1)||X(appleTablet$1)||X(appleUniversal$1)||isAppleTabletOnIos13$1(U))&&!X(windowsPhone$1)},amazon:{phone:X(amazonPhone$1),tablet:!X(amazonPhone$1)&&X(amazonTablet$1),device:X(amazonPhone$1)||X(amazonTablet$1)},android:{phone:!X(windowsPhone$1)&&X(amazonPhone$1)||!X(windowsPhone$1)&&X(androidPhone$1),tablet:!X(windowsPhone$1)&&!X(amazonPhone$1)&&!X(androidPhone$1)&&(X(amazonTablet$1)||X(androidTablet$1)),device:!X(windowsPhone$1)&&(X(amazonPhone$1)||X(amazonTablet$1)||X(androidPhone$1)||X(androidTablet$1))||X(/\bokhttp\b/i)},windows:{phone:X(windowsPhone$1),tablet:X(windowsTablet$1),device:X(windowsPhone$1)||X(windowsTablet$1)},other:{blackberry:X(otherBlackBerry$1),blackberry10:X(otherBlackBerry10$1),opera:X(otherOpera$1),firefox:X(otherFirefox$1),chrome:X(otherChrome$1),device:X(otherBlackBerry$1)||X(otherBlackBerry10$1)||X(otherOpera$1)||X(otherFirefox$1)||X(otherChrome$1)},any:!1,phone:!1,tablet:!1};return W.any=W.apple.device||W.android.device||W.windows.device||W.other.device,W.phone=W.apple.phone||W.android.phone||W.windows.phone,W.tablet=W.apple.tablet||W.android.tablet||W.windows.tablet,W}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var isMobile$4=isMobile$5(globalThis.navigator);function maxRecommendedTextures$1(G){var U=!0;if(isMobile$4.tablet||isMobile$4.phone){if(isMobile$4.apple.device){var L=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(L){var Y=parseInt(L[1],10);Y<11&&(U=!1)}}if(isMobile$4.android.device){var L=navigator.userAgent.match(/Android\s([0-9.]*)/);if(L){var Y=parseInt(L[1],10);Y<7&&(U=!1)}}}return U?G:4}function canUploadSameBuffer$1(){return!isMobile$4.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$5;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$5||(ENV$5={}));var RENDERER_TYPE$5;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$5||(RENDERER_TYPE$5={}));var BUFFER_BITS$5;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$5||(BUFFER_BITS$5={}));var BLEND_MODES$5;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$5||(BLEND_MODES$5={}));var DRAW_MODES$5;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$5||(DRAW_MODES$5={}));var FORMATS$5;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$5||(FORMATS$5={}));var TARGETS$5;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$5||(TARGETS$5={}));var TYPES$5;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$5||(TYPES$5={}));var SAMPLER_TYPES$5;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$5||(SAMPLER_TYPES$5={}));var SCALE_MODES$5;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$5||(SCALE_MODES$5={}));var WRAP_MODES$5;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$5||(WRAP_MODES$5={}));var MIPMAP_MODES$5;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$5||(MIPMAP_MODES$5={}));var ALPHA_MODES$5;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$5||(ALPHA_MODES$5={}));var CLEAR_MODES$5;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$5||(CLEAR_MODES$5={}));var GC_MODES$5;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$5||(GC_MODES$5={}));var PRECISION$5;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$5||(PRECISION$5={}));var MASK_TYPES$5;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$5||(MASK_TYPES$5={}));var MSAA_QUALITY$5;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$5||(MSAA_QUALITY$5={}));var BUFFER_TYPE$5;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$5||(BUFFER_TYPE$5={}));var settings$1={MIPMAP_TEXTURES:MIPMAP_MODES$5.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$5.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures$1(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$5.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$5.CLAMP,SCALE_MODE:SCALE_MODES$5.LINEAR,PRECISION_VERTEX:PRECISION$5.HIGH,PRECISION_FRAGMENT:isMobile$4.apple.device?PRECISION$5.HIGH:PRECISION$5.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer$1(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},eventemitter3$2={exports:{}};(function(G){var U=Object.prototype.hasOwnProperty,L="~";function Y(){}Object.create&&(Y.prototype=Object.create(null),new Y().__proto__||(L=!1));function X(Z,ee,te){this.fn=Z,this.context=ee,this.once=te||!1}function W(Z,ee,te,re,ie){if(typeof te!="function")throw new TypeError("The listener must be a function");var ne=new X(te,re||Z,ie),oe=L?L+ee:ee;return Z._events[oe]?Z._events[oe].fn?Z._events[oe]=[Z._events[oe],ne]:Z._events[oe].push(ne):(Z._events[oe]=ne,Z._eventsCount++),Z}function z(Z,ee){--Z._eventsCount===0?Z._events=new Y:delete Z._events[ee]}function J(){this._events=new Y,this._eventsCount=0}J.prototype.eventNames=function(){var ee=[],te,re;if(this._eventsCount===0)return ee;for(re in te=this._events)U.call(te,re)&&ee.push(L?re.slice(1):re);return Object.getOwnPropertySymbols?ee.concat(Object.getOwnPropertySymbols(te)):ee},J.prototype.listeners=function(ee){var te=L?L+ee:ee,re=this._events[te];if(!re)return[];if(re.fn)return[re.fn];for(var ie=0,ne=re.length,oe=new Array(ne);ie<ne;ie++)oe[ie]=re[ie].fn;return oe},J.prototype.listenerCount=function(ee){var te=L?L+ee:ee,re=this._events[te];return re?re.fn?1:re.length:0},J.prototype.emit=function(ee,te,re,ie,ne,oe){var se=L?L+ee:ee;if(!this._events[se])return!1;var ae=this._events[se],le=arguments.length,ue,ce;if(ae.fn){switch(ae.once&&this.removeListener(ee,ae.fn,void 0,!0),le){case 1:return ae.fn.call(ae.context),!0;case 2:return ae.fn.call(ae.context,te),!0;case 3:return ae.fn.call(ae.context,te,re),!0;case 4:return ae.fn.call(ae.context,te,re,ie),!0;case 5:return ae.fn.call(ae.context,te,re,ie,ne),!0;case 6:return ae.fn.call(ae.context,te,re,ie,ne,oe),!0}for(ce=1,ue=new Array(le-1);ce<le;ce++)ue[ce-1]=arguments[ce];ae.fn.apply(ae.context,ue)}else{var he=ae.length,fe;for(ce=0;ce<he;ce++)switch(ae[ce].once&&this.removeListener(ee,ae[ce].fn,void 0,!0),le){case 1:ae[ce].fn.call(ae[ce].context);break;case 2:ae[ce].fn.call(ae[ce].context,te);break;case 3:ae[ce].fn.call(ae[ce].context,te,re);break;case 4:ae[ce].fn.call(ae[ce].context,te,re,ie);break;default:if(!ue)for(fe=1,ue=new Array(le-1);fe<le;fe++)ue[fe-1]=arguments[fe];ae[ce].fn.apply(ae[ce].context,ue)}}return!0},J.prototype.on=function(ee,te,re){return W(this,ee,te,re,!1)},J.prototype.once=function(ee,te,re){return W(this,ee,te,re,!0)},J.prototype.removeListener=function(ee,te,re,ie){var ne=L?L+ee:ee;if(!this._events[ne])return this;if(!te)return z(this,ne),this;var oe=this._events[ne];if(oe.fn)oe.fn===te&&(!ie||oe.once)&&(!re||oe.context===re)&&z(this,ne);else{for(var se=0,ae=[],le=oe.length;se<le;se++)(oe[se].fn!==te||ie&&!oe[se].once||re&&oe[se].context!==re)&&ae.push(oe[se]);ae.length?this._events[ne]=ae.length===1?ae[0]:ae:z(this,ne)}return this},J.prototype.removeAllListeners=function(ee){var te;return ee?(te=L?L+ee:ee,this._events[te]&&z(this,te)):(this._events=new Y,this._eventsCount=0),this},J.prototype.off=J.prototype.removeListener,J.prototype.addListener=J.prototype.on,J.prefixed=L,J.EventEmitter=J,G.exports=J})(eventemitter3$2);var n$4=eventemitter3$2.exports,earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(G,U,L){L=L||2;var Y=U&&U.length,X=Y?U[0]*L:G.length,W=linkedList(G,0,X,L,!0),z=[];if(!W||W.next===W.prev)return z;var J,Z,ee,te,re,ie,ne;if(Y&&(W=eliminateHoles(G,U,W,L)),G.length>80*L){J=ee=G[0],Z=te=G[1];for(var oe=L;oe<X;oe+=L)re=G[oe],ie=G[oe+1],re<J&&(J=re),ie<Z&&(Z=ie),re>ee&&(ee=re),ie>te&&(te=ie);ne=Math.max(ee-J,te-Z),ne=ne!==0?1/ne:0}return earcutLinked(W,z,L,J,Z,ne),z}function linkedList(G,U,L,Y,X){var W,z;if(X===signedArea(G,U,L,Y)>0)for(W=U;W<L;W+=Y)z=insertNode(W,G[W],G[W+1],z);else for(W=L-Y;W>=U;W-=Y)z=insertNode(W,G[W],G[W+1],z);return z&&equals(z,z.next)&&(removeNode(z),z=z.next),z}function filterPoints(G,U){if(!G)return G;U||(U=G);var L=G,Y;do if(Y=!1,!L.steiner&&(equals(L,L.next)||area(L.prev,L,L.next)===0)){if(removeNode(L),L=U=L.prev,L===L.next)break;Y=!0}else L=L.next;while(Y||L!==U);return U}function earcutLinked(G,U,L,Y,X,W,z){if(!!G){!z&&W&&indexCurve(G,Y,X,W);for(var J=G,Z,ee;G.prev!==G.next;){if(Z=G.prev,ee=G.next,W?isEarHashed(G,Y,X,W):isEar(G)){U.push(Z.i/L),U.push(G.i/L),U.push(ee.i/L),removeNode(G),G=ee.next,J=ee.next;continue}if(G=ee,G===J){z?z===1?(G=cureLocalIntersections(filterPoints(G),U,L),earcutLinked(G,U,L,Y,X,W,2)):z===2&&splitEarcut(G,U,L,Y,X,W):earcutLinked(filterPoints(G),U,L,Y,X,W,1);break}}}}function isEar(G){var U=G.prev,L=G,Y=G.next;if(area(U,L,Y)>=0)return!1;for(var X=G.next.next;X!==G.prev;){if(pointInTriangle(U.x,U.y,L.x,L.y,Y.x,Y.y,X.x,X.y)&&area(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function isEarHashed(G,U,L,Y){var X=G.prev,W=G,z=G.next;if(area(X,W,z)>=0)return!1;for(var J=X.x<W.x?X.x<z.x?X.x:z.x:W.x<z.x?W.x:z.x,Z=X.y<W.y?X.y<z.y?X.y:z.y:W.y<z.y?W.y:z.y,ee=X.x>W.x?X.x>z.x?X.x:z.x:W.x>z.x?W.x:z.x,te=X.y>W.y?X.y>z.y?X.y:z.y:W.y>z.y?W.y:z.y,re=zOrder(J,Z,U,L,Y),ie=zOrder(ee,te,U,L,Y),ne=G.prevZ,oe=G.nextZ;ne&&ne.z>=re&&oe&&oe.z<=ie;){if(ne!==G.prev&&ne!==G.next&&pointInTriangle(X.x,X.y,W.x,W.y,z.x,z.y,ne.x,ne.y)&&area(ne.prev,ne,ne.next)>=0||(ne=ne.prevZ,oe!==G.prev&&oe!==G.next&&pointInTriangle(X.x,X.y,W.x,W.y,z.x,z.y,oe.x,oe.y)&&area(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;ne&&ne.z>=re;){if(ne!==G.prev&&ne!==G.next&&pointInTriangle(X.x,X.y,W.x,W.y,z.x,z.y,ne.x,ne.y)&&area(ne.prev,ne,ne.next)>=0)return!1;ne=ne.prevZ}for(;oe&&oe.z<=ie;){if(oe!==G.prev&&oe!==G.next&&pointInTriangle(X.x,X.y,W.x,W.y,z.x,z.y,oe.x,oe.y)&&area(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function cureLocalIntersections(G,U,L){var Y=G;do{var X=Y.prev,W=Y.next.next;!equals(X,W)&&intersects(X,Y,Y.next,W)&&locallyInside(X,W)&&locallyInside(W,X)&&(U.push(X.i/L),U.push(Y.i/L),U.push(W.i/L),removeNode(Y),removeNode(Y.next),Y=G=W),Y=Y.next}while(Y!==G);return filterPoints(Y)}function splitEarcut(G,U,L,Y,X,W){var z=G;do{for(var J=z.next.next;J!==z.prev;){if(z.i!==J.i&&isValidDiagonal(z,J)){var Z=splitPolygon(z,J);z=filterPoints(z,z.next),Z=filterPoints(Z,Z.next),earcutLinked(z,U,L,Y,X,W),earcutLinked(Z,U,L,Y,X,W);return}J=J.next}z=z.next}while(z!==G)}function eliminateHoles(G,U,L,Y){var X=[],W,z,J,Z,ee;for(W=0,z=U.length;W<z;W++)J=U[W]*Y,Z=W<z-1?U[W+1]*Y:G.length,ee=linkedList(G,J,Z,Y,!1),ee===ee.next&&(ee.steiner=!0),X.push(getLeftmost(ee));for(X.sort(compareX),W=0;W<X.length;W++)L=eliminateHole(X[W],L),L=filterPoints(L,L.next);return L}function compareX(G,U){return G.x-U.x}function eliminateHole(G,U){var L=findHoleBridge(G,U);if(!L)return U;var Y=splitPolygon(L,G),X=filterPoints(L,L.next);return filterPoints(Y,Y.next),U===L?X:U}function findHoleBridge(G,U){var L=U,Y=G.x,X=G.y,W=-1/0,z;do{if(X<=L.y&&X>=L.next.y&&L.next.y!==L.y){var J=L.x+(X-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(J<=Y&&J>W){if(W=J,J===Y){if(X===L.y)return L;if(X===L.next.y)return L.next}z=L.x<L.next.x?L:L.next}}L=L.next}while(L!==U);if(!z)return null;if(Y===W)return z;var Z=z,ee=z.x,te=z.y,re=1/0,ie;L=z;do Y>=L.x&&L.x>=ee&&Y!==L.x&&pointInTriangle(X<te?Y:W,X,ee,te,X<te?W:Y,X,L.x,L.y)&&(ie=Math.abs(X-L.y)/(Y-L.x),locallyInside(L,G)&&(ie<re||ie===re&&(L.x>z.x||L.x===z.x&&sectorContainsSector(z,L)))&&(z=L,re=ie)),L=L.next;while(L!==Z);return z}function sectorContainsSector(G,U){return area(G.prev,G,U.prev)<0&&area(U.next,G,G.next)<0}function indexCurve(G,U,L,Y){var X=G;do X.z===null&&(X.z=zOrder(X.x,X.y,U,L,Y)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==G);X.prevZ.nextZ=null,X.prevZ=null,sortLinked(X)}function sortLinked(G){var U,L,Y,X,W,z,J,Z,ee=1;do{for(L=G,G=null,W=null,z=0;L;){for(z++,Y=L,J=0,U=0;U<ee&&(J++,Y=Y.nextZ,!!Y);U++);for(Z=ee;J>0||Z>0&&Y;)J!==0&&(Z===0||!Y||L.z<=Y.z)?(X=L,L=L.nextZ,J--):(X=Y,Y=Y.nextZ,Z--),W?W.nextZ=X:G=X,X.prevZ=W,W=X;L=Y}W.nextZ=null,ee*=2}while(z>1);return G}function zOrder(G,U,L,Y,X){return G=32767*(G-L)*X,U=32767*(U-Y)*X,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,G|U<<1}function getLeftmost(G){var U=G,L=G;do(U.x<L.x||U.x===L.x&&U.y<L.y)&&(L=U),U=U.next;while(U!==G);return L}function pointInTriangle(G,U,L,Y,X,W,z,J){return(X-z)*(U-J)-(G-z)*(W-J)>=0&&(G-z)*(Y-J)-(L-z)*(U-J)>=0&&(L-z)*(W-J)-(X-z)*(Y-J)>=0}function isValidDiagonal(G,U){return G.next.i!==U.i&&G.prev.i!==U.i&&!intersectsPolygon(G,U)&&(locallyInside(G,U)&&locallyInside(U,G)&&middleInside(G,U)&&(area(G.prev,G,U.prev)||area(G,U.prev,U))||equals(G,U)&&area(G.prev,G,G.next)>0&&area(U.prev,U,U.next)>0)}function area(G,U,L){return(U.y-G.y)*(L.x-U.x)-(U.x-G.x)*(L.y-U.y)}function equals(G,U){return G.x===U.x&&G.y===U.y}function intersects(G,U,L,Y){var X=sign$1(area(G,U,L)),W=sign$1(area(G,U,Y)),z=sign$1(area(L,Y,G)),J=sign$1(area(L,Y,U));return!!(X!==W&&z!==J||X===0&&onSegment(G,L,U)||W===0&&onSegment(G,Y,U)||z===0&&onSegment(L,G,Y)||J===0&&onSegment(L,U,Y))}function onSegment(G,U,L){return U.x<=Math.max(G.x,L.x)&&U.x>=Math.min(G.x,L.x)&&U.y<=Math.max(G.y,L.y)&&U.y>=Math.min(G.y,L.y)}function sign$1(G){return G>0?1:G<0?-1:0}function intersectsPolygon(G,U){var L=G;do{if(L.i!==G.i&&L.next.i!==G.i&&L.i!==U.i&&L.next.i!==U.i&&intersects(L,L.next,G,U))return!0;L=L.next}while(L!==G);return!1}function locallyInside(G,U){return area(G.prev,G,G.next)<0?area(G,U,G.next)>=0&&area(G,G.prev,U)>=0:area(G,U,G.prev)<0||area(G,G.next,U)<0}function middleInside(G,U){var L=G,Y=!1,X=(G.x+U.x)/2,W=(G.y+U.y)/2;do L.y>W!=L.next.y>W&&L.next.y!==L.y&&X<(L.next.x-L.x)*(W-L.y)/(L.next.y-L.y)+L.x&&(Y=!Y),L=L.next;while(L!==G);return Y}function splitPolygon(G,U){var L=new Node(G.i,G.x,G.y),Y=new Node(U.i,U.x,U.y),X=G.next,W=U.prev;return G.next=U,U.prev=G,L.next=X,X.prev=L,Y.next=L,L.prev=Y,W.next=Y,Y.prev=W,Y}function insertNode(G,U,L,Y){var X=new Node(G,U,L);return Y?(X.next=Y.next,X.prev=Y,Y.next.prev=X,Y.next=X):(X.prev=X,X.next=X),X}function removeNode(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function Node(G,U,L){this.i=G,this.x=U,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(G,U,L,Y){var X=U&&U.length,W=X?U[0]*L:G.length,z=Math.abs(signedArea(G,0,W,L));if(X)for(var J=0,Z=U.length;J<Z;J++){var ee=U[J]*L,te=J<Z-1?U[J+1]*L:G.length;z-=Math.abs(signedArea(G,ee,te,L))}var re=0;for(J=0;J<Y.length;J+=3){var ie=Y[J]*L,ne=Y[J+1]*L,oe=Y[J+2]*L;re+=Math.abs((G[ie]-G[oe])*(G[ne+1]-G[ie+1])-(G[ie]-G[ne])*(G[oe+1]-G[ie+1]))}return z===0&&re===0?0:Math.abs((re-z)/z)};function signedArea(G,U,L,Y){for(var X=0,W=U,z=L-Y;W<L;W+=Y)X+=(G[z]-G[W])*(G[W+1]+G[z+1]),z=W;return X}earcut.flatten=function(G){for(var U=G[0][0].length,L={vertices:[],holes:[],dimensions:U},Y=0,X=0;X<G.length;X++){for(var W=0;W<G[X].length;W++)for(var z=0;z<U;z++)L.vertices.push(G[X][W][z]);X>0&&(Y+=G[X-1].length,L.holes.push(Y))}return L};var earcut$1=earcut$2.exports,punycode$2={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(G,U){(function(L){var Y=U&&!U.nodeType&&U,X=G&&!G.nodeType&&G,W=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1;(W.global===W||W.window===W||W.self===W)&&(L=W);var z,J=2147483647,Z=36,ee=1,te=26,re=38,ie=700,ne=72,oe=128,se="-",ae=/^xn--/,le=/[^\x20-\x7E]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,ce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},he=Z-ee,fe=Math.floor,de=String.fromCharCode,_e;function me(Ae){throw RangeError(ce[Ae])}function ve(Ae,De){for(var Ke=Ae.length,Qe=[];Ke--;)Qe[Ke]=De(Ae[Ke]);return Qe}function ye(Ae,De){var Ke=Ae.split("@"),Qe="";Ke.length>1&&(Qe=Ke[0]+"@",Ae=Ke[1]),Ae=Ae.replace(ue,".");var tt=Ae.split("."),Ie=ve(tt,De).join(".");return Qe+Ie}function be(Ae){for(var De=[],Ke=0,Qe=Ae.length,tt,Ie;Ke<Qe;)tt=Ae.charCodeAt(Ke++),tt>=55296&&tt<=56319&&Ke<Qe?(Ie=Ae.charCodeAt(Ke++),(Ie&64512)==56320?De.push(((tt&1023)<<10)+(Ie&1023)+65536):(De.push(tt),Ke--)):De.push(tt);return De}function Te(Ae){return ve(Ae,function(De){var Ke="";return De>65535&&(De-=65536,Ke+=de(De>>>10&1023|55296),De=56320|De&1023),Ke+=de(De),Ke}).join("")}function Se(Ae){return Ae-48<10?Ae-22:Ae-65<26?Ae-65:Ae-97<26?Ae-97:Z}function Ue(Ae,De){return Ae+22+75*(Ae<26)-((De!=0)<<5)}function Pe(Ae,De,Ke){var Qe=0;for(Ae=Ke?fe(Ae/ie):Ae>>1,Ae+=fe(Ae/De);Ae>he*te>>1;Qe+=Z)Ae=fe(Ae/he);return fe(Qe+(he+1)*Ae/(Ae+re))}function Ne(Ae){var De=[],Ke=Ae.length,Qe,tt=0,Ie=oe,ke=ne,Me,Ye,xe,Re,we,Le,pe,ge,Ee;for(Me=Ae.lastIndexOf(se),Me<0&&(Me=0),Ye=0;Ye<Me;++Ye)Ae.charCodeAt(Ye)>=128&&me("not-basic"),De.push(Ae.charCodeAt(Ye));for(xe=Me>0?Me+1:0;xe<Ke;){for(Re=tt,we=1,Le=Z;xe>=Ke&&me("invalid-input"),pe=Se(Ae.charCodeAt(xe++)),(pe>=Z||pe>fe((J-tt)/we))&&me("overflow"),tt+=pe*we,ge=Le<=ke?ee:Le>=ke+te?te:Le-ke,!(pe<ge);Le+=Z)Ee=Z-ge,we>fe(J/Ee)&&me("overflow"),we*=Ee;Qe=De.length+1,ke=Pe(tt-Re,Qe,Re==0),fe(tt/Qe)>J-Ie&&me("overflow"),Ie+=fe(tt/Qe),tt%=Qe,De.splice(tt++,0,Ie)}return Te(De)}function Ve(Ae){var De,Ke,Qe,tt,Ie,ke,Me,Ye,xe,Re,we,Le=[],pe,ge,Ee,Ce;for(Ae=be(Ae),pe=Ae.length,De=oe,Ke=0,Ie=ne,ke=0;ke<pe;++ke)we=Ae[ke],we<128&&Le.push(de(we));for(Qe=tt=Le.length,tt&&Le.push(se);Qe<pe;){for(Me=J,ke=0;ke<pe;++ke)we=Ae[ke],we>=De&&we<Me&&(Me=we);for(ge=Qe+1,Me-De>fe((J-Ke)/ge)&&me("overflow"),Ke+=(Me-De)*ge,De=Me,ke=0;ke<pe;++ke)if(we=Ae[ke],we<De&&++Ke>J&&me("overflow"),we==De){for(Ye=Ke,xe=Z;Re=xe<=Ie?ee:xe>=Ie+te?te:xe-Ie,!(Ye<Re);xe+=Z)Ce=Ye-Re,Ee=Z-Re,Le.push(de(Ue(Re+Ce%Ee,0))),Ye=fe(Ce/Ee);Le.push(de(Ue(Ye,0))),Ie=Pe(Ke,ge,Qe==tt),Ke=0,++Qe}++Ke,++De}return Le.join("")}function ze(Ae){return ye(Ae,function(De){return ae.test(De)?Ne(De.slice(4).toLowerCase()):De})}function Ze(Ae){return ye(Ae,function(De){return le.test(De)?"xn--"+Ve(De):De})}if(z={version:"1.3.2",ucs2:{decode:be,encode:Te},decode:Ne,encode:Ve,toASCII:Ze,toUnicode:ze},Y&&X)if(G.exports==Y)X.exports=z;else for(_e in z)z.hasOwnProperty(_e)&&(Y[_e]=z[_e]);else L.punycode=z})(commonjsGlobal$1)})(punycode$2,punycode$2.exports);var util$2={isString:function(G){return typeof G=="string"},isObject:function(G){return typeof G=="object"&&G!==null},isNull:function(G){return G===null},isNullOrUndefined:function(G){return G==null}},querystring$2={};function hasOwnProperty$2(G,U){return Object.prototype.hasOwnProperty.call(G,U)}var decode$2=function(G,U,L,Y){U=U||"&",L=L||"=";var X={};if(typeof G!="string"||G.length===0)return X;var W=/\+/g;G=G.split(U);var z=1e3;Y&&typeof Y.maxKeys=="number"&&(z=Y.maxKeys);var J=G.length;z>0&&J>z&&(J=z);for(var Z=0;Z<J;++Z){var ee=G[Z].replace(W,"%20"),te=ee.indexOf(L),re,ie,ne,oe;te>=0?(re=ee.substr(0,te),ie=ee.substr(te+1)):(re=ee,ie=""),ne=decodeURIComponent(re),oe=decodeURIComponent(ie),hasOwnProperty$2(X,ne)?Array.isArray(X[ne])?X[ne].push(oe):X[ne]=[X[ne],oe]:X[ne]=oe}return X},stringifyPrimitive$1=function(G){switch(typeof G){case"string":return G;case"boolean":return G?"true":"false";case"number":return isFinite(G)?G:"";default:return""}},encode$1=function(G,U,L,Y){return U=U||"&",L=L||"=",G===null&&(G=void 0),typeof G=="object"?Object.keys(G).map(function(X){var W=encodeURIComponent(stringifyPrimitive$1(X))+L;return Array.isArray(G[X])?G[X].map(function(z){return W+encodeURIComponent(stringifyPrimitive$1(z))}).join(U):W+encodeURIComponent(stringifyPrimitive$1(G[X]))}).join(U):Y?encodeURIComponent(stringifyPrimitive$1(Y))+L+encodeURIComponent(stringifyPrimitive$1(G)):""};querystring$2.decode=querystring$2.parse=decode$2;querystring$2.encode=querystring$2.stringify=encode$1;var punycode$1=punycode$2.exports,util$1=util$2,parse$1=urlParse$1,resolve$1=urlResolve$1,format$1=urlFormat$1;function Url$1(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern$1=/^([a-z0-9.+-]+:)/i,portPattern$1=/:[0-9]*$/,simplePathPattern$1=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims$1=["<",">",'"',"`"," ","\r",`
`,"	"],unwise$1=["{","}","|","\\","^","`"].concat(delims$1),autoEscape$1=["'"].concat(unwise$1),nonHostChars$1=["%","/","?",";","#"].concat(autoEscape$1),hostEndingChars$1=["/","?","#"],hostnameMaxLen$1=255,hostnamePartPattern$1=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart$1=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol$1={javascript:!0,"javascript:":!0},hostlessProtocol$1={javascript:!0,"javascript:":!0},slashedProtocol$1={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring$1=querystring$2;function urlParse$1(G,U,L){if(G&&util$1.isObject(G)&&G instanceof Url$1)return G;var Y=new Url$1;return Y.parse(G,U,L),Y}Url$1.prototype.parse=function(G,U,L){if(!util$1.isString(G))throw new TypeError("Parameter 'url' must be a string, not "+typeof G);var Y=G.indexOf("?"),X=Y!==-1&&Y<G.indexOf("#")?"?":"#",W=G.split(X),z=/\\/g;W[0]=W[0].replace(z,"/"),G=W.join(X);var J=G;if(J=J.trim(),!L&&G.split("#").length===1){var Z=simplePathPattern$1.exec(J);if(Z)return this.path=J,this.href=J,this.pathname=Z[1],Z[2]?(this.search=Z[2],U?this.query=querystring$1.parse(this.search.substr(1)):this.query=this.search.substr(1)):U&&(this.search="",this.query={}),this}var ee=protocolPattern$1.exec(J);if(ee){ee=ee[0];var te=ee.toLowerCase();this.protocol=te,J=J.substr(ee.length)}if(L||ee||J.match(/^\/\/[^@\/]+@[^@\/]+/)){var re=J.substr(0,2)==="//";re&&!(ee&&hostlessProtocol$1[ee])&&(J=J.substr(2),this.slashes=!0)}if(!hostlessProtocol$1[ee]&&(re||ee&&!slashedProtocol$1[ee])){for(var ie=-1,ne=0;ne<hostEndingChars$1.length;ne++){var oe=J.indexOf(hostEndingChars$1[ne]);oe!==-1&&(ie===-1||oe<ie)&&(ie=oe)}var se,ae;ie===-1?ae=J.lastIndexOf("@"):ae=J.lastIndexOf("@",ie),ae!==-1&&(se=J.slice(0,ae),J=J.slice(ae+1),this.auth=decodeURIComponent(se)),ie=-1;for(var ne=0;ne<nonHostChars$1.length;ne++){var oe=J.indexOf(nonHostChars$1[ne]);oe!==-1&&(ie===-1||oe<ie)&&(ie=oe)}ie===-1&&(ie=J.length),this.host=J.slice(0,ie),J=J.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var le=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!le)for(var ue=this.hostname.split(/\./),ne=0,ce=ue.length;ne<ce;ne++){var he=ue[ne];if(!!he&&!he.match(hostnamePartPattern$1)){for(var fe="",de=0,_e=he.length;de<_e;de++)he.charCodeAt(de)>127?fe+="x":fe+=he[de];if(!fe.match(hostnamePartPattern$1)){var me=ue.slice(0,ne),ve=ue.slice(ne+1),ye=he.match(hostnamePartStart$1);ye&&(me.push(ye[1]),ve.unshift(ye[2])),ve.length&&(J="/"+ve.join(".")+J),this.hostname=me.join(".");break}}}this.hostname.length>hostnameMaxLen$1?this.hostname="":this.hostname=this.hostname.toLowerCase(),le||(this.hostname=punycode$1.toASCII(this.hostname));var be=this.port?":"+this.port:"",Te=this.hostname||"";this.host=Te+be,this.href+=this.host,le&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),J[0]!=="/"&&(J="/"+J))}if(!unsafeProtocol$1[te])for(var ne=0,ce=autoEscape$1.length;ne<ce;ne++){var Se=autoEscape$1[ne];if(J.indexOf(Se)!==-1){var Ue=encodeURIComponent(Se);Ue===Se&&(Ue=escape(Se)),J=J.split(Se).join(Ue)}}var Pe=J.indexOf("#");Pe!==-1&&(this.hash=J.substr(Pe),J=J.slice(0,Pe));var Ne=J.indexOf("?");if(Ne!==-1?(this.search=J.substr(Ne),this.query=J.substr(Ne+1),U&&(this.query=querystring$1.parse(this.query)),J=J.slice(0,Ne)):U&&(this.search="",this.query={}),J&&(this.pathname=J),slashedProtocol$1[te]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var be=this.pathname||"",Ve=this.search||"";this.path=be+Ve}return this.href=this.format(),this};function urlFormat$1(G){return util$1.isString(G)&&(G=urlParse$1(G)),G instanceof Url$1?G.format():Url$1.prototype.format.call(G)}Url$1.prototype.format=function(){var G=this.auth||"";G&&(G=encodeURIComponent(G),G=G.replace(/%3A/i,":"),G+="@");var U=this.protocol||"",L=this.pathname||"",Y=this.hash||"",X=!1,W="";this.host?X=G+this.host:this.hostname&&(X=G+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(X+=":"+this.port)),this.query&&util$1.isObject(this.query)&&Object.keys(this.query).length&&(W=querystring$1.stringify(this.query));var z=this.search||W&&"?"+W||"";return U&&U.substr(-1)!==":"&&(U+=":"),this.slashes||(!U||slashedProtocol$1[U])&&X!==!1?(X="//"+(X||""),L&&L.charAt(0)!=="/"&&(L="/"+L)):X||(X=""),Y&&Y.charAt(0)!=="#"&&(Y="#"+Y),z&&z.charAt(0)!=="?"&&(z="?"+z),L=L.replace(/[?#]/g,function(J){return encodeURIComponent(J)}),z=z.replace("#","%23"),U+X+L+z+Y};function urlResolve$1(G,U){return urlParse$1(G,!1,!0).resolve(U)}Url$1.prototype.resolve=function(G){return this.resolveObject(urlParse$1(G,!1,!0)).format()};Url$1.prototype.resolveObject=function(G){if(util$1.isString(G)){var U=new Url$1;U.parse(G,!1,!0),G=U}for(var L=new Url$1,Y=Object.keys(this),X=0;X<Y.length;X++){var W=Y[X];L[W]=this[W]}if(L.hash=G.hash,G.href==="")return L.href=L.format(),L;if(G.slashes&&!G.protocol){for(var z=Object.keys(G),J=0;J<z.length;J++){var Z=z[J];Z!=="protocol"&&(L[Z]=G[Z])}return slashedProtocol$1[L.protocol]&&L.hostname&&!L.pathname&&(L.path=L.pathname="/"),L.href=L.format(),L}if(G.protocol&&G.protocol!==L.protocol){if(!slashedProtocol$1[G.protocol]){for(var ee=Object.keys(G),te=0;te<ee.length;te++){var re=ee[te];L[re]=G[re]}return L.href=L.format(),L}if(L.protocol=G.protocol,!G.host&&!hostlessProtocol$1[G.protocol]){for(var ce=(G.pathname||"").split("/");ce.length&&!(G.host=ce.shift()););G.host||(G.host=""),G.hostname||(G.hostname=""),ce[0]!==""&&ce.unshift(""),ce.length<2&&ce.unshift(""),L.pathname=ce.join("/")}else L.pathname=G.pathname;if(L.search=G.search,L.query=G.query,L.host=G.host||"",L.auth=G.auth,L.hostname=G.hostname||G.host,L.port=G.port,L.pathname||L.search){var ie=L.pathname||"",ne=L.search||"";L.path=ie+ne}return L.slashes=L.slashes||G.slashes,L.href=L.format(),L}var oe=L.pathname&&L.pathname.charAt(0)==="/",se=G.host||G.pathname&&G.pathname.charAt(0)==="/",ae=se||oe||L.host&&G.pathname,le=ae,ue=L.pathname&&L.pathname.split("/")||[],ce=G.pathname&&G.pathname.split("/")||[],he=L.protocol&&!slashedProtocol$1[L.protocol];if(he&&(L.hostname="",L.port=null,L.host&&(ue[0]===""?ue[0]=L.host:ue.unshift(L.host)),L.host="",G.protocol&&(G.hostname=null,G.port=null,G.host&&(ce[0]===""?ce[0]=G.host:ce.unshift(G.host)),G.host=null),ae=ae&&(ce[0]===""||ue[0]==="")),se)L.host=G.host||G.host===""?G.host:L.host,L.hostname=G.hostname||G.hostname===""?G.hostname:L.hostname,L.search=G.search,L.query=G.query,ue=ce;else if(ce.length)ue||(ue=[]),ue.pop(),ue=ue.concat(ce),L.search=G.search,L.query=G.query;else if(!util$1.isNullOrUndefined(G.search)){if(he){L.hostname=L.host=ue.shift();var fe=L.host&&L.host.indexOf("@")>0?L.host.split("@"):!1;fe&&(L.auth=fe.shift(),L.host=L.hostname=fe.shift())}return L.search=G.search,L.query=G.query,(!util$1.isNull(L.pathname)||!util$1.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.href=L.format(),L}if(!ue.length)return L.pathname=null,L.search?L.path="/"+L.search:L.path=null,L.href=L.format(),L;for(var de=ue.slice(-1)[0],_e=(L.host||G.host||ue.length>1)&&(de==="."||de==="..")||de==="",me=0,ve=ue.length;ve>=0;ve--)de=ue[ve],de==="."?ue.splice(ve,1):de===".."?(ue.splice(ve,1),me++):me&&(ue.splice(ve,1),me--);if(!ae&&!le)for(;me--;me)ue.unshift("..");ae&&ue[0]!==""&&(!ue[0]||ue[0].charAt(0)!=="/")&&ue.unshift(""),_e&&ue.join("/").substr(-1)!=="/"&&ue.push("");var ye=ue[0]===""||ue[0]&&ue[0].charAt(0)==="/";if(he){L.hostname=L.host=ye?"":ue.length?ue.shift():"";var fe=L.host&&L.host.indexOf("@")>0?L.host.split("@"):!1;fe&&(L.auth=fe.shift(),L.host=L.hostname=fe.shift())}return ae=ae||L.host&&ue.length,ae&&!ye&&ue.unshift(""),ue.length?L.pathname=ue.join("/"):(L.pathname=null,L.path=null),(!util$1.isNull(L.pathname)||!util$1.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.auth=G.auth||L.auth,L.slashes=L.slashes||G.slashes,L.href=L.format(),L};Url$1.prototype.parseHost=function(){var G=this.host,U=portPattern$1.exec(G);U&&(U=U[0],U!==":"&&(this.port=U.substr(1)),G=G.substr(0,G.length-U.length)),G&&(this.hostname=G)};/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$4;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$4||(ENV$4={}));var RENDERER_TYPE$4;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$4||(RENDERER_TYPE$4={}));var BUFFER_BITS$4;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$4||(BUFFER_BITS$4={}));var BLEND_MODES$4;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$4||(BLEND_MODES$4={}));var DRAW_MODES$4;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$4||(DRAW_MODES$4={}));var FORMATS$4;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$4||(FORMATS$4={}));var TARGETS$4;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$4||(TARGETS$4={}));var TYPES$4;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$4||(TYPES$4={}));var SAMPLER_TYPES$4;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$4||(SAMPLER_TYPES$4={}));var SCALE_MODES$4;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$4||(SCALE_MODES$4={}));var WRAP_MODES$4;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$4||(WRAP_MODES$4={}));var MIPMAP_MODES$4;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$4||(MIPMAP_MODES$4={}));var ALPHA_MODES$4;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$4||(ALPHA_MODES$4={}));var CLEAR_MODES$4;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$4||(CLEAR_MODES$4={}));var GC_MODES$4;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$4||(GC_MODES$4={}));var PRECISION$4;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$4||(PRECISION$4={}));var MASK_TYPES$4;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$4||(MASK_TYPES$4={}));var MSAA_QUALITY$4;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$4||(MSAA_QUALITY$4={}));var BUFFER_TYPE$4;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$4||(BUFFER_TYPE$4={}));/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url$2={parse:parse$1,format:format$1,resolve:resolve$1};settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello$1=!1,VERSION$6="6.4.2";function skipHello(){saidHello$1=!0}function sayHello$1(G){var U;if(!saidHello$1){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var L=[`
 %c %c %c PixiJS `+VERSION$6+" - \u2730 "+G+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(U=globalThis.console).log.apply(U,L)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION$6+" - "+G+" - http://www.pixijs.com/");saidHello$1=!0}}var supported$1;function isWebGLSupported$1(){return typeof supported$1=="undefined"&&(supported$1=function(){var U={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var L=document.createElement("canvas"),Y=L.getContext("webgl",U)||L.getContext("experimental-webgl",U),X=!!(Y&&Y.getContextAttributes().stencil);if(Y){var W=Y.getExtension("WEBGL_lose_context");W&&W.loseContext()}return Y=null,X}catch(z){return!1}}()),supported$1}var aliceblue="#f0f8ff",antiquewhite="#faebd7",aqua="#00ffff",aquamarine="#7fffd4",azure="#f0ffff",beige="#f5f5dc",bisque="#ffe4c4",black="#000000",blanchedalmond="#ffebcd",blue="#0000ff",blueviolet="#8a2be2",brown="#a52a2a",burlywood="#deb887",cadetblue="#5f9ea0",chartreuse="#7fff00",chocolate="#d2691e",coral="#ff7f50",cornflowerblue="#6495ed",cornsilk="#fff8dc",crimson="#dc143c",cyan="#00ffff",darkblue="#00008b",darkcyan="#008b8b",darkgoldenrod="#b8860b",darkgray="#a9a9a9",darkgreen="#006400",darkgrey="#a9a9a9",darkkhaki="#bdb76b",darkmagenta="#8b008b",darkolivegreen="#556b2f",darkorange="#ff8c00",darkorchid="#9932cc",darkred="#8b0000",darksalmon="#e9967a",darkseagreen="#8fbc8f",darkslateblue="#483d8b",darkslategray="#2f4f4f",darkslategrey="#2f4f4f",darkturquoise="#00ced1",darkviolet="#9400d3",deeppink="#ff1493",deepskyblue="#00bfff",dimgray="#696969",dimgrey="#696969",dodgerblue="#1e90ff",firebrick="#b22222",floralwhite="#fffaf0",forestgreen="#228b22",fuchsia="#ff00ff",gainsboro="#dcdcdc",ghostwhite="#f8f8ff",goldenrod="#daa520",gold="#ffd700",gray="#808080",green="#008000",greenyellow="#adff2f",grey="#808080",honeydew="#f0fff0",hotpink="#ff69b4",indianred="#cd5c5c",indigo="#4b0082",ivory="#fffff0",khaki="#f0e68c",lavenderblush="#fff0f5",lavender="#e6e6fa",lawngreen="#7cfc00",lemonchiffon="#fffacd",lightblue="#add8e6",lightcoral="#f08080",lightcyan="#e0ffff",lightgoldenrodyellow="#fafad2",lightgray="#d3d3d3",lightgreen="#90ee90",lightgrey="#d3d3d3",lightpink="#ffb6c1",lightsalmon="#ffa07a",lightseagreen="#20b2aa",lightskyblue="#87cefa",lightslategray="#778899",lightslategrey="#778899",lightsteelblue="#b0c4de",lightyellow="#ffffe0",lime="#00ff00",limegreen="#32cd32",linen="#faf0e6",magenta="#ff00ff",maroon="#800000",mediumaquamarine="#66cdaa",mediumblue="#0000cd",mediumorchid="#ba55d3",mediumpurple="#9370db",mediumseagreen="#3cb371",mediumslateblue="#7b68ee",mediumspringgreen="#00fa9a",mediumturquoise="#48d1cc",mediumvioletred="#c71585",midnightblue="#191970",mintcream="#f5fffa",mistyrose="#ffe4e1",moccasin="#ffe4b5",navajowhite="#ffdead",navy="#000080",oldlace="#fdf5e6",olive="#808000",olivedrab="#6b8e23",orange="#ffa500",orangered="#ff4500",orchid="#da70d6",palegoldenrod="#eee8aa",palegreen="#98fb98",paleturquoise="#afeeee",palevioletred="#db7093",papayawhip="#ffefd5",peachpuff="#ffdab9",peru="#cd853f",pink="#ffc0cb",plum="#dda0dd",powderblue="#b0e0e6",purple="#800080",rebeccapurple="#663399",red="#ff0000",rosybrown="#bc8f8f",royalblue="#4169e1",saddlebrown="#8b4513",salmon="#fa8072",sandybrown="#f4a460",seagreen="#2e8b57",seashell="#fff5ee",sienna="#a0522d",silver="#c0c0c0",skyblue="#87ceeb",slateblue="#6a5acd",slategray="#708090",slategrey="#708090",snow="#fffafa",springgreen="#00ff7f",steelblue="#4682b4",tan="#d2b48c",teal="#008080",thistle="#d8bfd8",tomato="#ff6347",turquoise="#40e0d0",violet="#ee82ee",wheat="#f5deb3",white="#ffffff",whitesmoke="#f5f5f5",yellow="#ffff00",yellowgreen="#9acd32",cssColorNames={aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,goldenrod,gold,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavenderblush,lavender,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen};function hex2rgb$1(G,U){return U===void 0&&(U=[]),U[0]=(G>>16&255)/255,U[1]=(G>>8&255)/255,U[2]=(G&255)/255,U}function hex2string$1(G){var U=G.toString(16);return U="000000".substring(0,6-U.length)+U,"#"+U}function string2hex(G){return typeof G=="string"&&(G=cssColorNames[G.toLowerCase()]||G,G[0]==="#"&&(G=G.slice(1))),parseInt(G,16)}function rgb2hex(G){return(G[0]*255<<16)+(G[1]*255<<8)+(G[2]*255|0)}function mapPremultipliedBlendModes$1(){for(var G=[],U=[],L=0;L<32;L++)G[L]=L,U[L]=L;G[BLEND_MODES$4.NORMAL_NPM]=BLEND_MODES$4.NORMAL,G[BLEND_MODES$4.ADD_NPM]=BLEND_MODES$4.ADD,G[BLEND_MODES$4.SCREEN_NPM]=BLEND_MODES$4.SCREEN,U[BLEND_MODES$4.NORMAL]=BLEND_MODES$4.NORMAL_NPM,U[BLEND_MODES$4.ADD]=BLEND_MODES$4.ADD_NPM,U[BLEND_MODES$4.SCREEN]=BLEND_MODES$4.SCREEN_NPM;var Y=[];return Y.push(U),Y.push(G),Y}var premultiplyBlendMode$1=mapPremultipliedBlendModes$1();function correctBlendMode(G,U){return premultiplyBlendMode$1[U?1:0][G]}function premultiplyRgba(G,U,L,Y){return L=L||new Float32Array(4),Y||Y===void 0?(L[0]=G[0]*U,L[1]=G[1]*U,L[2]=G[2]*U):(L[0]=G[0],L[1]=G[1],L[2]=G[2]),L[3]=U,L}function premultiplyTint$1(G,U){if(U===1)return(U*255<<24)+G;if(U===0)return 0;var L=G>>16&255,Y=G>>8&255,X=G&255;return L=L*U+.5|0,Y=Y*U+.5|0,X=X*U+.5|0,(U*255<<24)+(L<<16)+(Y<<8)+X}function premultiplyTintToRgba(G,U,L,Y){return L=L||new Float32Array(4),L[0]=(G>>16&255)/255,L[1]=(G>>8&255)/255,L[2]=(G&255)/255,(Y||Y===void 0)&&(L[0]*=U,L[1]*=U,L[2]*=U),L[3]=U,L}function createIndicesForQuads(G,U){U===void 0&&(U=null);var L=G*6;if(U=U||new Uint16Array(L),U.length!==L)throw new Error("Out buffer length is incorrect, got "+U.length+" and expected "+L);for(var Y=0,X=0;Y<L;Y+=6,X+=4)U[Y+0]=X+0,U[Y+1]=X+1,U[Y+2]=X+2,U[Y+3]=X+0,U[Y+4]=X+2,U[Y+5]=X+3;return U}function getBufferType$1(G){if(G.BYTES_PER_ELEMENT===4)return G instanceof Float32Array?"Float32Array":G instanceof Uint32Array?"Uint32Array":"Int32Array";if(G.BYTES_PER_ELEMENT===2){if(G instanceof Uint16Array)return"Uint16Array"}else if(G.BYTES_PER_ELEMENT===1&&G instanceof Uint8Array)return"Uint8Array";return null}var map$3={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays$2(G,U){for(var L=0,Y=0,X={},W=0;W<G.length;W++)Y+=U[W],L+=G[W].length;for(var z=new ArrayBuffer(L*4),J=null,Z=0,W=0;W<G.length;W++){var ee=U[W],te=G[W],re=getBufferType$1(te);X[re]||(X[re]=new map$3[re](z)),J=X[re];for(var ie=0;ie<te.length;ie++){var ne=(ie/ee|0)*Y+Z,oe=ie%ee;J[ne+oe]=te[ie]}Z+=ee}return new Float32Array(z)}function nextPow2$1(G){return G+=G===0?1:0,--G,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G+1}function isPow2$1(G){return!(G&G-1)&&!!G}function log2$1(G){var U=(G>65535?1:0)<<4;G>>>=U;var L=(G>255?1:0)<<3;return G>>>=L,U|=L,L=(G>15?1:0)<<2,G>>>=L,U|=L,L=(G>3?1:0)<<1,G>>>=L,U|=L,U|G>>1}function removeItems$1(G,U,L){var Y=G.length,X;if(!(U>=Y||L===0)){L=U+L>Y?Y-U:L;var W=Y-L;for(X=U;X<W;++X)G[X]=G[X+L];G.length=W}}function sign(G){return G===0?0:G<0?-1:1}var nextUid$1=0;function uid$1(){return++nextUid$1}var warnings$1={};function deprecation$1(G,U,L){if(L===void 0&&(L=3),!warnings$1[U]){var Y=new Error().stack;typeof Y=="undefined"?console.warn("PixiJS Deprecation Warning: ",U+`
Deprecated since v`+G):(Y=Y.split(`
`).splice(L).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",U+`
Deprecated since v`+G),console.warn(Y),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",U+`
Deprecated since v`+G),console.warn(Y))),warnings$1[U]=!0}}var ProgramCache$1={},TextureCache$1=Object.create(null),BaseTextureCache$1=Object.create(null);function destroyTextureCache(){var G;for(G in TextureCache$1)TextureCache$1[G].destroy();for(G in BaseTextureCache$1)BaseTextureCache$1[G].destroy()}function clearTextureCache(){var G;for(G in TextureCache$1)delete TextureCache$1[G];for(G in BaseTextureCache$1)delete BaseTextureCache$1[G]}var CanvasRenderTarget=function(){function G(U,L,Y){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=Y||settings$1.RESOLUTION,this.resize(U,L)}return G.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},G.prototype.resize=function(U,L){this.canvas.width=Math.round(U*this.resolution),this.canvas.height=Math.round(L*this.resolution)},G.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(G.prototype,"width",{get:function(){return this.canvas.width},set:function(U){this.canvas.width=Math.round(U)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"height",{get:function(){return this.canvas.height},set:function(U){this.canvas.height=Math.round(U)},enumerable:!1,configurable:!0}),G}();function trimCanvas(G){var U=G.width,L=G.height,Y=G.getContext("2d"),X=Y.getImageData(0,0,U,L),W=X.data,z=W.length,J={top:null,left:null,right:null,bottom:null},Z=null,ee,te,re;for(ee=0;ee<z;ee+=4)W[ee+3]!==0&&(te=ee/4%U,re=~~(ee/4/U),J.top===null&&(J.top=re),(J.left===null||te<J.left)&&(J.left=te),(J.right===null||J.right<te)&&(J.right=te+1),(J.bottom===null||J.bottom<re)&&(J.bottom=re));return J.top!==null&&(U=J.right-J.left,L=J.bottom-J.top+1,Z=Y.getImageData(J.left,J.top,U,L)),{height:L,width:U,data:Z}}var DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function decomposeDataUri(G){var U=DATA_URI.exec(G);if(U)return{mediaType:U[1]?U[1].toLowerCase():void 0,subType:U[2]?U[2].toLowerCase():void 0,charset:U[3]?U[3].toLowerCase():void 0,encoding:U[4]?U[4].toLowerCase():void 0,data:U[5]}}var tempAnchor$2;function determineCrossOrigin$1(G,U){if(U===void 0&&(U=globalThis.location),G.indexOf("data:")===0)return"";U=U||globalThis.location,tempAnchor$2||(tempAnchor$2=document.createElement("a")),tempAnchor$2.href=G;var L=url$2.parse(tempAnchor$2.href),Y=!L.port&&U.port===""||L.port===U.port;return L.hostname!==U.hostname||!Y||L.protocol!==U.protocol?"anonymous":""}function getResolutionOfUrl$1(G,U){var L=settings$1.RETINA_PREFIX.exec(G);return L?parseFloat(L[1]):U!==void 0?U:1}var utils=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:BaseTextureCache$1,CanvasRenderTarget,DATA_URI,ProgramCache:ProgramCache$1,TextureCache:TextureCache$1,clearTextureCache,correctBlendMode,createIndicesForQuads,decomposeDataUri,deprecation:deprecation$1,destroyTextureCache,determineCrossOrigin:determineCrossOrigin$1,getBufferType:getBufferType$1,getResolutionOfUrl:getResolutionOfUrl$1,hex2rgb:hex2rgb$1,hex2string:hex2string$1,interleaveTypedArrays:interleaveTypedArrays$2,isPow2:isPow2$1,isWebGLSupported:isWebGLSupported$1,log2:log2$1,nextPow2:nextPow2$1,premultiplyBlendMode:premultiplyBlendMode$1,premultiplyRgba,premultiplyTint:premultiplyTint$1,premultiplyTintToRgba,removeItems:removeItems$1,rgb2hex,sayHello:sayHello$1,sign,skipHello,string2hex,trimCanvas,uid:uid$1,url:url$2,isMobile:isMobile$4,EventEmitter:n$4,earcut:earcut$1},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2$1=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES$1;(function(G){G[G.POLY=0]="POLY",G[G.RECT=1]="RECT",G[G.CIRC=2]="CIRC",G[G.ELIP=3]="ELIP",G[G.RREC=4]="RREC"})(SHAPES$1||(SHAPES$1={}));var Point$1=function(){function G(U,L){U===void 0&&(U=0),L===void 0&&(L=0),this.x=0,this.y=0,this.x=U,this.y=L}return G.prototype.clone=function(){return new G(this.x,this.y)},G.prototype.copyFrom=function(U){return this.set(U.x,U.y),this},G.prototype.copyTo=function(U){return U.set(this.x,this.y),U},G.prototype.equals=function(U){return U.x===this.x&&U.y===this.y},G.prototype.set=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),this.x=U,this.y=L,this},G.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},G}(),tempPoints$3=[new Point$1,new Point$1,new Point$1,new Point$1],Rectangle$1=function(){function G(U,L,Y,X){U===void 0&&(U=0),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=0),this.x=Number(U),this.y=Number(L),this.width=Number(Y),this.height=Number(X),this.type=SHAPES$1.RECT}return Object.defineProperty(G.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(G,"EMPTY",{get:function(){return new G(0,0,0,0)},enumerable:!1,configurable:!0}),G.prototype.clone=function(){return new G(this.x,this.y,this.width,this.height)},G.prototype.copyFrom=function(U){return this.x=U.x,this.y=U.y,this.width=U.width,this.height=U.height,this},G.prototype.copyTo=function(U){return U.x=this.x,U.y=this.y,U.width=this.width,U.height=this.height,U},G.prototype.contains=function(U,L){return this.width<=0||this.height<=0?!1:U>=this.x&&U<this.x+this.width&&L>=this.y&&L<this.y+this.height},G.prototype.intersects=function(U,L){if(!L){var Y=this.x<U.x?U.x:this.x,X=this.right>U.right?U.right:this.right;if(X<=Y)return!1;var W=this.y<U.y?U.y:this.y,z=this.bottom>U.bottom?U.bottom:this.bottom;return z>W}var J=this.left,Z=this.right,ee=this.top,te=this.bottom;if(Z<=J||te<=ee)return!1;var re=tempPoints$3[0].set(U.left,U.top),ie=tempPoints$3[1].set(U.left,U.bottom),ne=tempPoints$3[2].set(U.right,U.top),oe=tempPoints$3[3].set(U.right,U.bottom);if(ne.x<=re.x||ie.y<=re.y)return!1;var se=Math.sign(L.a*L.d-L.b*L.c);if(se===0||(L.apply(re,re),L.apply(ie,ie),L.apply(ne,ne),L.apply(oe,oe),Math.max(re.x,ie.x,ne.x,oe.x)<=J||Math.min(re.x,ie.x,ne.x,oe.x)>=Z||Math.max(re.y,ie.y,ne.y,oe.y)<=ee||Math.min(re.y,ie.y,ne.y,oe.y)>=te))return!1;var ae=se*(ie.y-re.y),le=se*(re.x-ie.x),ue=ae*J+le*ee,ce=ae*Z+le*ee,he=ae*J+le*te,fe=ae*Z+le*te;if(Math.max(ue,ce,he,fe)<=ae*re.x+le*re.y||Math.min(ue,ce,he,fe)>=ae*oe.x+le*oe.y)return!1;var de=se*(re.y-ne.y),_e=se*(ne.x-re.x),me=de*J+_e*ee,ve=de*Z+_e*ee,ye=de*J+_e*te,be=de*Z+_e*te;return!(Math.max(me,ve,ye,be)<=de*re.x+_e*re.y||Math.min(me,ve,ye,be)>=de*oe.x+_e*oe.y)},G.prototype.pad=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),this.x-=U,this.y-=L,this.width+=U*2,this.height+=L*2,this},G.prototype.fit=function(U){var L=Math.max(this.x,U.x),Y=Math.min(this.x+this.width,U.x+U.width),X=Math.max(this.y,U.y),W=Math.min(this.y+this.height,U.y+U.height);return this.x=L,this.width=Math.max(Y-L,0),this.y=X,this.height=Math.max(W-X,0),this},G.prototype.ceil=function(U,L){U===void 0&&(U=1),L===void 0&&(L=.001);var Y=Math.ceil((this.x+this.width-L)*U)/U,X=Math.ceil((this.y+this.height-L)*U)/U;return this.x=Math.floor((this.x+L)*U)/U,this.y=Math.floor((this.y+L)*U)/U,this.width=Y-this.x,this.height=X-this.y,this},G.prototype.enlarge=function(U){var L=Math.min(this.x,U.x),Y=Math.max(this.x+this.width,U.x+U.width),X=Math.min(this.y,U.y),W=Math.max(this.y+this.height,U.y+U.height);return this.x=L,this.width=Y-L,this.y=X,this.height=W-X,this},G.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},G}(),Circle=function(){function G(U,L,Y){U===void 0&&(U=0),L===void 0&&(L=0),Y===void 0&&(Y=0),this.x=U,this.y=L,this.radius=Y,this.type=SHAPES$1.CIRC}return G.prototype.clone=function(){return new G(this.x,this.y,this.radius)},G.prototype.contains=function(U,L){if(this.radius<=0)return!1;var Y=this.radius*this.radius,X=this.x-U,W=this.y-L;return X*=X,W*=W,X+W<=Y},G.prototype.getBounds=function(){return new Rectangle$1(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},G.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},G}(),Ellipse=function(){function G(U,L,Y,X){U===void 0&&(U=0),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=0),this.x=U,this.y=L,this.width=Y,this.height=X,this.type=SHAPES$1.ELIP}return G.prototype.clone=function(){return new G(this.x,this.y,this.width,this.height)},G.prototype.contains=function(U,L){if(this.width<=0||this.height<=0)return!1;var Y=(U-this.x)/this.width,X=(L-this.y)/this.height;return Y*=Y,X*=X,Y+X<=1},G.prototype.getBounds=function(){return new Rectangle$1(this.x-this.width,this.y-this.height,this.width,this.height)},G.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},G}(),Polygon=function(){function G(){for(var U=arguments,L=[],Y=0;Y<arguments.length;Y++)L[Y]=U[Y];var X=Array.isArray(L[0])?L[0]:L;if(typeof X[0]!="number"){for(var W=[],z=0,J=X.length;z<J;z++)W.push(X[z].x,X[z].y);X=W}this.points=X,this.type=SHAPES$1.POLY,this.closeStroke=!0}return G.prototype.clone=function(){var U=this.points.slice(),L=new G(U);return L.closeStroke=this.closeStroke,L},G.prototype.contains=function(U,L){for(var Y=!1,X=this.points.length/2,W=0,z=X-1;W<X;z=W++){var J=this.points[W*2],Z=this.points[W*2+1],ee=this.points[z*2],te=this.points[z*2+1],re=Z>L!=te>L&&U<(ee-J)*((L-Z)/(te-Z))+J;re&&(Y=!Y)}return Y},G.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(U,L){return U+", "+L},"")+"]")},G}(),RoundedRectangle=function(){function G(U,L,Y,X,W){U===void 0&&(U=0),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=0),W===void 0&&(W=20),this.x=U,this.y=L,this.width=Y,this.height=X,this.radius=W,this.type=SHAPES$1.RREC}return G.prototype.clone=function(){return new G(this.x,this.y,this.width,this.height,this.radius)},G.prototype.contains=function(U,L){if(this.width<=0||this.height<=0)return!1;if(U>=this.x&&U<=this.x+this.width&&L>=this.y&&L<=this.y+this.height){var Y=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(L>=this.y+Y&&L<=this.y+this.height-Y||U>=this.x+Y&&U<=this.x+this.width-Y)return!0;var X=U-(this.x+Y),W=L-(this.y+Y),z=Y*Y;if(X*X+W*W<=z||(X=U-(this.x+this.width-Y),X*X+W*W<=z)||(W=L-(this.y+this.height-Y),X*X+W*W<=z)||(X=U-(this.x+Y),X*X+W*W<=z))return!0}return!1},G.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},G}(),ObservablePoint$1=function(){function G(U,L,Y,X){Y===void 0&&(Y=0),X===void 0&&(X=0),this._x=Y,this._y=X,this.cb=U,this.scope=L}return G.prototype.clone=function(U,L){return U===void 0&&(U=this.cb),L===void 0&&(L=this.scope),new G(U,L,this._x,this._y)},G.prototype.set=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),(this._x!==U||this._y!==L)&&(this._x=U,this._y=L,this.cb.call(this.scope)),this},G.prototype.copyFrom=function(U){return(this._x!==U.x||this._y!==U.y)&&(this._x=U.x,this._y=U.y,this.cb.call(this.scope)),this},G.prototype.copyTo=function(U){return U.set(this._x,this._y),U},G.prototype.equals=function(U){return U.x===this._x&&U.y===this._y},G.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(G.prototype,"x",{get:function(){return this._x},set:function(U){this._x!==U&&(this._x=U,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"y",{get:function(){return this._y},set:function(U){this._y!==U&&(this._y=U,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),G}(),Matrix$1=function(){function G(U,L,Y,X,W,z){U===void 0&&(U=1),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=1),W===void 0&&(W=0),z===void 0&&(z=0),this.array=null,this.a=U,this.b=L,this.c=Y,this.d=X,this.tx=W,this.ty=z}return G.prototype.fromArray=function(U){this.a=U[0],this.b=U[1],this.c=U[3],this.d=U[4],this.tx=U[2],this.ty=U[5]},G.prototype.set=function(U,L,Y,X,W,z){return this.a=U,this.b=L,this.c=Y,this.d=X,this.tx=W,this.ty=z,this},G.prototype.toArray=function(U,L){this.array||(this.array=new Float32Array(9));var Y=L||this.array;return U?(Y[0]=this.a,Y[1]=this.b,Y[2]=0,Y[3]=this.c,Y[4]=this.d,Y[5]=0,Y[6]=this.tx,Y[7]=this.ty,Y[8]=1):(Y[0]=this.a,Y[1]=this.c,Y[2]=this.tx,Y[3]=this.b,Y[4]=this.d,Y[5]=this.ty,Y[6]=0,Y[7]=0,Y[8]=1),Y},G.prototype.apply=function(U,L){L=L||new Point$1;var Y=U.x,X=U.y;return L.x=this.a*Y+this.c*X+this.tx,L.y=this.b*Y+this.d*X+this.ty,L},G.prototype.applyInverse=function(U,L){L=L||new Point$1;var Y=1/(this.a*this.d+this.c*-this.b),X=U.x,W=U.y;return L.x=this.d*Y*X+-this.c*Y*W+(this.ty*this.c-this.tx*this.d)*Y,L.y=this.a*Y*W+-this.b*Y*X+(-this.ty*this.a+this.tx*this.b)*Y,L},G.prototype.translate=function(U,L){return this.tx+=U,this.ty+=L,this},G.prototype.scale=function(U,L){return this.a*=U,this.d*=L,this.c*=U,this.b*=L,this.tx*=U,this.ty*=L,this},G.prototype.rotate=function(U){var L=Math.cos(U),Y=Math.sin(U),X=this.a,W=this.c,z=this.tx;return this.a=X*L-this.b*Y,this.b=X*Y+this.b*L,this.c=W*L-this.d*Y,this.d=W*Y+this.d*L,this.tx=z*L-this.ty*Y,this.ty=z*Y+this.ty*L,this},G.prototype.append=function(U){var L=this.a,Y=this.b,X=this.c,W=this.d;return this.a=U.a*L+U.b*X,this.b=U.a*Y+U.b*W,this.c=U.c*L+U.d*X,this.d=U.c*Y+U.d*W,this.tx=U.tx*L+U.ty*X+this.tx,this.ty=U.tx*Y+U.ty*W+this.ty,this},G.prototype.setTransform=function(U,L,Y,X,W,z,J,Z,ee){return this.a=Math.cos(J+ee)*W,this.b=Math.sin(J+ee)*W,this.c=-Math.sin(J-Z)*z,this.d=Math.cos(J-Z)*z,this.tx=U-(Y*this.a+X*this.c),this.ty=L-(Y*this.b+X*this.d),this},G.prototype.prepend=function(U){var L=this.tx;if(U.a!==1||U.b!==0||U.c!==0||U.d!==1){var Y=this.a,X=this.c;this.a=Y*U.a+this.b*U.c,this.b=Y*U.b+this.b*U.d,this.c=X*U.a+this.d*U.c,this.d=X*U.b+this.d*U.d}return this.tx=L*U.a+this.ty*U.c+U.tx,this.ty=L*U.b+this.ty*U.d+U.ty,this},G.prototype.decompose=function(U){var L=this.a,Y=this.b,X=this.c,W=this.d,z=U.pivot,J=-Math.atan2(-X,W),Z=Math.atan2(Y,L),ee=Math.abs(J+Z);return ee<1e-5||Math.abs(PI_2$1-ee)<1e-5?(U.rotation=Z,U.skew.x=U.skew.y=0):(U.rotation=0,U.skew.x=J,U.skew.y=Z),U.scale.x=Math.sqrt(L*L+Y*Y),U.scale.y=Math.sqrt(X*X+W*W),U.position.x=this.tx+(z.x*L+z.y*X),U.position.y=this.ty+(z.x*Y+z.y*W),U},G.prototype.invert=function(){var U=this.a,L=this.b,Y=this.c,X=this.d,W=this.tx,z=U*X-L*Y;return this.a=X/z,this.b=-L/z,this.c=-Y/z,this.d=U/z,this.tx=(Y*this.ty-X*W)/z,this.ty=-(U*this.ty-L*W)/z,this},G.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},G.prototype.clone=function(){var U=new G;return U.a=this.a,U.b=this.b,U.c=this.c,U.d=this.d,U.tx=this.tx,U.ty=this.ty,U},G.prototype.copyTo=function(U){return U.a=this.a,U.b=this.b,U.c=this.c,U.d=this.d,U.tx=this.tx,U.ty=this.ty,U},G.prototype.copyFrom=function(U){return this.a=U.a,this.b=U.b,this.c=U.c,this.d=U.d,this.tx=U.tx,this.ty=U.ty,this},G.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(G,"IDENTITY",{get:function(){return new G},enumerable:!1,configurable:!0}),Object.defineProperty(G,"TEMP_MATRIX",{get:function(){return new G},enumerable:!1,configurable:!0}),G}(),ux$1=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy$1=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx$1=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy$1=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley$1=[],rotationMatrices$1=[],signum$1=Math.sign;function init$1(){for(var G=0;G<16;G++){var U=[];rotationCayley$1.push(U);for(var L=0;L<16;L++)for(var Y=signum$1(ux$1[G]*ux$1[L]+vx$1[G]*uy$1[L]),X=signum$1(uy$1[G]*ux$1[L]+vy$1[G]*uy$1[L]),W=signum$1(ux$1[G]*vx$1[L]+vx$1[G]*vy$1[L]),z=signum$1(uy$1[G]*vx$1[L]+vy$1[G]*vy$1[L]),J=0;J<16;J++)if(ux$1[J]===Y&&uy$1[J]===X&&vx$1[J]===W&&vy$1[J]===z){U.push(J);break}}for(var G=0;G<16;G++){var Z=new Matrix$1;Z.set(ux$1[G],uy$1[G],vx$1[G],vy$1[G],0,0),rotationMatrices$1.push(Z)}}init$1();var groupD8$1={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(G){return ux$1[G]},uY:function(G){return uy$1[G]},vX:function(G){return vx$1[G]},vY:function(G){return vy$1[G]},inv:function(G){return G&8?G&15:-G&7},add:function(G,U){return rotationCayley$1[G][U]},sub:function(G,U){return rotationCayley$1[G][groupD8$1.inv(U)]},rotate180:function(G){return G^4},isVertical:function(G){return(G&3)===2},byDirection:function(G,U){return Math.abs(G)*2<=Math.abs(U)?U>=0?groupD8$1.S:groupD8$1.N:Math.abs(U)*2<=Math.abs(G)?G>0?groupD8$1.E:groupD8$1.W:U>0?G>0?groupD8$1.SE:groupD8$1.SW:G>0?groupD8$1.NE:groupD8$1.NW},matrixAppendRotationInv:function(G,U,L,Y){L===void 0&&(L=0),Y===void 0&&(Y=0);var X=rotationMatrices$1[groupD8$1.inv(U)];X.tx=L,X.ty=Y,G.append(X)}},Transform=function(){function G(){this.worldTransform=new Matrix$1,this.localTransform=new Matrix$1,this.position=new ObservablePoint$1(this.onChange,this,0,0),this.scale=new ObservablePoint$1(this.onChange,this,1,1),this.pivot=new ObservablePoint$1(this.onChange,this,0,0),this.skew=new ObservablePoint$1(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return G.prototype.onChange=function(){this._localID++},G.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},G.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},G.prototype.updateLocalTransform=function(){var U=this.localTransform;this._localID!==this._currentLocalID&&(U.a=this._cx*this.scale.x,U.b=this._sx*this.scale.x,U.c=this._cy*this.scale.y,U.d=this._sy*this.scale.y,U.tx=this.position.x-(this.pivot.x*U.a+this.pivot.y*U.c),U.ty=this.position.y-(this.pivot.x*U.b+this.pivot.y*U.d),this._currentLocalID=this._localID,this._parentID=-1)},G.prototype.updateTransform=function(U){var L=this.localTransform;if(this._localID!==this._currentLocalID&&(L.a=this._cx*this.scale.x,L.b=this._sx*this.scale.x,L.c=this._cy*this.scale.y,L.d=this._sy*this.scale.y,L.tx=this.position.x-(this.pivot.x*L.a+this.pivot.y*L.c),L.ty=this.position.y-(this.pivot.x*L.b+this.pivot.y*L.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==U._worldID){var Y=U.worldTransform,X=this.worldTransform;X.a=L.a*Y.a+L.b*Y.c,X.b=L.a*Y.b+L.b*Y.d,X.c=L.c*Y.a+L.d*Y.c,X.d=L.c*Y.b+L.d*Y.d,X.tx=L.tx*Y.a+L.ty*Y.c+Y.tx,X.ty=L.tx*Y.b+L.ty*Y.d+Y.ty,this._parentID=U._worldID,this._worldID++}},G.prototype.setFromMatrix=function(U){U.decompose(this),this._localID++},Object.defineProperty(G.prototype,"rotation",{get:function(){return this._rotation},set:function(U){this._rotation!==U&&(this._rotation=U,this.updateSkew())},enumerable:!1,configurable:!0}),G.IDENTITY=new G,G}();/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.SORTABLE_CHILDREN=!1;var Bounds$1=function(){function G(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return G.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},G.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},G.prototype.getRectangle=function(U){return this.minX>this.maxX||this.minY>this.maxY?Rectangle$1.EMPTY:(U=U||new Rectangle$1(0,0,1,1),U.x=this.minX,U.y=this.minY,U.width=this.maxX-this.minX,U.height=this.maxY-this.minY,U)},G.prototype.addPoint=function(U){this.minX=Math.min(this.minX,U.x),this.maxX=Math.max(this.maxX,U.x),this.minY=Math.min(this.minY,U.y),this.maxY=Math.max(this.maxY,U.y)},G.prototype.addPointMatrix=function(U,L){var Y=U.a,X=U.b,W=U.c,z=U.d,J=U.tx,Z=U.ty,ee=Y*L.x+W*L.y+J,te=X*L.x+z*L.y+Z;this.minX=Math.min(this.minX,ee),this.maxX=Math.max(this.maxX,ee),this.minY=Math.min(this.minY,te),this.maxY=Math.max(this.maxY,te)},G.prototype.addQuad=function(U){var L=this.minX,Y=this.minY,X=this.maxX,W=this.maxY,z=U[0],J=U[1];L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[2],J=U[3],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[4],J=U[5],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[6],J=U[7],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,this.minX=L,this.minY=Y,this.maxX=X,this.maxY=W},G.prototype.addFrame=function(U,L,Y,X,W){this.addFrameMatrix(U.worldTransform,L,Y,X,W)},G.prototype.addFrameMatrix=function(U,L,Y,X,W){var z=U.a,J=U.b,Z=U.c,ee=U.d,te=U.tx,re=U.ty,ie=this.minX,ne=this.minY,oe=this.maxX,se=this.maxY,ae=z*L+Z*Y+te,le=J*L+ee*Y+re;ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*X+Z*Y+te,le=J*X+ee*Y+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*L+Z*W+te,le=J*L+ee*W+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*X+Z*W+te,le=J*X+ee*W+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,this.minX=ie,this.minY=ne,this.maxX=oe,this.maxY=se},G.prototype.addVertexData=function(U,L,Y){for(var X=this.minX,W=this.minY,z=this.maxX,J=this.maxY,Z=L;Z<Y;Z+=2){var ee=U[Z],te=U[Z+1];X=ee<X?ee:X,W=te<W?te:W,z=ee>z?ee:z,J=te>J?te:J}this.minX=X,this.minY=W,this.maxX=z,this.maxY=J},G.prototype.addVertices=function(U,L,Y,X){this.addVerticesMatrix(U.worldTransform,L,Y,X)},G.prototype.addVerticesMatrix=function(U,L,Y,X,W,z){W===void 0&&(W=0),z===void 0&&(z=W);for(var J=U.a,Z=U.b,ee=U.c,te=U.d,re=U.tx,ie=U.ty,ne=this.minX,oe=this.minY,se=this.maxX,ae=this.maxY,le=Y;le<X;le+=2){var ue=L[le],ce=L[le+1],he=J*ue+ee*ce+re,fe=te*ce+Z*ue+ie;ne=Math.min(ne,he-W),se=Math.max(se,he+W),oe=Math.min(oe,fe-z),ae=Math.max(ae,fe+z)}this.minX=ne,this.minY=oe,this.maxX=se,this.maxY=ae},G.prototype.addBounds=function(U){var L=this.minX,Y=this.minY,X=this.maxX,W=this.maxY;this.minX=U.minX<L?U.minX:L,this.minY=U.minY<Y?U.minY:Y,this.maxX=U.maxX>X?U.maxX:X,this.maxY=U.maxY>W?U.maxY:W},G.prototype.addBoundsMask=function(U,L){var Y=U.minX>L.minX?U.minX:L.minX,X=U.minY>L.minY?U.minY:L.minY,W=U.maxX<L.maxX?U.maxX:L.maxX,z=U.maxY<L.maxY?U.maxY:L.maxY;if(Y<=W&&X<=z){var J=this.minX,Z=this.minY,ee=this.maxX,te=this.maxY;this.minX=Y<J?Y:J,this.minY=X<Z?X:Z,this.maxX=W>ee?W:ee,this.maxY=z>te?z:te}},G.prototype.addBoundsMatrix=function(U,L){this.addFrameMatrix(L,U.minX,U.minY,U.maxX,U.maxY)},G.prototype.addBoundsArea=function(U,L){var Y=U.minX>L.x?U.minX:L.x,X=U.minY>L.y?U.minY:L.y,W=U.maxX<L.x+L.width?U.maxX:L.x+L.width,z=U.maxY<L.y+L.height?U.maxY:L.y+L.height;if(Y<=W&&X<=z){var J=this.minX,Z=this.minY,ee=this.maxX,te=this.maxY;this.minX=Y<J?Y:J,this.minY=X<Z?X:Z,this.maxX=W>ee?W:ee,this.maxY=z>te?z:te}},G.prototype.pad=function(U,L){U===void 0&&(U=0),L===void 0&&(L=U),this.isEmpty()||(this.minX-=U,this.maxX+=U,this.minY-=L,this.maxY+=L)},G.prototype.addFramePad=function(U,L,Y,X,W,z){U-=W,L-=z,Y+=W,X+=z,this.minX=this.minX<U?this.minX:U,this.maxX=this.maxX>Y?this.maxX:Y,this.minY=this.minY<L?this.minY:L,this.maxY=this.maxY>X?this.maxY:X},G}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$p=function(G,U){return extendStatics$p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$p(G,U)};function __extends$R(G,U){extendStatics$p(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var DisplayObject$1=function(G){__extends$R(U,G);function U(){var L=G.call(this)||this;return L.tempDisplayObjectParent=null,L.transform=new Transform,L.alpha=1,L.visible=!0,L.renderable=!0,L.cullable=!1,L.cullArea=null,L.parent=null,L.worldAlpha=1,L._lastSortedIndex=0,L._zIndex=0,L.filterArea=null,L.filters=null,L._enabledFilters=null,L._bounds=new Bounds$1,L._localBounds=null,L._boundsID=0,L._boundsRect=null,L._localBoundsRect=null,L._mask=null,L._maskRefCount=0,L._destroyed=!1,L.isSprite=!1,L.isMask=!1,L}return U.mixin=function(L){for(var Y=Object.keys(L),X=0;X<Y.length;++X){var W=Y[X];Object.defineProperty(U.prototype,W,Object.getOwnPropertyDescriptor(L,W))}},Object.defineProperty(U.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),U.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},U.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},U.prototype.getBounds=function(L,Y){return L||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),Y||(this._boundsRect||(this._boundsRect=new Rectangle$1),Y=this._boundsRect),this._bounds.getRectangle(Y)},U.prototype.getLocalBounds=function(L){L||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),L=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds$1);var Y=this.transform,X=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var W=this._bounds,z=this._boundsID;this._bounds=this._localBounds;var J=this.getBounds(!1,L);return this.parent=X,this.transform=Y,this._bounds=W,this._bounds.updateID+=this._boundsID-z,J},U.prototype.toGlobal=function(L,Y,X){return X===void 0&&(X=!1),X||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(L,Y)},U.prototype.toLocal=function(L,Y,X,W){return Y&&(L=Y.toGlobal(L,X,W)),W||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(L,X)},U.prototype.setParent=function(L){if(!L||!L.addChild)throw new Error("setParent: Argument must be a Container");return L.addChild(this),L},U.prototype.setTransform=function(L,Y,X,W,z,J,Z,ee,te){return L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=1),W===void 0&&(W=1),z===void 0&&(z=0),J===void 0&&(J=0),Z===void 0&&(Z=0),ee===void 0&&(ee=0),te===void 0&&(te=0),this.position.x=L,this.position.y=Y,this.scale.x=X||1,this.scale.y=W||1,this.rotation=z,this.skew.x=J,this.skew.y=Z,this.pivot.x=ee,this.pivot.y=te,this},U.prototype.destroy=function(L){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(U.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject$1),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),U.prototype.enableTempParent=function(){var L=this.parent;return this.parent=this._tempDisplayObjectParent,L},U.prototype.disableTempParent=function(L){this.parent=L},Object.defineProperty(U.prototype,"x",{get:function(){return this.position.x},set:function(L){this.transform.position.x=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"y",{get:function(){return this.position.y},set:function(L){this.transform.position.y=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"position",{get:function(){return this.transform.position},set:function(L){this.transform.position.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"scale",{get:function(){return this.transform.scale},set:function(L){this.transform.scale.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(L){this.transform.pivot.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"skew",{get:function(){return this.transform.skew},set:function(L){this.transform.skew.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(L){this.transform.rotation=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(L){this.transform.rotation=L*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"zIndex",{get:function(){return this._zIndex},set:function(L){this._zIndex=L,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"worldVisible",{get:function(){var L=this;do{if(!L.visible)return!1;L=L.parent}while(L);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mask",{get:function(){return this._mask},set:function(L){if(this._mask!==L){if(this._mask){var Y=this._mask.maskObject||this._mask;Y._maskRefCount--,Y._maskRefCount===0&&(Y.renderable=!0,Y.isMask=!1)}if(this._mask=L,this._mask){var Y=this._mask.maskObject||this._mask;Y._maskRefCount===0&&(Y.renderable=!1,Y.isMask=!0),Y._maskRefCount++}}},enumerable:!1,configurable:!0}),U}(n$4),TemporaryDisplayObject$1=function(G){__extends$R(U,G);function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.sortDirty=null,L}return U}(DisplayObject$1);DisplayObject$1.prototype.displayObjectUpdateTransform=DisplayObject$1.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$3;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$3||(ENV$3={}));var RENDERER_TYPE$3;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$3||(RENDERER_TYPE$3={}));var BUFFER_BITS$3;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$3||(BUFFER_BITS$3={}));var BLEND_MODES$3;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$3||(BLEND_MODES$3={}));var DRAW_MODES$3;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$3||(DRAW_MODES$3={}));var FORMATS$3;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$3||(FORMATS$3={}));var TARGETS$3;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$3||(TARGETS$3={}));var TYPES$3;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$3||(TYPES$3={}));var SAMPLER_TYPES$3;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$3||(SAMPLER_TYPES$3={}));var SCALE_MODES$3;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$3||(SCALE_MODES$3={}));var WRAP_MODES$3;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$3||(WRAP_MODES$3={}));var MIPMAP_MODES$3;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$3||(MIPMAP_MODES$3={}));var ALPHA_MODES$3;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$3||(ALPHA_MODES$3={}));var CLEAR_MODES$3;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$3||(CLEAR_MODES$3={}));var GC_MODES$3;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$3||(GC_MODES$3={}));var PRECISION$3;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$3||(PRECISION$3={}));var MASK_TYPES$3;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$3||(MASK_TYPES$3={}));var MSAA_QUALITY$3;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$3||(MSAA_QUALITY$3={}));var BUFFER_TYPE$3;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$3||(BUFFER_TYPE$3={}));function sortChildren$1(G,U){return G.zIndex===U.zIndex?G._lastSortedIndex-U._lastSortedIndex:G.zIndex-U.zIndex}var Container$1=function(G){__extends$R(U,G);function U(){var L=G.call(this)||this;return L.children=[],L.sortableChildren=settings$1.SORTABLE_CHILDREN,L.sortDirty=!1,L}return U.prototype.onChildrenChange=function(L){},U.prototype.addChild=function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];if(Y.length>1)for(var W=0;W<Y.length;W++)this.addChild(Y[W]);else{var z=Y[0];z.parent&&z.parent.removeChild(z),z.parent=this,this.sortDirty=!0,z.transform._parentID=-1,this.children.push(z),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",z,this,this.children.length-1),z.emit("added",this)}return Y[0]},U.prototype.addChildAt=function(L,Y){if(Y<0||Y>this.children.length)throw new Error(L+"addChildAt: The index "+Y+" supplied is out of bounds "+this.children.length);return L.parent&&L.parent.removeChild(L),L.parent=this,this.sortDirty=!0,L.transform._parentID=-1,this.children.splice(Y,0,L),this._boundsID++,this.onChildrenChange(Y),L.emit("added",this),this.emit("childAdded",L,this,Y),L},U.prototype.swapChildren=function(L,Y){if(L!==Y){var X=this.getChildIndex(L),W=this.getChildIndex(Y);this.children[X]=Y,this.children[W]=L,this.onChildrenChange(X<W?X:W)}},U.prototype.getChildIndex=function(L){var Y=this.children.indexOf(L);if(Y===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return Y},U.prototype.setChildIndex=function(L,Y){if(Y<0||Y>=this.children.length)throw new Error("The index "+Y+" supplied is out of bounds "+this.children.length);var X=this.getChildIndex(L);removeItems$1(this.children,X,1),this.children.splice(Y,0,L),this.onChildrenChange(Y)},U.prototype.getChildAt=function(L){if(L<0||L>=this.children.length)throw new Error("getChildAt: Index ("+L+") does not exist.");return this.children[L]},U.prototype.removeChild=function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];if(Y.length>1)for(var W=0;W<Y.length;W++)this.removeChild(Y[W]);else{var z=Y[0],J=this.children.indexOf(z);if(J===-1)return null;z.parent=null,z.transform._parentID=-1,removeItems$1(this.children,J,1),this._boundsID++,this.onChildrenChange(J),z.emit("removed",this),this.emit("childRemoved",z,this,J)}return Y[0]},U.prototype.removeChildAt=function(L){var Y=this.getChildAt(L);return Y.parent=null,Y.transform._parentID=-1,removeItems$1(this.children,L,1),this._boundsID++,this.onChildrenChange(L),Y.emit("removed",this),this.emit("childRemoved",Y,this,L),Y},U.prototype.removeChildren=function(L,Y){L===void 0&&(L=0),Y===void 0&&(Y=this.children.length);var X=L,W=Y,z=W-X,J;if(z>0&&z<=W){J=this.children.splice(X,z);for(var Z=0;Z<J.length;++Z)J[Z].parent=null,J[Z].transform&&(J[Z].transform._parentID=-1);this._boundsID++,this.onChildrenChange(L);for(var Z=0;Z<J.length;++Z)J[Z].emit("removed",this),this.emit("childRemoved",J[Z],this,Z);return J}else if(z===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},U.prototype.sortChildren=function(){for(var L=!1,Y=0,X=this.children.length;Y<X;++Y){var W=this.children[Y];W._lastSortedIndex=Y,!L&&W.zIndex!==0&&(L=!0)}L&&this.children.length>1&&this.children.sort(sortChildren$1),this.sortDirty=!1},U.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var L=0,Y=this.children.length;L<Y;++L){var X=this.children[L];X.visible&&X.updateTransform()}},U.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var L=0;L<this.children.length;L++){var Y=this.children[L];if(!(!Y.visible||!Y.renderable))if(Y.calculateBounds(),Y._mask){var X=Y._mask.maskObject||Y._mask;X.calculateBounds(),this._bounds.addBoundsMask(Y._bounds,X._bounds)}else Y.filterArea?this._bounds.addBoundsArea(Y._bounds,Y.filterArea):this._bounds.addBounds(Y._bounds)}this._bounds.updateID=this._boundsID},U.prototype.getLocalBounds=function(L,Y){Y===void 0&&(Y=!1);var X=G.prototype.getLocalBounds.call(this,L);if(!Y)for(var W=0,z=this.children.length;W<z;++W){var J=this.children[W];J.visible&&J.updateTransform()}return X},U.prototype._calculateBounds=function(){},U.prototype._renderWithCulling=function(L){var Y=L.renderTexture.sourceFrame;if(Y.width>0&&Y.height>0){var X,W;if(this.cullArea?(X=this.cullArea,W=this.worldTransform):this._render!==U.prototype._render&&(X=this.getBounds(!0)),X&&Y.intersects(X,W))this._render(L);else if(this.cullArea)return;for(var z=0,J=this.children.length;z<J;++z){var Z=this.children[z],ee=Z.cullable;Z.cullable=ee||!this.cullArea,Z.render(L),Z.cullable=ee}}},U.prototype.render=function(L){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(L);else if(this.cullable)this._renderWithCulling(L);else{this._render(L);for(var Y=0,X=this.children.length;Y<X;++Y)this.children[Y].render(L)}},U.prototype.renderAdvanced=function(L){var Y=this.filters,X=this._mask;if(Y){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var W=0;W<Y.length;W++)Y[W].enabled&&this._enabledFilters.push(Y[W])}var z=Y&&this._enabledFilters&&this._enabledFilters.length||X&&(!X.isMaskData||X.enabled&&(X.autoDetect||X.type!==MASK_TYPES$3.NONE));if(z&&L.batch.flush(),Y&&this._enabledFilters&&this._enabledFilters.length&&L.filter.push(this,this._enabledFilters),X&&L.mask.push(this,this._mask),this.cullable)this._renderWithCulling(L);else{this._render(L);for(var W=0,J=this.children.length;W<J;++W)this.children[W].render(L)}z&&L.batch.flush(),X&&L.mask.pop(this),Y&&this._enabledFilters&&this._enabledFilters.length&&L.filter.pop()},U.prototype._render=function(L){},U.prototype.destroy=function(L){G.prototype.destroy.call(this),this.sortDirty=!1;var Y=typeof L=="boolean"?L:L&&L.children,X=this.removeChildren(0,this.children.length);if(Y)for(var W=0;W<X.length;++W)X[W].destroy(L)},Object.defineProperty(U.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(L){var Y=this.getLocalBounds().width;Y!==0?this.scale.x=L/Y:this.scale.x=1,this._width=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(L){var Y=this.getLocalBounds().height;Y!==0?this.scale.y=L/Y:this.scale.y=1,this._height=L},enumerable:!1,configurable:!0}),U}(DisplayObject$1);Container$1.prototype.containerUpdateTransform=Container$1.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject$1.mixin(accessibleTarget);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function G(U){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile$4.tablet||isMobile$4.phone)&&this.createTouchHook();var L=document.createElement("div");L.style.width=DIV_TOUCH_SIZE+"px",L.style.height=DIV_TOUCH_SIZE+"px",L.style.position="absolute",L.style.top=DIV_TOUCH_POS_X+"px",L.style.left=DIV_TOUCH_POS_Y+"px",L.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=L,this.renderer=U,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(G.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),G.prototype.createTouchHook=function(){var U=this,L=document.createElement("button");L.style.width=DIV_HOOK_SIZE+"px",L.style.height=DIV_HOOK_SIZE+"px",L.style.position="absolute",L.style.top=DIV_HOOK_POS_X+"px",L.style.left=DIV_HOOK_POS_Y+"px",L.style.zIndex=DIV_HOOK_ZINDEX.toString(),L.style.backgroundColor="#FF0000",L.title="select to enable accessibility for this content",L.addEventListener("focus",function(){U._isMobileAccessibility=!0,U.activate(),U.destroyTouchHook()}),document.body.appendChild(L),this._hookDiv=L},G.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},G.prototype.activate=function(){var U;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(U=this.renderer.view.parentNode)===null||U===void 0||U.appendChild(this.div))},G.prototype.deactivate=function(){var U;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(U=this.div.parentNode)===null||U===void 0||U.removeChild(this.div))},G.prototype.updateAccessibleObjects=function(U){if(!(!U.visible||!U.accessibleChildren)){U.accessible&&U.interactive&&(U._accessibleActive||this.addChild(U),U.renderId=this.renderId);var L=U.children;if(L)for(var Y=0;Y<L.length;Y++)this.updateAccessibleObjects(L[Y])}},G.prototype.update=function(){var U=performance.now();if(!(isMobile$4.android.device&&U<this.androidUpdateCount)&&(this.androidUpdateCount=U+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var L=this.renderer.view.getBoundingClientRect(),Y=L.left,X=L.top,W=L.width,z=L.height,J=this.renderer,Z=J.width,ee=J.height,te=J.resolution,re=W/Z*te,ie=z/ee*te,ne=this.div;ne.style.left=Y+"px",ne.style.top=X+"px",ne.style.width=Z+"px",ne.style.height=ee+"px";for(var oe=0;oe<this.children.length;oe++){var se=this.children[oe];if(se.renderId!==this.renderId)se._accessibleActive=!1,removeItems$1(this.children,oe,1),this.div.removeChild(se._accessibleDiv),this.pool.push(se._accessibleDiv),se._accessibleDiv=null,oe--;else{ne=se._accessibleDiv;var ae=se.hitArea,le=se.worldTransform;se.hitArea?(ne.style.left=(le.tx+ae.x*le.a)*re+"px",ne.style.top=(le.ty+ae.y*le.d)*ie+"px",ne.style.width=ae.width*le.a*re+"px",ne.style.height=ae.height*le.d*ie+"px"):(ae=se.getBounds(),this.capHitArea(ae),ne.style.left=ae.x*re+"px",ne.style.top=ae.y*ie+"px",ne.style.width=ae.width*re+"px",ne.style.height=ae.height*ie+"px",ne.title!==se.accessibleTitle&&se.accessibleTitle!==null&&(ne.title=se.accessibleTitle),ne.getAttribute("aria-label")!==se.accessibleHint&&se.accessibleHint!==null&&ne.setAttribute("aria-label",se.accessibleHint)),(se.accessibleTitle!==ne.title||se.tabIndex!==ne.tabIndex)&&(ne.title=se.accessibleTitle,ne.tabIndex=se.tabIndex,this.debug&&this.updateDebugHTML(ne))}}this.renderId++}},G.prototype.updateDebugHTML=function(U){U.innerHTML="type: "+U.type+"</br> title : "+U.title+"</br> tabIndex: "+U.tabIndex},G.prototype.capHitArea=function(U){U.x<0&&(U.width+=U.x,U.x=0),U.y<0&&(U.height+=U.y,U.y=0);var L=this.renderer,Y=L.width,X=L.height;U.x+U.width>Y&&(U.width=Y-U.x),U.y+U.height>X&&(U.height=X-U.y)},G.prototype.addChild=function(U){var L=this.pool.pop();L||(L=document.createElement("button"),L.style.width=DIV_TOUCH_SIZE+"px",L.style.height=DIV_TOUCH_SIZE+"px",L.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",L.style.position="absolute",L.style.zIndex=DIV_TOUCH_ZINDEX.toString(),L.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?L.setAttribute("aria-live","off"):L.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?L.setAttribute("aria-relevant","additions"):L.setAttribute("aria-relevant","text"),L.addEventListener("click",this._onClick.bind(this)),L.addEventListener("focus",this._onFocus.bind(this)),L.addEventListener("focusout",this._onFocusOut.bind(this))),L.style.pointerEvents=U.accessiblePointerEvents,L.type=U.accessibleType,U.accessibleTitle&&U.accessibleTitle!==null?L.title=U.accessibleTitle:(!U.accessibleHint||U.accessibleHint===null)&&(L.title="displayObject "+U.tabIndex),U.accessibleHint&&U.accessibleHint!==null&&L.setAttribute("aria-label",U.accessibleHint),this.debug&&this.updateDebugHTML(L),U._accessibleActive=!0,U._accessibleDiv=L,L.displayObject=U,this.children.push(U),this.div.appendChild(U._accessibleDiv),U._accessibleDiv.tabIndex=U.tabIndex},G.prototype._onClick=function(U){var L=this.renderer.plugins.interaction,Y=U.target.displayObject,X=L.eventData;L.dispatchEvent(Y,"click",X),L.dispatchEvent(Y,"pointertap",X),L.dispatchEvent(Y,"tap",X)},G.prototype._onFocus=function(U){U.target.getAttribute("aria-live")||U.target.setAttribute("aria-live","assertive");var L=this.renderer.plugins.interaction,Y=U.target.displayObject,X=L.eventData;L.dispatchEvent(Y,"mouseover",X)},G.prototype._onFocusOut=function(U){U.target.getAttribute("aria-live")||U.target.setAttribute("aria-live","polite");var L=this.renderer.plugins.interaction,Y=U.target.displayObject,X=L.eventData;L.dispatchEvent(Y,"mouseout",X)},G.prototype._onKeyDown=function(U){U.keyCode===KEY_CODE_TAB&&this.activate()},G.prototype._onMouseMove=function(U){U.movementX===0&&U.movementY===0||this.deactivate()},G.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},G}();/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.TARGET_FPMS=.06;var UPDATE_PRIORITY$1;(function(G){G[G.INTERACTION=50]="INTERACTION",G[G.HIGH=25]="HIGH",G[G.NORMAL=0]="NORMAL",G[G.LOW=-25]="LOW",G[G.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY$1||(UPDATE_PRIORITY$1={}));var TickerListener$1=function(){function G(U,L,Y,X){L===void 0&&(L=null),Y===void 0&&(Y=0),X===void 0&&(X=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=U,this.context=L,this.priority=Y,this.once=X}return G.prototype.match=function(U,L){return L===void 0&&(L=null),this.fn===U&&this.context===L},G.prototype.emit=function(U){this.fn&&(this.context?this.fn.call(this.context,U):this.fn(U));var L=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),L},G.prototype.connect=function(U){this.previous=U,U.next&&(U.next.previous=this),this.next=U.next,U.next=this},G.prototype.destroy=function(U){U===void 0&&(U=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var L=this.next;return this.next=U?null:L,this.previous=null,L},G}(),Ticker$1=function(){function G(){var U=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener$1(null,null,1/0),this.deltaMS=1/settings$1.TARGET_FPMS,this.elapsedMS=1/settings$1.TARGET_FPMS,this._tick=function(L){U._requestId=null,U.started&&(U.update(L),U.started&&U._requestId===null&&U._head.next&&(U._requestId=requestAnimationFrame(U._tick)))}}return G.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},G.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},G.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},G.prototype.add=function(U,L,Y){return Y===void 0&&(Y=UPDATE_PRIORITY$1.NORMAL),this._addListener(new TickerListener$1(U,L,Y))},G.prototype.addOnce=function(U,L,Y){return Y===void 0&&(Y=UPDATE_PRIORITY$1.NORMAL),this._addListener(new TickerListener$1(U,L,Y,!0))},G.prototype._addListener=function(U){var L=this._head.next,Y=this._head;if(!L)U.connect(Y);else{for(;L;){if(U.priority>L.priority){U.connect(Y);break}Y=L,L=L.next}U.previous||U.connect(Y)}return this._startIfPossible(),this},G.prototype.remove=function(U,L){for(var Y=this._head.next;Y;)Y.match(U,L)?Y=Y.destroy():Y=Y.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(G.prototype,"count",{get:function(){if(!this._head)return 0;for(var U=0,L=this._head;L=L.next;)U++;return U},enumerable:!1,configurable:!0}),G.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},G.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},G.prototype.destroy=function(){if(!this._protected){this.stop();for(var U=this._head.next;U;)U=U.destroy(!0);this._head.destroy(),this._head=null}},G.prototype.update=function(U){U===void 0&&(U=performance.now());var L;if(U>this.lastTime){if(L=this.elapsedMS=U-this.lastTime,L>this._maxElapsedMS&&(L=this._maxElapsedMS),L*=this.speed,this._minElapsedMS){var Y=U-this._lastFrame|0;if(Y<this._minElapsedMS)return;this._lastFrame=U-Y%this._minElapsedMS}this.deltaMS=L,this.deltaTime=this.deltaMS*settings$1.TARGET_FPMS;for(var X=this._head,W=X.next;W;)W=W.emit(this.deltaTime);X.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=U},Object.defineProperty(G.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(U){var L=Math.min(this.maxFPS,U),Y=Math.min(Math.max(0,L)/1e3,settings$1.TARGET_FPMS);this._maxElapsedMS=1/Y},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(U){if(U===0)this._minElapsedMS=0;else{var L=Math.max(this.minFPS,U);this._minElapsedMS=1/(L/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(G,"shared",{get:function(){if(!G._shared){var U=G._shared=new G;U.autoStart=!0,U._protected=!0}return G._shared},enumerable:!1,configurable:!0}),Object.defineProperty(G,"system",{get:function(){if(!G._system){var U=G._system=new G;U.autoStart=!0,U._protected=!0}return G._system},enumerable:!1,configurable:!0}),G}(),TickerPlugin=function(){function G(){}return G.init=function(U){var L=this;U=Object.assign({autoStart:!0,sharedTicker:!1},U),Object.defineProperty(this,"ticker",{set:function(Y){this._ticker&&this._ticker.remove(this.render,this),this._ticker=Y,Y&&Y.add(this.render,this,UPDATE_PRIORITY$1.LOW)},get:function(){return this._ticker}}),this.stop=function(){L._ticker.stop()},this.start=function(){L._ticker.start()},this._ticker=null,this.ticker=U.sharedTicker?Ticker$1.shared:new Ticker$1,U.autoStart&&this.start()},G.destroy=function(){if(this._ticker){var U=this._ticker;this.ticker=null,U.destroy()}},G}();/*!
 * @pixi/interaction - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var InteractionData=function(){function G(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Point$1,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(G.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),G.prototype.getLocalPosition=function(U,L,Y){return U.worldTransform.applyInverse(Y||this.global,L)},G.prototype.copyEvent=function(U){"isPrimary"in U&&U.isPrimary&&(this.isPrimary=!0),this.button="button"in U&&U.button;var L="buttons"in U&&U.buttons;this.buttons=Number.isInteger(L)?L:"which"in U&&U.which,this.width="width"in U&&U.width,this.height="height"in U&&U.height,this.tiltX="tiltX"in U&&U.tiltX,this.tiltY="tiltY"in U&&U.tiltY,this.pointerType="pointerType"in U&&U.pointerType,this.pressure="pressure"in U&&U.pressure,this.rotationAngle="rotationAngle"in U&&U.rotationAngle,this.twist="twist"in U&&U.twist||0,this.tangentialPressure="tangentialPressure"in U&&U.tangentialPressure||0},G.prototype.reset=function(){this.isPrimary=!1},G}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$o=function(G,U){return extendStatics$o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$o(G,U)};function __extends$Q(G,U){extendStatics$o(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var InteractionEvent=function(){function G(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return G.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},G.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},G}(),InteractionTrackingData=function(){function G(U){this._pointerId=U,this._flags=G.FLAGS.NONE}return G.prototype._doSet=function(U,L){L?this._flags=this._flags|U:this._flags=this._flags&~U},Object.defineProperty(G.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"flags",{get:function(){return this._flags},set:function(U){this._flags=U},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"none",{get:function(){return this._flags===G.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"over",{get:function(){return(this._flags&G.FLAGS.OVER)!==0},set:function(U){this._doSet(G.FLAGS.OVER,U)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"rightDown",{get:function(){return(this._flags&G.FLAGS.RIGHT_DOWN)!==0},set:function(U){this._doSet(G.FLAGS.RIGHT_DOWN,U)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"leftDown",{get:function(){return(this._flags&G.FLAGS.LEFT_DOWN)!==0},set:function(U){this._doSet(G.FLAGS.LEFT_DOWN,U)},enumerable:!1,configurable:!0}),G.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),G}(),TreeSearch=function(){function G(){this._tempPoint=new Point$1}return G.prototype.recursiveFindHit=function(U,L,Y,X,W){if(!L||!L.visible)return!1;var z=U.data.global;W=L.interactive||W;var J=!1,Z=W,ee=!0;if(L.hitArea?(X&&(L.worldTransform.applyInverse(z,this._tempPoint),L.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?J=!0:(X=!1,ee=!1)),Z=!1):L._mask&&X&&(L._mask.containsPoint&&L._mask.containsPoint(z)||(X=!1)),ee&&L.interactiveChildren&&L.children)for(var te=L.children,re=te.length-1;re>=0;re--){var ie=te[re],ne=this.recursiveFindHit(U,ie,Y,X,Z);if(ne){if(!ie.parent)continue;Z=!1,ne&&(U.target&&(X=!1),J=!0)}}return W&&(X&&!U.target&&!L.hitArea&&L.containsPoint&&L.containsPoint(z)&&(J=!0),L.interactive&&(J&&!U.target&&(U.target=L),Y&&Y(U,L,!!J))),J},G.prototype.findHit=function(U,L,Y,X){this.recursiveFindHit(U,L,Y,X,!1)},G}(),interactiveTarget={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(G){G?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};DisplayObject$1.mixin(interactiveTarget);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(G){__extends$Q(U,G);function U(L,Y){var X=G.call(this)||this;return Y=Y||{},X.renderer=L,X.autoPreventDefault=Y.autoPreventDefault!==void 0?Y.autoPreventDefault:!0,X.interactionFrequency=Y.interactionFrequency||10,X.mouse=new InteractionData,X.mouse.identifier=MOUSE_POINTER_ID,X.mouse.global.set(-999999),X.activeInteractionData={},X.activeInteractionData[MOUSE_POINTER_ID]=X.mouse,X.interactionDataPool=[],X.eventData=new InteractionEvent,X.interactionDOMElement=null,X.moveWhenInside=!1,X.eventsAdded=!1,X.tickerAdded=!1,X.mouseOverRenderer=!("PointerEvent"in globalThis),X.supportsTouchEvents="ontouchstart"in globalThis,X.supportsPointerEvents=!!globalThis.PointerEvent,X.onPointerUp=X.onPointerUp.bind(X),X.processPointerUp=X.processPointerUp.bind(X),X.onPointerCancel=X.onPointerCancel.bind(X),X.processPointerCancel=X.processPointerCancel.bind(X),X.onPointerDown=X.onPointerDown.bind(X),X.processPointerDown=X.processPointerDown.bind(X),X.onPointerMove=X.onPointerMove.bind(X),X.processPointerMove=X.processPointerMove.bind(X),X.onPointerOut=X.onPointerOut.bind(X),X.processPointerOverOut=X.processPointerOverOut.bind(X),X.onPointerOver=X.onPointerOver.bind(X),X.cursorStyles={default:"inherit",pointer:"pointer"},X.currentCursorMode=null,X.cursor=null,X.resolution=1,X.delayedEvents=[],X.search=new TreeSearch,X._tempDisplayObject=new TemporaryDisplayObject$1,X._eventListenerOptions={capture:!0,passive:!1},X._useSystemTicker=Y.useSystemTicker!==void 0?Y.useSystemTicker:!0,X.setTargetElement(X.renderer.view,X.renderer.resolution),X}return Object.defineProperty(U.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(L){this._useSystemTicker=L,L?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),U.prototype.hitTest=function(L,Y){return hitTestEvent.target=null,hitTestEvent.data.global=L,Y||(Y=this.lastObjectRendered),this.processInteractive(hitTestEvent,Y,null,!0),hitTestEvent.target},U.prototype.setTargetElement=function(L,Y){Y===void 0&&(Y=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=L,this.resolution=Y,this.addEvents(),this.addTickerListener()},U.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(Ticker$1.system.add(this.tickerUpdate,this,UPDATE_PRIORITY$1.INTERACTION),this.tickerAdded=!0)},U.prototype.removeTickerListener=function(){!this.tickerAdded||(Ticker$1.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},U.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var L=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(L.msContentZooming="none",L.msTouchAction="none"):this.supportsPointerEvents&&(L.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},U.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var L=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(L.msContentZooming="",L.msTouchAction=""):this.supportsPointerEvents&&(L.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},U.prototype.tickerUpdate=function(L){this._deltaTime+=L,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},U.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var L in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(L)){var Y=this.activeInteractionData[L];if(Y.originalEvent&&Y.pointerType!=="touch"){var X=this.configureInteractionEventForDOMEvent(this.eventData,Y.originalEvent,Y);this.processInteractive(X,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},U.prototype.setCursorMode=function(L){L=L||"default";var Y=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(Y=!1),this.currentCursorMode!==L){this.currentCursorMode=L;var X=this.cursorStyles[L];if(X)switch(typeof X){case"string":Y&&(this.interactionDOMElement.style.cursor=X);break;case"function":X(L);break;case"object":Y&&Object.assign(this.interactionDOMElement.style,X);break}else Y&&typeof L=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,L)&&(this.interactionDOMElement.style.cursor=L)}},U.prototype.dispatchEvent=function(L,Y,X){(!X.stopPropagationHint||L===X.stopsPropagatingAt)&&(X.currentTarget=L,X.type=Y,L.emit(Y,X),L[Y]&&L[Y](X))},U.prototype.delayDispatchEvent=function(L,Y,X){this.delayedEvents.push({displayObject:L,eventString:Y,eventData:X})},U.prototype.mapPositionToPoint=function(L,Y,X){var W;this.interactionDOMElement.parentElement?W=this.interactionDOMElement.getBoundingClientRect():W={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var z=1/this.resolution;L.x=(Y-W.left)*(this.interactionDOMElement.width/W.width)*z,L.y=(X-W.top)*(this.interactionDOMElement.height/W.height)*z},U.prototype.processInteractive=function(L,Y,X,W){var z=this.search.findHit(L,Y,X,W),J=this.delayedEvents;if(!J.length)return z;L.stopPropagationHint=!1;var Z=J.length;this.delayedEvents=[];for(var ee=0;ee<Z;ee++){var te=J[ee],re=te.displayObject,ie=te.eventString,ne=te.eventData;ne.stopsPropagatingAt===re&&(ne.stopPropagationHint=!0),this.dispatchEvent(re,ie,ne)}return z},U.prototype.onPointerDown=function(L){if(!(this.supportsTouchEvents&&L.pointerType==="touch")){var Y=this.normalizeToPointerData(L);if(this.autoPreventDefault&&Y[0].isNormalized){var X=L.cancelable||!("cancelable"in L);X&&L.preventDefault()}for(var W=Y.length,z=0;z<W;z++){var J=Y[z],Z=this.getInteractionDataForPointerId(J),ee=this.configureInteractionEventForDOMEvent(this.eventData,J,Z);if(ee.data.originalEvent=L,this.processInteractive(ee,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",ee),J.pointerType==="touch")this.emit("touchstart",ee);else if(J.pointerType==="mouse"||J.pointerType==="pen"){var te=J.button===2;this.emit(te?"rightdown":"mousedown",this.eventData)}}}},U.prototype.processPointerDown=function(L,Y,X){var W=L.data,z=L.data.identifier;if(X){if(Y.trackedPointers[z]||(Y.trackedPointers[z]=new InteractionTrackingData(z)),this.dispatchEvent(Y,"pointerdown",L),W.pointerType==="touch")this.dispatchEvent(Y,"touchstart",L);else if(W.pointerType==="mouse"||W.pointerType==="pen"){var J=W.button===2;J?Y.trackedPointers[z].rightDown=!0:Y.trackedPointers[z].leftDown=!0,this.dispatchEvent(Y,J?"rightdown":"mousedown",L)}}},U.prototype.onPointerComplete=function(L,Y,X){for(var W=this.normalizeToPointerData(L),z=W.length,J=L.target!==this.interactionDOMElement?"outside":"",Z=0;Z<z;Z++){var ee=W[Z],te=this.getInteractionDataForPointerId(ee),re=this.configureInteractionEventForDOMEvent(this.eventData,ee,te);if(re.data.originalEvent=L,this.processInteractive(re,this.lastObjectRendered,X,Y||!J),this.emit(Y?"pointercancel":"pointerup"+J,re),ee.pointerType==="mouse"||ee.pointerType==="pen"){var ie=ee.button===2;this.emit(ie?"rightup"+J:"mouseup"+J,re)}else ee.pointerType==="touch"&&(this.emit(Y?"touchcancel":"touchend"+J,re),this.releaseInteractionDataForPointerId(ee.pointerId))}},U.prototype.onPointerCancel=function(L){this.supportsTouchEvents&&L.pointerType==="touch"||this.onPointerComplete(L,!0,this.processPointerCancel)},U.prototype.processPointerCancel=function(L,Y){var X=L.data,W=L.data.identifier;Y.trackedPointers[W]!==void 0&&(delete Y.trackedPointers[W],this.dispatchEvent(Y,"pointercancel",L),X.pointerType==="touch"&&this.dispatchEvent(Y,"touchcancel",L))},U.prototype.onPointerUp=function(L){this.supportsTouchEvents&&L.pointerType==="touch"||this.onPointerComplete(L,!1,this.processPointerUp)},U.prototype.processPointerUp=function(L,Y,X){var W=L.data,z=L.data.identifier,J=Y.trackedPointers[z],Z=W.pointerType==="touch",ee=W.pointerType==="mouse"||W.pointerType==="pen",te=!1;if(ee){var re=W.button===2,ie=InteractionTrackingData.FLAGS,ne=re?ie.RIGHT_DOWN:ie.LEFT_DOWN,oe=J!==void 0&&J.flags&ne;X?(this.dispatchEvent(Y,re?"rightup":"mouseup",L),oe&&(this.dispatchEvent(Y,re?"rightclick":"click",L),te=!0)):oe&&this.dispatchEvent(Y,re?"rightupoutside":"mouseupoutside",L),J&&(re?J.rightDown=!1:J.leftDown=!1)}X?(this.dispatchEvent(Y,"pointerup",L),Z&&this.dispatchEvent(Y,"touchend",L),J&&((!ee||te)&&this.dispatchEvent(Y,"pointertap",L),Z&&(this.dispatchEvent(Y,"tap",L),J.over=!1))):J&&(this.dispatchEvent(Y,"pointerupoutside",L),Z&&this.dispatchEvent(Y,"touchendoutside",L)),J&&J.none&&delete Y.trackedPointers[z]},U.prototype.onPointerMove=function(L){if(!(this.supportsTouchEvents&&L.pointerType==="touch")){var Y=this.normalizeToPointerData(L);(Y[0].pointerType==="mouse"||Y[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var X=Y.length,W=0;W<X;W++){var z=Y[W],J=this.getInteractionDataForPointerId(z),Z=this.configureInteractionEventForDOMEvent(this.eventData,z,J);Z.data.originalEvent=L,this.processInteractive(Z,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",Z),z.pointerType==="touch"&&this.emit("touchmove",Z),(z.pointerType==="mouse"||z.pointerType==="pen")&&this.emit("mousemove",Z)}Y[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},U.prototype.processPointerMove=function(L,Y,X){var W=L.data,z=W.pointerType==="touch",J=W.pointerType==="mouse"||W.pointerType==="pen";J&&this.processPointerOverOut(L,Y,X),(!this.moveWhenInside||X)&&(this.dispatchEvent(Y,"pointermove",L),z&&this.dispatchEvent(Y,"touchmove",L),J&&this.dispatchEvent(Y,"mousemove",L))},U.prototype.onPointerOut=function(L){if(!(this.supportsTouchEvents&&L.pointerType==="touch")){var Y=this.normalizeToPointerData(L),X=Y[0];X.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var W=this.getInteractionDataForPointerId(X),z=this.configureInteractionEventForDOMEvent(this.eventData,X,W);z.data.originalEvent=X,this.processInteractive(z,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",z),X.pointerType==="mouse"||X.pointerType==="pen"?this.emit("mouseout",z):this.releaseInteractionDataForPointerId(W.identifier)}},U.prototype.processPointerOverOut=function(L,Y,X){var W=L.data,z=L.data.identifier,J=W.pointerType==="mouse"||W.pointerType==="pen",Z=Y.trackedPointers[z];X&&!Z&&(Z=Y.trackedPointers[z]=new InteractionTrackingData(z)),Z!==void 0&&(X&&this.mouseOverRenderer?(Z.over||(Z.over=!0,this.delayDispatchEvent(Y,"pointerover",L),J&&this.delayDispatchEvent(Y,"mouseover",L)),J&&this.cursor===null&&(this.cursor=Y.cursor)):Z.over&&(Z.over=!1,this.dispatchEvent(Y,"pointerout",this.eventData),J&&this.dispatchEvent(Y,"mouseout",L),Z.none&&delete Y.trackedPointers[z]))},U.prototype.onPointerOver=function(L){var Y=this.normalizeToPointerData(L),X=Y[0],W=this.getInteractionDataForPointerId(X),z=this.configureInteractionEventForDOMEvent(this.eventData,X,W);z.data.originalEvent=X,X.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",z),(X.pointerType==="mouse"||X.pointerType==="pen")&&this.emit("mouseover",z)},U.prototype.getInteractionDataForPointerId=function(L){var Y=L.pointerId,X;return Y===MOUSE_POINTER_ID||L.pointerType==="mouse"?X=this.mouse:this.activeInteractionData[Y]?X=this.activeInteractionData[Y]:(X=this.interactionDataPool.pop()||new InteractionData,X.identifier=Y,this.activeInteractionData[Y]=X),X.copyEvent(L),X},U.prototype.releaseInteractionDataForPointerId=function(L){var Y=this.activeInteractionData[L];Y&&(delete this.activeInteractionData[L],Y.reset(),this.interactionDataPool.push(Y))},U.prototype.configureInteractionEventForDOMEvent=function(L,Y,X){return L.data=X,this.mapPositionToPoint(X.global,Y.clientX,Y.clientY),Y.pointerType==="touch"&&(Y.globalX=X.global.x,Y.globalY=X.global.y),X.originalEvent=Y,L.reset(),L},U.prototype.normalizeToPointerData=function(L){var Y=[];if(this.supportsTouchEvents&&L instanceof TouchEvent)for(var X=0,W=L.changedTouches.length;X<W;X++){var z=L.changedTouches[X];typeof z.button=="undefined"&&(z.button=L.touches.length?1:0),typeof z.buttons=="undefined"&&(z.buttons=L.touches.length?1:0),typeof z.isPrimary=="undefined"&&(z.isPrimary=L.touches.length===1&&L.type==="touchstart"),typeof z.width=="undefined"&&(z.width=z.radiusX||1),typeof z.height=="undefined"&&(z.height=z.radiusY||1),typeof z.tiltX=="undefined"&&(z.tiltX=0),typeof z.tiltY=="undefined"&&(z.tiltY=0),typeof z.pointerType=="undefined"&&(z.pointerType="touch"),typeof z.pointerId=="undefined"&&(z.pointerId=z.identifier||0),typeof z.pressure=="undefined"&&(z.pressure=z.force||.5),typeof z.twist=="undefined"&&(z.twist=0),typeof z.tangentialPressure=="undefined"&&(z.tangentialPressure=0),typeof z.layerX=="undefined"&&(z.layerX=z.offsetX=z.clientX),typeof z.layerY=="undefined"&&(z.layerY=z.offsetY=z.clientY),z.isNormalized=!0,Y.push(z)}else if(!globalThis.MouseEvent||L instanceof MouseEvent&&(!this.supportsPointerEvents||!(L instanceof globalThis.PointerEvent))){var J=L;typeof J.isPrimary=="undefined"&&(J.isPrimary=!0),typeof J.width=="undefined"&&(J.width=1),typeof J.height=="undefined"&&(J.height=1),typeof J.tiltX=="undefined"&&(J.tiltX=0),typeof J.tiltY=="undefined"&&(J.tiltY=0),typeof J.pointerType=="undefined"&&(J.pointerType="mouse"),typeof J.pointerId=="undefined"&&(J.pointerId=MOUSE_POINTER_ID),typeof J.pressure=="undefined"&&(J.pressure=.5),typeof J.twist=="undefined"&&(J.twist=0),typeof J.tangentialPressure=="undefined"&&(J.tangentialPressure=0),J.isNormalized=!0,Y.push(J)}else Y.push(L);return Y},U.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},U}(n$4);/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner$1=function(){function G(U){this.items=[],this._name=U,this._aliasCount=0}return G.prototype.emit=function(U,L,Y,X,W,z,J,Z){if(arguments.length>8)throw new Error("max arguments reached");var ee=this,te=ee.name,re=ee.items;this._aliasCount++;for(var ie=0,ne=re.length;ie<ne;ie++)re[ie][te](U,L,Y,X,W,z,J,Z);return re===this.items&&this._aliasCount--,this},G.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},G.prototype.add=function(U){return U[this._name]&&(this.ensureNonAliasedItems(),this.remove(U),this.items.push(U)),this},G.prototype.remove=function(U){var L=this.items.indexOf(U);return L!==-1&&(this.ensureNonAliasedItems(),this.items.splice(L,1)),this},G.prototype.contains=function(U){return this.items.indexOf(U)!==-1},G.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},G.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(G.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),G}();Object.defineProperties(Runner$1.prototype,{dispatch:{value:Runner$1.prototype.emit},run:{value:Runner$1.prototype.emit}});/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.PREFER_ENV=isMobile$4.any?ENV$4.WEBGL:ENV$4.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;var INSTALLED$1=[];function autoDetectResource$1(G,U){if(!G)return null;var L="";if(typeof G=="string"){var Y=/\.(\w{3,4})(?:$|\?|#)/i.exec(G);Y&&(L=Y[1].toLowerCase())}for(var X=INSTALLED$1.length-1;X>=0;--X){var W=INSTALLED$1[X];if(W.test&&W.test(G,L))return new W(G,U)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$n=function(G,U){return extendStatics$n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$n(G,U)};function __extends$P(G,U){extendStatics$n(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var __assign$u=function(){return __assign$u=Object.assign||function(U){for(var L=arguments,Y,X=1,W=arguments.length;X<W;X++){Y=L[X];for(var z in Y)Object.prototype.hasOwnProperty.call(Y,z)&&(U[z]=Y[z])}return U},__assign$u.apply(this,arguments)};function __rest$1(G,U){var L={};for(var Y in G)Object.prototype.hasOwnProperty.call(G,Y)&&U.indexOf(Y)<0&&(L[Y]=G[Y]);if(G!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,Y=Object.getOwnPropertySymbols(G);X<Y.length;X++)U.indexOf(Y[X])<0&&(L[Y[X]]=G[Y[X]]);return L}var Resource$1=function(){function G(U,L){U===void 0&&(U=0),L===void 0&&(L=0),this._width=U,this._height=L,this.destroyed=!1,this.internal=!1,this.onResize=new Runner$1("setRealSize"),this.onUpdate=new Runner$1("update"),this.onError=new Runner$1("onError")}return G.prototype.bind=function(U){this.onResize.add(U),this.onUpdate.add(U),this.onError.add(U),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},G.prototype.unbind=function(U){this.onResize.remove(U),this.onUpdate.remove(U),this.onError.remove(U)},G.prototype.resize=function(U,L){(U!==this._width||L!==this._height)&&(this._width=U,this._height=L,this.onResize.emit(U,L))},Object.defineProperty(G.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),G.prototype.update=function(){this.destroyed||this.onUpdate.emit()},G.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(G.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),G.prototype.style=function(U,L,Y){return!1},G.prototype.dispose=function(){},G.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},G.test=function(U,L){return!1},G}(),BufferResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height;if(!z||!J)throw new Error("BufferResource width or height invalid");return X=G.call(this,z,J)||this,X.data=L,X}return U.prototype.upload=function(L,Y,X){var W=L.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK);var z=Y.realWidth,J=Y.realHeight;return X.width===z&&X.height===J?W.texSubImage2D(Y.target,0,0,0,z,J,Y.format,X.type,this.data):(X.width=z,X.height=J,W.texImage2D(Y.target,0,X.internalFormat,z,J,0,Y.format,X.type,this.data)),!0},U.prototype.dispose=function(){this.data=null},U.test=function(L){return L instanceof Float32Array||L instanceof Uint8Array||L instanceof Uint32Array},U}(Resource$1),defaultBufferOptions$1={scaleMode:SCALE_MODES$4.NEAREST,format:FORMATS$4.RGBA,alphaMode:ALPHA_MODES$4.NPM},BaseTexture$1=function(G){__extends$P(U,G);function U(L,Y){L===void 0&&(L=null),Y===void 0&&(Y=null);var X=G.call(this)||this;Y=Y||{};var W=Y.alphaMode,z=Y.mipmap,J=Y.anisotropicLevel,Z=Y.scaleMode,ee=Y.width,te=Y.height,re=Y.wrapMode,ie=Y.format,ne=Y.type,oe=Y.target,se=Y.resolution,ae=Y.resourceOptions;return L&&!(L instanceof Resource$1)&&(L=autoDetectResource$1(L,ae),L.internal=!0),X.resolution=se||settings$1.RESOLUTION,X.width=Math.round((ee||0)*X.resolution)/X.resolution,X.height=Math.round((te||0)*X.resolution)/X.resolution,X._mipmap=z!==void 0?z:settings$1.MIPMAP_TEXTURES,X.anisotropicLevel=J!==void 0?J:settings$1.ANISOTROPIC_LEVEL,X._wrapMode=re||settings$1.WRAP_MODE,X._scaleMode=Z!==void 0?Z:settings$1.SCALE_MODE,X.format=ie||FORMATS$4.RGBA,X.type=ne||TYPES$4.UNSIGNED_BYTE,X.target=oe||TARGETS$4.TEXTURE_2D,X.alphaMode=W!==void 0?W:ALPHA_MODES$4.UNPACK,X.uid=uid$1(),X.touched=0,X.isPowerOfTwo=!1,X._refreshPOT(),X._glTextures={},X.dirtyId=0,X.dirtyStyleId=0,X.cacheId=null,X.valid=ee>0&&te>0,X.textureCacheIds=[],X.destroyed=!1,X.resource=null,X._batchEnabled=0,X._batchLocation=0,X.parentTextureArray=null,X.setResource(L),X}return Object.defineProperty(U.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mipmap",{get:function(){return this._mipmap},set:function(L){this._mipmap!==L&&(this._mipmap=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(L){this._scaleMode!==L&&(this._scaleMode=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(L){this._wrapMode!==L&&(this._wrapMode=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),U.prototype.setStyle=function(L,Y){var X;return L!==void 0&&L!==this.scaleMode&&(this.scaleMode=L,X=!0),Y!==void 0&&Y!==this.mipmap&&(this.mipmap=Y,X=!0),X&&this.dirtyStyleId++,this},U.prototype.setSize=function(L,Y,X){return X=X||this.resolution,this.setRealSize(L*X,Y*X,X)},U.prototype.setRealSize=function(L,Y,X){return this.resolution=X||this.resolution,this.width=Math.round(L)/this.resolution,this.height=Math.round(Y)/this.resolution,this._refreshPOT(),this.update(),this},U.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2$1(this.realWidth)&&isPow2$1(this.realHeight)},U.prototype.setResolution=function(L){var Y=this.resolution;return Y===L?this:(this.resolution=L,this.valid&&(this.width=Math.round(this.width*Y)/L,this.height=Math.round(this.height*Y)/L,this.emit("update",this)),this._refreshPOT(),this)},U.prototype.setResource=function(L){if(this.resource===L)return this;if(this.resource)throw new Error("Resource can be set only once");return L.bind(this),this.resource=L,this},U.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},U.prototype.onError=function(L){this.emit("error",this,L)},U.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache$1[this.cacheId],delete TextureCache$1[this.cacheId],this.cacheId=null),this.dispose(),U.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},U.prototype.dispose=function(){this.emit("dispose",this)},U.prototype.castToBaseTexture=function(){return this},U.from=function(L,Y,X){X===void 0&&(X=settings$1.STRICT_TEXTURE_CACHE);var W=typeof L=="string",z=null;if(W)z=L;else{if(!L._pixiId){var J=Y&&Y.pixiIdPrefix||"pixiid";L._pixiId=J+"_"+uid$1()}z=L._pixiId}var Z=BaseTextureCache$1[z];if(W&&X&&!Z)throw new Error('The cacheId "'+z+'" does not exist in BaseTextureCache.');return Z||(Z=new U(L,Y),Z.cacheId=z,U.addToCache(Z,z)),Z},U.fromBuffer=function(L,Y,X,W){L=L||new Float32Array(Y*X*4);var z=new BufferResource$1(L,{width:Y,height:X}),J=L instanceof Float32Array?TYPES$4.FLOAT:TYPES$4.UNSIGNED_BYTE;return new U(z,Object.assign(defaultBufferOptions$1,W||{width:Y,height:X,type:J}))},U.addToCache=function(L,Y){Y&&(L.textureCacheIds.indexOf(Y)===-1&&L.textureCacheIds.push(Y),BaseTextureCache$1[Y]&&console.warn("BaseTexture added to the cache with an id ["+Y+"] that already had an entry"),BaseTextureCache$1[Y]=L)},U.removeFromCache=function(L){if(typeof L=="string"){var Y=BaseTextureCache$1[L];if(Y){var X=Y.textureCacheIds.indexOf(L);return X>-1&&Y.textureCacheIds.splice(X,1),delete BaseTextureCache$1[L],Y}}else if(L&&L.textureCacheIds){for(var W=0;W<L.textureCacheIds.length;++W)delete BaseTextureCache$1[L.textureCacheIds[W]];return L.textureCacheIds.length=0,L}return null},U._globalBatch=0,U}(n$4),AbstractMultiResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height;X=G.call(this,z,J)||this,X.items=[],X.itemDirtyIds=[];for(var Z=0;Z<L;Z++){var ee=new BaseTexture$1;X.items.push(ee),X.itemDirtyIds.push(-2)}return X.length=L,X._load=null,X.baseTexture=null,X}return U.prototype.initFromArray=function(L,Y){for(var X=0;X<this.length;X++)!L[X]||(L[X].castToBaseTexture?this.addBaseTextureAt(L[X].castToBaseTexture(),X):L[X]instanceof Resource$1?this.addResourceAt(L[X],X):this.addResourceAt(autoDetectResource$1(L[X],Y),X))},U.prototype.dispose=function(){for(var L=0,Y=this.length;L<Y;L++)this.items[L].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},U.prototype.addResourceAt=function(L,Y){if(!this.items[Y])throw new Error("Index "+Y+" is out of bounds");return L.valid&&!this.valid&&this.resize(L.width,L.height),this.items[Y].setResource(L),this},U.prototype.bind=function(L){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");G.prototype.bind.call(this,L);for(var Y=0;Y<this.length;Y++)this.items[Y].parentTextureArray=L,this.items[Y].on("update",L.update,L)},U.prototype.unbind=function(L){G.prototype.unbind.call(this,L);for(var Y=0;Y<this.length;Y++)this.items[Y].parentTextureArray=null,this.items[Y].off("update",L.update,L)},U.prototype.load=function(){var L=this;if(this._load)return this._load;var Y=this.items.map(function(W){return W.resource}).filter(function(W){return W}),X=Y.map(function(W){return W.load()});return this._load=Promise.all(X).then(function(){var W=L.items[0],z=W.realWidth,J=W.realHeight;return L.resize(z,J),Promise.resolve(L)}),this._load},U}(Resource$1),ArrayResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height,Z,ee;return Array.isArray(L)?(Z=L,ee=L.length):ee=L,X=G.call(this,ee,{width:z,height:J})||this,Z&&X.initFromArray(Z,Y),X}return U.prototype.addBaseTextureAt=function(L,Y){if(L.resource)this.addResourceAt(L.resource,Y);else throw new Error("ArrayResource does not support RenderTexture");return this},U.prototype.bind=function(L){G.prototype.bind.call(this,L),L.target=TARGETS$4.TEXTURE_2D_ARRAY},U.prototype.upload=function(L,Y,X){var W=this,z=W.length,J=W.itemDirtyIds,Z=W.items,ee=L.gl;X.dirtyId<0&&ee.texImage3D(ee.TEXTURE_2D_ARRAY,0,X.internalFormat,this._width,this._height,z,0,Y.format,X.type,null);for(var te=0;te<z;te++){var re=Z[te];J[te]<re.dirtyId&&(J[te]=re.dirtyId,re.valid&&ee.texSubImage3D(ee.TEXTURE_2D_ARRAY,0,0,0,te,re.resource.width,re.resource.height,1,Y.format,X.type,re.resource.source))}return!0},U}(AbstractMultiResource$1),BaseImageResource$1=function(G){__extends$P(U,G);function U(L){var Y=this,X=L,W=X.naturalWidth||X.videoWidth||X.width,z=X.naturalHeight||X.videoHeight||X.height;return Y=G.call(this,W,z)||this,Y.source=L,Y.noSubImage=!1,Y}return U.crossOrigin=function(L,Y,X){X===void 0&&Y.indexOf("data:")!==0?L.crossOrigin=determineCrossOrigin$1(Y):X!==!1&&(L.crossOrigin=typeof X=="string"?X:"anonymous")},U.prototype.upload=function(L,Y,X,W){var z=L.gl,J=Y.realWidth,Z=Y.realHeight;if(W=W||this.source,W instanceof HTMLImageElement){if(!W.complete||W.naturalWidth===0)return!1}else if(W instanceof HTMLVideoElement&&W.readyState<=1)return!1;return z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK),!this.noSubImage&&Y.target===z.TEXTURE_2D&&X.width===J&&X.height===Z?z.texSubImage2D(z.TEXTURE_2D,0,0,0,Y.format,X.type,W):(X.width=J,X.height=Z,z.texImage2D(Y.target,0,X.internalFormat,Y.format,X.type,W)),!0},U.prototype.update=function(){if(!this.destroyed){var L=this.source,Y=L.naturalWidth||L.videoWidth||L.width,X=L.naturalHeight||L.videoHeight||L.height;this.resize(Y,X),G.prototype.update.call(this)}},U.prototype.dispose=function(){this.source=null},U}(Resource$1),CanvasResource$1=function(G){__extends$P(U,G);function U(L){return G.call(this,L)||this}return U.test=function(L){var Y=globalThis.OffscreenCanvas;return Y&&L instanceof Y?!0:globalThis.HTMLCanvasElement&&L instanceof HTMLCanvasElement},U}(BaseImageResource$1),CubeResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height,Z=W.autoLoad,ee=W.linkBaseTexture;if(L&&L.length!==U.SIDES)throw new Error("Invalid length. Got "+L.length+", expected 6");X=G.call(this,6,{width:z,height:J})||this;for(var te=0;te<U.SIDES;te++)X.items[te].target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+te;return X.linkBaseTexture=ee!==!1,L&&X.initFromArray(L,Y),Z!==!1&&X.load(),X}return U.prototype.bind=function(L){G.prototype.bind.call(this,L),L.target=TARGETS$4.TEXTURE_CUBE_MAP},U.prototype.addBaseTextureAt=function(L,Y,X){if(!this.items[Y])throw new Error("Index "+Y+" is out of bounds");if(!this.linkBaseTexture||L.parentTextureArray||Object.keys(L._glTextures).length>0)if(L.resource)this.addResourceAt(L.resource,Y);else throw new Error("CubeResource does not support copying of renderTexture.");else L.target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+Y,L.parentTextureArray=this.baseTexture,this.items[Y]=L;return L.valid&&!this.valid&&this.resize(L.realWidth,L.realHeight),this.items[Y]=L,this},U.prototype.upload=function(L,Y,X){for(var W=this.itemDirtyIds,z=0;z<U.SIDES;z++){var J=this.items[z];W[z]<J.dirtyId&&(J.valid&&J.resource?(J.resource.upload(L,J,X),W[z]=J.dirtyId):W[z]<-1&&(L.gl.texImage2D(J.target,0,X.internalFormat,Y.realWidth,Y.realHeight,0,Y.format,X.type,null),W[z]=-1))}return!0},U.test=function(L){return Array.isArray(L)&&L.length===U.SIDES},U.SIDES=6,U}(AbstractMultiResource$1),ImageResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this;if(Y=Y||{},!(L instanceof HTMLImageElement)){var W=new Image;BaseImageResource$1.crossOrigin(W,L,Y.crossorigin),W.src=L,L=W}return X=G.call(this,L)||this,!L.complete&&!!X._width&&!!X._height&&(X._width=0,X._height=0),X.url=L.src,X._process=null,X.preserveBitmap=!1,X.createBitmap=(Y.createBitmap!==void 0?Y.createBitmap:settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,X.alphaMode=typeof Y.alphaMode=="number"?Y.alphaMode:null,X.bitmap=null,X._load=null,Y.autoLoad!==!1&&X.load(),X}return U.prototype.load=function(L){var Y=this;return this._load?this._load:(L!==void 0&&(this.createBitmap=L),this._load=new Promise(function(X,W){var z=Y.source;Y.url=z.src;var J=function(){Y.destroyed||(z.onload=null,z.onerror=null,Y.resize(z.width,z.height),Y._load=null,Y.createBitmap?X(Y.process()):X(Y))};z.complete&&z.src?J():(z.onload=J,z.onerror=function(Z){W(Z),Y.onError.emit(Z)})}),this._load)},U.prototype.process=function(){var L=this,Y=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var X=globalThis.createImageBitmap,W=!Y.crossOrigin||Y.crossOrigin==="anonymous";return this._process=fetch(Y.src,{mode:W?"cors":"no-cors"}).then(function(z){return z.blob()}).then(function(z){return X(z,0,0,Y.width,Y.height,{premultiplyAlpha:L.alphaMode===ALPHA_MODES$4.UNPACK?"premultiply":"none"})}).then(function(z){return L.destroyed?Promise.reject():(L.bitmap=z,L.update(),L._process=null,Promise.resolve(L))}),this._process},U.prototype.upload=function(L,Y,X){if(typeof this.alphaMode=="number"&&(Y.alphaMode=this.alphaMode),!this.createBitmap)return G.prototype.upload.call(this,L,Y,X);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(G.prototype.upload.call(this,L,Y,X,this.bitmap),!this.preserveBitmap){var W=!0,z=Y._glTextures;for(var J in z){var Z=z[J];if(Z!==X&&Z.dirtyId!==Y.dirtyId){W=!1;break}}W&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},U.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,G.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},U.test=function(L){return typeof L=="string"||L instanceof HTMLImageElement},U}(BaseImageResource$1),SVGResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this;return Y=Y||{},X=G.call(this,document.createElement("canvas"))||this,X._width=0,X._height=0,X.svg=L,X.scale=Y.scale||1,X._overrideWidth=Y.width,X._overrideHeight=Y.height,X._resolve=null,X._crossorigin=Y.crossorigin,X._load=null,Y.autoLoad!==!1&&X.load(),X}return U.prototype.load=function(){var L=this;return this._load?this._load:(this._load=new Promise(function(Y){if(L._resolve=function(){L.resize(L.source.width,L.source.height),Y(L)},U.SVG_XML.test(L.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");L.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(L.svg)))}L._loadSvg()}),this._load)},U.prototype._loadSvg=function(){var L=this,Y=new Image;BaseImageResource$1.crossOrigin(Y,this.svg,this._crossorigin),Y.src=this.svg,Y.onerror=function(X){!L._resolve||(Y.onerror=null,L.onError.emit(X))},Y.onload=function(){if(!!L._resolve){var X=Y.width,W=Y.height;if(!X||!W)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var z=X*L.scale,J=W*L.scale;(L._overrideWidth||L._overrideHeight)&&(z=L._overrideWidth||L._overrideHeight/W*X,J=L._overrideHeight||L._overrideWidth/X*W),z=Math.round(z),J=Math.round(J);var Z=L.source;Z.width=z,Z.height=J,Z._pixiId="canvas_"+uid$1(),Z.getContext("2d").drawImage(Y,0,0,X,W,0,0,z,J),L._resolve(),L._resolve=null}}},U.getSize=function(L){var Y=U.SVG_SIZE.exec(L),X={};return Y&&(X[Y[1]]=Math.round(parseFloat(Y[3])),X[Y[5]]=Math.round(parseFloat(Y[7]))),X},U.prototype.dispose=function(){G.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},U.test=function(L,Y){return Y==="svg"||typeof L=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(L)||typeof L=="string"&&U.SVG_XML.test(L)},U.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,U.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,U}(BaseImageResource$1),VideoResource$1=function(G){__extends$P(U,G);function U(L,Y){var X=this;if(Y=Y||{},!(L instanceof HTMLVideoElement)){var W=document.createElement("video");W.setAttribute("preload","auto"),W.setAttribute("webkit-playsinline",""),W.setAttribute("playsinline",""),typeof L=="string"&&(L=[L]);var z=L[0].src||L[0];BaseImageResource$1.crossOrigin(W,z,Y.crossorigin);for(var J=0;J<L.length;++J){var Z=document.createElement("source"),ee=L[J],te=ee.src,re=ee.mime;te=te||L[J];var ie=te.split("?").shift().toLowerCase(),ne=ie.slice(ie.lastIndexOf(".")+1);re=re||U.MIME_TYPES[ne]||"video/"+ne,Z.src=te,Z.type=re,W.appendChild(Z)}L=W}return X=G.call(this,L)||this,X.noSubImage=!0,X._autoUpdate=!0,X._isConnectedToTicker=!1,X._updateFPS=Y.updateFPS||0,X._msToNextUpdate=0,X.autoPlay=Y.autoPlay!==!1,X._load=null,X._resolve=null,X._onCanPlay=X._onCanPlay.bind(X),X._onError=X._onError.bind(X),Y.autoLoad!==!1&&X.load(),X}return U.prototype.update=function(L){if(!this.destroyed){var Y=Ticker$1.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-Y),(!this._updateFPS||this._msToNextUpdate<=0)&&(G.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},U.prototype.load=function(){var L=this;if(this._load)return this._load;var Y=this.source;return(Y.readyState===Y.HAVE_ENOUGH_DATA||Y.readyState===Y.HAVE_FUTURE_DATA)&&Y.width&&Y.height&&(Y.complete=!0),Y.addEventListener("play",this._onPlayStart.bind(this)),Y.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(Y.addEventListener("canplay",this._onCanPlay),Y.addEventListener("canplaythrough",this._onCanPlay),Y.addEventListener("error",this._onError,!0)),this._load=new Promise(function(X){L.valid?X(L):(L._resolve=X,Y.load())}),this._load},U.prototype._onError=function(L){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(L)},U.prototype._isSourcePlaying=function(){var L=this.source;return L.currentTime>0&&L.paused===!1&&L.ended===!1&&L.readyState>2},U.prototype._isSourceReady=function(){var L=this.source;return L.readyState===3||L.readyState===4},U.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0)},U.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1)},U.prototype._onCanPlay=function(){var L=this.source;L.removeEventListener("canplay",this._onCanPlay),L.removeEventListener("canplaythrough",this._onCanPlay);var Y=this.valid;this.resize(L.videoWidth,L.videoHeight),!Y&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&L.play()},U.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1);var L=this.source;L&&(L.removeEventListener("error",this._onError,!0),L.pause(),L.src="",L.load()),G.prototype.dispose.call(this)},Object.defineProperty(U.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(L){L!==this._autoUpdate&&(this._autoUpdate=L,!this._autoUpdate&&this._isConnectedToTicker?(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(L){L!==this._updateFPS&&(this._updateFPS=L)},enumerable:!1,configurable:!0}),U.test=function(L,Y){return globalThis.HTMLVideoElement&&L instanceof HTMLVideoElement||U.TYPES.indexOf(Y)>-1},U.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],U.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},U}(BaseImageResource$1),ImageBitmapResource$1=function(G){__extends$P(U,G);function U(L){return G.call(this,L)||this}return U.test=function(L){return!!globalThis.createImageBitmap&&L instanceof ImageBitmap},U}(BaseImageResource$1);INSTALLED$1.push(ImageResource$1,ImageBitmapResource$1,CanvasResource$1,VideoResource$1,SVGResource$1,BufferResource$1,CubeResource$1,ArrayResource$1);var _resources$1={__proto__:null,Resource:Resource$1,BaseImageResource:BaseImageResource$1,INSTALLED:INSTALLED$1,autoDetectResource:autoDetectResource$1,AbstractMultiResource:AbstractMultiResource$1,ArrayResource:ArrayResource$1,BufferResource:BufferResource$1,CanvasResource:CanvasResource$1,CubeResource:CubeResource$1,ImageResource:ImageResource$1,SVGResource:SVGResource$1,VideoResource:VideoResource$1,ImageBitmapResource:ImageBitmapResource$1},DepthResource$1=function(G){__extends$P(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.upload=function(L,Y,X){var W=L.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK);var z=Y.realWidth,J=Y.realHeight;return X.width===z&&X.height===J?W.texSubImage2D(Y.target,0,0,0,z,J,Y.format,X.type,this.data):(X.width=z,X.height=J,W.texImage2D(Y.target,0,X.internalFormat,z,J,0,Y.format,X.type,this.data)),!0},U}(BufferResource$1),Framebuffer$1=function(){function G(U,L){this.width=Math.round(U||100),this.height=Math.round(L||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner$1("disposeFramebuffer"),this.multisample=MSAA_QUALITY$4.NONE}return Object.defineProperty(G.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),G.prototype.addColorTexture=function(U,L){return U===void 0&&(U=0),this.colorTextures[U]=L||new BaseTexture$1(null,{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,mipmap:MIPMAP_MODES$4.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},G.prototype.addDepthTexture=function(U){return this.depthTexture=U||new BaseTexture$1(new DepthResource$1(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$4.OFF,format:FORMATS$4.DEPTH_COMPONENT,type:TYPES$4.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},G.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},G.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},G.prototype.resize=function(U,L){if(U=Math.round(U),L=Math.round(L),!(U===this.width&&L===this.height)){this.width=U,this.height=L,this.dirtyId++,this.dirtySize++;for(var Y=0;Y<this.colorTextures.length;Y++){var X=this.colorTextures[Y],W=X.resolution;X.setSize(U/W,L/W)}if(this.depthTexture){var W=this.depthTexture.resolution;this.depthTexture.setSize(U/W,L/W)}}},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},G}(),BaseRenderTexture$1=function(G){__extends$P(U,G);function U(L){L===void 0&&(L={});var Y=this;if(typeof L=="number"){var X=arguments[0],W=arguments[1],z=arguments[2],J=arguments[3];L={width:X,height:W,scaleMode:z,resolution:J}}return L.width=L.width||100,L.height=L.height||100,L.multisample=L.multisample!==void 0?L.multisample:MSAA_QUALITY$4.NONE,Y=G.call(this,null,L)||this,Y.mipmap=MIPMAP_MODES$4.OFF,Y.valid=!0,Y.clearColor=[0,0,0,0],Y.framebuffer=new Framebuffer$1(Y.realWidth,Y.realHeight).addColorTexture(0,Y),Y.framebuffer.multisample=L.multisample,Y.maskStack=[],Y.filterStack=[{}],Y}return U.prototype.resize=function(L,Y){this.framebuffer.resize(L*this.resolution,Y*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},U.prototype.dispose=function(){this.framebuffer.dispose(),G.prototype.dispose.call(this)},U.prototype.destroy=function(){G.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},U}(BaseTexture$1),TextureUvs$1=function(){function G(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return G.prototype.set=function(U,L,Y){var X=L.width,W=L.height;if(Y){var z=U.width/2/X,J=U.height/2/W,Z=U.x/X+z,ee=U.y/W+J;Y=groupD8$1.add(Y,groupD8$1.NW),this.x0=Z+z*groupD8$1.uX(Y),this.y0=ee+J*groupD8$1.uY(Y),Y=groupD8$1.add(Y,2),this.x1=Z+z*groupD8$1.uX(Y),this.y1=ee+J*groupD8$1.uY(Y),Y=groupD8$1.add(Y,2),this.x2=Z+z*groupD8$1.uX(Y),this.y2=ee+J*groupD8$1.uY(Y),Y=groupD8$1.add(Y,2),this.x3=Z+z*groupD8$1.uX(Y),this.y3=ee+J*groupD8$1.uY(Y)}else this.x0=U.x/X,this.y0=U.y/W,this.x1=(U.x+U.width)/X,this.y1=U.y/W,this.x2=(U.x+U.width)/X,this.y2=(U.y+U.height)/W,this.x3=U.x/X,this.y3=(U.y+U.height)/W;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},G.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},G}(),DEFAULT_UVS$1=new TextureUvs$1;function removeAllHandlers$1(G){G.destroy=function(){},G.on=function(){},G.once=function(){},G.emit=function(){}}var Texture$1=function(G){__extends$P(U,G);function U(L,Y,X,W,z,J){var Z=G.call(this)||this;if(Z.noFrame=!1,Y||(Z.noFrame=!0,Y=new Rectangle$1(0,0,1,1)),L instanceof U&&(L=L.baseTexture),Z.baseTexture=L,Z._frame=Y,Z.trim=W,Z.valid=!1,Z._uvs=DEFAULT_UVS$1,Z.uvMatrix=null,Z.orig=X||Y,Z._rotate=Number(z||0),z===!0)Z._rotate=2;else if(Z._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return Z.defaultAnchor=J?new Point$1(J.x,J.y):new Point$1(0,0),Z._updateID=0,Z.textureCacheIds=[],L.valid?Z.noFrame?L.valid&&Z.onBaseTextureUpdated(L):Z.frame=Y:L.once("loaded",Z.onBaseTextureUpdated,Z),Z.noFrame&&L.on("update",Z.onBaseTextureUpdated,Z),Z}return U.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},U.prototype.onBaseTextureUpdated=function(L){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=L.width,this._frame.height=L.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},U.prototype.destroy=function(L){if(this.baseTexture){if(L){var Y=this.baseTexture.resource;Y&&Y.url&&TextureCache$1[Y.url]&&U.removeFromCache(Y.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,U.removeFromCache(this),this.textureCacheIds=null},U.prototype.clone=function(){var L=this._frame.clone(),Y=this._frame===this.orig?L:this.orig.clone(),X=new U(this.baseTexture,!this.noFrame&&L,Y,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(X._frame=L),X},U.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS$1&&(this._uvs=new TextureUvs$1),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},U.from=function(L,Y,X){Y===void 0&&(Y={}),X===void 0&&(X=settings$1.STRICT_TEXTURE_CACHE);var W=typeof L=="string",z=null;if(W)z=L;else if(L instanceof BaseTexture$1){if(!L.cacheId){var J=Y&&Y.pixiIdPrefix||"pixiid";L.cacheId=J+"-"+uid$1(),BaseTexture$1.addToCache(L,L.cacheId)}z=L.cacheId}else{if(!L._pixiId){var J=Y&&Y.pixiIdPrefix||"pixiid";L._pixiId=J+"_"+uid$1()}z=L._pixiId}var Z=TextureCache$1[z];if(W&&X&&!Z)throw new Error('The cacheId "'+z+'" does not exist in TextureCache.');return!Z&&!(L instanceof BaseTexture$1)?(Y.resolution||(Y.resolution=getResolutionOfUrl$1(L)),Z=new U(new BaseTexture$1(L,Y)),Z.baseTexture.cacheId=z,BaseTexture$1.addToCache(Z.baseTexture,z),U.addToCache(Z,z)):!Z&&L instanceof BaseTexture$1&&(Z=new U(L),U.addToCache(Z,z)),Z},U.fromURL=function(L,Y){var X=Object.assign({autoLoad:!1},Y==null?void 0:Y.resourceOptions),W=U.from(L,Object.assign({resourceOptions:X},Y),!1),z=W.baseTexture.resource;return W.baseTexture.valid?Promise.resolve(W):z.load().then(function(){return Promise.resolve(W)})},U.fromBuffer=function(L,Y,X,W){return new U(BaseTexture$1.fromBuffer(L,Y,X,W))},U.fromLoader=function(L,Y,X,W){var z=new BaseTexture$1(L,Object.assign({scaleMode:settings$1.SCALE_MODE,resolution:getResolutionOfUrl$1(Y)},W)),J=z.resource;J instanceof ImageResource$1&&(J.url=Y);var Z=new U(z);return X||(X=Y),BaseTexture$1.addToCache(Z.baseTexture,X),U.addToCache(Z,X),X!==Y&&(BaseTexture$1.addToCache(Z.baseTexture,Y),U.addToCache(Z,Y)),Z.baseTexture.valid?Promise.resolve(Z):new Promise(function(ee){Z.baseTexture.once("loaded",function(){return ee(Z)})})},U.addToCache=function(L,Y){Y&&(L.textureCacheIds.indexOf(Y)===-1&&L.textureCacheIds.push(Y),TextureCache$1[Y]&&console.warn("Texture added to the cache with an id ["+Y+"] that already had an entry"),TextureCache$1[Y]=L)},U.removeFromCache=function(L){if(typeof L=="string"){var Y=TextureCache$1[L];if(Y){var X=Y.textureCacheIds.indexOf(L);return X>-1&&Y.textureCacheIds.splice(X,1),delete TextureCache$1[L],Y}}else if(L&&L.textureCacheIds){for(var W=0;W<L.textureCacheIds.length;++W)TextureCache$1[L.textureCacheIds[W]]===L&&delete TextureCache$1[L.textureCacheIds[W]];return L.textureCacheIds.length=0,L}return null},Object.defineProperty(U.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"frame",{get:function(){return this._frame},set:function(L){this._frame=L,this.noFrame=!1;var Y=L.x,X=L.y,W=L.width,z=L.height,J=Y+W>this.baseTexture.width,Z=X+z>this.baseTexture.height;if(J||Z){var ee=J&&Z?"and":"or",te="X: "+Y+" + "+W+" = "+(Y+W)+" > "+this.baseTexture.width,re="Y: "+X+" + "+z+" = "+(X+z)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(te+" "+ee+" "+re))}this.valid=W&&z&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=L),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"rotate",{get:function(){return this._rotate},set:function(L){this._rotate=L,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),U.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(U,"EMPTY",{get:function(){return U._EMPTY||(U._EMPTY=new U(new BaseTexture$1),removeAllHandlers$1(U._EMPTY),removeAllHandlers$1(U._EMPTY.baseTexture)),U._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(U,"WHITE",{get:function(){if(!U._WHITE){var L=document.createElement("canvas"),Y=L.getContext("2d");L.width=16,L.height=16,Y.fillStyle="white",Y.fillRect(0,0,16,16),U._WHITE=new U(new BaseTexture$1(new CanvasResource$1(L))),removeAllHandlers$1(U._WHITE),removeAllHandlers$1(U._WHITE.baseTexture)}return U._WHITE},enumerable:!1,configurable:!0}),U}(n$4),RenderTexture$1=function(G){__extends$P(U,G);function U(L,Y){var X=G.call(this,L,Y)||this;return X.valid=!0,X.filterFrame=null,X.filterPoolKey=null,X.updateUvs(),X}return Object.defineProperty(U.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(L){this.framebuffer.multisample=L},enumerable:!1,configurable:!0}),U.prototype.resize=function(L,Y,X){X===void 0&&(X=!0);var W=this.baseTexture.resolution,z=Math.round(L*W)/W,J=Math.round(Y*W)/W;this.valid=z>0&&J>0,this._frame.width=this.orig.width=z,this._frame.height=this.orig.height=J,X&&this.baseTexture.resize(z,J),this.updateUvs()},U.prototype.setResolution=function(L){var Y=this.baseTexture;Y.resolution!==L&&(Y.setResolution(L),this.resize(Y.width,Y.height,!1))},U.create=function(L){for(var Y=arguments,X=[],W=1;W<arguments.length;W++)X[W-1]=Y[W];return typeof L=="number"&&(deprecation$1("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),L={width:L,height:X[0],scaleMode:X[1],resolution:X[2]}),new U(new BaseRenderTexture$1(L))},U}(Texture$1),RenderTexturePool$1=function(){function G(U){this.texturePool={},this.textureOptions=U||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return G.prototype.createTexture=function(U,L,Y){Y===void 0&&(Y=MSAA_QUALITY$4.NONE);var X=new BaseRenderTexture$1(Object.assign({width:U,height:L,resolution:1,multisample:Y},this.textureOptions));return new RenderTexture$1(X)},G.prototype.getOptimalTexture=function(U,L,Y,X){Y===void 0&&(Y=1),X===void 0&&(X=MSAA_QUALITY$4.NONE);var W;U=Math.ceil(U*Y-1e-6),L=Math.ceil(L*Y-1e-6),!this.enableFullScreen||U!==this._pixelsWidth||L!==this._pixelsHeight?(U=nextPow2$1(U),L=nextPow2$1(L),W=((U&65535)<<16|L&65535)>>>0,X>1&&(W+=X*4294967296)):W=X>1?-X:-1,this.texturePool[W]||(this.texturePool[W]=[]);var z=this.texturePool[W].pop();return z||(z=this.createTexture(U,L,X)),z.filterPoolKey=W,z.setResolution(Y),z},G.prototype.getFilterTexture=function(U,L,Y){var X=this.getOptimalTexture(U.width,U.height,L||U.resolution,Y||MSAA_QUALITY$4.NONE);return X.filterFrame=U.filterFrame,X},G.prototype.returnTexture=function(U){var L=U.filterPoolKey;U.filterFrame=null,this.texturePool[L].push(U)},G.prototype.returnFilterTexture=function(U){this.returnTexture(U)},G.prototype.clear=function(U){if(U=U!==!1,U)for(var L in this.texturePool){var Y=this.texturePool[L];if(Y)for(var X=0;X<Y.length;X++)Y[X].destroy(!0)}this.texturePool={}},G.prototype.setScreenSize=function(U){if(!(U.width===this._pixelsWidth&&U.height===this._pixelsHeight)){this.enableFullScreen=U.width>0&&U.height>0;for(var L in this.texturePool)if(Number(L)<0){var Y=this.texturePool[L];if(Y)for(var X=0;X<Y.length;X++)Y[X].destroy(!0);this.texturePool[L]=[]}this._pixelsWidth=U.width,this._pixelsHeight=U.height}},G.SCREEN_KEY=-1,G}(),Attribute$1=function(){function G(U,L,Y,X,W,z,J){L===void 0&&(L=0),Y===void 0&&(Y=!1),X===void 0&&(X=TYPES$4.FLOAT),this.buffer=U,this.size=L,this.normalized=Y,this.type=X,this.stride=W,this.start=z,this.instance=J}return G.prototype.destroy=function(){this.buffer=null},G.from=function(U,L,Y,X,W){return new G(U,L,Y,X,W)},G}(),UID$4$1=0,Buffer$1=function(){function G(U,L,Y){L===void 0&&(L=!0),Y===void 0&&(Y=!1),this.data=U||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=Y,this.static=L,this.id=UID$4$1++,this.disposeRunner=new Runner$1("disposeBuffer")}return G.prototype.update=function(U){U instanceof Array&&(U=new Float32Array(U)),this.data=U||this.data,this._updateID++},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(G.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER},set:function(U){this.type=U?BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$4.ARRAY_BUFFER},enumerable:!1,configurable:!0}),G.from=function(U){return U instanceof Array&&(U=new Float32Array(U)),new G(U)},G}(),map$1$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays$1(G,U){for(var L=0,Y=0,X={},W=0;W<G.length;W++)Y+=U[W],L+=G[W].length;for(var z=new ArrayBuffer(L*4),J=null,Z=0,W=0;W<G.length;W++){var ee=U[W],te=G[W],re=getBufferType$1(te);X[re]||(X[re]=new map$1$1[re](z)),J=X[re];for(var ie=0;ie<te.length;ie++){var ne=(ie/ee|0)*Y+Z,oe=ie%ee;J[ne+oe]=te[ie]}Z+=ee}return new Float32Array(z)}var byteSizeMap$1$1={5126:4,5123:2,5121:1},UID$3$1=0,map$2={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry$1=function(){function G(U,L){U===void 0&&(U=[]),L===void 0&&(L={}),this.buffers=U,this.indexBuffer=null,this.attributes=L,this.glVertexArrayObjects={},this.id=UID$3$1++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner$1("disposeGeometry"),this.refCount=0}return G.prototype.addAttribute=function(U,L,Y,X,W,z,J,Z){if(Y===void 0&&(Y=0),X===void 0&&(X=!1),Z===void 0&&(Z=!1),!L)throw new Error("You must pass a buffer when creating an attribute");L instanceof Buffer$1||(L instanceof Array&&(L=new Float32Array(L)),L=new Buffer$1(L));var ee=U.split("|");if(ee.length>1){for(var te=0;te<ee.length;te++)this.addAttribute(ee[te],L,Y,X,W);return this}var re=this.buffers.indexOf(L);return re===-1&&(this.buffers.push(L),re=this.buffers.length-1),this.attributes[U]=new Attribute$1(re,Y,X,W,z,J,Z),this.instanced=this.instanced||Z,this},G.prototype.getAttribute=function(U){return this.attributes[U]},G.prototype.getBuffer=function(U){return this.buffers[this.getAttribute(U).buffer]},G.prototype.addIndex=function(U){return U instanceof Buffer$1||(U instanceof Array&&(U=new Uint16Array(U)),U=new Buffer$1(U)),U.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER,this.indexBuffer=U,this.buffers.indexOf(U)===-1&&this.buffers.push(U),this},G.prototype.getIndex=function(){return this.indexBuffer},G.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var U=[],L=[],Y=new Buffer$1,X;for(X in this.attributes){var W=this.attributes[X],z=this.buffers[W.buffer];U.push(z.data),L.push(W.size*byteSizeMap$1$1[W.type]/4),W.buffer=0}for(Y.data=interleaveTypedArrays$1(U,L),X=0;X<this.buffers.length;X++)this.buffers[X]!==this.indexBuffer&&this.buffers[X].destroy();return this.buffers=[Y],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},G.prototype.getSize=function(){for(var U in this.attributes){var L=this.attributes[U],Y=this.buffers[L.buffer];return Y.data.length/(L.stride/4||L.size)}return 0},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},G.prototype.clone=function(){for(var U=new G,L=0;L<this.buffers.length;L++)U.buffers[L]=new Buffer$1(this.buffers[L].data.slice(0));for(var L in this.attributes){var Y=this.attributes[L];U.attributes[L]=new Attribute$1(Y.buffer,Y.size,Y.normalized,Y.type,Y.stride,Y.start,Y.instance)}return this.indexBuffer&&(U.indexBuffer=U.buffers[this.buffers.indexOf(this.indexBuffer)],U.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER),U},G.merge=function(U){for(var L=new G,Y=[],X=[],W=[],z,J=0;J<U.length;J++){z=U[J];for(var Z=0;Z<z.buffers.length;Z++)X[Z]=X[Z]||0,X[Z]+=z.buffers[Z].data.length,W[Z]=0}for(var J=0;J<z.buffers.length;J++)Y[J]=new map$2[getBufferType$1(z.buffers[J].data)](X[J]),L.buffers[J]=new Buffer$1(Y[J]);for(var J=0;J<U.length;J++){z=U[J];for(var Z=0;Z<z.buffers.length;Z++)Y[Z].set(z.buffers[Z].data,W[Z]),W[Z]+=z.buffers[Z].data.length}if(L.attributes=z.attributes,z.indexBuffer){L.indexBuffer=L.buffers[z.buffers.indexOf(z.indexBuffer)],L.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER;for(var ee=0,te=0,re=0,ie=0,J=0;J<z.buffers.length;J++)if(z.buffers[J]!==z.indexBuffer){ie=J;break}for(var J in z.attributes){var ne=z.attributes[J];(ne.buffer|0)===ie&&(te+=ne.size*byteSizeMap$1$1[ne.type]/4)}for(var J=0;J<U.length;J++){for(var oe=U[J].indexBuffer.data,Z=0;Z<oe.length;Z++)L.indexBuffer.data[Z+re]+=ee;ee+=U[J].buffers[ie].data.length/te,re+=oe.length}}return L},G}(),Quad$1=function(G){__extends$P(U,G);function U(){var L=G.call(this)||this;return L.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),L}return U}(Geometry$1),QuadUv$1=function(G){__extends$P(U,G);function U(){var L=G.call(this)||this;return L.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),L.uvs=new Float32Array([0,0,1,0,1,1,0,1]),L.vertexBuffer=new Buffer$1(L.vertices),L.uvBuffer=new Buffer$1(L.uvs),L.addAttribute("aVertexPosition",L.vertexBuffer).addAttribute("aTextureCoord",L.uvBuffer).addIndex([0,1,2,0,2,3]),L}return U.prototype.map=function(L,Y){var X=0,W=0;return this.uvs[0]=X,this.uvs[1]=W,this.uvs[2]=X+Y.width/L.width,this.uvs[3]=W,this.uvs[4]=X+Y.width/L.width,this.uvs[5]=W+Y.height/L.height,this.uvs[6]=X,this.uvs[7]=W+Y.height/L.height,X=Y.x,W=Y.y,this.vertices[0]=X,this.vertices[1]=W,this.vertices[2]=X+Y.width,this.vertices[3]=W,this.vertices[4]=X+Y.width,this.vertices[5]=W+Y.height,this.vertices[6]=X,this.vertices[7]=W+Y.height,this.invalidate(),this},U.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},U}(Geometry$1),UID$2$1=0,UniformGroup$1=function(){function G(U,L,Y){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2$1++,this.static=!!L,this.ubo=!!Y,U instanceof Buffer$1?(this.buffer=U,this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=U,this.ubo&&(this.buffer=new Buffer$1(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!0))}return G.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},G.prototype.add=function(U,L,Y){if(!this.ubo)this.uniforms[U]=new G(L,Y);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},G.from=function(U,L,Y){return new G(U,L,Y)},G.uboFrom=function(U,L){return new G(U,L!=null?L:!0,!0)},G}(),FilterState$1=function(){function G(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$4.NONE,this.sourceFrame=new Rectangle$1,this.destinationFrame=new Rectangle$1,this.bindingSourceFrame=new Rectangle$1,this.bindingDestinationFrame=new Rectangle$1,this.filters=[],this.transform=null}return G.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},G}(),tempPoints$2=[new Point$1,new Point$1,new Point$1,new Point$1],tempMatrix$2$1=new Matrix$1,FilterSystem$1=function(){function G(U){this.renderer=U,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool$1,this.texturePool.setScreenSize(U.view),this.statePool=[],this.quad=new Quad$1,this.quadUv=new QuadUv$1,this.tempRect=new Rectangle$1,this.activeState={},this.globalUniforms=new UniformGroup$1({outputFrame:new Rectangle$1,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return G.prototype.push=function(U,L){for(var Y,X,W=this.renderer,z=this.defaultFilterStack,J=this.statePool.pop()||new FilterState$1,Z=this.renderer.renderTexture,ee=L[0].resolution,te=L[0].multisample,re=L[0].padding,ie=L[0].autoFit,ne=(Y=L[0].legacy)!==null&&Y!==void 0?Y:!0,oe=1;oe<L.length;oe++){var se=L[oe];ee=Math.min(ee,se.resolution),te=Math.min(te,se.multisample),re=this.useMaxPadding?Math.max(re,se.padding):re+se.padding,ie=ie&&se.autoFit,ne=ne||((X=se.legacy)!==null&&X!==void 0?X:!0)}z.length===1&&(this.defaultFilterStack[0].renderTexture=Z.current),z.push(J),J.resolution=ee,J.multisample=te,J.legacy=ne,J.target=U,J.sourceFrame.copyFrom(U.filterArea||U.getBounds(!0)),J.sourceFrame.pad(re);var ae=this.tempRect.copyFrom(Z.sourceFrame);W.projection.transform&&this.transformAABB(tempMatrix$2$1.copyFrom(W.projection.transform).invert(),ae),ie?(J.sourceFrame.fit(ae),(J.sourceFrame.width<=0||J.sourceFrame.height<=0)&&(J.sourceFrame.width=0,J.sourceFrame.height=0)):J.sourceFrame.intersects(ae)||(J.sourceFrame.width=0,J.sourceFrame.height=0),this.roundFrame(J.sourceFrame,Z.current?Z.current.resolution:W.resolution,Z.sourceFrame,Z.destinationFrame,W.projection.transform),J.renderTexture=this.getOptimalFilterTexture(J.sourceFrame.width,J.sourceFrame.height,ee,te),J.filters=L,J.destinationFrame.width=J.renderTexture.width,J.destinationFrame.height=J.renderTexture.height;var le=this.tempRect;le.x=0,le.y=0,le.width=J.sourceFrame.width,le.height=J.sourceFrame.height,J.renderTexture.filterFrame=J.sourceFrame,J.bindingSourceFrame.copyFrom(Z.sourceFrame),J.bindingDestinationFrame.copyFrom(Z.destinationFrame),J.transform=W.projection.transform,W.projection.transform=null,Z.bind(J.renderTexture,J.sourceFrame,le),W.framebuffer.clear(0,0,0,0)},G.prototype.pop=function(){var U=this.defaultFilterStack,L=U.pop(),Y=L.filters;this.activeState=L;var X=this.globalUniforms.uniforms;X.outputFrame=L.sourceFrame,X.resolution=L.resolution;var W=X.inputSize,z=X.inputPixel,J=X.inputClamp;if(W[0]=L.destinationFrame.width,W[1]=L.destinationFrame.height,W[2]=1/W[0],W[3]=1/W[1],z[0]=Math.round(W[0]*L.resolution),z[1]=Math.round(W[1]*L.resolution),z[2]=1/z[0],z[3]=1/z[1],J[0]=.5*z[2],J[1]=.5*z[3],J[2]=L.sourceFrame.width*W[2]-.5*z[2],J[3]=L.sourceFrame.height*W[3]-.5*z[3],L.legacy){var Z=X.filterArea;Z[0]=L.destinationFrame.width,Z[1]=L.destinationFrame.height,Z[2]=L.sourceFrame.x,Z[3]=L.sourceFrame.y,X.filterClamp=X.inputClamp}this.globalUniforms.update();var ee=U[U.length-1];if(this.renderer.framebuffer.blit(),Y.length===1)Y[0].apply(this,L.renderTexture,ee.renderTexture,CLEAR_MODES$4.BLEND,L),this.returnFilterTexture(L.renderTexture);else{var te=L.renderTexture,re=this.getOptimalFilterTexture(te.width,te.height,L.resolution);re.filterFrame=te.filterFrame;var ie=0;for(ie=0;ie<Y.length-1;++ie){ie===1&&L.multisample>1&&(re=this.getOptimalFilterTexture(te.width,te.height,L.resolution),re.filterFrame=te.filterFrame),Y[ie].apply(this,te,re,CLEAR_MODES$4.CLEAR,L);var ne=te;te=re,re=ne}Y[ie].apply(this,te,ee.renderTexture,CLEAR_MODES$4.BLEND,L),ie>1&&L.multisample>1&&this.returnFilterTexture(L.renderTexture),this.returnFilterTexture(te),this.returnFilterTexture(re)}L.clear(),this.statePool.push(L)},G.prototype.bindAndClear=function(U,L){L===void 0&&(L=CLEAR_MODES$4.CLEAR);var Y=this.renderer,X=Y.renderTexture,W=Y.state;if(U===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,U&&U.filterFrame){var z=this.tempRect;z.x=0,z.y=0,z.width=U.filterFrame.width,z.height=U.filterFrame.height,X.bind(U,U.filterFrame,z)}else U!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?X.bind(U):this.renderer.renderTexture.bind(U,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var J=W.stateId&1||this.forceClear;(L===CLEAR_MODES$4.CLEAR||L===CLEAR_MODES$4.BLIT&&J)&&this.renderer.framebuffer.clear(0,0,0,0)},G.prototype.applyFilter=function(U,L,Y,X){var W=this.renderer;W.state.set(U.state),this.bindAndClear(Y,X),U.uniforms.uSampler=L,U.uniforms.filterGlobals=this.globalUniforms,W.shader.bind(U),U.legacy=!!U.program.attributeData.aTextureCoord,U.legacy?(this.quadUv.map(L._frame,L.filterFrame),W.geometry.bind(this.quadUv),W.geometry.draw(DRAW_MODES$4.TRIANGLES)):(W.geometry.bind(this.quad),W.geometry.draw(DRAW_MODES$4.TRIANGLE_STRIP))},G.prototype.calculateSpriteMatrix=function(U,L){var Y=this.activeState,X=Y.sourceFrame,W=Y.destinationFrame,z=L._texture.orig,J=U.set(W.width,0,0,W.height,X.x,X.y),Z=L.worldTransform.copyTo(Matrix$1.TEMP_MATRIX);return Z.invert(),J.prepend(Z),J.scale(1/z.width,1/z.height),J.translate(L.anchor.x,L.anchor.y),J},G.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},G.prototype.getOptimalFilterTexture=function(U,L,Y,X){return Y===void 0&&(Y=1),X===void 0&&(X=MSAA_QUALITY$4.NONE),this.texturePool.getOptimalTexture(U,L,Y,X)},G.prototype.getFilterTexture=function(U,L,Y){if(typeof U=="number"){var X=U;U=L,L=X}U=U||this.activeState.renderTexture;var W=this.texturePool.getOptimalTexture(U.width,U.height,L||U.resolution,Y||MSAA_QUALITY$4.NONE);return W.filterFrame=U.filterFrame,W},G.prototype.returnFilterTexture=function(U){this.texturePool.returnTexture(U)},G.prototype.emptyPool=function(){this.texturePool.clear(!0)},G.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},G.prototype.transformAABB=function(U,L){var Y=tempPoints$2[0],X=tempPoints$2[1],W=tempPoints$2[2],z=tempPoints$2[3];Y.set(L.left,L.top),X.set(L.left,L.bottom),W.set(L.right,L.top),z.set(L.right,L.bottom),U.apply(Y,Y),U.apply(X,X),U.apply(W,W),U.apply(z,z);var J=Math.min(Y.x,X.x,W.x,z.x),Z=Math.min(Y.y,X.y,W.y,z.y),ee=Math.max(Y.x,X.x,W.x,z.x),te=Math.max(Y.y,X.y,W.y,z.y);L.x=J,L.y=Z,L.width=ee-J,L.height=te-Z},G.prototype.roundFrame=function(U,L,Y,X,W){if(!(U.width<=0||U.height<=0||Y.width<=0||Y.height<=0)){if(W){var z=W.a,J=W.b,Z=W.c,ee=W.d;if((Math.abs(J)>1e-4||Math.abs(Z)>1e-4)&&(Math.abs(z)>1e-4||Math.abs(ee)>1e-4))return}W=W?tempMatrix$2$1.copyFrom(W):tempMatrix$2$1.identity(),W.translate(-Y.x,-Y.y).scale(X.width/Y.width,X.height/Y.height).translate(X.x,X.y),this.transformAABB(W,U),U.ceil(L),this.transformAABB(W.invert(),U)}},G}(),ObjectRenderer$1=function(){function G(U){this.renderer=U}return G.prototype.flush=function(){},G.prototype.destroy=function(){this.renderer=null},G.prototype.start=function(){},G.prototype.stop=function(){this.flush()},G.prototype.render=function(U){},G}(),BatchSystem$1=function(){function G(U){this.renderer=U,this.emptyRenderer=new ObjectRenderer$1(U),this.currentRenderer=this.emptyRenderer}return G.prototype.setObjectRenderer=function(U){this.currentRenderer!==U&&(this.currentRenderer.stop(),this.currentRenderer=U,this.currentRenderer.start())},G.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},G.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},G.prototype.copyBoundTextures=function(U,L){for(var Y=this.renderer.texture.boundTextures,X=L-1;X>=0;--X)U[X]=Y[X]||null,U[X]&&(U[X]._batchLocation=X)},G.prototype.boundArray=function(U,L,Y,X){for(var W=U.elements,z=U.ids,J=U.count,Z=0,ee=0;ee<J;ee++){var te=W[ee],re=te._batchLocation;if(re>=0&&re<X&&L[re]===te){z[ee]=re;continue}for(;Z<X;){var ie=L[Z];if(ie&&ie._batchEnabled===Y&&ie._batchLocation===Z){Z++;continue}z[ee]=Z,te._batchLocation=Z,L[Z]=te;break}}},G.prototype.destroy=function(){this.renderer=null},G}(),CONTEXT_UID_COUNTER$1=0,ContextSystem$1=function(){function G(U){this.renderer=U,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),U.view.addEventListener("webglcontextlost",this.handleContextLost,!1),U.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(G.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),G.prototype.contextChange=function(U){this.gl=U,this.renderer.gl=U,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER$1++,U.isContextLost()&&U.getExtension("WEBGL_lose_context")&&U.getExtension("WEBGL_lose_context").restoreContext()},G.prototype.initFromContext=function(U){this.gl=U,this.validateContext(U),this.renderer.gl=U,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER$1++,this.renderer.runners.contextChange.emit(U)},G.prototype.initFromOptions=function(U){var L=this.createContext(this.renderer.view,U);this.initFromContext(L)},G.prototype.createContext=function(U,L){var Y;if(settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(Y=U.getContext("webgl2",L)),Y)this.webGLVersion=2;else if(this.webGLVersion=1,Y=U.getContext("webgl",L)||U.getContext("experimental-webgl",L),!Y)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=Y,this.getExtensions(),this.gl},G.prototype.getExtensions=function(){var U=this.gl,L={anisotropicFiltering:U.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:U.getExtension("OES_texture_float_linear"),s3tc:U.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:U.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:U.getExtension("WEBGL_compressed_texture_etc"),etc1:U.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:U.getExtension("WEBGL_compressed_texture_pvrtc")||U.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:U.getExtension("WEBGL_compressed_texture_atc"),astc:U.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,L,{drawBuffers:U.getExtension("WEBGL_draw_buffers"),depthTexture:U.getExtension("WEBGL_depth_texture"),loseContext:U.getExtension("WEBGL_lose_context"),vertexArrayObject:U.getExtension("OES_vertex_array_object")||U.getExtension("MOZ_OES_vertex_array_object")||U.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:U.getExtension("OES_element_index_uint"),floatTexture:U.getExtension("OES_texture_float"),floatTextureLinear:U.getExtension("OES_texture_float_linear"),textureHalfFloat:U.getExtension("OES_texture_half_float"),textureHalfFloatLinear:U.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,L,{colorBufferFloat:U.getExtension("EXT_color_buffer_float")})},G.prototype.handleContextLost=function(U){U.preventDefault()},G.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},G.prototype.destroy=function(){var U=this.renderer.view;this.renderer=null,U.removeEventListener("webglcontextlost",this.handleContextLost),U.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},G.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},G.prototype.validateContext=function(U){var L=U.getContextAttributes(),Y="WebGL2RenderingContext"in globalThis&&U instanceof globalThis.WebGL2RenderingContext;Y&&(this.webGLVersion=2),L&&!L.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var X=Y||!!U.getExtension("OES_element_index_uint");this.supports.uint32Indices=X,X||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},G}(),GLFramebuffer$1=function(){function G(U){this.framebuffer=U,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$4.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return G}(),tempRectangle$1=new Rectangle$1,FramebufferSystem$1=function(){function G(U){this.renderer=U,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer$1(10,10),this.msaaSamples=null}return G.prototype.contextChange=function(){var U=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle$1,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var L=this.renderer.context.extensions.drawBuffers,Y=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(L=null,Y=null),L?U.drawBuffers=function(X){return L.drawBuffersWEBGL(X)}:(this.hasMRT=!1,U.drawBuffers=function(){}),Y||(this.writeDepthTexture=!1)}else this.msaaSamples=U.getInternalformatParameter(U.RENDERBUFFER,U.RGBA8,U.SAMPLES)},G.prototype.bind=function(U,L,Y){Y===void 0&&(Y=0);var X=this.gl;if(U){var W=U.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(U);this.current!==U&&(this.current=U,X.bindFramebuffer(X.FRAMEBUFFER,W.framebuffer)),W.mipLevel!==Y&&(U.dirtyId++,U.dirtyFormat++,W.mipLevel=Y),W.dirtyId!==U.dirtyId&&(W.dirtyId=U.dirtyId,W.dirtyFormat!==U.dirtyFormat?(W.dirtyFormat=U.dirtyFormat,W.dirtySize=U.dirtySize,this.updateFramebuffer(U,Y)):W.dirtySize!==U.dirtySize&&(W.dirtySize=U.dirtySize,this.resizeFramebuffer(U)));for(var z=0;z<U.colorTextures.length;z++){var J=U.colorTextures[z];this.renderer.texture.unbind(J.parentTextureArray||J)}if(U.depthTexture&&this.renderer.texture.unbind(U.depthTexture),L){var Z=L.width>>Y,ee=L.height>>Y,te=Z/L.width;this.setViewport(L.x*te,L.y*te,Z,ee)}else{var Z=U.width>>Y,ee=U.height>>Y;this.setViewport(0,0,Z,ee)}}else this.current&&(this.current=null,X.bindFramebuffer(X.FRAMEBUFFER,null)),L?this.setViewport(L.x,L.y,L.width,L.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},G.prototype.setViewport=function(U,L,Y,X){var W=this.viewport;U=Math.round(U),L=Math.round(L),Y=Math.round(Y),X=Math.round(X),(W.width!==Y||W.height!==X||W.x!==U||W.y!==L)&&(W.x=U,W.y=L,W.width=Y,W.height=X,this.gl.viewport(U,L,Y,X))},Object.defineProperty(G.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),G.prototype.clear=function(U,L,Y,X,W){W===void 0&&(W=BUFFER_BITS$4.COLOR|BUFFER_BITS$4.DEPTH);var z=this.gl;z.clearColor(U,L,Y,X),z.clear(W)},G.prototype.initFramebuffer=function(U){var L=this.gl,Y=new GLFramebuffer$1(L.createFramebuffer());return Y.multisample=this.detectSamples(U.multisample),U.glFramebuffers[this.CONTEXT_UID]=Y,this.managedFramebuffers.push(U),U.disposeRunner.add(this),Y},G.prototype.resizeFramebuffer=function(U){var L=this.gl,Y=U.glFramebuffers[this.CONTEXT_UID];Y.msaaBuffer&&(L.bindRenderbuffer(L.RENDERBUFFER,Y.msaaBuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Y.multisample,L.RGBA8,U.width,U.height)),Y.stencil&&(L.bindRenderbuffer(L.RENDERBUFFER,Y.stencil),Y.msaaBuffer?L.renderbufferStorageMultisample(L.RENDERBUFFER,Y.multisample,L.DEPTH24_STENCIL8,U.width,U.height):L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,U.width,U.height));var X=U.colorTextures,W=X.length;L.drawBuffers||(W=Math.min(W,1));for(var z=0;z<W;z++){var J=X[z],Z=J.parentTextureArray||J;this.renderer.texture.bind(Z,0)}U.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(U.depthTexture,0)},G.prototype.updateFramebuffer=function(U,L){var Y=this.gl,X=U.glFramebuffers[this.CONTEXT_UID],W=U.colorTextures,z=W.length;Y.drawBuffers||(z=Math.min(z,1)),X.multisample>1&&this.canMultisampleFramebuffer(U)?(X.msaaBuffer=X.msaaBuffer||Y.createRenderbuffer(),Y.bindRenderbuffer(Y.RENDERBUFFER,X.msaaBuffer),Y.renderbufferStorageMultisample(Y.RENDERBUFFER,X.multisample,Y.RGBA8,U.width,U.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.RENDERBUFFER,X.msaaBuffer)):X.msaaBuffer&&(Y.deleteRenderbuffer(X.msaaBuffer),X.msaaBuffer=null,X.blitFramebuffer&&(X.blitFramebuffer.dispose(),X.blitFramebuffer=null));for(var J=[],Z=0;Z<z;Z++){var ee=W[Z],te=ee.parentTextureArray||ee;this.renderer.texture.bind(te,0),!(Z===0&&X.msaaBuffer)&&(Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0+Z,ee.target,te._glTextures[this.CONTEXT_UID].texture,L),J.push(Y.COLOR_ATTACHMENT0+Z))}if(J.length>1&&Y.drawBuffers(J),U.depthTexture){var re=this.writeDepthTexture;if(re){var ie=U.depthTexture;this.renderer.texture.bind(ie,0),Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.DEPTH_ATTACHMENT,Y.TEXTURE_2D,ie._glTextures[this.CONTEXT_UID].texture,L)}}(U.stencil||U.depth)&&!(U.depthTexture&&this.writeDepthTexture)?(X.stencil=X.stencil||Y.createRenderbuffer(),Y.bindRenderbuffer(Y.RENDERBUFFER,X.stencil),X.msaaBuffer?Y.renderbufferStorageMultisample(Y.RENDERBUFFER,X.multisample,Y.DEPTH24_STENCIL8,U.width,U.height):Y.renderbufferStorage(Y.RENDERBUFFER,Y.DEPTH_STENCIL,U.width,U.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_STENCIL_ATTACHMENT,Y.RENDERBUFFER,X.stencil)):X.stencil&&(Y.deleteRenderbuffer(X.stencil),X.stencil=null)},G.prototype.canMultisampleFramebuffer=function(U){return this.renderer.context.webGLVersion!==1&&U.colorTextures.length<=1&&!U.depthTexture},G.prototype.detectSamples=function(U){var L=this.msaaSamples,Y=MSAA_QUALITY$4.NONE;if(U<=1||L===null)return Y;for(var X=0;X<L.length;X++)if(L[X]<=U){Y=L[X];break}return Y===1&&(Y=MSAA_QUALITY$4.NONE),Y},G.prototype.blit=function(U,L,Y){var X=this,W=X.current,z=X.renderer,J=X.gl,Z=X.CONTEXT_UID;if(z.context.webGLVersion===2&&!!W){var ee=W.glFramebuffers[Z];if(!!ee){if(!U){if(!ee.msaaBuffer)return;var te=W.colorTextures[0];if(!te)return;ee.blitFramebuffer||(ee.blitFramebuffer=new Framebuffer$1(W.width,W.height),ee.blitFramebuffer.addColorTexture(0,te)),U=ee.blitFramebuffer,U.colorTextures[0]!==te&&(U.colorTextures[0]=te,U.dirtyId++,U.dirtyFormat++),(U.width!==W.width||U.height!==W.height)&&(U.width=W.width,U.height=W.height,U.dirtyId++,U.dirtySize++)}L||(L=tempRectangle$1,L.width=W.width,L.height=W.height),Y||(Y=L);var re=L.width===Y.width&&L.height===Y.height;this.bind(U),J.bindFramebuffer(J.READ_FRAMEBUFFER,ee.framebuffer),J.blitFramebuffer(L.left,L.top,L.right,L.bottom,Y.left,Y.top,Y.right,Y.bottom,J.COLOR_BUFFER_BIT,re?J.NEAREST:J.LINEAR)}}},G.prototype.disposeFramebuffer=function(U,L){var Y=U.glFramebuffers[this.CONTEXT_UID],X=this.gl;if(!!Y){delete U.glFramebuffers[this.CONTEXT_UID];var W=this.managedFramebuffers.indexOf(U);W>=0&&this.managedFramebuffers.splice(W,1),U.disposeRunner.remove(this),L||(X.deleteFramebuffer(Y.framebuffer),Y.msaaBuffer&&X.deleteRenderbuffer(Y.msaaBuffer),Y.stencil&&X.deleteRenderbuffer(Y.stencil)),Y.blitFramebuffer&&Y.blitFramebuffer.dispose()}},G.prototype.disposeAll=function(U){var L=this.managedFramebuffers;this.managedFramebuffers=[];for(var Y=0;Y<L.length;Y++)this.disposeFramebuffer(L[Y],U)},G.prototype.forceStencil=function(){var U=this.current;if(!!U){var L=U.glFramebuffers[this.CONTEXT_UID];if(!(!L||L.stencil)){U.stencil=!0;var Y=U.width,X=U.height,W=this.gl,z=W.createRenderbuffer();W.bindRenderbuffer(W.RENDERBUFFER,z),L.msaaBuffer?W.renderbufferStorageMultisample(W.RENDERBUFFER,L.multisample,W.DEPTH24_STENCIL8,Y,X):W.renderbufferStorage(W.RENDERBUFFER,W.DEPTH_STENCIL,Y,X),L.stencil=z,W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.RENDERBUFFER,z)}}},G.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle$1},G.prototype.destroy=function(){this.renderer=null},G}(),byteSizeMap$2={5126:4,5123:2,5121:1},GeometrySystem$1=function(){function G(U){this.renderer=U,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return G.prototype.contextChange=function(){this.disposeAll(!0);var U=this.gl=this.renderer.gl,L=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,L.webGLVersion!==2){var Y=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(Y=null),Y?(U.createVertexArray=function(){return Y.createVertexArrayOES()},U.bindVertexArray=function(W){return Y.bindVertexArrayOES(W)},U.deleteVertexArray=function(W){return Y.deleteVertexArrayOES(W)}):(this.hasVao=!1,U.createVertexArray=function(){return null},U.bindVertexArray=function(){return null},U.deleteVertexArray=function(){return null})}if(L.webGLVersion!==2){var X=U.getExtension("ANGLE_instanced_arrays");X?(U.vertexAttribDivisor=function(W,z){return X.vertexAttribDivisorANGLE(W,z)},U.drawElementsInstanced=function(W,z,J,Z,ee){return X.drawElementsInstancedANGLE(W,z,J,Z,ee)},U.drawArraysInstanced=function(W,z,J,Z){return X.drawArraysInstancedANGLE(W,z,J,Z)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=L.webGLVersion===2||!!L.extensions.uint32ElementIndex},G.prototype.bind=function(U,L){L=L||this.renderer.shader.shader;var Y=this.gl,X=U.glVertexArrayObjects[this.CONTEXT_UID],W=!1;X||(this.managedGeometries[U.id]=U,U.disposeRunner.add(this),U.glVertexArrayObjects[this.CONTEXT_UID]=X={},W=!0);var z=X[L.program.id]||this.initGeometryVao(U,L,W);this._activeGeometry=U,this._activeVao!==z&&(this._activeVao=z,this.hasVao?Y.bindVertexArray(z):this.activateVao(U,L.program)),this.updateBuffers()},G.prototype.reset=function(){this.unbind()},G.prototype.updateBuffers=function(){for(var U=this._activeGeometry,L=this.renderer.buffer,Y=0;Y<U.buffers.length;Y++){var X=U.buffers[Y];L.update(X)}},G.prototype.checkCompatibility=function(U,L){var Y=U.attributes,X=L.attributeData;for(var W in X)if(!Y[W])throw new Error('shader and geometry incompatible, geometry missing the "'+W+'" attribute')},G.prototype.getSignature=function(U,L){var Y=U.attributes,X=L.attributeData,W=["g",U.id];for(var z in Y)X[z]&&W.push(z,X[z].location);return W.join("-")},G.prototype.initGeometryVao=function(U,L,Y){Y===void 0&&(Y=!0);var X=this.gl,W=this.CONTEXT_UID,z=this.renderer.buffer,J=L.program;J.glPrograms[W]||this.renderer.shader.generateProgram(L),this.checkCompatibility(U,J);var Z=this.getSignature(U,J),ee=U.glVertexArrayObjects[this.CONTEXT_UID],te=ee[Z];if(te)return ee[J.id]=te,te;var re=U.buffers,ie=U.attributes,ne={},oe={};for(var se in re)ne[se]=0,oe[se]=0;for(var se in ie)!ie[se].size&&J.attributeData[se]?ie[se].size=J.attributeData[se].size:ie[se].size||console.warn("PIXI Geometry attribute '"+se+"' size cannot be determined (likely the bound shader does not have the attribute)"),ne[ie[se].buffer]+=ie[se].size*byteSizeMap$2[ie[se].type];for(var se in ie){var ae=ie[se],le=ae.size;ae.stride===void 0&&(ne[ae.buffer]===le*byteSizeMap$2[ae.type]?ae.stride=0:ae.stride=ne[ae.buffer]),ae.start===void 0&&(ae.start=oe[ae.buffer],oe[ae.buffer]+=le*byteSizeMap$2[ae.type])}te=X.createVertexArray(),X.bindVertexArray(te);for(var ue=0;ue<re.length;ue++){var ce=re[ue];z.bind(ce),Y&&ce._glBuffers[W].refCount++}return this.activateVao(U,J),this._activeVao=te,ee[J.id]=te,ee[Z]=te,te},G.prototype.disposeGeometry=function(U,L){var Y;if(!!this.managedGeometries[U.id]){delete this.managedGeometries[U.id];var X=U.glVertexArrayObjects[this.CONTEXT_UID],W=this.gl,z=U.buffers,J=(Y=this.renderer)===null||Y===void 0?void 0:Y.buffer;if(U.disposeRunner.remove(this),!!X){if(J)for(var Z=0;Z<z.length;Z++){var ee=z[Z]._glBuffers[this.CONTEXT_UID];ee&&(ee.refCount--,ee.refCount===0&&!L&&J.dispose(z[Z],L))}if(!L){for(var te in X)if(te[0]==="g"){var re=X[te];this._activeVao===re&&this.unbind(),W.deleteVertexArray(re)}}delete U.glVertexArrayObjects[this.CONTEXT_UID]}}},G.prototype.disposeAll=function(U){for(var L=Object.keys(this.managedGeometries),Y=0;Y<L.length;Y++)this.disposeGeometry(this.managedGeometries[L[Y]],U)},G.prototype.activateVao=function(U,L){var Y=this.gl,X=this.CONTEXT_UID,W=this.renderer.buffer,z=U.buffers,J=U.attributes;U.indexBuffer&&W.bind(U.indexBuffer);var Z=null;for(var ee in J){var te=J[ee],re=z[te.buffer],ie=re._glBuffers[X];if(L.attributeData[ee]){Z!==ie&&(W.bind(re),Z=ie);var ne=L.attributeData[ee].location;if(Y.enableVertexAttribArray(ne),Y.vertexAttribPointer(ne,te.size,te.type||Y.FLOAT,te.normalized,te.stride,te.start),te.instance)if(this.hasInstance)Y.vertexAttribDivisor(ne,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},G.prototype.draw=function(U,L,Y,X){var W=this.gl,z=this._activeGeometry;if(z.indexBuffer){var J=z.indexBuffer.data.BYTES_PER_ELEMENT,Z=J===2?W.UNSIGNED_SHORT:W.UNSIGNED_INT;J===2||J===4&&this.canUseUInt32ElementIndex?z.instanced?W.drawElementsInstanced(U,L||z.indexBuffer.data.length,Z,(Y||0)*J,X||1):W.drawElements(U,L||z.indexBuffer.data.length,Z,(Y||0)*J):console.warn("unsupported index buffer type: uint32")}else z.instanced?W.drawArraysInstanced(U,Y,L||z.getSize(),X||1):W.drawArrays(U,Y,L||z.getSize());return this},G.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},G.prototype.destroy=function(){this.renderer=null},G}(),MaskData$1=function(){function G(U){U===void 0&&(U=null),this.type=MASK_TYPES$4.NONE,this.autoDetect=!0,this.maskObject=U||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings$1.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(G.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(U){U?this._filters?this._filters[0]=U:this._filters=[U]:this._filters=null},enumerable:!1,configurable:!0}),G.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$4.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},G.prototype.copyCountersOrReset=function(U){U?(this._stencilCounter=U._stencilCounter,this._scissorCounter=U._scissorCounter,this._scissorRect=U._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},G}();function compileShader$1(G,U,L){var Y=G.createShader(U);return G.shaderSource(Y,L),G.compileShader(Y),Y}function logPrettyShaderError$1(G,U){var L=G.getShaderSource(U).split(`
`).map(function(ee,te){return te+": "+ee}),Y=G.getShaderInfoLog(U),X=Y.split(`
`),W={},z=X.map(function(ee){return parseFloat(ee.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(ee){return ee&&!W[ee]?(W[ee]=!0,!0):!1}),J=[""];z.forEach(function(ee){L[ee-1]="%c"+L[ee-1]+"%c",J.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var Z=L.join(`
`);J[0]=Z,console.error(Y),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,J),console.groupEnd()}function logProgramError$1(G,U,L,Y){G.getProgramParameter(U,G.LINK_STATUS)||(G.getShaderParameter(L,G.COMPILE_STATUS)||logPrettyShaderError$1(G,L),G.getShaderParameter(Y,G.COMPILE_STATUS)||logPrettyShaderError$1(G,Y),console.error("PixiJS Error: Could not initialize shader."),G.getProgramInfoLog(U)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",G.getProgramInfoLog(U)))}function booleanArray$1(G){for(var U=new Array(G),L=0;L<U.length;L++)U[L]=!1;return U}function defaultValue$1(G,U){switch(G){case"float":return 0;case"vec2":return new Float32Array(2*U);case"vec3":return new Float32Array(3*U);case"vec4":return new Float32Array(4*U);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*U);case"ivec3":return new Int32Array(3*U);case"ivec4":return new Int32Array(4*U);case"uvec2":return new Uint32Array(2*U);case"uvec3":return new Uint32Array(3*U);case"uvec4":return new Uint32Array(4*U);case"bool":return!1;case"bvec2":return booleanArray$1(2*U);case"bvec3":return booleanArray$1(3*U);case"bvec4":return booleanArray$1(4*U);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext$1={},context$1=unknownContext$1;function getTestContext$1(){if(context$1===unknownContext$1||context$1&&context$1.isContextLost()){var G=document.createElement("canvas"),U=void 0;settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(U=G.getContext("webgl2",{})),U||(U=G.getContext("webgl",{})||G.getContext("experimental-webgl",{}),U?U.getExtension("WEBGL_draw_buffers"):U=null),context$1=U}return context$1}var maxFragmentPrecision$1;function getMaxFragmentPrecision$1(){if(!maxFragmentPrecision$1){maxFragmentPrecision$1=PRECISION$4.MEDIUM;var G=getTestContext$1();if(G&&G.getShaderPrecisionFormat){var U=G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.HIGH_FLOAT);maxFragmentPrecision$1=U.precision?PRECISION$4.HIGH:PRECISION$4.MEDIUM}}return maxFragmentPrecision$1}function setPrecision$1(G,U,L){if(G.substring(0,9)!=="precision"){var Y=U;return U===PRECISION$4.HIGH&&L!==PRECISION$4.HIGH&&(Y=PRECISION$4.MEDIUM),"precision "+Y+` float;
`+G}else if(L!==PRECISION$4.HIGH&&G.substring(0,15)==="precision highp")return G.replace("precision highp","precision mediump");return G}var GLSL_TO_SIZE$1={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize$1(G){return GLSL_TO_SIZE$1[G]}var GL_TABLE$1=null,GL_TO_GLSL_TYPES$1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType$1(G,U){if(!GL_TABLE$1){var L=Object.keys(GL_TO_GLSL_TYPES$1);GL_TABLE$1={};for(var Y=0;Y<L.length;++Y){var X=L[Y];GL_TABLE$1[G[X]]=GL_TO_GLSL_TYPES$1[X]}}return GL_TABLE$1[U]}var uniformParsers$1=[{test:function(G){return G.type==="float"&&G.size===1},code:function(G){return`
            if(uv["`+G+'"] !== ud["'+G+`"].value)
            {
                ud["`+G+'"].value = uv["'+G+`"]
                gl.uniform1f(ud["`+G+'"].location, uv["'+G+`"])
            }
            `}},{test:function(G){return(G.type==="sampler2D"||G.type==="samplerCube"||G.type==="sampler2DArray")&&G.size===1&&!G.isArray},code:function(G){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+G+`"], t);

            if(ud["`+G+`"].value !== t)
            {
                ud["`+G+`"].value = t;
                gl.uniform1i(ud["`+G+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(G,U){return G.type==="mat3"&&G.size===1&&U.a!==void 0},code:function(G){return`
            gl.uniformMatrix3fv(ud["`+G+'"].location, false, uv["'+G+`"].toArray(true));
            `},codeUbo:function(G){return`
                var `+G+"_matrix = uv."+G+`.toArray(true);

                data[offset] = `+G+`_matrix[0];
                data[offset+1] = `+G+`_matrix[1];
                data[offset+2] = `+G+`_matrix[2];
        
                data[offset + 4] = `+G+`_matrix[3];
                data[offset + 5] = `+G+`_matrix[4];
                data[offset + 6] = `+G+`_matrix[5];
        
                data[offset + 8] = `+G+`_matrix[6];
                data[offset + 9] = `+G+`_matrix[7];
                data[offset + 10] = `+G+`_matrix[8];
            `}},{test:function(G,U){return G.type==="vec2"&&G.size===1&&U.x!==void 0},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+G+`"].location, v.x, v.y);
                }`},codeUbo:function(G){return`
                v = uv.`+G+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(G){return G.type==="vec2"&&G.size===1},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+G+`"].location, v[0], v[1]);
                }
            `}},{test:function(G,U){return G.type==="vec4"&&G.size===1&&U.width!==void 0},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+G+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(G){return`
                    v = uv.`+G+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(G){return G.type==="vec4"&&G.size===1},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+G+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED$1={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},GLSL_TO_ARRAY_SETTERS$1={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync$1(G,U){var L,Y=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var X in G.uniforms){var W=U[X];if(!W){!((L=G.uniforms[X])===null||L===void 0)&&L.group&&(G.uniforms[X].ubo?Y.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+X+", '"+X+`');
                    `):Y.push(`
                        renderer.shader.syncUniformGroup(uv.`+X+`, syncData);
                    `));continue}for(var z=G.uniforms[X],J=!1,Z=0;Z<uniformParsers$1.length;Z++)if(uniformParsers$1[Z].test(W,z)){Y.push(uniformParsers$1[Z].code(X,z)),J=!0;break}if(!J){var ee=W.size===1?GLSL_TO_SINGLE_SETTERS_CACHED$1:GLSL_TO_ARRAY_SETTERS$1,te=ee[W.type].replace("location",'ud["'+X+'"].location');Y.push(`
            cu = ud["`+X+`"];
            cv = cu.value;
            v = uv["`+X+`"];
            `+te+";")}}return new Function("ud","uv","renderer","syncData",Y.join(`
`))}var fragTemplate$2=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc$1(G){for(var U="",L=0;L<G;++L)L>0&&(U+=`
else `),L<G-1&&(U+="if(test == "+L+".0){}");return U}function checkMaxIfStatementsInShader$1(G,U){if(G===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var L=U.createShader(U.FRAGMENT_SHADER);;){var Y=fragTemplate$2.replace(/%forloop%/gi,generateIfTestSrc$1(G));if(U.shaderSource(L,Y),U.compileShader(L),!U.getShaderParameter(L,U.COMPILE_STATUS))G=G/2|0;else break}return G}var unsafeEval$1;function unsafeEvalSupported$1(){if(typeof unsafeEval$1=="boolean")return unsafeEval$1;try{var G=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval$1=G({a:"b"},"a","b")===!0}catch(U){unsafeEval$1=!1}return unsafeEval$1}var defaultFragment$2$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$1$1=0,nameCache$1={},Program$1=function(){function G(U,L,Y){Y===void 0&&(Y="pixi-shader"),this.id=UID$1$1++,this.vertexSrc=U||G.defaultVertexSrc,this.fragmentSrc=L||G.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(Y=Y.replace(/\s+/g,"-"),nameCache$1[Y]?(nameCache$1[Y]++,Y+="-"+nameCache$1[Y]):nameCache$1[Y]=1,this.vertexSrc="#define SHADER_NAME "+Y+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+Y+`
`+this.fragmentSrc,this.vertexSrc=setPrecision$1(this.vertexSrc,settings$1.PRECISION_VERTEX,PRECISION$4.HIGH),this.fragmentSrc=setPrecision$1(this.fragmentSrc,settings$1.PRECISION_FRAGMENT,getMaxFragmentPrecision$1())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(G,"defaultVertexSrc",{get:function(){return defaultVertex$3$1},enumerable:!1,configurable:!0}),Object.defineProperty(G,"defaultFragmentSrc",{get:function(){return defaultFragment$2$1},enumerable:!1,configurable:!0}),G.from=function(U,L,Y){var X=U+L,W=ProgramCache$1[X];return W||(ProgramCache$1[X]=W=new G(U,L,Y)),W},G}(),Shader$1=function(){function G(U,L){this.uniformBindCount=0,this.program=U,L?L instanceof UniformGroup$1?this.uniformGroup=L:this.uniformGroup=new UniformGroup$1(L):this.uniformGroup=new UniformGroup$1({})}return G.prototype.checkUniformExists=function(U,L){if(L.uniforms[U])return!0;for(var Y in L.uniforms){var X=L.uniforms[Y];if(X.group&&this.checkUniformExists(U,X))return!0}return!1},G.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(G.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),G.from=function(U,L,Y){var X=Program$1.from(U,L);return new G(X,Y)},G}(),BLEND$1$1=0,OFFSET$1$1=1,CULLING$1$1=2,DEPTH_TEST$1$1=3,WINDING$1$1=4,DEPTH_MASK$1$1=5,State$1=function(){function G(){this.data=0,this.blendMode=BLEND_MODES$4.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(G.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND$1$1)},set:function(U){!!(this.data&1<<BLEND$1$1)!==U&&(this.data^=1<<BLEND$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET$1$1)},set:function(U){!!(this.data&1<<OFFSET$1$1)!==U&&(this.data^=1<<OFFSET$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING$1$1)},set:function(U){!!(this.data&1<<CULLING$1$1)!==U&&(this.data^=1<<CULLING$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST$1$1)},set:function(U){!!(this.data&1<<DEPTH_TEST$1$1)!==U&&(this.data^=1<<DEPTH_TEST$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK$1$1)},set:function(U){!!(this.data&1<<DEPTH_MASK$1$1)!==U&&(this.data^=1<<DEPTH_MASK$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING$1$1)},set:function(U){!!(this.data&1<<WINDING$1$1)!==U&&(this.data^=1<<WINDING$1$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"blendMode",{get:function(){return this._blendMode},set:function(U){this.blend=U!==BLEND_MODES$4.NONE,this._blendMode=U},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(U){this.offsets=!!U,this._polygonOffset=U},enumerable:!1,configurable:!0}),G.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},G.for2d=function(){var U=new G;return U.depthTest=!1,U.blend=!0,U},G}(),defaultVertex$2$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultFragment$1$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Filter$1=function(G){__extends$P(U,G);function U(L,Y,X){var W=this,z=Program$1.from(L||U.defaultVertexSrc,Y||U.defaultFragmentSrc);return W=G.call(this,z,X)||this,W.padding=0,W.resolution=settings$1.FILTER_RESOLUTION,W.multisample=settings$1.FILTER_MULTISAMPLE,W.enabled=!0,W.autoFit=!0,W.state=new State$1,W}return U.prototype.apply=function(L,Y,X,W,z){L.applyFilter(this,Y,X,W)},Object.defineProperty(U.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(L){this.state.blendMode=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"resolution",{get:function(){return this._resolution},set:function(L){this._resolution=L},enumerable:!1,configurable:!0}),Object.defineProperty(U,"defaultVertexSrc",{get:function(){return defaultVertex$2$1},enumerable:!1,configurable:!0}),Object.defineProperty(U,"defaultFragmentSrc",{get:function(){return defaultFragment$1$1},enumerable:!1,configurable:!0}),U}(Shader$1),vertex$5=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment$8=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat$2=new Matrix$1,TextureMatrix$1=function(){function G(U,L){this._texture=U,this.mapCoord=new Matrix$1,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof L=="undefined"?.5:L,this.isSimple=!1}return Object.defineProperty(G.prototype,"texture",{get:function(){return this._texture},set:function(U){this._texture=U,this._textureID=-1},enumerable:!1,configurable:!0}),G.prototype.multiplyUvs=function(U,L){L===void 0&&(L=U);for(var Y=this.mapCoord,X=0;X<U.length;X+=2){var W=U[X],z=U[X+1];L[X]=W*Y.a+z*Y.c+Y.tx,L[X+1]=W*Y.b+z*Y.d+Y.ty}return L},G.prototype.update=function(U){var L=this._texture;if(!L||!L.valid||!U&&this._textureID===L._updateID)return!1;this._textureID=L._updateID,this._updateID++;var Y=L._uvs;this.mapCoord.set(Y.x1-Y.x0,Y.y1-Y.y0,Y.x3-Y.x0,Y.y3-Y.y0,Y.x0,Y.y0);var X=L.orig,W=L.trim;W&&(tempMat$2.set(X.width/W.width,0,0,X.height/W.height,-W.x/W.width,-W.y/W.height),this.mapCoord.append(tempMat$2));var z=L.baseTexture,J=this.uClampFrame,Z=this.clampMargin/z.resolution,ee=this.clampOffset;return J[0]=(L._frame.x+Z+ee)/z.width,J[1]=(L._frame.y+Z+ee)/z.height,J[2]=(L._frame.x+L._frame.width-Z+ee)/z.width,J[3]=(L._frame.y+L._frame.height-Z+ee)/z.height,this.uClampOffset[0]=ee/z.realWidth,this.uClampOffset[1]=ee/z.realHeight,this.isSimple=L._frame.width===z.width&&L._frame.height===z.height&&L.rotate===0,!0},G}(),SpriteMaskFilter$1=function(G){__extends$P(U,G);function U(L,Y,X){var W=this,z=null;return typeof L!="string"&&Y===void 0&&X===void 0&&(z=L,L=void 0,Y=void 0,X=void 0),W=G.call(this,L||vertex$5,Y||fragment$8,X)||this,W.maskSprite=z,W.maskMatrix=new Matrix$1,W}return Object.defineProperty(U.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(L){this._maskSprite=L,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),U.prototype.apply=function(L,Y,X,W){var z=this._maskSprite,J=z._texture;!J.valid||(J.uvMatrix||(J.uvMatrix=new TextureMatrix$1(J,0)),J.uvMatrix.update(),this.uniforms.npmAlpha=J.baseTexture.alphaMode?0:1,this.uniforms.mask=J,this.uniforms.otherMatrix=L.calculateSpriteMatrix(this.maskMatrix,z).prepend(J.uvMatrix.mapCoord),this.uniforms.alpha=z.worldAlpha,this.uniforms.maskClamp=J.uvMatrix.uClampFrame,L.applyFilter(this,Y,X,W))},U}(Filter$1),MaskSystem$1=function(){function G(U){this.renderer=U,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return G.prototype.setMaskStack=function(U){this.maskStack=U,this.renderer.scissor.setMaskStack(U),this.renderer.stencil.setMaskStack(U)},G.prototype.push=function(U,L){var Y=L;if(!Y.isMaskData){var X=this.maskDataPool.pop()||new MaskData$1;X.pooled=!0,X.maskObject=L,Y=X}var W=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(Y.copyCountersOrReset(W),Y.autoDetect&&this.detect(Y),Y._target=U,Y.type!==MASK_TYPES$4.SPRITE&&this.maskStack.push(Y),Y.enabled)switch(Y.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.push(Y);break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.push(Y);break;case MASK_TYPES$4.SPRITE:Y.copyCountersOrReset(null),this.pushSpriteMask(Y);break}Y.type===MASK_TYPES$4.SPRITE&&this.maskStack.push(Y)},G.prototype.pop=function(U){var L=this.maskStack.pop();if(!(!L||L._target!==U)){if(L.enabled)switch(L.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.pop();break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.pop(L.maskObject);break;case MASK_TYPES$4.SPRITE:this.popSpriteMask(L);break}if(L.reset(),L.pooled&&this.maskDataPool.push(L),this.maskStack.length!==0){var Y=this.maskStack[this.maskStack.length-1];Y.type===MASK_TYPES$4.SPRITE&&Y._filters&&(Y._filters[0].maskSprite=Y.maskObject)}}},G.prototype.detect=function(U){var L=U.maskObject;L.isSprite?U.type=MASK_TYPES$4.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(U)?U.type=MASK_TYPES$4.SCISSOR:U.type=MASK_TYPES$4.STENCIL},G.prototype.pushSpriteMask=function(U){var L,Y,X=U.maskObject,W=U._target,z=U._filters;z||(z=this.alphaMaskPool[this.alphaMaskIndex],z||(z=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter$1]));var J=this.renderer,Z=J.renderTexture,ee,te;if(Z.current){var re=Z.current;ee=U.resolution||re.resolution,te=(L=U.multisample)!==null&&L!==void 0?L:re.multisample}else ee=U.resolution||J.resolution,te=(Y=U.multisample)!==null&&Y!==void 0?Y:J.multisample;z[0].resolution=ee,z[0].multisample=te,z[0].maskSprite=X;var ie=W.filterArea;W.filterArea=X.getBounds(!0),J.filter.push(W,z),W.filterArea=ie,U._filters||this.alphaMaskIndex++},G.prototype.popSpriteMask=function(U){this.renderer.filter.pop(),U._filters?U._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},G.prototype.destroy=function(){this.renderer=null},G}(),AbstractMaskSystem$1=function(){function G(U){this.renderer=U,this.maskStack=[],this.glConst=0}return G.prototype.getStackLength=function(){return this.maskStack.length},G.prototype.setMaskStack=function(U){var L=this.renderer.gl,Y=this.getStackLength();this.maskStack=U;var X=this.getStackLength();X!==Y&&(X===0?L.disable(this.glConst):(L.enable(this.glConst),this._useCurrent()))},G.prototype._useCurrent=function(){},G.prototype.destroy=function(){this.renderer=null,this.maskStack=null},G}(),tempMatrix$1$1=new Matrix$1,ScissorSystem$1=function(G){__extends$P(U,G);function U(L){var Y=G.call(this,L)||this;return Y.glConst=WebGLRenderingContext.SCISSOR_TEST,Y}return U.prototype.getStackLength=function(){var L=this.maskStack[this.maskStack.length-1];return L?L._scissorCounter:0},U.prototype.calcScissorRect=function(L){if(!L._scissorRectLocal){var Y=L._scissorRect,X=L.maskObject,W=this.renderer,z=W.renderTexture;X.renderable=!0;var J=X.getBounds();this.roundFrameToPixels(J,z.current?z.current.resolution:W.resolution,z.sourceFrame,z.destinationFrame,W.projection.transform),X.renderable=!1,Y&&J.fit(Y),L._scissorRectLocal=J}},U.isMatrixRotated=function(L){if(!L)return!1;var Y=L.a,X=L.b,W=L.c,z=L.d;return(Math.abs(X)>1e-4||Math.abs(W)>1e-4)&&(Math.abs(Y)>1e-4||Math.abs(z)>1e-4)},U.prototype.testScissor=function(L){var Y=L.maskObject;if(!Y.isFastRect||!Y.isFastRect()||U.isMatrixRotated(Y.worldTransform)||U.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(L);var X=L._scissorRectLocal;return X.width>0&&X.height>0},U.prototype.roundFrameToPixels=function(L,Y,X,W,z){U.isMatrixRotated(z)||(z=z?tempMatrix$1$1.copyFrom(z):tempMatrix$1$1.identity(),z.translate(-X.x,-X.y).scale(W.width/X.width,W.height/X.height).translate(W.x,W.y),this.renderer.filter.transformAABB(z,L),L.fit(W),L.x=Math.round(L.x*Y),L.y=Math.round(L.y*Y),L.width=Math.round(L.width*Y),L.height=Math.round(L.height*Y))},U.prototype.push=function(L){L._scissorRectLocal||this.calcScissorRect(L);var Y=this.renderer.gl;L._scissorRect||Y.enable(Y.SCISSOR_TEST),L._scissorCounter++,L._scissorRect=L._scissorRectLocal,this._useCurrent()},U.prototype.pop=function(){var L=this.renderer.gl;this.getStackLength()>0?this._useCurrent():L.disable(L.SCISSOR_TEST)},U.prototype._useCurrent=function(){var L=this.maskStack[this.maskStack.length-1]._scissorRect,Y;this.renderer.renderTexture.current?Y=L.y:Y=this.renderer.height-L.height-L.y,this.renderer.gl.scissor(L.x,Y,L.width,L.height)},U}(AbstractMaskSystem$1),StencilSystem$1=function(G){__extends$P(U,G);function U(L){var Y=G.call(this,L)||this;return Y.glConst=WebGLRenderingContext.STENCIL_TEST,Y}return U.prototype.getStackLength=function(){var L=this.maskStack[this.maskStack.length-1];return L?L._stencilCounter:0},U.prototype.push=function(L){var Y=L.maskObject,X=this.renderer.gl,W=L._stencilCounter;W===0&&(this.renderer.framebuffer.forceStencil(),X.clearStencil(0),X.clear(X.STENCIL_BUFFER_BIT),X.enable(X.STENCIL_TEST)),L._stencilCounter++,X.colorMask(!1,!1,!1,!1),X.stencilFunc(X.EQUAL,W,4294967295),X.stencilOp(X.KEEP,X.KEEP,X.INCR),Y.renderable=!0,Y.render(this.renderer),this.renderer.batch.flush(),Y.renderable=!1,this._useCurrent()},U.prototype.pop=function(L){var Y=this.renderer.gl;this.getStackLength()===0?Y.disable(Y.STENCIL_TEST):(Y.colorMask(!1,!1,!1,!1),Y.stencilOp(Y.KEEP,Y.KEEP,Y.DECR),L.renderable=!0,L.render(this.renderer),this.renderer.batch.flush(),L.renderable=!1,this._useCurrent())},U.prototype._useCurrent=function(){var L=this.renderer.gl;L.colorMask(!0,!0,!0,!0),L.stencilFunc(L.EQUAL,this.getStackLength(),4294967295),L.stencilOp(L.KEEP,L.KEEP,L.KEEP)},U}(AbstractMaskSystem$1),ProjectionSystem$1=function(){function G(U){this.renderer=U,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix$1,this.transform=null}return G.prototype.update=function(U,L,Y,X){this.destinationFrame=U||this.destinationFrame||this.defaultFrame,this.sourceFrame=L||this.sourceFrame||U,this.calculateProjection(this.destinationFrame,this.sourceFrame,Y,X),this.transform&&this.projectionMatrix.append(this.transform);var W=this.renderer;W.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,W.globalUniforms.update(),W.shader.shader&&W.shader.syncUniformGroup(W.shader.shader.uniforms.globals)},G.prototype.calculateProjection=function(U,L,Y,X){var W=this.projectionMatrix,z=X?-1:1;W.identity(),W.a=1/L.width*2,W.d=z*(1/L.height*2),W.tx=-1-L.x*W.a,W.ty=-z-L.y*W.d},G.prototype.setTransform=function(U){},G.prototype.destroy=function(){this.renderer=null},G}(),tempRect$1=new Rectangle$1,tempRect2$1=new Rectangle$1,RenderTextureSystem$1=function(){function G(U){this.renderer=U,this.clearColor=U._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle$1,this.destinationFrame=new Rectangle$1,this.viewportFrame=new Rectangle$1}return G.prototype.bind=function(U,L,Y){U===void 0&&(U=null);var X=this.renderer;this.current=U;var W,z,J;U?(W=U.baseTexture,J=W.resolution,L||(tempRect$1.width=U.frame.width,tempRect$1.height=U.frame.height,L=tempRect$1),Y||(tempRect2$1.x=U.frame.x,tempRect2$1.y=U.frame.y,tempRect2$1.width=L.width,tempRect2$1.height=L.height,Y=tempRect2$1),z=W.framebuffer):(J=X.resolution,L||(tempRect$1.width=X.screen.width,tempRect$1.height=X.screen.height,L=tempRect$1),Y||(Y=tempRect$1,Y.width=L.width,Y.height=L.height));var Z=this.viewportFrame;Z.x=Y.x*J,Z.y=Y.y*J,Z.width=Y.width*J,Z.height=Y.height*J,U||(Z.y=X.view.height-(Z.y+Z.height)),Z.ceil(),this.renderer.framebuffer.bind(z,Z),this.renderer.projection.update(Y,L,J,!z),U?this.renderer.mask.setMaskStack(W.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(L),this.destinationFrame.copyFrom(Y)},G.prototype.clear=function(U,L){this.current?U=U||this.current.baseTexture.clearColor:U=U||this.clearColor;var Y=this.destinationFrame,X=this.current?this.current.baseTexture:this.renderer.screen,W=Y.width!==X.width||Y.height!==X.height;if(W){var z=this.viewportFrame,J=z.x,Z=z.y,ee=z.width,te=z.height;J=Math.round(J),Z=Math.round(Z),ee=Math.round(ee),te=Math.round(te),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(J,Z,ee,te)}this.renderer.framebuffer.clear(U[0],U[1],U[2],U[3],L),W&&this.renderer.scissor.pop()},G.prototype.resize=function(){this.bind(null)},G.prototype.reset=function(){this.bind(null)},G.prototype.destroy=function(){this.renderer=null},G}();function uboUpdate$1(G,U,L,Y,X){L.buffer.update(X)}var UBO_TO_SINGLE_SETTERS$1={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE$1={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements$1(G){for(var U=G.map(function(Z){return{data:Z,offset:0,dataLen:0,dirty:0}}),L=0,Y=0,X=0,W=0;W<U.length;W++){var z=U[W];if(L=GLSL_TO_STD40_SIZE$1[z.data.type],z.data.size>1&&(L=Math.max(L,16)*z.data.size),z.dataLen=L,Y%L!==0&&Y<16){var J=Y%L%16;Y+=J,X+=J}Y+L>16?(X=Math.ceil(X/16)*16,z.offset=X,X+=L,Y=L):(z.offset=X,Y+=L,X+=L)}return X=Math.ceil(X/16)*16,{uboElements:U,size:X}}function getUBOData$1(G,U){var L=[];for(var Y in G)U[Y]&&L.push(U[Y]);return L.sort(function(X,W){return X.index-W.index}),L}function generateUniformBufferSync$1(G,U){if(!G.autoManage)return{size:0,syncFunc:uboUpdate$1};for(var L=getUBOData$1(G.uniforms,U),Y=createUBOElements$1(L),X=Y.uboElements,W=Y.size,z=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],J=0;J<X.length;J++){for(var Z=X[J],ee=G.uniforms[Z.data.name],te=Z.data.name,re=!1,ie=0;ie<uniformParsers$1.length;ie++){var ne=uniformParsers$1[ie];if(ne.codeUbo&&ne.test(Z.data,ee)){z.push("offset = "+Z.offset/4+";",uniformParsers$1[ie].codeUbo(Z.data.name,ee)),re=!0;break}}if(!re)if(Z.data.size>1){var oe=mapSize$1(Z.data.type),se=Math.max(GLSL_TO_STD40_SIZE$1[Z.data.type]/16,1),ae=oe/se,le=(4-ae%4)%4;z.push(`
                cv = ud.`+te+`.value;
                v = uv.`+te+`;
                offset = `+Z.offset/4+`;

                t = 0;

                for(var i=0; i < `+Z.data.size*se+`; i++)
                {
                    for(var j = 0; j < `+ae+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+le+`;
                }

                `)}else{var ue=UBO_TO_SINGLE_SETTERS$1[Z.data.type];z.push(`
                cv = ud.`+te+`.value;
                v = uv.`+te+`;
                offset = `+Z.offset/4+`;
                `+ue+`;
                `)}}return z.push(`
       renderer.buffer.update(buffer);
    `),{size:W,syncFunc:new Function("ud","uv","renderer","syncData","buffer",z.join(`
`))}}var IGLUniformData=function(){function G(){}return G}(),GLProgram$1=function(){function G(U,L){this.program=U,this.uniformData=L,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return G.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},G}();function getAttributeData$1(G,U){for(var L={},Y=U.getProgramParameter(G,U.ACTIVE_ATTRIBUTES),X=0;X<Y;X++){var W=U.getActiveAttrib(G,X);if(W.name.indexOf("gl_")!==0){var z=mapType$1(U,W.type),J={type:z,name:W.name,size:mapSize$1(z),location:U.getAttribLocation(G,W.name)};L[W.name]=J}}return L}function getUniformData$1(G,U){for(var L={},Y=U.getProgramParameter(G,U.ACTIVE_UNIFORMS),X=0;X<Y;X++){var W=U.getActiveUniform(G,X),z=W.name.replace(/\[.*?\]$/,""),J=!!W.name.match(/\[.*?\]$/),Z=mapType$1(U,W.type);L[z]={name:z,index:X,type:Z,size:W.size,isArray:J,value:defaultValue$1(Z,W.size)}}return L}function generateProgram$1(G,U){var L=compileShader$1(G,G.VERTEX_SHADER,U.vertexSrc),Y=compileShader$1(G,G.FRAGMENT_SHADER,U.fragmentSrc),X=G.createProgram();if(G.attachShader(X,L),G.attachShader(X,Y),G.linkProgram(X),G.getProgramParameter(X,G.LINK_STATUS)||logProgramError$1(G,X,L,Y),U.attributeData=getAttributeData$1(X,G),U.uniformData=getUniformData$1(X,G),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(U.vertexSrc)){var W=Object.keys(U.attributeData);W.sort(function(te,re){return te>re?1:-1});for(var z=0;z<W.length;z++)U.attributeData[W[z]].location=z,G.bindAttribLocation(X,z,W[z]);G.linkProgram(X)}G.deleteShader(L),G.deleteShader(Y);var J={};for(var z in U.uniformData){var Z=U.uniformData[z];J[z]={location:G.getUniformLocation(X,z),value:defaultValue$1(Z.type,Z.size)}}var ee=new GLProgram$1(X,J);return ee}var UID$5=0,defaultSyncData$1={textureCount:0,uboCount:0},ShaderSystem$1=function(){function G(U){this.destroyed=!1,this.renderer=U,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID$5++}return G.prototype.systemCheck=function(){if(!unsafeEvalSupported$1())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},G.prototype.contextChange=function(U){this.gl=U,this.reset()},G.prototype.bind=function(U,L){U.uniforms.globals=this.renderer.globalUniforms;var Y=U.program,X=Y.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(U);return this.shader=U,this.program!==Y&&(this.program=Y,this.gl.useProgram(X.program)),L||(defaultSyncData$1.textureCount=0,defaultSyncData$1.uboCount=0,this.syncUniformGroup(U.uniformGroup,defaultSyncData$1)),X},G.prototype.setUniforms=function(U){var L=this.shader.program,Y=L.glPrograms[this.renderer.CONTEXT_UID];L.syncUniforms(Y.uniformData,U,this.renderer)},G.prototype.syncUniformGroup=function(U,L){var Y=this.getGlProgram();(!U.static||U.dirtyId!==Y.uniformDirtyGroups[U.id])&&(Y.uniformDirtyGroups[U.id]=U.dirtyId,this.syncUniforms(U,Y,L))},G.prototype.syncUniforms=function(U,L,Y){var X=U.syncUniforms[this.shader.program.id]||this.createSyncGroups(U);X(L.uniformData,U.uniforms,this.renderer,Y)},G.prototype.createSyncGroups=function(U){var L=this.getSignature(U,this.shader.program.uniformData,"u");return this.cache[L]||(this.cache[L]=generateUniformsSync$1(U,this.shader.program.uniformData)),U.syncUniforms[this.shader.program.id]=this.cache[L],U.syncUniforms[this.shader.program.id]},G.prototype.syncUniformBufferGroup=function(U,L){var Y=this.getGlProgram();if(!U.static||U.dirtyId!==0||!Y.uniformGroups[U.id]){U.dirtyId=0;var X=Y.uniformGroups[U.id]||this.createSyncBufferGroup(U,Y,L);U.buffer.update(),X(Y.uniformData,U.uniforms,this.renderer,defaultSyncData$1,U.buffer)}this.renderer.buffer.bindBufferBase(U.buffer,Y.uniformBufferBindings[L])},G.prototype.createSyncBufferGroup=function(U,L,Y){var X=this.renderer.gl;this.renderer.buffer.bind(U.buffer);var W=this.gl.getUniformBlockIndex(L.program,Y);L.uniformBufferBindings[Y]=this.shader.uniformBindCount,X.uniformBlockBinding(L.program,W,this.shader.uniformBindCount),this.shader.uniformBindCount++;var z=this.getSignature(U,this.shader.program.uniformData,"ubo"),J=this._uboCache[z];if(J||(J=this._uboCache[z]=generateUniformBufferSync$1(U,this.shader.program.uniformData)),U.autoManage){var Z=new Float32Array(J.size/4);U.buffer.update(Z)}return L.uniformGroups[U.id]=J.syncFunc,L.uniformGroups[U.id]},G.prototype.getSignature=function(U,L,Y){var X=U.uniforms,W=[Y+"-"];for(var z in X)W.push(z),L[z]&&W.push(L[z].type);return W.join("-")},G.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},G.prototype.generateProgram=function(U){var L=this.gl,Y=U.program,X=generateProgram$1(L,Y);return Y.glPrograms[this.renderer.CONTEXT_UID]=X,X},G.prototype.reset=function(){this.program=null,this.shader=null},G.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},G}();function mapWebGLBlendModesToPixi$1(G,U){return U===void 0&&(U=[]),U[BLEND_MODES$4.NORMAL]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.ADD]=[G.ONE,G.ONE],U[BLEND_MODES$4.MULTIPLY]=[G.DST_COLOR,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SCREEN]=[G.ONE,G.ONE_MINUS_SRC_COLOR,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.OVERLAY]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DARKEN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.LIGHTEN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR_DODGE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR_BURN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.HARD_LIGHT]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SOFT_LIGHT]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DIFFERENCE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.EXCLUSION]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.HUE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SATURATION]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.LUMINOSITY]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.NONE]=[0,0],U[BLEND_MODES$4.NORMAL_NPM]=[G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.ADD_NPM]=[G.SRC_ALPHA,G.ONE,G.ONE,G.ONE],U[BLEND_MODES$4.SCREEN_NPM]=[G.SRC_ALPHA,G.ONE_MINUS_SRC_COLOR,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SRC_IN]=[G.DST_ALPHA,G.ZERO],U[BLEND_MODES$4.SRC_OUT]=[G.ONE_MINUS_DST_ALPHA,G.ZERO],U[BLEND_MODES$4.SRC_ATOP]=[G.DST_ALPHA,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DST_OVER]=[G.ONE_MINUS_DST_ALPHA,G.ONE],U[BLEND_MODES$4.DST_IN]=[G.ZERO,G.SRC_ALPHA],U[BLEND_MODES$4.DST_OUT]=[G.ZERO,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DST_ATOP]=[G.ONE_MINUS_DST_ALPHA,G.SRC_ALPHA],U[BLEND_MODES$4.XOR]=[G.ONE_MINUS_DST_ALPHA,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SUBTRACT]=[G.ONE,G.ONE,G.ONE,G.ONE,G.FUNC_REVERSE_SUBTRACT,G.FUNC_ADD],U}var BLEND$2=0,OFFSET$2=1,CULLING$2=2,DEPTH_TEST$2=3,WINDING$2=4,DEPTH_MASK$2=5,StateSystem$1=function(){function G(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$4.NONE,this._blendEq=!1,this.map=[],this.map[BLEND$2]=this.setBlend,this.map[OFFSET$2]=this.setOffset,this.map[CULLING$2]=this.setCullFace,this.map[DEPTH_TEST$2]=this.setDepthTest,this.map[WINDING$2]=this.setFrontFace,this.map[DEPTH_MASK$2]=this.setDepthMask,this.checks=[],this.defaultState=new State$1,this.defaultState.blend=!0}return G.prototype.contextChange=function(U){this.gl=U,this.blendModes=mapWebGLBlendModesToPixi$1(U),this.set(this.defaultState),this.reset()},G.prototype.set=function(U){if(U=U||this.defaultState,this.stateId!==U.data){for(var L=this.stateId^U.data,Y=0;L;)L&1&&this.map[Y].call(this,!!(U.data&1<<Y)),L=L>>1,Y++;this.stateId=U.data}for(var Y=0;Y<this.checks.length;Y++)this.checks[Y](this,U)},G.prototype.forceState=function(U){U=U||this.defaultState;for(var L=0;L<this.map.length;L++)this.map[L].call(this,!!(U.data&1<<L));for(var L=0;L<this.checks.length;L++)this.checks[L](this,U);this.stateId=U.data},G.prototype.setBlend=function(U){this.updateCheck(G.checkBlendMode,U),this.gl[U?"enable":"disable"](this.gl.BLEND)},G.prototype.setOffset=function(U){this.updateCheck(G.checkPolygonOffset,U),this.gl[U?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},G.prototype.setDepthTest=function(U){this.gl[U?"enable":"disable"](this.gl.DEPTH_TEST)},G.prototype.setDepthMask=function(U){this.gl.depthMask(U)},G.prototype.setCullFace=function(U){this.gl[U?"enable":"disable"](this.gl.CULL_FACE)},G.prototype.setFrontFace=function(U){this.gl.frontFace(this.gl[U?"CW":"CCW"])},G.prototype.setBlendMode=function(U){if(U!==this.blendMode){this.blendMode=U;var L=this.blendModes[U],Y=this.gl;L.length===2?Y.blendFunc(L[0],L[1]):Y.blendFuncSeparate(L[0],L[1],L[2],L[3]),L.length===6?(this._blendEq=!0,Y.blendEquationSeparate(L[4],L[5])):this._blendEq&&(this._blendEq=!1,Y.blendEquationSeparate(Y.FUNC_ADD,Y.FUNC_ADD))}},G.prototype.setPolygonOffset=function(U,L){this.gl.polygonOffset(U,L)},G.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},G.prototype.updateCheck=function(U,L){var Y=this.checks.indexOf(U);L&&Y===-1?this.checks.push(U):!L&&Y!==-1&&this.checks.splice(Y,1)},G.checkBlendMode=function(U,L){U.setBlendMode(L.blendMode)},G.checkPolygonOffset=function(U,L){U.setPolygonOffset(1,L.polygonOffset)},G.prototype.destroy=function(){this.gl=null},G}(),TextureGCSystem$1=function(){function G(U){this.renderer=U,this.count=0,this.checkCount=0,this.maxIdle=settings$1.GC_MAX_IDLE,this.checkCountMax=settings$1.GC_MAX_CHECK_COUNT,this.mode=settings$1.GC_MODE}return G.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$4.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},G.prototype.run=function(){for(var U=this.renderer.texture,L=U.managedTextures,Y=!1,X=0;X<L.length;X++){var W=L[X];!W.framebuffer&&this.count-W.touched>this.maxIdle&&(U.destroyTexture(W,!0),L[X]=null,Y=!0)}if(Y){for(var z=0,X=0;X<L.length;X++)L[X]!==null&&(L[z++]=L[X]);L.length=z}},G.prototype.unload=function(U){var L=this.renderer.texture,Y=U._texture;Y&&!Y.framebuffer&&L.destroyTexture(Y);for(var X=U.children.length-1;X>=0;X--)this.unload(U.children[X])},G.prototype.destroy=function(){this.renderer=null},G}();function mapTypeAndFormatToInternalFormat$1(G){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se,ae,le,ue,ce,he,fe,de,_e;return"WebGL2RenderingContext"in globalThis&&G instanceof globalThis.WebGL2RenderingContext?_e=(U={},U[TYPES$4.UNSIGNED_BYTE]=(L={},L[FORMATS$4.RGBA]=G.RGBA8,L[FORMATS$4.RGB]=G.RGB8,L[FORMATS$4.RG]=G.RG8,L[FORMATS$4.RED]=G.R8,L[FORMATS$4.RGBA_INTEGER]=G.RGBA8UI,L[FORMATS$4.RGB_INTEGER]=G.RGB8UI,L[FORMATS$4.RG_INTEGER]=G.RG8UI,L[FORMATS$4.RED_INTEGER]=G.R8UI,L[FORMATS$4.ALPHA]=G.ALPHA,L[FORMATS$4.LUMINANCE]=G.LUMINANCE,L[FORMATS$4.LUMINANCE_ALPHA]=G.LUMINANCE_ALPHA,L),U[TYPES$4.BYTE]=(Y={},Y[FORMATS$4.RGBA]=G.RGBA8_SNORM,Y[FORMATS$4.RGB]=G.RGB8_SNORM,Y[FORMATS$4.RG]=G.RG8_SNORM,Y[FORMATS$4.RED]=G.R8_SNORM,Y[FORMATS$4.RGBA_INTEGER]=G.RGBA8I,Y[FORMATS$4.RGB_INTEGER]=G.RGB8I,Y[FORMATS$4.RG_INTEGER]=G.RG8I,Y[FORMATS$4.RED_INTEGER]=G.R8I,Y),U[TYPES$4.UNSIGNED_SHORT]=(X={},X[FORMATS$4.RGBA_INTEGER]=G.RGBA16UI,X[FORMATS$4.RGB_INTEGER]=G.RGB16UI,X[FORMATS$4.RG_INTEGER]=G.RG16UI,X[FORMATS$4.RED_INTEGER]=G.R16UI,X[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT16,X),U[TYPES$4.SHORT]=(W={},W[FORMATS$4.RGBA_INTEGER]=G.RGBA16I,W[FORMATS$4.RGB_INTEGER]=G.RGB16I,W[FORMATS$4.RG_INTEGER]=G.RG16I,W[FORMATS$4.RED_INTEGER]=G.R16I,W),U[TYPES$4.UNSIGNED_INT]=(z={},z[FORMATS$4.RGBA_INTEGER]=G.RGBA32UI,z[FORMATS$4.RGB_INTEGER]=G.RGB32UI,z[FORMATS$4.RG_INTEGER]=G.RG32UI,z[FORMATS$4.RED_INTEGER]=G.R32UI,z[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT24,z),U[TYPES$4.INT]=(J={},J[FORMATS$4.RGBA_INTEGER]=G.RGBA32I,J[FORMATS$4.RGB_INTEGER]=G.RGB32I,J[FORMATS$4.RG_INTEGER]=G.RG32I,J[FORMATS$4.RED_INTEGER]=G.R32I,J),U[TYPES$4.FLOAT]=(Z={},Z[FORMATS$4.RGBA]=G.RGBA32F,Z[FORMATS$4.RGB]=G.RGB32F,Z[FORMATS$4.RG]=G.RG32F,Z[FORMATS$4.RED]=G.R32F,Z[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT32F,Z),U[TYPES$4.HALF_FLOAT]=(ee={},ee[FORMATS$4.RGBA]=G.RGBA16F,ee[FORMATS$4.RGB]=G.RGB16F,ee[FORMATS$4.RG]=G.RG16F,ee[FORMATS$4.RED]=G.R16F,ee),U[TYPES$4.UNSIGNED_SHORT_5_6_5]=(te={},te[FORMATS$4.RGB]=G.RGB565,te),U[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(re={},re[FORMATS$4.RGBA]=G.RGBA4,re),U[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(ie={},ie[FORMATS$4.RGBA]=G.RGB5_A1,ie),U[TYPES$4.UNSIGNED_INT_2_10_10_10_REV]=(ne={},ne[FORMATS$4.RGBA]=G.RGB10_A2,ne[FORMATS$4.RGBA_INTEGER]=G.RGB10_A2UI,ne),U[TYPES$4.UNSIGNED_INT_10F_11F_11F_REV]=(oe={},oe[FORMATS$4.RGB]=G.R11F_G11F_B10F,oe),U[TYPES$4.UNSIGNED_INT_5_9_9_9_REV]=(se={},se[FORMATS$4.RGB]=G.RGB9_E5,se),U[TYPES$4.UNSIGNED_INT_24_8]=(ae={},ae[FORMATS$4.DEPTH_STENCIL]=G.DEPTH24_STENCIL8,ae),U[TYPES$4.FLOAT_32_UNSIGNED_INT_24_8_REV]=(le={},le[FORMATS$4.DEPTH_STENCIL]=G.DEPTH32F_STENCIL8,le),U):_e=(ue={},ue[TYPES$4.UNSIGNED_BYTE]=(ce={},ce[FORMATS$4.RGBA]=G.RGBA,ce[FORMATS$4.RGB]=G.RGB,ce[FORMATS$4.ALPHA]=G.ALPHA,ce[FORMATS$4.LUMINANCE]=G.LUMINANCE,ce[FORMATS$4.LUMINANCE_ALPHA]=G.LUMINANCE_ALPHA,ce),ue[TYPES$4.UNSIGNED_SHORT_5_6_5]=(he={},he[FORMATS$4.RGB]=G.RGB,he),ue[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(fe={},fe[FORMATS$4.RGBA]=G.RGBA,fe),ue[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(de={},de[FORMATS$4.RGBA]=G.RGBA,de),ue),_e}var GLTexture$1=function(){function G(U){this.texture=U,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$4.UNSIGNED_BYTE,this.internalFormat=FORMATS$4.RGBA,this.samplerType=0}return G}(),TextureSystem$1=function(){function G(U){this.renderer=U,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture$1,this.hasIntegerTextures=!1}return G.prototype.contextChange=function(){var U=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat$1(U);var L=U.getParameter(U.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=L;for(var Y=0;Y<L;Y++)this.boundTextures[Y]=null;this.emptyTextures={};var X=new GLTexture$1(U.createTexture());U.bindTexture(U.TEXTURE_2D,X.texture),U.texImage2D(U.TEXTURE_2D,0,U.RGBA,1,1,0,U.RGBA,U.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[U.TEXTURE_2D]=X,this.emptyTextures[U.TEXTURE_CUBE_MAP]=new GLTexture$1(U.createTexture()),U.bindTexture(U.TEXTURE_CUBE_MAP,this.emptyTextures[U.TEXTURE_CUBE_MAP].texture);for(var Y=0;Y<6;Y++)U.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,U.RGBA,1,1,0,U.RGBA,U.UNSIGNED_BYTE,null);U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MAG_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MIN_FILTER,U.LINEAR);for(var Y=0;Y<this.boundTextures.length;Y++)this.bind(null,Y)},G.prototype.bind=function(U,L){L===void 0&&(L=0);var Y=this.gl;if(U=U==null?void 0:U.castToBaseTexture(),U&&U.valid&&!U.parentTextureArray){U.touched=this.renderer.textureGC.count;var X=U._glTextures[this.CONTEXT_UID]||this.initTexture(U);this.boundTextures[L]!==U&&(this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),Y.bindTexture(U.target,X.texture)),X.dirtyId!==U.dirtyId&&(this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),this.updateTexture(U)),this.boundTextures[L]=U}else this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),Y.bindTexture(Y.TEXTURE_2D,this.emptyTextures[Y.TEXTURE_2D].texture),this.boundTextures[L]=null},G.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var U=0;U<this.boundTextures.length;U++)this.boundTextures[U]=this.unknownTexture},G.prototype.unbind=function(U){var L=this,Y=L.gl,X=L.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var W=0;W<X.length;W++)X[W]===this.unknownTexture&&this.bind(null,W)}for(var W=0;W<X.length;W++)X[W]===U&&(this.currentLocation!==W&&(Y.activeTexture(Y.TEXTURE0+W),this.currentLocation=W),Y.bindTexture(U.target,this.emptyTextures[U.target].texture),X[W]=null)},G.prototype.ensureSamplerType=function(U){var L=this,Y=L.boundTextures,X=L.hasIntegerTextures,W=L.CONTEXT_UID;if(!!X)for(var z=U-1;z>=0;--z){var J=Y[z];if(J){var Z=J._glTextures[W];Z.samplerType!==SAMPLER_TYPES$4.FLOAT&&this.renderer.texture.unbind(J)}}},G.prototype.initTexture=function(U){var L=new GLTexture$1(this.gl.createTexture());return L.dirtyId=-1,U._glTextures[this.CONTEXT_UID]=L,this.managedTextures.push(U),U.on("dispose",this.destroyTexture,this),L},G.prototype.initTextureType=function(U,L){var Y,X;L.internalFormat=(X=(Y=this.internalFormats[U.type])===null||Y===void 0?void 0:Y[U.format])!==null&&X!==void 0?X:U.format,this.webGLVersion===2&&U.type===TYPES$4.HALF_FLOAT?L.type=this.gl.HALF_FLOAT:L.type=U.type},G.prototype.updateTexture=function(U){var L=U._glTextures[this.CONTEXT_UID];if(!!L){var Y=this.renderer;if(this.initTextureType(U,L),U.resource&&U.resource.upload(Y,U,L))L.samplerType!==SAMPLER_TYPES$4.FLOAT&&(this.hasIntegerTextures=!0);else{var X=U.realWidth,W=U.realHeight,z=Y.gl;(L.width!==X||L.height!==W||L.dirtyId<0)&&(L.width=X,L.height=W,z.texImage2D(U.target,0,L.internalFormat,X,W,0,U.format,L.type,null))}U.dirtyStyleId!==L.dirtyStyleId&&this.updateTextureStyle(U),L.dirtyId=U.dirtyId}},G.prototype.destroyTexture=function(U,L){var Y=this.gl;if(U=U.castToBaseTexture(),U._glTextures[this.CONTEXT_UID]&&(this.unbind(U),Y.deleteTexture(U._glTextures[this.CONTEXT_UID].texture),U.off("dispose",this.destroyTexture,this),delete U._glTextures[this.CONTEXT_UID],!L)){var X=this.managedTextures.indexOf(U);X!==-1&&removeItems$1(this.managedTextures,X,1)}},G.prototype.updateTextureStyle=function(U){var L=U._glTextures[this.CONTEXT_UID];!L||((U.mipmap===MIPMAP_MODES$4.POW2||this.webGLVersion!==2)&&!U.isPowerOfTwo?L.mipmap=!1:L.mipmap=U.mipmap>=1,this.webGLVersion!==2&&!U.isPowerOfTwo?L.wrapMode=WRAP_MODES$4.CLAMP:L.wrapMode=U.wrapMode,U.resource&&U.resource.style(this.renderer,U,L)||this.setStyle(U,L),L.dirtyStyleId=U.dirtyStyleId)},G.prototype.setStyle=function(U,L){var Y=this.gl;if(L.mipmap&&U.mipmap!==MIPMAP_MODES$4.ON_MANUAL&&Y.generateMipmap(U.target),Y.texParameteri(U.target,Y.TEXTURE_WRAP_S,L.wrapMode),Y.texParameteri(U.target,Y.TEXTURE_WRAP_T,L.wrapMode),L.mipmap){Y.texParameteri(U.target,Y.TEXTURE_MIN_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR_MIPMAP_LINEAR:Y.NEAREST_MIPMAP_NEAREST);var X=this.renderer.context.extensions.anisotropicFiltering;if(X&&U.anisotropicLevel>0&&U.scaleMode===SCALE_MODES$4.LINEAR){var W=Math.min(U.anisotropicLevel,Y.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT));Y.texParameterf(U.target,X.TEXTURE_MAX_ANISOTROPY_EXT,W)}}else Y.texParameteri(U.target,Y.TEXTURE_MIN_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR:Y.NEAREST);Y.texParameteri(U.target,Y.TEXTURE_MAG_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR:Y.NEAREST)},G.prototype.destroy=function(){this.renderer=null},G}(),_systems$1={__proto__:null,FilterSystem:FilterSystem$1,BatchSystem:BatchSystem$1,ContextSystem:ContextSystem$1,FramebufferSystem:FramebufferSystem$1,GeometrySystem:GeometrySystem$1,MaskSystem:MaskSystem$1,ScissorSystem:ScissorSystem$1,StencilSystem:StencilSystem$1,ProjectionSystem:ProjectionSystem$1,RenderTextureSystem:RenderTextureSystem$1,ShaderSystem:ShaderSystem$1,StateSystem:StateSystem$1,TextureGCSystem:TextureGCSystem$1,TextureSystem:TextureSystem$1},tempMatrix$5=new Matrix$1,AbstractRenderer$1=function(G){__extends$P(U,G);function U(L,Y){L===void 0&&(L=RENDERER_TYPE$4.UNKNOWN);var X=G.call(this)||this;return Y=Object.assign({},settings$1.RENDER_OPTIONS,Y),X.options=Y,X.type=L,X.screen=new Rectangle$1(0,0,Y.width,Y.height),X.view=Y.view||document.createElement("canvas"),X.resolution=Y.resolution||settings$1.RESOLUTION,X.useContextAlpha=Y.useContextAlpha,X.autoDensity=!!Y.autoDensity,X.preserveDrawingBuffer=Y.preserveDrawingBuffer,X.clearBeforeRender=Y.clearBeforeRender,X._backgroundColor=0,X._backgroundColorRgba=[0,0,0,1],X._backgroundColorString="#000000",X.backgroundColor=Y.backgroundColor||X._backgroundColor,X.backgroundAlpha=Y.backgroundAlpha,Y.transparent!==void 0&&(deprecation$1("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),X.useContextAlpha=Y.transparent,X.backgroundAlpha=Y.transparent?0:1),X._lastObjectRendered=null,X.plugins={},X}return U.prototype.initPlugins=function(L){for(var Y in L)this.plugins[Y]=new L[Y](this)},Object.defineProperty(U.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),U.prototype.resize=function(L,Y){this.view.width=Math.round(L*this.resolution),this.view.height=Math.round(Y*this.resolution);var X=this.view.width/this.resolution,W=this.view.height/this.resolution;this.screen.width=X,this.screen.height=W,this.autoDensity&&(this.view.style.width=X+"px",this.view.style.height=W+"px"),this.emit("resize",X,W)},U.prototype.generateTexture=function(L,Y,X,W){Y===void 0&&(Y={}),typeof Y=="number"&&(deprecation$1("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),Y={scaleMode:Y,resolution:X,region:W});var z=Y.region,J=__rest$1(Y,["region"]);W=z||L.getLocalBounds(null,!0),W.width===0&&(W.width=1),W.height===0&&(W.height=1);var Z=RenderTexture$1.create(__assign$u({width:W.width,height:W.height},J));return tempMatrix$5.tx=-W.x,tempMatrix$5.ty=-W.y,this.render(L,{renderTexture:Z,clear:!1,transform:tempMatrix$5,skipUpdateTransform:!!L.parent}),Z},U.prototype.destroy=function(L){for(var Y in this.plugins)this.plugins[Y].destroy(),this.plugins[Y]=null;L&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var X=this;X.plugins=null,X.type=RENDERER_TYPE$4.UNKNOWN,X.view=null,X.screen=null,X._tempDisplayObjectParent=null,X.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(U.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(L){this._backgroundColor=L,this._backgroundColorString=hex2string$1(L),hex2rgb$1(L,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(L){this._backgroundColorRgba[3]=L},enumerable:!1,configurable:!0}),U}(n$4),GLBuffer$1=function(){function G(U){this.buffer=U||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return G}(),BufferSystem$1=function(){function G(U){this.renderer=U,this.managedBuffers={},this.boundBufferBases={}}return G.prototype.destroy=function(){this.renderer=null},G.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},G.prototype.bind=function(U){var L=this,Y=L.gl,X=L.CONTEXT_UID,W=U._glBuffers[X]||this.createGLBuffer(U);Y.bindBuffer(U.type,W.buffer)},G.prototype.bindBufferBase=function(U,L){var Y=this,X=Y.gl,W=Y.CONTEXT_UID;if(this.boundBufferBases[L]!==U){var z=U._glBuffers[W]||this.createGLBuffer(U);this.boundBufferBases[L]=U,X.bindBufferBase(X.UNIFORM_BUFFER,L,z.buffer)}},G.prototype.bindBufferRange=function(U,L,Y){var X=this,W=X.gl,z=X.CONTEXT_UID;Y=Y||0;var J=U._glBuffers[z]||this.createGLBuffer(U);W.bindBufferRange(W.UNIFORM_BUFFER,L||0,J.buffer,Y*256,256)},G.prototype.update=function(U){var L=this,Y=L.gl,X=L.CONTEXT_UID,W=U._glBuffers[X];if(U._updateID!==W.updateID)if(W.updateID=U._updateID,Y.bindBuffer(U.type,W.buffer),W.byteLength>=U.data.byteLength)Y.bufferSubData(U.type,0,U.data);else{var z=U.static?Y.STATIC_DRAW:Y.DYNAMIC_DRAW;W.byteLength=U.data.byteLength,Y.bufferData(U.type,U.data,z)}},G.prototype.dispose=function(U,L){if(!!this.managedBuffers[U.id]){delete this.managedBuffers[U.id];var Y=U._glBuffers[this.CONTEXT_UID],X=this.gl;U.disposeRunner.remove(this),Y&&(L||X.deleteBuffer(Y.buffer),delete U._glBuffers[this.CONTEXT_UID])}},G.prototype.disposeAll=function(U){for(var L=Object.keys(this.managedBuffers),Y=0;Y<L.length;Y++)this.dispose(this.managedBuffers[L[Y]],U)},G.prototype.createGLBuffer=function(U){var L=this,Y=L.CONTEXT_UID,X=L.gl;return U._glBuffers[Y]=new GLBuffer$1(X.createBuffer()),this.managedBuffers[U.id]=U,U.disposeRunner.add(this),U._glBuffers[Y]},G}(),Renderer=function(G){__extends$P(U,G);function U(L){var Y=G.call(this,RENDERER_TYPE$4.WEBGL,L)||this;return L=Y.options,Y.gl=null,Y.CONTEXT_UID=0,Y.runners={destroy:new Runner$1("destroy"),contextChange:new Runner$1("contextChange"),reset:new Runner$1("reset"),update:new Runner$1("update"),postrender:new Runner$1("postrender"),prerender:new Runner$1("prerender"),resize:new Runner$1("resize")},Y.runners.contextChange.add(Y),Y.globalUniforms=new UniformGroup$1({projectionMatrix:new Matrix$1},!0),Y.addSystem(MaskSystem$1,"mask").addSystem(ContextSystem$1,"context").addSystem(StateSystem$1,"state").addSystem(ShaderSystem$1,"shader").addSystem(TextureSystem$1,"texture").addSystem(BufferSystem$1,"buffer").addSystem(GeometrySystem$1,"geometry").addSystem(FramebufferSystem$1,"framebuffer").addSystem(ScissorSystem$1,"scissor").addSystem(StencilSystem$1,"stencil").addSystem(ProjectionSystem$1,"projection").addSystem(TextureGCSystem$1,"textureGC").addSystem(FilterSystem$1,"filter").addSystem(RenderTextureSystem$1,"renderTexture").addSystem(BatchSystem$1,"batch"),Y.initPlugins(U.__plugins),Y.multisample=void 0,L.context?Y.context.initFromContext(L.context):Y.context.initFromOptions({alpha:!!Y.useContextAlpha,antialias:L.antialias,premultipliedAlpha:Y.useContextAlpha&&Y.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:L.preserveDrawingBuffer,powerPreference:Y.options.powerPreference}),Y.renderingToScreen=!0,sayHello$1(Y.context.webGLVersion===2?"WebGL 2":"WebGL 1"),Y.resize(Y.options.width,Y.options.height),Y}return U.create=function(L){if(isWebGLSupported$1())return new U(L);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},U.prototype.contextChange=function(){var L=this.gl,Y;if(this.context.webGLVersion===1){var X=L.getParameter(L.FRAMEBUFFER_BINDING);L.bindFramebuffer(L.FRAMEBUFFER,null),Y=L.getParameter(L.SAMPLES),L.bindFramebuffer(L.FRAMEBUFFER,X)}else{var X=L.getParameter(L.DRAW_FRAMEBUFFER_BINDING);L.bindFramebuffer(L.DRAW_FRAMEBUFFER,null),Y=L.getParameter(L.SAMPLES),L.bindFramebuffer(L.DRAW_FRAMEBUFFER,X)}Y>=MSAA_QUALITY$4.HIGH?this.multisample=MSAA_QUALITY$4.HIGH:Y>=MSAA_QUALITY$4.MEDIUM?this.multisample=MSAA_QUALITY$4.MEDIUM:Y>=MSAA_QUALITY$4.LOW?this.multisample=MSAA_QUALITY$4.LOW:this.multisample=MSAA_QUALITY$4.NONE},U.prototype.addSystem=function(L,Y){var X=new L(this);if(this[Y])throw new Error('Whoops! The name "'+Y+'" is already in use');this[Y]=X;for(var W in this.runners)this.runners[W].add(X);return this},U.prototype.render=function(L,Y){var X,W,z,J;if(Y&&(Y instanceof RenderTexture$1?(deprecation$1("6.0.0","Renderer#render arguments changed, use options instead."),X=Y,W=arguments[2],z=arguments[3],J=arguments[4]):(X=Y.renderTexture,W=Y.clear,z=Y.transform,J=Y.skipUpdateTransform)),this.renderingToScreen=!X,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=z,!this.context.isLost){if(X||(this._lastObjectRendered=L),!J){var Z=L.enableTempParent();L.updateTransform(),L.disableTempParent(Z)}this.renderTexture.bind(X),this.batch.currentRenderer.start(),(W!==void 0?W:this.clearBeforeRender)&&this.renderTexture.clear(),L.render(this),this.batch.currentRenderer.flush(),X&&X.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},U.prototype.generateTexture=function(L,Y,X,W){Y===void 0&&(Y={});var z=G.prototype.generateTexture.call(this,L,Y,X,W);return this.framebuffer.blit(),z},U.prototype.resize=function(L,Y){G.prototype.resize.call(this,L,Y),this.runners.resize.emit(this.screen.height,this.screen.width)},U.prototype.reset=function(){return this.runners.reset.emit(),this},U.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},U.prototype.destroy=function(L){this.runners.destroy.emit();for(var Y in this.runners)this.runners[Y].destroy();G.prototype.destroy.call(this,L),this.gl=null},Object.defineProperty(U.prototype,"extract",{get:function(){return deprecation$1("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),U.registerPlugin=function(L,Y){U.__plugins=U.__plugins||{},U.__plugins[L]=Y},U}(AbstractRenderer$1);function autoDetectRenderer(G){return Renderer.create(G)}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultVertex$1=$defaultVertex,defaultFilterVertex=$defaultFilterVertex,System=function(){function G(U){deprecation$1("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=U}return G.prototype.destroy=function(){this.renderer=null},G}(),BatchDrawCall$1=function(){function G(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$4.TRIANGLES,this.start=0,this.size=0,this.data=null}return G}(),BatchTextureArray$1=function(){function G(){this.elements=[],this.ids=[],this.count=0}return G.prototype.clear=function(){for(var U=0;U<this.count;U++)this.elements[U]=null;this.count=0},G}(),ViewableBuffer$1=function(){function G(U){typeof U=="number"?this.rawBinaryData=new ArrayBuffer(U):U instanceof Uint8Array?this.rawBinaryData=U.buffer:this.rawBinaryData=U,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(G.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),G.prototype.view=function(U){return this[U+"View"]},G.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},G.sizeOf=function(U){switch(U){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(U+" isn't a valid view type")}},G}(),AbstractBatchRenderer$1=function(G){__extends$P(U,G);function U(L){var Y=G.call(this,L)||this;return Y.shaderGenerator=null,Y.geometryClass=null,Y.vertexSize=null,Y.state=State$1.for2d(),Y.size=settings$1.SPRITE_BATCH_SIZE*4,Y._vertexCount=0,Y._indexCount=0,Y._bufferedElements=[],Y._bufferedTextures=[],Y._bufferSize=0,Y._shader=null,Y._packedGeometries=[],Y._packedGeometryPoolSize=2,Y._flushId=0,Y._aBuffers={},Y._iBuffers={},Y.MAX_TEXTURES=1,Y.renderer.on("prerender",Y.onPrerender,Y),L.runners.contextChange.add(Y),Y._dcIndex=0,Y._aIndex=0,Y._iIndex=0,Y._attributeBuffer=null,Y._indexBuffer=null,Y._tempBoundTextures=[],Y}return U.prototype.contextChange=function(){var L=this.renderer.gl;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(L.getParameter(L.MAX_TEXTURE_IMAGE_UNITS),settings$1.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader$1(this.MAX_TEXTURES,L)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var Y=0;Y<this._packedGeometryPoolSize;Y++)this._packedGeometries[Y]=new this.geometryClass;this.initFlushBuffers()},U.prototype.initFlushBuffers=function(){for(var L=U._drawCallPool,Y=U._textureArrayPool,X=this.size/4,W=Math.floor(X/this.MAX_TEXTURES)+1;L.length<X;)L.push(new BatchDrawCall$1);for(;Y.length<W;)Y.push(new BatchTextureArray$1);for(var z=0;z<this.MAX_TEXTURES;z++)this._tempBoundTextures[z]=null},U.prototype.onPrerender=function(){this._flushId=0},U.prototype.render=function(L){!L._texture.valid||(this._vertexCount+L.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=L.vertexData.length/2,this._indexCount+=L.indices.length,this._bufferedTextures[this._bufferSize]=L._texture.baseTexture,this._bufferedElements[this._bufferSize++]=L)},U.prototype.buildTexturesAndDrawCalls=function(){var L=this,Y=L._bufferedTextures,X=L.MAX_TEXTURES,W=U._textureArrayPool,z=this.renderer.batch,J=this._tempBoundTextures,Z=this.renderer.textureGC.count,ee=++BaseTexture$1._globalBatch,te=0,re=W[0],ie=0;z.copyBoundTextures(J,X);for(var ne=0;ne<this._bufferSize;++ne){var oe=Y[ne];Y[ne]=null,oe._batchEnabled!==ee&&(re.count>=X&&(z.boundArray(re,J,ee,X),this.buildDrawCalls(re,ie,ne),ie=ne,re=W[++te],++ee),oe._batchEnabled=ee,oe.touched=Z,re.elements[re.count++]=oe)}re.count>0&&(z.boundArray(re,J,ee,X),this.buildDrawCalls(re,ie,this._bufferSize),++te,++ee);for(var ne=0;ne<J.length;ne++)J[ne]=null;BaseTexture$1._globalBatch=ee},U.prototype.buildDrawCalls=function(L,Y,X){var W=this,z=W._bufferedElements,J=W._attributeBuffer,Z=W._indexBuffer,ee=W.vertexSize,te=U._drawCallPool,re=this._dcIndex,ie=this._aIndex,ne=this._iIndex,oe=te[re];oe.start=this._iIndex,oe.texArray=L;for(var se=Y;se<X;++se){var ae=z[se],le=ae._texture.baseTexture,ue=premultiplyBlendMode$1[le.alphaMode?1:0][ae.blendMode];z[se]=null,Y<se&&oe.blend!==ue&&(oe.size=ne-oe.start,Y=se,oe=te[++re],oe.texArray=L,oe.start=ne),this.packInterleavedGeometry(ae,J,Z,ie,ne),ie+=ae.vertexData.length/2*ee,ne+=ae.indices.length,oe.blend=ue}Y<X&&(oe.size=ne-oe.start,++re),this._dcIndex=re,this._aIndex=ie,this._iIndex=ne},U.prototype.bindAndClearTexArray=function(L){for(var Y=this.renderer.texture,X=0;X<L.count;X++)Y.bind(L.elements[X],L.ids[X]),L.elements[X]=null;L.count=0},U.prototype.updateGeometry=function(){var L=this,Y=L._packedGeometries,X=L._attributeBuffer,W=L._indexBuffer;settings$1.CAN_UPLOAD_SAME_BUFFER?(Y[this._flushId]._buffer.update(X.rawBinaryData),Y[this._flushId]._indexBuffer.update(W),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,Y[this._flushId]=new this.geometryClass),Y[this._flushId]._buffer.update(X.rawBinaryData),Y[this._flushId]._indexBuffer.update(W),this.renderer.geometry.bind(Y[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},U.prototype.drawBatches=function(){for(var L=this._dcIndex,Y=this.renderer,X=Y.gl,W=Y.state,z=U._drawCallPool,J=null,Z=0;Z<L;Z++){var ee=z[Z],te=ee.texArray,re=ee.type,ie=ee.size,ne=ee.start,oe=ee.blend;J!==te&&(J=te,this.bindAndClearTexArray(te)),this.state.blendMode=oe,W.set(this.state),X.drawElements(re,ie,X.UNSIGNED_SHORT,ne*2)}},U.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},U.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings$1.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},U.prototype.stop=function(){this.flush()},U.prototype.destroy=function(){for(var L=0;L<this._packedGeometryPoolSize;L++)this._packedGeometries[L]&&this._packedGeometries[L].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),G.prototype.destroy.call(this)},U.prototype.getAttributeBuffer=function(L){var Y=nextPow2$1(Math.ceil(L/8)),X=log2$1(Y),W=Y*8;this._aBuffers.length<=X&&(this._iBuffers.length=X+1);var z=this._aBuffers[W];return z||(this._aBuffers[W]=z=new ViewableBuffer$1(W*this.vertexSize*4)),z},U.prototype.getIndexBuffer=function(L){var Y=nextPow2$1(Math.ceil(L/12)),X=log2$1(Y),W=Y*12;this._iBuffers.length<=X&&(this._iBuffers.length=X+1);var z=this._iBuffers[X];return z||(this._iBuffers[X]=z=new Uint16Array(W)),z},U.prototype.packInterleavedGeometry=function(L,Y,X,W,z){for(var J=Y.uint32View,Z=Y.float32View,ee=W/this.vertexSize,te=L.uvs,re=L.indices,ie=L.vertexData,ne=L._texture.baseTexture._batchLocation,oe=Math.min(L.worldAlpha,1),se=oe<1&&L._texture.baseTexture.alphaMode?premultiplyTint$1(L._tintRGB,oe):L._tintRGB+(oe*255<<24),ae=0;ae<ie.length;ae+=2)Z[W++]=ie[ae],Z[W++]=ie[ae+1],Z[W++]=te[ae],Z[W++]=te[ae+1],J[W++]=se,Z[W++]=ne;for(var ae=0;ae<re.length;ae++)X[z++]=ee+re[ae]},U._drawCallPool=[],U._textureArrayPool=[],U}(ObjectRenderer$1),BatchShaderGenerator$1=function(){function G(U,L){if(this.vertexSrc=U,this.fragTemplate=L,this.programCache={},this.defaultGroupCache={},L.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(L.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return G.prototype.generateShader=function(U){if(!this.programCache[U]){for(var L=new Int32Array(U),Y=0;Y<U;Y++)L[Y]=Y;this.defaultGroupCache[U]=UniformGroup$1.from({uSamplers:L},!0);var X=this.fragTemplate;X=X.replace(/%count%/gi,""+U),X=X.replace(/%forloop%/gi,this.generateSampleSrc(U)),this.programCache[U]=new Program$1(this.vertexSrc,X)}var W={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix$1,default:this.defaultGroupCache[U]};return new Shader$1(this.programCache[U],W)},G.prototype.generateSampleSrc=function(U){var L="";L+=`
`,L+=`
`;for(var Y=0;Y<U;Y++)Y>0&&(L+=`
else `),Y<U-1&&(L+="if(vTextureId < "+Y+".5)"),L+=`
{`,L+=`
	color = texture2D(uSamplers[`+Y+"], vTextureCoord);",L+=`
}`;return L+=`
`,L+=`
`,L},G}(),BatchGeometry$1=function(G){__extends$P(U,G);function U(L){L===void 0&&(L=!1);var Y=G.call(this)||this;return Y._buffer=new Buffer$1(null,L,!1),Y._indexBuffer=new Buffer$1(null,L,!0),Y.addAttribute("aVertexPosition",Y._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aTextureCoord",Y._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aColor",Y._buffer,4,!0,TYPES$4.UNSIGNED_BYTE).addAttribute("aTextureId",Y._buffer,1,!0,TYPES$4.FLOAT).addIndex(Y._indexBuffer),Y}return U}(Geometry$1),defaultVertex$4=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment$3=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory$1=function(){function G(){}return G.create=function(U){var L=Object.assign({vertex:defaultVertex$4,fragment:defaultFragment$3,geometryClass:BatchGeometry$1,vertexSize:6},U),Y=L.vertex,X=L.fragment,W=L.vertexSize,z=L.geometryClass;return function(J){__extends$P(Z,J);function Z(ee){var te=J.call(this,ee)||this;return te.shaderGenerator=new BatchShaderGenerator$1(Y,X),te.geometryClass=z,te.vertexSize=W,te}return Z}(AbstractBatchRenderer$1)},Object.defineProperty(G,"defaultVertexSrc",{get:function(){return defaultVertex$4},enumerable:!1,configurable:!0}),Object.defineProperty(G,"defaultFragmentTemplate",{get:function(){return defaultFragment$3},enumerable:!1,configurable:!0}),G}(),BatchRenderer=BatchPluginFactory$1.create(),resources$1={},_loop_1$1=function(G){Object.defineProperty(resources$1,G,{get:function(){return deprecation$1("6.0.0","PIXI.systems."+G+" has moved to PIXI."+G),_resources$1[G]}})};for(var name$6 in _resources$1)_loop_1$1(name$6);var systems$1={},_loop_2$1=function(G){Object.defineProperty(systems$1,G,{get:function(){return deprecation$1("6.0.0","PIXI.resources."+G+" has moved to PIXI."+G),_systems$1[G]}})};for(var name$6 in _systems$1)_loop_2$1(name$6);/*!
 * @pixi/app - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Application=function(){function G(U){var L=this;this.stage=new Container$1,U=Object.assign({forceCanvas:!1},U),this.renderer=autoDetectRenderer(U),G._plugins.forEach(function(Y){Y.init.call(L,U)})}return G.registerPlugin=function(U){G._plugins.push(U)},G.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(G.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),G.prototype.destroy=function(U,L){var Y=this,X=G._plugins.slice(0);X.reverse(),X.forEach(function(W){W.destroy.call(Y)}),this.stage.destroy(L),this.stage=null,this.renderer.destroy(U),this.renderer=null},G._plugins=[],G}(),ResizePlugin=function(){function G(){}return G.init=function(U){var L=this;Object.defineProperty(this,"resizeTo",{set:function(Y){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=Y,Y&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!L._resizeTo||(L.cancelResize(),L._resizeId=requestAnimationFrame(function(){return L.resize()}))},this.cancelResize=function(){L._resizeId&&(cancelAnimationFrame(L._resizeId),L._resizeId=null)},this.resize=function(){if(!!L._resizeTo){L.cancelResize();var Y,X;if(L._resizeTo===globalThis.window)Y=globalThis.innerWidth,X=globalThis.innerHeight;else{var W=L._resizeTo,z=W.clientWidth,J=W.clientHeight;Y=z,X=J}L.renderer.resize(Y,X)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=U.resizeTo||null},G.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},G}();Application.registerPlugin(ResizePlugin);/*!
 * @pixi/extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(G){return typeof G!="undefined"&&G.platform==="MacIntel"&&typeof G.maxTouchPoints=="number"&&G.maxTouchPoints>1&&typeof MSStream=="undefined"};function createMatch(G){return function(U){return U.test(G)}}function isMobile$1$1(G){var U={userAgent:"",platform:"",maxTouchPoints:0};!G&&typeof navigator!="undefined"?U={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof G=="string"?U.userAgent=G:G&&G.userAgent&&(U={userAgent:G.userAgent,platform:G.platform,maxTouchPoints:G.maxTouchPoints||0});var L=U.userAgent,Y=L.split("[FBAN");typeof Y[1]!="undefined"&&(L=Y[0]),Y=L.split("Twitter"),typeof Y[1]!="undefined"&&(L=Y[0]);var X=createMatch(L),W={apple:{phone:X(appleIphone)&&!X(windowsPhone),ipod:X(appleIpod),tablet:!X(appleIphone)&&(X(appleTablet)||isAppleTabletOnIos13(U))&&!X(windowsPhone),universal:X(appleUniversal),device:(X(appleIphone)||X(appleIpod)||X(appleTablet)||X(appleUniversal)||isAppleTabletOnIos13(U))&&!X(windowsPhone)},amazon:{phone:X(amazonPhone),tablet:!X(amazonPhone)&&X(amazonTablet),device:X(amazonPhone)||X(amazonTablet)},android:{phone:!X(windowsPhone)&&X(amazonPhone)||!X(windowsPhone)&&X(androidPhone),tablet:!X(windowsPhone)&&!X(amazonPhone)&&!X(androidPhone)&&(X(amazonTablet)||X(androidTablet)),device:!X(windowsPhone)&&(X(amazonPhone)||X(amazonTablet)||X(androidPhone)||X(androidTablet))||X(/\bokhttp\b/i)},windows:{phone:X(windowsPhone),tablet:X(windowsTablet),device:X(windowsPhone)||X(windowsTablet)},other:{blackberry:X(otherBlackBerry),blackberry10:X(otherBlackBerry10),opera:X(otherOpera),firefox:X(otherFirefox),chrome:X(otherChrome),device:X(otherBlackBerry)||X(otherBlackBerry10)||X(otherOpera)||X(otherFirefox)||X(otherChrome)},any:!1,phone:!1,tablet:!1};return W.any=W.apple.device||W.android.device||W.windows.device||W.other.device,W.phone=W.apple.phone||W.android.phone||W.windows.phone,W.tablet=W.apple.tablet||W.android.tablet||W.windows.tablet,W}/*!
 * @pixi/settings - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var isMobile$3=isMobile$1$1(globalThis.navigator);function maxRecommendedTextures(G){var U=!0;if(isMobile$3.tablet||isMobile$3.phone){if(isMobile$3.apple.device){var L=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(L){var Y=parseInt(L[1],10);Y<11&&(U=!1)}}if(isMobile$3.android.device){var L=navigator.userAgent.match(/Android\s([0-9.]*)/);if(L){var Y=parseInt(L[1],10);Y<7&&(U=!1)}}}return U?G:4}function canUploadSameBuffer(){return!isMobile$3.apple.device}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1$1;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$1$1||(ENV$1$1={}));var RENDERER_TYPE$1$1;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1$1||(RENDERER_TYPE$1$1={}));var BUFFER_BITS$1$1;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1$1||(BUFFER_BITS$1$1={}));var BLEND_MODES$1$1;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$1$1||(BLEND_MODES$1$1={}));var DRAW_MODES$1$1;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1$1||(DRAW_MODES$1$1={}));var FORMATS$1$1;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1$1||(FORMATS$1$1={}));var TARGETS$1$1;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1$1||(TARGETS$1$1={}));var TYPES$1$1;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1$1||(TYPES$1$1={}));var SAMPLER_TYPES$1$1;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$1$1||(SAMPLER_TYPES$1$1={}));var SCALE_MODES$1$1;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$1$1||(SCALE_MODES$1$1={}));var WRAP_MODES$1$1;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1$1||(WRAP_MODES$1$1={}));var MIPMAP_MODES$1$1;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1$1||(MIPMAP_MODES$1$1={}));var ALPHA_MODES$1$1;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1$1||(ALPHA_MODES$1$1={}));var CLEAR_MODES$1$1;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$1$1||(CLEAR_MODES$1$1={}));var GC_MODES$1$1;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$1$1||(GC_MODES$1$1={}));var PRECISION$1$1;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$1$1||(PRECISION$1$1={}));var MASK_TYPES$1$1;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$1$1||(MASK_TYPES$1$1={}));var MSAA_QUALITY$1$1;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$1$1||(MSAA_QUALITY$1$1={}));var BUFFER_TYPE$1$1;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1$1||(BUFFER_TYPE$1$1={}));var settings={MIPMAP_TEXTURES:MIPMAP_MODES$1$1.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:MSAA_QUALITY$1$1.NONE,SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:GC_MODES$1$1.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:WRAP_MODES$1$1.CLAMP,SCALE_MODE:SCALE_MODES$1$1.LINEAR,PRECISION_VERTEX:PRECISION$1$1.HIGH,PRECISION_FRAGMENT:isMobile$3.apple.device?PRECISION$1$1.HIGH:PRECISION$1$1.MEDIUM,CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};/*!
 * @pixi/display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings.SORTABLE_CHILDREN=!1;var Bounds=function(){function G(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return G.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},G.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},G.prototype.getRectangle=function(U){return this.minX>this.maxX||this.minY>this.maxY?Rectangle$1.EMPTY:(U=U||new Rectangle$1(0,0,1,1),U.x=this.minX,U.y=this.minY,U.width=this.maxX-this.minX,U.height=this.maxY-this.minY,U)},G.prototype.addPoint=function(U){this.minX=Math.min(this.minX,U.x),this.maxX=Math.max(this.maxX,U.x),this.minY=Math.min(this.minY,U.y),this.maxY=Math.max(this.maxY,U.y)},G.prototype.addPointMatrix=function(U,L){var Y=U.a,X=U.b,W=U.c,z=U.d,J=U.tx,Z=U.ty,ee=Y*L.x+W*L.y+J,te=X*L.x+z*L.y+Z;this.minX=Math.min(this.minX,ee),this.maxX=Math.max(this.maxX,ee),this.minY=Math.min(this.minY,te),this.maxY=Math.max(this.maxY,te)},G.prototype.addQuad=function(U){var L=this.minX,Y=this.minY,X=this.maxX,W=this.maxY,z=U[0],J=U[1];L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[2],J=U[3],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[4],J=U[5],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,z=U[6],J=U[7],L=z<L?z:L,Y=J<Y?J:Y,X=z>X?z:X,W=J>W?J:W,this.minX=L,this.minY=Y,this.maxX=X,this.maxY=W},G.prototype.addFrame=function(U,L,Y,X,W){this.addFrameMatrix(U.worldTransform,L,Y,X,W)},G.prototype.addFrameMatrix=function(U,L,Y,X,W){var z=U.a,J=U.b,Z=U.c,ee=U.d,te=U.tx,re=U.ty,ie=this.minX,ne=this.minY,oe=this.maxX,se=this.maxY,ae=z*L+Z*Y+te,le=J*L+ee*Y+re;ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*X+Z*Y+te,le=J*X+ee*Y+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*L+Z*W+te,le=J*L+ee*W+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,ae=z*X+Z*W+te,le=J*X+ee*W+re,ie=ae<ie?ae:ie,ne=le<ne?le:ne,oe=ae>oe?ae:oe,se=le>se?le:se,this.minX=ie,this.minY=ne,this.maxX=oe,this.maxY=se},G.prototype.addVertexData=function(U,L,Y){for(var X=this.minX,W=this.minY,z=this.maxX,J=this.maxY,Z=L;Z<Y;Z+=2){var ee=U[Z],te=U[Z+1];X=ee<X?ee:X,W=te<W?te:W,z=ee>z?ee:z,J=te>J?te:J}this.minX=X,this.minY=W,this.maxX=z,this.maxY=J},G.prototype.addVertices=function(U,L,Y,X){this.addVerticesMatrix(U.worldTransform,L,Y,X)},G.prototype.addVerticesMatrix=function(U,L,Y,X,W,z){W===void 0&&(W=0),z===void 0&&(z=W);for(var J=U.a,Z=U.b,ee=U.c,te=U.d,re=U.tx,ie=U.ty,ne=this.minX,oe=this.minY,se=this.maxX,ae=this.maxY,le=Y;le<X;le+=2){var ue=L[le],ce=L[le+1],he=J*ue+ee*ce+re,fe=te*ce+Z*ue+ie;ne=Math.min(ne,he-W),se=Math.max(se,he+W),oe=Math.min(oe,fe-z),ae=Math.max(ae,fe+z)}this.minX=ne,this.minY=oe,this.maxX=se,this.maxY=ae},G.prototype.addBounds=function(U){var L=this.minX,Y=this.minY,X=this.maxX,W=this.maxY;this.minX=U.minX<L?U.minX:L,this.minY=U.minY<Y?U.minY:Y,this.maxX=U.maxX>X?U.maxX:X,this.maxY=U.maxY>W?U.maxY:W},G.prototype.addBoundsMask=function(U,L){var Y=U.minX>L.minX?U.minX:L.minX,X=U.minY>L.minY?U.minY:L.minY,W=U.maxX<L.maxX?U.maxX:L.maxX,z=U.maxY<L.maxY?U.maxY:L.maxY;if(Y<=W&&X<=z){var J=this.minX,Z=this.minY,ee=this.maxX,te=this.maxY;this.minX=Y<J?Y:J,this.minY=X<Z?X:Z,this.maxX=W>ee?W:ee,this.maxY=z>te?z:te}},G.prototype.addBoundsMatrix=function(U,L){this.addFrameMatrix(L,U.minX,U.minY,U.maxX,U.maxY)},G.prototype.addBoundsArea=function(U,L){var Y=U.minX>L.x?U.minX:L.x,X=U.minY>L.y?U.minY:L.y,W=U.maxX<L.x+L.width?U.maxX:L.x+L.width,z=U.maxY<L.y+L.height?U.maxY:L.y+L.height;if(Y<=W&&X<=z){var J=this.minX,Z=this.minY,ee=this.maxX,te=this.maxY;this.minX=Y<J?Y:J,this.minY=X<Z?X:Z,this.maxX=W>ee?W:ee,this.maxY=z>te?z:te}},G.prototype.pad=function(U,L){U===void 0&&(U=0),L===void 0&&(L=U),this.isEmpty()||(this.minX-=U,this.maxX+=U,this.minY-=L,this.maxY+=L)},G.prototype.addFramePad=function(U,L,Y,X,W,z){U-=W,L-=z,Y+=W,X+=z,this.minX=this.minX<U?this.minX:U,this.maxX=this.maxX>Y?this.maxX:Y,this.minY=this.minY<L?this.minY:L,this.maxY=this.maxY>X?this.maxY:X},G}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$m=function(G,U){return extendStatics$m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$m(G,U)};function __extends$O(G,U){extendStatics$m(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var DisplayObject=function(G){__extends$O(U,G);function U(){var L=G.call(this)||this;return L.tempDisplayObjectParent=null,L.transform=new Transform,L.alpha=1,L.visible=!0,L.renderable=!0,L.cullable=!1,L.cullArea=null,L.parent=null,L.worldAlpha=1,L._lastSortedIndex=0,L._zIndex=0,L.filterArea=null,L.filters=null,L._enabledFilters=null,L._bounds=new Bounds,L._localBounds=null,L._boundsID=0,L._boundsRect=null,L._localBoundsRect=null,L._mask=null,L._maskRefCount=0,L._destroyed=!1,L.isSprite=!1,L.isMask=!1,L}return U.mixin=function(L){for(var Y=Object.keys(L),X=0;X<Y.length;++X){var W=Y[X];Object.defineProperty(U.prototype,W,Object.getOwnPropertyDescriptor(L,W))}},Object.defineProperty(U.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),U.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},U.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},U.prototype.getBounds=function(L,Y){return L||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),Y||(this._boundsRect||(this._boundsRect=new Rectangle$1),Y=this._boundsRect),this._bounds.getRectangle(Y)},U.prototype.getLocalBounds=function(L){L||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),L=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);var Y=this.transform,X=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var W=this._bounds,z=this._boundsID;this._bounds=this._localBounds;var J=this.getBounds(!1,L);return this.parent=X,this.transform=Y,this._bounds=W,this._bounds.updateID+=this._boundsID-z,J},U.prototype.toGlobal=function(L,Y,X){return X===void 0&&(X=!1),X||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(L,Y)},U.prototype.toLocal=function(L,Y,X,W){return Y&&(L=Y.toGlobal(L,X,W)),W||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(L,X)},U.prototype.setParent=function(L){if(!L||!L.addChild)throw new Error("setParent: Argument must be a Container");return L.addChild(this),L},U.prototype.setTransform=function(L,Y,X,W,z,J,Z,ee,te){return L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=1),W===void 0&&(W=1),z===void 0&&(z=0),J===void 0&&(J=0),Z===void 0&&(Z=0),ee===void 0&&(ee=0),te===void 0&&(te=0),this.position.x=L,this.position.y=Y,this.scale.x=X||1,this.scale.y=W||1,this.rotation=z,this.skew.x=J,this.skew.y=Z,this.pivot.x=ee,this.pivot.y=te,this},U.prototype.destroy=function(L){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(U.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),U.prototype.enableTempParent=function(){var L=this.parent;return this.parent=this._tempDisplayObjectParent,L},U.prototype.disableTempParent=function(L){this.parent=L},Object.defineProperty(U.prototype,"x",{get:function(){return this.position.x},set:function(L){this.transform.position.x=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"y",{get:function(){return this.position.y},set:function(L){this.transform.position.y=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"position",{get:function(){return this.transform.position},set:function(L){this.transform.position.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"scale",{get:function(){return this.transform.scale},set:function(L){this.transform.scale.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(L){this.transform.pivot.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"skew",{get:function(){return this.transform.skew},set:function(L){this.transform.skew.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(L){this.transform.rotation=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"angle",{get:function(){return this.transform.rotation*RAD_TO_DEG},set:function(L){this.transform.rotation=L*DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"zIndex",{get:function(){return this._zIndex},set:function(L){this._zIndex=L,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"worldVisible",{get:function(){var L=this;do{if(!L.visible)return!1;L=L.parent}while(L);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mask",{get:function(){return this._mask},set:function(L){if(this._mask!==L){if(this._mask){var Y=this._mask.maskObject||this._mask;Y._maskRefCount--,Y._maskRefCount===0&&(Y.renderable=!0,Y.isMask=!1)}if(this._mask=L,this._mask){var Y=this._mask.maskObject||this._mask;Y._maskRefCount===0&&(Y.renderable=!1,Y.isMask=!0),Y._maskRefCount++}}},enumerable:!1,configurable:!0}),U}(n$4),TemporaryDisplayObject=function(G){__extends$O(U,G);function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.sortDirty=null,L}return U}(DisplayObject);DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$2;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$2||(ENV$2={}));var RENDERER_TYPE$2;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$2||(RENDERER_TYPE$2={}));var BUFFER_BITS$2;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$2||(BUFFER_BITS$2={}));var BLEND_MODES$2;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$2||(BLEND_MODES$2={}));var DRAW_MODES$2;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$2||(DRAW_MODES$2={}));var FORMATS$2;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$2||(FORMATS$2={}));var TARGETS$2;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$2||(TARGETS$2={}));var TYPES$2;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$2||(TYPES$2={}));var SAMPLER_TYPES$2;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$2||(SAMPLER_TYPES$2={}));var SCALE_MODES$2;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$2||(SCALE_MODES$2={}));var WRAP_MODES$2;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$2||(WRAP_MODES$2={}));var MIPMAP_MODES$2;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$2||(MIPMAP_MODES$2={}));var ALPHA_MODES$2;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$2||(ALPHA_MODES$2={}));var CLEAR_MODES$2;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$2||(CLEAR_MODES$2={}));var GC_MODES$2;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$2||(GC_MODES$2={}));var PRECISION$2;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$2||(PRECISION$2={}));var MASK_TYPES$2;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$2||(MASK_TYPES$2={}));var MSAA_QUALITY$2;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$2||(MSAA_QUALITY$2={}));var BUFFER_TYPE$2;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$2||(BUFFER_TYPE$2={}));function sortChildren(G,U){return G.zIndex===U.zIndex?G._lastSortedIndex-U._lastSortedIndex:G.zIndex-U.zIndex}var Container=function(G){__extends$O(U,G);function U(){var L=G.call(this)||this;return L.children=[],L.sortableChildren=settings.SORTABLE_CHILDREN,L.sortDirty=!1,L}return U.prototype.onChildrenChange=function(L){},U.prototype.addChild=function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];if(Y.length>1)for(var W=0;W<Y.length;W++)this.addChild(Y[W]);else{var z=Y[0];z.parent&&z.parent.removeChild(z),z.parent=this,this.sortDirty=!0,z.transform._parentID=-1,this.children.push(z),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",z,this,this.children.length-1),z.emit("added",this)}return Y[0]},U.prototype.addChildAt=function(L,Y){if(Y<0||Y>this.children.length)throw new Error(L+"addChildAt: The index "+Y+" supplied is out of bounds "+this.children.length);return L.parent&&L.parent.removeChild(L),L.parent=this,this.sortDirty=!0,L.transform._parentID=-1,this.children.splice(Y,0,L),this._boundsID++,this.onChildrenChange(Y),L.emit("added",this),this.emit("childAdded",L,this,Y),L},U.prototype.swapChildren=function(L,Y){if(L!==Y){var X=this.getChildIndex(L),W=this.getChildIndex(Y);this.children[X]=Y,this.children[W]=L,this.onChildrenChange(X<W?X:W)}},U.prototype.getChildIndex=function(L){var Y=this.children.indexOf(L);if(Y===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return Y},U.prototype.setChildIndex=function(L,Y){if(Y<0||Y>=this.children.length)throw new Error("The index "+Y+" supplied is out of bounds "+this.children.length);var X=this.getChildIndex(L);removeItems$1(this.children,X,1),this.children.splice(Y,0,L),this.onChildrenChange(Y)},U.prototype.getChildAt=function(L){if(L<0||L>=this.children.length)throw new Error("getChildAt: Index ("+L+") does not exist.");return this.children[L]},U.prototype.removeChild=function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];if(Y.length>1)for(var W=0;W<Y.length;W++)this.removeChild(Y[W]);else{var z=Y[0],J=this.children.indexOf(z);if(J===-1)return null;z.parent=null,z.transform._parentID=-1,removeItems$1(this.children,J,1),this._boundsID++,this.onChildrenChange(J),z.emit("removed",this),this.emit("childRemoved",z,this,J)}return Y[0]},U.prototype.removeChildAt=function(L){var Y=this.getChildAt(L);return Y.parent=null,Y.transform._parentID=-1,removeItems$1(this.children,L,1),this._boundsID++,this.onChildrenChange(L),Y.emit("removed",this),this.emit("childRemoved",Y,this,L),Y},U.prototype.removeChildren=function(L,Y){L===void 0&&(L=0),Y===void 0&&(Y=this.children.length);var X=L,W=Y,z=W-X,J;if(z>0&&z<=W){J=this.children.splice(X,z);for(var Z=0;Z<J.length;++Z)J[Z].parent=null,J[Z].transform&&(J[Z].transform._parentID=-1);this._boundsID++,this.onChildrenChange(L);for(var Z=0;Z<J.length;++Z)J[Z].emit("removed",this),this.emit("childRemoved",J[Z],this,Z);return J}else if(z===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},U.prototype.sortChildren=function(){for(var L=!1,Y=0,X=this.children.length;Y<X;++Y){var W=this.children[Y];W._lastSortedIndex=Y,!L&&W.zIndex!==0&&(L=!0)}L&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1},U.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var L=0,Y=this.children.length;L<Y;++L){var X=this.children[L];X.visible&&X.updateTransform()}},U.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var L=0;L<this.children.length;L++){var Y=this.children[L];if(!(!Y.visible||!Y.renderable))if(Y.calculateBounds(),Y._mask){var X=Y._mask.maskObject||Y._mask;X.calculateBounds(),this._bounds.addBoundsMask(Y._bounds,X._bounds)}else Y.filterArea?this._bounds.addBoundsArea(Y._bounds,Y.filterArea):this._bounds.addBounds(Y._bounds)}this._bounds.updateID=this._boundsID},U.prototype.getLocalBounds=function(L,Y){Y===void 0&&(Y=!1);var X=G.prototype.getLocalBounds.call(this,L);if(!Y)for(var W=0,z=this.children.length;W<z;++W){var J=this.children[W];J.visible&&J.updateTransform()}return X},U.prototype._calculateBounds=function(){},U.prototype._renderWithCulling=function(L){var Y=L.renderTexture.sourceFrame;if(Y.width>0&&Y.height>0){var X,W;if(this.cullArea?(X=this.cullArea,W=this.worldTransform):this._render!==U.prototype._render&&(X=this.getBounds(!0)),X&&Y.intersects(X,W))this._render(L);else if(this.cullArea)return;for(var z=0,J=this.children.length;z<J;++z){var Z=this.children[z],ee=Z.cullable;Z.cullable=ee||!this.cullArea,Z.render(L),Z.cullable=ee}}},U.prototype.render=function(L){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(L);else if(this.cullable)this._renderWithCulling(L);else{this._render(L);for(var Y=0,X=this.children.length;Y<X;++Y)this.children[Y].render(L)}},U.prototype.renderAdvanced=function(L){var Y=this.filters,X=this._mask;if(Y){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var W=0;W<Y.length;W++)Y[W].enabled&&this._enabledFilters.push(Y[W])}var z=Y&&this._enabledFilters&&this._enabledFilters.length||X&&(!X.isMaskData||X.enabled&&(X.autoDetect||X.type!==MASK_TYPES$2.NONE));if(z&&L.batch.flush(),Y&&this._enabledFilters&&this._enabledFilters.length&&L.filter.push(this,this._enabledFilters),X&&L.mask.push(this,this._mask),this.cullable)this._renderWithCulling(L);else{this._render(L);for(var W=0,J=this.children.length;W<J;++W)this.children[W].render(L)}z&&L.batch.flush(),X&&L.mask.pop(this),Y&&this._enabledFilters&&this._enabledFilters.length&&L.filter.pop()},U.prototype._render=function(L){},U.prototype.destroy=function(L){G.prototype.destroy.call(this),this.sortDirty=!1;var Y=typeof L=="boolean"?L:L&&L.children,X=this.removeChildren(0,this.children.length);if(Y)for(var W=0;W<X.length;++W)X[W].destroy(L)},Object.defineProperty(U.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(L){var Y=this.getLocalBounds().width;Y!==0?this.scale.x=L/Y:this.scale.x=1,this._width=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(L){var Y=this.getLocalBounds().height;Y!==0?this.scale.y=L/Y:this.scale.y=1,this._height=L},enumerable:!1,configurable:!0}),U}(DisplayObject);Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;var TEMP_RECT$1=new Rectangle$1,BYTES_PER_PIXEL=4,Extract=function(){function G(U){this.renderer=U}return G.prototype.image=function(U,L,Y){var X=new Image;return X.src=this.base64(U,L,Y),X},G.prototype.base64=function(U,L,Y){return this.canvas(U).toDataURL(L,Y)},G.prototype.canvas=function(U){var L=this.renderer,Y,X,W=!1,z,J=!1;U&&(U instanceof RenderTexture$1?z=U:(z=this.renderer.generateTexture(U),J=!0)),z?(Y=z.baseTexture.resolution,X=z.frame,W=!1,L.renderTexture.bind(z)):(Y=this.renderer.resolution,W=!0,X=TEMP_RECT$1,X.width=this.renderer.width,X.height=this.renderer.height,L.renderTexture.bind(null));var Z=Math.floor(X.width*Y+1e-4),ee=Math.floor(X.height*Y+1e-4),te=new CanvasRenderTarget(Z,ee,1),re=new Uint8Array(BYTES_PER_PIXEL*Z*ee),ie=L.gl;ie.readPixels(X.x*Y,X.y*Y,Z,ee,ie.RGBA,ie.UNSIGNED_BYTE,re);var ne=te.context.getImageData(0,0,Z,ee);if(G.arrayPostDivide(re,ne.data),te.context.putImageData(ne,0,0),W){var oe=new CanvasRenderTarget(te.width,te.height,1);oe.context.scale(1,-1),oe.context.drawImage(te.canvas,0,-ee),te.destroy(),te=oe}return J&&z.destroy(!0),te.canvas},G.prototype.pixels=function(U,L){var Y=this.renderer,X,W,z,J=!1;U&&(U instanceof RenderTexture$1?z=U:U instanceof DisplayObject&&(z=this.renderer.generateTexture(U),J=!0)),z?L?(X=L.resolution,W=z.frame,Y.renderTexture.bind(z)):(X=z.baseTexture.resolution,W=z.frame,Y.renderTexture.bind(z)):L?(X=L.resolution,W=TEMP_RECT$1,W.width=L.width,W.height=L.height,Y.renderTexture.bind(null)):(X=Y.resolution,W=TEMP_RECT$1,W.width=Y.width,W.height=Y.height,Y.renderTexture.bind(null));var Z=W.width*X,ee=W.height*X,te=new Uint8Array(BYTES_PER_PIXEL*Z*ee),re=Y.gl;return re.readPixels(W.x*X,W.y*X,Z,ee,re.RGBA,re.UNSIGNED_BYTE,te),J&&z.destroy(!0),G.arrayPostDivide(te,te),te},G.prototype.destroy=function(){this.renderer=null},G.arrayPostDivide=function(U,L){for(var Y=0;Y<U.length;Y+=4){var X=L[Y+3]=U[Y+3];X!==0?(L[Y]=Math.round(Math.min(U[Y]*255/X,255)),L[Y+1]=Math.round(Math.min(U[Y+1]*255/X,255)),L[Y+2]=Math.round(Math.min(U[Y+2]*255/X,255))):(L[Y]=U[Y],L[Y+1]=U[Y+1],L[Y+2]=U[Y+2])}},G}();/*!
 * @pixi/loaders - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var SignalBinding=function(){function G(U,L,Y){L===void 0&&(L=!1),this._fn=U,this._once=L,this._thisArg=Y,this._next=this._prev=this._owner=null}return G.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},G}();function _addSignalBinding(G,U){return G._head?(G._tail._next=U,U._prev=G._tail,G._tail=U):(G._head=U,G._tail=U),U._owner=G,U}var Signal=function(){function G(){this._head=this._tail=void 0}return G.prototype.handlers=function(U){U===void 0&&(U=!1);var L=this._head;if(U)return!!L;for(var Y=[];L;)Y.push(L),L=L._next;return Y},G.prototype.has=function(U){if(!(U instanceof SignalBinding))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return U._owner===this},G.prototype.dispatch=function(){for(var U=arguments,L=[],Y=0;Y<arguments.length;Y++)L[Y]=U[Y];var X=this._head;if(!X)return!1;for(;X;)X._once&&this.detach(X),X._fn.apply(X._thisArg,L),X=X._next;return!0},G.prototype.add=function(U,L){if(L===void 0&&(L=null),typeof U!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(U,!1,L))},G.prototype.once=function(U,L){if(L===void 0&&(L=null),typeof U!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return _addSignalBinding(this,new SignalBinding(U,!0,L))},G.prototype.detach=function(U){if(!(U instanceof SignalBinding))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return U._owner!==this?this:(U._prev&&(U._prev._next=U._next),U._next&&(U._next._prev=U._prev),U===this._head?(this._head=U._next,U._next===null&&(this._tail=null)):U===this._tail&&(this._tail=U._prev,this._tail._next=null),U._owner=null,this)},G.prototype.detachAll=function(){var U=this._head;if(!U)return this;for(this._head=this._tail=null;U;)U._owner=null,U=U._next;return this},G}();function parseUri(G,U){U=U||{};for(var L={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Y=L.parser[U.strictMode?"strict":"loose"].exec(G),X={},W=14;W--;)X[L.key[W]]=Y[W]||"";return X[L.q.name]={},X[L.key[12]].replace(L.q.parser,function(z,J,Z){J&&(X[L.q.name][J]=Z)}),X}var useXdr,tempAnchor$1=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2;function _noop$1(){}function setExtMap(G,U,L){U&&U.indexOf(".")===0&&(U=U.substring(1)),U&&(G[U]=L)}function reqType(G){return G.toString().replace("object ","")}var LoaderResource=function(){function G(U,L,Y){if(this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof U!="string"||typeof L!="string")throw new Error("Both name and url are required for constructing a resource.");Y=Y||{},this._flags=0,this._setFlag(G.STATUS_FLAGS.DATA_URL,L.indexOf("data:")===0),this.name=U,this.url=L,this.extension=this._getExtension(),this.data=null,this.crossOrigin=Y.crossOrigin===!0?"anonymous":Y.crossOrigin,this.timeout=Y.timeout||0,this.loadType=Y.loadType||this._determineLoadType(),this.xhrType=Y.xhrType,this.metadata=Y.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=G.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop$1,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Signal,this.onProgress=new Signal,this.onComplete=new Signal,this.onAfterMiddleware=new Signal}return G.setExtensionLoadType=function(U,L){setExtMap(G._loadTypeMap,U,L)},G.setExtensionXhrType=function(U,L){setExtMap(G._xhrTypeMap,U,L)},Object.defineProperty(G.prototype,"isDataUrl",{get:function(){return this._hasFlag(G.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"isComplete",{get:function(){return this._hasFlag(G.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"isLoading",{get:function(){return this._hasFlag(G.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),G.prototype.complete=function(){this._clearEvents(),this._finish()},G.prototype.abort=function(U){if(!this.error){if(this.error=new Error(U),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=G.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},G.prototype.load=function(U){var L=this;if(!this.isLoading){if(this.isComplete){U&&setTimeout(function(){return U(L)},1);return}else U&&this.onComplete.once(U);switch(this._setFlag(G.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case G.LOAD_TYPE.IMAGE:this.type=G.TYPE.IMAGE,this._loadElement("image");break;case G.LOAD_TYPE.AUDIO:this.type=G.TYPE.AUDIO,this._loadSourceElement("audio");break;case G.LOAD_TYPE.VIDEO:this.type=G.TYPE.VIDEO,this._loadSourceElement("video");break;case G.LOAD_TYPE.XHR:default:typeof useXdr=="undefined"&&(useXdr=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},G.prototype._hasFlag=function(U){return(this._flags&U)!==0},G.prototype._setFlag=function(U,L){this._flags=L?this._flags|U:this._flags&~U},G.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},G.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(G.STATUS_FLAGS.COMPLETE,!0),this._setFlag(G.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},G.prototype._loadElement=function(U){this.metadata.loadElement?this.data=this.metadata.loadElement:U==="image"&&typeof globalThis.Image!="undefined"?this.data=new Image:this.data=document.createElement(U),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},G.prototype._loadSourceElement=function(U){if(this.metadata.loadElement?this.data=this.metadata.loadElement:U==="audio"&&typeof globalThis.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(U),this.data===null){this.abort("Unsupported element: "+U);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var L=this.metadata.mimeType,Y=0;Y<this.url.length;++Y)this.data.appendChild(this._createSource(U,this.url[Y],Array.isArray(L)?L[Y]:L));else{var L=this.metadata.mimeType;this.data.appendChild(this._createSource(U,this.url,Array.isArray(L)?L[0]:L))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},G.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var U=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(U.withCredentials=!0),U.open("GET",this.url,!0),U.timeout=this.timeout,this.xhrType===G.XHR_RESPONSE_TYPE.JSON||this.xhrType===G.XHR_RESPONSE_TYPE.DOCUMENT?U.responseType=G.XHR_RESPONSE_TYPE.TEXT:U.responseType=this.xhrType,U.addEventListener("error",this._boundXhrOnError,!1),U.addEventListener("timeout",this._boundXhrOnTimeout,!1),U.addEventListener("abort",this._boundXhrOnAbort,!1),U.addEventListener("progress",this._boundOnProgress,!1),U.addEventListener("load",this._boundXhrOnLoad,!1),U.send()},G.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var U=this.xhr=new globalThis.XDomainRequest;U.timeout=this.timeout||5e3,U.onerror=this._boundXhrOnError,U.ontimeout=this._boundXhrOnTimeout,U.onprogress=this._boundOnProgress,U.onload=this._boundXhrOnLoad,U.open("GET",this.url,!0),setTimeout(function(){return U.send()},1)},G.prototype._createSource=function(U,L,Y){Y||(Y=U+"/"+this._getExtension(L));var X=document.createElement("source");return X.src=L,X.type=Y,X},G.prototype._onError=function(U){this.abort("Failed to load element using: "+U.target.nodeName)},G.prototype._onProgress=function(U){U&&U.lengthComputable&&this.onProgress.dispatch(this,U.loaded/U.total)},G.prototype._onTimeout=function(){this.abort("Load timed out.")},G.prototype._xhrOnError=function(){var U=this.xhr;this.abort(reqType(U)+" Request failed. Status: "+U.status+', text: "'+U.statusText+'"')},G.prototype._xhrOnTimeout=function(){var U=this.xhr;this.abort(reqType(U)+" Request timed out.")},G.prototype._xhrOnAbort=function(){var U=this.xhr;this.abort(reqType(U)+" Request was aborted by the user.")},G.prototype._xhrOnLoad=function(){var U=this.xhr,L="",Y=typeof U.status=="undefined"?STATUS_OK:U.status;(U.responseType===""||U.responseType==="text"||typeof U.responseType=="undefined")&&(L=U.responseText),Y===STATUS_NONE&&(L.length>0||U.responseType===G.XHR_RESPONSE_TYPE.BUFFER)?Y=STATUS_OK:Y===STATUS_IE_BUG_EMPTY&&(Y=STATUS_EMPTY);var X=Y/100|0;if(X===STATUS_TYPE_OK)if(this.xhrType===G.XHR_RESPONSE_TYPE.TEXT)this.data=L,this.type=G.TYPE.TEXT;else if(this.xhrType===G.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(L),this.type=G.TYPE.JSON}catch(J){this.abort("Error trying to parse loaded json: "+J);return}else if(this.xhrType===G.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var W=new DOMParser;this.data=W.parseFromString(L,"text/xml")}else{var z=document.createElement("div");z.innerHTML=L,this.data=z}this.type=G.TYPE.XML}catch(J){this.abort("Error trying to parse loaded xml: "+J);return}else this.data=U.response||L;else{this.abort("["+U.status+"] "+U.statusText+": "+U.responseURL);return}this.complete()},G.prototype._determineCrossOrigin=function(U,L){if(U.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";L=L||globalThis.location,tempAnchor$1||(tempAnchor$1=document.createElement("a")),tempAnchor$1.href=U;var Y=parseUri(tempAnchor$1.href,{strictMode:!0}),X=!Y.port&&L.port===""||Y.port===L.port,W=Y.protocol?Y.protocol+":":"";return Y.host!==L.hostname||!X||W!==L.protocol?"anonymous":""},G.prototype._determineXhrType=function(){return G._xhrTypeMap[this.extension]||G.XHR_RESPONSE_TYPE.TEXT},G.prototype._determineLoadType=function(){return G._loadTypeMap[this.extension]||G.LOAD_TYPE.XHR},G.prototype._getExtension=function(U){U===void 0&&(U=this.url);var L="";if(this.isDataUrl){var Y=U.indexOf("/");L=U.substring(Y+1,U.indexOf(";",Y))}else{var X=U.indexOf("?"),W=U.indexOf("#"),z=Math.min(X>-1?X:U.length,W>-1?W:U.length);U=U.substring(0,z),L=U.substring(U.lastIndexOf(".")+1)}return L.toLowerCase()},G.prototype._getMimeFromXhrType=function(U){switch(U){case G.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case G.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case G.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case G.XHR_RESPONSE_TYPE.JSON:return"application/json";case G.XHR_RESPONSE_TYPE.DEFAULT:case G.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},G}();(function(G){(function(U){U[U.NONE=0]="NONE",U[U.DATA_URL=1]="DATA_URL",U[U.COMPLETE=2]="COMPLETE",U[U.LOADING=4]="LOADING"})(G.STATUS_FLAGS||(G.STATUS_FLAGS={})),function(U){U[U.UNKNOWN=0]="UNKNOWN",U[U.JSON=1]="JSON",U[U.XML=2]="XML",U[U.IMAGE=3]="IMAGE",U[U.AUDIO=4]="AUDIO",U[U.VIDEO=5]="VIDEO",U[U.TEXT=6]="TEXT"}(G.TYPE||(G.TYPE={})),function(U){U[U.XHR=1]="XHR",U[U.IMAGE=2]="IMAGE",U[U.AUDIO=3]="AUDIO",U[U.VIDEO=4]="VIDEO"}(G.LOAD_TYPE||(G.LOAD_TYPE={})),function(U){U.DEFAULT="text",U.BUFFER="arraybuffer",U.BLOB="blob",U.DOCUMENT="document",U.JSON="json",U.TEXT="text"}(G.XHR_RESPONSE_TYPE||(G.XHR_RESPONSE_TYPE={})),G._loadTypeMap={gif:G.LOAD_TYPE.IMAGE,png:G.LOAD_TYPE.IMAGE,bmp:G.LOAD_TYPE.IMAGE,jpg:G.LOAD_TYPE.IMAGE,jpeg:G.LOAD_TYPE.IMAGE,tif:G.LOAD_TYPE.IMAGE,tiff:G.LOAD_TYPE.IMAGE,webp:G.LOAD_TYPE.IMAGE,tga:G.LOAD_TYPE.IMAGE,svg:G.LOAD_TYPE.IMAGE,"svg+xml":G.LOAD_TYPE.IMAGE,mp3:G.LOAD_TYPE.AUDIO,ogg:G.LOAD_TYPE.AUDIO,wav:G.LOAD_TYPE.AUDIO,mp4:G.LOAD_TYPE.VIDEO,webm:G.LOAD_TYPE.VIDEO},G._xhrTypeMap={xhtml:G.XHR_RESPONSE_TYPE.DOCUMENT,html:G.XHR_RESPONSE_TYPE.DOCUMENT,htm:G.XHR_RESPONSE_TYPE.DOCUMENT,xml:G.XHR_RESPONSE_TYPE.DOCUMENT,tmx:G.XHR_RESPONSE_TYPE.DOCUMENT,svg:G.XHR_RESPONSE_TYPE.DOCUMENT,tsx:G.XHR_RESPONSE_TYPE.DOCUMENT,gif:G.XHR_RESPONSE_TYPE.BLOB,png:G.XHR_RESPONSE_TYPE.BLOB,bmp:G.XHR_RESPONSE_TYPE.BLOB,jpg:G.XHR_RESPONSE_TYPE.BLOB,jpeg:G.XHR_RESPONSE_TYPE.BLOB,tif:G.XHR_RESPONSE_TYPE.BLOB,tiff:G.XHR_RESPONSE_TYPE.BLOB,webp:G.XHR_RESPONSE_TYPE.BLOB,tga:G.XHR_RESPONSE_TYPE.BLOB,json:G.XHR_RESPONSE_TYPE.JSON,text:G.XHR_RESPONSE_TYPE.TEXT,txt:G.XHR_RESPONSE_TYPE.TEXT,ttf:G.XHR_RESPONSE_TYPE.BUFFER,otf:G.XHR_RESPONSE_TYPE.BUFFER},G.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(LoaderResource||(LoaderResource={}));function _noop(){}function onlyOnce(G){return function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];if(G===null)throw new Error("Callback was already called.");var W=G;G=null,W.apply(this,Y)}}var AsyncQueueItem=function(){function G(U,L){this.data=U,this.callback=L}return G}(),AsyncQueue=function(){function G(U,L){var Y=this;if(L===void 0&&(L=1),this.workers=0,this.saturated=_noop,this.unsaturated=_noop,this.empty=_noop,this.drain=_noop,this.error=_noop,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(X,W,z){if(z&&typeof z!="function")throw new Error("task callback must be a function");if(Y.started=!0,X==null&&Y.idle()){setTimeout(function(){return Y.drain()},1);return}var J=new AsyncQueueItem(X,typeof z=="function"?z:_noop);W?Y._tasks.unshift(J):Y._tasks.push(J),setTimeout(Y.process,1)},this.process=function(){for(;!Y.paused&&Y.workers<Y.concurrency&&Y._tasks.length;){var X=Y._tasks.shift();Y._tasks.length===0&&Y.empty(),Y.workers+=1,Y.workers===Y.concurrency&&Y.saturated(),Y._worker(X.data,onlyOnce(Y._next(X)))}},this._worker=U,L===0)throw new Error("Concurrency must not be zero");this.concurrency=L,this.buffer=L/4}return G.prototype._next=function(U){var L=this;return function(){for(var Y=arguments,X=[],W=0;W<arguments.length;W++)X[W]=Y[W];L.workers-=1,U.callback.apply(U,X),X[0]!=null&&L.error(X[0],U.data),L.workers<=L.concurrency-L.buffer&&L.unsaturated(),L.idle()&&L.drain(),L.process()}},G.prototype.push=function(U,L){this._insert(U,!1,L)},G.prototype.kill=function(){this.workers=0,this.drain=_noop,this.started=!1,this._tasks=[]},G.prototype.unshift=function(U,L){this._insert(U,!0,L)},G.prototype.length=function(){return this._tasks.length},G.prototype.running=function(){return this.workers},G.prototype.idle=function(){return this._tasks.length+this.workers===0},G.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},G.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var U=1;U<=this.concurrency;U++)this.process()}},G.eachSeries=function(U,L,Y,X){var W=0,z=U.length;function J(Z){if(Z||W===z){Y&&Y(Z);return}X?setTimeout(function(){L(U[W++],J)},1):L(U[W++],J)}J()},G.queue=function(U,L){return new G(U,L)},G}(),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function G(U,L){var Y=this;U===void 0&&(U=""),L===void 0&&(L=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(Z,ee){return Y._loadResource(Z,ee)},this.resources={},this.baseUrl=U,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(Z,ee){return Y._loadResource(Z,ee)},this._queue=AsyncQueue.queue(this._boundLoadResource,L),this._queue.pause(),this.resources={},this.onProgress=new Signal,this.onError=new Signal,this.onLoad=new Signal,this.onStart=new Signal,this.onComplete=new Signal;for(var X=0;X<G._plugins.length;++X){var W=G._plugins[X],z=W.pre,J=W.use;z&&this.pre(z),J&&this.use(J)}this._protected=!1}return G.prototype._add=function(U,L,Y,X){if(this.loading&&(!Y||!Y.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[U])throw new Error('Resource named "'+U+'" already exists.');if(L=this._prepareUrl(L),this.resources[U]=new LoaderResource(U,L,Y),typeof X=="function"&&this.resources[U].onAfterMiddleware.once(X),this.loading){for(var W=Y.parentResource,z=[],J=0;J<W.children.length;++J)W.children[J].isComplete||z.push(W.children[J]);var Z=W.progressChunk*(z.length+1),ee=Z/(z.length+2);W.children.push(this.resources[U]),W.progressChunk=ee;for(var J=0;J<z.length;++J)z[J].progressChunk=ee;this.resources[U].progressChunk=ee}return this._queue.push(this.resources[U]),this},G.prototype.pre=function(U){return this._beforeMiddleware.push(U),this},G.prototype.use=function(U){return this._afterMiddleware.push(U),this},G.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var U in this.resources){var L=this.resources[U];L._onLoadBinding&&L._onLoadBinding.detach(),L.isLoading&&L.abort("loader reset")}return this.resources={},this},G.prototype.load=function(U){if(typeof U=="function"&&this.onComplete.once(U),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var L=this._queue._tasks.length,Y=MAX_PROGRESS/L,X=0;X<this._queue._tasks.length;++X)this._queue._tasks[X].data.progressChunk=Y;this._onStart(),this._queue.resume()}return this},Object.defineProperty(G.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(U){this._queue.concurrency=U},enumerable:!1,configurable:!0}),G.prototype._prepareUrl=function(U){var L=parseUri(U,{strictMode:!0}),Y;if(L.protocol||!L.path||U.indexOf("//")===0?Y=U:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&U.charAt(0)!=="/"?Y=this.baseUrl+"/"+U:Y=this.baseUrl+U,this.defaultQueryString){var X=rgxExtractUrlHash.exec(Y)[0];Y=Y.slice(0,Y.length-X.length),Y.indexOf("?")!==-1?Y+="&"+this.defaultQueryString:Y+="?"+this.defaultQueryString,Y+=X}return Y},G.prototype._loadResource=function(U,L){var Y=this;U._dequeue=L,AsyncQueue.eachSeries(this._beforeMiddleware,function(X,W){X.call(Y,U,function(){W(U.isComplete?{}:null)})},function(){U.isComplete?Y._onLoad(U):(U._onLoadBinding=U.onComplete.once(Y._onLoad,Y),U.load())},!0)},G.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},G.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},G.prototype._onLoad=function(U){var L=this;U._onLoadBinding=null,this._resourcesParsing.push(U),U._dequeue(),AsyncQueue.eachSeries(this._afterMiddleware,function(Y,X){Y.call(L,U,X)},function(){U.onAfterMiddleware.dispatch(U),L.progress=Math.min(MAX_PROGRESS,L.progress+U.progressChunk),L.onProgress.dispatch(L,U),U.error?L.onError.dispatch(U.error,L,U):L.onLoad.dispatch(L,U),L._resourcesParsing.splice(L._resourcesParsing.indexOf(U),1),L._queue.idle()&&L._resourcesParsing.length===0&&L._onComplete()},!0)},G.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(G,"shared",{get:function(){var U=G._shared;return U||(U=new G,U._protected=!0,G._shared=U),U},enumerable:!1,configurable:!0}),G.registerPlugin=function(U){return G._plugins.push(U),U.add&&U.add(),G},G._plugins=[],G}();Loader.prototype.add=function(U,L,Y,X){if(Array.isArray(U)){for(var W=0;W<U.length;++W)this.add(U[W]);return this}if(typeof U=="object"&&(Y=U,X=L||Y.callback||Y.onComplete,L=Y.url,U=Y.name||Y.key||Y.url),typeof L!="string"&&(X=Y,Y=L,L=U),typeof L!="string")throw new Error("No url passed to add resource to loader.");return typeof Y=="function"&&(X=Y,Y=null),this._add(U,L,Y,X)};var AppLoaderPlugin=function(){function G(){}return G.init=function(U){U=Object.assign({sharedLoader:!1},U),this.loader=U.sharedLoader?Loader.shared:new Loader},G.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},G}(),TextureLoader=function(){function G(){}return G.add=function(){LoaderResource.setExtensionLoadType("svg",LoaderResource.LOAD_TYPE.XHR),LoaderResource.setExtensionXhrType("svg",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},G.use=function(U,L){if(U.data&&(U.type===LoaderResource.TYPE.IMAGE||U.extension==="svg")){var Y=U.data,X=U.url,W=U.name,z=U.metadata;Texture$1.fromLoader(Y,X,W,z).then(function(J){U.texture=J,L()}).catch(L)}else L()},G}(),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function encodeBinary(G){for(var U="",L=0;L<G.length;){for(var Y=[0,0,0],X=[0,0,0,0],W=0;W<Y.length;++W)L<G.length?Y[W]=G.charCodeAt(L++)&255:Y[W]=0;X[0]=Y[0]>>2,X[1]=(Y[0]&3)<<4|Y[1]>>4,X[2]=(Y[1]&15)<<2|Y[2]>>6,X[3]=Y[2]&63;var z=L-(G.length-1);switch(z){case 2:X[3]=64,X[2]=64;break;case 1:X[3]=64;break}for(var W=0;W<X.length;++W)U+=_keyStr.charAt(X[W])}return U}function parsing(G,U){if(!G.data){U();return}if(G.xhr&&G.xhrType===LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof G.data=="string"){var L=G.xhr.getResponseHeader("content-type");if(L&&L.indexOf("image")===0){G.data=new Image,G.data.src="data:"+L+";base64,"+encodeBinary(G.xhr.responseText),G.type=LoaderResource.TYPE.IMAGE,G.data.onload=function(){G.data.onload=null,U()};return}}else if(G.data.type.indexOf("image")===0){var Y=globalThis.URL||globalThis.webkitURL,X=Y.createObjectURL(G.data);G.blob=G.data,G.data=new Image,G.data.src=X,G.type=LoaderResource.TYPE.IMAGE,G.data.onload=function(){Y.revokeObjectURL(X),G.data.onload=null,U()};return}}U()}Loader.registerPlugin({use:parsing});Loader.registerPlugin(TextureLoader);/*!
 * @pixi/compressed-textures - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _a$2$1,INTERNAL_FORMATS;(function(G){G[G.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",G[G.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",G[G.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",G[G.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",G[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",G[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",G[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",G[G.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",G[G.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",G[G.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",G[G.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",G[G.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",G[G.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",G[G.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",G[G.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",G[G.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",G[G.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",G[G.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",G[G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",G[G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",G[G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",G[G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",G[G.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",G[G.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",G[G.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",G[G.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(INTERNAL_FORMATS||(INTERNAL_FORMATS={}));var INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=(_a$2$1={},_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,_a$2$1[INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,_a$2$1);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$l=function(G,U){return extendStatics$l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$l(G,U)};function __extends$N(G,U){extendStatics$l(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}function __awaiter$i(G,U,L,Y){return new(L||(L=Promise))(function(X,W){function z(ee){try{Z(Y.next(ee))}catch(te){W(te)}}function J(ee){try{Z(Y.throw(ee))}catch(te){W(te)}}function Z(ee){ee.done?X(ee.value):new L(function(te){te(ee.value)}).then(z,J)}Z((Y=Y.apply(G,U||[])).next())})}function __generator$i(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}}var BlobResource=function(G){__extends$N(U,G);function U(L,Y){Y===void 0&&(Y={width:1,height:1,autoLoad:!0});var X=this,W,z;return typeof L=="string"?(W=L,z=new Uint8Array):(W=null,z=L),X=G.call(this,z,Y)||this,X.origin=W,X.buffer=z?new ViewableBuffer$1(z):null,X.origin&&Y.autoLoad!==!1&&X.load(),z&&z.length&&(X.loaded=!0,X.onBlobLoaded(X.buffer.rawBinaryData)),X}return U.prototype.onBlobLoaded=function(L){},U.prototype.load=function(){return __awaiter$i(this,void 0,Promise,function(){var L,Y,X;return __generator$i(this,function(W){switch(W.label){case 0:return[4,fetch(this.origin)];case 1:return L=W.sent(),[4,L.blob()];case 2:return Y=W.sent(),[4,Y.arrayBuffer()];case 3:return X=W.sent(),this.data=new Uint32Array(X),this.buffer=new ViewableBuffer$1(X),this.loaded=!0,this.onBlobLoaded(X),this.update(),[2,this]}})})},U}(BufferResource$1),CompressedTextureResource=function(G){__extends$N(U,G);function U(L,Y){var X=G.call(this,L,Y)||this;return X.format=Y.format,X.levels=Y.levels||1,X._width=Y.width,X._height=Y.height,X._extension=U._formatToExtension(X.format),(Y.levelBuffers||X.buffer)&&(X._levelBuffers=Y.levelBuffers||U._createLevelBuffers(L instanceof Uint8Array?L:X.buffer.uint8View,X.format,X.levels,4,4,X.width,X.height)),X}return U.prototype.upload=function(L,Y,X){var W=L.gl,z=L.context.extensions[this._extension];if(!z)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var J=0,Z=this.levels;J<Z;J++){var ee=this._levelBuffers[J],te=ee.levelID,re=ee.levelWidth,ie=ee.levelHeight,ne=ee.levelBuffer;W.compressedTexImage2D(W.TEXTURE_2D,te,this.format,re,ie,0,ne)}return!0},U.prototype.onBlobLoaded=function(){this._levelBuffers=U._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},U._formatToExtension=function(L){if(L>=33776&&L<=33779)return"s3tc";if(L>=37488&&L<=37497)return"etc";if(L>=35840&&L<=35843)return"pvrtc";if(L>=36196)return"etc1";if(L>=35986&&L<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},U._createLevelBuffers=function(L,Y,X,W,z,J,Z){for(var ee=new Array(X),te=L.byteOffset,re=J,ie=Z,ne=re+W-1&~(W-1),oe=ie+z-1&~(z-1),se=ne*oe*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[Y],ae=0;ae<X;ae++)ee[ae]={levelID:ae,levelWidth:X>1?re:ne,levelHeight:X>1?ie:oe,levelBuffer:new Uint8Array(L.buffer,te,se)},te+=se,re=re>>1||1,ie=ie>>1||1,ne=re+W-1&~(W-1),oe=ie+z-1&~(z-1),se=ne*oe*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[Y];return ee},U}(BlobResource),CompressedTextureLoader=function(){function G(){}return G.use=function(U,L){var Y=U.data,X=this;if(U.type===LoaderResource.TYPE.JSON&&Y&&Y.cacheID&&Y.textures){for(var W=Y.textures,z=void 0,J=void 0,Z=0,ee=W.length;Z<ee;Z++){var te=W[Z],re=te.src,ie=te.format;if(ie||(J=re),G.textureFormats[ie]){z=re;break}}if(z=z||J,!z){L(new Error("Cannot load compressed-textures in "+U.url+", make sure you provide a fallback"));return}if(z===U.url){L(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var ne={crossOrigin:U.crossOrigin,metadata:U.metadata.imageMetadata,parentResource:U},oe=url$2.resolve(U.url.replace(X.baseUrl,""),z),se=Y.cacheID;X.add(se,oe,ne,function(ae){if(ae.error){L(ae.error);return}var le=ae.texture,ue=le===void 0?null:le,ce=ae.textures,he=ce===void 0?{}:ce;Object.assign(U,{texture:ue,textures:he}),L()})}else L()},Object.defineProperty(G,"textureExtensions",{get:function(){if(!G._textureExtensions){var U=document.createElement("canvas"),L=U.getContext("webgl");if(!L)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var Y={s3tc:L.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:L.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:L.getExtension("WEBGL_compressed_texture_etc"),etc1:L.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:L.getExtension("WEBGL_compressed_texture_pvrtc")||L.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:L.getExtension("WEBGL_compressed_texture_atc"),astc:L.getExtension("WEBGL_compressed_texture_astc")};G._textureExtensions=Y}return G._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(G,"textureFormats",{get:function(){if(!G._textureFormats){var U=G.textureExtensions;G._textureFormats={};for(var L in U){var Y=U[L];!Y||Object.assign(G._textureFormats,Object.getPrototypeOf(Y))}}return G._textureFormats},enumerable:!1,configurable:!0}),G}();function registerCompressedTextures(G,U,L){var Y={textures:{},texture:null};if(!U)return Y;var X=U.map(function(W){return new Texture$1(new BaseTexture$1(W,Object.assign({mipmap:MIPMAP_MODES$4.OFF,alphaMode:ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA},L)))});return X.forEach(function(W,z){var J=W.baseTexture,Z=G+"-"+(z+1);BaseTexture$1.addToCache(J,Z),Texture$1.addToCache(W,Z),z===0&&(BaseTexture$1.addToCache(J,G),Texture$1.addToCache(W,G),Y.texture=W),Y.textures[Z]=W}),Y}var _a$1$3,_b$1;LoaderResource.setExtensionXhrType("dds",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},DXGI_FORMAT;(function(G){G[G.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",G[G.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",G[G.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",G[G.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",G[G.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",G[G.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",G[G.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",G[G.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",G[G.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",G[G.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",G[G.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",G[G.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",G[G.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",G[G.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",G[G.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",G[G.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",G[G.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",G[G.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",G[G.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",G[G.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",G[G.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",G[G.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",G[G.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",G[G.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",G[G.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",G[G.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",G[G.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",G[G.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",G[G.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",G[G.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",G[G.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",G[G.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",G[G.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",G[G.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",G[G.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",G[G.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",G[G.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",G[G.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",G[G.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",G[G.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",G[G.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",G[G.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",G[G.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",G[G.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",G[G.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",G[G.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",G[G.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",G[G.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",G[G.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",G[G.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",G[G.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",G[G.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",G[G.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",G[G.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",G[G.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",G[G.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",G[G.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",G[G.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",G[G.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",G[G.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",G[G.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",G[G.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",G[G.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",G[G.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",G[G.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",G[G.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",G[G.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",G[G.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",G[G.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",G[G.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",G[G.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",G[G.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",G[G.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",G[G.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",G[G.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",G[G.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",G[G.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",G[G.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",G[G.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",G[G.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",G[G.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",G[G.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",G[G.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",G[G.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",G[G.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",G[G.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",G[G.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",G[G.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",G[G.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",G[G.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",G[G.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",G[G.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",G[G.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",G[G.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",G[G.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",G[G.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",G[G.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",G[G.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",G[G.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",G[G.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",G[G.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",G[G.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",G[G.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",G[G.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",G[G.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",G[G.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",G[G.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",G[G.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",G[G.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",G[G.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",G[G.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",G[G.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",G[G.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",G[G.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",G[G.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",G[G.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",G[G.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",G[G.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",G[G.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",G[G.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",G[G.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",G[G.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(DXGI_FORMAT||(DXGI_FORMAT={}));var D3D10_RESOURCE_DIMENSION;(function(G){G[G.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",G[G.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",G[G.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(D3D10_RESOURCE_DIMENSION||(D3D10_RESOURCE_DIMENSION={}));var PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT=(_a$1$3={},_a$1$3[FOURCC_DXT1]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_a$1$3[FOURCC_DXT3]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_a$1$3[FOURCC_DXT5]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_a$1$3),DXGI_TO_FORMAT=(_b$1={},_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]=INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,_b$1[DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]=INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,_b$1),DDSLoader=function(){function G(){}return G.use=function(U,L){if(U.extension==="dds"&&U.data)try{Object.assign(U,registerCompressedTextures(U.name||U.url,G.parse(U.data),U.metadata))}catch(Y){L(Y);return}L()},G.parse=function(U){var L=new Uint32Array(U),Y=L[0];if(Y!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");var X=new Uint32Array(U,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),W=X[DDS_FIELDS.HEIGHT],z=X[DDS_FIELDS.WIDTH],J=X[DDS_FIELDS.MIPMAP_COUNT],Z=new Uint32Array(U,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),ee=Z[PF_FLAGS];if(ee&DDPF_FOURCC){var te=Z[DDS_PF_FIELDS.FOURCC];if(te!==FOURCC_DX10){var re=FOURCC_TO_FORMAT[te],ie=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,ne=new Uint8Array(U,ie),oe=new CompressedTextureResource(ne,{format:re,width:z,height:W,levels:J});return[oe]}var se=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,ae=new Uint32Array(L.buffer,se,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),le=ae[DDS_DX10_FIELDS.DXGI_FORMAT],ue=ae[DDS_DX10_FIELDS.RESOURCE_DIMENSION],ce=ae[DDS_DX10_FIELDS.MISC_FLAG],he=ae[DDS_DX10_FIELDS.ARRAY_SIZE],fe=DXGI_TO_FORMAT[le];if(fe===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+le);if(ce===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSLoader does not support cubemap textures");if(ue===D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var de=new Array,_e=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(he===1)de.push(new Uint8Array(U,_e));else{for(var me=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[fe],ve=0,ye=z,be=W,Te=0;Te<J;Te++){var Se=Math.max(1,ye+3&-4),Ue=Math.max(1,be+3&-4),Pe=Se*Ue*me;ve+=Pe,ye=ye>>>1,be=be>>>1}for(var Ne=_e,Te=0;Te<he;Te++)de.push(new Uint8Array(U,Ne,ve)),Ne+=ve}return de.map(function(Ve){return new CompressedTextureResource(Ve,{format:fe,width:z,height:W,levels:J})})}throw ee&DDPF_RGB?new Error("DDSLoader does not support uncompressed texture data."):ee&DDPF_YUV?new Error("DDSLoader does not supported YUV uncompressed texture data."):ee&DDPF_LUMINANCE?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):ee&DDPF_ALPHA?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},G}(),_a$d,_b,_c;LoaderResource.setExtensionXhrType("ktx",LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT=(_a$d={},_a$d[TYPES$4.UNSIGNED_BYTE]=1,_a$d[TYPES$4.UNSIGNED_SHORT]=2,_a$d[TYPES$4.INT]=4,_a$d[TYPES$4.UNSIGNED_INT]=4,_a$d[TYPES$4.FLOAT]=4,_a$d[TYPES$4.HALF_FLOAT]=8,_a$d),FORMATS_TO_COMPONENTS=(_b={},_b[FORMATS$4.RGBA]=4,_b[FORMATS$4.RGB]=3,_b[FORMATS$4.RG]=2,_b[FORMATS$4.RED]=1,_b[FORMATS$4.LUMINANCE]=1,_b[FORMATS$4.LUMINANCE_ALPHA]=2,_b[FORMATS$4.ALPHA]=1,_b),TYPES_TO_BYTES_PER_PIXEL=(_c={},_c[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=2,_c[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=2,_c[TYPES$4.UNSIGNED_SHORT_5_6_5]=2,_c),KTXLoader=function(){function G(){}return G.use=function(U,L){if(U.extension==="ktx"&&U.data)try{var Y=U.name||U.url,X=G.parse(Y,U.data),W=X.compressed,z=X.uncompressed,J=X.kvData;if(W){var Z=registerCompressedTextures(Y,W,U.metadata);if(J&&Z.textures)for(var ee in Z.textures)Z.textures[ee].baseTexture.ktxKeyValueData=J;Object.assign(U,Z)}else if(z){var te={};z.forEach(function(re,ie){var ne=new Texture$1(new BaseTexture$1(re.resource,{mipmap:MIPMAP_MODES$4.OFF,alphaMode:ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA,type:re.type,format:re.format})),oe=Y+"-"+(ie+1);J&&(ne.baseTexture.ktxKeyValueData=J),BaseTexture$1.addToCache(ne.baseTexture,oe),Texture$1.addToCache(ne,oe),ie===0&&(te[Y]=ne,BaseTexture$1.addToCache(ne.baseTexture,Y),Texture$1.addToCache(ne,Y)),te[oe]=ne}),Object.assign(U,{textures:te})}}catch(re){L(re);return}L()},G.parse=function(U,L){var Y=new DataView(L);if(!G.validate(U,Y))return null;var X=Y.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,W=Y.getUint32(KTX_FIELDS.GL_TYPE,X),z=Y.getUint32(KTX_FIELDS.GL_FORMAT,X),J=Y.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,X),Z=Y.getUint32(KTX_FIELDS.PIXEL_WIDTH,X),ee=Y.getUint32(KTX_FIELDS.PIXEL_HEIGHT,X)||1,te=Y.getUint32(KTX_FIELDS.PIXEL_DEPTH,X)||1,re=Y.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,X)||1,ie=Y.getUint32(KTX_FIELDS.NUMBER_OF_FACES,X),ne=Y.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,X),oe=Y.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,X);if(ee===0||te!==1)throw new Error("Only 2D textures are supported");if(ie!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(re!==1)throw new Error("WebGL does not support array textures");var se=4,ae=4,le=Z+3&-4,ue=ee+3&-4,ce=new Array(re),he=Z*ee;W===0&&(he=le*ue);var fe;if(W!==0?TYPES_TO_BYTES_PER_COMPONENT[W]?fe=TYPES_TO_BYTES_PER_COMPONENT[W]*FORMATS_TO_COMPONENTS[z]:fe=TYPES_TO_BYTES_PER_PIXEL[W]:fe=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[J],fe===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var de=G.loadKeyValueData?G.parseKvData(Y,oe,X):null,_e=he*fe,me=_e,ve=Z,ye=ee,be=le,Te=ue,Se=FILE_HEADER_SIZE+oe,Ue=0;Ue<ne;Ue++){for(var Pe=Y.getUint32(Se,X),Ne=Se+4,Ve=0;Ve<re;Ve++){var ze=ce[Ve];ze||(ze=ce[Ve]=new Array(ne)),ze[Ue]={levelID:Ue,levelWidth:ne>1||W!==0?ve:be,levelHeight:ne>1||W!==0?ye:Te,levelBuffer:new Uint8Array(L,Ne,me)},Ne+=me}Se+=Pe+4,Se=Se%4!==0?Se+4-Se%4:Se,ve=ve>>1||1,ye=ye>>1||1,be=ve+se-1&~(se-1),Te=ye+ae-1&~(ae-1),me=be*Te*fe}return W!==0?{uncompressed:ce.map(function(Ze){var Ae=Ze[0].levelBuffer,De=!1;return W===TYPES$4.FLOAT?Ae=new Float32Array(Ze[0].levelBuffer.buffer,Ze[0].levelBuffer.byteOffset,Ze[0].levelBuffer.byteLength/4):W===TYPES$4.UNSIGNED_INT?(De=!0,Ae=new Uint32Array(Ze[0].levelBuffer.buffer,Ze[0].levelBuffer.byteOffset,Ze[0].levelBuffer.byteLength/4)):W===TYPES$4.INT&&(De=!0,Ae=new Int32Array(Ze[0].levelBuffer.buffer,Ze[0].levelBuffer.byteOffset,Ze[0].levelBuffer.byteLength/4)),{resource:new BufferResource$1(Ae,{width:Ze[0].levelWidth,height:Ze[0].levelHeight}),type:W,format:De?G.convertFormatToInteger(z):z}}),kvData:de}:{compressed:ce.map(function(Ze){return new CompressedTextureResource(null,{format:J,width:Z,height:ee,levels:ne,levelBuffers:Ze})}),kvData:de}},G.validate=function(U,L){for(var Y=0;Y<FILE_IDENTIFIER.length;Y++)if(L.getUint8(Y)!==FILE_IDENTIFIER[Y])return console.error(U+" is not a valid *.ktx file!"),!1;return!0},G.convertFormatToInteger=function(U){switch(U){case FORMATS$4.RGBA:return FORMATS$4.RGBA_INTEGER;case FORMATS$4.RGB:return FORMATS$4.RGB_INTEGER;case FORMATS$4.RG:return FORMATS$4.RG_INTEGER;case FORMATS$4.RED:return FORMATS$4.RED_INTEGER;default:return U}},G.parseKvData=function(U,L,Y){for(var X=new Map,W=0;W<L;){var z=U.getUint32(FILE_HEADER_SIZE+W,Y),J=FILE_HEADER_SIZE+W+4,Z=3-(z+3)%4;if(z===0||z>L-W){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var ee=0;ee<z&&U.getUint8(J+ee)!==0;ee++);if(ee===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var te=new TextDecoder().decode(new Uint8Array(U.buffer,J,ee)),re=new DataView(U.buffer,J+ee+1,z-ee-1);X.set(te,re),W+=4+z+Z}return X},G.loadKeyValueData=!1,G}();/*!
 * @pixi/particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$k=function(G,U){return extendStatics$k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$k(G,U)};function __extends$M(G,U){extendStatics$k(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var ParticleContainer=function(G){__extends$M(U,G);function U(L,Y,X,W){L===void 0&&(L=1500),X===void 0&&(X=16384),W===void 0&&(W=!1);var z=G.call(this)||this,J=16384;return X>J&&(X=J),z._properties=[!1,!0,!1,!1,!1],z._maxSize=L,z._batchSize=X,z._buffers=null,z._bufferUpdateIDs=[],z._updateID=0,z.interactiveChildren=!1,z.blendMode=BLEND_MODES$4.NORMAL,z.autoResize=W,z.roundPixels=!0,z.baseTexture=null,z.setProperties(Y),z._tint=0,z.tintRgb=new Float32Array(4),z.tint=16777215,z}return U.prototype.setProperties=function(L){L&&(this._properties[0]="vertices"in L||"scale"in L?!!L.vertices||!!L.scale:this._properties[0],this._properties[1]="position"in L?!!L.position:this._properties[1],this._properties[2]="rotation"in L?!!L.rotation:this._properties[2],this._properties[3]="uvs"in L?!!L.uvs:this._properties[3],this._properties[4]="tint"in L||"alpha"in L?!!L.tint||!!L.alpha:this._properties[4])},U.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(U.prototype,"tint",{get:function(){return this._tint},set:function(L){this._tint=L,hex2rgb$1(L,this.tintRgb)},enumerable:!1,configurable:!0}),U.prototype.render=function(L){var Y=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return Y.onChildrenChange(0)})),L.batch.setObjectRenderer(L.plugins.particle),L.plugins.particle.render(this))},U.prototype.onChildrenChange=function(L){for(var Y=Math.floor(L/this._batchSize);this._bufferUpdateIDs.length<Y;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[Y]=++this._updateID},U.prototype.dispose=function(){if(this._buffers){for(var L=0;L<this._buffers.length;++L)this._buffers[L].destroy();this._buffers=null}},U.prototype.destroy=function(L){G.prototype.destroy.call(this,L),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},U}(Container$1),ParticleBuffer=function(){function G(U,L,Y){this.geometry=new Geometry$1,this.indexBuffer=null,this.size=Y,this.dynamicProperties=[],this.staticProperties=[];for(var X=0;X<U.length;++X){var W=U[X];W={attributeName:W.attributeName,size:W.size,uploadFunction:W.uploadFunction,type:W.type||TYPES$4.FLOAT,offset:W.offset},L[X]?this.dynamicProperties.push(W):this.staticProperties.push(W)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return G.prototype.initBuffers=function(){var U=this.geometry,L=0;this.indexBuffer=new Buffer$1(createIndicesForQuads(this.size),!0,!0),U.addIndex(this.indexBuffer),this.dynamicStride=0;for(var Y=0;Y<this.dynamicProperties.length;++Y){var X=this.dynamicProperties[Y];X.offset=L,L+=X.size,this.dynamicStride+=X.size}var W=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(W),this.dynamicDataUint32=new Uint32Array(W),this.dynamicBuffer=new Buffer$1(this.dynamicData,!1,!1);var z=0;this.staticStride=0;for(var Y=0;Y<this.staticProperties.length;++Y){var X=this.staticProperties[Y];X.offset=z,z+=X.size,this.staticStride+=X.size}var J=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(J),this.staticDataUint32=new Uint32Array(J),this.staticBuffer=new Buffer$1(this.staticData,!0,!1);for(var Y=0;Y<this.dynamicProperties.length;++Y){var X=this.dynamicProperties[Y];U.addAttribute(X.attributeName,this.dynamicBuffer,0,X.type===TYPES$4.UNSIGNED_BYTE,X.type,this.dynamicStride*4,X.offset*4)}for(var Y=0;Y<this.staticProperties.length;++Y){var X=this.staticProperties[Y];U.addAttribute(X.attributeName,this.staticBuffer,0,X.type===TYPES$4.UNSIGNED_BYTE,X.type,this.staticStride*4,X.offset*4)}},G.prototype.uploadDynamic=function(U,L,Y){for(var X=0;X<this.dynamicProperties.length;X++){var W=this.dynamicProperties[X];W.uploadFunction(U,L,Y,W.type===TYPES$4.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,W.offset)}this.dynamicBuffer._updateID++},G.prototype.uploadStatic=function(U,L,Y){for(var X=0;X<this.staticProperties.length;X++){var W=this.staticProperties[X];W.uploadFunction(U,L,Y,W.type===TYPES$4.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,W.offset)}this.staticBuffer._updateID++},G.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},G}(),fragment$7=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ParticleRenderer=function(G){__extends$M(U,G);function U(L){var Y=G.call(this,L)||this;return Y.shader=null,Y.properties=null,Y.tempMatrix=new Matrix$1,Y.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:Y.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:Y.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:Y.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:Y.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES$4.UNSIGNED_BYTE,uploadFunction:Y.uploadTint,offset:0}],Y.shader=Shader$1.from(vertex$4,fragment$7,{}),Y.state=State$1.for2d(),Y}return U.prototype.render=function(L){var Y=L.children,X=L._maxSize,W=L._batchSize,z=this.renderer,J=Y.length;if(J!==0){J>X&&!L.autoResize&&(J=X);var Z=L._buffers;Z||(Z=L._buffers=this.generateBuffers(L));var ee=Y[0]._texture.baseTexture;this.state.blendMode=correctBlendMode(L.blendMode,ee.alphaMode),z.state.set(this.state);var te=z.gl,re=L.worldTransform.copyTo(this.tempMatrix);re.prepend(z.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=re.toArray(!0),this.shader.uniforms.uColor=premultiplyRgba(L.tintRgb,L.worldAlpha,this.shader.uniforms.uColor,ee.alphaMode),this.shader.uniforms.uSampler=ee,this.renderer.shader.bind(this.shader);for(var ie=!1,ne=0,oe=0;ne<J;ne+=W,oe+=1){var se=J-ne;se>W&&(se=W),oe>=Z.length&&Z.push(this._generateOneMoreBuffer(L));var ae=Z[oe];ae.uploadDynamic(Y,ne,se);var le=L._bufferUpdateIDs[oe]||0;ie=ie||ae._updateID<le,ie&&(ae._updateID=L._updateID,ae.uploadStatic(Y,ne,se)),z.geometry.bind(ae.geometry),te.drawElements(te.TRIANGLES,se*6,te.UNSIGNED_SHORT,0)}}},U.prototype.generateBuffers=function(L){for(var Y=[],X=L._maxSize,W=L._batchSize,z=L._properties,J=0;J<X;J+=W)Y.push(new ParticleBuffer(this.properties,z,W));return Y},U.prototype._generateOneMoreBuffer=function(L){var Y=L._batchSize,X=L._properties;return new ParticleBuffer(this.properties,X,Y)},U.prototype.uploadVertices=function(L,Y,X,W,z,J){for(var Z=0,ee=0,te=0,re=0,ie=0;ie<X;++ie){var ne=L[Y+ie],oe=ne._texture,se=ne.scale.x,ae=ne.scale.y,le=oe.trim,ue=oe.orig;le?(ee=le.x-ne.anchor.x*ue.width,Z=ee+le.width,re=le.y-ne.anchor.y*ue.height,te=re+le.height):(Z=ue.width*(1-ne.anchor.x),ee=ue.width*-ne.anchor.x,te=ue.height*(1-ne.anchor.y),re=ue.height*-ne.anchor.y),W[J]=ee*se,W[J+1]=re*ae,W[J+z]=Z*se,W[J+z+1]=re*ae,W[J+z*2]=Z*se,W[J+z*2+1]=te*ae,W[J+z*3]=ee*se,W[J+z*3+1]=te*ae,J+=z*4}},U.prototype.uploadPosition=function(L,Y,X,W,z,J){for(var Z=0;Z<X;Z++){var ee=L[Y+Z].position;W[J]=ee.x,W[J+1]=ee.y,W[J+z]=ee.x,W[J+z+1]=ee.y,W[J+z*2]=ee.x,W[J+z*2+1]=ee.y,W[J+z*3]=ee.x,W[J+z*3+1]=ee.y,J+=z*4}},U.prototype.uploadRotation=function(L,Y,X,W,z,J){for(var Z=0;Z<X;Z++){var ee=L[Y+Z].rotation;W[J]=ee,W[J+z]=ee,W[J+z*2]=ee,W[J+z*3]=ee,J+=z*4}},U.prototype.uploadUvs=function(L,Y,X,W,z,J){for(var Z=0;Z<X;++Z){var ee=L[Y+Z]._texture._uvs;ee?(W[J]=ee.x0,W[J+1]=ee.y0,W[J+z]=ee.x1,W[J+z+1]=ee.y1,W[J+z*2]=ee.x2,W[J+z*2+1]=ee.y2,W[J+z*3]=ee.x3,W[J+z*3+1]=ee.y3,J+=z*4):(W[J]=0,W[J+1]=0,W[J+z]=0,W[J+z+1]=0,W[J+z*2]=0,W[J+z*2+1]=0,W[J+z*3]=0,W[J+z*3+1]=0,J+=z*4)}},U.prototype.uploadTint=function(L,Y,X,W,z,J){for(var Z=0;Z<X;++Z){var ee=L[Y+Z],te=ee._texture.baseTexture.alphaMode>0,re=ee.alpha,ie=re<1&&te?premultiplyTint$1(ee._tintRGB,re):ee._tintRGB+(re*255<<24);W[J]=ie,W[J+z]=ie,W[J+z*2]=ie,W[J+z*3]=ie,J+=z*4}},U.prototype.destroy=function(){G.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},U}(ObjectRenderer$1);/*!
 * @pixi/graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LINE_JOIN;(function(G){G.MITER="miter",G.BEVEL="bevel",G.ROUND="round"})(LINE_JOIN||(LINE_JOIN={}));var LINE_CAP;(function(G){G.BUTT="butt",G.ROUND="round",G.SQUARE="square"})(LINE_CAP||(LINE_CAP={}));var GRAPHICS_CURVES={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(G,U){if(U===void 0&&(U=20),!this.adaptive||!G||isNaN(G))return U;var L=Math.ceil(G/this.maxLength);return L<this.minSegments?L=this.minSegments:L>this.maxSegments&&(L=this.maxSegments),L}},FillStyle=function(){function G(){this.color=16777215,this.alpha=1,this.texture=Texture$1.WHITE,this.matrix=null,this.visible=!1,this.reset()}return G.prototype.clone=function(){var U=new G;return U.color=this.color,U.alpha=this.alpha,U.texture=this.texture,U.matrix=this.matrix,U.visible=this.visible,U},G.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Texture$1.WHITE,this.matrix=null,this.visible=!1},G.prototype.destroy=function(){this.texture=null,this.matrix=null},G}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$j=function(G,U){return extendStatics$j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$j(G,U)};function __extends$L(G,U){extendStatics$j(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}function fixOrientation(G,U){var L,Y;U===void 0&&(U=!1);var X=G.length;if(!(X<6)){for(var W=0,z=0,J=G[X-2],Z=G[X-1];z<X;z+=2){var ee=G[z],te=G[z+1];W+=(ee-J)*(te+Z),J=ee,Z=te}if(!U&&W>0||U&&W<=0)for(var re=X/2,z=re+re%2;z<X;z+=2){var ie=X-z-2,ne=X-z-1,oe=z,se=z+1;L=[G[oe],G[ie]],G[ie]=L[0],G[oe]=L[1],Y=[G[se],G[ne]],G[ne]=Y[0],G[se]=Y[1]}}}var buildPoly={build:function(G){G.points=G.shape.points.slice()},triangulate:function(G,U){var L=G.points,Y=G.holes,X=U.points,W=U.indices;if(L.length>=6){fixOrientation(L,!1);for(var z=[],J=0;J<Y.length;J++){var Z=Y[J];fixOrientation(Z.points,!0),z.push(L.length/2),L=L.concat(Z.points)}var ee=earcut$1(L,z,2);if(!ee)return;for(var te=X.length/2,J=0;J<ee.length;J+=3)W.push(ee[J]+te),W.push(ee[J+1]+te),W.push(ee[J+2]+te);for(var J=0;J<L.length;J++)X.push(L[J])}}},buildCircle={build:function(G){var U=G.points,L,Y,X,W,z,J;if(G.type===SHAPES$1.CIRC){var Z=G.shape;L=Z.x,Y=Z.y,z=J=Z.radius,X=W=0}else if(G.type===SHAPES$1.ELIP){var ee=G.shape;L=ee.x,Y=ee.y,z=ee.width,J=ee.height,X=W=0}else{var te=G.shape,re=te.width/2,ie=te.height/2;L=te.x+re,Y=te.y+ie,z=J=Math.max(0,Math.min(te.radius,Math.min(re,ie))),X=re-z,W=ie-J}if(!(z>=0&&J>=0&&X>=0&&W>=0)){U.length=0;return}var ne=Math.ceil(2.3*Math.sqrt(z+J)),oe=ne*8+(X?4:0)+(W?4:0);if(U.length=oe,oe!==0){if(ne===0){U.length=8,U[0]=U[6]=L+X,U[1]=U[3]=Y+W,U[2]=U[4]=L-X,U[5]=U[7]=Y-W;return}var se=0,ae=ne*4+(X?2:0)+2,le=ae,ue=oe;{var ce=X+z,he=W,fe=L+ce,de=L-ce,_e=Y+he;if(U[se++]=fe,U[se++]=_e,U[--ae]=_e,U[--ae]=de,W){var me=Y-he;U[le++]=de,U[le++]=me,U[--ue]=me,U[--ue]=fe}}for(var ve=1;ve<ne;ve++){var ye=Math.PI/2*(ve/ne),ce=X+Math.cos(ye)*z,he=W+Math.sin(ye)*J,fe=L+ce,de=L-ce,_e=Y+he,me=Y-he;U[se++]=fe,U[se++]=_e,U[--ae]=_e,U[--ae]=de,U[le++]=de,U[le++]=me,U[--ue]=me,U[--ue]=fe}{var ce=X,he=W+J,fe=L+ce,de=L-ce,_e=Y+he,me=Y-he;U[se++]=fe,U[se++]=_e,U[--ue]=me,U[--ue]=fe,X&&(U[se++]=de,U[se++]=_e,U[--ue]=me,U[--ue]=de)}}},triangulate:function(G,U){var L=G.points,Y=U.points,X=U.indices,W=Y.length/2,z=W,J,Z;if(G.type!==SHAPES$1.RREC){var ee=G.shape;J=ee.x,Z=ee.y}else{var te=G.shape;J=te.x+te.width/2,Z=te.y+te.height/2}var re=G.matrix;Y.push(G.matrix?re.a*J+re.c*Z+re.tx:J,G.matrix?re.b*J+re.d*Z+re.ty:Z),W++,Y.push(L[0],L[1]);for(var ie=2;ie<L.length;ie+=2)Y.push(L[ie],L[ie+1]),X.push(W++,z,W);X.push(z+1,z,W)}},buildRectangle={build:function(G){var U=G.shape,L=U.x,Y=U.y,X=U.width,W=U.height,z=G.points;z.length=0,z.push(L,Y,L+X,Y,L+X,Y+W,L,Y+W)},triangulate:function(G,U){var L=G.points,Y=U.points,X=Y.length/2;Y.push(L[0],L[1],L[2],L[3],L[6],L[7],L[4],L[5]),U.indices.push(X,X+1,X+2,X+1,X+2,X+3)}};function getPt(G,U,L){var Y=U-G;return G+Y*L}function quadraticBezierCurve(G,U,L,Y,X,W,z){z===void 0&&(z=[]);for(var J=20,Z=z,ee=0,te=0,re=0,ie=0,ne=0,oe=0,se=0,ae=0;se<=J;++se)ae=se/J,ee=getPt(G,L,ae),te=getPt(U,Y,ae),re=getPt(L,X,ae),ie=getPt(Y,W,ae),ne=getPt(ee,re,ae),oe=getPt(te,ie,ae),!(se===0&&Z[Z.length-2]===ne&&Z[Z.length-1]===oe)&&Z.push(ne,oe);return Z}var buildRoundedRectangle={build:function(G){if(Graphics.nextRoundedRectBehavior){buildCircle.build(G);return}var U=G.shape,L=G.points,Y=U.x,X=U.y,W=U.width,z=U.height,J=Math.max(0,Math.min(U.radius,Math.min(W,z)/2));L.length=0,J?(quadraticBezierCurve(Y,X+J,Y,X,Y+J,X,L),quadraticBezierCurve(Y+W-J,X,Y+W,X,Y+W,X+J,L),quadraticBezierCurve(Y+W,X+z-J,Y+W,X+z,Y+W-J,X+z,L),quadraticBezierCurve(Y+J,X+z,Y,X+z,Y,X+z-J,L)):L.push(Y,X,Y+W,X,Y+W,X+z,Y,X+z)},triangulate:function(G,U){if(Graphics.nextRoundedRectBehavior){buildCircle.triangulate(G,U);return}for(var L=G.points,Y=U.points,X=U.indices,W=Y.length/2,z=earcut$1(L,null,2),J=0,Z=z.length;J<Z;J+=3)X.push(z[J]+W),X.push(z[J+1]+W),X.push(z[J+2]+W);for(var J=0,Z=L.length;J<Z;J++)Y.push(L[J],L[++J])}};function square(G,U,L,Y,X,W,z,J){var Z=G-L*X,ee=U-Y*X,te=G+L*W,re=U+Y*W,ie,ne;z?(ie=Y,ne=-L):(ie=-Y,ne=L);var oe=Z+ie,se=ee+ne,ae=te+ie,le=re+ne;return J.push(oe,se),J.push(ae,le),2}function round(G,U,L,Y,X,W,z,J){var Z=L-G,ee=Y-U,te=Math.atan2(Z,ee),re=Math.atan2(X-G,W-U);J&&te<re?te+=Math.PI*2:!J&&te>re&&(re+=Math.PI*2);var ie=te,ne=re-te,oe=Math.abs(ne),se=Math.sqrt(Z*Z+ee*ee),ae=(15*oe*Math.sqrt(se)/Math.PI>>0)+1,le=ne/ae;if(ie+=le,J){z.push(G,U),z.push(L,Y);for(var ue=1,ce=ie;ue<ae;ue++,ce+=le)z.push(G,U),z.push(G+Math.sin(ce)*se,U+Math.cos(ce)*se);z.push(G,U),z.push(X,W)}else{z.push(L,Y),z.push(G,U);for(var ue=1,ce=ie;ue<ae;ue++,ce+=le)z.push(G+Math.sin(ce)*se,U+Math.cos(ce)*se),z.push(G,U);z.push(X,W),z.push(G,U)}return ae*2}function buildNonNativeLine(G,U){var L=G.shape,Y=G.points||L.points.slice(),X=U.closePointEps;if(Y.length!==0){var W=G.lineStyle,z=new Point$1(Y[0],Y[1]),J=new Point$1(Y[Y.length-2],Y[Y.length-1]),Z=L.type!==SHAPES$1.POLY||L.closeStroke,ee=Math.abs(z.x-J.x)<X&&Math.abs(z.y-J.y)<X;if(Z){Y=Y.slice(),ee&&(Y.pop(),Y.pop(),J.set(Y[Y.length-2],Y[Y.length-1]));var te=(z.x+J.x)*.5,re=(J.y+z.y)*.5;Y.unshift(te,re),Y.push(te,re)}var ie=U.points,ne=Y.length/2,oe=Y.length,se=ie.length/2,ae=W.width/2,le=ae*ae,ue=W.miterLimit*W.miterLimit,ce=Y[0],he=Y[1],fe=Y[2],de=Y[3],_e=0,me=0,ve=-(he-de),ye=ce-fe,be=0,Te=0,Se=Math.sqrt(ve*ve+ye*ye);ve/=Se,ye/=Se,ve*=ae,ye*=ae;var Ue=W.alignment,Pe=(1-Ue)*2,Ne=Ue*2;Z||(W.cap===LINE_CAP.ROUND?oe+=round(ce-ve*(Pe-Ne)*.5,he-ye*(Pe-Ne)*.5,ce-ve*Pe,he-ye*Pe,ce+ve*Ne,he+ye*Ne,ie,!0)+2:W.cap===LINE_CAP.SQUARE&&(oe+=square(ce,he,ve,ye,Pe,Ne,!0,ie))),ie.push(ce-ve*Pe,he-ye*Pe),ie.push(ce+ve*Ne,he+ye*Ne);for(var Ve=1;Ve<ne-1;++Ve){ce=Y[(Ve-1)*2],he=Y[(Ve-1)*2+1],fe=Y[Ve*2],de=Y[Ve*2+1],_e=Y[(Ve+1)*2],me=Y[(Ve+1)*2+1],ve=-(he-de),ye=ce-fe,Se=Math.sqrt(ve*ve+ye*ye),ve/=Se,ye/=Se,ve*=ae,ye*=ae,be=-(de-me),Te=fe-_e,Se=Math.sqrt(be*be+Te*Te),be/=Se,Te/=Se,be*=ae,Te*=ae;var ze=fe-ce,Ze=he-de,Ae=fe-_e,De=me-de,Ke=Ze*Ae-De*ze,Qe=Ke<0;if(Math.abs(Ke)<.1){ie.push(fe-ve*Pe,de-ye*Pe),ie.push(fe+ve*Ne,de+ye*Ne);continue}var tt=(-ve+ce)*(-ye+de)-(-ve+fe)*(-ye+he),Ie=(-be+_e)*(-Te+de)-(-be+fe)*(-Te+me),ke=(ze*Ie-Ae*tt)/Ke,Me=(De*tt-Ze*Ie)/Ke,Ye=(ke-fe)*(ke-fe)+(Me-de)*(Me-de),xe=fe+(ke-fe)*Pe,Re=de+(Me-de)*Pe,we=fe-(ke-fe)*Ne,Le=de-(Me-de)*Ne,pe=Math.min(ze*ze+Ze*Ze,Ae*Ae+De*De),ge=Qe?Pe:Ne,Ee=pe+ge*ge*le,Ce=Ye<=Ee;Ce?W.join===LINE_JOIN.BEVEL||Ye/le>ue?(Qe?(ie.push(xe,Re),ie.push(fe+ve*Ne,de+ye*Ne),ie.push(xe,Re),ie.push(fe+be*Ne,de+Te*Ne)):(ie.push(fe-ve*Pe,de-ye*Pe),ie.push(we,Le),ie.push(fe-be*Pe,de-Te*Pe),ie.push(we,Le)),oe+=2):W.join===LINE_JOIN.ROUND?Qe?(ie.push(xe,Re),ie.push(fe+ve*Ne,de+ye*Ne),oe+=round(fe,de,fe+ve*Ne,de+ye*Ne,fe+be*Ne,de+Te*Ne,ie,!0)+4,ie.push(xe,Re),ie.push(fe+be*Ne,de+Te*Ne)):(ie.push(fe-ve*Pe,de-ye*Pe),ie.push(we,Le),oe+=round(fe,de,fe-ve*Pe,de-ye*Pe,fe-be*Pe,de-Te*Pe,ie,!1)+4,ie.push(fe-be*Pe,de-Te*Pe),ie.push(we,Le)):(ie.push(xe,Re),ie.push(we,Le)):(ie.push(fe-ve*Pe,de-ye*Pe),ie.push(fe+ve*Ne,de+ye*Ne),W.join===LINE_JOIN.ROUND?Qe?oe+=round(fe,de,fe+ve*Ne,de+ye*Ne,fe+be*Ne,de+Te*Ne,ie,!0)+2:oe+=round(fe,de,fe-ve*Pe,de-ye*Pe,fe-be*Pe,de-Te*Pe,ie,!1)+2:W.join===LINE_JOIN.MITER&&Ye/le<=ue&&(Qe?(ie.push(we,Le),ie.push(we,Le)):(ie.push(xe,Re),ie.push(xe,Re)),oe+=2),ie.push(fe-be*Pe,de-Te*Pe),ie.push(fe+be*Ne,de+Te*Ne),oe+=2)}ce=Y[(ne-2)*2],he=Y[(ne-2)*2+1],fe=Y[(ne-1)*2],de=Y[(ne-1)*2+1],ve=-(he-de),ye=ce-fe,Se=Math.sqrt(ve*ve+ye*ye),ve/=Se,ye/=Se,ve*=ae,ye*=ae,ie.push(fe-ve*Pe,de-ye*Pe),ie.push(fe+ve*Ne,de+ye*Ne),Z||(W.cap===LINE_CAP.ROUND?oe+=round(fe-ve*(Pe-Ne)*.5,de-ye*(Pe-Ne)*.5,fe-ve*Pe,de-ye*Pe,fe+ve*Ne,de+ye*Ne,ie,!1)+2:W.cap===LINE_CAP.SQUARE&&(oe+=square(fe,de,ve,ye,Pe,Ne,!1,ie)));for(var Fe=U.indices,Be=GRAPHICS_CURVES.epsilon*GRAPHICS_CURVES.epsilon,Ve=se;Ve<oe+se-2;++Ve)ce=ie[Ve*2],he=ie[Ve*2+1],fe=ie[(Ve+1)*2],de=ie[(Ve+1)*2+1],_e=ie[(Ve+2)*2],me=ie[(Ve+2)*2+1],!(Math.abs(ce*(de-me)+fe*(me-he)+_e*(he-de))<Be)&&Fe.push(Ve,Ve+1,Ve+2)}}function buildNativeLine(G,U){var L=0,Y=G.shape,X=G.points||Y.points,W=Y.type!==SHAPES$1.POLY||Y.closeStroke;if(X.length!==0){var z=U.points,J=U.indices,Z=X.length/2,ee=z.length/2,te=ee;for(z.push(X[0],X[1]),L=1;L<Z;L++)z.push(X[L*2],X[L*2+1]),J.push(te,te+1),te++;W&&J.push(te,ee)}}function buildLine(G,U){G.lineStyle.native?buildNativeLine(G,U):buildNonNativeLine(G,U)}var ArcUtils=function(){function G(){}return G.curveTo=function(U,L,Y,X,W,z){var J=z[z.length-2],Z=z[z.length-1],ee=Z-L,te=J-U,re=X-L,ie=Y-U,ne=Math.abs(ee*ie-te*re);if(ne<1e-8||W===0)return(z[z.length-2]!==U||z[z.length-1]!==L)&&z.push(U,L),null;var oe=ee*ee+te*te,se=re*re+ie*ie,ae=ee*re+te*ie,le=W*Math.sqrt(oe)/ne,ue=W*Math.sqrt(se)/ne,ce=le*ae/oe,he=ue*ae/se,fe=le*ie+ue*te,de=le*re+ue*ee,_e=te*(ue+ce),me=ee*(ue+ce),ve=ie*(le+he),ye=re*(le+he),be=Math.atan2(me-de,_e-fe),Te=Math.atan2(ye-de,ve-fe);return{cx:fe+U,cy:de+L,radius:W,startAngle:be,endAngle:Te,anticlockwise:te*re>ie*ee}},G.arc=function(U,L,Y,X,W,z,J,Z,ee){for(var te=J-z,re=GRAPHICS_CURVES._segmentsCount(Math.abs(te)*W,Math.ceil(Math.abs(te)/PI_2$1)*40),ie=te/(re*2),ne=ie*2,oe=Math.cos(ie),se=Math.sin(ie),ae=re-1,le=ae%1/ae,ue=0;ue<=ae;++ue){var ce=ue+le*ue,he=ie+z+ne*ce,fe=Math.cos(he),de=-Math.sin(he);ee.push((oe*fe+se*de)*W+Y,(oe*-de+se*fe)*W+X)}},G}(),BezierUtils=function(){function G(){}return G.curveLength=function(U,L,Y,X,W,z,J,Z){for(var ee=10,te=0,re=0,ie=0,ne=0,oe=0,se=0,ae=0,le=0,ue=0,ce=0,he=0,fe=U,de=L,_e=1;_e<=ee;++_e)re=_e/ee,ie=re*re,ne=ie*re,oe=1-re,se=oe*oe,ae=se*oe,le=ae*U+3*se*re*Y+3*oe*ie*W+ne*J,ue=ae*L+3*se*re*X+3*oe*ie*z+ne*Z,ce=fe-le,he=de-ue,fe=le,de=ue,te+=Math.sqrt(ce*ce+he*he);return te},G.curveTo=function(U,L,Y,X,W,z,J){var Z=J[J.length-2],ee=J[J.length-1];J.length-=2;var te=GRAPHICS_CURVES._segmentsCount(G.curveLength(Z,ee,U,L,Y,X,W,z)),re=0,ie=0,ne=0,oe=0,se=0;J.push(Z,ee);for(var ae=1,le=0;ae<=te;++ae)le=ae/te,re=1-le,ie=re*re,ne=ie*re,oe=le*le,se=oe*le,J.push(ne*Z+3*ie*le*U+3*re*oe*Y+se*W,ne*ee+3*ie*le*L+3*re*oe*X+se*z)},G}(),QuadraticUtils=function(){function G(){}return G.curveLength=function(U,L,Y,X,W,z){var J=U-2*Y+W,Z=L-2*X+z,ee=2*Y-2*U,te=2*X-2*L,re=4*(J*J+Z*Z),ie=4*(J*ee+Z*te),ne=ee*ee+te*te,oe=2*Math.sqrt(re+ie+ne),se=Math.sqrt(re),ae=2*re*se,le=2*Math.sqrt(ne),ue=ie/se;return(ae*oe+se*ie*(oe-le)+(4*ne*re-ie*ie)*Math.log((2*se+ue+oe)/(ue+le)))/(4*ae)},G.curveTo=function(U,L,Y,X,W){for(var z=W[W.length-2],J=W[W.length-1],Z=GRAPHICS_CURVES._segmentsCount(G.curveLength(z,J,U,L,Y,X)),ee=0,te=0,re=1;re<=Z;++re){var ie=re/Z;ee=z+(U-z)*ie,te=J+(L-J)*ie,W.push(ee+(U+(Y-U)*ie-ee)*ie,te+(L+(X-L)*ie-te)*ie)}},G}(),BatchPart=function(){function G(){this.reset()}return G.prototype.begin=function(U,L,Y){this.reset(),this.style=U,this.start=L,this.attribStart=Y},G.prototype.end=function(U,L){this.attribSize=L-this.attribStart,this.size=U-this.start},G.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},G}(),_a$c,FILL_COMMANDS=(_a$c={},_a$c[SHAPES$1.POLY]=buildPoly,_a$c[SHAPES$1.CIRC]=buildCircle,_a$c[SHAPES$1.ELIP]=buildCircle,_a$c[SHAPES$1.RECT]=buildRectangle,_a$c[SHAPES$1.RREC]=buildRoundedRectangle,_a$c),BATCH_POOL=[],DRAW_CALL_POOL=[],GraphicsData=function(){function G(U,L,Y,X){L===void 0&&(L=null),Y===void 0&&(Y=null),X===void 0&&(X=null),this.points=[],this.holes=[],this.shape=U,this.lineStyle=Y,this.fillStyle=L,this.matrix=X,this.type=U.type}return G.prototype.clone=function(){return new G(this.shape,this.fillStyle,this.lineStyle,this.matrix)},G.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},G}(),tmpPoint=new Point$1,tmpBounds=new Bounds$1,GraphicsGeometry=function(G){__extends$L(U,G);function U(){var L=G.call(this)||this;return L.closePointEps=1e-4,L.boundsPadding=0,L.uvsFloat32=null,L.indicesUint16=null,L.batchable=!1,L.points=[],L.colors=[],L.uvs=[],L.indices=[],L.textureIds=[],L.graphicsData=[],L.drawCalls=[],L.batchDirty=-1,L.batches=[],L.dirty=0,L.cacheDirty=-1,L.clearDirty=0,L.shapeIndex=0,L._bounds=new Bounds$1,L.boundsDirty=-1,L}return Object.defineProperty(U.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),U.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var L=0;L<this.drawCalls.length;L++)this.drawCalls[L].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[L]);this.drawCalls.length=0;for(var L=0;L<this.batches.length;L++){var Y=this.batches[L];Y.reset(),BATCH_POOL.push(Y)}this.batches.length=0},U.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},U.prototype.drawShape=function(L,Y,X,W){Y===void 0&&(Y=null),X===void 0&&(X=null),W===void 0&&(W=null);var z=new GraphicsData(L,Y,X,W);return this.graphicsData.push(z),this.dirty++,this},U.prototype.drawHole=function(L,Y){if(Y===void 0&&(Y=null),!this.graphicsData.length)return null;var X=new GraphicsData(L,null,null,Y),W=this.graphicsData[this.graphicsData.length-1];return X.lineStyle=W.lineStyle,W.holes.push(X),this.dirty++,this},U.prototype.destroy=function(){G.prototype.destroy.call(this);for(var L=0;L<this.graphicsData.length;++L)this.graphicsData[L].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},U.prototype.containsPoint=function(L){for(var Y=this.graphicsData,X=0;X<Y.length;++X){var W=Y[X];if(!!W.fillStyle.visible&&W.shape&&(W.matrix?W.matrix.applyInverse(L,tmpPoint):tmpPoint.copyFrom(L),W.shape.contains(tmpPoint.x,tmpPoint.y))){var z=!1;if(W.holes)for(var J=0;J<W.holes.length;J++){var Z=W.holes[J];if(Z.shape.contains(tmpPoint.x,tmpPoint.y)){z=!0;break}}if(!z)return!0}}return!1},U.prototype.updateBatches=function(L){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var Y=this.uvs,X=this.graphicsData,W=null,z=null;this.batches.length>0&&(W=this.batches[this.batches.length-1],z=W.style);for(var J=this.shapeIndex;J<X.length;J++){this.shapeIndex++;var Z=X[J],ee=Z.fillStyle,te=Z.lineStyle,re=FILL_COMMANDS[Z.type];re.build(Z),Z.matrix&&this.transformPoints(Z.points,Z.matrix),(ee.visible||te.visible)&&this.processHoles(Z.holes);for(var ie=0;ie<2;ie++){var ne=ie===0?ee:te;if(!!ne.visible){var oe=ne.texture.baseTexture,se=this.indices.length,ae=this.points.length/2;oe.wrapMode=WRAP_MODES$4.REPEAT,ie===0?this.processFill(Z):this.processLine(Z);var le=this.points.length/2-ae;le!==0&&(W&&!this._compareStyles(z,ne)&&(W.end(se,ae),W=null),W||(W=BATCH_POOL.pop()||new BatchPart,W.begin(ne,se,ae),this.batches.push(W),z=ne),this.addUvs(this.points,Y,ne.texture,ae,le,ne.matrix))}}}var ue=this.indices.length,ce=this.points.length/2;if(W&&W.end(ue,ce),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var he=ce>65535&&L;this.indicesUint16=he?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},U.prototype._compareStyles=function(L,Y){return!(!L||!Y||L.texture.baseTexture!==Y.texture.baseTexture||L.color+L.alpha!==Y.color+Y.alpha||!!L.native!=!!Y.native)},U.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var L=0,Y=this.graphicsData.length;L<Y;L++){var X=this.graphicsData[L],W=X.fillStyle,z=X.lineStyle;if(W&&!W.texture.baseTexture.valid||z&&!z.texture.baseTexture.valid)return!1}return!0},U.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var L=this.batches,Y=0,X=L.length;Y<X;Y++)for(var W=L[Y],z=0;z<W.size;z++){var J=W.start+z;this.indicesUint16[J]=this.indicesUint16[J]-W.attribStart}},U.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var L=this.batches,Y=0;Y<L.length;Y++)if(L[Y].style.native)return!1;return this.points.length<U.BATCHABLE_SIZE*2},U.prototype.buildDrawCalls=function(){for(var L=++BaseTexture$1._globalBatch,Y=0;Y<this.drawCalls.length;Y++)this.drawCalls[Y].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[Y]);this.drawCalls.length=0;var X=this.colors,W=this.textureIds,z=DRAW_CALL_POOL.pop();z||(z=new BatchDrawCall$1,z.texArray=new BatchTextureArray$1),z.texArray.count=0,z.start=0,z.size=0,z.type=DRAW_MODES$4.TRIANGLES;var J=0,Z=null,ee=0,te=!1,re=DRAW_MODES$4.TRIANGLES,ie=0;this.drawCalls.push(z);for(var Y=0;Y<this.batches.length;Y++){var ne=this.batches[Y],oe=8,se=ne.style,ae=se.texture.baseTexture;te!==!!se.native&&(te=!!se.native,re=te?DRAW_MODES$4.LINES:DRAW_MODES$4.TRIANGLES,Z=null,J=oe,L++),Z!==ae&&(Z=ae,ae._batchEnabled!==L&&(J===oe&&(L++,J=0,z.size>0&&(z=DRAW_CALL_POOL.pop(),z||(z=new BatchDrawCall$1,z.texArray=new BatchTextureArray$1),this.drawCalls.push(z)),z.start=ie,z.size=0,z.texArray.count=0,z.type=re),ae.touched=1,ae._batchEnabled=L,ae._batchLocation=J,ae.wrapMode=WRAP_MODES$4.REPEAT,z.texArray.elements[z.texArray.count++]=ae,J++)),z.size+=ne.size,ie+=ne.size,ee=ae._batchLocation,this.addColors(X,se.color,se.alpha,ne.attribSize,ne.attribStart),this.addTextureIds(W,ee,ne.attribSize,ne.attribStart)}BaseTexture$1._globalBatch=L,this.packAttributes()},U.prototype.packAttributes=function(){for(var L=this.points,Y=this.uvs,X=this.colors,W=this.textureIds,z=new ArrayBuffer(L.length*3*4),J=new Float32Array(z),Z=new Uint32Array(z),ee=0,te=0;te<L.length/2;te++)J[ee++]=L[te*2],J[ee++]=L[te*2+1],J[ee++]=Y[te*2],J[ee++]=Y[te*2+1],Z[ee++]=X[te],J[ee++]=W[te];this._buffer.update(z),this._indexBuffer.update(this.indicesUint16)},U.prototype.processFill=function(L){if(L.holes.length)buildPoly.triangulate(L,this);else{var Y=FILL_COMMANDS[L.type];Y.triangulate(L,this)}},U.prototype.processLine=function(L){buildLine(L,this);for(var Y=0;Y<L.holes.length;Y++)buildLine(L.holes[Y],this)},U.prototype.processHoles=function(L){for(var Y=0;Y<L.length;Y++){var X=L[Y],W=FILL_COMMANDS[X.type];W.build(X),X.matrix&&this.transformPoints(X.points,X.matrix)}},U.prototype.calculateBounds=function(){var L=this._bounds,Y=tmpBounds,X=Matrix$1.IDENTITY;this._bounds.clear(),Y.clear();for(var W=0;W<this.graphicsData.length;W++){var z=this.graphicsData[W],J=z.shape,Z=z.type,ee=z.lineStyle,te=z.matrix||Matrix$1.IDENTITY,re=0;if(ee&&ee.visible&&(re=ee.width,Z!==SHAPES$1.POLY||z.fillStyle.visible?re*=Math.max(0,ee.alignment):re*=Math.max(ee.alignment,1-ee.alignment)),X!==te&&(Y.isEmpty()||(L.addBoundsMatrix(Y,X),Y.clear()),X=te),Z===SHAPES$1.RECT||Z===SHAPES$1.RREC){var ie=J;Y.addFramePad(ie.x,ie.y,ie.x+ie.width,ie.y+ie.height,re,re)}else if(Z===SHAPES$1.CIRC){var ne=J;Y.addFramePad(ne.x,ne.y,ne.x,ne.y,ne.radius+re,ne.radius+re)}else if(Z===SHAPES$1.ELIP){var oe=J;Y.addFramePad(oe.x,oe.y,oe.x,oe.y,oe.width+re,oe.height+re)}else{var se=J;L.addVerticesMatrix(X,se.points,0,se.points.length,re,re)}}Y.isEmpty()||L.addBoundsMatrix(Y,X),L.pad(this.boundsPadding,this.boundsPadding)},U.prototype.transformPoints=function(L,Y){for(var X=0;X<L.length/2;X++){var W=L[X*2],z=L[X*2+1];L[X*2]=Y.a*W+Y.c*z+Y.tx,L[X*2+1]=Y.b*W+Y.d*z+Y.ty}},U.prototype.addColors=function(L,Y,X,W,z){z===void 0&&(z=0);var J=(Y>>16)+(Y&65280)+((Y&255)<<16),Z=premultiplyTint$1(J,X);L.length=Math.max(L.length,z+W);for(var ee=0;ee<W;ee++)L[z+ee]=Z},U.prototype.addTextureIds=function(L,Y,X,W){W===void 0&&(W=0),L.length=Math.max(L.length,W+X);for(var z=0;z<X;z++)L[W+z]=Y},U.prototype.addUvs=function(L,Y,X,W,z,J){J===void 0&&(J=null);for(var Z=0,ee=Y.length,te=X.frame;Z<z;){var re=L[(W+Z)*2],ie=L[(W+Z)*2+1];if(J){var ne=J.a*re+J.c*ie+J.tx;ie=J.b*re+J.d*ie+J.ty,re=ne}Z++,Y.push(re/te.width,ie/te.height)}var oe=X.baseTexture;(te.width<oe.width||te.height<oe.height)&&this.adjustUvs(Y,X,ee,z)},U.prototype.adjustUvs=function(L,Y,X,W){for(var z=Y.baseTexture,J=1e-6,Z=X+W*2,ee=Y.frame,te=ee.width/z.width,re=ee.height/z.height,ie=ee.x/ee.width,ne=ee.y/ee.height,oe=Math.floor(L[X]+J),se=Math.floor(L[X+1]+J),ae=X+2;ae<Z;ae+=2)oe=Math.min(oe,Math.floor(L[ae]+J)),se=Math.min(se,Math.floor(L[ae+1]+J));ie-=oe,ne-=se;for(var ae=X;ae<Z;ae+=2)L[ae]=(L[ae]+ie)*te,L[ae+1]=(L[ae+1]+ne)*re},U.BATCHABLE_SIZE=100,U}(BatchGeometry$1),LineStyle=function(G){__extends$L(U,G);function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.width=0,L.alignment=.5,L.native=!1,L.cap=LINE_CAP.BUTT,L.join=LINE_JOIN.MITER,L.miterLimit=10,L}return U.prototype.clone=function(){var L=new U;return L.color=this.color,L.alpha=this.alpha,L.texture=this.texture,L.matrix=this.matrix,L.visible=this.visible,L.width=this.width,L.alignment=this.alignment,L.native=this.native,L.cap=this.cap,L.join=this.join,L.miterLimit=this.miterLimit,L},U.prototype.reset=function(){G.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},U}(FillStyle),temp=new Float32Array(3),DEFAULT_SHADERS={},Graphics=function(G){__extends$L(U,G);function U(L){L===void 0&&(L=null);var Y=G.call(this)||this;return Y.shader=null,Y.pluginName="batch",Y.currentPath=null,Y.batches=[],Y.batchTint=-1,Y.batchDirty=-1,Y.vertexData=null,Y._fillStyle=new FillStyle,Y._lineStyle=new LineStyle,Y._matrix=null,Y._holeMode=!1,Y.state=State$1.for2d(),Y._geometry=L||new GraphicsGeometry,Y._geometry.refCount++,Y._transformID=-1,Y.tint=16777215,Y.blendMode=BLEND_MODES$4.NORMAL,Y}return Object.defineProperty(U.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),U.prototype.clone=function(){return this.finishPoly(),new U(this._geometry)},Object.defineProperty(U.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(L){this.state.blendMode=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tint",{get:function(){return this._tint},set:function(L){this._tint=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),U.prototype.lineStyle=function(L,Y,X,W,z){return L===void 0&&(L=null),Y===void 0&&(Y=0),X===void 0&&(X=1),W===void 0&&(W=.5),z===void 0&&(z=!1),typeof L=="number"&&(L={width:L,color:Y,alpha:X,alignment:W,native:z}),this.lineTextureStyle(L)},U.prototype.lineTextureStyle=function(L){L=Object.assign({width:0,texture:Texture$1.WHITE,color:L&&L.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10},L),this.currentPath&&this.startPoly();var Y=L.width>0&&L.alpha>0;return Y?(L.matrix&&(L.matrix=L.matrix.clone(),L.matrix.invert()),Object.assign(this._lineStyle,{visible:Y},L)):this._lineStyle.reset(),this},U.prototype.startPoly=function(){if(this.currentPath){var L=this.currentPath.points,Y=this.currentPath.points.length;Y>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(L[Y-2],L[Y-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1},U.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},U.prototype.moveTo=function(L,Y){return this.startPoly(),this.currentPath.points[0]=L,this.currentPath.points[1]=Y,this},U.prototype.lineTo=function(L,Y){this.currentPath||this.moveTo(0,0);var X=this.currentPath.points,W=X[X.length-2],z=X[X.length-1];return(W!==L||z!==Y)&&X.push(L,Y),this},U.prototype._initCurve=function(L,Y){L===void 0&&(L=0),Y===void 0&&(Y=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[L,Y]):this.moveTo(L,Y)},U.prototype.quadraticCurveTo=function(L,Y,X,W){this._initCurve();var z=this.currentPath.points;return z.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(L,Y,X,W,z),this},U.prototype.bezierCurveTo=function(L,Y,X,W,z,J){return this._initCurve(),BezierUtils.curveTo(L,Y,X,W,z,J,this.currentPath.points),this},U.prototype.arcTo=function(L,Y,X,W,z){this._initCurve(L,Y);var J=this.currentPath.points,Z=ArcUtils.curveTo(L,Y,X,W,z,J);if(Z){var ee=Z.cx,te=Z.cy,re=Z.radius,ie=Z.startAngle,ne=Z.endAngle,oe=Z.anticlockwise;this.arc(ee,te,re,ie,ne,oe)}return this},U.prototype.arc=function(L,Y,X,W,z,J){if(J===void 0&&(J=!1),W===z)return this;!J&&z<=W?z+=PI_2$1:J&&W<=z&&(W+=PI_2$1);var Z=z-W;if(Z===0)return this;var ee=L+Math.cos(W)*X,te=Y+Math.sin(W)*X,re=this._geometry.closePointEps,ie=this.currentPath?this.currentPath.points:null;if(ie){var ne=Math.abs(ie[ie.length-2]-ee),oe=Math.abs(ie[ie.length-1]-te);ne<re&&oe<re||ie.push(ee,te)}else this.moveTo(ee,te),ie=this.currentPath.points;return ArcUtils.arc(ee,te,L,Y,X,W,z,J,ie),this},U.prototype.beginFill=function(L,Y){return L===void 0&&(L=0),Y===void 0&&(Y=1),this.beginTextureFill({texture:Texture$1.WHITE,color:L,alpha:Y})},U.prototype.beginTextureFill=function(L){L=Object.assign({texture:Texture$1.WHITE,color:16777215,alpha:1,matrix:null},L),this.currentPath&&this.startPoly();var Y=L.alpha>0;return Y?(L.matrix&&(L.matrix=L.matrix.clone(),L.matrix.invert()),Object.assign(this._fillStyle,{visible:Y},L)):this._fillStyle.reset(),this},U.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},U.prototype.drawRect=function(L,Y,X,W){return this.drawShape(new Rectangle$1(L,Y,X,W))},U.prototype.drawRoundedRect=function(L,Y,X,W,z){return this.drawShape(new RoundedRectangle(L,Y,X,W,z))},U.prototype.drawCircle=function(L,Y,X){return this.drawShape(new Circle(L,Y,X))},U.prototype.drawEllipse=function(L,Y,X,W){return this.drawShape(new Ellipse(L,Y,X,W))},U.prototype.drawPolygon=function(){for(var L=arguments,Y=[],X=0;X<arguments.length;X++)Y[X]=L[X];var W,z=!0,J=Y[0];J.points?(z=J.closeStroke,W=J.points):Array.isArray(Y[0])?W=Y[0]:W=Y;var Z=new Polygon(W);return Z.closeStroke=z,this.drawShape(Z),this},U.prototype.drawShape=function(L){return this._holeMode?this._geometry.drawHole(L,this._matrix):this._geometry.drawShape(L,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},U.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},U.prototype.isFastRect=function(){var L=this._geometry.graphicsData;return L.length===1&&L[0].shape.type===SHAPES$1.RECT&&!L[0].matrix&&!L[0].holes.length&&!(L[0].lineStyle.visible&&L[0].lineStyle.width)},U.prototype._render=function(L){this.finishPoly();var Y=this._geometry,X=L.context.supports.uint32Indices;Y.updateBatches(X),Y.batchable?(this.batchDirty!==Y.batchDirty&&this._populateBatches(),this._renderBatched(L)):(L.batch.flush(),this._renderDirect(L))},U.prototype._populateBatches=function(){var L=this._geometry,Y=this.blendMode,X=L.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=L.batchDirty,this.batches.length=X,this.vertexData=new Float32Array(L.points);for(var W=0;W<X;W++){var z=L.batches[W],J=z.style.color,Z=new Float32Array(this.vertexData.buffer,z.attribStart*4*2,z.attribSize*2),ee=new Float32Array(L.uvsFloat32.buffer,z.attribStart*4*2,z.attribSize*2),te=new Uint16Array(L.indicesUint16.buffer,z.start*2,z.size),re={vertexData:Z,blendMode:Y,indices:te,uvs:ee,_batchRGB:hex2rgb$1(J),_tintRGB:J,_texture:z.style.texture,alpha:z.style.alpha,worldAlpha:1};this.batches[W]=re}},U.prototype._renderBatched=function(L){if(!!this.batches.length){L.batch.setObjectRenderer(L.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var Y=0,X=this.batches.length;Y<X;Y++){var W=this.batches[Y];W.worldAlpha=this.worldAlpha*W.alpha,L.plugins[this.pluginName].render(W)}}},U.prototype._renderDirect=function(L){var Y=this._resolveDirectShader(L),X=this._geometry,W=this.tint,z=this.worldAlpha,J=Y.uniforms,Z=X.drawCalls;J.translationMatrix=this.transform.worldTransform,J.tint[0]=(W>>16&255)/255*z,J.tint[1]=(W>>8&255)/255*z,J.tint[2]=(W&255)/255*z,J.tint[3]=z,L.shader.bind(Y),L.geometry.bind(X,Y),L.state.set(this.state);for(var ee=0,te=Z.length;ee<te;ee++)this._renderDrawCallDirect(L,X.drawCalls[ee])},U.prototype._renderDrawCallDirect=function(L,Y){for(var X=Y.texArray,W=Y.type,z=Y.size,J=Y.start,Z=X.count,ee=0;ee<Z;ee++)L.texture.bind(X.elements[ee],ee);L.geometry.draw(W,z,J)},U.prototype._resolveDirectShader=function(L){var Y=this.shader,X=this.pluginName;if(!Y){if(!DEFAULT_SHADERS[X]){for(var W=L.plugins[X].MAX_TEXTURES,z=new Int32Array(W),J=0;J<W;J++)z[J]=J;var Z={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix$1,default:UniformGroup$1.from({uSamplers:z},!0)},ee=L.plugins[X]._shader.program;DEFAULT_SHADERS[X]=new Shader$1(ee,Z)}Y=DEFAULT_SHADERS[X]}return Y},U.prototype._calculateBounds=function(){this.finishPoly();var L=this._geometry;if(!!L.graphicsData.length){var Y=L.bounds,X=Y.minX,W=Y.minY,z=Y.maxX,J=Y.maxY;this._bounds.addFrame(this.transform,X,W,z,J)}},U.prototype.containsPoint=function(L){return this.worldTransform.applyInverse(L,U._TEMP_POINT),this._geometry.containsPoint(U._TEMP_POINT)},U.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var L=hex2rgb$1(this.tint,temp),Y=0;Y<this.batches.length;Y++){var X=this.batches[Y],W=X._batchRGB,z=L[0]*W[0]*255,J=L[1]*W[1]*255,Z=L[2]*W[2]*255,ee=(z<<16)+(J<<8)+(Z|0);X._tintRGB=(ee>>16)+(ee&65280)+((ee&255)<<16)}}},U.prototype.calculateVertices=function(){var L=this.transform._worldID;if(this._transformID!==L){this._transformID=L;for(var Y=this.transform.worldTransform,X=Y.a,W=Y.b,z=Y.c,J=Y.d,Z=Y.tx,ee=Y.ty,te=this._geometry.points,re=this.vertexData,ie=0,ne=0;ne<te.length;ne+=2){var oe=te[ne],se=te[ne+1];re[ie++]=X*oe+z*se+Z,re[ie++]=J*se+W*oe+ee}}},U.prototype.closePath=function(){var L=this.currentPath;return L&&(L.closeStroke=!0,this.finishPoly()),this},U.prototype.setMatrix=function(L){return this._matrix=L,this},U.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},U.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},U.prototype.destroy=function(L){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,G.prototype.destroy.call(this,L)},U.nextRoundedRectBehavior=!1,U._TEMP_POINT=new Point$1,U}(Container$1),graphicsUtils={buildPoly,buildCircle,buildRectangle,buildRoundedRectangle,buildLine,ArcUtils,BezierUtils,QuadraticUtils,BatchPart,FILL_COMMANDS,BATCH_POOL,DRAW_CALL_POOL};/*!
 * @pixi/sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$i=function(G,U){return extendStatics$i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$i(G,U)};function __extends$K(G,U){extendStatics$i(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var tempPoint$2=new Point$1,indices=new Uint16Array([0,1,2,0,2,3]),Sprite=function(G){__extends$K(U,G);function U(L){var Y=G.call(this)||this;return Y._anchor=new ObservablePoint$1(Y._onAnchorUpdate,Y,L?L.defaultAnchor.x:0,L?L.defaultAnchor.y:0),Y._texture=null,Y._width=0,Y._height=0,Y._tint=null,Y._tintRGB=null,Y.tint=16777215,Y.blendMode=BLEND_MODES$4.NORMAL,Y._cachedTint=16777215,Y.uvs=null,Y.texture=L||Texture$1.EMPTY,Y.vertexData=new Float32Array(8),Y.vertexTrimmedData=null,Y._transformID=-1,Y._textureID=-1,Y._transformTrimmedID=-1,Y._textureTrimmedID=-1,Y.indices=indices,Y.pluginName="batch",Y.isSprite=!0,Y._roundPixels=settings$1.ROUND_PIXELS,Y}return U.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)},U.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},U.prototype.calculateVertices=function(){var L=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===L._updateID)){this._textureID!==L._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=L._updateID;var Y=this.transform.worldTransform,X=Y.a,W=Y.b,z=Y.c,J=Y.d,Z=Y.tx,ee=Y.ty,te=this.vertexData,re=L.trim,ie=L.orig,ne=this._anchor,oe=0,se=0,ae=0,le=0;if(re?(se=re.x-ne._x*ie.width,oe=se+re.width,le=re.y-ne._y*ie.height,ae=le+re.height):(se=-ne._x*ie.width,oe=se+ie.width,le=-ne._y*ie.height,ae=le+ie.height),te[0]=X*se+z*le+Z,te[1]=J*le+W*se+ee,te[2]=X*oe+z*le+Z,te[3]=J*le+W*oe+ee,te[4]=X*oe+z*ae+Z,te[5]=J*ae+W*oe+ee,te[6]=X*se+z*ae+Z,te[7]=J*ae+W*se+ee,this._roundPixels)for(var ue=settings$1.RESOLUTION,ce=0;ce<te.length;++ce)te[ce]=Math.round((te[ce]*ue|0)/ue)}},U.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var L=this._texture,Y=this.vertexTrimmedData,X=L.orig,W=this._anchor,z=this.transform.worldTransform,J=z.a,Z=z.b,ee=z.c,te=z.d,re=z.tx,ie=z.ty,ne=-W._x*X.width,oe=ne+X.width,se=-W._y*X.height,ae=se+X.height;Y[0]=J*ne+ee*se+re,Y[1]=te*se+Z*ne+ie,Y[2]=J*oe+ee*se+re,Y[3]=te*se+Z*oe+ie,Y[4]=J*oe+ee*ae+re,Y[5]=te*ae+Z*oe+ie,Y[6]=J*ne+ee*ae+re,Y[7]=te*ae+Z*ne+ie},U.prototype._render=function(L){this.calculateVertices(),L.batch.setObjectRenderer(L.plugins[this.pluginName]),L.plugins[this.pluginName].render(this)},U.prototype._calculateBounds=function(){var L=this._texture.trim,Y=this._texture.orig;!L||L.width===Y.width&&L.height===Y.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},U.prototype.getLocalBounds=function(L){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds$1),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),L||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),L=this._localBoundsRect),this._localBounds.getRectangle(L)):G.prototype.getLocalBounds.call(this,L)},U.prototype.containsPoint=function(L){this.worldTransform.applyInverse(L,tempPoint$2);var Y=this._texture.orig.width,X=this._texture.orig.height,W=-Y*this.anchor.x,z=0;return tempPoint$2.x>=W&&tempPoint$2.x<W+Y&&(z=-X*this.anchor.y,tempPoint$2.y>=z&&tempPoint$2.y<z+X)},U.prototype.destroy=function(L){G.prototype.destroy.call(this,L),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var Y=typeof L=="boolean"?L:L&&L.texture;if(Y){var X=typeof L=="boolean"?L:L&&L.baseTexture;this._texture.destroy(!!X)}this._texture=null},U.from=function(L,Y){var X=L instanceof Texture$1?L:Texture$1.from(L,Y);return new U(X)},Object.defineProperty(U.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(L){this._roundPixels!==L&&(this._transformID=-1),this._roundPixels=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(L){var Y=sign(this.scale.x)||1;this.scale.x=Y*L/this._texture.orig.width,this._width=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(L){var Y=sign(this.scale.y)||1;this.scale.y=Y*L/this._texture.orig.height,this._height=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"anchor",{get:function(){return this._anchor},set:function(L){this._anchor.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tint",{get:function(){return this._tint},set:function(L){this._tint=L,this._tintRGB=(L>>16)+(L&65280)+((L&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"texture",{get:function(){return this._texture},set:function(L){this._texture!==L&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=L||Texture$1.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,L&&(L.baseTexture.valid?this._onTextureUpdate():L.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),U}(Container$1);/*!
 * @pixi/text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$h=function(G,U){return extendStatics$h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$h(G,U)};function __extends$J(G,U){extendStatics$h(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var TEXT_GRADIENT;(function(G){G[G.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",G[G.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(TEXT_GRADIENT||(TEXT_GRADIENT={}));var defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],TextStyle=function(){function G(U){this.styleID=0,this.reset(),deepCopyProperties(this,U,U)}return G.prototype.clone=function(){var U={};return deepCopyProperties(U,this,defaultStyle),new G(U)},G.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},Object.defineProperty(G.prototype,"align",{get:function(){return this._align},set:function(U){this._align!==U&&(this._align=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"breakWords",{get:function(){return this._breakWords},set:function(U){this._breakWords!==U&&(this._breakWords=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(U){this._dropShadow!==U&&(this._dropShadow=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(U){this._dropShadowAlpha!==U&&(this._dropShadowAlpha=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(U){this._dropShadowAngle!==U&&(this._dropShadowAngle=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(U){this._dropShadowBlur!==U&&(this._dropShadowBlur=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(U){var L=getColor(U);this._dropShadowColor!==L&&(this._dropShadowColor=L,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(U){this._dropShadowDistance!==U&&(this._dropShadowDistance=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fill",{get:function(){return this._fill},set:function(U){var L=getColor(U);this._fill!==L&&(this._fill=L,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(U){this._fillGradientType!==U&&(this._fillGradientType=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(U){areArraysEqual(this._fillGradientStops,U)||(this._fillGradientStops=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(U){this.fontFamily!==U&&(this._fontFamily=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fontSize",{get:function(){return this._fontSize},set:function(U){this._fontSize!==U&&(this._fontSize=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(U){this._fontStyle!==U&&(this._fontStyle=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(U){this._fontVariant!==U&&(this._fontVariant=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(U){this._fontWeight!==U&&(this._fontWeight=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(U){this._letterSpacing!==U&&(this._letterSpacing=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(U){this._lineHeight!==U&&(this._lineHeight=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"leading",{get:function(){return this._leading},set:function(U){this._leading!==U&&(this._leading=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(U){this._lineJoin!==U&&(this._lineJoin=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(U){this._miterLimit!==U&&(this._miterLimit=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"padding",{get:function(){return this._padding},set:function(U){this._padding!==U&&(this._padding=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"stroke",{get:function(){return this._stroke},set:function(U){var L=getColor(U);this._stroke!==L&&(this._stroke=L,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(U){this._strokeThickness!==U&&(this._strokeThickness=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(U){this._textBaseline!==U&&(this._textBaseline=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"trim",{get:function(){return this._trim},set:function(U){this._trim!==U&&(this._trim=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(U){this._whiteSpace!==U&&(this._whiteSpace=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(U){this._wordWrap!==U&&(this._wordWrap=U,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(U){this._wordWrapWidth!==U&&(this._wordWrapWidth=U,this.styleID++)},enumerable:!1,configurable:!0}),G.prototype.toFontString=function(){var U=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,L=this.fontFamily;Array.isArray(this.fontFamily)||(L=this.fontFamily.split(","));for(var Y=L.length-1;Y>=0;Y--){var X=L[Y].trim();!/([\"\'])[^\'\"]+\1/.test(X)&&genericFontFamilies.indexOf(X)<0&&(X='"'+X+'"'),L[Y]=X}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+U+" "+L.join(",")},G}();function getSingleColor(G){return typeof G=="number"?hex2string$1(G):(typeof G=="string"&&G.indexOf("0x")===0&&(G=G.replace("0x","#")),G)}function getColor(G){if(Array.isArray(G)){for(var U=0;U<G.length;++U)G[U]=getSingleColor(G[U]);return G}else return getSingleColor(G)}function areArraysEqual(G,U){if(!Array.isArray(G)||!Array.isArray(U)||G.length!==U.length)return!1;for(var L=0;L<G.length;++L)if(G[L]!==U[L])return!1;return!0}function deepCopyProperties(G,U,L){for(var Y in L)Array.isArray(U[Y])?G[Y]=U[Y].slice():G[Y]=U[Y]}var TextMetrics=function(){function G(U,L,Y,X,W,z,J,Z,ee){this.text=U,this.style=L,this.width=Y,this.height=X,this.lines=W,this.lineWidths=z,this.lineHeight=J,this.maxLineWidth=Z,this.fontProperties=ee}return G.measureText=function(U,L,Y,X){X===void 0&&(X=G._canvas),Y=Y==null?L.wordWrap:Y;var W=L.toFontString(),z=G.measureFont(W);z.fontSize===0&&(z.fontSize=L.fontSize,z.ascent=L.fontSize);var J=X.getContext("2d");J.font=W;for(var Z=Y?G.wordWrap(U,L,X):U,ee=Z.split(/(?:\r\n|\r|\n)/),te=new Array(ee.length),re=0,ie=0;ie<ee.length;ie++){var ne=J.measureText(ee[ie]).width+(ee[ie].length-1)*L.letterSpacing;te[ie]=ne,re=Math.max(re,ne)}var oe=re+L.strokeThickness;L.dropShadow&&(oe+=L.dropShadowDistance);var se=L.lineHeight||z.fontSize+L.strokeThickness,ae=Math.max(se,z.fontSize+L.strokeThickness)+(ee.length-1)*(se+L.leading);return L.dropShadow&&(ae+=L.dropShadowDistance),new G(U,L,oe,ae,ee,te,se+L.leading,re,z)},G.wordWrap=function(U,L,Y){Y===void 0&&(Y=G._canvas);for(var X=Y.getContext("2d"),W=0,z="",J="",Z=Object.create(null),ee=L.letterSpacing,te=L.whiteSpace,re=G.collapseSpaces(te),ie=G.collapseNewlines(te),ne=!re,oe=L.wordWrapWidth+ee,se=G.tokenize(U),ae=0;ae<se.length;ae++){var le=se[ae];if(G.isNewline(le)){if(!ie){J+=G.addLine(z),ne=!re,z="",W=0;continue}le=" "}if(re){var ue=G.isBreakingSpace(le),ce=G.isBreakingSpace(z[z.length-1]);if(ue&&ce)continue}var he=G.getFromCache(le,ee,Z,X);if(he>oe)if(z!==""&&(J+=G.addLine(z),z="",W=0),G.canBreakWords(le,L.breakWords))for(var fe=G.wordWrapSplit(le),de=0;de<fe.length;de++){for(var _e=fe[de],me=1;fe[de+me];){var ve=fe[de+me],ye=_e[_e.length-1];if(!G.canBreakChars(ye,ve,le,de,L.breakWords))_e+=ve;else break;me++}de+=_e.length-1;var be=G.getFromCache(_e,ee,Z,X);be+W>oe&&(J+=G.addLine(z),ne=!1,z="",W=0),z+=_e,W+=be}else{z.length>0&&(J+=G.addLine(z),z="",W=0);var Te=ae===se.length-1;J+=G.addLine(le,!Te),ne=!1,z="",W=0}else he+W>oe&&(ne=!1,J+=G.addLine(z),z="",W=0),(z.length>0||!G.isBreakingSpace(le)||ne)&&(z+=le,W+=he)}return J+=G.addLine(z,!1),J},G.addLine=function(U,L){return L===void 0&&(L=!0),U=G.trimRight(U),U=L?U+`
`:U,U},G.getFromCache=function(U,L,Y,X){var W=Y[U];if(typeof W!="number"){var z=U.length*L;W=X.measureText(U).width+z,Y[U]=W}return W},G.collapseSpaces=function(U){return U==="normal"||U==="pre-line"},G.collapseNewlines=function(U){return U==="normal"},G.trimRight=function(U){if(typeof U!="string")return"";for(var L=U.length-1;L>=0;L--){var Y=U[L];if(!G.isBreakingSpace(Y))break;U=U.slice(0,-1)}return U},G.isNewline=function(U){return typeof U!="string"?!1:G._newlines.indexOf(U.charCodeAt(0))>=0},G.isBreakingSpace=function(U,L){return typeof U!="string"?!1:G._breakingSpaces.indexOf(U.charCodeAt(0))>=0},G.tokenize=function(U){var L=[],Y="";if(typeof U!="string")return L;for(var X=0;X<U.length;X++){var W=U[X],z=U[X+1];if(G.isBreakingSpace(W,z)||G.isNewline(W)){Y!==""&&(L.push(Y),Y=""),L.push(W);continue}Y+=W}return Y!==""&&L.push(Y),L},G.canBreakWords=function(U,L){return L},G.canBreakChars=function(U,L,Y,X,W){return!0},G.wordWrapSplit=function(U){return U.split("")},G.measureFont=function(U){if(G._fonts[U])return G._fonts[U];var L={ascent:0,descent:0,fontSize:0},Y=G._canvas,X=G._context;X.font=U;var W=G.METRICS_STRING+G.BASELINE_SYMBOL,z=Math.ceil(X.measureText(W).width),J=Math.ceil(X.measureText(G.BASELINE_SYMBOL).width),Z=Math.ceil(G.HEIGHT_MULTIPLIER*J);J=J*G.BASELINE_MULTIPLIER|0,Y.width=z,Y.height=Z,X.fillStyle="#f00",X.fillRect(0,0,z,Z),X.font=U,X.textBaseline="alphabetic",X.fillStyle="#000",X.fillText(W,0,J);var ee=X.getImageData(0,0,z,Z).data,te=ee.length,re=z*4,ie=0,ne=0,oe=!1;for(ie=0;ie<J;++ie){for(var se=0;se<re;se+=4)if(ee[ne+se]!==255){oe=!0;break}if(!oe)ne+=re;else break}for(L.ascent=J-ie,ne=te-re,oe=!1,ie=Z;ie>J;--ie){for(var se=0;se<re;se+=4)if(ee[ne+se]!==255){oe=!0;break}if(!oe)ne-=re;else break}return L.descent=ie-J,L.fontSize=L.ascent+L.descent,G._fonts[U]=L,L},G.clearMetrics=function(U){U===void 0&&(U=""),U?delete G._fonts[U]:G._fonts={}},Object.defineProperty(G,"_canvas",{get:function(){if(!G.__canvas){var U=void 0;try{var L=new OffscreenCanvas(0,0),Y=L.getContext("2d");if(Y&&Y.measureText)return G.__canvas=L,L;U=document.createElement("canvas")}catch(X){U=document.createElement("canvas")}U.width=U.height=10,G.__canvas=U}return G.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(G,"_context",{get:function(){return G.__context||(G.__context=G._canvas.getContext("2d")),G.__context},enumerable:!1,configurable:!0}),G}();TextMetrics._fonts={};TextMetrics.METRICS_STRING="|\xC9q\xC5";TextMetrics.BASELINE_SYMBOL="M";TextMetrics.BASELINE_MULTIPLIER=1.4;TextMetrics.HEIGHT_MULTIPLIER=2;TextMetrics._newlines=[10,13];TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(G){__extends$J(U,G);function U(L,Y,X){var W=this,z=!1;X||(X=document.createElement("canvas"),z=!0),X.width=3,X.height=3;var J=Texture$1.from(X);return J.orig=new Rectangle$1,J.trim=new Rectangle$1,W=G.call(this,J)||this,W._ownCanvas=z,W.canvas=X,W.context=W.canvas.getContext("2d"),W._resolution=settings$1.RESOLUTION,W._autoResolution=!0,W._text=null,W._style=null,W._styleListener=null,W._font="",W.text=L,W.style=Y,W.localStyleID=-1,W}return U.prototype.updateText=function(L){var Y=this._style;if(this.localStyleID!==Y.styleID&&(this.dirty=!0,this.localStyleID=Y.styleID),!(!this.dirty&&L)){this._font=this._style.toFontString();var X=this.context,W=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),z=W.width,J=W.height,Z=W.lines,ee=W.lineHeight,te=W.lineWidths,re=W.maxLineWidth,ie=W.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,z)+Y.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,J)+Y.padding*2)*this._resolution),X.scale(this._resolution,this._resolution),X.clearRect(0,0,this.canvas.width,this.canvas.height),X.font=this._font,X.lineWidth=Y.strokeThickness,X.textBaseline=Y.textBaseline,X.lineJoin=Y.lineJoin,X.miterLimit=Y.miterLimit;for(var ne,oe,se=Y.dropShadow?2:1,ae=0;ae<se;++ae){var le=Y.dropShadow&&ae===0,ue=le?Math.ceil(Math.max(1,J)+Y.padding*2):0,ce=ue*this._resolution;if(le){X.fillStyle="black",X.strokeStyle="black";var he=Y.dropShadowColor,fe=hex2rgb$1(typeof he=="number"?he:string2hex(he)),de=Y.dropShadowBlur*this._resolution,_e=Y.dropShadowDistance*this._resolution;X.shadowColor="rgba("+fe[0]*255+","+fe[1]*255+","+fe[2]*255+","+Y.dropShadowAlpha+")",X.shadowBlur=de,X.shadowOffsetX=Math.cos(Y.dropShadowAngle)*_e,X.shadowOffsetY=Math.sin(Y.dropShadowAngle)*_e+ce}else X.fillStyle=this._generateFillStyle(Y,Z,W),X.strokeStyle=Y.stroke,X.shadowColor="black",X.shadowBlur=0,X.shadowOffsetX=0,X.shadowOffsetY=0;var me=(ee-ie.fontSize)/2;(!U.nextLineHeightBehavior||ee-ie.fontSize<0)&&(me=0);for(var ve=0;ve<Z.length;ve++)ne=Y.strokeThickness/2,oe=Y.strokeThickness/2+ve*ee+ie.ascent+me,Y.align==="right"?ne+=re-te[ve]:Y.align==="center"&&(ne+=(re-te[ve])/2),Y.stroke&&Y.strokeThickness&&this.drawLetterSpacing(Z[ve],ne+Y.padding,oe+Y.padding-ue,!0),Y.fill&&this.drawLetterSpacing(Z[ve],ne+Y.padding,oe+Y.padding-ue)}this.updateTexture()}},U.prototype.drawLetterSpacing=function(L,Y,X,W){W===void 0&&(W=!1);var z=this._style,J=z.letterSpacing,Z=U.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(J===0||Z){Z&&(this.context.letterSpacing=J,this.context.textLetterSpacing=J),W?this.context.strokeText(L,Y,X):this.context.fillText(L,Y,X);return}for(var ee=Y,te=Array.from?Array.from(L):L.split(""),re=this.context.measureText(L).width,ie=0,ne=0;ne<te.length;++ne){var oe=te[ne];W?this.context.strokeText(oe,ee,X):this.context.fillText(oe,ee,X);for(var se="",ae=ne+1;ae<te.length;++ae)se+=te[ae];ie=this.context.measureText(se).width,ee+=re-ie+J,re=ie}},U.prototype.updateTexture=function(){var L=this.canvas;if(this._style.trim){var Y=trimCanvas(L);Y.data&&(L.width=Y.width,L.height=Y.height,this.context.putImageData(Y.data,0,0))}var X=this._texture,W=this._style,z=W.trim?0:W.padding,J=X.baseTexture;X.trim.width=X._frame.width=L.width/this._resolution,X.trim.height=X._frame.height=L.height/this._resolution,X.trim.x=-z,X.trim.y=-z,X.orig.width=X._frame.width-z*2,X.orig.height=X._frame.height-z*2,this._onTextureUpdate(),J.setRealSize(L.width,L.height,this._resolution),X.updateUvs(),this.dirty=!1},U.prototype._render=function(L){this._autoResolution&&this._resolution!==L.resolution&&(this._resolution=L.resolution,this.dirty=!0),this.updateText(!0),G.prototype._render.call(this,L)},U.prototype.updateTransform=function(){this.updateText(!0),G.prototype.updateTransform.call(this)},U.prototype.getBounds=function(L,Y){return this.updateText(!0),this._textureID===-1&&(L=!1),G.prototype.getBounds.call(this,L,Y)},U.prototype.getLocalBounds=function(L){return this.updateText(!0),G.prototype.getLocalBounds.call(this,L)},U.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},U.prototype._generateFillStyle=function(L,Y,X){var W=L.fill;if(Array.isArray(W)){if(W.length===1)return W[0]}else return W;var z,J=L.dropShadow?L.dropShadowDistance:0,Z=L.padding||0,ee=this.canvas.width/this._resolution-J-Z*2,te=this.canvas.height/this._resolution-J-Z*2,re=W.slice(),ie=L.fillGradientStops.slice();if(!ie.length)for(var ne=re.length+1,oe=1;oe<ne;++oe)ie.push(oe/ne);if(re.unshift(W[0]),ie.unshift(0),re.push(W[W.length-1]),ie.push(1),L.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){z=this.context.createLinearGradient(ee/2,Z,ee/2,te+Z);for(var se=X.fontProperties.fontSize+L.strokeThickness,oe=0;oe<Y.length;oe++){var ae=X.lineHeight*(oe-1)+se,le=X.lineHeight*oe,ue=le;oe>0&&ae>le&&(ue=(le+ae)/2);var ce=le+se,he=X.lineHeight*(oe+1),fe=ce;oe+1<Y.length&&he<ce&&(fe=(ce+he)/2);for(var de=(fe-ue)/te,_e=0;_e<re.length;_e++){var me=0;typeof ie[_e]=="number"?me=ie[_e]:me=_e/re.length;var ve=Math.min(1,Math.max(0,ue/te+me*de));ve=Number(ve.toFixed(5)),z.addColorStop(ve,re[_e])}}}else{z=this.context.createLinearGradient(Z,te/2,ee+Z,te/2);for(var ye=re.length+1,be=1,oe=0;oe<re.length;oe++){var Te=void 0;typeof ie[oe]=="number"?Te=ie[oe]:Te=be/ye,z.addColorStop(Te,re[oe]),be++}}return z},U.prototype.destroy=function(L){typeof L=="boolean"&&(L={children:L}),L=Object.assign({},defaultDestroyOptions,L),G.prototype.destroy.call(this,L),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(U.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(L){this.updateText(!0);var Y=sign(this.scale.x)||1;this.scale.x=Y*L/this._texture.orig.width,this._width=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(L){this.updateText(!0);var Y=sign(this.scale.y)||1;this.scale.y=Y*L/this._texture.orig.height,this._height=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"style",{get:function(){return this._style},set:function(L){L=L||{},L instanceof TextStyle?this._style=L:this._style=new TextStyle(L),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"text",{get:function(){return this._text},set:function(L){L=String(L==null?"":L),this._text!==L&&(this._text=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"resolution",{get:function(){return this._resolution},set:function(L){this._autoResolution=!1,this._resolution!==L&&(this._resolution=L,this.dirty=!0)},enumerable:!1,configurable:!0}),U.nextLineHeightBehavior=!1,U.experimentalLetterSpacing=!1,U}(Sprite);/*!
 * @pixi/prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$g=function(G,U){return extendStatics$g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$g(G,U)};function __extends$I(G,U){extendStatics$g(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var CountLimiter=function(){function G(U){this.maxItemsPerFrame=U,this.itemsLeft=0}return G.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},G.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},G}();function findMultipleBaseTextures(G,U){var L=!1;if(G&&G._textures&&G._textures.length){for(var Y=0;Y<G._textures.length;Y++)if(G._textures[Y]instanceof Texture$1){var X=G._textures[Y].baseTexture;U.indexOf(X)===-1&&(U.push(X),L=!0)}}return L}function findBaseTexture(G,U){if(G.baseTexture instanceof BaseTexture$1){var L=G.baseTexture;return U.indexOf(L)===-1&&U.push(L),!0}return!1}function findTexture(G,U){if(G._texture&&G._texture instanceof Texture$1){var L=G._texture.baseTexture;return U.indexOf(L)===-1&&U.push(L),!0}return!1}function drawText(G,U){return U instanceof Text?(U.updateText(!0),!0):!1}function calculateTextStyle(G,U){if(U instanceof TextStyle){var L=U.toFontString();return TextMetrics.measureFont(L),!0}return!1}function findText(G,U){if(G instanceof Text){U.indexOf(G.style)===-1&&U.push(G.style),U.indexOf(G)===-1&&U.push(G);var L=G._texture.baseTexture;return U.indexOf(L)===-1&&U.push(L),!0}return!1}function findTextStyle(G,U){return G instanceof TextStyle?(U.indexOf(G)===-1&&U.push(G),!0):!1}var BasePrepare=function(){function G(U){var L=this;this.limiter=new CountLimiter(settings$1.UPLOADS_PER_FRAME),this.renderer=U,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!L.queue||L.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return G.prototype.upload=function(U,L){typeof U=="function"&&(L=U,U=null),U&&this.add(U),this.queue.length?(L&&this.completes.push(L),this.ticking||(this.ticking=!0,Ticker$1.system.addOnce(this.tick,this,UPDATE_PRIORITY$1.UTILITY))):L&&L()},G.prototype.tick=function(){setTimeout(this.delayedTick,0)},G.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var U=this.queue[0],L=!1;if(U&&!U._destroyed){for(var Y=0,X=this.uploadHooks.length;Y<X;Y++)if(this.uploadHooks[Y](this.uploadHookHelper,U)){this.queue.shift(),L=!0;break}}L||this.queue.shift()}if(this.queue.length)Ticker$1.system.addOnce(this.tick,this,UPDATE_PRIORITY$1.UTILITY);else{this.ticking=!1;var W=this.completes.slice(0);this.completes.length=0;for(var Y=0,X=W.length;Y<X;Y++)W[Y]()}},G.prototype.registerFindHook=function(U){return U&&this.addHooks.push(U),this},G.prototype.registerUploadHook=function(U){return U&&this.uploadHooks.push(U),this},G.prototype.add=function(U){for(var L=0,Y=this.addHooks.length;L<Y&&!this.addHooks[L](U,this.queue);L++);if(U instanceof Container$1)for(var L=U.children.length-1;L>=0;L--)this.add(U.children[L]);return this},G.prototype.destroy=function(){this.ticking&&Ticker$1.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},G}();function uploadBaseTextures$1(G,U){return U instanceof BaseTexture$1?(U._glTextures[G.CONTEXT_UID]||G.texture.bind(U),!0):!1}function uploadGraphics(G,U){if(!(U instanceof Graphics))return!1;var L=U.geometry;U.finishPoly(),L.updateBatches();for(var Y=L.batches,X=0;X<Y.length;X++){var W=Y[X].style.texture;W&&uploadBaseTextures$1(G,W.baseTexture)}return L.batchable||G.geometry.bind(L,U._resolveDirectShader(G)),!0}function findGraphics(G,U){return G instanceof Graphics?(U.push(G),!0):!1}var Prepare=function(G){__extends$I(U,G);function U(L){var Y=G.call(this,L)||this;return Y.uploadHookHelper=Y.renderer,Y.registerFindHook(findGraphics),Y.registerUploadHook(uploadBaseTextures$1),Y.registerUploadHook(uploadGraphics),Y}return U}(BasePrepare),TimeLimiter=function(){function G(U){this.maxMilliseconds=U,this.frameStart=0}return G.prototype.beginFrame=function(){this.frameStart=Date.now()},G.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},G}();/*!
 * @pixi/spritesheet - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Spritesheet=function(){function G(U,L,Y){Y===void 0&&(Y=null),this._texture=U instanceof Texture$1?U:null,this.baseTexture=U instanceof BaseTexture$1?U:this._texture.baseTexture,this.textures={},this.animations={},this.data=L;var X=this.baseTexture.resource;this.resolution=this._updateResolution(Y||(X?X.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return G.prototype._updateResolution=function(U){U===void 0&&(U=null);var L=this.data.meta.scale,Y=getResolutionOfUrl$1(U,null);return Y===null&&(Y=L!==void 0?parseFloat(L):1),Y!==1&&this.baseTexture.setResolution(Y),Y},G.prototype.parse=function(U){this._batchIndex=0,this._callback=U,this._frameKeys.length<=G.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},G.prototype._processFrames=function(U){for(var L=U,Y=G.BATCH_SIZE;L-U<Y&&L<this._frameKeys.length;){var X=this._frameKeys[L],W=this._frames[X],z=W.frame;if(z){var J=null,Z=null,ee=W.trimmed!==!1&&W.sourceSize?W.sourceSize:W.frame,te=new Rectangle$1(0,0,Math.floor(ee.w)/this.resolution,Math.floor(ee.h)/this.resolution);W.rotated?J=new Rectangle$1(Math.floor(z.x)/this.resolution,Math.floor(z.y)/this.resolution,Math.floor(z.h)/this.resolution,Math.floor(z.w)/this.resolution):J=new Rectangle$1(Math.floor(z.x)/this.resolution,Math.floor(z.y)/this.resolution,Math.floor(z.w)/this.resolution,Math.floor(z.h)/this.resolution),W.trimmed!==!1&&W.spriteSourceSize&&(Z=new Rectangle$1(Math.floor(W.spriteSourceSize.x)/this.resolution,Math.floor(W.spriteSourceSize.y)/this.resolution,Math.floor(z.w)/this.resolution,Math.floor(z.h)/this.resolution)),this.textures[X]=new Texture$1(this.baseTexture,J,te,Z,W.rotated?2:0,W.anchor),Texture$1.addToCache(this.textures[X],X)}L++}},G.prototype._processAnimations=function(){var U=this.data.animations||{};for(var L in U){this.animations[L]=[];for(var Y=0;Y<U[L].length;Y++){var X=U[L][Y];this.animations[L].push(this.textures[X])}}},G.prototype._parseComplete=function(){var U=this._callback;this._callback=null,this._batchIndex=0,U.call(this,this.textures)},G.prototype._nextBatch=function(){var U=this;this._processFrames(this._batchIndex*G.BATCH_SIZE),this._batchIndex++,setTimeout(function(){U._batchIndex*G.BATCH_SIZE<U._frameKeys.length?U._nextBatch():(U._processAnimations(),U._parseComplete())},0)},G.prototype.destroy=function(U){var L;U===void 0&&(U=!1);for(var Y in this.textures)this.textures[Y].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,U&&((L=this._texture)===null||L===void 0||L.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},G.BATCH_SIZE=1e3,G}(),SpritesheetLoader=function(){function G(){}return G.use=function(U,L){var Y,X,W=this,z=U.name+"_image";if(!U.data||U.type!==LoaderResource.TYPE.JSON||!U.data.frames||W.resources[z]){L();return}var J=(X=(Y=U.data)===null||Y===void 0?void 0:Y.meta)===null||X===void 0?void 0:X.related_multi_packs;if(Array.isArray(J))for(var Z=function(oe){if(typeof oe!="string")return"continue";var se=oe.replace(".json",""),ae=url$2.resolve(U.url.replace(W.baseUrl,""),oe);if(W.resources[se]||Object.values(W.resources).some(function(ue){return url$2.format(url$2.parse(ue.url))===ae}))return"continue";var le={crossOrigin:U.crossOrigin,loadType:LoaderResource.LOAD_TYPE.XHR,xhrType:LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:U,metadata:U.metadata};W.add(se,ae,le)},ee=0,te=J;ee<te.length;ee++){var re=te[ee];Z(re)}var ie={crossOrigin:U.crossOrigin,metadata:U.metadata.imageMetadata,parentResource:U},ne=G.getResourcePath(U,W.baseUrl);W.add(z,ne,ie,function(se){if(se.error){L(se.error);return}var ae=new Spritesheet(se.texture,U.data,U.url);ae.parse(function(){U.spritesheet=ae,U.textures=ae.textures,L()})})},G.getResourcePath=function(U,L){return U.isDataUrl?U.data.meta.image:url$2.resolve(U.url.replace(L,""),U.data.meta.image)},G}();/*!
 * @pixi/sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$f=function(G,U){return extendStatics$f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$f(G,U)};function __extends$H(G,U){extendStatics$f(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var tempPoint$1=new Point$1,TilingSprite=function(G){__extends$H(U,G);function U(L,Y,X){Y===void 0&&(Y=100),X===void 0&&(X=100);var W=G.call(this,L)||this;return W.tileTransform=new Transform,W._width=Y,W._height=X,W.uvMatrix=W.texture.uvMatrix||new TextureMatrix$1(L),W.pluginName="tilingSprite",W.uvRespectAnchor=!1,W}return Object.defineProperty(U.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(L){this.uvMatrix.clampMargin=L,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(L){this.tileTransform.scale.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(L){this.tileTransform.position.copyFrom(L)},enumerable:!1,configurable:!0}),U.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},U.prototype._render=function(L){var Y=this._texture;!Y||!Y.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),L.batch.setObjectRenderer(L.plugins[this.pluginName]),L.plugins[this.pluginName].render(this))},U.prototype._calculateBounds=function(){var L=this._width*-this._anchor._x,Y=this._height*-this._anchor._y,X=this._width*(1-this._anchor._x),W=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,L,Y,X,W)},U.prototype.getLocalBounds=function(L){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),L||(this._localBoundsRect||(this._localBoundsRect=new Rectangle$1),L=this._localBoundsRect),this._bounds.getRectangle(L)):G.prototype.getLocalBounds.call(this,L)},U.prototype.containsPoint=function(L){this.worldTransform.applyInverse(L,tempPoint$1);var Y=this._width,X=this._height,W=-Y*this.anchor._x;if(tempPoint$1.x>=W&&tempPoint$1.x<W+Y){var z=-X*this.anchor._y;if(tempPoint$1.y>=z&&tempPoint$1.y<z+X)return!0}return!1},U.prototype.destroy=function(L){G.prototype.destroy.call(this,L),this.tileTransform=null,this.uvMatrix=null},U.from=function(L,Y){var X=L instanceof Texture$1?L:Texture$1.from(L,Y);return new U(X,Y.width,Y.height)},Object.defineProperty(U.prototype,"width",{get:function(){return this._width},set:function(L){this._width=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this._height},set:function(L){this._height=L},enumerable:!1,configurable:!0}),U}(Sprite),fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,tempMat$1=new Matrix$1,TilingSpriteRenderer=function(G){__extends$H(U,G);function U(L){var Y=G.call(this,L)||this;return L.runners.contextChange.add(Y),Y.quad=new QuadUv$1,Y.state=State$1.for2d(),Y}return U.prototype.contextChange=function(){var L=this.renderer,Y={globals:L.globalUniforms};this.simpleShader=Shader$1.from(gl1VertexSrc,fragmentSimpleSrc,Y),this.shader=L.context.webGLVersion>1?Shader$1.from(gl2VertexSrc,gl2FragmentSrc,Y):Shader$1.from(gl1VertexSrc,gl1FragmentSrc,Y)},U.prototype.render=function(L){var Y=this.renderer,X=this.quad,W=X.vertices;W[0]=W[6]=L._width*-L.anchor.x,W[1]=W[3]=L._height*-L.anchor.y,W[2]=W[4]=L._width*(1-L.anchor.x),W[5]=W[7]=L._height*(1-L.anchor.y);var z=L.uvRespectAnchor?L.anchor.x:0,J=L.uvRespectAnchor?L.anchor.y:0;W=X.uvs,W[0]=W[6]=-z,W[1]=W[3]=-J,W[2]=W[4]=1-z,W[5]=W[7]=1-J,X.invalidate();var Z=L._texture,ee=Z.baseTexture,te=L.tileTransform.localTransform,re=L.uvMatrix,ie=ee.isPowerOfTwo&&Z.frame.width===ee.width&&Z.frame.height===ee.height;ie&&(ee._glTextures[Y.CONTEXT_UID]?ie=ee.wrapMode!==WRAP_MODES$4.CLAMP:ee.wrapMode===WRAP_MODES$4.CLAMP&&(ee.wrapMode=WRAP_MODES$4.REPEAT));var ne=ie?this.simpleShader:this.shader,oe=Z.width,se=Z.height,ae=L._width,le=L._height;tempMat$1.set(te.a*oe/ae,te.b*oe/le,te.c*se/ae,te.d*se/le,te.tx/ae,te.ty/le),tempMat$1.invert(),ie?tempMat$1.prepend(re.mapCoord):(ne.uniforms.uMapCoord=re.mapCoord.toArray(!0),ne.uniforms.uClampFrame=re.uClampFrame,ne.uniforms.uClampOffset=re.uClampOffset),ne.uniforms.uTransform=tempMat$1.toArray(!0),ne.uniforms.uColor=premultiplyTintToRgba(L.tint,L.worldAlpha,ne.uniforms.uColor,ee.alphaMode),ne.uniforms.translationMatrix=L.transform.worldTransform.toArray(!0),ne.uniforms.uSampler=Z,Y.shader.bind(ne),Y.geometry.bind(X),this.state.blendMode=correctBlendMode(L.blendMode,ee.alphaMode),Y.state.set(this.state),Y.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},U}(ObjectRenderer$1);/*!
 * @pixi/mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$e=function(G,U){return extendStatics$e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$e(G,U)};function __extends$G(G,U){extendStatics$e(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var MeshBatchUvs=function(){function G(U,L){this.uvBuffer=U,this.uvMatrix=L,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return G.prototype.update=function(U){if(!(!U&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var L=this.uvBuffer.data;(!this.data||this.data.length!==L.length)&&(this.data=new Float32Array(L.length)),this.uvMatrix.multiplyUvs(L,this.data),this._updateID++}},G}(),tempPoint=new Point$1,tempPolygon=new Polygon,Mesh=function(G){__extends$G(U,G);function U(L,Y,X,W){W===void 0&&(W=DRAW_MODES$4.TRIANGLES);var z=G.call(this)||this;return z.geometry=L,z.shader=Y,z.state=X||State$1.for2d(),z.drawMode=W,z.start=0,z.size=0,z.uvs=null,z.indices=null,z.vertexData=new Float32Array(1),z.vertexDirty=-1,z._transformID=-1,z._roundPixels=settings$1.ROUND_PIXELS,z.batchUvs=null,z}return Object.defineProperty(U.prototype,"geometry",{get:function(){return this._geometry},set:function(L){this._geometry!==L&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=L,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"material",{get:function(){return this.shader},set:function(L){this.shader=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(L){this.state.blendMode=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(L){this._roundPixels!==L&&(this._transformID=-1),this._roundPixels=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(L){this.shader.tint=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(L){this.shader.texture=L},enumerable:!1,configurable:!0}),U.prototype._render=function(L){var Y=this.geometry.buffers[0].data,X=this.shader;X.batchable&&this.drawMode===DRAW_MODES$4.TRIANGLES&&Y.length<U.BATCHABLE_SIZE*2?this._renderToBatch(L):this._renderDefault(L)},U.prototype._renderDefault=function(L){var Y=this.shader;Y.alpha=this.worldAlpha,Y.update&&Y.update(),L.batch.flush(),Y.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),L.shader.bind(Y),L.state.set(this.state),L.geometry.bind(this.geometry,Y),L.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},U.prototype._renderToBatch=function(L){var Y=this.geometry,X=this.shader;X.uvMatrix&&(X.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=Y.indexBuffer.data,this._tintRGB=X._tintRGB,this._texture=X.texture;var W=this.material.pluginName;L.batch.setObjectRenderer(L.plugins[W]),L.plugins[W].render(this)},U.prototype.calculateVertices=function(){var L=this.geometry,Y=L.buffers[0],X=Y.data,W=Y._updateID;if(!(W===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==X.length&&(this.vertexData=new Float32Array(X.length));for(var z=this.transform.worldTransform,J=z.a,Z=z.b,ee=z.c,te=z.d,re=z.tx,ie=z.ty,ne=this.vertexData,oe=0;oe<ne.length/2;oe++){var se=X[oe*2],ae=X[oe*2+1];ne[oe*2]=J*se+ee*ae+re,ne[oe*2+1]=Z*se+te*ae+ie}if(this._roundPixels)for(var le=settings$1.RESOLUTION,oe=0;oe<ne.length;++oe)ne[oe]=Math.round((ne[oe]*le|0)/le);this.vertexDirty=W}},U.prototype.calculateUvs=function(){var L=this.geometry.buffers[1],Y=this.shader;Y.uvMatrix.isSimple?this.uvs=L.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(L,Y.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},U.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},U.prototype.containsPoint=function(L){if(!this.getBounds().contains(L.x,L.y))return!1;this.worldTransform.applyInverse(L,tempPoint);for(var Y=this.geometry.getBuffer("aVertexPosition").data,X=tempPolygon.points,W=this.geometry.getIndex().data,z=W.length,J=this.drawMode===4?3:1,Z=0;Z+2<z;Z+=J){var ee=W[Z]*2,te=W[Z+1]*2,re=W[Z+2]*2;if(X[0]=Y[ee],X[1]=Y[ee+1],X[2]=Y[te],X[3]=Y[te+1],X[4]=Y[re],X[5]=Y[re+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},U.prototype.destroy=function(L){G.prototype.destroy.call(this,L),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},U.BATCHABLE_SIZE=100,U}(Container$1),fragment$6=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,MeshMaterial=function(G){__extends$G(U,G);function U(L,Y){var X=this,W={uSampler:L,alpha:1,uTextureMatrix:Matrix$1.IDENTITY,uColor:new Float32Array([1,1,1,1])};return Y=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},Y),Y.uniforms&&Object.assign(W,Y.uniforms),X=G.call(this,Y.program||Program$1.from(vertex$3,fragment$6),W)||this,X._colorDirty=!1,X.uvMatrix=new TextureMatrix$1(L),X.batchable=Y.program===void 0,X.pluginName=Y.pluginName,X.tint=Y.tint,X.alpha=Y.alpha,X}return Object.defineProperty(U.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(L){this.uniforms.uSampler!==L&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!L.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=L,this.uvMatrix.texture=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"alpha",{get:function(){return this._alpha},set:function(L){L!==this._alpha&&(this._alpha=L,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tint",{get:function(){return this._tint},set:function(L){L!==this._tint&&(this._tint=L,this._tintRGB=(L>>16)+(L&65280)+((L&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),U.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var L=this.texture.baseTexture;premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,L.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},U}(Shader$1),MeshGeometry=function(G){__extends$G(U,G);function U(L,Y,X){var W=G.call(this)||this,z=new Buffer$1(L),J=new Buffer$1(Y,!0),Z=new Buffer$1(X,!0,!0);return W.addAttribute("aVertexPosition",z,2,!1,TYPES$4.FLOAT).addAttribute("aTextureCoord",J,2,!1,TYPES$4.FLOAT).addIndex(Z),W._updateId=-1,W}return Object.defineProperty(U.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),U}(Geometry$1);/*!
 * @pixi/text-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$d=function(G,U){return extendStatics$d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$d(G,U)};function __extends$F(G,U){extendStatics$d(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var BitmapFontData=function(){function G(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return G}(),TextFormat=function(){function G(){}return G.test=function(U){return typeof U=="string"&&U.indexOf("info face=")===0},G.parse=function(U){var L=U.match(/^[a-z]+\s+.+$/gm),Y={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var X in L){var W=L[X].match(/^[a-z]+/gm)[0],z=L[X].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),J={};for(var Z in z){var ee=z[Z].split("="),te=ee[0],re=ee[1].replace(/"/gm,""),ie=parseFloat(re),ne=isNaN(ie)?re:ie;J[te]=ne}Y[W].push(J)}var oe=new BitmapFontData;return Y.info.forEach(function(se){return oe.info.push({face:se.face,size:parseInt(se.size,10)})}),Y.common.forEach(function(se){return oe.common.push({lineHeight:parseInt(se.lineHeight,10)})}),Y.page.forEach(function(se){return oe.page.push({id:parseInt(se.id,10),file:se.file})}),Y.char.forEach(function(se){return oe.char.push({id:parseInt(se.id,10),page:parseInt(se.page,10),x:parseInt(se.x,10),y:parseInt(se.y,10),width:parseInt(se.width,10),height:parseInt(se.height,10),xoffset:parseInt(se.xoffset,10),yoffset:parseInt(se.yoffset,10),xadvance:parseInt(se.xadvance,10)})}),Y.kerning.forEach(function(se){return oe.kerning.push({first:parseInt(se.first,10),second:parseInt(se.second,10),amount:parseInt(se.amount,10)})}),Y.distanceField.forEach(function(se){return oe.distanceField.push({distanceRange:parseInt(se.distanceRange,10),fieldType:se.fieldType})}),oe},G}(),XMLFormat=function(){function G(){}return G.test=function(U){return U instanceof XMLDocument&&U.getElementsByTagName("page").length&&U.getElementsByTagName("info")[0].getAttribute("face")!==null},G.parse=function(U){for(var L=new BitmapFontData,Y=U.getElementsByTagName("info"),X=U.getElementsByTagName("common"),W=U.getElementsByTagName("page"),z=U.getElementsByTagName("char"),J=U.getElementsByTagName("kerning"),Z=U.getElementsByTagName("distanceField"),ee=0;ee<Y.length;ee++)L.info.push({face:Y[ee].getAttribute("face"),size:parseInt(Y[ee].getAttribute("size"),10)});for(var ee=0;ee<X.length;ee++)L.common.push({lineHeight:parseInt(X[ee].getAttribute("lineHeight"),10)});for(var ee=0;ee<W.length;ee++)L.page.push({id:parseInt(W[ee].getAttribute("id"),10)||0,file:W[ee].getAttribute("file")});for(var ee=0;ee<z.length;ee++){var te=z[ee];L.char.push({id:parseInt(te.getAttribute("id"),10),page:parseInt(te.getAttribute("page"),10)||0,x:parseInt(te.getAttribute("x"),10),y:parseInt(te.getAttribute("y"),10),width:parseInt(te.getAttribute("width"),10),height:parseInt(te.getAttribute("height"),10),xoffset:parseInt(te.getAttribute("xoffset"),10),yoffset:parseInt(te.getAttribute("yoffset"),10),xadvance:parseInt(te.getAttribute("xadvance"),10)})}for(var ee=0;ee<J.length;ee++)L.kerning.push({first:parseInt(J[ee].getAttribute("first"),10),second:parseInt(J[ee].getAttribute("second"),10),amount:parseInt(J[ee].getAttribute("amount"),10)});for(var ee=0;ee<Z.length;ee++)L.distanceField.push({fieldType:Z[ee].getAttribute("fieldType"),distanceRange:parseInt(Z[ee].getAttribute("distanceRange"),10)});return L},G}(),XMLStringFormat=function(){function G(){}return G.test=function(U){if(typeof U=="string"&&U.indexOf("<font>")>-1){var L=new globalThis.DOMParser().parseFromString(U,"text/xml");return XMLFormat.test(L)}return!1},G.parse=function(U){var L=new globalThis.DOMParser().parseFromString(U,"text/xml");return XMLFormat.parse(L)},G}(),formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(G){for(var U=0;U<formats.length;U++)if(formats[U].test(G))return formats[U];return null}function generateFillStyle(G,U,L,Y,X,W){var z=L.fill;if(Array.isArray(z)){if(z.length===1)return z[0]}else return z;var J,Z=L.dropShadow?L.dropShadowDistance:0,ee=L.padding||0,te=G.width/Y-Z-ee*2,re=G.height/Y-Z-ee*2,ie=z.slice(),ne=L.fillGradientStops.slice();if(!ne.length)for(var oe=ie.length+1,se=1;se<oe;++se)ne.push(se/oe);if(ie.unshift(z[0]),ne.unshift(0),ie.push(z[z.length-1]),ne.push(1),L.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){J=U.createLinearGradient(te/2,ee,te/2,re+ee);for(var ae=0,le=W.fontProperties.fontSize+L.strokeThickness,ue=le/re,se=0;se<X.length;se++)for(var ce=W.lineHeight*se,he=0;he<ie.length;he++){var fe=0;typeof ne[he]=="number"?fe=ne[he]:fe=he/ie.length;var de=ce/re+fe*ue,_e=Math.max(ae,de);_e=Math.min(_e,1),J.addColorStop(_e,ie[he]),ae=_e}}else{J=U.createLinearGradient(ee,re/2,te+ee,re/2);for(var me=ie.length+1,ve=1,se=0;se<ie.length;se++){var ye=void 0;typeof ne[se]=="number"?ye=ne[se]:ye=ve/me,J.addColorStop(ye,ie[se]),ve++}}return J}function drawGlyph(G,U,L,Y,X,W,z){var J=L.text,Z=L.fontProperties;U.translate(Y,X),U.scale(W,W);var ee=z.strokeThickness/2,te=-(z.strokeThickness/2);if(U.font=z.toFontString(),U.lineWidth=z.strokeThickness,U.textBaseline=z.textBaseline,U.lineJoin=z.lineJoin,U.miterLimit=z.miterLimit,U.fillStyle=generateFillStyle(G,U,z,W,[J],L),U.strokeStyle=z.stroke,z.dropShadow){var re=z.dropShadowColor,ie=hex2rgb$1(typeof re=="number"?re:string2hex(re)),ne=z.dropShadowBlur*W,oe=z.dropShadowDistance*W;U.shadowColor="rgba("+ie[0]*255+","+ie[1]*255+","+ie[2]*255+","+z.dropShadowAlpha+")",U.shadowBlur=ne,U.shadowOffsetX=Math.cos(z.dropShadowAngle)*oe,U.shadowOffsetY=Math.sin(z.dropShadowAngle)*oe}else U.shadowColor="black",U.shadowBlur=0,U.shadowOffsetX=0,U.shadowOffsetY=0;z.stroke&&z.strokeThickness&&U.strokeText(J,ee,te+L.lineHeight-Z.descent),z.fill&&U.fillText(J,ee,te+L.lineHeight-Z.descent),U.setTransform(1,0,0,1,0,0),U.fillStyle="rgba(0, 0, 0, 0)"}function splitTextToCharacters(G){return Array.from?Array.from(G):G.split("")}function resolveCharacters(G){typeof G=="string"&&(G=[G]);for(var U=[],L=0,Y=G.length;L<Y;L++){var X=G[L];if(Array.isArray(X)){if(X.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+X.length+".");var W=X[0].charCodeAt(0),z=X[1].charCodeAt(0);if(z<W)throw new Error("[BitmapFont]: Invalid character range.");for(var J=W,Z=z;J<=Z;J++)U.push(String.fromCharCode(J))}else U.push.apply(U,splitTextToCharacters(X))}if(U.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return U}function extractCharCode(G){return G.codePointAt?G.codePointAt(0):G.charCodeAt(0)}var BitmapFont=function(){function G(U,L,Y){var X,W,z=U.info[0],J=U.common[0],Z=U.page[0],ee=U.distanceField[0],te=getResolutionOfUrl$1(Z.file),re={};this._ownsTextures=Y,this.font=z.face,this.size=z.size,this.lineHeight=J.lineHeight/te,this.chars={},this.pageTextures=re;for(var ie=0;ie<U.page.length;ie++){var ne=U.page[ie],oe=ne.id,se=ne.file;re[oe]=L instanceof Array?L[ie]:L[se],(ee==null?void 0:ee.fieldType)&&ee.fieldType!=="none"&&(re[oe].baseTexture.alphaMode=ALPHA_MODES$4.NO_PREMULTIPLIED_ALPHA)}for(var ie=0;ie<U.char.length;ie++){var ae=U.char[ie],oe=ae.id,le=ae.page,ue=U.char[ie],ce=ue.x,he=ue.y,fe=ue.width,de=ue.height,_e=ue.xoffset,me=ue.yoffset,ve=ue.xadvance;ce/=te,he/=te,fe/=te,de/=te,_e/=te,me/=te,ve/=te;var ye=new Rectangle$1(ce+re[le].frame.x/te,he+re[le].frame.y/te,fe,de);this.chars[oe]={xOffset:_e,yOffset:me,xAdvance:ve,kerning:{},texture:new Texture$1(re[le].baseTexture,ye),page:le}}for(var ie=0;ie<U.kerning.length;ie++){var be=U.kerning[ie],Te=be.first,Se=be.second,Ue=be.amount;Te/=te,Se/=te,Ue/=te,this.chars[Se]&&(this.chars[Se].kerning[Te]=Ue)}this.distanceFieldRange=ee==null?void 0:ee.distanceRange,this.distanceFieldType=(W=(X=ee==null?void 0:ee.fieldType)===null||X===void 0?void 0:X.toLowerCase())!==null&&W!==void 0?W:"none"}return G.prototype.destroy=function(){for(var U in this.chars)this.chars[U].texture.destroy(),this.chars[U].texture=null;for(var U in this.pageTextures)this._ownsTextures&&this.pageTextures[U].destroy(!0),this.pageTextures[U]=null;this.chars=null,this.pageTextures=null},G.install=function(U,L,Y){var X;if(U instanceof BitmapFontData)X=U;else{var W=autoDetectFormat(U);if(!W)throw new Error("Unrecognized data format for font.");X=W.parse(U)}L instanceof Texture$1&&(L=[L]);var z=new G(X,L,Y);return G.available[z.font]=z,z},G.uninstall=function(U){var L=G.available[U];if(!L)throw new Error("No font found named '"+U+"'");L.destroy(),delete G.available[U]},G.from=function(U,L,Y){if(!U)throw new Error("[BitmapFont] Property `name` is required.");var X=Object.assign({},G.defaultOptions,Y),W=X.chars,z=X.padding,J=X.resolution,Z=X.textureWidth,ee=X.textureHeight,te=resolveCharacters(W),re=L instanceof TextStyle?L:new TextStyle(L),ie=Z,ne=new BitmapFontData;ne.info[0]={face:re.fontFamily,size:re.fontSize},ne.common[0]={lineHeight:re.fontSize};for(var oe=0,se=0,ae,le,ue,ce=0,he=[],fe=0;fe<te.length;fe++){ae||(ae=document.createElement("canvas"),ae.width=Z,ae.height=ee,le=ae.getContext("2d"),ue=new BaseTexture$1(ae,{resolution:J}),he.push(new Texture$1(ue)),ne.page.push({id:he.length-1,file:""}));var de=TextMetrics.measureText(te[fe],re,!1,ae),_e=de.width,me=Math.ceil(de.height),ve=Math.ceil((re.fontStyle==="italic"?2:1)*_e);if(se>=ee-me*J){if(se===0)throw new Error("[BitmapFont] textureHeight "+ee+"px is "+("too small for "+re.fontSize+"px fonts"));--fe,ae=null,le=null,ue=null,se=0,oe=0,ce=0;continue}if(ce=Math.max(me+de.fontProperties.descent,ce),ve*J+oe>=ie){--fe,se+=ce*J,se=Math.ceil(se),oe=0,ce=0;continue}drawGlyph(ae,le,de,oe,se,J,re);var ye=extractCharCode(de.text);ne.char.push({id:ye,page:he.length-1,x:oe/J,y:se/J,width:ve,height:me,xoffset:0,yoffset:0,xadvance:Math.ceil(_e-(re.dropShadow?re.dropShadowDistance:0)-(re.stroke?re.strokeThickness:0))}),oe+=(ve+2*z)*J,oe=Math.ceil(oe)}for(var fe=0,be=te.length;fe<be;fe++)for(var Te=te[fe],Se=0;Se<be;Se++){var Ue=te[Se],Pe=le.measureText(Te).width,Ne=le.measureText(Ue).width,Ve=le.measureText(Te+Ue).width,ze=Ve-(Pe+Ne);ze&&ne.kerning.push({first:extractCharCode(Te),second:extractCharCode(Ue),amount:ze})}var Ze=new G(ne,he,!0);return G.available[U]!==void 0&&G.uninstall(U),G.available[U]=Ze,Ze},G.ALPHA=[["a","z"],["A","Z"]," "],G.NUMERIC=[["0","9"]],G.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],G.ASCII=[[" ","~"]],G.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:G.ALPHANUMERIC},G.available={},G}(),msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],BitmapText=function(G){__extends$F(U,G);function U(L,Y){Y===void 0&&(Y={});var X=G.call(this)||this;X._tint=16777215;var W=Object.assign({},U.styleDefaults,Y),z=W.align,J=W.tint,Z=W.maxWidth,ee=W.letterSpacing,te=W.fontName,re=W.fontSize;if(!BitmapFont.available[te])throw new Error('Missing BitmapFont "'+te+'"');return X._activePagesMeshData=[],X._textWidth=0,X._textHeight=0,X._align=z,X._tint=J,X._fontName=te,X._fontSize=re||BitmapFont.available[te].size,X.text=L,X._maxWidth=Z,X._maxLineHeight=0,X._letterSpacing=ee,X._anchor=new ObservablePoint$1(function(){X.dirty=!0},X,0,0),X._roundPixels=settings$1.ROUND_PIXELS,X.dirty=!0,X._resolution=settings$1.RESOLUTION,X._autoResolution=!0,X._textureCache={},X}return U.prototype.updateText=function(){for(var L,Y=BitmapFont.available[this._fontName],X=this._fontSize/Y.size,W=new Point$1,z=[],J=[],Z=[],ee=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",te=splitTextToCharacters(ee),re=this._maxWidth*Y.size/this._fontSize,ie=Y.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData,ne=null,oe=0,se=0,ae=0,le=-1,ue=0,ce=0,he=0,fe=0,de=0;de<te.length;de++){var _e=te[de],me=extractCharCode(_e);if(/(?:\s)/.test(_e)&&(le=de,ue=oe,fe++),_e==="\r"||_e===`
`){J.push(oe),Z.push(-1),se=Math.max(se,oe),++ae,++ce,W.x=0,W.y+=Y.lineHeight,ne=null,fe=0;continue}var ve=Y.chars[me];if(!!ve){ne&&ve.kerning[ne]&&(W.x+=ve.kerning[ne]);var ye=charRenderDataPool.pop()||{texture:Texture$1.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point$1};ye.texture=ve.texture,ye.line=ae,ye.charCode=me,ye.position.x=W.x+ve.xOffset+this._letterSpacing/2,ye.position.y=W.y+ve.yOffset,ye.prevSpaces=fe,z.push(ye),oe=ye.position.x+Math.max(ve.xAdvance,ve.texture.orig.width),W.x+=ve.xAdvance+this._letterSpacing,he=Math.max(he,ve.yOffset+ve.texture.height),ne=me,le!==-1&&re>0&&W.x>re&&(++ce,removeItems$1(z,1+le-ce,1+de-le),de=le,le=-1,J.push(ue),Z.push(z.length>0?z[z.length-1].prevSpaces:0),se=Math.max(se,ue),ae++,W.x=0,W.y+=Y.lineHeight,ne=null,fe=0)}}var be=te[te.length-1];be!=="\r"&&be!==`
`&&(/(?:\s)/.test(be)&&(oe=ue),J.push(oe),se=Math.max(se,oe),Z.push(-1));for(var Te=[],de=0;de<=ae;de++){var Se=0;this._align==="right"?Se=se-J[de]:this._align==="center"?Se=(se-J[de])/2:this._align==="justify"&&(Se=Z[de]<0?0:(se-J[de])/Z[de]),Te.push(Se)}for(var Ue=z.length,Pe={},Ne=[],Ve=this._activePagesMeshData,de=0;de<Ve.length;de++)ie.push(Ve[de]);for(var de=0;de<Ue;de++){var ze=z[de].texture,Ze=ze.baseTexture.uid;if(!Pe[Ze]){var Ae=ie.pop();if(!Ae){var De=new MeshGeometry,Ke=void 0,Qe=void 0;Y.distanceFieldType==="none"?(Ke=new MeshMaterial(Texture$1.EMPTY),Qe=BLEND_MODES$4.NORMAL):(Ke=new MeshMaterial(Texture$1.EMPTY,{program:Program$1.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),Qe=BLEND_MODES$4.NORMAL_NPM);var tt=new Mesh(De,Ke);tt.blendMode=Qe,Ae={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:tt,vertices:null,uvs:null,indices:null}}Ae.index=0,Ae.indexCount=0,Ae.vertexCount=0,Ae.uvsCount=0,Ae.total=0;var Ie=this._textureCache;Ie[Ze]=Ie[Ze]||new Texture$1(ze.baseTexture),Ae.mesh.texture=Ie[Ze],Ae.mesh.tint=this._tint,Ne.push(Ae),Pe[Ze]=Ae}Pe[Ze].total++}for(var de=0;de<Ve.length;de++)Ne.indexOf(Ve[de])===-1&&this.removeChild(Ve[de].mesh);for(var de=0;de<Ne.length;de++)Ne[de].mesh.parent!==this&&this.addChild(Ne[de].mesh);this._activePagesMeshData=Ne;for(var de in Pe){var Ae=Pe[de],ke=Ae.total;if(!(((L=Ae.indices)===null||L===void 0?void 0:L.length)>6*ke)||Ae.vertices.length<Mesh.BATCHABLE_SIZE*2)Ae.vertices=new Float32Array(4*2*ke),Ae.uvs=new Float32Array(4*2*ke),Ae.indices=new Uint16Array(6*ke);else for(var Me=Ae.total,Ye=Ae.vertices,xe=Me*4*2;xe<Ye.length;xe++)Ye[xe]=0;Ae.mesh.size=6*ke}for(var de=0;de<Ue;de++){var _e=z[de],Re=_e.position.x+Te[_e.line]*(this._align==="justify"?_e.prevSpaces:1);this._roundPixels&&(Re=Math.round(Re));var we=Re*X,Le=_e.position.y*X,ze=_e.texture,pe=Pe[ze.baseTexture.uid],ge=ze.frame,Ee=ze._uvs,Ce=pe.index++;pe.indices[Ce*6+0]=0+Ce*4,pe.indices[Ce*6+1]=1+Ce*4,pe.indices[Ce*6+2]=2+Ce*4,pe.indices[Ce*6+3]=0+Ce*4,pe.indices[Ce*6+4]=2+Ce*4,pe.indices[Ce*6+5]=3+Ce*4,pe.vertices[Ce*8+0]=we,pe.vertices[Ce*8+1]=Le,pe.vertices[Ce*8+2]=we+ge.width*X,pe.vertices[Ce*8+3]=Le,pe.vertices[Ce*8+4]=we+ge.width*X,pe.vertices[Ce*8+5]=Le+ge.height*X,pe.vertices[Ce*8+6]=we,pe.vertices[Ce*8+7]=Le+ge.height*X,pe.uvs[Ce*8+0]=Ee.x0,pe.uvs[Ce*8+1]=Ee.y0,pe.uvs[Ce*8+2]=Ee.x1,pe.uvs[Ce*8+3]=Ee.y1,pe.uvs[Ce*8+4]=Ee.x2,pe.uvs[Ce*8+5]=Ee.y2,pe.uvs[Ce*8+6]=Ee.x3,pe.uvs[Ce*8+7]=Ee.y3}this._textWidth=se*X,this._textHeight=(W.y+Y.lineHeight)*X;for(var de in Pe){var Ae=Pe[de];if(this.anchor.x!==0||this.anchor.y!==0)for(var Fe=0,Be=this._textWidth*this.anchor.x,qe=this._textHeight*this.anchor.y,je=0;je<Ae.total;je++)Ae.vertices[Fe++]-=Be,Ae.vertices[Fe++]-=qe,Ae.vertices[Fe++]-=Be,Ae.vertices[Fe++]-=qe,Ae.vertices[Fe++]-=Be,Ae.vertices[Fe++]-=qe,Ae.vertices[Fe++]-=Be,Ae.vertices[Fe++]-=qe;this._maxLineHeight=he*X;var We=Ae.mesh.geometry.getBuffer("aVertexPosition"),Ge=Ae.mesh.geometry.getBuffer("aTextureCoord"),lt=Ae.mesh.geometry.getIndex();We.data=Ae.vertices,Ge.data=Ae.uvs,lt.data=Ae.indices,We.update(),Ge.update(),lt.update()}for(var de=0;de<z.length;de++)charRenderDataPool.push(z[de])},U.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},U.prototype._render=function(L){this._autoResolution&&this._resolution!==L.resolution&&(this._resolution=L.resolution,this.dirty=!0);var Y=BitmapFont.available[this._fontName],X=Y.distanceFieldRange,W=Y.distanceFieldType,z=Y.size;if(W!=="none")for(var J=this.worldTransform,Z=J.a,ee=J.b,te=J.c,re=J.d,ie=Math.sqrt(Z*Z+ee*ee),ne=Math.sqrt(te*te+re*re),oe=(Math.abs(ie)+Math.abs(ne))/2,se=this._fontSize/z,ae=0,le=this._activePagesMeshData;ae<le.length;ae++){var ue=le[ae];ue.mesh.shader.uniforms.uFWidth=oe*X*se*this._resolution}G.prototype._render.call(this,L)},U.prototype.getLocalBounds=function(){return this.validate(),G.prototype.getLocalBounds.call(this)},U.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(U.prototype,"tint",{get:function(){return this._tint},set:function(L){if(this._tint!==L){this._tint=L;for(var Y=0;Y<this._activePagesMeshData.length;Y++)this._activePagesMeshData[Y].mesh.tint=L}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"align",{get:function(){return this._align},set:function(L){this._align!==L&&(this._align=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"fontName",{get:function(){return this._fontName},set:function(L){if(!BitmapFont.available[L])throw new Error('Missing BitmapFont "'+L+'"');this._fontName!==L&&(this._fontName=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"fontSize",{get:function(){return this._fontSize},set:function(L){this._fontSize!==L&&(this._fontSize=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"anchor",{get:function(){return this._anchor},set:function(L){typeof L=="number"?this._anchor.set(L):this._anchor.copyFrom(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"text",{get:function(){return this._text},set:function(L){L=String(L==null?"":L),this._text!==L&&(this._text=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(L){this._maxWidth!==L&&(this._maxWidth=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(L){this._letterSpacing!==L&&(this._letterSpacing=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(L){L!==this._roundPixels&&(this._roundPixels=L,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"resolution",{get:function(){return this._resolution},set:function(L){this._autoResolution=!1,this._resolution!==L&&(this._resolution=L,this.dirty=!0)},enumerable:!1,configurable:!0}),U.prototype.destroy=function(L){var Y=this._textureCache;for(var X in Y){var W=Y[X];W.destroy(),delete Y[X]}this._textureCache=null,G.prototype.destroy.call(this,L)},U.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},U}(Container$1),BitmapFontLoader=function(){function G(){}return G.add=function(){LoaderResource.setExtensionXhrType("fnt",LoaderResource.XHR_RESPONSE_TYPE.TEXT)},G.use=function(U,L){var Y=autoDetectFormat(U.data);if(!Y){L();return}for(var X=G.getBaseUrl(this,U),W=Y.parse(U.data),z={},J=function(se){z[se.metadata.pageFile]=se.texture,Object.keys(z).length===W.page.length&&(U.bitmapFont=BitmapFont.install(W,z,!0),L())},Z=0;Z<W.page.length;++Z){var ee=W.page[Z].file,te=X+ee,re=!1;for(var ie in this.resources){var ne=this.resources[ie];if(ne.url===te){ne.metadata.pageFile=ee,ne.texture?J(ne):ne.onAfterMiddleware.add(J),re=!0;break}}if(!re){var oe={crossOrigin:U.crossOrigin,loadType:LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:ee},U.metadata.imageMetadata),parentResource:U};this.add(te,oe,J)}}},G.getBaseUrl=function(U,L){var Y=L.isDataUrl?"":G.dirname(L.url);return L.isDataUrl&&(Y==="."&&(Y=""),U.baseUrl&&Y&&U.baseUrl.charAt(U.baseUrl.length-1)==="/"&&(Y+="/")),Y=Y.replace(U.baseUrl,""),Y&&Y.charAt(Y.length-1)!=="/"&&(Y+="/"),Y},G.dirname=function(U){var L=U.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return L===U?".":L===""?"/":L},G}();/*!
 * @pixi/filter-alpha - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$c=function(G,U){return extendStatics$c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$c(G,U)};function __extends$E(G,U){extendStatics$c(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var fragment$5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,AlphaFilter=function(G){__extends$E(U,G);function U(L){L===void 0&&(L=1);var Y=G.call(this,defaultVertex$1,fragment$5,{uAlpha:1})||this;return Y.alpha=L,Y}return Object.defineProperty(U.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(L){this.uniforms.uAlpha=L},enumerable:!1,configurable:!0}),U}(Filter$1);/*!
 * @pixi/filter-blur - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$b=function(G,U){return extendStatics$b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$b(G,U)};function __extends$D(G,U){extendStatics$b(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(G,U){var L=Math.ceil(G/2),Y=vertTemplate,X="",W;U?W="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":W="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var z=0;z<G;z++){var J=W.replace("%index%",z.toString());J=J.replace("%sampleIndex%",z-(L-1)+".0"),X+=J,X+=`
`}return Y=Y.replace("%blur%",X),Y=Y.replace("%size%",G.toString()),Y}var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate$1=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(G){for(var U=GAUSSIAN_VALUES[G],L=U.length,Y=fragTemplate$1,X="",W="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",z,J=0;J<G;J++){var Z=W.replace("%index%",J.toString());z=J,J>=L&&(z=G-J-1),Z=Z.replace("%value%",U[z].toString()),X+=Z,X+=`
`}return Y=Y.replace("%blur%",X),Y=Y.replace("%size%",G.toString()),Y}/*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV$1;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV$1||(ENV$1={}));var RENDERER_TYPE$1;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE$1||(RENDERER_TYPE$1={}));var BUFFER_BITS$1;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS$1||(BUFFER_BITS$1={}));var BLEND_MODES$1;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES$1||(BLEND_MODES$1={}));var DRAW_MODES$1;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES$1||(DRAW_MODES$1={}));var FORMATS$1;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS$1||(FORMATS$1={}));var TARGETS$1;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS$1||(TARGETS$1={}));var TYPES$1;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES$1||(TYPES$1={}));var SAMPLER_TYPES$1;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES$1||(SAMPLER_TYPES$1={}));var SCALE_MODES$1;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES$1||(SCALE_MODES$1={}));var WRAP_MODES$1;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES$1||(WRAP_MODES$1={}));var MIPMAP_MODES$1;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES$1||(MIPMAP_MODES$1={}));var ALPHA_MODES$1;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES$1||(ALPHA_MODES$1={}));var CLEAR_MODES$1;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES$1||(CLEAR_MODES$1={}));var GC_MODES$1;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES$1||(GC_MODES$1={}));var PRECISION$1;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION$1||(PRECISION$1={}));var MASK_TYPES$1;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES$1||(MASK_TYPES$1={}));var MSAA_QUALITY$1;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY$1||(MSAA_QUALITY$1={}));var BUFFER_TYPE$1;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE$1||(BUFFER_TYPE$1={}));var BlurFilterPass=function(G){__extends$D(U,G);function U(L,Y,X,W,z){Y===void 0&&(Y=8),X===void 0&&(X=4),W===void 0&&(W=settings$1.FILTER_RESOLUTION),z===void 0&&(z=5);var J=this,Z=generateBlurVertSource(z,L),ee=generateBlurFragSource(z);return J=G.call(this,Z,ee)||this,J.horizontal=L,J.resolution=W,J._quality=0,J.quality=X,J.blur=Y,J}return U.prototype.apply=function(L,Y,X,W){if(X?this.horizontal?this.uniforms.strength=1/X.width*(X.width/Y.width):this.uniforms.strength=1/X.height*(X.height/Y.height):this.horizontal?this.uniforms.strength=1/L.renderer.width*(L.renderer.width/Y.width):this.uniforms.strength=1/L.renderer.height*(L.renderer.height/Y.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)L.applyFilter(this,Y,X,W);else{var z=L.getFilterTexture(),J=L.renderer,Z=Y,ee=z;this.state.blend=!1,L.applyFilter(this,Z,ee,CLEAR_MODES$1.CLEAR);for(var te=1;te<this.passes-1;te++){L.bindAndClear(Z,CLEAR_MODES$1.BLIT),this.uniforms.uSampler=ee;var re=ee;ee=Z,Z=re,J.shader.bind(this),J.geometry.draw(5)}this.state.blend=!0,L.applyFilter(this,ee,X,W),L.returnFilterTexture(z)}},Object.defineProperty(U.prototype,"blur",{get:function(){return this.strength},set:function(L){this.padding=1+Math.abs(L)*2,this.strength=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"quality",{get:function(){return this._quality},set:function(L){this._quality=L,this.passes=L},enumerable:!1,configurable:!0}),U}(Filter$1),BlurFilter=function(G){__extends$D(U,G);function U(L,Y,X,W){L===void 0&&(L=8),Y===void 0&&(Y=4),X===void 0&&(X=settings$1.FILTER_RESOLUTION),W===void 0&&(W=5);var z=G.call(this)||this;return z.blurXFilter=new BlurFilterPass(!0,L,Y,X,W),z.blurYFilter=new BlurFilterPass(!1,L,Y,X,W),z.resolution=X,z.quality=Y,z.blur=L,z.repeatEdgePixels=!1,z}return U.prototype.apply=function(L,Y,X,W){var z=Math.abs(this.blurXFilter.strength),J=Math.abs(this.blurYFilter.strength);if(z&&J){var Z=L.getFilterTexture();this.blurXFilter.apply(L,Y,Z,CLEAR_MODES$1.CLEAR),this.blurYFilter.apply(L,Z,X,W),L.returnFilterTexture(Z)}else J?this.blurYFilter.apply(L,Y,X,W):this.blurXFilter.apply(L,Y,X,W)},U.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(U.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(L){this.blurXFilter.blur=this.blurYFilter.blur=L,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(L){this.blurXFilter.quality=this.blurYFilter.quality=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(L){this.blurXFilter.blur=L,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(L){this.blurYFilter.blur=L,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(L){this.blurYFilter.blendMode=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(L){this._repeatEdgePixels=L,this.updatePadding()},enumerable:!1,configurable:!0}),U}(Filter$1);/*!
 * @pixi/filter-color-matrix - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$a=function(G,U){return extendStatics$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$a(G,U)};function __extends$C(G,U){extendStatics$a(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var fragment$4=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ColorMatrixFilter=function(G){__extends$C(U,G);function U(){var L=this,Y={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return L=G.call(this,defaultFilterVertex,fragment$4,Y)||this,L.alpha=1,L}return U.prototype._loadMatrix=function(L,Y){Y===void 0&&(Y=!1);var X=L;Y&&(this._multiply(X,this.uniforms.m,L),X=this._colorMatrix(X)),this.uniforms.m=X},U.prototype._multiply=function(L,Y,X){return L[0]=Y[0]*X[0]+Y[1]*X[5]+Y[2]*X[10]+Y[3]*X[15],L[1]=Y[0]*X[1]+Y[1]*X[6]+Y[2]*X[11]+Y[3]*X[16],L[2]=Y[0]*X[2]+Y[1]*X[7]+Y[2]*X[12]+Y[3]*X[17],L[3]=Y[0]*X[3]+Y[1]*X[8]+Y[2]*X[13]+Y[3]*X[18],L[4]=Y[0]*X[4]+Y[1]*X[9]+Y[2]*X[14]+Y[3]*X[19]+Y[4],L[5]=Y[5]*X[0]+Y[6]*X[5]+Y[7]*X[10]+Y[8]*X[15],L[6]=Y[5]*X[1]+Y[6]*X[6]+Y[7]*X[11]+Y[8]*X[16],L[7]=Y[5]*X[2]+Y[6]*X[7]+Y[7]*X[12]+Y[8]*X[17],L[8]=Y[5]*X[3]+Y[6]*X[8]+Y[7]*X[13]+Y[8]*X[18],L[9]=Y[5]*X[4]+Y[6]*X[9]+Y[7]*X[14]+Y[8]*X[19]+Y[9],L[10]=Y[10]*X[0]+Y[11]*X[5]+Y[12]*X[10]+Y[13]*X[15],L[11]=Y[10]*X[1]+Y[11]*X[6]+Y[12]*X[11]+Y[13]*X[16],L[12]=Y[10]*X[2]+Y[11]*X[7]+Y[12]*X[12]+Y[13]*X[17],L[13]=Y[10]*X[3]+Y[11]*X[8]+Y[12]*X[13]+Y[13]*X[18],L[14]=Y[10]*X[4]+Y[11]*X[9]+Y[12]*X[14]+Y[13]*X[19]+Y[14],L[15]=Y[15]*X[0]+Y[16]*X[5]+Y[17]*X[10]+Y[18]*X[15],L[16]=Y[15]*X[1]+Y[16]*X[6]+Y[17]*X[11]+Y[18]*X[16],L[17]=Y[15]*X[2]+Y[16]*X[7]+Y[17]*X[12]+Y[18]*X[17],L[18]=Y[15]*X[3]+Y[16]*X[8]+Y[17]*X[13]+Y[18]*X[18],L[19]=Y[15]*X[4]+Y[16]*X[9]+Y[17]*X[14]+Y[18]*X[19]+Y[19],L},U.prototype._colorMatrix=function(L){var Y=new Float32Array(L);return Y[4]/=255,Y[9]/=255,Y[14]/=255,Y[19]/=255,Y},U.prototype.brightness=function(L,Y){var X=[L,0,0,0,0,0,L,0,0,0,0,0,L,0,0,0,0,0,1,0];this._loadMatrix(X,Y)},U.prototype.tint=function(L,Y){var X=L>>16&255,W=L>>8&255,z=L&255,J=[X/255,0,0,0,0,0,W/255,0,0,0,0,0,z/255,0,0,0,0,0,1,0];this._loadMatrix(J,Y)},U.prototype.greyscale=function(L,Y){var X=[L,L,L,0,0,L,L,L,0,0,L,L,L,0,0,0,0,0,1,0];this._loadMatrix(X,Y)},U.prototype.blackAndWhite=function(L){var Y=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.hue=function(L,Y){L=(L||0)/180*Math.PI;var X=Math.cos(L),W=Math.sin(L),z=Math.sqrt,J=1/3,Z=z(J),ee=X+(1-X)*J,te=J*(1-X)-Z*W,re=J*(1-X)+Z*W,ie=J*(1-X)+Z*W,ne=X+J*(1-X),oe=J*(1-X)-Z*W,se=J*(1-X)-Z*W,ae=J*(1-X)+Z*W,le=X+J*(1-X),ue=[ee,te,re,0,0,ie,ne,oe,0,0,se,ae,le,0,0,0,0,0,1,0];this._loadMatrix(ue,Y)},U.prototype.contrast=function(L,Y){var X=(L||0)+1,W=-.5*(X-1),z=[X,0,0,0,W,0,X,0,0,W,0,0,X,0,W,0,0,0,1,0];this._loadMatrix(z,Y)},U.prototype.saturate=function(L,Y){L===void 0&&(L=0);var X=L*2/3+1,W=(X-1)*-.5,z=[X,W,W,0,0,W,X,W,0,0,W,W,X,0,0,0,0,0,1,0];this._loadMatrix(z,Y)},U.prototype.desaturate=function(){this.saturate(-1)},U.prototype.negative=function(L){var Y=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.sepia=function(L){var Y=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.technicolor=function(L){var Y=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.polaroid=function(L){var Y=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.toBGR=function(L){var Y=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.kodachrome=function(L){var Y=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.browni=function(L){var Y=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.vintage=function(L){var Y=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.colorTone=function(L,Y,X,W,z){L=L||.2,Y=Y||.15,X=X||16770432,W=W||3375104;var J=(X>>16&255)/255,Z=(X>>8&255)/255,ee=(X&255)/255,te=(W>>16&255)/255,re=(W>>8&255)/255,ie=(W&255)/255,ne=[.3,.59,.11,0,0,J,Z,ee,L,0,te,re,ie,Y,0,J-te,Z-re,ee-ie,0,0];this._loadMatrix(ne,z)},U.prototype.night=function(L,Y){L=L||.1;var X=[L*-2,-L,0,0,0,-L,0,L,0,0,0,L,L*2,0,0,0,0,0,1,0];this._loadMatrix(X,Y)},U.prototype.predator=function(L,Y){var X=[11.224130630493164*L,-4.794486999511719*L,-2.8746118545532227*L,0*L,.40342438220977783*L,-3.6330697536468506*L,9.193157196044922*L,-2.951810836791992*L,0*L,-1.316135048866272*L,-3.2184197902679443*L,-4.2375030517578125*L,7.476448059082031*L,0*L,.8044459223747253*L,0,0,0,1,0];this._loadMatrix(X,Y)},U.prototype.lsd=function(L){var Y=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(Y,L)},U.prototype.reset=function(){var L=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(L,!1)},Object.defineProperty(U.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(L){this.uniforms.m=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(L){this.uniforms.uAlpha=L},enumerable:!1,configurable:!0}),U}(Filter$1);ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$9=function(G,U){return extendStatics$9=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$9(G,U)};function __extends$B(G,U){extendStatics$9(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var fragment$3=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,DisplacementFilter=function(G){__extends$B(U,G);function U(L,Y){var X=this,W=new Matrix$1;return L.renderable=!1,X=G.call(this,vertex$2,fragment$3,{mapSampler:L._texture,filterMatrix:W,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,X.maskSprite=L,X.maskMatrix=W,Y==null&&(Y=20),X.scale=new Point$1(Y,Y),X}return U.prototype.apply=function(L,Y,X,W){this.uniforms.filterMatrix=L.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var z=this.maskSprite.worldTransform,J=Math.sqrt(z.a*z.a+z.b*z.b),Z=Math.sqrt(z.c*z.c+z.d*z.d);J!==0&&Z!==0&&(this.uniforms.rotation[0]=z.a/J,this.uniforms.rotation[1]=z.b/J,this.uniforms.rotation[2]=z.c/Z,this.uniforms.rotation[3]=z.d/Z),L.applyFilter(this,Y,X,W)},Object.defineProperty(U.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(L){this.uniforms.mapSampler=L},enumerable:!1,configurable:!0}),U}(Filter$1);/*!
 * @pixi/filter-fxaa - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$8=function(G,U){return extendStatics$8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$8(G,U)};function __extends$A(G,U){extendStatics$8(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var vertex$1=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,fragment$2=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,FXAAFilter=function(G){__extends$A(U,G);function U(){return G.call(this,vertex$1,fragment$2)||this}return U}(Filter$1);/*!
 * @pixi/filter-noise - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$7=function(G,U){return extendStatics$7=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$7(G,U)};function __extends$z(G,U){extendStatics$7(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var fragment$1=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,NoiseFilter=function(G){__extends$z(U,G);function U(L,Y){L===void 0&&(L=.5),Y===void 0&&(Y=Math.random());var X=G.call(this,defaultFilterVertex,fragment$1,{uNoise:0,uSeed:0})||this;return X.noise=L,X.seed=Y,X}return Object.defineProperty(U.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(L){this.uniforms.uNoise=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(L){this.uniforms.uSeed=L},enumerable:!1,configurable:!0}),U}(Filter$1);/*!
 * @pixi/mixin-cache-as-bitmap - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ENV;(function(G){G[G.WEBGL_LEGACY=0]="WEBGL_LEGACY",G[G.WEBGL=1]="WEBGL",G[G.WEBGL2=2]="WEBGL2"})(ENV||(ENV={}));var RENDERER_TYPE;(function(G){G[G.UNKNOWN=0]="UNKNOWN",G[G.WEBGL=1]="WEBGL",G[G.CANVAS=2]="CANVAS"})(RENDERER_TYPE||(RENDERER_TYPE={}));var BUFFER_BITS;(function(G){G[G.COLOR=16384]="COLOR",G[G.DEPTH=256]="DEPTH",G[G.STENCIL=1024]="STENCIL"})(BUFFER_BITS||(BUFFER_BITS={}));var BLEND_MODES;(function(G){G[G.NORMAL=0]="NORMAL",G[G.ADD=1]="ADD",G[G.MULTIPLY=2]="MULTIPLY",G[G.SCREEN=3]="SCREEN",G[G.OVERLAY=4]="OVERLAY",G[G.DARKEN=5]="DARKEN",G[G.LIGHTEN=6]="LIGHTEN",G[G.COLOR_DODGE=7]="COLOR_DODGE",G[G.COLOR_BURN=8]="COLOR_BURN",G[G.HARD_LIGHT=9]="HARD_LIGHT",G[G.SOFT_LIGHT=10]="SOFT_LIGHT",G[G.DIFFERENCE=11]="DIFFERENCE",G[G.EXCLUSION=12]="EXCLUSION",G[G.HUE=13]="HUE",G[G.SATURATION=14]="SATURATION",G[G.COLOR=15]="COLOR",G[G.LUMINOSITY=16]="LUMINOSITY",G[G.NORMAL_NPM=17]="NORMAL_NPM",G[G.ADD_NPM=18]="ADD_NPM",G[G.SCREEN_NPM=19]="SCREEN_NPM",G[G.NONE=20]="NONE",G[G.SRC_OVER=0]="SRC_OVER",G[G.SRC_IN=21]="SRC_IN",G[G.SRC_OUT=22]="SRC_OUT",G[G.SRC_ATOP=23]="SRC_ATOP",G[G.DST_OVER=24]="DST_OVER",G[G.DST_IN=25]="DST_IN",G[G.DST_OUT=26]="DST_OUT",G[G.DST_ATOP=27]="DST_ATOP",G[G.ERASE=26]="ERASE",G[G.SUBTRACT=28]="SUBTRACT",G[G.XOR=29]="XOR"})(BLEND_MODES||(BLEND_MODES={}));var DRAW_MODES;(function(G){G[G.POINTS=0]="POINTS",G[G.LINES=1]="LINES",G[G.LINE_LOOP=2]="LINE_LOOP",G[G.LINE_STRIP=3]="LINE_STRIP",G[G.TRIANGLES=4]="TRIANGLES",G[G.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",G[G.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(DRAW_MODES||(DRAW_MODES={}));var FORMATS;(function(G){G[G.RGBA=6408]="RGBA",G[G.RGB=6407]="RGB",G[G.RG=33319]="RG",G[G.RED=6403]="RED",G[G.RGBA_INTEGER=36249]="RGBA_INTEGER",G[G.RGB_INTEGER=36248]="RGB_INTEGER",G[G.RG_INTEGER=33320]="RG_INTEGER",G[G.RED_INTEGER=36244]="RED_INTEGER",G[G.ALPHA=6406]="ALPHA",G[G.LUMINANCE=6409]="LUMINANCE",G[G.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",G[G.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",G[G.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(FORMATS||(FORMATS={}));var TARGETS;(function(G){G[G.TEXTURE_2D=3553]="TEXTURE_2D",G[G.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",G[G.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",G[G.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",G[G.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",G[G.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",G[G.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",G[G.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(TARGETS||(TARGETS={}));var TYPES;(function(G){G[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.UNSIGNED_INT=5125]="UNSIGNED_INT",G[G.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",G[G.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",G[G.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",G[G.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",G[G.BYTE=5120]="BYTE",G[G.SHORT=5122]="SHORT",G[G.INT=5124]="INT",G[G.FLOAT=5126]="FLOAT",G[G.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",G[G.HALF_FLOAT=36193]="HALF_FLOAT"})(TYPES||(TYPES={}));var SAMPLER_TYPES;(function(G){G[G.FLOAT=0]="FLOAT",G[G.INT=1]="INT",G[G.UINT=2]="UINT"})(SAMPLER_TYPES||(SAMPLER_TYPES={}));var SCALE_MODES;(function(G){G[G.NEAREST=0]="NEAREST",G[G.LINEAR=1]="LINEAR"})(SCALE_MODES||(SCALE_MODES={}));var WRAP_MODES;(function(G){G[G.CLAMP=33071]="CLAMP",G[G.REPEAT=10497]="REPEAT",G[G.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WRAP_MODES||(WRAP_MODES={}));var MIPMAP_MODES;(function(G){G[G.OFF=0]="OFF",G[G.POW2=1]="POW2",G[G.ON=2]="ON",G[G.ON_MANUAL=3]="ON_MANUAL"})(MIPMAP_MODES||(MIPMAP_MODES={}));var ALPHA_MODES;(function(G){G[G.NPM=0]="NPM",G[G.UNPACK=1]="UNPACK",G[G.PMA=2]="PMA",G[G.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",G[G.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",G[G.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",G[G.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(ALPHA_MODES||(ALPHA_MODES={}));var CLEAR_MODES;(function(G){G[G.NO=0]="NO",G[G.YES=1]="YES",G[G.AUTO=2]="AUTO",G[G.BLEND=0]="BLEND",G[G.CLEAR=1]="CLEAR",G[G.BLIT=2]="BLIT"})(CLEAR_MODES||(CLEAR_MODES={}));var GC_MODES;(function(G){G[G.AUTO=0]="AUTO",G[G.MANUAL=1]="MANUAL"})(GC_MODES||(GC_MODES={}));var PRECISION;(function(G){G.LOW="lowp",G.MEDIUM="mediump",G.HIGH="highp"})(PRECISION||(PRECISION={}));var MASK_TYPES;(function(G){G[G.NONE=0]="NONE",G[G.SCISSOR=1]="SCISSOR",G[G.STENCIL=2]="STENCIL",G[G.SPRITE=3]="SPRITE"})(MASK_TYPES||(MASK_TYPES={}));var MSAA_QUALITY;(function(G){G[G.NONE=0]="NONE",G[G.LOW=2]="LOW",G[G.MEDIUM=4]="MEDIUM",G[G.HIGH=8]="HIGH"})(MSAA_QUALITY||(MSAA_QUALITY={}));var BUFFER_TYPE;(function(G){G[G.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",G[G.ARRAY_BUFFER=34962]="ARRAY_BUFFER",G[G.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BUFFER_TYPE||(BUFFER_TYPE={}));var _tempMatrix=new Matrix$1;DisplayObject$1.prototype._cacheAsBitmap=!1;DisplayObject$1.prototype._cacheData=null;DisplayObject$1.prototype._cacheAsBitmapResolution=null;DisplayObject$1.prototype._cacheAsBitmapMultisample=MSAA_QUALITY.NONE;var CacheData=function(){function G(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return G}();Object.defineProperties(DisplayObject$1.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(G){G!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=G,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(G){G!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=G,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(G){if(this._cacheAsBitmap!==G){this._cacheAsBitmap=G;var U;G?(this._cacheData||(this._cacheData=new CacheData),U=this._cacheData,U.originalRender=this.render,U.originalRenderCanvas=this.renderCanvas,U.originalUpdateTransform=this.updateTransform,U.originalCalculateBounds=this.calculateBounds,U.originalGetLocalBounds=this.getLocalBounds,U.originalDestroy=this.destroy,U.originalContainsPoint=this.containsPoint,U.originalMask=this._mask,U.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(U=this._cacheData,U.sprite&&this._destroyCachedDisplayObject(),this.render=U.originalRender,this.renderCanvas=U.originalRenderCanvas,this.calculateBounds=U.originalCalculateBounds,this.getLocalBounds=U.originalGetLocalBounds,this.destroy=U.originalDestroy,this.updateTransform=U.originalUpdateTransform,this.containsPoint=U.originalContainsPoint,this._mask=U.originalMask,this.filterArea=U.originalFilterArea)}}}});DisplayObject$1.prototype._renderCached=function(U){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(U),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(U))};DisplayObject$1.prototype._initCachedDisplayObject=function(U){var L;if(!(this._cacheData&&this._cacheData.sprite)){var Y=this.alpha;this.alpha=1,U.batch.flush();var X=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var W=this.filters[0].padding;X.pad(W)}X.ceil(settings$1.RESOLUTION);var z=U.renderTexture.current,J=U.renderTexture.sourceFrame.clone(),Z=U.renderTexture.destinationFrame.clone(),ee=U.projection.transform,te=RenderTexture$1.create({width:X.width,height:X.height,resolution:this.cacheAsBitmapResolution||U.resolution,multisample:(L=this.cacheAsBitmapMultisample)!==null&&L!==void 0?L:U.multisample}),re="cacheAsBitmap_"+uid$1();this._cacheData.textureCacheId=re,BaseTexture$1.addToCache(te.baseTexture,re),Texture$1.addToCache(te,re);var ie=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-X.x,-X.y);this.render=this._cacheData.originalRender,U.render(this,{renderTexture:te,clear:!0,transform:ie,skipUpdateTransform:!1}),U.framebuffer.blit(),U.projection.transform=ee,U.renderTexture.bind(z,J,Z),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=Y;var ne=new Sprite(te);ne.transform.worldTransform=this.transform.worldTransform,ne.anchor.x=-(X.x/X.width),ne.anchor.y=-(X.y/X.height),ne.alpha=Y,ne._bounds=this._bounds,this._cacheData.sprite=ne,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=ne.containsPoint.bind(ne)}};DisplayObject$1.prototype._renderCachedCanvas=function(U){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(U),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(U))};DisplayObject$1.prototype._initCachedDisplayObjectCanvas=function(U){if(!(this._cacheData&&this._cacheData.sprite)){var L=this.getLocalBounds(null,!0),Y=this.alpha;this.alpha=1;var X=U.context,W=U._projTransform;L.ceil(settings$1.RESOLUTION);var z=RenderTexture$1.create({width:L.width,height:L.height}),J="cacheAsBitmap_"+uid$1();this._cacheData.textureCacheId=J,BaseTexture$1.addToCache(z.baseTexture,J),Texture$1.addToCache(z,J);var Z=_tempMatrix;this.transform.localTransform.copyTo(Z),Z.invert(),Z.tx-=L.x,Z.ty-=L.y,this.renderCanvas=this._cacheData.originalRenderCanvas,U.render(this,{renderTexture:z,clear:!0,transform:Z,skipUpdateTransform:!1}),U.context=X,U._projTransform=W,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=Y;var ee=new Sprite(z);ee.transform.worldTransform=this.transform.worldTransform,ee.anchor.x=-(L.x/L.width),ee.anchor.y=-(L.y/L.height),ee.alpha=Y,ee._bounds=this._bounds,this._cacheData.sprite=ee,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=U._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ee.containsPoint.bind(ee)}};DisplayObject$1.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject$1.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject$1.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture$1.removeFromCache(this._cacheData.textureCacheId),Texture$1.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject$1.prototype._cacheAsBitmapDestroy=function(U){this.cacheAsBitmap=!1,this.destroy(U)};/*!
 * @pixi/mixin-get-child-by-name - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject$1.prototype.name=null;Container$1.prototype.getChildByName=function(U,L){for(var Y=0,X=this.children.length;Y<X;Y++)if(this.children[Y].name===U)return this.children[Y];if(L)for(var Y=0,X=this.children.length;Y<X;Y++){var W=this.children[Y];if(!!W.getChildByName){var z=this.children[Y].getChildByName(U,!0);if(z)return z}}return null};/*!
 * @pixi/mixin-get-global-position - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */DisplayObject$1.prototype.getGlobalPosition=function(U,L){return U===void 0&&(U=new Point$1),L===void 0&&(L=!1),this.parent?this.parent.toGlobal(this.position,U,L):(U.x=this.position.x,U.y=this.position.y),U};/*!
 * @pixi/mesh-extras - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$6=function(G,U){return extendStatics$6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$6(G,U)};function __extends$y(G,U){extendStatics$6(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var PlaneGeometry=function(G){__extends$y(U,G);function U(L,Y,X,W){L===void 0&&(L=100),Y===void 0&&(Y=100),X===void 0&&(X=10),W===void 0&&(W=10);var z=G.call(this)||this;return z.segWidth=X,z.segHeight=W,z.width=L,z.height=Y,z.build(),z}return U.prototype.build=function(){for(var L=this.segWidth*this.segHeight,Y=[],X=[],W=[],z=this.segWidth-1,J=this.segHeight-1,Z=this.width/z,ee=this.height/J,te=0;te<L;te++){var re=te%this.segWidth,ie=te/this.segWidth|0;Y.push(re*Z,ie*ee),X.push(re/z,ie/J)}for(var ne=z*J,te=0;te<ne;te++){var oe=te%z,se=te/z|0,ae=se*this.segWidth+oe,le=se*this.segWidth+oe+1,ue=(se+1)*this.segWidth+oe,ce=(se+1)*this.segWidth+oe+1;W.push(ae,le,ue,le,ce,ue)}this.buffers[0].data=new Float32Array(Y),this.buffers[1].data=new Float32Array(X),this.indexBuffer.data=new Uint16Array(W),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},U}(MeshGeometry),RopeGeometry=function(G){__extends$y(U,G);function U(L,Y,X){L===void 0&&(L=200),X===void 0&&(X=0);var W=G.call(this,new Float32Array(Y.length*4),new Float32Array(Y.length*4),new Uint16Array((Y.length-1)*6))||this;return W.points=Y,W._width=L,W.textureScale=X,W.build(),W}return Object.defineProperty(U.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),U.prototype.build=function(){var L=this.points;if(!!L){var Y=this.getBuffer("aVertexPosition"),X=this.getBuffer("aTextureCoord"),W=this.getIndex();if(!(L.length<1)){Y.data.length/4!==L.length&&(Y.data=new Float32Array(L.length*4),X.data=new Float32Array(L.length*4),W.data=new Uint16Array((L.length-1)*6));var z=X.data,J=W.data;z[0]=0,z[1]=0,z[2]=0,z[3]=1;for(var Z=0,ee=L[0],te=this._width*this.textureScale,re=L.length,ie=0;ie<re;ie++){var ne=ie*4;if(this.textureScale>0){var oe=ee.x-L[ie].x,se=ee.y-L[ie].y,ae=Math.sqrt(oe*oe+se*se);ee=L[ie],Z+=ae/te}else Z=ie/(re-1);z[ne]=Z,z[ne+1]=0,z[ne+2]=Z,z[ne+3]=1}for(var le=0,ie=0;ie<re-1;ie++){var ne=ie*2;J[le++]=ne,J[le++]=ne+1,J[le++]=ne+2,J[le++]=ne+2,J[le++]=ne+1,J[le++]=ne+3}X.update(),W.update(),this.updateVertices()}}},U.prototype.updateVertices=function(){var L=this.points;if(!(L.length<1)){for(var Y=L[0],X,W=0,z=0,J=this.buffers[0].data,Z=L.length,ee=0;ee<Z;ee++){var te=L[ee],re=ee*4;ee<L.length-1?X=L[ee+1]:X=te,z=-(X.x-Y.x),W=X.y-Y.y;var ie=Math.sqrt(W*W+z*z),ne=this.textureScale>0?this.textureScale*this._width/2:this._width/2;W/=ie,z/=ie,W*=ne,z*=ne,J[re]=te.x+W,J[re+1]=te.y+z,J[re+2]=te.x-W,J[re+3]=te.y-z,Y=te}this.buffers[0].update()}},U.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},U}(MeshGeometry),SimpleRope=function(G){__extends$y(U,G);function U(L,Y,X){X===void 0&&(X=0);var W=this,z=new RopeGeometry(L.height,Y,X),J=new MeshMaterial(L);return X>0&&(L.baseTexture.wrapMode=WRAP_MODES$4.REPEAT),W=G.call(this,z,J)||this,W.autoUpdate=!0,W}return U.prototype._render=function(L){var Y=this.geometry;(this.autoUpdate||Y._width!==this.shader.texture.height)&&(Y._width=this.shader.texture.height,Y.update()),G.prototype._render.call(this,L)},U}(Mesh),SimplePlane=function(G){__extends$y(U,G);function U(L,Y,X){var W=this,z=new PlaneGeometry(L.width,L.height,Y,X),J=new MeshMaterial(Texture$1.WHITE);return W=G.call(this,z,J)||this,W.texture=L,W.autoResize=!0,W}return U.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var L=this.geometry,Y=this.shader.texture,X=Y.width,W=Y.height;this.autoResize&&(L.width!==X||L.height!==W)&&(L.width=this.shader.texture.width,L.height=this.shader.texture.height,L.build())},Object.defineProperty(U.prototype,"texture",{get:function(){return this.shader.texture},set:function(L){this.shader.texture!==L&&(this.shader.texture=L,this._textureID=-1,L.baseTexture.valid?this.textureUpdated():L.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),U.prototype._render=function(L){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),G.prototype._render.call(this,L)},U.prototype.destroy=function(L){this.shader.texture.off("update",this.textureUpdated,this),G.prototype.destroy.call(this,L)},U}(Mesh),SimpleMesh=function(G){__extends$y(U,G);function U(L,Y,X,W,z){L===void 0&&(L=Texture$1.EMPTY);var J=this,Z=new MeshGeometry(Y,X,W);Z.getBuffer("aVertexPosition").static=!1;var ee=new MeshMaterial(L);return J=G.call(this,Z,ee,null,z)||this,J.autoUpdate=!0,J}return Object.defineProperty(U.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(L){this.geometry.getBuffer("aVertexPosition").data=L},enumerable:!1,configurable:!0}),U.prototype._render=function(L){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),G.prototype._render.call(this,L)},U}(Mesh),DEFAULT_BORDER_SIZE=10,NineSlicePlane=function(G){__extends$y(U,G);function U(L,Y,X,W,z){Y===void 0&&(Y=DEFAULT_BORDER_SIZE),X===void 0&&(X=DEFAULT_BORDER_SIZE),W===void 0&&(W=DEFAULT_BORDER_SIZE),z===void 0&&(z=DEFAULT_BORDER_SIZE);var J=G.call(this,Texture$1.WHITE,4,4)||this;return J._origWidth=L.orig.width,J._origHeight=L.orig.height,J._width=J._origWidth,J._height=J._origHeight,J._leftWidth=Y,J._rightWidth=W,J._topHeight=X,J._bottomHeight=z,J.texture=L,J}return U.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(U.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(L){this.geometry.getBuffer("aVertexPosition").data=L},enumerable:!1,configurable:!0}),U.prototype.updateHorizontalVertices=function(){var L=this.vertices,Y=this._getMinScale();L[9]=L[11]=L[13]=L[15]=this._topHeight*Y,L[17]=L[19]=L[21]=L[23]=this._height-this._bottomHeight*Y,L[25]=L[27]=L[29]=L[31]=this._height},U.prototype.updateVerticalVertices=function(){var L=this.vertices,Y=this._getMinScale();L[2]=L[10]=L[18]=L[26]=this._leftWidth*Y,L[4]=L[12]=L[20]=L[28]=this._width-this._rightWidth*Y,L[6]=L[14]=L[22]=L[30]=this._width},U.prototype._getMinScale=function(){var L=this._leftWidth+this._rightWidth,Y=this._width>L?1:this._width/L,X=this._topHeight+this._bottomHeight,W=this._height>X?1:this._height/X,z=Math.min(Y,W);return z},Object.defineProperty(U.prototype,"width",{get:function(){return this._width},set:function(L){this._width=L,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this._height},set:function(L){this._height=L,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(L){this._leftWidth=L,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(L){this._rightWidth=L,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"topHeight",{get:function(){return this._topHeight},set:function(L){this._topHeight=L,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(L){this._bottomHeight=L,this._refresh()},enumerable:!1,configurable:!0}),U.prototype._refresh=function(){var L=this.texture,Y=this.geometry.buffers[1].data;this._origWidth=L.orig.width,this._origHeight=L.orig.height;var X=1/this._origWidth,W=1/this._origHeight;Y[0]=Y[8]=Y[16]=Y[24]=0,Y[1]=Y[3]=Y[5]=Y[7]=0,Y[6]=Y[14]=Y[22]=Y[30]=1,Y[25]=Y[27]=Y[29]=Y[31]=1,Y[2]=Y[10]=Y[18]=Y[26]=X*this._leftWidth,Y[4]=Y[12]=Y[20]=Y[28]=1-X*this._rightWidth,Y[9]=Y[11]=Y[13]=Y[15]=W*this._topHeight,Y[17]=Y[19]=Y[21]=Y[23]=1-W*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},U}(SimplePlane);/*!
 * @pixi/sprite-animated - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$5=function(G,U){return extendStatics$5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$5(G,U)};function __extends$x(G,U){extendStatics$5(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var AnimatedSprite=function(G){__extends$x(U,G);function U(L,Y){Y===void 0&&(Y=!0);var X=G.call(this,L[0]instanceof Texture$1?L[0]:L[0].texture)||this;return X._textures=null,X._durations=null,X._autoUpdate=Y,X._isConnectedToTicker=!1,X.animationSpeed=1,X.loop=!0,X.updateAnchor=!1,X.onComplete=null,X.onFrameChange=null,X.onLoop=null,X._currentTime=0,X._playing=!1,X._previousFrame=null,X.textures=L,X}return U.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1))},U.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker$1.shared.add(this.update,this,UPDATE_PRIORITY$1.HIGH),this._isConnectedToTicker=!0))},U.prototype.gotoAndStop=function(L){this.stop();var Y=this.currentFrame;this._currentTime=L,Y!==this.currentFrame&&this.updateTexture()},U.prototype.gotoAndPlay=function(L){var Y=this.currentFrame;this._currentTime=L,Y!==this.currentFrame&&this.updateTexture(),this.play()},U.prototype.update=function(L){if(!!this._playing){var Y=this.animationSpeed*L,X=this.currentFrame;if(this._durations!==null){var W=this._currentTime%1*this._durations[this.currentFrame];for(W+=Y/60*1e3;W<0;)this._currentTime--,W+=this._durations[this.currentFrame];var z=Math.sign(this.animationSpeed*L);for(this._currentTime=Math.floor(this._currentTime);W>=this._durations[this.currentFrame];)W-=this._durations[this.currentFrame]*z,this._currentTime+=z;this._currentTime+=W/this._durations[this.currentFrame]}else this._currentTime+=Y;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):X!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<X?this.onLoop():this.animationSpeed<0&&this.currentFrame>X&&this.onLoop()),this.updateTexture())}},U.prototype.updateTexture=function(){var L=this.currentFrame;this._previousFrame!==L&&(this._previousFrame=L,this._texture=this._textures[L],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},U.prototype.destroy=function(L){this.stop(),G.prototype.destroy.call(this,L),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},U.fromFrames=function(L){for(var Y=[],X=0;X<L.length;++X)Y.push(Texture$1.from(L[X]));return new U(Y)},U.fromImages=function(L){for(var Y=[],X=0;X<L.length;++X)Y.push(Texture$1.from(L[X]));return new U(Y)},Object.defineProperty(U.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"textures",{get:function(){return this._textures},set:function(L){if(L[0]instanceof Texture$1)this._textures=L,this._durations=null;else{this._textures=[],this._durations=[];for(var Y=0;Y<L.length;Y++)this._textures.push(L[Y].texture),this._durations.push(L[Y].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentFrame",{get:function(){var L=Math.floor(this._currentTime)%this._textures.length;return L<0&&(L+=this._textures.length),L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(L){L!==this._autoUpdate&&(this._autoUpdate=L,!this._autoUpdate&&this._isConnectedToTicker?(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),U}(Sprite);/*!
 * pixi.js - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Renderer.registerPlugin("accessibility",AccessibilityManager);Renderer.registerPlugin("extract",Extract);Renderer.registerPlugin("interaction",InteractionManager);Renderer.registerPlugin("particle",ParticleRenderer);Renderer.registerPlugin("prepare",Prepare);Renderer.registerPlugin("batch",BatchRenderer);Renderer.registerPlugin("tilingSprite",TilingSpriteRenderer);Loader.registerPlugin(BitmapFontLoader);Loader.registerPlugin(CompressedTextureLoader);Loader.registerPlugin(DDSLoader);Loader.registerPlugin(KTXLoader);Loader.registerPlugin(SpritesheetLoader);Application.registerPlugin(TickerPlugin);Application.registerPlugin(AppLoaderPlugin);var VERSION$5="6.4.2",filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter},PIXI=Object.freeze(Object.defineProperty({__proto__:null,utils,VERSION:VERSION$5,filters,AccessibilityManager,accessibleTarget,InteractionData,InteractionEvent,InteractionManager,InteractionTrackingData,interactiveTarget,Application,AbstractBatchRenderer:AbstractBatchRenderer$1,AbstractMultiResource:AbstractMultiResource$1,AbstractRenderer:AbstractRenderer$1,ArrayResource:ArrayResource$1,Attribute:Attribute$1,BaseImageResource:BaseImageResource$1,BaseRenderTexture:BaseRenderTexture$1,BaseTexture:BaseTexture$1,BatchDrawCall:BatchDrawCall$1,BatchGeometry:BatchGeometry$1,BatchPluginFactory:BatchPluginFactory$1,BatchRenderer,BatchShaderGenerator:BatchShaderGenerator$1,BatchSystem:BatchSystem$1,BatchTextureArray:BatchTextureArray$1,Buffer:Buffer$1,BufferResource:BufferResource$1,CanvasResource:CanvasResource$1,ContextSystem:ContextSystem$1,CubeResource:CubeResource$1,Filter:Filter$1,FilterState:FilterState$1,FilterSystem:FilterSystem$1,Framebuffer:Framebuffer$1,FramebufferSystem:FramebufferSystem$1,GLFramebuffer:GLFramebuffer$1,GLProgram:GLProgram$1,GLTexture:GLTexture$1,Geometry:Geometry$1,GeometrySystem:GeometrySystem$1,IGLUniformData,INSTALLED:INSTALLED$1,ImageBitmapResource:ImageBitmapResource$1,ImageResource:ImageResource$1,MaskData:MaskData$1,MaskSystem:MaskSystem$1,ObjectRenderer:ObjectRenderer$1,Program:Program$1,ProjectionSystem:ProjectionSystem$1,Quad:Quad$1,QuadUv:QuadUv$1,RenderTexture:RenderTexture$1,RenderTexturePool:RenderTexturePool$1,RenderTextureSystem:RenderTextureSystem$1,Renderer,Resource:Resource$1,SVGResource:SVGResource$1,ScissorSystem:ScissorSystem$1,Shader:Shader$1,ShaderSystem:ShaderSystem$1,SpriteMaskFilter:SpriteMaskFilter$1,State:State$1,StateSystem:StateSystem$1,StencilSystem:StencilSystem$1,System,Texture:Texture$1,TextureGCSystem:TextureGCSystem$1,TextureMatrix:TextureMatrix$1,TextureSystem:TextureSystem$1,TextureUvs:TextureUvs$1,UniformGroup:UniformGroup$1,VideoResource:VideoResource$1,ViewableBuffer:ViewableBuffer$1,autoDetectRenderer,autoDetectResource:autoDetectResource$1,checkMaxIfStatementsInShader:checkMaxIfStatementsInShader$1,createUBOElements:createUBOElements$1,defaultFilterVertex,defaultVertex:defaultVertex$1,generateProgram:generateProgram$1,generateUniformBufferSync:generateUniformBufferSync$1,getTestContext:getTestContext$1,getUBOData:getUBOData$1,resources:resources$1,systems:systems$1,uniformParsers:uniformParsers$1,Extract,AppLoaderPlugin,Loader,get LoaderResource(){return LoaderResource},TextureLoader,BlobResource,CompressedTextureLoader,CompressedTextureResource,DDSLoader,FORMATS_TO_COMPONENTS,get INTERNAL_FORMATS(){return INTERNAL_FORMATS},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL,KTXLoader,TYPES_TO_BYTES_PER_COMPONENT,TYPES_TO_BYTES_PER_PIXEL,ParticleContainer,ParticleRenderer,BasePrepare,CountLimiter,Prepare,TimeLimiter,Spritesheet,SpritesheetLoader,TilingSprite,TilingSpriteRenderer,BitmapFont,BitmapFontData,BitmapFontLoader,BitmapText,Ticker:Ticker$1,TickerPlugin,get UPDATE_PRIORITY(){return UPDATE_PRIORITY$1},get ALPHA_MODES(){return ALPHA_MODES$4},get BLEND_MODES(){return BLEND_MODES$4},get BUFFER_BITS(){return BUFFER_BITS$4},get BUFFER_TYPE(){return BUFFER_TYPE$4},get CLEAR_MODES(){return CLEAR_MODES$4},get DRAW_MODES(){return DRAW_MODES$4},get ENV(){return ENV$4},get FORMATS(){return FORMATS$4},get GC_MODES(){return GC_MODES$4},get MASK_TYPES(){return MASK_TYPES$4},get MIPMAP_MODES(){return MIPMAP_MODES$4},get MSAA_QUALITY(){return MSAA_QUALITY$4},get PRECISION(){return PRECISION$4},get RENDERER_TYPE(){return RENDERER_TYPE$4},get SAMPLER_TYPES(){return SAMPLER_TYPES$4},get SCALE_MODES(){return SCALE_MODES$4},get TARGETS(){return TARGETS$4},get TYPES(){return TYPES$4},get WRAP_MODES(){return WRAP_MODES$4},Bounds:Bounds$1,Container:Container$1,DisplayObject:DisplayObject$1,TemporaryDisplayObject:TemporaryDisplayObject$1,FillStyle,GRAPHICS_CURVES,Graphics,GraphicsData,GraphicsGeometry,get LINE_CAP(){return LINE_CAP},get LINE_JOIN(){return LINE_JOIN},LineStyle,graphicsUtils,Circle,DEG_TO_RAD,Ellipse,Matrix:Matrix$1,ObservablePoint:ObservablePoint$1,PI_2:PI_2$1,Point:Point$1,Polygon,RAD_TO_DEG,Rectangle:Rectangle$1,RoundedRectangle,get SHAPES(){return SHAPES$1},Transform,groupD8:groupD8$1,Mesh,MeshBatchUvs,MeshGeometry,MeshMaterial,NineSlicePlane,PlaneGeometry,RopeGeometry,SimpleMesh,SimplePlane,SimpleRope,Runner:Runner$1,Sprite,AnimatedSprite,get TEXT_GRADIENT(){return TEXT_GRADIENT},Text,TextMetrics,TextStyle,isMobile:isMobile$4,settings:settings$1},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/canvas-renderer - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-renderer is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$4=function(G,U){return extendStatics$4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$4(G,U)};function __extends$w(G,U){extendStatics$4(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var CanvasMaskManager=function(){function G(U){this._foundShapes=[],this.renderer=U}return G.prototype.pushMask=function(U){var L=this.renderer,Y=U.maskObject||U;L.context.save();var X=this._foundShapes;if(this.recursiveFindShapes(Y,X),X.length>0){var W=L.context;W.beginPath();for(var z=0;z<X.length;z++){var J=X[z],Z=J.transform.worldTransform;this.renderer.setContextTransform(Z),this.renderGraphicsShape(J)}X.length=0,W.clip()}},G.prototype.recursiveFindShapes=function(U,L){U.geometry&&U.geometry.graphicsData&&L.push(U);var Y=U.children;if(Y)for(var X=0;X<Y.length;X++)this.recursiveFindShapes(Y[X],L)},G.prototype.renderGraphicsShape=function(U){U.finishPoly();var L=this.renderer.context,Y=U.geometry.graphicsData,X=Y.length;if(X!==0)for(var W=0;W<X;W++){var z=Y[W],J=z.shape;if(J.type===SHAPES$1.POLY){var Z=J.points,ee=z.holes,te=void 0,re=void 0,ie=void 0,ne=void 0;L.moveTo(Z[0],Z[1]);for(var oe=1;oe<Z.length/2;oe++)L.lineTo(Z[oe*2],Z[oe*2+1]);if(ee.length>0){te=0,ie=Z[0],ne=Z[1];for(var oe=2;oe+2<Z.length;oe+=2)te+=(Z[oe]-ie)*(Z[oe+3]-ne)-(Z[oe+2]-ie)*(Z[oe+1]-ne);for(var se=0;se<ee.length;se++)if(Z=ee[se].shape.points,!!Z){re=0,ie=Z[0],ne=Z[1];for(var oe=2;oe+2<Z.length;oe+=2)re+=(Z[oe]-ie)*(Z[oe+3]-ne)-(Z[oe+2]-ie)*(Z[oe+1]-ne);if(re*te<0){L.moveTo(Z[0],Z[1]);for(var oe=2;oe<Z.length;oe+=2)L.lineTo(Z[oe],Z[oe+1])}else{L.moveTo(Z[Z.length-2],Z[Z.length-1]);for(var oe=Z.length-4;oe>=0;oe-=2)L.lineTo(Z[oe],Z[oe+1])}ee[se].shape.closeStroke&&L.closePath()}}Z[0]===Z[Z.length-2]&&Z[1]===Z[Z.length-1]&&L.closePath()}else if(J.type===SHAPES$1.RECT)L.rect(J.x,J.y,J.width,J.height),L.closePath();else if(J.type===SHAPES$1.CIRC)L.arc(J.x,J.y,J.radius,0,2*Math.PI),L.closePath();else if(J.type===SHAPES$1.ELIP){var ae=J.width*2,le=J.height*2,ue=J.x-ae/2,ce=J.y-le/2,he=.5522848,fe=ae/2*he,de=le/2*he,_e=ue+ae,me=ce+le,ve=ue+ae/2,ye=ce+le/2;L.moveTo(ue,ye),L.bezierCurveTo(ue,ye-de,ve-fe,ce,ve,ce),L.bezierCurveTo(ve+fe,ce,_e,ye-de,_e,ye),L.bezierCurveTo(_e,ye+de,ve+fe,me,ve,me),L.bezierCurveTo(ve-fe,me,ue,ye+de,ue,ye),L.closePath()}else if(J.type===SHAPES$1.RREC){var be=J.x,Te=J.y,Se=J.width,Ue=J.height,Pe=J.radius,Ne=Math.min(Se,Ue)/2;Pe=Pe>Ne?Ne:Pe,L.moveTo(be,Te+Pe),L.lineTo(be,Te+Ue-Pe),L.quadraticCurveTo(be,Te+Ue,be+Pe,Te+Ue),L.lineTo(be+Se-Pe,Te+Ue),L.quadraticCurveTo(be+Se,Te+Ue,be+Se,Te+Ue-Pe),L.lineTo(be+Se,Te+Pe),L.quadraticCurveTo(be+Se,Te,be+Se-Pe,Te),L.lineTo(be+Pe,Te),L.quadraticCurveTo(be,Te,be,Te+Pe),L.closePath()}}},G.prototype.popMask=function(U){U.context.restore(),U.invalidateBlendMode()},G.prototype.destroy=function(){},G}();function createColoredCanvas(G){var U=document.createElement("canvas");U.width=6,U.height=1;var L=U.getContext("2d");return L.fillStyle=G,L.fillRect(0,0,6,1),U}function canUseNewCanvasBlendModes(){if(typeof document=="undefined")return!1;var G=createColoredCanvas("#ff00ff"),U=createColoredCanvas("#ffff00"),L=document.createElement("canvas");L.width=6,L.height=1;var Y=L.getContext("2d");Y.globalCompositeOperation="multiply",Y.drawImage(G,0,0),Y.drawImage(U,2,0);var X=Y.getImageData(2,0,1,1);if(!X)return!1;var W=X.data;return W[0]===255&&W[1]===0&&W[2]===0}function mapCanvasBlendModesToPixi(G){return G===void 0&&(G=[]),canUseNewCanvasBlendModes()?(G[BLEND_MODES$4.NORMAL]="source-over",G[BLEND_MODES$4.ADD]="lighter",G[BLEND_MODES$4.MULTIPLY]="multiply",G[BLEND_MODES$4.SCREEN]="screen",G[BLEND_MODES$4.OVERLAY]="overlay",G[BLEND_MODES$4.DARKEN]="darken",G[BLEND_MODES$4.LIGHTEN]="lighten",G[BLEND_MODES$4.COLOR_DODGE]="color-dodge",G[BLEND_MODES$4.COLOR_BURN]="color-burn",G[BLEND_MODES$4.HARD_LIGHT]="hard-light",G[BLEND_MODES$4.SOFT_LIGHT]="soft-light",G[BLEND_MODES$4.DIFFERENCE]="difference",G[BLEND_MODES$4.EXCLUSION]="exclusion",G[BLEND_MODES$4.HUE]="hue",G[BLEND_MODES$4.SATURATION]="saturate",G[BLEND_MODES$4.COLOR]="color",G[BLEND_MODES$4.LUMINOSITY]="luminosity"):(G[BLEND_MODES$4.NORMAL]="source-over",G[BLEND_MODES$4.ADD]="lighter",G[BLEND_MODES$4.MULTIPLY]="source-over",G[BLEND_MODES$4.SCREEN]="source-over",G[BLEND_MODES$4.OVERLAY]="source-over",G[BLEND_MODES$4.DARKEN]="source-over",G[BLEND_MODES$4.LIGHTEN]="source-over",G[BLEND_MODES$4.COLOR_DODGE]="source-over",G[BLEND_MODES$4.COLOR_BURN]="source-over",G[BLEND_MODES$4.HARD_LIGHT]="source-over",G[BLEND_MODES$4.SOFT_LIGHT]="source-over",G[BLEND_MODES$4.DIFFERENCE]="source-over",G[BLEND_MODES$4.EXCLUSION]="source-over",G[BLEND_MODES$4.HUE]="source-over",G[BLEND_MODES$4.SATURATION]="source-over",G[BLEND_MODES$4.COLOR]="source-over",G[BLEND_MODES$4.LUMINOSITY]="source-over"),G[BLEND_MODES$4.NORMAL_NPM]=G[BLEND_MODES$4.NORMAL],G[BLEND_MODES$4.ADD_NPM]=G[BLEND_MODES$4.ADD],G[BLEND_MODES$4.SCREEN_NPM]=G[BLEND_MODES$4.SCREEN],G[BLEND_MODES$4.SRC_IN]="source-in",G[BLEND_MODES$4.SRC_OUT]="source-out",G[BLEND_MODES$4.SRC_ATOP]="source-atop",G[BLEND_MODES$4.DST_OVER]="destination-over",G[BLEND_MODES$4.DST_IN]="destination-in",G[BLEND_MODES$4.DST_OUT]="destination-out",G[BLEND_MODES$4.DST_ATOP]="destination-atop",G[BLEND_MODES$4.XOR]="xor",G[BLEND_MODES$4.SUBTRACT]="source-over",G}var tempMatrix$4=new Matrix$1,CanvasRenderer=function(G){__extends$w(U,G);function U(L){var Y=G.call(this,RENDERER_TYPE$4.CANVAS,L)||this;if(Y.refresh=!0,Y.maskManager=new CanvasMaskManager(Y),Y.smoothProperty="imageSmoothingEnabled",Y.blendModes=mapCanvasBlendModesToPixi(),Y.renderingToScreen=!1,Y._activeBlendMode=null,Y._projTransform=null,Y._outerBlend=!1,Y.rootContext=Y.view.getContext("2d",{alpha:Y.useContextAlpha}),Y.context=Y.rootContext,!Y.rootContext.imageSmoothingEnabled){var X=Y.rootContext;X.webkitImageSmoothingEnabled?Y.smoothProperty="webkitImageSmoothingEnabled":X.mozImageSmoothingEnabled?Y.smoothProperty="mozImageSmoothingEnabled":X.oImageSmoothingEnabled?Y.smoothProperty="oImageSmoothingEnabled":X.msImageSmoothingEnabled&&(Y.smoothProperty="msImageSmoothingEnabled")}return Y.initPlugins(U.__plugins),sayHello$1("Canvas"),Y.resize(Y.options.width,Y.options.height),Y}return U.prototype.addSystem=function(){return this},U.prototype.render=function(L,Y){if(!!this.view){var X,W,z,J;Y&&(Y instanceof RenderTexture$1||Y instanceof BaseRenderTexture$1?(deprecation$1("6.0.0","CanvasRenderer#render arguments changed, use options instead."),X=Y,W=arguments[2],z=arguments[3],J=arguments[4]):(X=Y.renderTexture,W=Y.clear,z=Y.transform,J=Y.skipUpdateTransform)),this.renderingToScreen=!X,this.emit("prerender");var Z=this.resolution;X?(X=X.castToBaseTexture(),X._canvasRenderTarget||(X._canvasRenderTarget=new CanvasRenderTarget(X.width,X.height,X.resolution),X.resource=new CanvasResource$1(X._canvasRenderTarget.canvas),X.valid=!0),this.context=X._canvasRenderTarget.context,this.resolution=X._canvasRenderTarget.resolution):this.context=this.rootContext;var ee=this.context;if(this._projTransform=z||null,X||(this._lastObjectRendered=L),!J){var te=L.enableTempParent();L.updateTransform(),L.disableTempParent(te)}if(ee.save(),ee.setTransform(1,0,0,1,0,0),ee.globalAlpha=1,this._activeBlendMode=BLEND_MODES$4.NORMAL,this._outerBlend=!1,ee.globalCompositeOperation=this.blendModes[BLEND_MODES$4.NORMAL],W!==void 0?W:this.clearBeforeRender)if(this.renderingToScreen)ee.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(ee.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,ee.fillStyle=this._backgroundColorString,ee.fillRect(0,0,this.width,this.height),ee.globalAlpha=1);else{X=X,X._canvasRenderTarget.clear();var re=X.clearColor;re[3]>0&&(ee.globalAlpha=this.useContextAlpha?re[3]:1,ee.fillStyle=hex2string$1(rgb2hex(re)),ee.fillRect(0,0,X.realWidth,X.realHeight),ee.globalAlpha=1)}var ie=this.context;this.context=ee,L.renderCanvas(this),this.context=ie,ee.restore(),this.resolution=Z,this._projTransform=null,this.emit("postrender")}},U.prototype.setContextTransform=function(L,Y,X){var W=L,z=this._projTransform,J=this.resolution;X=X||J,z&&(W=tempMatrix$4,W.copyFrom(L),W.prepend(z)),Y?this.context.setTransform(W.a*X,W.b*X,W.c*X,W.d*X,W.tx*J|0,W.ty*J|0):this.context.setTransform(W.a*X,W.b*X,W.c*X,W.d*X,W.tx*J,W.ty*J)},U.prototype.clear=function(L,Y){L===void 0&&(L=this._backgroundColorString),Y===void 0&&(Y=this.backgroundAlpha);var X=this.context;X.clearRect(0,0,this.width,this.height),L&&(X.globalAlpha=this.useContextAlpha?Y:1,X.fillStyle=L,X.fillRect(0,0,this.width,this.height),X.globalAlpha=1)},U.prototype.setBlendMode=function(L,Y){var X=L===BLEND_MODES$4.SRC_IN||L===BLEND_MODES$4.SRC_OUT||L===BLEND_MODES$4.DST_IN||L===BLEND_MODES$4.DST_ATOP;!Y&&X&&(L=BLEND_MODES$4.NORMAL),this._activeBlendMode!==L&&(this._activeBlendMode=L,this._outerBlend=X,this.context.globalCompositeOperation=this.blendModes[L])},U.prototype.destroy=function(L){G.prototype.destroy.call(this,L),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},U.prototype.resize=function(L,Y){G.prototype.resize.call(this,L,Y),this.smoothProperty&&(this.rootContext[this.smoothProperty]=settings$1.SCALE_MODE===SCALE_MODES$4.LINEAR)},U.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},U.registerPlugin=function(L,Y){U.__plugins=U.__plugins||{},U.__plugins[L]=Y},U}(AbstractRenderer$1),canvasUtils={canvas:null,getTintedCanvas:function(G,U){var L=G.texture;U=canvasUtils.roundColor(U);var Y="#"+("00000"+(U|0).toString(16)).slice(-6);L.tintCache=L.tintCache||{};var X=L.tintCache[Y],W;if(X){if(X.tintId===L._updateID)return L.tintCache[Y];W=L.tintCache[Y]}else W=document.createElement("canvas");return canvasUtils.tintMethod(L,U,W),W.tintId=L._updateID,L.tintCache[Y]=W,W},getTintedPattern:function(G,U){U=canvasUtils.roundColor(U);var L="#"+("00000"+(U|0).toString(16)).slice(-6);G.patternCache=G.patternCache||{};var Y=G.patternCache[L];return Y&&Y.tintId===G._updateID||(canvasUtils.canvas||(canvasUtils.canvas=document.createElement("canvas")),canvasUtils.tintMethod(G,U,canvasUtils.canvas),Y=canvasUtils.canvas.getContext("2d").createPattern(canvasUtils.canvas,"repeat"),Y.tintId=G._updateID,G.patternCache[L]=Y),Y},tintWithMultiply:function(G,U,L){var Y=L.getContext("2d"),X=G._frame.clone(),W=G.baseTexture.resolution;X.x*=W,X.y*=W,X.width*=W,X.height*=W,L.width=Math.ceil(X.width),L.height=Math.ceil(X.height),Y.save(),Y.fillStyle="#"+("00000"+(U|0).toString(16)).slice(-6),Y.fillRect(0,0,X.width,X.height),Y.globalCompositeOperation="multiply";var z=G.baseTexture.getDrawableSource();Y.drawImage(z,X.x,X.y,X.width,X.height,0,0,X.width,X.height),Y.globalCompositeOperation="destination-atop",Y.drawImage(z,X.x,X.y,X.width,X.height,0,0,X.width,X.height),Y.restore()},tintWithOverlay:function(G,U,L){var Y=L.getContext("2d"),X=G._frame.clone(),W=G.baseTexture.resolution;X.x*=W,X.y*=W,X.width*=W,X.height*=W,L.width=Math.ceil(X.width),L.height=Math.ceil(X.height),Y.save(),Y.globalCompositeOperation="copy",Y.fillStyle="#"+("00000"+(U|0).toString(16)).slice(-6),Y.fillRect(0,0,X.width,X.height),Y.globalCompositeOperation="destination-atop",Y.drawImage(G.baseTexture.getDrawableSource(),X.x,X.y,X.width,X.height,0,0,X.width,X.height),Y.restore()},tintWithPerPixel:function(G,U,L){var Y=L.getContext("2d"),X=G._frame.clone(),W=G.baseTexture.resolution;X.x*=W,X.y*=W,X.width*=W,X.height*=W,L.width=Math.ceil(X.width),L.height=Math.ceil(X.height),Y.save(),Y.globalCompositeOperation="copy",Y.drawImage(G.baseTexture.getDrawableSource(),X.x,X.y,X.width,X.height,0,0,X.width,X.height),Y.restore();for(var z=hex2rgb$1(U),J=z[0],Z=z[1],ee=z[2],te=Y.getImageData(0,0,X.width,X.height),re=te.data,ie=0;ie<re.length;ie+=4)re[ie+0]*=J,re[ie+1]*=Z,re[ie+2]*=ee;Y.putImageData(te,0,0)},roundColor:function(G){var U=canvasUtils.cacheStepsPerColorChannel,L=hex2rgb$1(G);return L[0]=Math.min(255,L[0]/U*U),L[1]=Math.min(255,L[1]/U*U),L[2]=Math.min(255,L[2]/U*U),rgb2hex(L)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:canUseNewCanvasBlendModes(),tintMethod:null};canvasUtils.tintMethod=canvasUtils.canUseMultiply?canvasUtils.tintWithMultiply:canvasUtils.tintWithPerPixel;var parentCreate=Renderer.create;Renderer.create=function(U){var L=U&&U.forceCanvas;if(!L)try{return parentCreate(U)}catch(Y){}return new CanvasRenderer(U)};BaseTexture$1.prototype.getDrawableSource=function(){var U=this.resource;return U?U.bitmap||U.source:null};BaseRenderTexture$1.prototype._canvasRenderTarget=null;Texture$1.prototype.patternCache=null;Texture$1.prototype.tintCache=null;/*!
 * @pixi/canvas-mesh - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function createCommonjsModule(G,U,L){return L={path:U,exports:{},require:function(Y,X){return commonjsRequire(Y,X==null?L.path:X)}},G(L,L.exports),L.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var eventemitter3$1=createCommonjsModule(function(G){var U=Object.prototype.hasOwnProperty,L="~";function Y(){}Object.create&&(Y.prototype=Object.create(null),new Y().__proto__||(L=!1));function X(Z,ee,te){this.fn=Z,this.context=ee,this.once=te||!1}function W(Z,ee,te,re,ie){if(typeof te!="function")throw new TypeError("The listener must be a function");var ne=new X(te,re||Z,ie),oe=L?L+ee:ee;return Z._events[oe]?Z._events[oe].fn?Z._events[oe]=[Z._events[oe],ne]:Z._events[oe].push(ne):(Z._events[oe]=ne,Z._eventsCount++),Z}function z(Z,ee){--Z._eventsCount===0?Z._events=new Y:delete Z._events[ee]}function J(){this._events=new Y,this._eventsCount=0}J.prototype.eventNames=function(){var ee=[],te,re;if(this._eventsCount===0)return ee;for(re in te=this._events)U.call(te,re)&&ee.push(L?re.slice(1):re);return Object.getOwnPropertySymbols?ee.concat(Object.getOwnPropertySymbols(te)):ee},J.prototype.listeners=function(ee){var te=L?L+ee:ee,re=this._events[te];if(!re)return[];if(re.fn)return[re.fn];for(var ie=0,ne=re.length,oe=new Array(ne);ie<ne;ie++)oe[ie]=re[ie].fn;return oe},J.prototype.listenerCount=function(ee){var te=L?L+ee:ee,re=this._events[te];return re?re.fn?1:re.length:0},J.prototype.emit=function(ee,te,re,ie,ne,oe){var se=arguments,ae=L?L+ee:ee;if(!this._events[ae])return!1;var le=this._events[ae],ue=arguments.length,ce,he;if(le.fn){switch(le.once&&this.removeListener(ee,le.fn,void 0,!0),ue){case 1:return le.fn.call(le.context),!0;case 2:return le.fn.call(le.context,te),!0;case 3:return le.fn.call(le.context,te,re),!0;case 4:return le.fn.call(le.context,te,re,ie),!0;case 5:return le.fn.call(le.context,te,re,ie,ne),!0;case 6:return le.fn.call(le.context,te,re,ie,ne,oe),!0}for(he=1,ce=new Array(ue-1);he<ue;he++)ce[he-1]=se[he];le.fn.apply(le.context,ce)}else{var fe=le.length,de;for(he=0;he<fe;he++)switch(le[he].once&&this.removeListener(ee,le[he].fn,void 0,!0),ue){case 1:le[he].fn.call(le[he].context);break;case 2:le[he].fn.call(le[he].context,te);break;case 3:le[he].fn.call(le[he].context,te,re);break;case 4:le[he].fn.call(le[he].context,te,re,ie);break;default:if(!ce)for(de=1,ce=new Array(ue-1);de<ue;de++)ce[de-1]=se[de];le[he].fn.apply(le[he].context,ce)}}return!0},J.prototype.on=function(ee,te,re){return W(this,ee,te,re,!1)},J.prototype.once=function(ee,te,re){return W(this,ee,te,re,!0)},J.prototype.removeListener=function(ee,te,re,ie){var ne=L?L+ee:ee;if(!this._events[ne])return this;if(!te)return z(this,ne),this;var oe=this._events[ne];if(oe.fn)oe.fn===te&&(!ie||oe.once)&&(!re||oe.context===re)&&z(this,ne);else{for(var se=0,ae=[],le=oe.length;se<le;se++)(oe[se].fn!==te||ie&&!oe[se].once||re&&oe[se].context!==re)&&ae.push(oe[se]);ae.length?this._events[ne]=ae.length===1?ae[0]:ae:z(this,ne)}return this},J.prototype.removeAllListeners=function(ee){var te;return ee?(te=L?L+ee:ee,this._events[te]&&z(this,te)):(this._events=new Y,this._eventsCount=0),this},J.prototype.off=J.prototype.removeListener,J.prototype.addListener=J.prototype.on,J.prefixed=L,J.EventEmitter=J,G.exports=J}),punycode=createCommonjsModule(function(G,U){(function(L){var Y=U&&!U.nodeType&&U,X=G&&!G.nodeType&&G,W=typeof commonjsGlobal=="object"&&commonjsGlobal;(W.global===W||W.window===W||W.self===W)&&(L=W);var z,J=2147483647,Z=36,ee=1,te=26,re=38,ie=700,ne=72,oe=128,se="-",ae=/^xn--/,le=/[^\x20-\x7E]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,ce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},he=Z-ee,fe=Math.floor,de=String.fromCharCode,_e;function me(Ae){throw RangeError(ce[Ae])}function ve(Ae,De){for(var Ke=Ae.length,Qe=[];Ke--;)Qe[Ke]=De(Ae[Ke]);return Qe}function ye(Ae,De){var Ke=Ae.split("@"),Qe="";Ke.length>1&&(Qe=Ke[0]+"@",Ae=Ke[1]),Ae=Ae.replace(ue,".");var tt=Ae.split("."),Ie=ve(tt,De).join(".");return Qe+Ie}function be(Ae){for(var De=[],Ke=0,Qe=Ae.length,tt,Ie;Ke<Qe;)tt=Ae.charCodeAt(Ke++),tt>=55296&&tt<=56319&&Ke<Qe?(Ie=Ae.charCodeAt(Ke++),(Ie&64512)==56320?De.push(((tt&1023)<<10)+(Ie&1023)+65536):(De.push(tt),Ke--)):De.push(tt);return De}function Te(Ae){return ve(Ae,function(De){var Ke="";return De>65535&&(De-=65536,Ke+=de(De>>>10&1023|55296),De=56320|De&1023),Ke+=de(De),Ke}).join("")}function Se(Ae){return Ae-48<10?Ae-22:Ae-65<26?Ae-65:Ae-97<26?Ae-97:Z}function Ue(Ae,De){return Ae+22+75*(Ae<26)-((De!=0)<<5)}function Pe(Ae,De,Ke){var Qe=0;for(Ae=Ke?fe(Ae/ie):Ae>>1,Ae+=fe(Ae/De);Ae>he*te>>1;Qe+=Z)Ae=fe(Ae/he);return fe(Qe+(he+1)*Ae/(Ae+re))}function Ne(Ae){var De=[],Ke=Ae.length,Qe,tt=0,Ie=oe,ke=ne,Me,Ye,xe,Re,we,Le,pe,ge,Ee;for(Me=Ae.lastIndexOf(se),Me<0&&(Me=0),Ye=0;Ye<Me;++Ye)Ae.charCodeAt(Ye)>=128&&me("not-basic"),De.push(Ae.charCodeAt(Ye));for(xe=Me>0?Me+1:0;xe<Ke;){for(Re=tt,we=1,Le=Z;xe>=Ke&&me("invalid-input"),pe=Se(Ae.charCodeAt(xe++)),(pe>=Z||pe>fe((J-tt)/we))&&me("overflow"),tt+=pe*we,ge=Le<=ke?ee:Le>=ke+te?te:Le-ke,!(pe<ge);Le+=Z)Ee=Z-ge,we>fe(J/Ee)&&me("overflow"),we*=Ee;Qe=De.length+1,ke=Pe(tt-Re,Qe,Re==0),fe(tt/Qe)>J-Ie&&me("overflow"),Ie+=fe(tt/Qe),tt%=Qe,De.splice(tt++,0,Ie)}return Te(De)}function Ve(Ae){var De,Ke,Qe,tt,Ie,ke,Me,Ye,xe,Re,we,Le=[],pe,ge,Ee,Ce;for(Ae=be(Ae),pe=Ae.length,De=oe,Ke=0,Ie=ne,ke=0;ke<pe;++ke)we=Ae[ke],we<128&&Le.push(de(we));for(Qe=tt=Le.length,tt&&Le.push(se);Qe<pe;){for(Me=J,ke=0;ke<pe;++ke)we=Ae[ke],we>=De&&we<Me&&(Me=we);for(ge=Qe+1,Me-De>fe((J-Ke)/ge)&&me("overflow"),Ke+=(Me-De)*ge,De=Me,ke=0;ke<pe;++ke)if(we=Ae[ke],we<De&&++Ke>J&&me("overflow"),we==De){for(Ye=Ke,xe=Z;Re=xe<=Ie?ee:xe>=Ie+te?te:xe-Ie,!(Ye<Re);xe+=Z)Ce=Ye-Re,Ee=Z-Re,Le.push(de(Ue(Re+Ce%Ee,0))),Ye=fe(Ce/Ee);Le.push(de(Ue(Ye,0))),Ie=Pe(Ke,ge,Qe==tt),Ke=0,++Qe}++Ke,++De}return Le.join("")}function ze(Ae){return ye(Ae,function(De){return ae.test(De)?Ne(De.slice(4).toLowerCase()):De})}function Ze(Ae){return ye(Ae,function(De){return le.test(De)?"xn--"+Ve(De):De})}if(z={version:"1.3.2",ucs2:{decode:be,encode:Te},decode:Ne,encode:Ve,toASCII:Ze,toUnicode:ze},Y&&X)if(G.exports==Y)X.exports=z;else for(_e in z)z.hasOwnProperty(_e)&&(Y[_e]=z[_e]);else L.punycode=z})(commonjsGlobal)}),util={isString:function(G){return typeof G=="string"},isObject:function(G){return typeof G=="object"&&G!==null},isNull:function(G){return G===null},isNullOrUndefined:function(G){return G==null}};function hasOwnProperty$1(G,U){return Object.prototype.hasOwnProperty.call(G,U)}var decode$1=function(G,U,L,Y){U=U||"&",L=L||"=";var X={};if(typeof G!="string"||G.length===0)return X;var W=/\+/g;G=G.split(U);var z=1e3;Y&&typeof Y.maxKeys=="number"&&(z=Y.maxKeys);var J=G.length;z>0&&J>z&&(J=z);for(var Z=0;Z<J;++Z){var ee=G[Z].replace(W,"%20"),te=ee.indexOf(L),re,ie,ne,oe;te>=0?(re=ee.substr(0,te),ie=ee.substr(te+1)):(re=ee,ie=""),ne=decodeURIComponent(re),oe=decodeURIComponent(ie),hasOwnProperty$1(X,ne)?Array.isArray(X[ne])?X[ne].push(oe):X[ne]=[X[ne],oe]:X[ne]=oe}return X},stringifyPrimitive=function(G){switch(typeof G){case"string":return G;case"boolean":return G?"true":"false";case"number":return isFinite(G)?G:"";default:return""}},encode=function(G,U,L,Y){return U=U||"&",L=L||"=",G===null&&(G=void 0),typeof G=="object"?Object.keys(G).map(function(X){var W=encodeURIComponent(stringifyPrimitive(X))+L;return Array.isArray(G[X])?G[X].map(function(z){return W+encodeURIComponent(stringifyPrimitive(z))}).join(U):W+encodeURIComponent(stringifyPrimitive(G[X]))}).join(U):Y?encodeURIComponent(stringifyPrimitive(Y))+L+encodeURIComponent(stringifyPrimitive(G)):""},querystring=createCommonjsModule(function(G,U){U.decode=U.parse=decode$1,U.encode=U.stringify=encode}),parse=urlParse,resolve=urlResolve,format=urlFormat;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(G,U,L){if(G&&util.isObject(G)&&G instanceof Url)return G;var Y=new Url;return Y.parse(G,U,L),Y}Url.prototype.parse=function(G,U,L){if(!util.isString(G))throw new TypeError("Parameter 'url' must be a string, not "+typeof G);var Y=G.indexOf("?"),X=Y!==-1&&Y<G.indexOf("#")?"?":"#",W=G.split(X),z=/\\/g;W[0]=W[0].replace(z,"/"),G=W.join(X);var J=G;if(J=J.trim(),!L&&G.split("#").length===1){var Z=simplePathPattern.exec(J);if(Z)return this.path=J,this.href=J,this.pathname=Z[1],Z[2]?(this.search=Z[2],U?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):U&&(this.search="",this.query={}),this}var ee=protocolPattern.exec(J);if(ee){ee=ee[0];var te=ee.toLowerCase();this.protocol=te,J=J.substr(ee.length)}if(L||ee||J.match(/^\/\/[^@\/]+@[^@\/]+/)){var re=J.substr(0,2)==="//";re&&!(ee&&hostlessProtocol[ee])&&(J=J.substr(2),this.slashes=!0)}if(!hostlessProtocol[ee]&&(re||ee&&!slashedProtocol[ee])){for(var ie=-1,ne=0;ne<hostEndingChars.length;ne++){var oe=J.indexOf(hostEndingChars[ne]);oe!==-1&&(ie===-1||oe<ie)&&(ie=oe)}var se,ae;ie===-1?ae=J.lastIndexOf("@"):ae=J.lastIndexOf("@",ie),ae!==-1&&(se=J.slice(0,ae),J=J.slice(ae+1),this.auth=decodeURIComponent(se)),ie=-1;for(var ne=0;ne<nonHostChars.length;ne++){var oe=J.indexOf(nonHostChars[ne]);oe!==-1&&(ie===-1||oe<ie)&&(ie=oe)}ie===-1&&(ie=J.length),this.host=J.slice(0,ie),J=J.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var le=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!le)for(var ue=this.hostname.split(/\./),ne=0,ce=ue.length;ne<ce;ne++){var he=ue[ne];if(!!he&&!he.match(hostnamePartPattern)){for(var fe="",de=0,_e=he.length;de<_e;de++)he.charCodeAt(de)>127?fe+="x":fe+=he[de];if(!fe.match(hostnamePartPattern)){var me=ue.slice(0,ne),ve=ue.slice(ne+1),ye=he.match(hostnamePartStart);ye&&(me.push(ye[1]),ve.unshift(ye[2])),ve.length&&(J="/"+ve.join(".")+J),this.hostname=me.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),le||(this.hostname=punycode.toASCII(this.hostname));var be=this.port?":"+this.port:"",Te=this.hostname||"";this.host=Te+be,this.href+=this.host,le&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),J[0]!=="/"&&(J="/"+J))}if(!unsafeProtocol[te])for(var ne=0,ce=autoEscape.length;ne<ce;ne++){var Se=autoEscape[ne];if(J.indexOf(Se)!==-1){var Ue=encodeURIComponent(Se);Ue===Se&&(Ue=escape(Se)),J=J.split(Se).join(Ue)}}var Pe=J.indexOf("#");Pe!==-1&&(this.hash=J.substr(Pe),J=J.slice(0,Pe));var Ne=J.indexOf("?");if(Ne!==-1?(this.search=J.substr(Ne),this.query=J.substr(Ne+1),U&&(this.query=querystring.parse(this.query)),J=J.slice(0,Ne)):U&&(this.search="",this.query={}),J&&(this.pathname=J),slashedProtocol[te]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var be=this.pathname||"",Ve=this.search||"";this.path=be+Ve}return this.href=this.format(),this};function urlFormat(G){return util.isString(G)&&(G=urlParse(G)),G instanceof Url?G.format():Url.prototype.format.call(G)}Url.prototype.format=function(){var G=this.auth||"";G&&(G=encodeURIComponent(G),G=G.replace(/%3A/i,":"),G+="@");var U=this.protocol||"",L=this.pathname||"",Y=this.hash||"",X=!1,W="";this.host?X=G+this.host:this.hostname&&(X=G+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(X+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(W=querystring.stringify(this.query));var z=this.search||W&&"?"+W||"";return U&&U.substr(-1)!==":"&&(U+=":"),this.slashes||(!U||slashedProtocol[U])&&X!==!1?(X="//"+(X||""),L&&L.charAt(0)!=="/"&&(L="/"+L)):X||(X=""),Y&&Y.charAt(0)!=="#"&&(Y="#"+Y),z&&z.charAt(0)!=="?"&&(z="?"+z),L=L.replace(/[?#]/g,function(J){return encodeURIComponent(J)}),z=z.replace("#","%23"),U+X+L+z+Y};function urlResolve(G,U){return urlParse(G,!1,!0).resolve(U)}Url.prototype.resolve=function(G){return this.resolveObject(urlParse(G,!1,!0)).format()};Url.prototype.resolveObject=function(G){if(util.isString(G)){var U=new Url;U.parse(G,!1,!0),G=U}for(var L=new Url,Y=Object.keys(this),X=0;X<Y.length;X++){var W=Y[X];L[W]=this[W]}if(L.hash=G.hash,G.href==="")return L.href=L.format(),L;if(G.slashes&&!G.protocol){for(var z=Object.keys(G),J=0;J<z.length;J++){var Z=z[J];Z!=="protocol"&&(L[Z]=G[Z])}return slashedProtocol[L.protocol]&&L.hostname&&!L.pathname&&(L.path=L.pathname="/"),L.href=L.format(),L}if(G.protocol&&G.protocol!==L.protocol){if(!slashedProtocol[G.protocol]){for(var ee=Object.keys(G),te=0;te<ee.length;te++){var re=ee[te];L[re]=G[re]}return L.href=L.format(),L}if(L.protocol=G.protocol,!G.host&&!hostlessProtocol[G.protocol]){for(var ce=(G.pathname||"").split("/");ce.length&&!(G.host=ce.shift()););G.host||(G.host=""),G.hostname||(G.hostname=""),ce[0]!==""&&ce.unshift(""),ce.length<2&&ce.unshift(""),L.pathname=ce.join("/")}else L.pathname=G.pathname;if(L.search=G.search,L.query=G.query,L.host=G.host||"",L.auth=G.auth,L.hostname=G.hostname||G.host,L.port=G.port,L.pathname||L.search){var ie=L.pathname||"",ne=L.search||"";L.path=ie+ne}return L.slashes=L.slashes||G.slashes,L.href=L.format(),L}var oe=L.pathname&&L.pathname.charAt(0)==="/",se=G.host||G.pathname&&G.pathname.charAt(0)==="/",ae=se||oe||L.host&&G.pathname,le=ae,ue=L.pathname&&L.pathname.split("/")||[],ce=G.pathname&&G.pathname.split("/")||[],he=L.protocol&&!slashedProtocol[L.protocol];if(he&&(L.hostname="",L.port=null,L.host&&(ue[0]===""?ue[0]=L.host:ue.unshift(L.host)),L.host="",G.protocol&&(G.hostname=null,G.port=null,G.host&&(ce[0]===""?ce[0]=G.host:ce.unshift(G.host)),G.host=null),ae=ae&&(ce[0]===""||ue[0]==="")),se)L.host=G.host||G.host===""?G.host:L.host,L.hostname=G.hostname||G.hostname===""?G.hostname:L.hostname,L.search=G.search,L.query=G.query,ue=ce;else if(ce.length)ue||(ue=[]),ue.pop(),ue=ue.concat(ce),L.search=G.search,L.query=G.query;else if(!util.isNullOrUndefined(G.search)){if(he){L.hostname=L.host=ue.shift();var fe=L.host&&L.host.indexOf("@")>0?L.host.split("@"):!1;fe&&(L.auth=fe.shift(),L.host=L.hostname=fe.shift())}return L.search=G.search,L.query=G.query,(!util.isNull(L.pathname)||!util.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.href=L.format(),L}if(!ue.length)return L.pathname=null,L.search?L.path="/"+L.search:L.path=null,L.href=L.format(),L;for(var de=ue.slice(-1)[0],_e=(L.host||G.host||ue.length>1)&&(de==="."||de==="..")||de==="",me=0,ve=ue.length;ve>=0;ve--)de=ue[ve],de==="."?ue.splice(ve,1):de===".."?(ue.splice(ve,1),me++):me&&(ue.splice(ve,1),me--);if(!ae&&!le)for(;me--;me)ue.unshift("..");ae&&ue[0]!==""&&(!ue[0]||ue[0].charAt(0)!=="/")&&ue.unshift(""),_e&&ue.join("/").substr(-1)!=="/"&&ue.push("");var ye=ue[0]===""||ue[0]&&ue[0].charAt(0)==="/";if(he){L.hostname=L.host=ye?"":ue.length?ue.shift():"";var fe=L.host&&L.host.indexOf("@")>0?L.host.split("@"):!1;fe&&(L.auth=fe.shift(),L.host=L.hostname=fe.shift())}return ae=ae||L.host&&ue.length,ae&&!ye&&ue.unshift(""),ue.length?L.pathname=ue.join("/"):(L.pathname=null,L.path=null),(!util.isNull(L.pathname)||!util.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.auth=G.auth||L.auth,L.slashes=L.slashes||G.slashes,L.href=L.format(),L};Url.prototype.parseHost=function(){var G=this.host,U=portPattern.exec(G);U&&(U=U[0],U!==":"&&(this.port=U.substr(1)),G=G.substr(0,G.length-U.length)),G&&(this.hostname=G)};/*!
 * @pixi/utils - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var url$1={parse,format,resolve};settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var saidHello=!1,VERSION$4="6.4.2";function sayHello(G){var U;if(!saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var L=[`
 %c %c %c PixiJS `+VERSION$4+" - \u2730 "+G+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(U=globalThis.console).log.apply(U,L)}else globalThis.console&&globalThis.console.log("PixiJS "+VERSION$4+" - "+G+" - http://www.pixijs.com/");saidHello=!0}}var supported;function isWebGLSupported(){return typeof supported=="undefined"&&(supported=function(){var U={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!globalThis.WebGLRenderingContext)return!1;var L=document.createElement("canvas"),Y=L.getContext("webgl",U)||L.getContext("experimental-webgl",U),X=!!(Y&&Y.getContextAttributes().stencil);if(Y){var W=Y.getExtension("WEBGL_lose_context");W&&W.loseContext()}return Y=null,X}catch(z){return!1}}()),supported}function hex2rgb(G,U){return U===void 0&&(U=[]),U[0]=(G>>16&255)/255,U[1]=(G>>8&255)/255,U[2]=(G&255)/255,U}function hex2string(G){var U=G.toString(16);return U="000000".substring(0,6-U.length)+U,"#"+U}function mapPremultipliedBlendModes(){for(var G=[],U=[],L=0;L<32;L++)G[L]=L,U[L]=L;G[BLEND_MODES$4.NORMAL_NPM]=BLEND_MODES$4.NORMAL,G[BLEND_MODES$4.ADD_NPM]=BLEND_MODES$4.ADD,G[BLEND_MODES$4.SCREEN_NPM]=BLEND_MODES$4.SCREEN,U[BLEND_MODES$4.NORMAL]=BLEND_MODES$4.NORMAL_NPM,U[BLEND_MODES$4.ADD]=BLEND_MODES$4.ADD_NPM,U[BLEND_MODES$4.SCREEN]=BLEND_MODES$4.SCREEN_NPM;var Y=[];return Y.push(U),Y.push(G),Y}var premultiplyBlendMode=mapPremultipliedBlendModes();function premultiplyTint(G,U){if(U===1)return(U*255<<24)+G;if(U===0)return 0;var L=G>>16&255,Y=G>>8&255,X=G&255;return L=L*U+.5|0,Y=Y*U+.5|0,X=X*U+.5|0,(U*255<<24)+(L<<16)+(Y<<8)+X}function getBufferType(G){if(G.BYTES_PER_ELEMENT===4)return G instanceof Float32Array?"Float32Array":G instanceof Uint32Array?"Uint32Array":"Int32Array";if(G.BYTES_PER_ELEMENT===2){if(G instanceof Uint16Array)return"Uint16Array"}else if(G.BYTES_PER_ELEMENT===1&&G instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(G){return G+=G===0?1:0,--G,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G+1}function isPow2(G){return!(G&G-1)&&!!G}function log2(G){var U=(G>65535?1:0)<<4;G>>>=U;var L=(G>255?1:0)<<3;return G>>>=L,U|=L,L=(G>15?1:0)<<2,G>>>=L,U|=L,L=(G>3?1:0)<<1,G>>>=L,U|=L,U|G>>1}function removeItems(G,U,L){var Y=G.length,X;if(!(U>=Y||L===0)){L=U+L>Y?Y-U:L;var W=Y-L;for(X=U;X<W;++X)G[X]=G[X+L];G.length=W}}var nextUid=0;function uid(){return++nextUid}var warnings={};function deprecation(G,U,L){if(L===void 0&&(L=3),!warnings[U]){var Y=new Error().stack;typeof Y=="undefined"?console.warn("PixiJS Deprecation Warning: ",U+`
Deprecated since v`+G):(Y=Y.split(`
`).splice(L).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",U+`
Deprecated since v`+G),console.warn(Y),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",U+`
Deprecated since v`+G),console.warn(Y))),warnings[U]=!0}}var ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);(function(){function G(U,L,Y){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=Y||settings$1.RESOLUTION,this.resize(U,L)}return G.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},G.prototype.resize=function(U,L){this.canvas.width=Math.round(U*this.resolution),this.canvas.height=Math.round(L*this.resolution)},G.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(G.prototype,"width",{get:function(){return this.canvas.width},set:function(U){this.canvas.width=Math.round(U)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"height",{get:function(){return this.canvas.height},set:function(U){this.canvas.height=Math.round(U)},enumerable:!1,configurable:!0}),G})();var tempAnchor;function determineCrossOrigin(G,U){if(U===void 0&&(U=globalThis.location),G.indexOf("data:")===0)return"";U=U||globalThis.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=G;var L=url$1.parse(tempAnchor.href),Y=!L.port&&U.port===""||L.port===U.port;return L.hostname!==U.hostname||!Y||L.protocol!==U.protocol?"anonymous":""}function getResolutionOfUrl(G,U){var L=settings$1.RETINA_PREFIX.exec(G);return L?parseFloat(L[1]):U!==void 0?U:1}/*!
 * @pixi/runner - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Runner=function(){function G(U){this.items=[],this._name=U,this._aliasCount=0}return G.prototype.emit=function(U,L,Y,X,W,z,J,Z){if(arguments.length>8)throw new Error("max arguments reached");var ee=this,te=ee.name,re=ee.items;this._aliasCount++;for(var ie=0,ne=re.length;ie<ne;ie++)re[ie][te](U,L,Y,X,W,z,J,Z);return re===this.items&&this._aliasCount--,this},G.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},G.prototype.add=function(U){return U[this._name]&&(this.ensureNonAliasedItems(),this.remove(U),this.items.push(U)),this},G.prototype.remove=function(U){var L=this.items.indexOf(U);return L!==-1&&(this.ensureNonAliasedItems(),this.items.splice(L,1)),this},G.prototype.contains=function(U){return this.items.indexOf(U)!==-1},G.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},G.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(G.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),G}();Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});/*!
 * @pixi/ticker - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.TARGET_FPMS=.06;var UPDATE_PRIORITY;(function(G){G[G.INTERACTION=50]="INTERACTION",G[G.HIGH=25]="HIGH",G[G.NORMAL=0]="NORMAL",G[G.LOW=-25]="LOW",G[G.UTILITY=-50]="UTILITY"})(UPDATE_PRIORITY||(UPDATE_PRIORITY={}));var TickerListener=function(){function G(U,L,Y,X){L===void 0&&(L=null),Y===void 0&&(Y=0),X===void 0&&(X=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=U,this.context=L,this.priority=Y,this.once=X}return G.prototype.match=function(U,L){return L===void 0&&(L=null),this.fn===U&&this.context===L},G.prototype.emit=function(U){this.fn&&(this.context?this.fn.call(this.context,U):this.fn(U));var L=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),L},G.prototype.connect=function(U){this.previous=U,U.next&&(U.next.previous=this),this.next=U.next,U.next=this},G.prototype.destroy=function(U){U===void 0&&(U=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var L=this.next;return this.next=U?null:L,this.previous=null,L},G}(),Ticker=function(){function G(){var U=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/settings$1.TARGET_FPMS,this.elapsedMS=1/settings$1.TARGET_FPMS,this._tick=function(L){U._requestId=null,U.started&&(U.update(L),U.started&&U._requestId===null&&U._head.next&&(U._requestId=requestAnimationFrame(U._tick)))}}return G.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},G.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},G.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},G.prototype.add=function(U,L,Y){return Y===void 0&&(Y=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(U,L,Y))},G.prototype.addOnce=function(U,L,Y){return Y===void 0&&(Y=UPDATE_PRIORITY.NORMAL),this._addListener(new TickerListener(U,L,Y,!0))},G.prototype._addListener=function(U){var L=this._head.next,Y=this._head;if(!L)U.connect(Y);else{for(;L;){if(U.priority>L.priority){U.connect(Y);break}Y=L,L=L.next}U.previous||U.connect(Y)}return this._startIfPossible(),this},G.prototype.remove=function(U,L){for(var Y=this._head.next;Y;)Y.match(U,L)?Y=Y.destroy():Y=Y.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(G.prototype,"count",{get:function(){if(!this._head)return 0;for(var U=0,L=this._head;L=L.next;)U++;return U},enumerable:!1,configurable:!0}),G.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},G.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},G.prototype.destroy=function(){if(!this._protected){this.stop();for(var U=this._head.next;U;)U=U.destroy(!0);this._head.destroy(),this._head=null}},G.prototype.update=function(U){U===void 0&&(U=performance.now());var L;if(U>this.lastTime){if(L=this.elapsedMS=U-this.lastTime,L>this._maxElapsedMS&&(L=this._maxElapsedMS),L*=this.speed,this._minElapsedMS){var Y=U-this._lastFrame|0;if(Y<this._minElapsedMS)return;this._lastFrame=U-Y%this._minElapsedMS}this.deltaMS=L,this.deltaTime=this.deltaMS*settings$1.TARGET_FPMS;for(var X=this._head,W=X.next;W;)W=W.emit(this.deltaTime);X.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=U},Object.defineProperty(G.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(U){var L=Math.min(this.maxFPS,U),Y=Math.min(Math.max(0,L)/1e3,settings$1.TARGET_FPMS);this._maxElapsedMS=1/Y},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(U){if(U===0)this._minElapsedMS=0;else{var L=Math.max(this.minFPS,U);this._minElapsedMS=1/(L/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(G,"shared",{get:function(){if(!G._shared){var U=G._shared=new G;U.autoStart=!0,U._protected=!0}return G._shared},enumerable:!1,configurable:!0}),Object.defineProperty(G,"system",{get:function(){if(!G._system){var U=G._system=new G;U.autoStart=!0,U._protected=!0}return G._system},enumerable:!1,configurable:!0}),G}();/*!
 * @pixi/math - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PI_2=Math.PI*2,SHAPES;(function(G){G[G.POLY=0]="POLY",G[G.RECT=1]="RECT",G[G.CIRC=2]="CIRC",G[G.ELIP=3]="ELIP",G[G.RREC=4]="RREC"})(SHAPES||(SHAPES={}));var Point=function(){function G(U,L){U===void 0&&(U=0),L===void 0&&(L=0),this.x=0,this.y=0,this.x=U,this.y=L}return G.prototype.clone=function(){return new G(this.x,this.y)},G.prototype.copyFrom=function(U){return this.set(U.x,U.y),this},G.prototype.copyTo=function(U){return U.set(this.x,this.y),U},G.prototype.equals=function(U){return U.x===this.x&&U.y===this.y},G.prototype.set=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),this.x=U,this.y=L,this},G.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},G}(),tempPoints$1=[new Point,new Point,new Point,new Point],Rectangle=function(){function G(U,L,Y,X){U===void 0&&(U=0),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=0),this.x=Number(U),this.y=Number(L),this.width=Number(Y),this.height=Number(X),this.type=SHAPES.RECT}return Object.defineProperty(G.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(G,"EMPTY",{get:function(){return new G(0,0,0,0)},enumerable:!1,configurable:!0}),G.prototype.clone=function(){return new G(this.x,this.y,this.width,this.height)},G.prototype.copyFrom=function(U){return this.x=U.x,this.y=U.y,this.width=U.width,this.height=U.height,this},G.prototype.copyTo=function(U){return U.x=this.x,U.y=this.y,U.width=this.width,U.height=this.height,U},G.prototype.contains=function(U,L){return this.width<=0||this.height<=0?!1:U>=this.x&&U<this.x+this.width&&L>=this.y&&L<this.y+this.height},G.prototype.intersects=function(U,L){if(!L){var Y=this.x<U.x?U.x:this.x,X=this.right>U.right?U.right:this.right;if(X<=Y)return!1;var W=this.y<U.y?U.y:this.y,z=this.bottom>U.bottom?U.bottom:this.bottom;return z>W}var J=this.left,Z=this.right,ee=this.top,te=this.bottom;if(Z<=J||te<=ee)return!1;var re=tempPoints$1[0].set(U.left,U.top),ie=tempPoints$1[1].set(U.left,U.bottom),ne=tempPoints$1[2].set(U.right,U.top),oe=tempPoints$1[3].set(U.right,U.bottom);if(ne.x<=re.x||ie.y<=re.y)return!1;var se=Math.sign(L.a*L.d-L.b*L.c);if(se===0||(L.apply(re,re),L.apply(ie,ie),L.apply(ne,ne),L.apply(oe,oe),Math.max(re.x,ie.x,ne.x,oe.x)<=J||Math.min(re.x,ie.x,ne.x,oe.x)>=Z||Math.max(re.y,ie.y,ne.y,oe.y)<=ee||Math.min(re.y,ie.y,ne.y,oe.y)>=te))return!1;var ae=se*(ie.y-re.y),le=se*(re.x-ie.x),ue=ae*J+le*ee,ce=ae*Z+le*ee,he=ae*J+le*te,fe=ae*Z+le*te;if(Math.max(ue,ce,he,fe)<=ae*re.x+le*re.y||Math.min(ue,ce,he,fe)>=ae*oe.x+le*oe.y)return!1;var de=se*(re.y-ne.y),_e=se*(ne.x-re.x),me=de*J+_e*ee,ve=de*Z+_e*ee,ye=de*J+_e*te,be=de*Z+_e*te;return!(Math.max(me,ve,ye,be)<=de*re.x+_e*re.y||Math.min(me,ve,ye,be)>=de*oe.x+_e*oe.y)},G.prototype.pad=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),this.x-=U,this.y-=L,this.width+=U*2,this.height+=L*2,this},G.prototype.fit=function(U){var L=Math.max(this.x,U.x),Y=Math.min(this.x+this.width,U.x+U.width),X=Math.max(this.y,U.y),W=Math.min(this.y+this.height,U.y+U.height);return this.x=L,this.width=Math.max(Y-L,0),this.y=X,this.height=Math.max(W-X,0),this},G.prototype.ceil=function(U,L){U===void 0&&(U=1),L===void 0&&(L=.001);var Y=Math.ceil((this.x+this.width-L)*U)/U,X=Math.ceil((this.y+this.height-L)*U)/U;return this.x=Math.floor((this.x+L)*U)/U,this.y=Math.floor((this.y+L)*U)/U,this.width=Y-this.x,this.height=X-this.y,this},G.prototype.enlarge=function(U){var L=Math.min(this.x,U.x),Y=Math.max(this.x+this.width,U.x+U.width),X=Math.min(this.y,U.y),W=Math.max(this.y+this.height,U.y+U.height);return this.x=L,this.width=Y-L,this.y=X,this.height=W-X,this},G.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},G}(),ObservablePoint=function(){function G(U,L,Y,X){Y===void 0&&(Y=0),X===void 0&&(X=0),this._x=Y,this._y=X,this.cb=U,this.scope=L}return G.prototype.clone=function(U,L){return U===void 0&&(U=this.cb),L===void 0&&(L=this.scope),new G(U,L,this._x,this._y)},G.prototype.set=function(U,L){return U===void 0&&(U=0),L===void 0&&(L=U),(this._x!==U||this._y!==L)&&(this._x=U,this._y=L,this.cb.call(this.scope)),this},G.prototype.copyFrom=function(U){return(this._x!==U.x||this._y!==U.y)&&(this._x=U.x,this._y=U.y,this.cb.call(this.scope)),this},G.prototype.copyTo=function(U){return U.set(this._x,this._y),U},G.prototype.equals=function(U){return U.x===this._x&&U.y===this._y},G.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(G.prototype,"x",{get:function(){return this._x},set:function(U){this._x!==U&&(this._x=U,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"y",{get:function(){return this._y},set:function(U){this._y!==U&&(this._y=U,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),G}(),Matrix=function(){function G(U,L,Y,X,W,z){U===void 0&&(U=1),L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=1),W===void 0&&(W=0),z===void 0&&(z=0),this.array=null,this.a=U,this.b=L,this.c=Y,this.d=X,this.tx=W,this.ty=z}return G.prototype.fromArray=function(U){this.a=U[0],this.b=U[1],this.c=U[3],this.d=U[4],this.tx=U[2],this.ty=U[5]},G.prototype.set=function(U,L,Y,X,W,z){return this.a=U,this.b=L,this.c=Y,this.d=X,this.tx=W,this.ty=z,this},G.prototype.toArray=function(U,L){this.array||(this.array=new Float32Array(9));var Y=L||this.array;return U?(Y[0]=this.a,Y[1]=this.b,Y[2]=0,Y[3]=this.c,Y[4]=this.d,Y[5]=0,Y[6]=this.tx,Y[7]=this.ty,Y[8]=1):(Y[0]=this.a,Y[1]=this.c,Y[2]=this.tx,Y[3]=this.b,Y[4]=this.d,Y[5]=this.ty,Y[6]=0,Y[7]=0,Y[8]=1),Y},G.prototype.apply=function(U,L){L=L||new Point;var Y=U.x,X=U.y;return L.x=this.a*Y+this.c*X+this.tx,L.y=this.b*Y+this.d*X+this.ty,L},G.prototype.applyInverse=function(U,L){L=L||new Point;var Y=1/(this.a*this.d+this.c*-this.b),X=U.x,W=U.y;return L.x=this.d*Y*X+-this.c*Y*W+(this.ty*this.c-this.tx*this.d)*Y,L.y=this.a*Y*W+-this.b*Y*X+(-this.ty*this.a+this.tx*this.b)*Y,L},G.prototype.translate=function(U,L){return this.tx+=U,this.ty+=L,this},G.prototype.scale=function(U,L){return this.a*=U,this.d*=L,this.c*=U,this.b*=L,this.tx*=U,this.ty*=L,this},G.prototype.rotate=function(U){var L=Math.cos(U),Y=Math.sin(U),X=this.a,W=this.c,z=this.tx;return this.a=X*L-this.b*Y,this.b=X*Y+this.b*L,this.c=W*L-this.d*Y,this.d=W*Y+this.d*L,this.tx=z*L-this.ty*Y,this.ty=z*Y+this.ty*L,this},G.prototype.append=function(U){var L=this.a,Y=this.b,X=this.c,W=this.d;return this.a=U.a*L+U.b*X,this.b=U.a*Y+U.b*W,this.c=U.c*L+U.d*X,this.d=U.c*Y+U.d*W,this.tx=U.tx*L+U.ty*X+this.tx,this.ty=U.tx*Y+U.ty*W+this.ty,this},G.prototype.setTransform=function(U,L,Y,X,W,z,J,Z,ee){return this.a=Math.cos(J+ee)*W,this.b=Math.sin(J+ee)*W,this.c=-Math.sin(J-Z)*z,this.d=Math.cos(J-Z)*z,this.tx=U-(Y*this.a+X*this.c),this.ty=L-(Y*this.b+X*this.d),this},G.prototype.prepend=function(U){var L=this.tx;if(U.a!==1||U.b!==0||U.c!==0||U.d!==1){var Y=this.a,X=this.c;this.a=Y*U.a+this.b*U.c,this.b=Y*U.b+this.b*U.d,this.c=X*U.a+this.d*U.c,this.d=X*U.b+this.d*U.d}return this.tx=L*U.a+this.ty*U.c+U.tx,this.ty=L*U.b+this.ty*U.d+U.ty,this},G.prototype.decompose=function(U){var L=this.a,Y=this.b,X=this.c,W=this.d,z=U.pivot,J=-Math.atan2(-X,W),Z=Math.atan2(Y,L),ee=Math.abs(J+Z);return ee<1e-5||Math.abs(PI_2-ee)<1e-5?(U.rotation=Z,U.skew.x=U.skew.y=0):(U.rotation=0,U.skew.x=J,U.skew.y=Z),U.scale.x=Math.sqrt(L*L+Y*Y),U.scale.y=Math.sqrt(X*X+W*W),U.position.x=this.tx+(z.x*L+z.y*X),U.position.y=this.ty+(z.x*Y+z.y*W),U},G.prototype.invert=function(){var U=this.a,L=this.b,Y=this.c,X=this.d,W=this.tx,z=U*X-L*Y;return this.a=X/z,this.b=-L/z,this.c=-Y/z,this.d=U/z,this.tx=(Y*this.ty-X*W)/z,this.ty=-(U*this.ty-L*W)/z,this},G.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},G.prototype.clone=function(){var U=new G;return U.a=this.a,U.b=this.b,U.c=this.c,U.d=this.d,U.tx=this.tx,U.ty=this.ty,U},G.prototype.copyTo=function(U){return U.a=this.a,U.b=this.b,U.c=this.c,U.d=this.d,U.tx=this.tx,U.ty=this.ty,U},G.prototype.copyFrom=function(U){return this.a=U.a,this.b=U.b,this.c=U.c,this.d=U.d,this.tx=U.tx,this.ty=U.ty,this},G.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(G,"IDENTITY",{get:function(){return new G},enumerable:!1,configurable:!0}),Object.defineProperty(G,"TEMP_MATRIX",{get:function(){return new G},enumerable:!1,configurable:!0}),G}(),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(var G=0;G<16;G++){var U=[];rotationCayley.push(U);for(var L=0;L<16;L++)for(var Y=signum(ux[G]*ux[L]+vx[G]*uy[L]),X=signum(uy[G]*ux[L]+vy[G]*uy[L]),W=signum(ux[G]*vx[L]+vx[G]*vy[L]),z=signum(uy[G]*vx[L]+vy[G]*vy[L]),J=0;J<16;J++)if(ux[J]===Y&&uy[J]===X&&vx[J]===W&&vy[J]===z){U.push(J);break}}for(var G=0;G<16;G++){var Z=new Matrix;Z.set(ux[G],uy[G],vx[G],vy[G],0,0),rotationMatrices.push(Z)}}init();var groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(G){return ux[G]},uY:function(G){return uy[G]},vX:function(G){return vx[G]},vY:function(G){return vy[G]},inv:function(G){return G&8?G&15:-G&7},add:function(G,U){return rotationCayley[G][U]},sub:function(G,U){return rotationCayley[G][groupD8.inv(U)]},rotate180:function(G){return G^4},isVertical:function(G){return(G&3)===2},byDirection:function(G,U){return Math.abs(G)*2<=Math.abs(U)?U>=0?groupD8.S:groupD8.N:Math.abs(U)*2<=Math.abs(G)?G>0?groupD8.E:groupD8.W:U>0?G>0?groupD8.SE:groupD8.SW:G>0?groupD8.NE:groupD8.NW},matrixAppendRotationInv:function(G,U,L,Y){L===void 0&&(L=0),Y===void 0&&(Y=0);var X=rotationMatrices[groupD8.inv(U)];X.tx=L,X.ty=Y,G.append(X)}};(function(){function G(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return G.prototype.onChange=function(){this._localID++},G.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},G.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},G.prototype.updateLocalTransform=function(){var U=this.localTransform;this._localID!==this._currentLocalID&&(U.a=this._cx*this.scale.x,U.b=this._sx*this.scale.x,U.c=this._cy*this.scale.y,U.d=this._sy*this.scale.y,U.tx=this.position.x-(this.pivot.x*U.a+this.pivot.y*U.c),U.ty=this.position.y-(this.pivot.x*U.b+this.pivot.y*U.d),this._currentLocalID=this._localID,this._parentID=-1)},G.prototype.updateTransform=function(U){var L=this.localTransform;if(this._localID!==this._currentLocalID&&(L.a=this._cx*this.scale.x,L.b=this._sx*this.scale.x,L.c=this._cy*this.scale.y,L.d=this._sy*this.scale.y,L.tx=this.position.x-(this.pivot.x*L.a+this.pivot.y*L.c),L.ty=this.position.y-(this.pivot.x*L.b+this.pivot.y*L.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==U._worldID){var Y=U.worldTransform,X=this.worldTransform;X.a=L.a*Y.a+L.b*Y.c,X.b=L.a*Y.b+L.b*Y.d,X.c=L.c*Y.a+L.d*Y.c,X.d=L.c*Y.b+L.d*Y.d,X.tx=L.tx*Y.a+L.ty*Y.c+Y.tx,X.ty=L.tx*Y.b+L.ty*Y.d+Y.ty,this._parentID=U._worldID,this._worldID++}},G.prototype.setFromMatrix=function(U){U.decompose(this),this._localID++},Object.defineProperty(G.prototype,"rotation",{get:function(){return this._rotation},set:function(U){this._rotation!==U&&(this._rotation=U,this.updateSkew())},enumerable:!1,configurable:!0}),G.IDENTITY=new G,G})();/*!
 * @pixi/core - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */settings$1.PREFER_ENV=isMobile$4.any?ENV$4.WEBGL:ENV$4.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;var INSTALLED=[];function autoDetectResource(G,U){if(!G)return null;var L="";if(typeof G=="string"){var Y=/\.(\w{3,4})(?:$|\?|#)/i.exec(G);Y&&(L=Y[1].toLowerCase())}for(var X=INSTALLED.length-1;X>=0;--X){var W=INSTALLED[X];if(W.test&&W.test(G,L))return new W(G,U)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$3=function(G,U){return extendStatics$3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$3(G,U)};function __extends$v(G,U){extendStatics$3(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var __assign$t=function(){return __assign$t=Object.assign||function(U){for(var L=arguments,Y,X=1,W=arguments.length;X<W;X++){Y=L[X];for(var z in Y)Object.prototype.hasOwnProperty.call(Y,z)&&(U[z]=Y[z])}return U},__assign$t.apply(this,arguments)};function __rest(G,U){var L={};for(var Y in G)Object.prototype.hasOwnProperty.call(G,Y)&&U.indexOf(Y)<0&&(L[Y]=G[Y]);if(G!=null&&typeof Object.getOwnPropertySymbols=="function")for(var X=0,Y=Object.getOwnPropertySymbols(G);X<Y.length;X++)U.indexOf(Y[X])<0&&(L[Y[X]]=G[Y[X]]);return L}var Resource=function(){function G(U,L){U===void 0&&(U=0),L===void 0&&(L=0),this._width=U,this._height=L,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}return G.prototype.bind=function(U){this.onResize.add(U),this.onUpdate.add(U),this.onError.add(U),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},G.prototype.unbind=function(U){this.onResize.remove(U),this.onUpdate.remove(U),this.onError.remove(U)},G.prototype.resize=function(U,L){(U!==this._width||L!==this._height)&&(this._width=U,this._height=L,this.onResize.emit(U,L))},Object.defineProperty(G.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),G.prototype.update=function(){this.destroyed||this.onUpdate.emit()},G.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(G.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),G.prototype.style=function(U,L,Y){return!1},G.prototype.dispose=function(){},G.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},G.test=function(U,L){return!1},G}(),BufferResource=function(G){__extends$v(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height;if(!z||!J)throw new Error("BufferResource width or height invalid");return X=G.call(this,z,J)||this,X.data=L,X}return U.prototype.upload=function(L,Y,X){var W=L.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK);var z=Y.realWidth,J=Y.realHeight;return X.width===z&&X.height===J?W.texSubImage2D(Y.target,0,0,0,z,J,Y.format,X.type,this.data):(X.width=z,X.height=J,W.texImage2D(Y.target,0,X.internalFormat,z,J,0,Y.format,X.type,this.data)),!0},U.prototype.dispose=function(){this.data=null},U.test=function(L){return L instanceof Float32Array||L instanceof Uint8Array||L instanceof Uint32Array},U}(Resource),defaultBufferOptions={scaleMode:SCALE_MODES$4.NEAREST,format:FORMATS$4.RGBA,alphaMode:ALPHA_MODES$4.NPM},BaseTexture=function(G){__extends$v(U,G);function U(L,Y){L===void 0&&(L=null),Y===void 0&&(Y=null);var X=G.call(this)||this;Y=Y||{};var W=Y.alphaMode,z=Y.mipmap,J=Y.anisotropicLevel,Z=Y.scaleMode,ee=Y.width,te=Y.height,re=Y.wrapMode,ie=Y.format,ne=Y.type,oe=Y.target,se=Y.resolution,ae=Y.resourceOptions;return L&&!(L instanceof Resource)&&(L=autoDetectResource(L,ae),L.internal=!0),X.resolution=se||settings$1.RESOLUTION,X.width=Math.round((ee||0)*X.resolution)/X.resolution,X.height=Math.round((te||0)*X.resolution)/X.resolution,X._mipmap=z!==void 0?z:settings$1.MIPMAP_TEXTURES,X.anisotropicLevel=J!==void 0?J:settings$1.ANISOTROPIC_LEVEL,X._wrapMode=re||settings$1.WRAP_MODE,X._scaleMode=Z!==void 0?Z:settings$1.SCALE_MODE,X.format=ie||FORMATS$4.RGBA,X.type=ne||TYPES$4.UNSIGNED_BYTE,X.target=oe||TARGETS$4.TEXTURE_2D,X.alphaMode=W!==void 0?W:ALPHA_MODES$4.UNPACK,X.uid=uid(),X.touched=0,X.isPowerOfTwo=!1,X._refreshPOT(),X._glTextures={},X.dirtyId=0,X.dirtyStyleId=0,X.cacheId=null,X.valid=ee>0&&te>0,X.textureCacheIds=[],X.destroyed=!1,X.resource=null,X._batchEnabled=0,X._batchLocation=0,X.parentTextureArray=null,X.setResource(L),X}return Object.defineProperty(U.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mipmap",{get:function(){return this._mipmap},set:function(L){this._mipmap!==L&&(this._mipmap=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(L){this._scaleMode!==L&&(this._scaleMode=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(L){this._wrapMode!==L&&(this._wrapMode=L,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),U.prototype.setStyle=function(L,Y){var X;return L!==void 0&&L!==this.scaleMode&&(this.scaleMode=L,X=!0),Y!==void 0&&Y!==this.mipmap&&(this.mipmap=Y,X=!0),X&&this.dirtyStyleId++,this},U.prototype.setSize=function(L,Y,X){return X=X||this.resolution,this.setRealSize(L*X,Y*X,X)},U.prototype.setRealSize=function(L,Y,X){return this.resolution=X||this.resolution,this.width=Math.round(L)/this.resolution,this.height=Math.round(Y)/this.resolution,this._refreshPOT(),this.update(),this},U.prototype._refreshPOT=function(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)},U.prototype.setResolution=function(L){var Y=this.resolution;return Y===L?this:(this.resolution=L,this.valid&&(this.width=Math.round(this.width*Y)/L,this.height=Math.round(this.height*Y)/L,this.emit("update",this)),this._refreshPOT(),this)},U.prototype.setResource=function(L){if(this.resource===L)return this;if(this.resource)throw new Error("Resource can be set only once");return L.bind(this),this.resource=L,this},U.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},U.prototype.onError=function(L){this.emit("error",this,L)},U.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.dispose(),U.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},U.prototype.dispose=function(){this.emit("dispose",this)},U.prototype.castToBaseTexture=function(){return this},U.from=function(L,Y,X){X===void 0&&(X=settings$1.STRICT_TEXTURE_CACHE);var W=typeof L=="string",z=null;if(W)z=L;else{if(!L._pixiId){var J=Y&&Y.pixiIdPrefix||"pixiid";L._pixiId=J+"_"+uid()}z=L._pixiId}var Z=BaseTextureCache[z];if(W&&X&&!Z)throw new Error('The cacheId "'+z+'" does not exist in BaseTextureCache.');return Z||(Z=new U(L,Y),Z.cacheId=z,U.addToCache(Z,z)),Z},U.fromBuffer=function(L,Y,X,W){L=L||new Float32Array(Y*X*4);var z=new BufferResource(L,{width:Y,height:X}),J=L instanceof Float32Array?TYPES$4.FLOAT:TYPES$4.UNSIGNED_BYTE;return new U(z,Object.assign(defaultBufferOptions,W||{width:Y,height:X,type:J}))},U.addToCache=function(L,Y){Y&&(L.textureCacheIds.indexOf(Y)===-1&&L.textureCacheIds.push(Y),BaseTextureCache[Y]&&console.warn("BaseTexture added to the cache with an id ["+Y+"] that already had an entry"),BaseTextureCache[Y]=L)},U.removeFromCache=function(L){if(typeof L=="string"){var Y=BaseTextureCache[L];if(Y){var X=Y.textureCacheIds.indexOf(L);return X>-1&&Y.textureCacheIds.splice(X,1),delete BaseTextureCache[L],Y}}else if(L&&L.textureCacheIds){for(var W=0;W<L.textureCacheIds.length;++W)delete BaseTextureCache[L.textureCacheIds[W]];return L.textureCacheIds.length=0,L}return null},U._globalBatch=0,U}(eventemitter3$1),AbstractMultiResource=function(G){__extends$v(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height;X=G.call(this,z,J)||this,X.items=[],X.itemDirtyIds=[];for(var Z=0;Z<L;Z++){var ee=new BaseTexture;X.items.push(ee),X.itemDirtyIds.push(-2)}return X.length=L,X._load=null,X.baseTexture=null,X}return U.prototype.initFromArray=function(L,Y){for(var X=0;X<this.length;X++)!L[X]||(L[X].castToBaseTexture?this.addBaseTextureAt(L[X].castToBaseTexture(),X):L[X]instanceof Resource?this.addResourceAt(L[X],X):this.addResourceAt(autoDetectResource(L[X],Y),X))},U.prototype.dispose=function(){for(var L=0,Y=this.length;L<Y;L++)this.items[L].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},U.prototype.addResourceAt=function(L,Y){if(!this.items[Y])throw new Error("Index "+Y+" is out of bounds");return L.valid&&!this.valid&&this.resize(L.width,L.height),this.items[Y].setResource(L),this},U.prototype.bind=function(L){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");G.prototype.bind.call(this,L);for(var Y=0;Y<this.length;Y++)this.items[Y].parentTextureArray=L,this.items[Y].on("update",L.update,L)},U.prototype.unbind=function(L){G.prototype.unbind.call(this,L);for(var Y=0;Y<this.length;Y++)this.items[Y].parentTextureArray=null,this.items[Y].off("update",L.update,L)},U.prototype.load=function(){var L=this;if(this._load)return this._load;var Y=this.items.map(function(W){return W.resource}).filter(function(W){return W}),X=Y.map(function(W){return W.load()});return this._load=Promise.all(X).then(function(){var W=L.items[0],z=W.realWidth,J=W.realHeight;return L.resize(z,J),Promise.resolve(L)}),this._load},U}(Resource),ArrayResource=function(G){__extends$v(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height,Z,ee;return Array.isArray(L)?(Z=L,ee=L.length):ee=L,X=G.call(this,ee,{width:z,height:J})||this,Z&&X.initFromArray(Z,Y),X}return U.prototype.addBaseTextureAt=function(L,Y){if(L.resource)this.addResourceAt(L.resource,Y);else throw new Error("ArrayResource does not support RenderTexture");return this},U.prototype.bind=function(L){G.prototype.bind.call(this,L),L.target=TARGETS$4.TEXTURE_2D_ARRAY},U.prototype.upload=function(L,Y,X){var W=this,z=W.length,J=W.itemDirtyIds,Z=W.items,ee=L.gl;X.dirtyId<0&&ee.texImage3D(ee.TEXTURE_2D_ARRAY,0,X.internalFormat,this._width,this._height,z,0,Y.format,X.type,null);for(var te=0;te<z;te++){var re=Z[te];J[te]<re.dirtyId&&(J[te]=re.dirtyId,re.valid&&ee.texSubImage3D(ee.TEXTURE_2D_ARRAY,0,0,0,te,re.resource.width,re.resource.height,1,Y.format,X.type,re.resource.source))}return!0},U}(AbstractMultiResource),BaseImageResource=function(G){__extends$v(U,G);function U(L){var Y=this,X=L,W=X.naturalWidth||X.videoWidth||X.width,z=X.naturalHeight||X.videoHeight||X.height;return Y=G.call(this,W,z)||this,Y.source=L,Y.noSubImage=!1,Y}return U.crossOrigin=function(L,Y,X){X===void 0&&Y.indexOf("data:")!==0?L.crossOrigin=determineCrossOrigin(Y):X!==!1&&(L.crossOrigin=typeof X=="string"?X:"anonymous")},U.prototype.upload=function(L,Y,X,W){var z=L.gl,J=Y.realWidth,Z=Y.realHeight;if(W=W||this.source,W instanceof HTMLImageElement){if(!W.complete||W.naturalWidth===0)return!1}else if(W instanceof HTMLVideoElement&&W.readyState<=1)return!1;return z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK),!this.noSubImage&&Y.target===z.TEXTURE_2D&&X.width===J&&X.height===Z?z.texSubImage2D(z.TEXTURE_2D,0,0,0,Y.format,X.type,W):(X.width=J,X.height=Z,z.texImage2D(Y.target,0,X.internalFormat,Y.format,X.type,W)),!0},U.prototype.update=function(){if(!this.destroyed){var L=this.source,Y=L.naturalWidth||L.videoWidth||L.width,X=L.naturalHeight||L.videoHeight||L.height;this.resize(Y,X),G.prototype.update.call(this)}},U.prototype.dispose=function(){this.source=null},U}(Resource),CanvasResource=function(G){__extends$v(U,G);function U(L){return G.call(this,L)||this}return U.test=function(L){var Y=globalThis.OffscreenCanvas;return Y&&L instanceof Y?!0:globalThis.HTMLCanvasElement&&L instanceof HTMLCanvasElement},U}(BaseImageResource),CubeResource=function(G){__extends$v(U,G);function U(L,Y){var X=this,W=Y||{},z=W.width,J=W.height,Z=W.autoLoad,ee=W.linkBaseTexture;if(L&&L.length!==U.SIDES)throw new Error("Invalid length. Got "+L.length+", expected 6");X=G.call(this,6,{width:z,height:J})||this;for(var te=0;te<U.SIDES;te++)X.items[te].target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+te;return X.linkBaseTexture=ee!==!1,L&&X.initFromArray(L,Y),Z!==!1&&X.load(),X}return U.prototype.bind=function(L){G.prototype.bind.call(this,L),L.target=TARGETS$4.TEXTURE_CUBE_MAP},U.prototype.addBaseTextureAt=function(L,Y,X){if(!this.items[Y])throw new Error("Index "+Y+" is out of bounds");if(!this.linkBaseTexture||L.parentTextureArray||Object.keys(L._glTextures).length>0)if(L.resource)this.addResourceAt(L.resource,Y);else throw new Error("CubeResource does not support copying of renderTexture.");else L.target=TARGETS$4.TEXTURE_CUBE_MAP_POSITIVE_X+Y,L.parentTextureArray=this.baseTexture,this.items[Y]=L;return L.valid&&!this.valid&&this.resize(L.realWidth,L.realHeight),this.items[Y]=L,this},U.prototype.upload=function(L,Y,X){for(var W=this.itemDirtyIds,z=0;z<U.SIDES;z++){var J=this.items[z];W[z]<J.dirtyId&&(J.valid&&J.resource?(J.resource.upload(L,J,X),W[z]=J.dirtyId):W[z]<-1&&(L.gl.texImage2D(J.target,0,X.internalFormat,Y.realWidth,Y.realHeight,0,Y.format,X.type,null),W[z]=-1))}return!0},U.test=function(L){return Array.isArray(L)&&L.length===U.SIDES},U.SIDES=6,U}(AbstractMultiResource),ImageResource=function(G){__extends$v(U,G);function U(L,Y){var X=this;if(Y=Y||{},!(L instanceof HTMLImageElement)){var W=new Image;BaseImageResource.crossOrigin(W,L,Y.crossorigin),W.src=L,L=W}return X=G.call(this,L)||this,!L.complete&&!!X._width&&!!X._height&&(X._width=0,X._height=0),X.url=L.src,X._process=null,X.preserveBitmap=!1,X.createBitmap=(Y.createBitmap!==void 0?Y.createBitmap:settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,X.alphaMode=typeof Y.alphaMode=="number"?Y.alphaMode:null,X.bitmap=null,X._load=null,Y.autoLoad!==!1&&X.load(),X}return U.prototype.load=function(L){var Y=this;return this._load?this._load:(L!==void 0&&(this.createBitmap=L),this._load=new Promise(function(X,W){var z=Y.source;Y.url=z.src;var J=function(){Y.destroyed||(z.onload=null,z.onerror=null,Y.resize(z.width,z.height),Y._load=null,Y.createBitmap?X(Y.process()):X(Y))};z.complete&&z.src?J():(z.onload=J,z.onerror=function(Z){W(Z),Y.onError.emit(Z)})}),this._load)},U.prototype.process=function(){var L=this,Y=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var X=globalThis.createImageBitmap,W=!Y.crossOrigin||Y.crossOrigin==="anonymous";return this._process=fetch(Y.src,{mode:W?"cors":"no-cors"}).then(function(z){return z.blob()}).then(function(z){return X(z,0,0,Y.width,Y.height,{premultiplyAlpha:L.alphaMode===ALPHA_MODES$4.UNPACK?"premultiply":"none"})}).then(function(z){return L.destroyed?Promise.reject():(L.bitmap=z,L.update(),L._process=null,Promise.resolve(L))}),this._process},U.prototype.upload=function(L,Y,X){if(typeof this.alphaMode=="number"&&(Y.alphaMode=this.alphaMode),!this.createBitmap)return G.prototype.upload.call(this,L,Y,X);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(G.prototype.upload.call(this,L,Y,X,this.bitmap),!this.preserveBitmap){var W=!0,z=Y._glTextures;for(var J in z){var Z=z[J];if(Z!==X&&Z.dirtyId!==Y.dirtyId){W=!1;break}}W&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},U.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,G.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},U.test=function(L){return typeof L=="string"||L instanceof HTMLImageElement},U}(BaseImageResource),SVGResource=function(G){__extends$v(U,G);function U(L,Y){var X=this;return Y=Y||{},X=G.call(this,document.createElement("canvas"))||this,X._width=0,X._height=0,X.svg=L,X.scale=Y.scale||1,X._overrideWidth=Y.width,X._overrideHeight=Y.height,X._resolve=null,X._crossorigin=Y.crossorigin,X._load=null,Y.autoLoad!==!1&&X.load(),X}return U.prototype.load=function(){var L=this;return this._load?this._load:(this._load=new Promise(function(Y){if(L._resolve=function(){L.resize(L.source.width,L.source.height),Y(L)},U.SVG_XML.test(L.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");L.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(L.svg)))}L._loadSvg()}),this._load)},U.prototype._loadSvg=function(){var L=this,Y=new Image;BaseImageResource.crossOrigin(Y,this.svg,this._crossorigin),Y.src=this.svg,Y.onerror=function(X){!L._resolve||(Y.onerror=null,L.onError.emit(X))},Y.onload=function(){if(!!L._resolve){var X=Y.width,W=Y.height;if(!X||!W)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var z=X*L.scale,J=W*L.scale;(L._overrideWidth||L._overrideHeight)&&(z=L._overrideWidth||L._overrideHeight/W*X,J=L._overrideHeight||L._overrideWidth/X*W),z=Math.round(z),J=Math.round(J);var Z=L.source;Z.width=z,Z.height=J,Z._pixiId="canvas_"+uid(),Z.getContext("2d").drawImage(Y,0,0,X,W,0,0,z,J),L._resolve(),L._resolve=null}}},U.getSize=function(L){var Y=U.SVG_SIZE.exec(L),X={};return Y&&(X[Y[1]]=Math.round(parseFloat(Y[3])),X[Y[5]]=Math.round(parseFloat(Y[7]))),X},U.prototype.dispose=function(){G.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},U.test=function(L,Y){return Y==="svg"||typeof L=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(L)||typeof L=="string"&&U.SVG_XML.test(L)},U.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,U.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,U}(BaseImageResource),VideoResource=function(G){__extends$v(U,G);function U(L,Y){var X=this;if(Y=Y||{},!(L instanceof HTMLVideoElement)){var W=document.createElement("video");W.setAttribute("preload","auto"),W.setAttribute("webkit-playsinline",""),W.setAttribute("playsinline",""),typeof L=="string"&&(L=[L]);var z=L[0].src||L[0];BaseImageResource.crossOrigin(W,z,Y.crossorigin);for(var J=0;J<L.length;++J){var Z=document.createElement("source"),ee=L[J],te=ee.src,re=ee.mime;te=te||L[J];var ie=te.split("?").shift().toLowerCase(),ne=ie.slice(ie.lastIndexOf(".")+1);re=re||U.MIME_TYPES[ne]||"video/"+ne,Z.src=te,Z.type=re,W.appendChild(Z)}L=W}return X=G.call(this,L)||this,X.noSubImage=!0,X._autoUpdate=!0,X._isConnectedToTicker=!1,X._updateFPS=Y.updateFPS||0,X._msToNextUpdate=0,X.autoPlay=Y.autoPlay!==!1,X._load=null,X._resolve=null,X._onCanPlay=X._onCanPlay.bind(X),X._onError=X._onError.bind(X),Y.autoLoad!==!1&&X.load(),X}return U.prototype.update=function(L){if(!this.destroyed){var Y=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-Y),(!this._updateFPS||this._msToNextUpdate<=0)&&(G.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},U.prototype.load=function(){var L=this;if(this._load)return this._load;var Y=this.source;return(Y.readyState===Y.HAVE_ENOUGH_DATA||Y.readyState===Y.HAVE_FUTURE_DATA)&&Y.width&&Y.height&&(Y.complete=!0),Y.addEventListener("play",this._onPlayStart.bind(this)),Y.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(Y.addEventListener("canplay",this._onCanPlay),Y.addEventListener("canplaythrough",this._onCanPlay),Y.addEventListener("error",this._onError,!0)),this._load=new Promise(function(X){L.valid?X(L):(L._resolve=X,Y.load())}),this._load},U.prototype._onError=function(L){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(L)},U.prototype._isSourcePlaying=function(){var L=this.source;return L.currentTime>0&&L.paused===!1&&L.ended===!1&&L.readyState>2},U.prototype._isSourceReady=function(){var L=this.source;return L.readyState===3||L.readyState===4},U.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},U.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},U.prototype._onCanPlay=function(){var L=this.source;L.removeEventListener("canplay",this._onCanPlay),L.removeEventListener("canplaythrough",this._onCanPlay);var Y=this.valid;this.resize(L.videoWidth,L.videoHeight),!Y&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&L.play()},U.prototype.dispose=function(){this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var L=this.source;L&&(L.removeEventListener("error",this._onError,!0),L.pause(),L.src="",L.load()),G.prototype.dispose.call(this)},Object.defineProperty(U.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(L){L!==this._autoUpdate&&(this._autoUpdate=L,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(L){L!==this._updateFPS&&(this._updateFPS=L)},enumerable:!1,configurable:!0}),U.test=function(L,Y){return globalThis.HTMLVideoElement&&L instanceof HTMLVideoElement||U.TYPES.indexOf(Y)>-1},U.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],U.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},U}(BaseImageResource),ImageBitmapResource=function(G){__extends$v(U,G);function U(L){return G.call(this,L)||this}return U.test=function(L){return!!globalThis.createImageBitmap&&L instanceof ImageBitmap},U}(BaseImageResource);INSTALLED.push(ImageResource,ImageBitmapResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);var _resources={__proto__:null,Resource,BaseImageResource,INSTALLED,autoDetectResource,AbstractMultiResource,ArrayResource,BufferResource,CanvasResource,CubeResource,ImageResource,SVGResource,VideoResource,ImageBitmapResource},DepthResource=function(G){__extends$v(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.upload=function(L,Y,X){var W=L.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.alphaMode===ALPHA_MODES$4.UNPACK);var z=Y.realWidth,J=Y.realHeight;return X.width===z&&X.height===J?W.texSubImage2D(Y.target,0,0,0,z,J,Y.format,X.type,this.data):(X.width=z,X.height=J,W.texImage2D(Y.target,0,X.internalFormat,z,J,0,Y.format,X.type,this.data)),!0},U}(BufferResource),Framebuffer=function(){function G(U,L){this.width=Math.round(U||100),this.height=Math.round(L||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY$4.NONE}return Object.defineProperty(G.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),G.prototype.addColorTexture=function(U,L){return U===void 0&&(U=0),this.colorTextures[U]=L||new BaseTexture(null,{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,mipmap:MIPMAP_MODES$4.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},G.prototype.addDepthTexture=function(U){return this.depthTexture=U||new BaseTexture(new DepthResource(null,{width:this.width,height:this.height}),{scaleMode:SCALE_MODES$4.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES$4.OFF,format:FORMATS$4.DEPTH_COMPONENT,type:TYPES$4.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},G.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},G.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},G.prototype.resize=function(U,L){if(U=Math.round(U),L=Math.round(L),!(U===this.width&&L===this.height)){this.width=U,this.height=L,this.dirtyId++,this.dirtySize++;for(var Y=0;Y<this.colorTextures.length;Y++){var X=this.colorTextures[Y],W=X.resolution;X.setSize(U/W,L/W)}if(this.depthTexture){var W=this.depthTexture.resolution;this.depthTexture.setSize(U/W,L/W)}}},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},G}(),BaseRenderTexture=function(G){__extends$v(U,G);function U(L){L===void 0&&(L={});var Y=this;if(typeof L=="number"){var X=arguments[0],W=arguments[1],z=arguments[2],J=arguments[3];L={width:X,height:W,scaleMode:z,resolution:J}}return L.width=L.width||100,L.height=L.height||100,L.multisample=L.multisample!==void 0?L.multisample:MSAA_QUALITY$4.NONE,Y=G.call(this,null,L)||this,Y.mipmap=MIPMAP_MODES$4.OFF,Y.valid=!0,Y.clearColor=[0,0,0,0],Y.framebuffer=new Framebuffer(Y.realWidth,Y.realHeight).addColorTexture(0,Y),Y.framebuffer.multisample=L.multisample,Y.maskStack=[],Y.filterStack=[{}],Y}return U.prototype.resize=function(L,Y){this.framebuffer.resize(L*this.resolution,Y*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},U.prototype.dispose=function(){this.framebuffer.dispose(),G.prototype.dispose.call(this)},U.prototype.destroy=function(){G.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},U}(BaseTexture),TextureUvs=function(){function G(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return G.prototype.set=function(U,L,Y){var X=L.width,W=L.height;if(Y){var z=U.width/2/X,J=U.height/2/W,Z=U.x/X+z,ee=U.y/W+J;Y=groupD8.add(Y,groupD8.NW),this.x0=Z+z*groupD8.uX(Y),this.y0=ee+J*groupD8.uY(Y),Y=groupD8.add(Y,2),this.x1=Z+z*groupD8.uX(Y),this.y1=ee+J*groupD8.uY(Y),Y=groupD8.add(Y,2),this.x2=Z+z*groupD8.uX(Y),this.y2=ee+J*groupD8.uY(Y),Y=groupD8.add(Y,2),this.x3=Z+z*groupD8.uX(Y),this.y3=ee+J*groupD8.uY(Y)}else this.x0=U.x/X,this.y0=U.y/W,this.x1=(U.x+U.width)/X,this.y1=U.y/W,this.x2=(U.x+U.width)/X,this.y2=(U.y+U.height)/W,this.x3=U.x/X,this.y3=(U.y+U.height)/W;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},G.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},G}(),DEFAULT_UVS=new TextureUvs;function removeAllHandlers(G){G.destroy=function(){},G.on=function(){},G.once=function(){},G.emit=function(){}}var Texture=function(G){__extends$v(U,G);function U(L,Y,X,W,z,J){var Z=G.call(this)||this;if(Z.noFrame=!1,Y||(Z.noFrame=!0,Y=new Rectangle(0,0,1,1)),L instanceof U&&(L=L.baseTexture),Z.baseTexture=L,Z._frame=Y,Z.trim=W,Z.valid=!1,Z._uvs=DEFAULT_UVS,Z.uvMatrix=null,Z.orig=X||Y,Z._rotate=Number(z||0),z===!0)Z._rotate=2;else if(Z._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return Z.defaultAnchor=J?new Point(J.x,J.y):new Point(0,0),Z._updateID=0,Z.textureCacheIds=[],L.valid?Z.noFrame?L.valid&&Z.onBaseTextureUpdated(L):Z.frame=Y:L.once("loaded",Z.onBaseTextureUpdated,Z),Z.noFrame&&L.on("update",Z.onBaseTextureUpdated,Z),Z}return U.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},U.prototype.onBaseTextureUpdated=function(L){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=L.width,this._frame.height=L.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},U.prototype.destroy=function(L){if(this.baseTexture){if(L){var Y=this.baseTexture.resource;Y&&Y.url&&TextureCache[Y.url]&&U.removeFromCache(Y.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,U.removeFromCache(this),this.textureCacheIds=null},U.prototype.clone=function(){var L=this._frame.clone(),Y=this._frame===this.orig?L:this.orig.clone(),X=new U(this.baseTexture,!this.noFrame&&L,Y,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(X._frame=L),X},U.prototype.updateUvs=function(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},U.from=function(L,Y,X){Y===void 0&&(Y={}),X===void 0&&(X=settings$1.STRICT_TEXTURE_CACHE);var W=typeof L=="string",z=null;if(W)z=L;else if(L instanceof BaseTexture){if(!L.cacheId){var J=Y&&Y.pixiIdPrefix||"pixiid";L.cacheId=J+"-"+uid(),BaseTexture.addToCache(L,L.cacheId)}z=L.cacheId}else{if(!L._pixiId){var J=Y&&Y.pixiIdPrefix||"pixiid";L._pixiId=J+"_"+uid()}z=L._pixiId}var Z=TextureCache[z];if(W&&X&&!Z)throw new Error('The cacheId "'+z+'" does not exist in TextureCache.');return!Z&&!(L instanceof BaseTexture)?(Y.resolution||(Y.resolution=getResolutionOfUrl(L)),Z=new U(new BaseTexture(L,Y)),Z.baseTexture.cacheId=z,BaseTexture.addToCache(Z.baseTexture,z),U.addToCache(Z,z)):!Z&&L instanceof BaseTexture&&(Z=new U(L),U.addToCache(Z,z)),Z},U.fromURL=function(L,Y){var X=Object.assign({autoLoad:!1},Y==null?void 0:Y.resourceOptions),W=U.from(L,Object.assign({resourceOptions:X},Y),!1),z=W.baseTexture.resource;return W.baseTexture.valid?Promise.resolve(W):z.load().then(function(){return Promise.resolve(W)})},U.fromBuffer=function(L,Y,X,W){return new U(BaseTexture.fromBuffer(L,Y,X,W))},U.fromLoader=function(L,Y,X,W){var z=new BaseTexture(L,Object.assign({scaleMode:settings$1.SCALE_MODE,resolution:getResolutionOfUrl(Y)},W)),J=z.resource;J instanceof ImageResource&&(J.url=Y);var Z=new U(z);return X||(X=Y),BaseTexture.addToCache(Z.baseTexture,X),U.addToCache(Z,X),X!==Y&&(BaseTexture.addToCache(Z.baseTexture,Y),U.addToCache(Z,Y)),Z.baseTexture.valid?Promise.resolve(Z):new Promise(function(ee){Z.baseTexture.once("loaded",function(){return ee(Z)})})},U.addToCache=function(L,Y){Y&&(L.textureCacheIds.indexOf(Y)===-1&&L.textureCacheIds.push(Y),TextureCache[Y]&&console.warn("Texture added to the cache with an id ["+Y+"] that already had an entry"),TextureCache[Y]=L)},U.removeFromCache=function(L){if(typeof L=="string"){var Y=TextureCache[L];if(Y){var X=Y.textureCacheIds.indexOf(L);return X>-1&&Y.textureCacheIds.splice(X,1),delete TextureCache[L],Y}}else if(L&&L.textureCacheIds){for(var W=0;W<L.textureCacheIds.length;++W)TextureCache[L.textureCacheIds[W]]===L&&delete TextureCache[L.textureCacheIds[W]];return L.textureCacheIds.length=0,L}return null},Object.defineProperty(U.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"frame",{get:function(){return this._frame},set:function(L){this._frame=L,this.noFrame=!1;var Y=L.x,X=L.y,W=L.width,z=L.height,J=Y+W>this.baseTexture.width,Z=X+z>this.baseTexture.height;if(J||Z){var ee=J&&Z?"and":"or",te="X: "+Y+" + "+W+" = "+(Y+W)+" > "+this.baseTexture.width,re="Y: "+X+" + "+z+" = "+(X+z)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(te+" "+ee+" "+re))}this.valid=W&&z&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=L),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"rotate",{get:function(){return this._rotate},set:function(L){this._rotate=L,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),U.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(U,"EMPTY",{get:function(){return U._EMPTY||(U._EMPTY=new U(new BaseTexture),removeAllHandlers(U._EMPTY),removeAllHandlers(U._EMPTY.baseTexture)),U._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(U,"WHITE",{get:function(){if(!U._WHITE){var L=document.createElement("canvas"),Y=L.getContext("2d");L.width=16,L.height=16,Y.fillStyle="white",Y.fillRect(0,0,16,16),U._WHITE=new U(new BaseTexture(new CanvasResource(L))),removeAllHandlers(U._WHITE),removeAllHandlers(U._WHITE.baseTexture)}return U._WHITE},enumerable:!1,configurable:!0}),U}(eventemitter3$1),RenderTexture=function(G){__extends$v(U,G);function U(L,Y){var X=G.call(this,L,Y)||this;return X.valid=!0,X.filterFrame=null,X.filterPoolKey=null,X.updateUvs(),X}return Object.defineProperty(U.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(L){this.framebuffer.multisample=L},enumerable:!1,configurable:!0}),U.prototype.resize=function(L,Y,X){X===void 0&&(X=!0);var W=this.baseTexture.resolution,z=Math.round(L*W)/W,J=Math.round(Y*W)/W;this.valid=z>0&&J>0,this._frame.width=this.orig.width=z,this._frame.height=this.orig.height=J,X&&this.baseTexture.resize(z,J),this.updateUvs()},U.prototype.setResolution=function(L){var Y=this.baseTexture;Y.resolution!==L&&(Y.setResolution(L),this.resize(Y.width,Y.height,!1))},U.create=function(L){for(var Y=arguments,X=[],W=1;W<arguments.length;W++)X[W-1]=Y[W];return typeof L=="number"&&(deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),L={width:L,height:X[0],scaleMode:X[1],resolution:X[2]}),new U(new BaseRenderTexture(L))},U}(Texture),RenderTexturePool=function(){function G(U){this.texturePool={},this.textureOptions=U||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return G.prototype.createTexture=function(U,L,Y){Y===void 0&&(Y=MSAA_QUALITY$4.NONE);var X=new BaseRenderTexture(Object.assign({width:U,height:L,resolution:1,multisample:Y},this.textureOptions));return new RenderTexture(X)},G.prototype.getOptimalTexture=function(U,L,Y,X){Y===void 0&&(Y=1),X===void 0&&(X=MSAA_QUALITY$4.NONE);var W;U=Math.ceil(U*Y-1e-6),L=Math.ceil(L*Y-1e-6),!this.enableFullScreen||U!==this._pixelsWidth||L!==this._pixelsHeight?(U=nextPow2(U),L=nextPow2(L),W=((U&65535)<<16|L&65535)>>>0,X>1&&(W+=X*4294967296)):W=X>1?-X:-1,this.texturePool[W]||(this.texturePool[W]=[]);var z=this.texturePool[W].pop();return z||(z=this.createTexture(U,L,X)),z.filterPoolKey=W,z.setResolution(Y),z},G.prototype.getFilterTexture=function(U,L,Y){var X=this.getOptimalTexture(U.width,U.height,L||U.resolution,Y||MSAA_QUALITY$4.NONE);return X.filterFrame=U.filterFrame,X},G.prototype.returnTexture=function(U){var L=U.filterPoolKey;U.filterFrame=null,this.texturePool[L].push(U)},G.prototype.returnFilterTexture=function(U){this.returnTexture(U)},G.prototype.clear=function(U){if(U=U!==!1,U)for(var L in this.texturePool){var Y=this.texturePool[L];if(Y)for(var X=0;X<Y.length;X++)Y[X].destroy(!0)}this.texturePool={}},G.prototype.setScreenSize=function(U){if(!(U.width===this._pixelsWidth&&U.height===this._pixelsHeight)){this.enableFullScreen=U.width>0&&U.height>0;for(var L in this.texturePool)if(Number(L)<0){var Y=this.texturePool[L];if(Y)for(var X=0;X<Y.length;X++)Y[X].destroy(!0);this.texturePool[L]=[]}this._pixelsWidth=U.width,this._pixelsHeight=U.height}},G.SCREEN_KEY=-1,G}(),Attribute=function(){function G(U,L,Y,X,W,z,J){L===void 0&&(L=0),Y===void 0&&(Y=!1),X===void 0&&(X=TYPES$4.FLOAT),this.buffer=U,this.size=L,this.normalized=Y,this.type=X,this.stride=W,this.start=z,this.instance=J}return G.prototype.destroy=function(){this.buffer=null},G.from=function(U,L,Y,X,W){return new G(U,L,Y,X,W)},G}(),UID$4=0,Buffer=function(){function G(U,L,Y){L===void 0&&(L=!0),Y===void 0&&(Y=!1),this.data=U||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=Y,this.static=L,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}return G.prototype.update=function(U){U instanceof Array&&(U=new Float32Array(U)),this.data=U||this.data,this._updateID++},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(G.prototype,"index",{get:function(){return this.type===BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER},set:function(U){this.type=U?BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE$4.ARRAY_BUFFER},enumerable:!1,configurable:!0}),G.from=function(U){return U instanceof Array&&(U=new Float32Array(U)),new G(U)},G}(),map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(G,U){for(var L=0,Y=0,X={},W=0;W<G.length;W++)Y+=U[W],L+=G[W].length;for(var z=new ArrayBuffer(L*4),J=null,Z=0,W=0;W<G.length;W++){var ee=U[W],te=G[W],re=getBufferType(te);X[re]||(X[re]=new map$1[re](z)),J=X[re];for(var ie=0;ie<te.length;ie++){var ne=(ie/ee|0)*Y+Z,oe=ie%ee;J[ne+oe]=te[ie]}Z+=ee}return new Float32Array(z)}var byteSizeMap$1={5126:4,5123:2,5121:1},UID$3=0,map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Geometry=function(){function G(U,L){U===void 0&&(U=[]),L===void 0&&(L={}),this.buffers=U,this.indexBuffer=null,this.attributes=L,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}return G.prototype.addAttribute=function(U,L,Y,X,W,z,J,Z){if(Y===void 0&&(Y=0),X===void 0&&(X=!1),Z===void 0&&(Z=!1),!L)throw new Error("You must pass a buffer when creating an attribute");L instanceof Buffer||(L instanceof Array&&(L=new Float32Array(L)),L=new Buffer(L));var ee=U.split("|");if(ee.length>1){for(var te=0;te<ee.length;te++)this.addAttribute(ee[te],L,Y,X,W);return this}var re=this.buffers.indexOf(L);return re===-1&&(this.buffers.push(L),re=this.buffers.length-1),this.attributes[U]=new Attribute(re,Y,X,W,z,J,Z),this.instanced=this.instanced||Z,this},G.prototype.getAttribute=function(U){return this.attributes[U]},G.prototype.getBuffer=function(U){return this.buffers[this.getAttribute(U).buffer]},G.prototype.addIndex=function(U){return U instanceof Buffer||(U instanceof Array&&(U=new Uint16Array(U)),U=new Buffer(U)),U.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER,this.indexBuffer=U,this.buffers.indexOf(U)===-1&&this.buffers.push(U),this},G.prototype.getIndex=function(){return this.indexBuffer},G.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var U=[],L=[],Y=new Buffer,X;for(X in this.attributes){var W=this.attributes[X],z=this.buffers[W.buffer];U.push(z.data),L.push(W.size*byteSizeMap$1[W.type]/4),W.buffer=0}for(Y.data=interleaveTypedArrays(U,L),X=0;X<this.buffers.length;X++)this.buffers[X]!==this.indexBuffer&&this.buffers[X].destroy();return this.buffers=[Y],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},G.prototype.getSize=function(){for(var U in this.attributes){var L=this.attributes[U],Y=this.buffers[L.buffer];return Y.data.length/(L.stride/4||L.size)}return 0},G.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},G.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},G.prototype.clone=function(){for(var U=new G,L=0;L<this.buffers.length;L++)U.buffers[L]=new Buffer(this.buffers[L].data.slice(0));for(var L in this.attributes){var Y=this.attributes[L];U.attributes[L]=new Attribute(Y.buffer,Y.size,Y.normalized,Y.type,Y.stride,Y.start,Y.instance)}return this.indexBuffer&&(U.indexBuffer=U.buffers[this.buffers.indexOf(this.indexBuffer)],U.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER),U},G.merge=function(U){for(var L=new G,Y=[],X=[],W=[],z,J=0;J<U.length;J++){z=U[J];for(var Z=0;Z<z.buffers.length;Z++)X[Z]=X[Z]||0,X[Z]+=z.buffers[Z].data.length,W[Z]=0}for(var J=0;J<z.buffers.length;J++)Y[J]=new map[getBufferType(z.buffers[J].data)](X[J]),L.buffers[J]=new Buffer(Y[J]);for(var J=0;J<U.length;J++){z=U[J];for(var Z=0;Z<z.buffers.length;Z++)Y[Z].set(z.buffers[Z].data,W[Z]),W[Z]+=z.buffers[Z].data.length}if(L.attributes=z.attributes,z.indexBuffer){L.indexBuffer=L.buffers[z.buffers.indexOf(z.indexBuffer)],L.indexBuffer.type=BUFFER_TYPE$4.ELEMENT_ARRAY_BUFFER;for(var ee=0,te=0,re=0,ie=0,J=0;J<z.buffers.length;J++)if(z.buffers[J]!==z.indexBuffer){ie=J;break}for(var J in z.attributes){var ne=z.attributes[J];(ne.buffer|0)===ie&&(te+=ne.size*byteSizeMap$1[ne.type]/4)}for(var J=0;J<U.length;J++){for(var oe=U[J].indexBuffer.data,Z=0;Z<oe.length;Z++)L.indexBuffer.data[Z+re]+=ee;ee+=U[J].buffers[ie].data.length/te,re+=oe.length}}return L},G}(),Quad=function(G){__extends$v(U,G);function U(){var L=G.call(this)||this;return L.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),L}return U}(Geometry),QuadUv=function(G){__extends$v(U,G);function U(){var L=G.call(this)||this;return L.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),L.uvs=new Float32Array([0,0,1,0,1,1,0,1]),L.vertexBuffer=new Buffer(L.vertices),L.uvBuffer=new Buffer(L.uvs),L.addAttribute("aVertexPosition",L.vertexBuffer).addAttribute("aTextureCoord",L.uvBuffer).addIndex([0,1,2,0,2,3]),L}return U.prototype.map=function(L,Y){var X=0,W=0;return this.uvs[0]=X,this.uvs[1]=W,this.uvs[2]=X+Y.width/L.width,this.uvs[3]=W,this.uvs[4]=X+Y.width/L.width,this.uvs[5]=W+Y.height/L.height,this.uvs[6]=X,this.uvs[7]=W+Y.height/L.height,X=Y.x,W=Y.y,this.vertices[0]=X,this.vertices[1]=W,this.vertices[2]=X+Y.width,this.vertices[3]=W,this.vertices[4]=X+Y.width,this.vertices[5]=W+Y.height,this.vertices[6]=X,this.vertices[7]=W+Y.height,this.invalidate(),this},U.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},U}(Geometry),UID$2=0,UniformGroup=function(){function G(U,L,Y){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$2++,this.static=!!L,this.ubo=!!Y,U instanceof Buffer?(this.buffer=U,this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=U,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE$4.UNIFORM_BUFFER,this.autoManage=!0))}return G.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},G.prototype.add=function(U,L,Y){if(!this.ubo)this.uniforms[U]=new G(L,Y);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},G.from=function(U,L,Y){return new G(U,L,Y)},G.uboFrom=function(U,L){return new G(U,L!=null?L:!0,!0)},G}(),FilterState=function(){function G(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY$4.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}return G.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},G}(),tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix,FilterSystem=function(){function G(U){this.renderer=U,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.texturePool.setScreenSize(U.view),this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return G.prototype.push=function(U,L){for(var Y,X,W=this.renderer,z=this.defaultFilterStack,J=this.statePool.pop()||new FilterState,Z=this.renderer.renderTexture,ee=L[0].resolution,te=L[0].multisample,re=L[0].padding,ie=L[0].autoFit,ne=(Y=L[0].legacy)!==null&&Y!==void 0?Y:!0,oe=1;oe<L.length;oe++){var se=L[oe];ee=Math.min(ee,se.resolution),te=Math.min(te,se.multisample),re=this.useMaxPadding?Math.max(re,se.padding):re+se.padding,ie=ie&&se.autoFit,ne=ne||((X=se.legacy)!==null&&X!==void 0?X:!0)}z.length===1&&(this.defaultFilterStack[0].renderTexture=Z.current),z.push(J),J.resolution=ee,J.multisample=te,J.legacy=ne,J.target=U,J.sourceFrame.copyFrom(U.filterArea||U.getBounds(!0)),J.sourceFrame.pad(re);var ae=this.tempRect.copyFrom(Z.sourceFrame);W.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(W.projection.transform).invert(),ae),ie?(J.sourceFrame.fit(ae),(J.sourceFrame.width<=0||J.sourceFrame.height<=0)&&(J.sourceFrame.width=0,J.sourceFrame.height=0)):J.sourceFrame.intersects(ae)||(J.sourceFrame.width=0,J.sourceFrame.height=0),this.roundFrame(J.sourceFrame,Z.current?Z.current.resolution:W.resolution,Z.sourceFrame,Z.destinationFrame,W.projection.transform),J.renderTexture=this.getOptimalFilterTexture(J.sourceFrame.width,J.sourceFrame.height,ee,te),J.filters=L,J.destinationFrame.width=J.renderTexture.width,J.destinationFrame.height=J.renderTexture.height;var le=this.tempRect;le.x=0,le.y=0,le.width=J.sourceFrame.width,le.height=J.sourceFrame.height,J.renderTexture.filterFrame=J.sourceFrame,J.bindingSourceFrame.copyFrom(Z.sourceFrame),J.bindingDestinationFrame.copyFrom(Z.destinationFrame),J.transform=W.projection.transform,W.projection.transform=null,Z.bind(J.renderTexture,J.sourceFrame,le),W.framebuffer.clear(0,0,0,0)},G.prototype.pop=function(){var U=this.defaultFilterStack,L=U.pop(),Y=L.filters;this.activeState=L;var X=this.globalUniforms.uniforms;X.outputFrame=L.sourceFrame,X.resolution=L.resolution;var W=X.inputSize,z=X.inputPixel,J=X.inputClamp;if(W[0]=L.destinationFrame.width,W[1]=L.destinationFrame.height,W[2]=1/W[0],W[3]=1/W[1],z[0]=Math.round(W[0]*L.resolution),z[1]=Math.round(W[1]*L.resolution),z[2]=1/z[0],z[3]=1/z[1],J[0]=.5*z[2],J[1]=.5*z[3],J[2]=L.sourceFrame.width*W[2]-.5*z[2],J[3]=L.sourceFrame.height*W[3]-.5*z[3],L.legacy){var Z=X.filterArea;Z[0]=L.destinationFrame.width,Z[1]=L.destinationFrame.height,Z[2]=L.sourceFrame.x,Z[3]=L.sourceFrame.y,X.filterClamp=X.inputClamp}this.globalUniforms.update();var ee=U[U.length-1];if(this.renderer.framebuffer.blit(),Y.length===1)Y[0].apply(this,L.renderTexture,ee.renderTexture,CLEAR_MODES$4.BLEND,L),this.returnFilterTexture(L.renderTexture);else{var te=L.renderTexture,re=this.getOptimalFilterTexture(te.width,te.height,L.resolution);re.filterFrame=te.filterFrame;var ie=0;for(ie=0;ie<Y.length-1;++ie){ie===1&&L.multisample>1&&(re=this.getOptimalFilterTexture(te.width,te.height,L.resolution),re.filterFrame=te.filterFrame),Y[ie].apply(this,te,re,CLEAR_MODES$4.CLEAR,L);var ne=te;te=re,re=ne}Y[ie].apply(this,te,ee.renderTexture,CLEAR_MODES$4.BLEND,L),ie>1&&L.multisample>1&&this.returnFilterTexture(L.renderTexture),this.returnFilterTexture(te),this.returnFilterTexture(re)}L.clear(),this.statePool.push(L)},G.prototype.bindAndClear=function(U,L){L===void 0&&(L=CLEAR_MODES$4.CLEAR);var Y=this.renderer,X=Y.renderTexture,W=Y.state;if(U===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,U&&U.filterFrame){var z=this.tempRect;z.x=0,z.y=0,z.width=U.filterFrame.width,z.height=U.filterFrame.height,X.bind(U,U.filterFrame,z)}else U!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?X.bind(U):this.renderer.renderTexture.bind(U,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var J=W.stateId&1||this.forceClear;(L===CLEAR_MODES$4.CLEAR||L===CLEAR_MODES$4.BLIT&&J)&&this.renderer.framebuffer.clear(0,0,0,0)},G.prototype.applyFilter=function(U,L,Y,X){var W=this.renderer;W.state.set(U.state),this.bindAndClear(Y,X),U.uniforms.uSampler=L,U.uniforms.filterGlobals=this.globalUniforms,W.shader.bind(U),U.legacy=!!U.program.attributeData.aTextureCoord,U.legacy?(this.quadUv.map(L._frame,L.filterFrame),W.geometry.bind(this.quadUv),W.geometry.draw(DRAW_MODES$4.TRIANGLES)):(W.geometry.bind(this.quad),W.geometry.draw(DRAW_MODES$4.TRIANGLE_STRIP))},G.prototype.calculateSpriteMatrix=function(U,L){var Y=this.activeState,X=Y.sourceFrame,W=Y.destinationFrame,z=L._texture.orig,J=U.set(W.width,0,0,W.height,X.x,X.y),Z=L.worldTransform.copyTo(Matrix.TEMP_MATRIX);return Z.invert(),J.prepend(Z),J.scale(1/z.width,1/z.height),J.translate(L.anchor.x,L.anchor.y),J},G.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},G.prototype.getOptimalFilterTexture=function(U,L,Y,X){return Y===void 0&&(Y=1),X===void 0&&(X=MSAA_QUALITY$4.NONE),this.texturePool.getOptimalTexture(U,L,Y,X)},G.prototype.getFilterTexture=function(U,L,Y){if(typeof U=="number"){var X=U;U=L,L=X}U=U||this.activeState.renderTexture;var W=this.texturePool.getOptimalTexture(U.width,U.height,L||U.resolution,Y||MSAA_QUALITY$4.NONE);return W.filterFrame=U.filterFrame,W},G.prototype.returnFilterTexture=function(U){this.texturePool.returnTexture(U)},G.prototype.emptyPool=function(){this.texturePool.clear(!0)},G.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},G.prototype.transformAABB=function(U,L){var Y=tempPoints[0],X=tempPoints[1],W=tempPoints[2],z=tempPoints[3];Y.set(L.left,L.top),X.set(L.left,L.bottom),W.set(L.right,L.top),z.set(L.right,L.bottom),U.apply(Y,Y),U.apply(X,X),U.apply(W,W),U.apply(z,z);var J=Math.min(Y.x,X.x,W.x,z.x),Z=Math.min(Y.y,X.y,W.y,z.y),ee=Math.max(Y.x,X.x,W.x,z.x),te=Math.max(Y.y,X.y,W.y,z.y);L.x=J,L.y=Z,L.width=ee-J,L.height=te-Z},G.prototype.roundFrame=function(U,L,Y,X,W){if(!(U.width<=0||U.height<=0||Y.width<=0||Y.height<=0)){if(W){var z=W.a,J=W.b,Z=W.c,ee=W.d;if((Math.abs(J)>1e-4||Math.abs(Z)>1e-4)&&(Math.abs(z)>1e-4||Math.abs(ee)>1e-4))return}W=W?tempMatrix$2.copyFrom(W):tempMatrix$2.identity(),W.translate(-Y.x,-Y.y).scale(X.width/Y.width,X.height/Y.height).translate(X.x,X.y),this.transformAABB(W,U),U.ceil(L),this.transformAABB(W.invert(),U)}},G}(),ObjectRenderer=function(){function G(U){this.renderer=U}return G.prototype.flush=function(){},G.prototype.destroy=function(){this.renderer=null},G.prototype.start=function(){},G.prototype.stop=function(){this.flush()},G.prototype.render=function(U){},G}(),BatchSystem=function(){function G(U){this.renderer=U,this.emptyRenderer=new ObjectRenderer(U),this.currentRenderer=this.emptyRenderer}return G.prototype.setObjectRenderer=function(U){this.currentRenderer!==U&&(this.currentRenderer.stop(),this.currentRenderer=U,this.currentRenderer.start())},G.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},G.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},G.prototype.copyBoundTextures=function(U,L){for(var Y=this.renderer.texture.boundTextures,X=L-1;X>=0;--X)U[X]=Y[X]||null,U[X]&&(U[X]._batchLocation=X)},G.prototype.boundArray=function(U,L,Y,X){for(var W=U.elements,z=U.ids,J=U.count,Z=0,ee=0;ee<J;ee++){var te=W[ee],re=te._batchLocation;if(re>=0&&re<X&&L[re]===te){z[ee]=re;continue}for(;Z<X;){var ie=L[Z];if(ie&&ie._batchEnabled===Y&&ie._batchLocation===Z){Z++;continue}z[ee]=Z,te._batchLocation=Z,L[Z]=te;break}}},G.prototype.destroy=function(){this.renderer=null},G}(),CONTEXT_UID_COUNTER=0,ContextSystem=function(){function G(U){this.renderer=U,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),U.view.addEventListener("webglcontextlost",this.handleContextLost,!1),U.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(G.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),G.prototype.contextChange=function(U){this.gl=U,this.renderer.gl=U,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,U.isContextLost()&&U.getExtension("WEBGL_lose_context")&&U.getExtension("WEBGL_lose_context").restoreContext()},G.prototype.initFromContext=function(U){this.gl=U,this.validateContext(U),this.renderer.gl=U,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(U)},G.prototype.initFromOptions=function(U){var L=this.createContext(this.renderer.view,U);this.initFromContext(L)},G.prototype.createContext=function(U,L){var Y;if(settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(Y=U.getContext("webgl2",L)),Y)this.webGLVersion=2;else if(this.webGLVersion=1,Y=U.getContext("webgl",L)||U.getContext("experimental-webgl",L),!Y)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=Y,this.getExtensions(),this.gl},G.prototype.getExtensions=function(){var U=this.gl,L={anisotropicFiltering:U.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:U.getExtension("OES_texture_float_linear"),s3tc:U.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:U.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:U.getExtension("WEBGL_compressed_texture_etc"),etc1:U.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:U.getExtension("WEBGL_compressed_texture_pvrtc")||U.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:U.getExtension("WEBGL_compressed_texture_atc"),astc:U.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,L,{drawBuffers:U.getExtension("WEBGL_draw_buffers"),depthTexture:U.getExtension("WEBGL_depth_texture"),loseContext:U.getExtension("WEBGL_lose_context"),vertexArrayObject:U.getExtension("OES_vertex_array_object")||U.getExtension("MOZ_OES_vertex_array_object")||U.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:U.getExtension("OES_element_index_uint"),floatTexture:U.getExtension("OES_texture_float"),floatTextureLinear:U.getExtension("OES_texture_float_linear"),textureHalfFloat:U.getExtension("OES_texture_half_float"),textureHalfFloatLinear:U.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,L,{colorBufferFloat:U.getExtension("EXT_color_buffer_float")})},G.prototype.handleContextLost=function(U){U.preventDefault()},G.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},G.prototype.destroy=function(){var U=this.renderer.view;this.renderer=null,U.removeEventListener("webglcontextlost",this.handleContextLost),U.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},G.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},G.prototype.validateContext=function(U){var L=U.getContextAttributes(),Y="WebGL2RenderingContext"in globalThis&&U instanceof globalThis.WebGL2RenderingContext;Y&&(this.webGLVersion=2),L&&!L.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var X=Y||!!U.getExtension("OES_element_index_uint");this.supports.uint32Indices=X,X||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},G}(),GLFramebuffer=function(){function G(U){this.framebuffer=U,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY$4.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return G}(),tempRectangle=new Rectangle,FramebufferSystem=function(){function G(U){this.renderer=U,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}return G.prototype.contextChange=function(){var U=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var L=this.renderer.context.extensions.drawBuffers,Y=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(L=null,Y=null),L?U.drawBuffers=function(X){return L.drawBuffersWEBGL(X)}:(this.hasMRT=!1,U.drawBuffers=function(){}),Y||(this.writeDepthTexture=!1)}else this.msaaSamples=U.getInternalformatParameter(U.RENDERBUFFER,U.RGBA8,U.SAMPLES)},G.prototype.bind=function(U,L,Y){Y===void 0&&(Y=0);var X=this.gl;if(U){var W=U.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(U);this.current!==U&&(this.current=U,X.bindFramebuffer(X.FRAMEBUFFER,W.framebuffer)),W.mipLevel!==Y&&(U.dirtyId++,U.dirtyFormat++,W.mipLevel=Y),W.dirtyId!==U.dirtyId&&(W.dirtyId=U.dirtyId,W.dirtyFormat!==U.dirtyFormat?(W.dirtyFormat=U.dirtyFormat,W.dirtySize=U.dirtySize,this.updateFramebuffer(U,Y)):W.dirtySize!==U.dirtySize&&(W.dirtySize=U.dirtySize,this.resizeFramebuffer(U)));for(var z=0;z<U.colorTextures.length;z++){var J=U.colorTextures[z];this.renderer.texture.unbind(J.parentTextureArray||J)}if(U.depthTexture&&this.renderer.texture.unbind(U.depthTexture),L){var Z=L.width>>Y,ee=L.height>>Y,te=Z/L.width;this.setViewport(L.x*te,L.y*te,Z,ee)}else{var Z=U.width>>Y,ee=U.height>>Y;this.setViewport(0,0,Z,ee)}}else this.current&&(this.current=null,X.bindFramebuffer(X.FRAMEBUFFER,null)),L?this.setViewport(L.x,L.y,L.width,L.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},G.prototype.setViewport=function(U,L,Y,X){var W=this.viewport;U=Math.round(U),L=Math.round(L),Y=Math.round(Y),X=Math.round(X),(W.width!==Y||W.height!==X||W.x!==U||W.y!==L)&&(W.x=U,W.y=L,W.width=Y,W.height=X,this.gl.viewport(U,L,Y,X))},Object.defineProperty(G.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),G.prototype.clear=function(U,L,Y,X,W){W===void 0&&(W=BUFFER_BITS$4.COLOR|BUFFER_BITS$4.DEPTH);var z=this.gl;z.clearColor(U,L,Y,X),z.clear(W)},G.prototype.initFramebuffer=function(U){var L=this.gl,Y=new GLFramebuffer(L.createFramebuffer());return Y.multisample=this.detectSamples(U.multisample),U.glFramebuffers[this.CONTEXT_UID]=Y,this.managedFramebuffers.push(U),U.disposeRunner.add(this),Y},G.prototype.resizeFramebuffer=function(U){var L=this.gl,Y=U.glFramebuffers[this.CONTEXT_UID];Y.msaaBuffer&&(L.bindRenderbuffer(L.RENDERBUFFER,Y.msaaBuffer),L.renderbufferStorageMultisample(L.RENDERBUFFER,Y.multisample,L.RGBA8,U.width,U.height)),Y.stencil&&(L.bindRenderbuffer(L.RENDERBUFFER,Y.stencil),Y.msaaBuffer?L.renderbufferStorageMultisample(L.RENDERBUFFER,Y.multisample,L.DEPTH24_STENCIL8,U.width,U.height):L.renderbufferStorage(L.RENDERBUFFER,L.DEPTH_STENCIL,U.width,U.height));var X=U.colorTextures,W=X.length;L.drawBuffers||(W=Math.min(W,1));for(var z=0;z<W;z++){var J=X[z],Z=J.parentTextureArray||J;this.renderer.texture.bind(Z,0)}U.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(U.depthTexture,0)},G.prototype.updateFramebuffer=function(U,L){var Y=this.gl,X=U.glFramebuffers[this.CONTEXT_UID],W=U.colorTextures,z=W.length;Y.drawBuffers||(z=Math.min(z,1)),X.multisample>1&&this.canMultisampleFramebuffer(U)?(X.msaaBuffer=X.msaaBuffer||Y.createRenderbuffer(),Y.bindRenderbuffer(Y.RENDERBUFFER,X.msaaBuffer),Y.renderbufferStorageMultisample(Y.RENDERBUFFER,X.multisample,Y.RGBA8,U.width,U.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.RENDERBUFFER,X.msaaBuffer)):X.msaaBuffer&&(Y.deleteRenderbuffer(X.msaaBuffer),X.msaaBuffer=null,X.blitFramebuffer&&(X.blitFramebuffer.dispose(),X.blitFramebuffer=null));for(var J=[],Z=0;Z<z;Z++){var ee=W[Z],te=ee.parentTextureArray||ee;this.renderer.texture.bind(te,0),!(Z===0&&X.msaaBuffer)&&(Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0+Z,ee.target,te._glTextures[this.CONTEXT_UID].texture,L),J.push(Y.COLOR_ATTACHMENT0+Z))}if(J.length>1&&Y.drawBuffers(J),U.depthTexture){var re=this.writeDepthTexture;if(re){var ie=U.depthTexture;this.renderer.texture.bind(ie,0),Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.DEPTH_ATTACHMENT,Y.TEXTURE_2D,ie._glTextures[this.CONTEXT_UID].texture,L)}}(U.stencil||U.depth)&&!(U.depthTexture&&this.writeDepthTexture)?(X.stencil=X.stencil||Y.createRenderbuffer(),Y.bindRenderbuffer(Y.RENDERBUFFER,X.stencil),X.msaaBuffer?Y.renderbufferStorageMultisample(Y.RENDERBUFFER,X.multisample,Y.DEPTH24_STENCIL8,U.width,U.height):Y.renderbufferStorage(Y.RENDERBUFFER,Y.DEPTH_STENCIL,U.width,U.height),Y.framebufferRenderbuffer(Y.FRAMEBUFFER,Y.DEPTH_STENCIL_ATTACHMENT,Y.RENDERBUFFER,X.stencil)):X.stencil&&(Y.deleteRenderbuffer(X.stencil),X.stencil=null)},G.prototype.canMultisampleFramebuffer=function(U){return this.renderer.context.webGLVersion!==1&&U.colorTextures.length<=1&&!U.depthTexture},G.prototype.detectSamples=function(U){var L=this.msaaSamples,Y=MSAA_QUALITY$4.NONE;if(U<=1||L===null)return Y;for(var X=0;X<L.length;X++)if(L[X]<=U){Y=L[X];break}return Y===1&&(Y=MSAA_QUALITY$4.NONE),Y},G.prototype.blit=function(U,L,Y){var X=this,W=X.current,z=X.renderer,J=X.gl,Z=X.CONTEXT_UID;if(z.context.webGLVersion===2&&!!W){var ee=W.glFramebuffers[Z];if(!!ee){if(!U){if(!ee.msaaBuffer)return;var te=W.colorTextures[0];if(!te)return;ee.blitFramebuffer||(ee.blitFramebuffer=new Framebuffer(W.width,W.height),ee.blitFramebuffer.addColorTexture(0,te)),U=ee.blitFramebuffer,U.colorTextures[0]!==te&&(U.colorTextures[0]=te,U.dirtyId++,U.dirtyFormat++),(U.width!==W.width||U.height!==W.height)&&(U.width=W.width,U.height=W.height,U.dirtyId++,U.dirtySize++)}L||(L=tempRectangle,L.width=W.width,L.height=W.height),Y||(Y=L);var re=L.width===Y.width&&L.height===Y.height;this.bind(U),J.bindFramebuffer(J.READ_FRAMEBUFFER,ee.framebuffer),J.blitFramebuffer(L.left,L.top,L.right,L.bottom,Y.left,Y.top,Y.right,Y.bottom,J.COLOR_BUFFER_BIT,re?J.NEAREST:J.LINEAR)}}},G.prototype.disposeFramebuffer=function(U,L){var Y=U.glFramebuffers[this.CONTEXT_UID],X=this.gl;if(!!Y){delete U.glFramebuffers[this.CONTEXT_UID];var W=this.managedFramebuffers.indexOf(U);W>=0&&this.managedFramebuffers.splice(W,1),U.disposeRunner.remove(this),L||(X.deleteFramebuffer(Y.framebuffer),Y.msaaBuffer&&X.deleteRenderbuffer(Y.msaaBuffer),Y.stencil&&X.deleteRenderbuffer(Y.stencil)),Y.blitFramebuffer&&Y.blitFramebuffer.dispose()}},G.prototype.disposeAll=function(U){var L=this.managedFramebuffers;this.managedFramebuffers=[];for(var Y=0;Y<L.length;Y++)this.disposeFramebuffer(L[Y],U)},G.prototype.forceStencil=function(){var U=this.current;if(!!U){var L=U.glFramebuffers[this.CONTEXT_UID];if(!(!L||L.stencil)){U.stencil=!0;var Y=U.width,X=U.height,W=this.gl,z=W.createRenderbuffer();W.bindRenderbuffer(W.RENDERBUFFER,z),L.msaaBuffer?W.renderbufferStorageMultisample(W.RENDERBUFFER,L.multisample,W.DEPTH24_STENCIL8,Y,X):W.renderbufferStorage(W.RENDERBUFFER,W.DEPTH_STENCIL,Y,X),L.stencil=z,W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_STENCIL_ATTACHMENT,W.RENDERBUFFER,z)}}},G.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle},G.prototype.destroy=function(){this.renderer=null},G}(),byteSizeMap={5126:4,5123:2,5121:1},GeometrySystem=function(){function G(U){this.renderer=U,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return G.prototype.contextChange=function(){this.disposeAll(!0);var U=this.gl=this.renderer.gl,L=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,L.webGLVersion!==2){var Y=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY&&(Y=null),Y?(U.createVertexArray=function(){return Y.createVertexArrayOES()},U.bindVertexArray=function(W){return Y.bindVertexArrayOES(W)},U.deleteVertexArray=function(W){return Y.deleteVertexArrayOES(W)}):(this.hasVao=!1,U.createVertexArray=function(){return null},U.bindVertexArray=function(){return null},U.deleteVertexArray=function(){return null})}if(L.webGLVersion!==2){var X=U.getExtension("ANGLE_instanced_arrays");X?(U.vertexAttribDivisor=function(W,z){return X.vertexAttribDivisorANGLE(W,z)},U.drawElementsInstanced=function(W,z,J,Z,ee){return X.drawElementsInstancedANGLE(W,z,J,Z,ee)},U.drawArraysInstanced=function(W,z,J,Z){return X.drawArraysInstancedANGLE(W,z,J,Z)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=L.webGLVersion===2||!!L.extensions.uint32ElementIndex},G.prototype.bind=function(U,L){L=L||this.renderer.shader.shader;var Y=this.gl,X=U.glVertexArrayObjects[this.CONTEXT_UID],W=!1;X||(this.managedGeometries[U.id]=U,U.disposeRunner.add(this),U.glVertexArrayObjects[this.CONTEXT_UID]=X={},W=!0);var z=X[L.program.id]||this.initGeometryVao(U,L,W);this._activeGeometry=U,this._activeVao!==z&&(this._activeVao=z,this.hasVao?Y.bindVertexArray(z):this.activateVao(U,L.program)),this.updateBuffers()},G.prototype.reset=function(){this.unbind()},G.prototype.updateBuffers=function(){for(var U=this._activeGeometry,L=this.renderer.buffer,Y=0;Y<U.buffers.length;Y++){var X=U.buffers[Y];L.update(X)}},G.prototype.checkCompatibility=function(U,L){var Y=U.attributes,X=L.attributeData;for(var W in X)if(!Y[W])throw new Error('shader and geometry incompatible, geometry missing the "'+W+'" attribute')},G.prototype.getSignature=function(U,L){var Y=U.attributes,X=L.attributeData,W=["g",U.id];for(var z in Y)X[z]&&W.push(z,X[z].location);return W.join("-")},G.prototype.initGeometryVao=function(U,L,Y){Y===void 0&&(Y=!0);var X=this.gl,W=this.CONTEXT_UID,z=this.renderer.buffer,J=L.program;J.glPrograms[W]||this.renderer.shader.generateProgram(L),this.checkCompatibility(U,J);var Z=this.getSignature(U,J),ee=U.glVertexArrayObjects[this.CONTEXT_UID],te=ee[Z];if(te)return ee[J.id]=te,te;var re=U.buffers,ie=U.attributes,ne={},oe={};for(var se in re)ne[se]=0,oe[se]=0;for(var se in ie)!ie[se].size&&J.attributeData[se]?ie[se].size=J.attributeData[se].size:ie[se].size||console.warn("PIXI Geometry attribute '"+se+"' size cannot be determined (likely the bound shader does not have the attribute)"),ne[ie[se].buffer]+=ie[se].size*byteSizeMap[ie[se].type];for(var se in ie){var ae=ie[se],le=ae.size;ae.stride===void 0&&(ne[ae.buffer]===le*byteSizeMap[ae.type]?ae.stride=0:ae.stride=ne[ae.buffer]),ae.start===void 0&&(ae.start=oe[ae.buffer],oe[ae.buffer]+=le*byteSizeMap[ae.type])}te=X.createVertexArray(),X.bindVertexArray(te);for(var ue=0;ue<re.length;ue++){var ce=re[ue];z.bind(ce),Y&&ce._glBuffers[W].refCount++}return this.activateVao(U,J),this._activeVao=te,ee[J.id]=te,ee[Z]=te,te},G.prototype.disposeGeometry=function(U,L){var Y;if(!!this.managedGeometries[U.id]){delete this.managedGeometries[U.id];var X=U.glVertexArrayObjects[this.CONTEXT_UID],W=this.gl,z=U.buffers,J=(Y=this.renderer)===null||Y===void 0?void 0:Y.buffer;if(U.disposeRunner.remove(this),!!X){if(J)for(var Z=0;Z<z.length;Z++){var ee=z[Z]._glBuffers[this.CONTEXT_UID];ee&&(ee.refCount--,ee.refCount===0&&!L&&J.dispose(z[Z],L))}if(!L){for(var te in X)if(te[0]==="g"){var re=X[te];this._activeVao===re&&this.unbind(),W.deleteVertexArray(re)}}delete U.glVertexArrayObjects[this.CONTEXT_UID]}}},G.prototype.disposeAll=function(U){for(var L=Object.keys(this.managedGeometries),Y=0;Y<L.length;Y++)this.disposeGeometry(this.managedGeometries[L[Y]],U)},G.prototype.activateVao=function(U,L){var Y=this.gl,X=this.CONTEXT_UID,W=this.renderer.buffer,z=U.buffers,J=U.attributes;U.indexBuffer&&W.bind(U.indexBuffer);var Z=null;for(var ee in J){var te=J[ee],re=z[te.buffer],ie=re._glBuffers[X];if(L.attributeData[ee]){Z!==ie&&(W.bind(re),Z=ie);var ne=L.attributeData[ee].location;if(Y.enableVertexAttribArray(ne),Y.vertexAttribPointer(ne,te.size,te.type||Y.FLOAT,te.normalized,te.stride,te.start),te.instance)if(this.hasInstance)Y.vertexAttribDivisor(ne,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},G.prototype.draw=function(U,L,Y,X){var W=this.gl,z=this._activeGeometry;if(z.indexBuffer){var J=z.indexBuffer.data.BYTES_PER_ELEMENT,Z=J===2?W.UNSIGNED_SHORT:W.UNSIGNED_INT;J===2||J===4&&this.canUseUInt32ElementIndex?z.instanced?W.drawElementsInstanced(U,L||z.indexBuffer.data.length,Z,(Y||0)*J,X||1):W.drawElements(U,L||z.indexBuffer.data.length,Z,(Y||0)*J):console.warn("unsupported index buffer type: uint32")}else z.instanced?W.drawArraysInstanced(U,Y,L||z.getSize(),X||1):W.drawArrays(U,Y,L||z.getSize());return this},G.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},G.prototype.destroy=function(){this.renderer=null},G}(),MaskData=function(){function G(U){U===void 0&&(U=null),this.type=MASK_TYPES$4.NONE,this.autoDetect=!0,this.maskObject=U||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=settings$1.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(G.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(U){U?this._filters?this._filters[0]=U:this._filters=[U]:this._filters=null},enumerable:!1,configurable:!0}),G.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES$4.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},G.prototype.copyCountersOrReset=function(U){U?(this._stencilCounter=U._stencilCounter,this._scissorCounter=U._scissorCounter,this._scissorRect=U._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},G}();function compileShader(G,U,L){var Y=G.createShader(U);return G.shaderSource(Y,L),G.compileShader(Y),Y}function logPrettyShaderError(G,U){var L=G.getShaderSource(U).split(`
`).map(function(ee,te){return te+": "+ee}),Y=G.getShaderInfoLog(U),X=Y.split(`
`),W={},z=X.map(function(ee){return parseFloat(ee.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(ee){return ee&&!W[ee]?(W[ee]=!0,!0):!1}),J=[""];z.forEach(function(ee){L[ee-1]="%c"+L[ee-1]+"%c",J.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var Z=L.join(`
`);J[0]=Z,console.error(Y),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,J),console.groupEnd()}function logProgramError(G,U,L,Y){G.getProgramParameter(U,G.LINK_STATUS)||(G.getShaderParameter(L,G.COMPILE_STATUS)||logPrettyShaderError(G,L),G.getShaderParameter(Y,G.COMPILE_STATUS)||logPrettyShaderError(G,Y),console.error("PixiJS Error: Could not initialize shader."),G.getProgramInfoLog(U)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",G.getProgramInfoLog(U)))}function booleanArray(G){for(var U=new Array(G),L=0;L<U.length;L++)U[L]=!1;return U}function defaultValue(G,U){switch(G){case"float":return 0;case"vec2":return new Float32Array(2*U);case"vec3":return new Float32Array(3*U);case"vec4":return new Float32Array(4*U);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*U);case"ivec3":return new Int32Array(3*U);case"ivec4":return new Int32Array(4*U);case"uvec2":return new Uint32Array(2*U);case"uvec3":return new Uint32Array(3*U);case"uvec4":return new Uint32Array(4*U);case"bool":return!1;case"bvec2":return booleanArray(2*U);case"bvec3":return booleanArray(3*U);case"bvec4":return booleanArray(4*U);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var unknownContext={},context=unknownContext;function getTestContext(){if(context===unknownContext||context&&context.isContextLost()){var G=document.createElement("canvas"),U=void 0;settings$1.PREFER_ENV>=ENV$4.WEBGL2&&(U=G.getContext("webgl2",{})),U||(U=G.getContext("webgl",{})||G.getContext("experimental-webgl",{}),U?U.getExtension("WEBGL_draw_buffers"):U=null),context=U}return context}var maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION$4.MEDIUM;var G=getTestContext();if(G&&G.getShaderPrecisionFormat){var U=G.getShaderPrecisionFormat(G.FRAGMENT_SHADER,G.HIGH_FLOAT);maxFragmentPrecision=U.precision?PRECISION$4.HIGH:PRECISION$4.MEDIUM}}return maxFragmentPrecision}function setPrecision(G,U,L){if(G.substring(0,9)!=="precision"){var Y=U;return U===PRECISION$4.HIGH&&L!==PRECISION$4.HIGH&&(Y=PRECISION$4.MEDIUM),"precision "+Y+` float;
`+G}else if(L!==PRECISION$4.HIGH&&G.substring(0,15)==="precision highp")return G.replace("precision highp","precision mediump");return G}var GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(G){return GLSL_TO_SIZE[G]}var GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(G,U){if(!GL_TABLE){var L=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var Y=0;Y<L.length;++Y){var X=L[Y];GL_TABLE[G[X]]=GL_TO_GLSL_TYPES[X]}}return GL_TABLE[U]}var uniformParsers=[{test:function(G){return G.type==="float"&&G.size===1},code:function(G){return`
            if(uv["`+G+'"] !== ud["'+G+`"].value)
            {
                ud["`+G+'"].value = uv["'+G+`"]
                gl.uniform1f(ud["`+G+'"].location, uv["'+G+`"])
            }
            `}},{test:function(G){return(G.type==="sampler2D"||G.type==="samplerCube"||G.type==="sampler2DArray")&&G.size===1&&!G.isArray},code:function(G){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+G+`"], t);

            if(ud["`+G+`"].value !== t)
            {
                ud["`+G+`"].value = t;
                gl.uniform1i(ud["`+G+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(G,U){return G.type==="mat3"&&G.size===1&&U.a!==void 0},code:function(G){return`
            gl.uniformMatrix3fv(ud["`+G+'"].location, false, uv["'+G+`"].toArray(true));
            `},codeUbo:function(G){return`
                var `+G+"_matrix = uv."+G+`.toArray(true);

                data[offset] = `+G+`_matrix[0];
                data[offset+1] = `+G+`_matrix[1];
                data[offset+2] = `+G+`_matrix[2];
        
                data[offset + 4] = `+G+`_matrix[3];
                data[offset + 5] = `+G+`_matrix[4];
                data[offset + 6] = `+G+`_matrix[5];
        
                data[offset + 8] = `+G+`_matrix[6];
                data[offset + 9] = `+G+`_matrix[7];
                data[offset + 10] = `+G+`_matrix[8];
            `}},{test:function(G,U){return G.type==="vec2"&&G.size===1&&U.x!==void 0},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+G+`"].location, v.x, v.y);
                }`},codeUbo:function(G){return`
                v = uv.`+G+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(G){return G.type==="vec2"&&G.size===1},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+G+`"].location, v[0], v[1]);
                }
            `}},{test:function(G,U){return G.type==="vec4"&&G.size===1&&U.width!==void 0},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+G+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(G){return`
                    v = uv.`+G+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(G){return G.type==="vec4"&&G.size===1},code:function(G){return`
                cv = ud["`+G+`"].value;
                v = uv["`+G+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+G+`"].location, v[0], v[1], v[2], v[3])
                }`}}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(G,U){var L,Y=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var X in G.uniforms){var W=U[X];if(!W){!((L=G.uniforms[X])===null||L===void 0)&&L.group&&(G.uniforms[X].ubo?Y.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+X+", '"+X+`');
                    `):Y.push(`
                        renderer.shader.syncUniformGroup(uv.`+X+`, syncData);
                    `));continue}for(var z=G.uniforms[X],J=!1,Z=0;Z<uniformParsers.length;Z++)if(uniformParsers[Z].test(W,z)){Y.push(uniformParsers[Z].code(X,z)),J=!0;break}if(!J){var ee=W.size===1?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS,te=ee[W.type].replace("location",'ud["'+X+'"].location');Y.push(`
            cu = ud["`+X+`"];
            cv = cu.value;
            v = uv["`+X+`"];
            `+te+";")}}return new Function("ud","uv","renderer","syncData",Y.join(`
`))}var fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(G){for(var U="",L=0;L<G;++L)L>0&&(U+=`
else `),L<G-1&&(U+="if(test == "+L+".0){}");return U}function checkMaxIfStatementsInShader(G,U){if(G===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var L=U.createShader(U.FRAGMENT_SHADER);;){var Y=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(G));if(U.shaderSource(L,Y),U.compileShader(L),!U.getShaderParameter(L,U.COMPILE_STATUS))G=G/2|0;else break}return G}var unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{var G=new Function("param1","param2","param3","return param1[param2] === param3;");unsafeEval=G({a:"b"},"a","b")===!0}catch(U){unsafeEval=!1}return unsafeEval}var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,UID$1=0,nameCache={},Program=function(){function G(U,L,Y){Y===void 0&&(Y="pixi-shader"),this.id=UID$1++,this.vertexSrc=U||G.defaultVertexSrc,this.fragmentSrc=L||G.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(Y=Y.replace(/\s+/g,"-"),nameCache[Y]?(nameCache[Y]++,Y+="-"+nameCache[Y]):nameCache[Y]=1,this.vertexSrc="#define SHADER_NAME "+Y+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+Y+`
`+this.fragmentSrc,this.vertexSrc=setPrecision(this.vertexSrc,settings$1.PRECISION_VERTEX,PRECISION$4.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,settings$1.PRECISION_FRAGMENT,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(G,"defaultVertexSrc",{get:function(){return defaultVertex$3},enumerable:!1,configurable:!0}),Object.defineProperty(G,"defaultFragmentSrc",{get:function(){return defaultFragment$2},enumerable:!1,configurable:!0}),G.from=function(U,L,Y){var X=U+L,W=ProgramCache[X];return W||(ProgramCache[X]=W=new G(U,L,Y)),W},G}(),Shader=function(){function G(U,L){this.uniformBindCount=0,this.program=U,L?L instanceof UniformGroup?this.uniformGroup=L:this.uniformGroup=new UniformGroup(L):this.uniformGroup=new UniformGroup({})}return G.prototype.checkUniformExists=function(U,L){if(L.uniforms[U])return!0;for(var Y in L.uniforms){var X=L.uniforms[Y];if(X.group&&this.checkUniformExists(U,X))return!0}return!1},G.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(G.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),G.from=function(U,L,Y){var X=Program.from(U,L);return new G(X,Y)},G}(),BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5,State=function(){function G(){this.data=0,this.blendMode=BLEND_MODES$4.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(G.prototype,"blend",{get:function(){return!!(this.data&1<<BLEND$1)},set:function(U){!!(this.data&1<<BLEND$1)!==U&&(this.data^=1<<BLEND$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"offsets",{get:function(){return!!(this.data&1<<OFFSET$1)},set:function(U){!!(this.data&1<<OFFSET$1)!==U&&(this.data^=1<<OFFSET$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"culling",{get:function(){return!!(this.data&1<<CULLING$1)},set:function(U){!!(this.data&1<<CULLING$1)!==U&&(this.data^=1<<CULLING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"depthTest",{get:function(){return!!(this.data&1<<DEPTH_TEST$1)},set:function(U){!!(this.data&1<<DEPTH_TEST$1)!==U&&(this.data^=1<<DEPTH_TEST$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"depthMask",{get:function(){return!!(this.data&1<<DEPTH_MASK$1)},set:function(U){!!(this.data&1<<DEPTH_MASK$1)!==U&&(this.data^=1<<DEPTH_MASK$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WINDING$1)},set:function(U){!!(this.data&1<<WINDING$1)!==U&&(this.data^=1<<WINDING$1)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"blendMode",{get:function(){return this._blendMode},set:function(U){this.blend=U!==BLEND_MODES$4.NONE,this._blendMode=U},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(U){this.offsets=!!U,this._polygonOffset=U},enumerable:!1,configurable:!0}),G.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},G.for2d=function(){var U=new G;return U.depthTest=!1,U.blend=!0,U},G}(),defaultVertex$2=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,defaultFragment$1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Filter=function(G){__extends$v(U,G);function U(L,Y,X){var W=this,z=Program.from(L||U.defaultVertexSrc,Y||U.defaultFragmentSrc);return W=G.call(this,z,X)||this,W.padding=0,W.resolution=settings$1.FILTER_RESOLUTION,W.multisample=settings$1.FILTER_MULTISAMPLE,W.enabled=!0,W.autoFit=!0,W.state=new State,W}return U.prototype.apply=function(L,Y,X,W,z){L.applyFilter(this,Y,X,W)},Object.defineProperty(U.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(L){this.state.blendMode=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"resolution",{get:function(){return this._resolution},set:function(L){this._resolution=L},enumerable:!1,configurable:!0}),Object.defineProperty(U,"defaultVertexSrc",{get:function(){return defaultVertex$2},enumerable:!1,configurable:!0}),Object.defineProperty(U,"defaultFragmentSrc",{get:function(){return defaultFragment$1},enumerable:!1,configurable:!0}),U}(Shader),vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,fragment=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,tempMat=new Matrix,TextureMatrix=function(){function G(U,L){this._texture=U,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof L=="undefined"?.5:L,this.isSimple=!1}return Object.defineProperty(G.prototype,"texture",{get:function(){return this._texture},set:function(U){this._texture=U,this._textureID=-1},enumerable:!1,configurable:!0}),G.prototype.multiplyUvs=function(U,L){L===void 0&&(L=U);for(var Y=this.mapCoord,X=0;X<U.length;X+=2){var W=U[X],z=U[X+1];L[X]=W*Y.a+z*Y.c+Y.tx,L[X+1]=W*Y.b+z*Y.d+Y.ty}return L},G.prototype.update=function(U){var L=this._texture;if(!L||!L.valid||!U&&this._textureID===L._updateID)return!1;this._textureID=L._updateID,this._updateID++;var Y=L._uvs;this.mapCoord.set(Y.x1-Y.x0,Y.y1-Y.y0,Y.x3-Y.x0,Y.y3-Y.y0,Y.x0,Y.y0);var X=L.orig,W=L.trim;W&&(tempMat.set(X.width/W.width,0,0,X.height/W.height,-W.x/W.width,-W.y/W.height),this.mapCoord.append(tempMat));var z=L.baseTexture,J=this.uClampFrame,Z=this.clampMargin/z.resolution,ee=this.clampOffset;return J[0]=(L._frame.x+Z+ee)/z.width,J[1]=(L._frame.y+Z+ee)/z.height,J[2]=(L._frame.x+L._frame.width-Z+ee)/z.width,J[3]=(L._frame.y+L._frame.height-Z+ee)/z.height,this.uClampOffset[0]=ee/z.realWidth,this.uClampOffset[1]=ee/z.realHeight,this.isSimple=L._frame.width===z.width&&L._frame.height===z.height&&L.rotate===0,!0},G}(),SpriteMaskFilter=function(G){__extends$v(U,G);function U(L,Y,X){var W=this,z=null;return typeof L!="string"&&Y===void 0&&X===void 0&&(z=L,L=void 0,Y=void 0,X=void 0),W=G.call(this,L||vertex,Y||fragment,X)||this,W.maskSprite=z,W.maskMatrix=new Matrix,W}return Object.defineProperty(U.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(L){this._maskSprite=L,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),U.prototype.apply=function(L,Y,X,W){var z=this._maskSprite,J=z._texture;!J.valid||(J.uvMatrix||(J.uvMatrix=new TextureMatrix(J,0)),J.uvMatrix.update(),this.uniforms.npmAlpha=J.baseTexture.alphaMode?0:1,this.uniforms.mask=J,this.uniforms.otherMatrix=L.calculateSpriteMatrix(this.maskMatrix,z).prepend(J.uvMatrix.mapCoord),this.uniforms.alpha=z.worldAlpha,this.uniforms.maskClamp=J.uvMatrix.uClampFrame,L.applyFilter(this,Y,X,W))},U}(Filter),MaskSystem=function(){function G(U){this.renderer=U,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return G.prototype.setMaskStack=function(U){this.maskStack=U,this.renderer.scissor.setMaskStack(U),this.renderer.stencil.setMaskStack(U)},G.prototype.push=function(U,L){var Y=L;if(!Y.isMaskData){var X=this.maskDataPool.pop()||new MaskData;X.pooled=!0,X.maskObject=L,Y=X}var W=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(Y.copyCountersOrReset(W),Y.autoDetect&&this.detect(Y),Y._target=U,Y.type!==MASK_TYPES$4.SPRITE&&this.maskStack.push(Y),Y.enabled)switch(Y.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.push(Y);break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.push(Y);break;case MASK_TYPES$4.SPRITE:Y.copyCountersOrReset(null),this.pushSpriteMask(Y);break}Y.type===MASK_TYPES$4.SPRITE&&this.maskStack.push(Y)},G.prototype.pop=function(U){var L=this.maskStack.pop();if(!(!L||L._target!==U)){if(L.enabled)switch(L.type){case MASK_TYPES$4.SCISSOR:this.renderer.scissor.pop();break;case MASK_TYPES$4.STENCIL:this.renderer.stencil.pop(L.maskObject);break;case MASK_TYPES$4.SPRITE:this.popSpriteMask(L);break}if(L.reset(),L.pooled&&this.maskDataPool.push(L),this.maskStack.length!==0){var Y=this.maskStack[this.maskStack.length-1];Y.type===MASK_TYPES$4.SPRITE&&Y._filters&&(Y._filters[0].maskSprite=Y.maskObject)}}},G.prototype.detect=function(U){var L=U.maskObject;L.isSprite?U.type=MASK_TYPES$4.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(U)?U.type=MASK_TYPES$4.SCISSOR:U.type=MASK_TYPES$4.STENCIL},G.prototype.pushSpriteMask=function(U){var L,Y,X=U.maskObject,W=U._target,z=U._filters;z||(z=this.alphaMaskPool[this.alphaMaskIndex],z||(z=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter]));var J=this.renderer,Z=J.renderTexture,ee,te;if(Z.current){var re=Z.current;ee=U.resolution||re.resolution,te=(L=U.multisample)!==null&&L!==void 0?L:re.multisample}else ee=U.resolution||J.resolution,te=(Y=U.multisample)!==null&&Y!==void 0?Y:J.multisample;z[0].resolution=ee,z[0].multisample=te,z[0].maskSprite=X;var ie=W.filterArea;W.filterArea=X.getBounds(!0),J.filter.push(W,z),W.filterArea=ie,U._filters||this.alphaMaskIndex++},G.prototype.popSpriteMask=function(U){this.renderer.filter.pop(),U._filters?U._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},G.prototype.destroy=function(){this.renderer=null},G}(),AbstractMaskSystem=function(){function G(U){this.renderer=U,this.maskStack=[],this.glConst=0}return G.prototype.getStackLength=function(){return this.maskStack.length},G.prototype.setMaskStack=function(U){var L=this.renderer.gl,Y=this.getStackLength();this.maskStack=U;var X=this.getStackLength();X!==Y&&(X===0?L.disable(this.glConst):(L.enable(this.glConst),this._useCurrent()))},G.prototype._useCurrent=function(){},G.prototype.destroy=function(){this.renderer=null,this.maskStack=null},G}(),tempMatrix$1=new Matrix,ScissorSystem=function(G){__extends$v(U,G);function U(L){var Y=G.call(this,L)||this;return Y.glConst=WebGLRenderingContext.SCISSOR_TEST,Y}return U.prototype.getStackLength=function(){var L=this.maskStack[this.maskStack.length-1];return L?L._scissorCounter:0},U.prototype.calcScissorRect=function(L){if(!L._scissorRectLocal){var Y=L._scissorRect,X=L.maskObject,W=this.renderer,z=W.renderTexture;X.renderable=!0;var J=X.getBounds();this.roundFrameToPixels(J,z.current?z.current.resolution:W.resolution,z.sourceFrame,z.destinationFrame,W.projection.transform),X.renderable=!1,Y&&J.fit(Y),L._scissorRectLocal=J}},U.isMatrixRotated=function(L){if(!L)return!1;var Y=L.a,X=L.b,W=L.c,z=L.d;return(Math.abs(X)>1e-4||Math.abs(W)>1e-4)&&(Math.abs(Y)>1e-4||Math.abs(z)>1e-4)},U.prototype.testScissor=function(L){var Y=L.maskObject;if(!Y.isFastRect||!Y.isFastRect()||U.isMatrixRotated(Y.worldTransform)||U.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(L);var X=L._scissorRectLocal;return X.width>0&&X.height>0},U.prototype.roundFrameToPixels=function(L,Y,X,W,z){U.isMatrixRotated(z)||(z=z?tempMatrix$1.copyFrom(z):tempMatrix$1.identity(),z.translate(-X.x,-X.y).scale(W.width/X.width,W.height/X.height).translate(W.x,W.y),this.renderer.filter.transformAABB(z,L),L.fit(W),L.x=Math.round(L.x*Y),L.y=Math.round(L.y*Y),L.width=Math.round(L.width*Y),L.height=Math.round(L.height*Y))},U.prototype.push=function(L){L._scissorRectLocal||this.calcScissorRect(L);var Y=this.renderer.gl;L._scissorRect||Y.enable(Y.SCISSOR_TEST),L._scissorCounter++,L._scissorRect=L._scissorRectLocal,this._useCurrent()},U.prototype.pop=function(){var L=this.renderer.gl;this.getStackLength()>0?this._useCurrent():L.disable(L.SCISSOR_TEST)},U.prototype._useCurrent=function(){var L=this.maskStack[this.maskStack.length-1]._scissorRect,Y;this.renderer.renderTexture.current?Y=L.y:Y=this.renderer.height-L.height-L.y,this.renderer.gl.scissor(L.x,Y,L.width,L.height)},U}(AbstractMaskSystem),StencilSystem=function(G){__extends$v(U,G);function U(L){var Y=G.call(this,L)||this;return Y.glConst=WebGLRenderingContext.STENCIL_TEST,Y}return U.prototype.getStackLength=function(){var L=this.maskStack[this.maskStack.length-1];return L?L._stencilCounter:0},U.prototype.push=function(L){var Y=L.maskObject,X=this.renderer.gl,W=L._stencilCounter;W===0&&(this.renderer.framebuffer.forceStencil(),X.clearStencil(0),X.clear(X.STENCIL_BUFFER_BIT),X.enable(X.STENCIL_TEST)),L._stencilCounter++,X.colorMask(!1,!1,!1,!1),X.stencilFunc(X.EQUAL,W,4294967295),X.stencilOp(X.KEEP,X.KEEP,X.INCR),Y.renderable=!0,Y.render(this.renderer),this.renderer.batch.flush(),Y.renderable=!1,this._useCurrent()},U.prototype.pop=function(L){var Y=this.renderer.gl;this.getStackLength()===0?Y.disable(Y.STENCIL_TEST):(Y.colorMask(!1,!1,!1,!1),Y.stencilOp(Y.KEEP,Y.KEEP,Y.DECR),L.renderable=!0,L.render(this.renderer),this.renderer.batch.flush(),L.renderable=!1,this._useCurrent())},U.prototype._useCurrent=function(){var L=this.renderer.gl;L.colorMask(!0,!0,!0,!0),L.stencilFunc(L.EQUAL,this.getStackLength(),4294967295),L.stencilOp(L.KEEP,L.KEEP,L.KEEP)},U}(AbstractMaskSystem),ProjectionSystem=function(){function G(U){this.renderer=U,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}return G.prototype.update=function(U,L,Y,X){this.destinationFrame=U||this.destinationFrame||this.defaultFrame,this.sourceFrame=L||this.sourceFrame||U,this.calculateProjection(this.destinationFrame,this.sourceFrame,Y,X),this.transform&&this.projectionMatrix.append(this.transform);var W=this.renderer;W.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,W.globalUniforms.update(),W.shader.shader&&W.shader.syncUniformGroup(W.shader.shader.uniforms.globals)},G.prototype.calculateProjection=function(U,L,Y,X){var W=this.projectionMatrix,z=X?-1:1;W.identity(),W.a=1/L.width*2,W.d=z*(1/L.height*2),W.tx=-1-L.x*W.a,W.ty=-z-L.y*W.d},G.prototype.setTransform=function(U){},G.prototype.destroy=function(){this.renderer=null},G}(),tempRect=new Rectangle,tempRect2=new Rectangle,RenderTextureSystem=function(){function G(U){this.renderer=U,this.clearColor=U._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}return G.prototype.bind=function(U,L,Y){U===void 0&&(U=null);var X=this.renderer;this.current=U;var W,z,J;U?(W=U.baseTexture,J=W.resolution,L||(tempRect.width=U.frame.width,tempRect.height=U.frame.height,L=tempRect),Y||(tempRect2.x=U.frame.x,tempRect2.y=U.frame.y,tempRect2.width=L.width,tempRect2.height=L.height,Y=tempRect2),z=W.framebuffer):(J=X.resolution,L||(tempRect.width=X.screen.width,tempRect.height=X.screen.height,L=tempRect),Y||(Y=tempRect,Y.width=L.width,Y.height=L.height));var Z=this.viewportFrame;Z.x=Y.x*J,Z.y=Y.y*J,Z.width=Y.width*J,Z.height=Y.height*J,U||(Z.y=X.view.height-(Z.y+Z.height)),Z.ceil(),this.renderer.framebuffer.bind(z,Z),this.renderer.projection.update(Y,L,J,!z),U?this.renderer.mask.setMaskStack(W.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(L),this.destinationFrame.copyFrom(Y)},G.prototype.clear=function(U,L){this.current?U=U||this.current.baseTexture.clearColor:U=U||this.clearColor;var Y=this.destinationFrame,X=this.current?this.current.baseTexture:this.renderer.screen,W=Y.width!==X.width||Y.height!==X.height;if(W){var z=this.viewportFrame,J=z.x,Z=z.y,ee=z.width,te=z.height;J=Math.round(J),Z=Math.round(Z),ee=Math.round(ee),te=Math.round(te),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(J,Z,ee,te)}this.renderer.framebuffer.clear(U[0],U[1],U[2],U[3],L),W&&this.renderer.scissor.pop()},G.prototype.resize=function(){this.bind(null)},G.prototype.reset=function(){this.bind(null)},G.prototype.destroy=function(){this.renderer=null},G}();function uboUpdate(G,U,L,Y,X){L.buffer.update(X)}var UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(G){for(var U=G.map(function(Z){return{data:Z,offset:0,dataLen:0,dirty:0}}),L=0,Y=0,X=0,W=0;W<U.length;W++){var z=U[W];if(L=GLSL_TO_STD40_SIZE[z.data.type],z.data.size>1&&(L=Math.max(L,16)*z.data.size),z.dataLen=L,Y%L!==0&&Y<16){var J=Y%L%16;Y+=J,X+=J}Y+L>16?(X=Math.ceil(X/16)*16,z.offset=X,X+=L,Y=L):(z.offset=X,Y+=L,X+=L)}return X=Math.ceil(X/16)*16,{uboElements:U,size:X}}function getUBOData(G,U){var L=[];for(var Y in G)U[Y]&&L.push(U[Y]);return L.sort(function(X,W){return X.index-W.index}),L}function generateUniformBufferSync(G,U){if(!G.autoManage)return{size:0,syncFunc:uboUpdate};for(var L=getUBOData(G.uniforms,U),Y=createUBOElements(L),X=Y.uboElements,W=Y.size,z=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],J=0;J<X.length;J++){for(var Z=X[J],ee=G.uniforms[Z.data.name],te=Z.data.name,re=!1,ie=0;ie<uniformParsers.length;ie++){var ne=uniformParsers[ie];if(ne.codeUbo&&ne.test(Z.data,ee)){z.push("offset = "+Z.offset/4+";",uniformParsers[ie].codeUbo(Z.data.name,ee)),re=!0;break}}if(!re)if(Z.data.size>1){var oe=mapSize(Z.data.type),se=Math.max(GLSL_TO_STD40_SIZE[Z.data.type]/16,1),ae=oe/se,le=(4-ae%4)%4;z.push(`
                cv = ud.`+te+`.value;
                v = uv.`+te+`;
                offset = `+Z.offset/4+`;

                t = 0;

                for(var i=0; i < `+Z.data.size*se+`; i++)
                {
                    for(var j = 0; j < `+ae+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+le+`;
                }

                `)}else{var ue=UBO_TO_SINGLE_SETTERS[Z.data.type];z.push(`
                cv = ud.`+te+`.value;
                v = uv.`+te+`;
                offset = `+Z.offset/4+`;
                `+ue+`;
                `)}}return z.push(`
       renderer.buffer.update(buffer);
    `),{size:W,syncFunc:new Function("ud","uv","renderer","syncData","buffer",z.join(`
`))}}var GLProgram=function(){function G(U,L){this.program=U,this.uniformData=L,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return G.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},G}();function getAttributeData(G,U){for(var L={},Y=U.getProgramParameter(G,U.ACTIVE_ATTRIBUTES),X=0;X<Y;X++){var W=U.getActiveAttrib(G,X);if(W.name.indexOf("gl_")!==0){var z=mapType(U,W.type),J={type:z,name:W.name,size:mapSize(z),location:U.getAttribLocation(G,W.name)};L[W.name]=J}}return L}function getUniformData(G,U){for(var L={},Y=U.getProgramParameter(G,U.ACTIVE_UNIFORMS),X=0;X<Y;X++){var W=U.getActiveUniform(G,X),z=W.name.replace(/\[.*?\]$/,""),J=!!W.name.match(/\[.*?\]$/),Z=mapType(U,W.type);L[z]={name:z,index:X,type:Z,size:W.size,isArray:J,value:defaultValue(Z,W.size)}}return L}function generateProgram(G,U){var L=compileShader(G,G.VERTEX_SHADER,U.vertexSrc),Y=compileShader(G,G.FRAGMENT_SHADER,U.fragmentSrc),X=G.createProgram();if(G.attachShader(X,L),G.attachShader(X,Y),G.linkProgram(X),G.getProgramParameter(X,G.LINK_STATUS)||logProgramError(G,X,L,Y),U.attributeData=getAttributeData(X,G),U.uniformData=getUniformData(X,G),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(U.vertexSrc)){var W=Object.keys(U.attributeData);W.sort(function(te,re){return te>re?1:-1});for(var z=0;z<W.length;z++)U.attributeData[W[z]].location=z,G.bindAttribLocation(X,z,W[z]);G.linkProgram(X)}G.deleteShader(L),G.deleteShader(Y);var J={};for(var z in U.uniformData){var Z=U.uniformData[z];J[z]={location:G.getUniformLocation(X,z),value:defaultValue(Z.type,Z.size)}}var ee=new GLProgram(X,J);return ee}var UID=0,defaultSyncData={textureCount:0,uboCount:0},ShaderSystem=function(){function G(U){this.destroyed=!1,this.renderer=U,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}return G.prototype.systemCheck=function(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},G.prototype.contextChange=function(U){this.gl=U,this.reset()},G.prototype.bind=function(U,L){U.uniforms.globals=this.renderer.globalUniforms;var Y=U.program,X=Y.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(U);return this.shader=U,this.program!==Y&&(this.program=Y,this.gl.useProgram(X.program)),L||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(U.uniformGroup,defaultSyncData)),X},G.prototype.setUniforms=function(U){var L=this.shader.program,Y=L.glPrograms[this.renderer.CONTEXT_UID];L.syncUniforms(Y.uniformData,U,this.renderer)},G.prototype.syncUniformGroup=function(U,L){var Y=this.getGlProgram();(!U.static||U.dirtyId!==Y.uniformDirtyGroups[U.id])&&(Y.uniformDirtyGroups[U.id]=U.dirtyId,this.syncUniforms(U,Y,L))},G.prototype.syncUniforms=function(U,L,Y){var X=U.syncUniforms[this.shader.program.id]||this.createSyncGroups(U);X(L.uniformData,U.uniforms,this.renderer,Y)},G.prototype.createSyncGroups=function(U){var L=this.getSignature(U,this.shader.program.uniformData,"u");return this.cache[L]||(this.cache[L]=generateUniformsSync(U,this.shader.program.uniformData)),U.syncUniforms[this.shader.program.id]=this.cache[L],U.syncUniforms[this.shader.program.id]},G.prototype.syncUniformBufferGroup=function(U,L){var Y=this.getGlProgram();if(!U.static||U.dirtyId!==0||!Y.uniformGroups[U.id]){U.dirtyId=0;var X=Y.uniformGroups[U.id]||this.createSyncBufferGroup(U,Y,L);U.buffer.update(),X(Y.uniformData,U.uniforms,this.renderer,defaultSyncData,U.buffer)}this.renderer.buffer.bindBufferBase(U.buffer,Y.uniformBufferBindings[L])},G.prototype.createSyncBufferGroup=function(U,L,Y){var X=this.renderer.gl;this.renderer.buffer.bind(U.buffer);var W=this.gl.getUniformBlockIndex(L.program,Y);L.uniformBufferBindings[Y]=this.shader.uniformBindCount,X.uniformBlockBinding(L.program,W,this.shader.uniformBindCount),this.shader.uniformBindCount++;var z=this.getSignature(U,this.shader.program.uniformData,"ubo"),J=this._uboCache[z];if(J||(J=this._uboCache[z]=generateUniformBufferSync(U,this.shader.program.uniformData)),U.autoManage){var Z=new Float32Array(J.size/4);U.buffer.update(Z)}return L.uniformGroups[U.id]=J.syncFunc,L.uniformGroups[U.id]},G.prototype.getSignature=function(U,L,Y){var X=U.uniforms,W=[Y+"-"];for(var z in X)W.push(z),L[z]&&W.push(L[z].type);return W.join("-")},G.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},G.prototype.generateProgram=function(U){var L=this.gl,Y=U.program,X=generateProgram(L,Y);return Y.glPrograms[this.renderer.CONTEXT_UID]=X,X},G.prototype.reset=function(){this.program=null,this.shader=null},G.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},G}();function mapWebGLBlendModesToPixi(G,U){return U===void 0&&(U=[]),U[BLEND_MODES$4.NORMAL]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.ADD]=[G.ONE,G.ONE],U[BLEND_MODES$4.MULTIPLY]=[G.DST_COLOR,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SCREEN]=[G.ONE,G.ONE_MINUS_SRC_COLOR,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.OVERLAY]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DARKEN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.LIGHTEN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR_DODGE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR_BURN]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.HARD_LIGHT]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SOFT_LIGHT]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DIFFERENCE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.EXCLUSION]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.HUE]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SATURATION]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.COLOR]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.LUMINOSITY]=[G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.NONE]=[0,0],U[BLEND_MODES$4.NORMAL_NPM]=[G.SRC_ALPHA,G.ONE_MINUS_SRC_ALPHA,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.ADD_NPM]=[G.SRC_ALPHA,G.ONE,G.ONE,G.ONE],U[BLEND_MODES$4.SCREEN_NPM]=[G.SRC_ALPHA,G.ONE_MINUS_SRC_COLOR,G.ONE,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SRC_IN]=[G.DST_ALPHA,G.ZERO],U[BLEND_MODES$4.SRC_OUT]=[G.ONE_MINUS_DST_ALPHA,G.ZERO],U[BLEND_MODES$4.SRC_ATOP]=[G.DST_ALPHA,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DST_OVER]=[G.ONE_MINUS_DST_ALPHA,G.ONE],U[BLEND_MODES$4.DST_IN]=[G.ZERO,G.SRC_ALPHA],U[BLEND_MODES$4.DST_OUT]=[G.ZERO,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.DST_ATOP]=[G.ONE_MINUS_DST_ALPHA,G.SRC_ALPHA],U[BLEND_MODES$4.XOR]=[G.ONE_MINUS_DST_ALPHA,G.ONE_MINUS_SRC_ALPHA],U[BLEND_MODES$4.SUBTRACT]=[G.ONE,G.ONE,G.ONE,G.ONE,G.FUNC_REVERSE_SUBTRACT,G.FUNC_ADD],U}var BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,StateSystem=function(){function G(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES$4.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}return G.prototype.contextChange=function(U){this.gl=U,this.blendModes=mapWebGLBlendModesToPixi(U),this.set(this.defaultState),this.reset()},G.prototype.set=function(U){if(U=U||this.defaultState,this.stateId!==U.data){for(var L=this.stateId^U.data,Y=0;L;)L&1&&this.map[Y].call(this,!!(U.data&1<<Y)),L=L>>1,Y++;this.stateId=U.data}for(var Y=0;Y<this.checks.length;Y++)this.checks[Y](this,U)},G.prototype.forceState=function(U){U=U||this.defaultState;for(var L=0;L<this.map.length;L++)this.map[L].call(this,!!(U.data&1<<L));for(var L=0;L<this.checks.length;L++)this.checks[L](this,U);this.stateId=U.data},G.prototype.setBlend=function(U){this.updateCheck(G.checkBlendMode,U),this.gl[U?"enable":"disable"](this.gl.BLEND)},G.prototype.setOffset=function(U){this.updateCheck(G.checkPolygonOffset,U),this.gl[U?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},G.prototype.setDepthTest=function(U){this.gl[U?"enable":"disable"](this.gl.DEPTH_TEST)},G.prototype.setDepthMask=function(U){this.gl.depthMask(U)},G.prototype.setCullFace=function(U){this.gl[U?"enable":"disable"](this.gl.CULL_FACE)},G.prototype.setFrontFace=function(U){this.gl.frontFace(this.gl[U?"CW":"CCW"])},G.prototype.setBlendMode=function(U){if(U!==this.blendMode){this.blendMode=U;var L=this.blendModes[U],Y=this.gl;L.length===2?Y.blendFunc(L[0],L[1]):Y.blendFuncSeparate(L[0],L[1],L[2],L[3]),L.length===6?(this._blendEq=!0,Y.blendEquationSeparate(L[4],L[5])):this._blendEq&&(this._blendEq=!1,Y.blendEquationSeparate(Y.FUNC_ADD,Y.FUNC_ADD))}},G.prototype.setPolygonOffset=function(U,L){this.gl.polygonOffset(U,L)},G.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},G.prototype.updateCheck=function(U,L){var Y=this.checks.indexOf(U);L&&Y===-1?this.checks.push(U):!L&&Y!==-1&&this.checks.splice(Y,1)},G.checkBlendMode=function(U,L){U.setBlendMode(L.blendMode)},G.checkPolygonOffset=function(U,L){U.setPolygonOffset(1,L.polygonOffset)},G.prototype.destroy=function(){this.gl=null},G}(),TextureGCSystem=function(){function G(U){this.renderer=U,this.count=0,this.checkCount=0,this.maxIdle=settings$1.GC_MAX_IDLE,this.checkCountMax=settings$1.GC_MAX_CHECK_COUNT,this.mode=settings$1.GC_MODE}return G.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==GC_MODES$4.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},G.prototype.run=function(){for(var U=this.renderer.texture,L=U.managedTextures,Y=!1,X=0;X<L.length;X++){var W=L[X];!W.framebuffer&&this.count-W.touched>this.maxIdle&&(U.destroyTexture(W,!0),L[X]=null,Y=!0)}if(Y){for(var z=0,X=0;X<L.length;X++)L[X]!==null&&(L[z++]=L[X]);L.length=z}},G.prototype.unload=function(U){var L=this.renderer.texture,Y=U._texture;Y&&!Y.framebuffer&&L.destroyTexture(Y);for(var X=U.children.length-1;X>=0;X--)this.unload(U.children[X])},G.prototype.destroy=function(){this.renderer=null},G}();function mapTypeAndFormatToInternalFormat(G){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se,ae,le,ue,ce,he,fe,de,_e;return"WebGL2RenderingContext"in globalThis&&G instanceof globalThis.WebGL2RenderingContext?_e=(U={},U[TYPES$4.UNSIGNED_BYTE]=(L={},L[FORMATS$4.RGBA]=G.RGBA8,L[FORMATS$4.RGB]=G.RGB8,L[FORMATS$4.RG]=G.RG8,L[FORMATS$4.RED]=G.R8,L[FORMATS$4.RGBA_INTEGER]=G.RGBA8UI,L[FORMATS$4.RGB_INTEGER]=G.RGB8UI,L[FORMATS$4.RG_INTEGER]=G.RG8UI,L[FORMATS$4.RED_INTEGER]=G.R8UI,L[FORMATS$4.ALPHA]=G.ALPHA,L[FORMATS$4.LUMINANCE]=G.LUMINANCE,L[FORMATS$4.LUMINANCE_ALPHA]=G.LUMINANCE_ALPHA,L),U[TYPES$4.BYTE]=(Y={},Y[FORMATS$4.RGBA]=G.RGBA8_SNORM,Y[FORMATS$4.RGB]=G.RGB8_SNORM,Y[FORMATS$4.RG]=G.RG8_SNORM,Y[FORMATS$4.RED]=G.R8_SNORM,Y[FORMATS$4.RGBA_INTEGER]=G.RGBA8I,Y[FORMATS$4.RGB_INTEGER]=G.RGB8I,Y[FORMATS$4.RG_INTEGER]=G.RG8I,Y[FORMATS$4.RED_INTEGER]=G.R8I,Y),U[TYPES$4.UNSIGNED_SHORT]=(X={},X[FORMATS$4.RGBA_INTEGER]=G.RGBA16UI,X[FORMATS$4.RGB_INTEGER]=G.RGB16UI,X[FORMATS$4.RG_INTEGER]=G.RG16UI,X[FORMATS$4.RED_INTEGER]=G.R16UI,X[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT16,X),U[TYPES$4.SHORT]=(W={},W[FORMATS$4.RGBA_INTEGER]=G.RGBA16I,W[FORMATS$4.RGB_INTEGER]=G.RGB16I,W[FORMATS$4.RG_INTEGER]=G.RG16I,W[FORMATS$4.RED_INTEGER]=G.R16I,W),U[TYPES$4.UNSIGNED_INT]=(z={},z[FORMATS$4.RGBA_INTEGER]=G.RGBA32UI,z[FORMATS$4.RGB_INTEGER]=G.RGB32UI,z[FORMATS$4.RG_INTEGER]=G.RG32UI,z[FORMATS$4.RED_INTEGER]=G.R32UI,z[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT24,z),U[TYPES$4.INT]=(J={},J[FORMATS$4.RGBA_INTEGER]=G.RGBA32I,J[FORMATS$4.RGB_INTEGER]=G.RGB32I,J[FORMATS$4.RG_INTEGER]=G.RG32I,J[FORMATS$4.RED_INTEGER]=G.R32I,J),U[TYPES$4.FLOAT]=(Z={},Z[FORMATS$4.RGBA]=G.RGBA32F,Z[FORMATS$4.RGB]=G.RGB32F,Z[FORMATS$4.RG]=G.RG32F,Z[FORMATS$4.RED]=G.R32F,Z[FORMATS$4.DEPTH_COMPONENT]=G.DEPTH_COMPONENT32F,Z),U[TYPES$4.HALF_FLOAT]=(ee={},ee[FORMATS$4.RGBA]=G.RGBA16F,ee[FORMATS$4.RGB]=G.RGB16F,ee[FORMATS$4.RG]=G.RG16F,ee[FORMATS$4.RED]=G.R16F,ee),U[TYPES$4.UNSIGNED_SHORT_5_6_5]=(te={},te[FORMATS$4.RGB]=G.RGB565,te),U[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(re={},re[FORMATS$4.RGBA]=G.RGBA4,re),U[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(ie={},ie[FORMATS$4.RGBA]=G.RGB5_A1,ie),U[TYPES$4.UNSIGNED_INT_2_10_10_10_REV]=(ne={},ne[FORMATS$4.RGBA]=G.RGB10_A2,ne[FORMATS$4.RGBA_INTEGER]=G.RGB10_A2UI,ne),U[TYPES$4.UNSIGNED_INT_10F_11F_11F_REV]=(oe={},oe[FORMATS$4.RGB]=G.R11F_G11F_B10F,oe),U[TYPES$4.UNSIGNED_INT_5_9_9_9_REV]=(se={},se[FORMATS$4.RGB]=G.RGB9_E5,se),U[TYPES$4.UNSIGNED_INT_24_8]=(ae={},ae[FORMATS$4.DEPTH_STENCIL]=G.DEPTH24_STENCIL8,ae),U[TYPES$4.FLOAT_32_UNSIGNED_INT_24_8_REV]=(le={},le[FORMATS$4.DEPTH_STENCIL]=G.DEPTH32F_STENCIL8,le),U):_e=(ue={},ue[TYPES$4.UNSIGNED_BYTE]=(ce={},ce[FORMATS$4.RGBA]=G.RGBA,ce[FORMATS$4.RGB]=G.RGB,ce[FORMATS$4.ALPHA]=G.ALPHA,ce[FORMATS$4.LUMINANCE]=G.LUMINANCE,ce[FORMATS$4.LUMINANCE_ALPHA]=G.LUMINANCE_ALPHA,ce),ue[TYPES$4.UNSIGNED_SHORT_5_6_5]=(he={},he[FORMATS$4.RGB]=G.RGB,he),ue[TYPES$4.UNSIGNED_SHORT_4_4_4_4]=(fe={},fe[FORMATS$4.RGBA]=G.RGBA,fe),ue[TYPES$4.UNSIGNED_SHORT_5_5_5_1]=(de={},de[FORMATS$4.RGBA]=G.RGBA,de),ue),_e}var GLTexture=function(){function G(U){this.texture=U,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES$4.UNSIGNED_BYTE,this.internalFormat=FORMATS$4.RGBA,this.samplerType=0}return G}(),TextureSystem=function(){function G(U){this.renderer=U,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}return G.prototype.contextChange=function(){var U=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(U);var L=U.getParameter(U.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=L;for(var Y=0;Y<L;Y++)this.boundTextures[Y]=null;this.emptyTextures={};var X=new GLTexture(U.createTexture());U.bindTexture(U.TEXTURE_2D,X.texture),U.texImage2D(U.TEXTURE_2D,0,U.RGBA,1,1,0,U.RGBA,U.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[U.TEXTURE_2D]=X,this.emptyTextures[U.TEXTURE_CUBE_MAP]=new GLTexture(U.createTexture()),U.bindTexture(U.TEXTURE_CUBE_MAP,this.emptyTextures[U.TEXTURE_CUBE_MAP].texture);for(var Y=0;Y<6;Y++)U.texImage2D(U.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,U.RGBA,1,1,0,U.RGBA,U.UNSIGNED_BYTE,null);U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MAG_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_CUBE_MAP,U.TEXTURE_MIN_FILTER,U.LINEAR);for(var Y=0;Y<this.boundTextures.length;Y++)this.bind(null,Y)},G.prototype.bind=function(U,L){L===void 0&&(L=0);var Y=this.gl;if(U=U==null?void 0:U.castToBaseTexture(),U&&U.valid&&!U.parentTextureArray){U.touched=this.renderer.textureGC.count;var X=U._glTextures[this.CONTEXT_UID]||this.initTexture(U);this.boundTextures[L]!==U&&(this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),Y.bindTexture(U.target,X.texture)),X.dirtyId!==U.dirtyId&&(this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),this.updateTexture(U)),this.boundTextures[L]=U}else this.currentLocation!==L&&(this.currentLocation=L,Y.activeTexture(Y.TEXTURE0+L)),Y.bindTexture(Y.TEXTURE_2D,this.emptyTextures[Y.TEXTURE_2D].texture),this.boundTextures[L]=null},G.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var U=0;U<this.boundTextures.length;U++)this.boundTextures[U]=this.unknownTexture},G.prototype.unbind=function(U){var L=this,Y=L.gl,X=L.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var W=0;W<X.length;W++)X[W]===this.unknownTexture&&this.bind(null,W)}for(var W=0;W<X.length;W++)X[W]===U&&(this.currentLocation!==W&&(Y.activeTexture(Y.TEXTURE0+W),this.currentLocation=W),Y.bindTexture(U.target,this.emptyTextures[U.target].texture),X[W]=null)},G.prototype.ensureSamplerType=function(U){var L=this,Y=L.boundTextures,X=L.hasIntegerTextures,W=L.CONTEXT_UID;if(!!X)for(var z=U-1;z>=0;--z){var J=Y[z];if(J){var Z=J._glTextures[W];Z.samplerType!==SAMPLER_TYPES$4.FLOAT&&this.renderer.texture.unbind(J)}}},G.prototype.initTexture=function(U){var L=new GLTexture(this.gl.createTexture());return L.dirtyId=-1,U._glTextures[this.CONTEXT_UID]=L,this.managedTextures.push(U),U.on("dispose",this.destroyTexture,this),L},G.prototype.initTextureType=function(U,L){var Y,X;L.internalFormat=(X=(Y=this.internalFormats[U.type])===null||Y===void 0?void 0:Y[U.format])!==null&&X!==void 0?X:U.format,this.webGLVersion===2&&U.type===TYPES$4.HALF_FLOAT?L.type=this.gl.HALF_FLOAT:L.type=U.type},G.prototype.updateTexture=function(U){var L=U._glTextures[this.CONTEXT_UID];if(!!L){var Y=this.renderer;if(this.initTextureType(U,L),U.resource&&U.resource.upload(Y,U,L))L.samplerType!==SAMPLER_TYPES$4.FLOAT&&(this.hasIntegerTextures=!0);else{var X=U.realWidth,W=U.realHeight,z=Y.gl;(L.width!==X||L.height!==W||L.dirtyId<0)&&(L.width=X,L.height=W,z.texImage2D(U.target,0,L.internalFormat,X,W,0,U.format,L.type,null))}U.dirtyStyleId!==L.dirtyStyleId&&this.updateTextureStyle(U),L.dirtyId=U.dirtyId}},G.prototype.destroyTexture=function(U,L){var Y=this.gl;if(U=U.castToBaseTexture(),U._glTextures[this.CONTEXT_UID]&&(this.unbind(U),Y.deleteTexture(U._glTextures[this.CONTEXT_UID].texture),U.off("dispose",this.destroyTexture,this),delete U._glTextures[this.CONTEXT_UID],!L)){var X=this.managedTextures.indexOf(U);X!==-1&&removeItems(this.managedTextures,X,1)}},G.prototype.updateTextureStyle=function(U){var L=U._glTextures[this.CONTEXT_UID];!L||((U.mipmap===MIPMAP_MODES$4.POW2||this.webGLVersion!==2)&&!U.isPowerOfTwo?L.mipmap=!1:L.mipmap=U.mipmap>=1,this.webGLVersion!==2&&!U.isPowerOfTwo?L.wrapMode=WRAP_MODES$4.CLAMP:L.wrapMode=U.wrapMode,U.resource&&U.resource.style(this.renderer,U,L)||this.setStyle(U,L),L.dirtyStyleId=U.dirtyStyleId)},G.prototype.setStyle=function(U,L){var Y=this.gl;if(L.mipmap&&U.mipmap!==MIPMAP_MODES$4.ON_MANUAL&&Y.generateMipmap(U.target),Y.texParameteri(U.target,Y.TEXTURE_WRAP_S,L.wrapMode),Y.texParameteri(U.target,Y.TEXTURE_WRAP_T,L.wrapMode),L.mipmap){Y.texParameteri(U.target,Y.TEXTURE_MIN_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR_MIPMAP_LINEAR:Y.NEAREST_MIPMAP_NEAREST);var X=this.renderer.context.extensions.anisotropicFiltering;if(X&&U.anisotropicLevel>0&&U.scaleMode===SCALE_MODES$4.LINEAR){var W=Math.min(U.anisotropicLevel,Y.getParameter(X.MAX_TEXTURE_MAX_ANISOTROPY_EXT));Y.texParameterf(U.target,X.TEXTURE_MAX_ANISOTROPY_EXT,W)}}else Y.texParameteri(U.target,Y.TEXTURE_MIN_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR:Y.NEAREST);Y.texParameteri(U.target,Y.TEXTURE_MAG_FILTER,U.scaleMode===SCALE_MODES$4.LINEAR?Y.LINEAR:Y.NEAREST)},G.prototype.destroy=function(){this.renderer=null},G}(),_systems={__proto__:null,FilterSystem,BatchSystem,ContextSystem,FramebufferSystem,GeometrySystem,MaskSystem,ScissorSystem,StencilSystem,ProjectionSystem,RenderTextureSystem,ShaderSystem,StateSystem,TextureGCSystem,TextureSystem},tempMatrix$3=new Matrix,AbstractRenderer=function(G){__extends$v(U,G);function U(L,Y){L===void 0&&(L=RENDERER_TYPE$4.UNKNOWN);var X=G.call(this)||this;return Y=Object.assign({},settings$1.RENDER_OPTIONS,Y),X.options=Y,X.type=L,X.screen=new Rectangle(0,0,Y.width,Y.height),X.view=Y.view||document.createElement("canvas"),X.resolution=Y.resolution||settings$1.RESOLUTION,X.useContextAlpha=Y.useContextAlpha,X.autoDensity=!!Y.autoDensity,X.preserveDrawingBuffer=Y.preserveDrawingBuffer,X.clearBeforeRender=Y.clearBeforeRender,X._backgroundColor=0,X._backgroundColorRgba=[0,0,0,1],X._backgroundColorString="#000000",X.backgroundColor=Y.backgroundColor||X._backgroundColor,X.backgroundAlpha=Y.backgroundAlpha,Y.transparent!==void 0&&(deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),X.useContextAlpha=Y.transparent,X.backgroundAlpha=Y.transparent?0:1),X._lastObjectRendered=null,X.plugins={},X}return U.prototype.initPlugins=function(L){for(var Y in L)this.plugins[Y]=new L[Y](this)},Object.defineProperty(U.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),U.prototype.resize=function(L,Y){this.view.width=Math.round(L*this.resolution),this.view.height=Math.round(Y*this.resolution);var X=this.view.width/this.resolution,W=this.view.height/this.resolution;this.screen.width=X,this.screen.height=W,this.autoDensity&&(this.view.style.width=X+"px",this.view.style.height=W+"px"),this.emit("resize",X,W)},U.prototype.generateTexture=function(L,Y,X,W){Y===void 0&&(Y={}),typeof Y=="number"&&(deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),Y={scaleMode:Y,resolution:X,region:W});var z=Y.region,J=__rest(Y,["region"]);W=z||L.getLocalBounds(null,!0),W.width===0&&(W.width=1),W.height===0&&(W.height=1);var Z=RenderTexture.create(__assign$t({width:W.width,height:W.height},J));return tempMatrix$3.tx=-W.x,tempMatrix$3.ty=-W.y,this.render(L,{renderTexture:Z,clear:!1,transform:tempMatrix$3,skipUpdateTransform:!!L.parent}),Z},U.prototype.destroy=function(L){for(var Y in this.plugins)this.plugins[Y].destroy(),this.plugins[Y]=null;L&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var X=this;X.plugins=null,X.type=RENDERER_TYPE$4.UNKNOWN,X.view=null,X.screen=null,X._tempDisplayObjectParent=null,X.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(U.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(L){this._backgroundColor=L,this._backgroundColorString=hex2string(L),hex2rgb(L,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(L){this._backgroundColorRgba[3]=L},enumerable:!1,configurable:!0}),U}(eventemitter3$1),GLBuffer=function(){function G(U){this.buffer=U||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return G}(),BufferSystem=function(){function G(U){this.renderer=U,this.managedBuffers={},this.boundBufferBases={}}return G.prototype.destroy=function(){this.renderer=null},G.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},G.prototype.bind=function(U){var L=this,Y=L.gl,X=L.CONTEXT_UID,W=U._glBuffers[X]||this.createGLBuffer(U);Y.bindBuffer(U.type,W.buffer)},G.prototype.bindBufferBase=function(U,L){var Y=this,X=Y.gl,W=Y.CONTEXT_UID;if(this.boundBufferBases[L]!==U){var z=U._glBuffers[W]||this.createGLBuffer(U);this.boundBufferBases[L]=U,X.bindBufferBase(X.UNIFORM_BUFFER,L,z.buffer)}},G.prototype.bindBufferRange=function(U,L,Y){var X=this,W=X.gl,z=X.CONTEXT_UID;Y=Y||0;var J=U._glBuffers[z]||this.createGLBuffer(U);W.bindBufferRange(W.UNIFORM_BUFFER,L||0,J.buffer,Y*256,256)},G.prototype.update=function(U){var L=this,Y=L.gl,X=L.CONTEXT_UID,W=U._glBuffers[X];if(U._updateID!==W.updateID)if(W.updateID=U._updateID,Y.bindBuffer(U.type,W.buffer),W.byteLength>=U.data.byteLength)Y.bufferSubData(U.type,0,U.data);else{var z=U.static?Y.STATIC_DRAW:Y.DYNAMIC_DRAW;W.byteLength=U.data.byteLength,Y.bufferData(U.type,U.data,z)}},G.prototype.dispose=function(U,L){if(!!this.managedBuffers[U.id]){delete this.managedBuffers[U.id];var Y=U._glBuffers[this.CONTEXT_UID],X=this.gl;U.disposeRunner.remove(this),Y&&(L||X.deleteBuffer(Y.buffer),delete U._glBuffers[this.CONTEXT_UID])}},G.prototype.disposeAll=function(U){for(var L=Object.keys(this.managedBuffers),Y=0;Y<L.length;Y++)this.dispose(this.managedBuffers[L[Y]],U)},G.prototype.createGLBuffer=function(U){var L=this,Y=L.CONTEXT_UID,X=L.gl;return U._glBuffers[Y]=new GLBuffer(X.createBuffer()),this.managedBuffers[U.id]=U,U.disposeRunner.add(this),U._glBuffers[Y]},G}();(function(G){__extends$v(U,G);function U(L){var Y=G.call(this,RENDERER_TYPE$4.WEBGL,L)||this;return L=Y.options,Y.gl=null,Y.CONTEXT_UID=0,Y.runners={destroy:new Runner("destroy"),contextChange:new Runner("contextChange"),reset:new Runner("reset"),update:new Runner("update"),postrender:new Runner("postrender"),prerender:new Runner("prerender"),resize:new Runner("resize")},Y.runners.contextChange.add(Y),Y.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0),Y.addSystem(MaskSystem,"mask").addSystem(ContextSystem,"context").addSystem(StateSystem,"state").addSystem(ShaderSystem,"shader").addSystem(TextureSystem,"texture").addSystem(BufferSystem,"buffer").addSystem(GeometrySystem,"geometry").addSystem(FramebufferSystem,"framebuffer").addSystem(ScissorSystem,"scissor").addSystem(StencilSystem,"stencil").addSystem(ProjectionSystem,"projection").addSystem(TextureGCSystem,"textureGC").addSystem(FilterSystem,"filter").addSystem(RenderTextureSystem,"renderTexture").addSystem(BatchSystem,"batch"),Y.initPlugins(U.__plugins),Y.multisample=void 0,L.context?Y.context.initFromContext(L.context):Y.context.initFromOptions({alpha:!!Y.useContextAlpha,antialias:L.antialias,premultipliedAlpha:Y.useContextAlpha&&Y.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:L.preserveDrawingBuffer,powerPreference:Y.options.powerPreference}),Y.renderingToScreen=!0,sayHello(Y.context.webGLVersion===2?"WebGL 2":"WebGL 1"),Y.resize(Y.options.width,Y.options.height),Y}return U.create=function(L){if(isWebGLSupported())return new U(L);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},U.prototype.contextChange=function(){var L=this.gl,Y;if(this.context.webGLVersion===1){var X=L.getParameter(L.FRAMEBUFFER_BINDING);L.bindFramebuffer(L.FRAMEBUFFER,null),Y=L.getParameter(L.SAMPLES),L.bindFramebuffer(L.FRAMEBUFFER,X)}else{var X=L.getParameter(L.DRAW_FRAMEBUFFER_BINDING);L.bindFramebuffer(L.DRAW_FRAMEBUFFER,null),Y=L.getParameter(L.SAMPLES),L.bindFramebuffer(L.DRAW_FRAMEBUFFER,X)}Y>=MSAA_QUALITY$4.HIGH?this.multisample=MSAA_QUALITY$4.HIGH:Y>=MSAA_QUALITY$4.MEDIUM?this.multisample=MSAA_QUALITY$4.MEDIUM:Y>=MSAA_QUALITY$4.LOW?this.multisample=MSAA_QUALITY$4.LOW:this.multisample=MSAA_QUALITY$4.NONE},U.prototype.addSystem=function(L,Y){var X=new L(this);if(this[Y])throw new Error('Whoops! The name "'+Y+'" is already in use');this[Y]=X;for(var W in this.runners)this.runners[W].add(X);return this},U.prototype.render=function(L,Y){var X,W,z,J;if(Y&&(Y instanceof RenderTexture?(deprecation("6.0.0","Renderer#render arguments changed, use options instead."),X=Y,W=arguments[2],z=arguments[3],J=arguments[4]):(X=Y.renderTexture,W=Y.clear,z=Y.transform,J=Y.skipUpdateTransform)),this.renderingToScreen=!X,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=z,!this.context.isLost){if(X||(this._lastObjectRendered=L),!J){var Z=L.enableTempParent();L.updateTransform(),L.disableTempParent(Z)}this.renderTexture.bind(X),this.batch.currentRenderer.start(),(W!==void 0?W:this.clearBeforeRender)&&this.renderTexture.clear(),L.render(this),this.batch.currentRenderer.flush(),X&&X.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},U.prototype.generateTexture=function(L,Y,X,W){Y===void 0&&(Y={});var z=G.prototype.generateTexture.call(this,L,Y,X,W);return this.framebuffer.blit(),z},U.prototype.resize=function(L,Y){G.prototype.resize.call(this,L,Y),this.runners.resize.emit(this.screen.height,this.screen.width)},U.prototype.reset=function(){return this.runners.reset.emit(),this},U.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},U.prototype.destroy=function(L){this.runners.destroy.emit();for(var Y in this.runners)this.runners[Y].destroy();G.prototype.destroy.call(this,L),this.gl=null},Object.defineProperty(U.prototype,"extract",{get:function(){return deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),U.registerPlugin=function(L,Y){U.__plugins=U.__plugins||{},U.__plugins[L]=Y},U})(AbstractRenderer);var BatchDrawCall=function(){function G(){this.texArray=null,this.blend=0,this.type=DRAW_MODES$4.TRIANGLES,this.start=0,this.size=0,this.data=null}return G}(),BatchTextureArray=function(){function G(){this.elements=[],this.ids=[],this.count=0}return G.prototype.clear=function(){for(var U=0;U<this.count;U++)this.elements[U]=null;this.count=0},G}(),ViewableBuffer=function(){function G(U){typeof U=="number"?this.rawBinaryData=new ArrayBuffer(U):U instanceof Uint8Array?this.rawBinaryData=U.buffer:this.rawBinaryData=U,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(G.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),G.prototype.view=function(U){return this[U+"View"]},G.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},G.sizeOf=function(U){switch(U){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(U+" isn't a valid view type")}},G}(),AbstractBatchRenderer=function(G){__extends$v(U,G);function U(L){var Y=G.call(this,L)||this;return Y.shaderGenerator=null,Y.geometryClass=null,Y.vertexSize=null,Y.state=State.for2d(),Y.size=settings$1.SPRITE_BATCH_SIZE*4,Y._vertexCount=0,Y._indexCount=0,Y._bufferedElements=[],Y._bufferedTextures=[],Y._bufferSize=0,Y._shader=null,Y._packedGeometries=[],Y._packedGeometryPoolSize=2,Y._flushId=0,Y._aBuffers={},Y._iBuffers={},Y.MAX_TEXTURES=1,Y.renderer.on("prerender",Y.onPrerender,Y),L.runners.contextChange.add(Y),Y._dcIndex=0,Y._aIndex=0,Y._iIndex=0,Y._attributeBuffer=null,Y._indexBuffer=null,Y._tempBoundTextures=[],Y}return U.prototype.contextChange=function(){var L=this.renderer.gl;settings$1.PREFER_ENV===ENV$4.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(L.getParameter(L.MAX_TEXTURE_IMAGE_UNITS),settings$1.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=checkMaxIfStatementsInShader(this.MAX_TEXTURES,L)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var Y=0;Y<this._packedGeometryPoolSize;Y++)this._packedGeometries[Y]=new this.geometryClass;this.initFlushBuffers()},U.prototype.initFlushBuffers=function(){for(var L=U._drawCallPool,Y=U._textureArrayPool,X=this.size/4,W=Math.floor(X/this.MAX_TEXTURES)+1;L.length<X;)L.push(new BatchDrawCall);for(;Y.length<W;)Y.push(new BatchTextureArray);for(var z=0;z<this.MAX_TEXTURES;z++)this._tempBoundTextures[z]=null},U.prototype.onPrerender=function(){this._flushId=0},U.prototype.render=function(L){!L._texture.valid||(this._vertexCount+L.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=L.vertexData.length/2,this._indexCount+=L.indices.length,this._bufferedTextures[this._bufferSize]=L._texture.baseTexture,this._bufferedElements[this._bufferSize++]=L)},U.prototype.buildTexturesAndDrawCalls=function(){var L=this,Y=L._bufferedTextures,X=L.MAX_TEXTURES,W=U._textureArrayPool,z=this.renderer.batch,J=this._tempBoundTextures,Z=this.renderer.textureGC.count,ee=++BaseTexture._globalBatch,te=0,re=W[0],ie=0;z.copyBoundTextures(J,X);for(var ne=0;ne<this._bufferSize;++ne){var oe=Y[ne];Y[ne]=null,oe._batchEnabled!==ee&&(re.count>=X&&(z.boundArray(re,J,ee,X),this.buildDrawCalls(re,ie,ne),ie=ne,re=W[++te],++ee),oe._batchEnabled=ee,oe.touched=Z,re.elements[re.count++]=oe)}re.count>0&&(z.boundArray(re,J,ee,X),this.buildDrawCalls(re,ie,this._bufferSize),++te,++ee);for(var ne=0;ne<J.length;ne++)J[ne]=null;BaseTexture._globalBatch=ee},U.prototype.buildDrawCalls=function(L,Y,X){var W=this,z=W._bufferedElements,J=W._attributeBuffer,Z=W._indexBuffer,ee=W.vertexSize,te=U._drawCallPool,re=this._dcIndex,ie=this._aIndex,ne=this._iIndex,oe=te[re];oe.start=this._iIndex,oe.texArray=L;for(var se=Y;se<X;++se){var ae=z[se],le=ae._texture.baseTexture,ue=premultiplyBlendMode[le.alphaMode?1:0][ae.blendMode];z[se]=null,Y<se&&oe.blend!==ue&&(oe.size=ne-oe.start,Y=se,oe=te[++re],oe.texArray=L,oe.start=ne),this.packInterleavedGeometry(ae,J,Z,ie,ne),ie+=ae.vertexData.length/2*ee,ne+=ae.indices.length,oe.blend=ue}Y<X&&(oe.size=ne-oe.start,++re),this._dcIndex=re,this._aIndex=ie,this._iIndex=ne},U.prototype.bindAndClearTexArray=function(L){for(var Y=this.renderer.texture,X=0;X<L.count;X++)Y.bind(L.elements[X],L.ids[X]),L.elements[X]=null;L.count=0},U.prototype.updateGeometry=function(){var L=this,Y=L._packedGeometries,X=L._attributeBuffer,W=L._indexBuffer;settings$1.CAN_UPLOAD_SAME_BUFFER?(Y[this._flushId]._buffer.update(X.rawBinaryData),Y[this._flushId]._indexBuffer.update(W),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,Y[this._flushId]=new this.geometryClass),Y[this._flushId]._buffer.update(X.rawBinaryData),Y[this._flushId]._indexBuffer.update(W),this.renderer.geometry.bind(Y[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},U.prototype.drawBatches=function(){for(var L=this._dcIndex,Y=this.renderer,X=Y.gl,W=Y.state,z=U._drawCallPool,J=null,Z=0;Z<L;Z++){var ee=z[Z],te=ee.texArray,re=ee.type,ie=ee.size,ne=ee.start,oe=ee.blend;J!==te&&(J=te,this.bindAndClearTexArray(te)),this.state.blendMode=oe,W.set(this.state),X.drawElements(re,ie,X.UNSIGNED_SHORT,ne*2)}},U.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},U.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),settings$1.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},U.prototype.stop=function(){this.flush()},U.prototype.destroy=function(){for(var L=0;L<this._packedGeometryPoolSize;L++)this._packedGeometries[L]&&this._packedGeometries[L].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),G.prototype.destroy.call(this)},U.prototype.getAttributeBuffer=function(L){var Y=nextPow2(Math.ceil(L/8)),X=log2(Y),W=Y*8;this._aBuffers.length<=X&&(this._iBuffers.length=X+1);var z=this._aBuffers[W];return z||(this._aBuffers[W]=z=new ViewableBuffer(W*this.vertexSize*4)),z},U.prototype.getIndexBuffer=function(L){var Y=nextPow2(Math.ceil(L/12)),X=log2(Y),W=Y*12;this._iBuffers.length<=X&&(this._iBuffers.length=X+1);var z=this._iBuffers[X];return z||(this._iBuffers[X]=z=new Uint16Array(W)),z},U.prototype.packInterleavedGeometry=function(L,Y,X,W,z){for(var J=Y.uint32View,Z=Y.float32View,ee=W/this.vertexSize,te=L.uvs,re=L.indices,ie=L.vertexData,ne=L._texture.baseTexture._batchLocation,oe=Math.min(L.worldAlpha,1),se=oe<1&&L._texture.baseTexture.alphaMode?premultiplyTint(L._tintRGB,oe):L._tintRGB+(oe*255<<24),ae=0;ae<ie.length;ae+=2)Z[W++]=ie[ae],Z[W++]=ie[ae+1],Z[W++]=te[ae],Z[W++]=te[ae+1],J[W++]=se,Z[W++]=ne;for(var ae=0;ae<re.length;ae++)X[z++]=ee+re[ae]},U._drawCallPool=[],U._textureArrayPool=[],U}(ObjectRenderer),BatchShaderGenerator=function(){function G(U,L){if(this.vertexSrc=U,this.fragTemplate=L,this.programCache={},this.defaultGroupCache={},L.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(L.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return G.prototype.generateShader=function(U){if(!this.programCache[U]){for(var L=new Int32Array(U),Y=0;Y<U;Y++)L[Y]=Y;this.defaultGroupCache[U]=UniformGroup.from({uSamplers:L},!0);var X=this.fragTemplate;X=X.replace(/%count%/gi,""+U),X=X.replace(/%forloop%/gi,this.generateSampleSrc(U)),this.programCache[U]=new Program(this.vertexSrc,X)}var W={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[U]};return new Shader(this.programCache[U],W)},G.prototype.generateSampleSrc=function(U){var L="";L+=`
`,L+=`
`;for(var Y=0;Y<U;Y++)Y>0&&(L+=`
else `),Y<U-1&&(L+="if(vTextureId < "+Y+".5)"),L+=`
{`,L+=`
	color = texture2D(uSamplers[`+Y+"], vTextureCoord);",L+=`
}`;return L+=`
`,L+=`
`,L},G}(),BatchGeometry=function(G){__extends$v(U,G);function U(L){L===void 0&&(L=!1);var Y=G.call(this)||this;return Y._buffer=new Buffer(null,L,!1),Y._indexBuffer=new Buffer(null,L,!0),Y.addAttribute("aVertexPosition",Y._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aTextureCoord",Y._buffer,2,!1,TYPES$4.FLOAT).addAttribute("aColor",Y._buffer,4,!0,TYPES$4.UNSIGNED_BYTE).addAttribute("aTextureId",Y._buffer,1,!0,TYPES$4.FLOAT).addIndex(Y._indexBuffer),Y}return U}(Geometry),defaultVertex=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,defaultFragment=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,BatchPluginFactory=function(){function G(){}return G.create=function(U){var L=Object.assign({vertex:defaultVertex,fragment:defaultFragment,geometryClass:BatchGeometry,vertexSize:6},U),Y=L.vertex,X=L.fragment,W=L.vertexSize,z=L.geometryClass;return function(J){__extends$v(Z,J);function Z(ee){var te=J.call(this,ee)||this;return te.shaderGenerator=new BatchShaderGenerator(Y,X),te.geometryClass=z,te.vertexSize=W,te}return Z}(AbstractBatchRenderer)},Object.defineProperty(G,"defaultVertexSrc",{get:function(){return defaultVertex},enumerable:!1,configurable:!0}),Object.defineProperty(G,"defaultFragmentTemplate",{get:function(){return defaultFragment},enumerable:!1,configurable:!0}),G}();BatchPluginFactory.create();var resources={},_loop_1=function(G){Object.defineProperty(resources,G,{get:function(){return deprecation("6.0.0","PIXI.systems."+G+" has moved to PIXI."+G),_resources[G]}})};for(var name$5 in _resources)_loop_1(name$5);var systems={},_loop_2=function(G){Object.defineProperty(systems,G,{get:function(){return deprecation("6.0.0","PIXI.resources."+G+" has moved to PIXI."+G),_systems[G]}})};for(var name$5 in _systems)_loop_2(name$5);var CanvasMeshRenderer=function(){function G(U){this.renderer=U}return G.prototype.render=function(U){var L=this.renderer,Y=U.worldTransform;L.context.globalAlpha=U.worldAlpha,L.setBlendMode(U.blendMode),L.setContextTransform(Y,U.roundPixels),U.drawMode!==DRAW_MODES$4.TRIANGLES?this._renderTriangleMesh(U):this._renderTriangles(U)},G.prototype._renderTriangleMesh=function(U){for(var L=U.geometry.buffers[0].data.length,Y=0;Y<L-2;Y++){var X=Y*2;this._renderDrawTriangle(U,X,X+2,X+4)}},G.prototype._renderTriangles=function(U){for(var L=U.geometry.getIndex().data,Y=L.length,X=0;X<Y;X+=3){var W=L[X]*2,z=L[X+1]*2,J=L[X+2]*2;this._renderDrawTriangle(U,W,z,J)}},G.prototype._renderDrawTriangle=function(U,L,Y,X){var W=this.renderer.context,z=U.geometry.buffers[0].data,J=U.uvs,Z=U.texture;if(!!Z.valid){var ee=U.tint!==16777215,te=Z.baseTexture,re=te.width,ie=te.height;ee&&U._cachedTint!==U.tint&&(U._cachedTint=U.tint,U._cachedTexture=U._cachedTexture||new Texture(te),U._tintedCanvas=canvasUtils.getTintedCanvas({texture:U._cachedTexture},U.tint));var ne=ee?U._tintedCanvas:te.getDrawableSource(),oe=J[L]*te.width,se=J[Y]*te.width,ae=J[X]*te.width,le=J[L+1]*te.height,ue=J[Y+1]*te.height,ce=J[X+1]*te.height,he=z[L],fe=z[Y],de=z[X],_e=z[L+1],me=z[Y+1],ve=z[X+1],ye=U.canvasPadding/this.renderer.resolution;if(ye>0){var be=U.worldTransform,Te=be.a,Se=be.b,Ue=be.c,Pe=be.d,Ne=(he+fe+de)/3,Ve=(_e+me+ve)/3,ze=he-Ne,Ze=_e-Ve,Ae=Te*ze+Ue*Ze,De=Se*ze+Pe*Ze,Ke=Math.sqrt(Ae*Ae+De*De),Qe=1+ye/Ke;he=Ne+ze*Qe,_e=Ve+Ze*Qe,ze=fe-Ne,Ze=me-Ve,Ae=Te*ze+Ue*Ze,De=Se*ze+Pe*Ze,Ke=Math.sqrt(Ae*Ae+De*De),Qe=1+ye/Ke,fe=Ne+ze*Qe,me=Ve+Ze*Qe,ze=de-Ne,Ze=ve-Ve,Ae=Te*ze+Ue*Ze,De=Se*ze+Pe*Ze,Ke=Math.sqrt(Ae*Ae+De*De),Qe=1+ye/Ke,de=Ne+ze*Qe,ve=Ve+Ze*Qe}W.save(),W.beginPath(),W.moveTo(he,_e),W.lineTo(fe,me),W.lineTo(de,ve),W.closePath(),W.clip();var tt=oe*ue+le*ae+se*ce-ue*ae-le*se-oe*ce,Ie=he*ue+le*de+fe*ce-ue*de-le*fe-he*ce,ke=oe*fe+he*ae+se*de-fe*ae-he*se-oe*de,Me=oe*ue*de+le*fe*ae+he*se*ce-he*ue*ae-le*se*de-oe*fe*ce,Ye=_e*ue+le*ve+me*ce-ue*ve-le*me-_e*ce,xe=oe*me+_e*ae+se*ve-me*ae-_e*se-oe*ve,Re=oe*ue*ve+le*me*ae+_e*se*ce-_e*ue*ae-le*se*ve-oe*me*ce;W.transform(Ie/tt,Ye/tt,ke/tt,xe/tt,Me/tt,Re/tt),W.drawImage(ne,0,0,re*te.resolution,ie*te.resolution,0,0,re,ie),W.restore(),this.renderer.invalidateBlendMode()}},G.prototype.renderMeshFlat=function(U){var L=this.renderer.context,Y=U.geometry.getBuffer("aVertexPosition").data,X=Y.length/2;L.beginPath();for(var W=1;W<X-2;++W){var z=W*2,J=Y[z],Z=Y[z+1],ee=Y[z+2],te=Y[z+3],re=Y[z+4],ie=Y[z+5];L.moveTo(J,Z),L.lineTo(ee,te),L.lineTo(re,ie)}L.fillStyle="#FF0000",L.fill(),L.closePath()},G.prototype.destroy=function(){this.renderer=null},G}();settings$1.MESH_CANVAS_PADDING=0;MeshMaterial.prototype._renderCanvas=function(U,L){U.plugins.mesh.render(L)};NineSlicePlane.prototype._cachedTint=16777215;NineSlicePlane.prototype._tintedCanvas=null;NineSlicePlane.prototype._canvasUvs=null;NineSlicePlane.prototype._renderCanvas=function(U){var L=U.context,Y=this.worldTransform,X=this.tint!==16777215,W=this.texture;if(!!W.valid){X&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=canvasUtils.getTintedCanvas(this,this.tint));var z=X?this._tintedCanvas:W.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var J=this.vertices,Z=this._canvasUvs,ee=X?0:W.frame.x,te=X?0:W.frame.y,re=ee+W.frame.width,ie=te+W.frame.height;Z[0]=ee,Z[1]=ee+this._leftWidth,Z[2]=re-this._rightWidth,Z[3]=re,Z[4]=te,Z[5]=te+this._topHeight,Z[6]=ie-this._bottomHeight,Z[7]=ie;for(var ne=0;ne<8;ne++)Z[ne]*=W.baseTexture.resolution;L.globalAlpha=this.worldAlpha,U.setBlendMode(this.blendMode),U.setContextTransform(Y,this.roundPixels);for(var oe=0;oe<3;oe++)for(var se=0;se<3;se++){var ae=se*2+oe*8,le=Math.max(1,Z[se+1]-Z[se]),ue=Math.max(1,Z[oe+5]-Z[oe+4]),ce=Math.max(1,J[ae+10]-J[ae]),he=Math.max(1,J[ae+11]-J[ae+1]);L.drawImage(z,Z[se],Z[oe+4],le,ue,J[ae],J[ae+1],ce,he)}}};var warned=!1;Mesh.prototype._cachedTint=16777215;Mesh.prototype._tintedCanvas=null;Mesh.prototype._cachedTexture=null;Mesh.prototype._renderCanvas=function(U){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(U,this):warned||(warned=!0,globalThis.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))};Mesh.prototype._canvasPadding=null;Object.defineProperty(Mesh.prototype,"canvasPadding",{get:function(){return this._canvasPadding!==null?this._canvasPadding:settings$1.MESH_CANVAS_PADDING},set:function(G){this._canvasPadding=G}});SimpleMesh.prototype._renderCanvas=function(U){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(U,this)};SimpleRope.prototype._renderCanvas=function(U){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(U,this)};/*!
 * @pixi/canvas-graphics - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var PolygonUtils=function(){function G(){}return G.offsetPolygon=function(U,L){var Y=[],X=U.length;L=G.isPolygonClockwise(U)?L:-1*L;for(var W=0;W<X;W+=2){var z=W-2;z<0&&(z+=X);var J=(W+2)%X,Z=U[W]-U[z],ee=U[W+1]-U[z+1],te=Math.sqrt(Z*Z+ee*ee);Z/=te,ee/=te,Z*=L,ee*=L;var re=-ee,ie=Z,ne=[U[z]+re,U[z+1]+ie],oe=[U[W]+re,U[W+1]+ie],se=U[J]-U[W],ae=U[J+1]-U[W+1];te=Math.sqrt(se*se+ae*ae),se/=te,ae/=te,se*=L,ae*=L;var le=-ae,ue=se,ce=[U[W]+le,U[W+1]+ue],he=[U[J]+le,U[J+1]+ue],fe=G.findIntersection(ne[0],ne[1],oe[0],oe[1],ce[0],ce[1],he[0],he[1]);fe&&Y.push.apply(Y,fe)}return Y},G.findIntersection=function(U,L,Y,X,W,z,J,Z){var ee=(Z-z)*(Y-U)-(J-W)*(X-L),te=(J-W)*(L-z)-(Z-z)*(U-W),re=(Y-U)*(L-z)-(X-L)*(U-W);if(ee===0)return te===0&&re===0?[(U+Y)/2,(L+X)/2]:null;var ie=te/ee;return[U+ie*(Y-U),L+ie*(X-L)]},G.isPolygonClockwise=function(U){for(var L=0,Y=0,X=U.length-2;Y<U.length;X=Y,Y+=2)L+=(U[Y]-U[X])*(U[Y+1]+U[X+1]);return L>0},G}(),CanvasGraphicsRenderer=function(){function G(U){this._svgMatrix=null,this._tempMatrix=new Matrix$1,this.renderer=U}return G.prototype._calcCanvasStyle=function(U,L){var Y;return U.texture&&U.texture.baseTexture!==Texture$1.WHITE.baseTexture?U.texture.valid?(Y=canvasUtils.getTintedPattern(U.texture,L),this.setPatternTransform(Y,U.matrix||Matrix$1.IDENTITY)):Y="#808080":Y="#"+("00000"+(L|0).toString(16)).slice(-6),Y},G.prototype.render=function(U){var L=this.renderer,Y=L.context,X=U.worldAlpha,W=U.transform.worldTransform;L.setContextTransform(W),L.setBlendMode(U.blendMode);for(var z=U.geometry.graphicsData,J,Z,ee=(U.tint>>16&255)/255,te=(U.tint>>8&255)/255,re=(U.tint&255)/255,ie=0;ie<z.length;ie++){var ne=z[ie],oe=ne.shape,se=ne.fillStyle,ae=ne.lineStyle,le=ne.fillStyle.color|0,ue=ne.lineStyle.color|0;if(ne.matrix&&L.setContextTransform(W.copyTo(this._tempMatrix).append(ne.matrix)),se.visible){var ce=((le>>16&255)/255*ee*255<<16)+((le>>8&255)/255*te*255<<8)+(le&255)/255*re*255;J=this._calcCanvasStyle(se,ce)}if(ae.visible){var he=((ue>>16&255)/255*ee*255<<16)+((ue>>8&255)/255*te*255<<8)+(ue&255)/255*re*255;Z=this._calcCanvasStyle(ae,he)}if(Y.lineWidth=ae.width,Y.lineCap=ae.cap,Y.lineJoin=ae.join,Y.miterLimit=ae.miterLimit,ne.type===SHAPES$1.POLY){Y.beginPath();var fe=oe,de=fe.points,_e=ne.holes,me=void 0,ve=void 0,ye=void 0,be=void 0,Te=void 0;Y.moveTo(de[0],de[1]);for(var Se=2;Se<de.length;Se+=2)Y.lineTo(de[Se],de[Se+1]);if(fe.closeStroke&&Y.closePath(),_e.length>0){Te=[],me=0,ye=de[0],be=de[1];for(var Se=2;Se+2<de.length;Se+=2)me+=(de[Se]-ye)*(de[Se+3]-be)-(de[Se+2]-ye)*(de[Se+1]-be);for(var Ue=0;Ue<_e.length;Ue++)if(de=_e[Ue].shape.points,!!de){ve=0,ye=de[0],be=de[1];for(var Se=2;Se+2<de.length;Se+=2)ve+=(de[Se]-ye)*(de[Se+3]-be)-(de[Se+2]-ye)*(de[Se+1]-be);if(ve*me<0){Y.moveTo(de[0],de[1]);for(var Se=2;Se<de.length;Se+=2)Y.lineTo(de[Se],de[Se+1])}else{Y.moveTo(de[de.length-2],de[de.length-1]);for(var Se=de.length-4;Se>=0;Se-=2)Y.lineTo(de[Se],de[Se+1])}_e[Ue].shape.closeStroke&&Y.closePath(),Te[Ue]=ve*me<0}}se.visible&&(Y.globalAlpha=se.alpha*X,Y.fillStyle=J,Y.fill()),ae.visible&&this.paintPolygonStroke(fe,ae,Z,_e,Te,X,Y)}else if(ne.type===SHAPES$1.RECT){var fe=oe;if(se.visible&&(Y.globalAlpha=se.alpha*X,Y.fillStyle=J,Y.fillRect(fe.x,fe.y,fe.width,fe.height)),ae.visible){var Pe=ae.width*(.5-(1-ae.alignment)),Ne=fe.width+2*Pe,Ve=fe.height+2*Pe;Y.globalAlpha=ae.alpha*X,Y.strokeStyle=Z,Y.strokeRect(fe.x-Pe,fe.y-Pe,Ne,Ve)}}else if(ne.type===SHAPES$1.CIRC){var fe=oe;if(Y.beginPath(),Y.arc(fe.x,fe.y,fe.radius,0,2*Math.PI),Y.closePath(),se.visible&&(Y.globalAlpha=se.alpha*X,Y.fillStyle=J,Y.fill()),ae.visible){if(ae.alignment!==.5){var Pe=ae.width*(.5-(1-ae.alignment));Y.beginPath(),Y.arc(fe.x,fe.y,fe.radius+Pe,0,2*Math.PI),Y.closePath()}Y.globalAlpha=ae.alpha*X,Y.strokeStyle=Z,Y.stroke()}}else if(ne.type===SHAPES$1.ELIP){var fe=oe,ze=ae.alignment===1;if(ze||this.paintEllipse(fe,se,ae,J,X,Y),ae.visible){if(ae.alignment!==.5){var Ze=.5522848,Pe=ae.width*(.5-(1-ae.alignment)),Ae=(fe.width+Pe)*2,De=(fe.height+Pe)*2,Ke=fe.x-Ae/2,Qe=fe.y-De/2,tt=Ae/2*Ze,Ie=De/2*Ze,ke=Ke+Ae,Me=Qe+De,Ye=Ke+Ae/2,xe=Qe+De/2;Y.beginPath(),Y.moveTo(Ke,xe),Y.bezierCurveTo(Ke,xe-Ie,Ye-tt,Qe,Ye,Qe),Y.bezierCurveTo(Ye+tt,Qe,ke,xe-Ie,ke,xe),Y.bezierCurveTo(ke,xe+Ie,Ye+tt,Me,Ye,Me),Y.bezierCurveTo(Ye-tt,Me,Ke,xe+Ie,Ke,xe),Y.closePath()}Y.globalAlpha=ae.alpha*X,Y.strokeStyle=Z,Y.stroke()}ze&&this.paintEllipse(fe,se,ae,J,X,Y)}else if(ne.type===SHAPES$1.RREC){var fe=oe,ze=ae.alignment===1;if(ze||this.paintRoundedRectangle(fe,se,ae,J,X,Y),ae.visible){if(ae.alignment!==.5){var Ne=fe.width,Ve=fe.height,Pe=ae.width*(.5-(1-ae.alignment)),Re=fe.x-Pe,we=fe.y-Pe,Le=fe.width+2*Pe,pe=fe.height+2*Pe,ge=Pe*(ae.alignment>=1?Math.min(Le/Ne,pe/Ve):Math.min(Ne/Le,Ve/pe)),Ee=fe.radius+ge,Ce=Math.min(Le,pe)/2;Ee=Ee>Ce?Ce:Ee,Y.beginPath(),Y.moveTo(Re,we+Ee),Y.lineTo(Re,we+pe-Ee),Y.quadraticCurveTo(Re,we+pe,Re+Ee,we+pe),Y.lineTo(Re+Le-Ee,we+pe),Y.quadraticCurveTo(Re+Le,we+pe,Re+Le,we+pe-Ee),Y.lineTo(Re+Le,we+Ee),Y.quadraticCurveTo(Re+Le,we,Re+Le-Ee,we),Y.lineTo(Re+Ee,we),Y.quadraticCurveTo(Re,we,Re,we+Ee),Y.closePath()}Y.globalAlpha=ae.alpha*X,Y.strokeStyle=Z,Y.stroke()}ze&&this.paintRoundedRectangle(fe,se,ae,J,X,Y)}}},G.prototype.paintPolygonStroke=function(U,L,Y,X,W,z,J){if(L.alignment!==.5){var Z=L.width*(.5-(1-L.alignment)),ee=PolygonUtils.offsetPolygon(U.points,Z),te=void 0;J.beginPath(),J.moveTo(ee[0],ee[1]);for(var re=2;re<ee.length;re+=2)J.lineTo(ee[re],ee[re+1]);U.closeStroke&&J.closePath();for(var ie=0;ie<X.length;ie++){if(te=X[ie].shape.points,ee=PolygonUtils.offsetPolygon(te,Z),W[ie]){J.moveTo(ee[0],ee[1]);for(var re=2;re<ee.length;re+=2)J.lineTo(ee[re],ee[re+1])}else{J.moveTo(ee[ee.length-2],ee[ee.length-1]);for(var re=ee.length-4;re>=0;re-=2)J.lineTo(ee[re],ee[re+1])}X[ie].shape.closeStroke&&J.closePath()}}J.globalAlpha=L.alpha*z,J.strokeStyle=Y,J.stroke()},G.prototype.paintEllipse=function(U,L,Y,X,W,z){var J=U.width*2,Z=U.height*2,ee=U.x-J/2,te=U.y-Z/2,re=.5522848,ie=J/2*re,ne=Z/2*re,oe=ee+J,se=te+Z,ae=ee+J/2,le=te+Z/2;Y.alignment===0&&z.save(),z.beginPath(),z.moveTo(ee,le),z.bezierCurveTo(ee,le-ne,ae-ie,te,ae,te),z.bezierCurveTo(ae+ie,te,oe,le-ne,oe,le),z.bezierCurveTo(oe,le+ne,ae+ie,se,ae,se),z.bezierCurveTo(ae-ie,se,ee,le+ne,ee,le),z.closePath(),Y.alignment===0&&z.clip(),L.visible&&(z.globalAlpha=L.alpha*W,z.fillStyle=X,z.fill()),Y.alignment===0&&z.restore()},G.prototype.paintRoundedRectangle=function(U,L,Y,X,W,z){var J=U.x,Z=U.y,ee=U.width,te=U.height,re=U.radius,ie=Math.min(ee,te)/2;re=re>ie?ie:re,Y.alignment===0&&z.save(),z.beginPath(),z.moveTo(J,Z+re),z.lineTo(J,Z+te-re),z.quadraticCurveTo(J,Z+te,J+re,Z+te),z.lineTo(J+ee-re,Z+te),z.quadraticCurveTo(J+ee,Z+te,J+ee,Z+te-re),z.lineTo(J+ee,Z+re),z.quadraticCurveTo(J+ee,Z,J+ee-re,Z),z.lineTo(J+re,Z),z.quadraticCurveTo(J,Z,J,Z+re),z.closePath(),Y.alignment===0&&z.clip(),L.visible&&(z.globalAlpha=L.alpha*W,z.fillStyle=X,z.fill()),Y.alignment===0&&z.restore()},G.prototype.setPatternTransform=function(U,L){if(this._svgMatrix!==!1){if(!this._svgMatrix){var Y=document.createElementNS("http://www.w3.org/2000/svg","svg");if(Y&&Y.createSVGMatrix&&(this._svgMatrix=Y.createSVGMatrix()),!this._svgMatrix||!U.setTransform){this._svgMatrix=!1;return}}this._svgMatrix.a=L.a,this._svgMatrix.b=L.b,this._svgMatrix.c=L.c,this._svgMatrix.d=L.d,this._svgMatrix.e=L.tx,this._svgMatrix.f=L.ty,U.setTransform(this._svgMatrix.inverse())}},G.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},G}(),canvasRenderer,tempMatrix=new Matrix$1;Graphics.prototype.generateCanvasTexture=function(U,L){L===void 0&&(L=1);var Y=this.getLocalBounds(),X=RenderTexture$1.create({width:Y.width,height:Y.height,scaleMode:U,resolution:L});canvasRenderer||(canvasRenderer=new CanvasRenderer),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(tempMatrix),tempMatrix.invert(),tempMatrix.tx-=Y.x,tempMatrix.ty-=Y.y,canvasRenderer.render(this,{renderTexture:X,clear:!0,transform:tempMatrix});var W=Texture$1.from(X.baseTexture._canvasRenderTarget.canvas,{scaleMode:U});return W.baseTexture.setResolution(L),W};Graphics.prototype.cachedGraphicsData=[];Graphics.prototype._renderCanvas=function(U){this.isMask!==!0&&(this.finishPoly(),U.plugins.graphics.render(this))};/*!
 * @pixi/canvas-sprite - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var canvasRenderWorldTransform=new Matrix$1,CanvasSpriteRenderer=function(){function G(U){this.renderer=U}return G.prototype.render=function(U){var L=U._texture,Y=this.renderer,X=Y.context;if(!!L.valid){var W=L._frame.width,z=L._frame.height,J=U.transform.worldTransform,Z=0,ee=0,te=L.baseTexture.getDrawableSource();if(!(L.orig.width<=0||L.orig.height<=0||!L.valid||!te)){Y.setBlendMode(U.blendMode,!0),Y.context.globalAlpha=U.worldAlpha;var re=L.baseTexture.scaleMode===SCALE_MODES$4.LINEAR;Y.smoothProperty&&Y.context[Y.smoothProperty]!==re&&(X[Y.smoothProperty]=re),L.trim?(Z=L.trim.width/2+L.trim.x-U.anchor.x*L.orig.width,ee=L.trim.height/2+L.trim.y-U.anchor.y*L.orig.height):(Z=(.5-U.anchor.x)*L.orig.width,ee=(.5-U.anchor.y)*L.orig.height),L.rotate&&(J.copyTo(canvasRenderWorldTransform),J=canvasRenderWorldTransform,groupD8$1.matrixAppendRotationInv(J,L.rotate,Z,ee),Z=0,ee=0),Z-=W/2,ee-=z/2,Y.setContextTransform(J,U.roundPixels,1),U.roundPixels&&(Z=Z|0,ee=ee|0);var ie=L.baseTexture.resolution,ne=Y._outerBlend;ne&&(X.save(),X.beginPath(),X.rect(Z*Y.resolution,ee*Y.resolution,W*Y.resolution,z*Y.resolution),X.clip()),U.tint!==16777215?((U._cachedTint!==U.tint||U._tintedCanvas.tintId!==U._texture._updateID)&&(U._cachedTint=U.tint,U._tintedCanvas=canvasUtils.getTintedCanvas(U,U.tint)),X.drawImage(U._tintedCanvas,0,0,Math.floor(W*ie),Math.floor(z*ie),Math.floor(Z*Y.resolution),Math.floor(ee*Y.resolution),Math.floor(W*Y.resolution),Math.floor(z*Y.resolution))):X.drawImage(te,L._frame.x*ie,L._frame.y*ie,Math.floor(W*ie),Math.floor(z*ie),Math.floor(Z*Y.resolution),Math.floor(ee*Y.resolution),Math.floor(W*Y.resolution),Math.floor(z*Y.resolution)),ne&&X.restore(),Y.setBlendMode(BLEND_MODES$4.NORMAL)}}},G.prototype.destroy=function(){this.renderer=null},G}();Sprite.prototype._tintedCanvas=null;Sprite.prototype._renderCanvas=function(U){U.plugins.sprite.render(this)};/*!
 * @pixi/canvas-extract - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var TEMP_RECT=new Rectangle$1,CanvasExtract=function(){function G(U){this.renderer=U}return G.prototype.image=function(U,L,Y){var X=new Image;return X.src=this.base64(U,L,Y),X},G.prototype.base64=function(U,L,Y){return this.canvas(U).toDataURL(L,Y)},G.prototype.canvas=function(U){var L=this.renderer,Y,X,W,z;U&&(U instanceof RenderTexture$1?z=U:z=L.generateTexture(U)),z?(Y=z.baseTexture._canvasRenderTarget.context,X=z.baseTexture._canvasRenderTarget.resolution,W=z.frame):(Y=L.rootContext,X=L.resolution,W=TEMP_RECT,W.width=this.renderer.width,W.height=this.renderer.height);var J=Math.floor(W.width*X+1e-4),Z=Math.floor(W.height*X+1e-4),ee=new CanvasRenderTarget(J,Z,1),te=Y.getImageData(W.x*X,W.y*X,J,Z);return ee.context.putImageData(te,0,0),ee.canvas},G.prototype.pixels=function(U){var L=this.renderer,Y,X,W,z;U&&(U instanceof RenderTexture$1?z=U:z=L.generateTexture(U)),z?(Y=z.baseTexture._canvasRenderTarget.context,X=z.baseTexture._canvasRenderTarget.resolution,W=z.frame):(Y=L.rootContext,X=L.resolution,W=TEMP_RECT,W.width=L.width,W.height=L.height);var J=W.x*X,Z=W.y*X,ee=W.width*X,te=W.height*X;return Y.getImageData(J,Z,ee,te).data},G.prototype.destroy=function(){this.renderer=null},G}();/*!
 * @pixi/canvas-prepare - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics$2=function(G,U){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Y.hasOwnProperty(X)&&(L[X]=Y[X])},extendStatics$2(G,U)};function __extends$u(G,U){extendStatics$2(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var CANVAS_START_SIZE=16;function uploadBaseTextures(G,U){var L=G;if(U instanceof BaseTexture$1){var Y=U.source,X=Y.width===0?L.canvas.width:Math.min(L.canvas.width,Y.width),W=Y.height===0?L.canvas.height:Math.min(L.canvas.height,Y.height);return L.ctx.drawImage(Y,0,0,X,W,0,0,L.canvas.width,L.canvas.height),!0}return!1}var CanvasPrepare=function(G){__extends$u(U,G);function U(L){var Y=G.call(this,L)||this;return Y.uploadHookHelper=Y,Y.canvas=document.createElement("canvas"),Y.canvas.width=CANVAS_START_SIZE,Y.canvas.height=CANVAS_START_SIZE,Y.ctx=Y.canvas.getContext("2d"),Y.registerUploadHook(uploadBaseTextures),Y}return U.prototype.destroy=function(){G.prototype.destroy.call(this),this.ctx=null,this.canvas=null},U}(BasePrepare);/*!
 * @pixi/canvas-sprite-tiling - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var worldMatrix=new Matrix$1,patternMatrix=new Matrix$1,patternRect=[new Point$1,new Point$1,new Point$1,new Point$1];TilingSprite.prototype._renderCanvas=function(U){var L=this._texture;if(!!L.baseTexture.valid){var Y=U.context,X=this.worldTransform,W=L.baseTexture,z=W.getDrawableSource(),J=W.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var Z=new CanvasRenderTarget(L._frame.width,L._frame.height,J);this.tint!==16777215?(this._tintedCanvas=canvasUtils.getTintedCanvas(this,this.tint),Z.context.drawImage(this._tintedCanvas,0,0)):Z.context.drawImage(z,-L._frame.x*J,-L._frame.y*J),this._cachedTint=this.tint,this._canvasPattern=Z.context.createPattern(Z.canvas,"repeat")}Y.globalAlpha=this.worldAlpha,U.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var ee=this.tileTransform.localTransform,te=this._width,re=this._height;worldMatrix.identity(),patternMatrix.copyFrom(ee),this.uvRespectAnchor||patternMatrix.translate(-this.anchor.x*te,-this.anchor.y*re),patternMatrix.scale(this.tileScale.x/J,this.tileScale.y/J),worldMatrix.prepend(patternMatrix),worldMatrix.prepend(X),U.setContextTransform(worldMatrix),Y.fillStyle=this._canvasPattern;var ie=this.anchor.x*-te,ne=this.anchor.y*-re;patternRect[0].set(ie,ne),patternRect[1].set(ie+te,ne),patternRect[2].set(ie+te,ne+re),patternRect[3].set(ie,ne+re);for(var oe=0;oe<4;oe++)patternMatrix.applyInverse(patternRect[oe],patternRect[oe]);Y.beginPath(),Y.moveTo(patternRect[0].x,patternRect[0].y);for(var oe=1;oe<4;oe++)Y.lineTo(patternRect[oe].x,patternRect[oe].y);Y.closePath(),Y.fill()}};/*!
 * @pixi/canvas-particle-container - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ParticleContainer.prototype.renderCanvas=function(U){if(!(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)){var L=U.context,Y=this.worldTransform,X=!0,W=0,z=0,J=0,Z=0;U.setBlendMode(this.blendMode),L.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var ee=0;ee<this.children.length;++ee){var te=this.children[ee];if(!!te.visible&&!!te._texture.valid){var re=te._texture.frame;if(L.globalAlpha=this.worldAlpha*te.alpha,te.rotation%(Math.PI*2)===0)X&&(U.setContextTransform(Y,!1,1),X=!1),W=te.anchor.x*(-re.width*te.scale.x)+te.position.x+.5,z=te.anchor.y*(-re.height*te.scale.y)+te.position.y+.5,J=re.width*te.scale.x,Z=re.height*te.scale.y;else{X||(X=!0),te.displayObjectUpdateTransform();var ie=te.worldTransform;U.setContextTransform(ie,this.roundPixels,1),W=te.anchor.x*-re.width+.5,z=te.anchor.y*-re.height+.5,J=re.width,Z=re.height}var ne=te._texture.baseTexture.resolution;L.drawImage(te._texture.baseTexture.getDrawableSource(),re.x*ne,re.y*ne,re.width*ne,re.height*ne,W*U.resolution,z*U.resolution,J*U.resolution,Z*U.resolution)}}}};/*!
 * @pixi/canvas-display - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Container$1.prototype._renderCanvas=function(U){};Container$1.prototype.renderCanvas=function(U){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){this._mask&&U.maskManager.pushMask(this._mask),this._renderCanvas(U);for(var L=0,Y=this.children.length;L<Y;++L)this.children[L].renderCanvas(U);this._mask&&U.maskManager.popMask(U)}};DisplayObject$1.prototype.renderCanvas=function(U){};/*!
 * @pixi/canvas-text - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * @pixi/canvas-text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Text.prototype._renderCanvas=function(U){this._autoResolution&&this._resolution!==U.resolution&&(this._resolution=U.resolution,this.dirty=!0),this.updateText(!0),Sprite.prototype._renderCanvas.call(this,U)};/*!
 * pixi.js-legacy - v6.4.2
 * Compiled Thu, 02 Jun 2022 15:39:26 UTC
 *
 * pixi.js-legacy is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */CanvasRenderer.registerPlugin("accessibility",AccessibilityManager);CanvasRenderer.registerPlugin("extract",CanvasExtract);CanvasRenderer.registerPlugin("graphics",CanvasGraphicsRenderer);CanvasRenderer.registerPlugin("interaction",InteractionManager);CanvasRenderer.registerPlugin("mesh",CanvasMeshRenderer);CanvasRenderer.registerPlugin("prepare",CanvasPrepare);CanvasRenderer.registerPlugin("sprite",CanvasSpriteRenderer);var dist$1={},defaults={},dist={},visibility={};Object.defineProperty(visibility,"__esModule",{value:!0});var keyWithPrefix=function(G,U){return G!==""?G+U.slice(0,1).toUpperCase()+U.slice(1):U},PageVisibility=function(){function G(){this.supportHidden=!1,this.supportState=!1,this.hidden="",this.state="",this.prefixSupport="",this.bindFn=function(){},this.supportHidden=this.isPageHiddenSupport(),this.supportState=this.isPageVisibilitySupport()}return G.prototype.visibilityChange=function(U,L){if(L===void 0&&(L=!1),(this.supportHidden||this.supportState)&&typeof U=="function"){var Y=this;return this.bindFn=function(){U.call(null,Y.isShow())}.bind(this),this.destory(),document.addEventListener("".concat(this.prefixSupport,"visibilitychange"),this.bindFn,L)}},G.prototype.destory=function(){document.removeEventListener("".concat(this.prefixSupport,"visibilitychange"),this.bindFn)},G.prototype.isShow=function(){return this.supportState?document[this.state]==="visible":this.supportHidden?!document[this.hidden]:!0},G.prototype.isPageHiddenSupport=function(){var U=this,L=!1;return typeof(window==null?void 0:window.screenX)!="number"||["","webkit","moz","ms","o"].forEach(function(Y){var X=keyWithPrefix(Y,"hidden");!L&&X in document&&(U.hidden=X,U.prefixSupport=Y,L=!0)}),L},G.prototype.isPageVisibilitySupport=function(){var U=this,L=!1;return typeof(window==null?void 0:window.screenX)!="number"||["","webkit","moz","ms","o"].forEach(function(Y){var X=keyWithPrefix(Y,"visibilityState");!L&&X in document&&(U.state=keyWithPrefix(Y,"visibilityState"),L=!0)}),L},G}();visibility.default=PageVisibility;var date={},type={};Object.defineProperty(type,"__esModule",{value:!0});type.isArray=type.isNumber=void 0;var isNumber=function(G){return!G||typeof G=="undefined"?!1:typeof G=="number"?!0:typeof Number.isNaN=="function"?!Number.isNaN(Number(G)):Number(G)===Number(G)};type.isNumber=isNumber;var isArray=function(G){return!G||typeof G=="undefined"?!1:typeof Array.isArray=="function"?Array.isArray(G):Object.prototype.toString.call(G).toLowerCase()==="[object array]"};type.isArray=isArray;(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.sleep=G.getWeekStartAndEnd=G.formatTime=G.isSameDay=void 0;var U=type,L=function(J,Z){Z===void 0&&(Z=Date.now());var ee=function(te){var re=(0,U.isNumber)(te)?parseInt(te.toString(),10):te.toString().replace(/-/g,"/");return new Date(re).toLocaleDateString()};return ee(J)===ee(Z)};G.isSameDay=L;var Y=function(J,Z){Z===void 0&&(Z="yyyy/MM/dd hh:mm:ss");var ee=new Date(J),te={"y+":ee.getFullYear(),"M+":ee.getMonth()+1,"d+":ee.getDate(),"h+":ee.getHours(),"m+":ee.getMinutes(),"s+":ee.getSeconds()},re=/(y+)/i.test(Z)?Z.replace(RegExp.$1,"".concat(te["y+"]).substr(4-RegExp.$1.length)):Z;for(var ie in te)new RegExp("(".concat(ie,")")).test(Z)&&(re=re.replace(RegExp.$1,RegExp.$1.length===1?te[ie]:"00".concat(te[ie]).substr("".concat(te[ie]).length)));return re};G.formatTime=Y;var X=function(J,Z,ee){var te=864e5,re=ee?new Date(ee):new Date,ie=re.getTime(),ne=re.getDay()===0?7:re.getDay(),oe=new Date(ie-te*(ne-1)),se=new Date(ie+te*(7-ne));return{startDate:(0,G.formatTime)(oe.getTime(),J),endDate:(0,G.formatTime)(se.getTime(),Z)}};G.getWeekStartAndEnd=X;var W=function(J){return new Promise(function(Z){return setTimeout(Z,J)})};G.sleep=W;var z={isSameDay:G.isSameDay,formatTime:G.formatTime,getWeekStartAndEnd:G.getWeekStartAndEnd,sleep:G.sleep};G.default=z})(date);var url={};(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.buildFullPath=G.combineURLs=G.http2https=G.isAbsolute=G.getQueryString=void 0;var U=function(J,Z){if(Z===void 0&&(Z=window.location.search),!Z||!J)return null;if(typeof URLSearchParams=="function"){var ee=new URLSearchParams(Z);return ee.get(J)}var te=new RegExp("(^|&)".concat(J,"=([^&]*)(&|$)"),"i"),re=Z.slice(1).match(te)||[],ie=re[0],ne=re[1],oe=re[2];return ie||ne?decodeURIComponent(oe):null};G.getQueryString=U;var L=function(J){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(J)};G.isAbsolute=L;var Y=function(J){return/^http:\/\//.test(J)?J.replace("http://","https://"):J};G.http2https=Y;var X=function(J,Z){return Z?"".concat(J.replace(/\/+$/,""),"/").concat(Z.replace(/^\/+/,"")):J};G.combineURLs=X;var W=function(J,Z){return J&&!(0,G.isAbsolute)(Z)?(0,G.combineURLs)(J,Z):Z};G.buildFullPath=W;var z={getQueryString:G.getQueryString,isAbsolute:G.isAbsolute,http2https:G.http2https,combineURLs:G.combineURLs,buildFullPath:G.buildFullPath};G.default=z})(url);var string={};(function(G){var U=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return U=Object.assign||function(J){for(var Z,ee=1,te=arguments.length;ee<te;ee++){Z=arguments[ee];for(var re in Z)Object.prototype.hasOwnProperty.call(Z,re)&&(J[re]=Z[re])}return J},U.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0}),G.getScript=G.loadScript=G.truncate=G.strReplace=G.getRandom=void 0;var L=function(){var J=16;if(typeof crypto=="object"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function"){var Z=crypto==null?void 0:crypto.randomUUID();return Z.replace(/-/g,"").substring(0,J)}var ee=Date.now().toString(32),te=Math.random().toString(32);return"".concat(ee).concat(te.slice(ee.length-J))};G.getRandom=L;var Y=function(J,Z){Z===void 0&&(Z={});var ee=new RegExp("{(.+?)}","g");return J.replace(ee,function(te,re){return te&&Z.hasOwnProperty(re)?Z[re]:te})};G.strReplace=Y;var X=function(J,Z,ee){function te(ae){return typeof ae!="string"||ae===""}function re(ae){return te(ae)?ae:ae.replace(/(^\s*)|(\s*$)/g,"")}if(te(J))return J;var ie=re(J),ne=Array.from(ie),oe=ne.length,se=Z<=0?oe:Z;return se>=oe||(ie=ne.slice(0,se).join(""),ie+=ee||"..."),ie};G.truncate=X;var W=function(J,Z){var ee={iframe:!1,charset:"UTF-8",timeout:6e3},te=U(U({},ee),Z),re=te.iframe&&window.top?window.top.document:document,ie=re.getElementsByTagName("head")[0],ne=re.createElement("script"),oe=null;ne.setAttribute("type","text/javascript"),ne.setAttribute("charset",te.charset),ne.setAttribute("src",J);var se=function(){ne.parentNode&&ne.parentNode.removeChild(ne),oe&&clearTimeout(oe)};return ie.appendChild(ne),new Promise(function(ae,le){var ue=function(){oe&&clearTimeout(oe),ae(null)};ne.onload=function(){ue()},ne.onerror=le,te.timeout&&(oe=setTimeout(function(){se(),le(new Error("[loadScript] get ".concat(J," timeout in ").concat(te.timeout,"ms")))},te.timeout))})};G.loadScript=W,G.getScript=G.loadScript;var z={strReplace:G.strReplace,truncate:G.truncate,loadScript:G.loadScript,getScript:G.getScript};G.default=z})(string);var ua={};(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.isLiteNewsApp=G.isNewsApp=G.isAndroid=G.getBrowserInfo=G.getSystemInfo=void 0;var U=function(J){var Z={name:"",version:"",ios:!1,android:!1,manufacture:"",model:"",build:"",nettype:""};if(typeof window=="undefined")return Z;var ee=(J||window.navigator.userAgent).toLowerCase(),te={iphone:ee.match(/(iphone)\s(os\s)?([\d_]+)/i),ipad:ee.match(/(ipad).*\s([\d_]+)/i),ipod:ee.match(/(ipod).*\s([\d_]+)/i),android:ee.match(/(android)\s([\d.]+)/i),windows:ee.match(/windows(\s+\w+)?\s+?(\d+\.\d+)/),ios:/(iphone|ipad|ipod|ios)/i.test(ee)};if(te.iphone)Z.name="iphone",Z.version=te.iphone[3].replace(/_/g,"."),Z.ios=!0;else if(te.android){Z.name="android",Z.version=te.android[2],Z.android=!0;var re={samsung:ee.match(/(gt|sm|sch)-(.*)\s+/),huawei:/huawei|honor/.test(ee),honor:/honor/.test(ee),vivo:/vivo/.test(ee),redmi:/redmi/.test(ee),xiaomi:/hm|mi/i.test(ee)&&!/redmi/.test(ee),oppo:/oppo/.test(ee),oneplus:/oneplus/.test(ee)};for(var ie in re)if(re[ie]){Z.manufacture=ie;break}var ne=ee.match(/;(\szh-cn;)?\s(.*)\sbuild/i);if(ne&&ne.length>=3){var oe=ne[2].split(";");Z.model=oe[oe.length-1].replace(Z.manufacture,"").replace(/(^\s*)|(\s*$)/g,"")}var se=ee.match(new RegExp("build/(".concat(Z.manufacture,")?(.*?)[()|;)$]")));se&&se.length>=3&&(Z.build=se[2])}else te.ipad?(Z.name="ipad",Z.version=te.ipad[2].replace(/_/g,"."),Z.ios=!0):te.windows&&(Z.name="windows",Z.version=te.windows[2]);var ae=ee.match(/nettype\/(.*)\s+/);return ae&&(Z.nettype=ae[1]),Z};G.getSystemInfo=U;var L=function(J){var Z={name:"",version:"",weibo:{name:"",version:"",is:!1},qqnewslite:{name:"",version:"",is:!1},qqnews:{name:"",version:"",is:!1},weixin:{name:"",version:"",is:!1},wxwork:{name:"",version:"",is:!1},mqqbrowser:{name:"",version:"",is:!1},qq:{name:"",version:"",is:!1},tenvideo:{name:"",version:"",is:!1},qqmusic:{name:"",version:"",is:!1},qqac:{name:"",version:"",is:!1},tadchid:{name:"",version:"",is:!1},ucbrowser:{name:"",version:"",is:!1},chrome:{name:"",version:"",is:!1},safari:{name:"",version:"",is:!1},hwbrowser:{name:"",version:"",is:!1},qzone:{name:"",version:"",is:!1},weishi:{name:"",version:"",is:!1},miuibrowser:{name:"",version:"",is:!1}};if(typeof window=="undefined")return Z;for(var ee=(J||window.navigator.userAgent).toLowerCase(),te={qqnewslite:/tadchid/.test(ee)?null:ee.match(/qqnewslite\/(\d+\.\d+\.\d+)/),qqnews:/tadchid/.test(ee)?null:ee.match(/qqnews\/(\d+\.\d+\.\d+)/),weixin:/wxwork/i.test(ee)?null:ee.match(/MicroMessenger\/((\d+)\.(\d+)\.(\d+))/i),wxwork:ee.match(/wxwork\/(\d+\.\d+\.\d+)/i),qq:ee.match(/qq\/(\d+\.\d+)/),tenvideo:ee.match(/qqlivebrowser/),qqmusic:ee.match(/qqmusic/),qqac:ee.match(/qqac_client/),weibo:ee.match(/weibo/),tadchid:/qqnews/i.test(ee)?ee.match(/tadchid\/(\d+)/):null,ucbrowser:ee.match(/ucbrowser\/(\d+\.\d+)/i),mqqbrowser:ee.match(/mqqbrowser\/(\d+\.\d+)/),chrome:/android/.test(ee)?ee.match(/chrome\/(\d+\.\d+)/):ee.match(/crios\/(\d+\.\d+)/),safari:ee.match(/safari\/(\d+\.\d+)/),hwbrowser:ee.match(/huawei|honor/),qzone:ee.match(/qzone\/[\w\d_]*(\d\.\d)[.\w\d_]*/i),weishi:ee.match(/weishi_(\d+?\.\d+?\.\d+?)/i),miuibrowser:ee.match(/miuibrowser\/(\d+?\.\d+?\.\d+?)/i)},re=Object.keys(te),ie=0,ne=re.length;ie<ne;ie++){var oe=re[ie],se=te[oe];if(se){Z.version=se[1]||"0",Z.name=oe;break}}var ae="mqqbrowser";for(ae in te){var le=te[ae];le&&(Z[ae]={name:ae,version:le[1]||"0",is:!0})}return Z};G.getBrowserInfo=L;var Y=function(J){return(0,G.getSystemInfo)(J).android};G.isAndroid=Y;var X=function(J){return(0,G.getBrowserInfo)(J).name==="qqnews"};G.isNewsApp=X;var W=function(J){return(0,G.getBrowserInfo)(J).name==="qqnewslite"};G.isLiteNewsApp=W;var z={getBrowserInfo:G.getBrowserInfo,getSystemInfo:G.getSystemInfo,isAndroid:G.isAndroid,isNewsApp:G.isNewsApp,isLiteNewsApp:G.isLiteNewsApp};G.default=z})(ua);var cookie={};(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.delCookie=G.getCookie=G.setCookie=void 0;var U=function(X,W,z){z===void 0&&(z=30);var J=new Date;J.setTime(J.getTime()+z*24*60*60*1e3),document.cookie="".concat(X,"=").concat(encodeURI(W.toString()),";path=/;expires=").concat(J.toUTCString())};G.setCookie=U;var L=function(X,W){W===void 0&&(W=0);var z=new RegExp("(^| )".concat(X,"=([^;]*)(;|$)")),J=document.cookie.match(z);return J?W?J[2]:decodeURI(J[2]):null};G.getCookie=L;var Y=function(X){if(!!X){var W=new Date;W.setTime(W.getTime()-1),document.cookie="".concat(X,"=; expires=").concat(W.toUTCString(),";path=/")}};G.delCookie=Y,G.default={setCookie:G.setCookie,getCookie:G.getCookie,delCookie:G.delCookie}})(cookie);(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.PageVisibility=G.delCookie=G.getCookie=G.setCookie=G.isLiteNewsApp=G.isNewsApp=G.isAndroid=G.getSystemInfo=G.getBrowserInfo=G.getScript=G.loadScript=G.truncate=G.strReplace=G.getRandom=G.buildFullPath=G.combineURLs=G.http2https=G.isAbsolute=G.getQueryString=G.sleep=G.getWeekStartAndEnd=G.formatTime=G.isSameDay=void 0;var U=visibility;G.PageVisibility=U.default;var L=date;Object.defineProperty(G,"isSameDay",{enumerable:!0,get:function(){return L.isSameDay}}),Object.defineProperty(G,"formatTime",{enumerable:!0,get:function(){return L.formatTime}}),Object.defineProperty(G,"getWeekStartAndEnd",{enumerable:!0,get:function(){return L.getWeekStartAndEnd}}),Object.defineProperty(G,"sleep",{enumerable:!0,get:function(){return L.sleep}});var Y=url;Object.defineProperty(G,"getQueryString",{enumerable:!0,get:function(){return Y.getQueryString}}),Object.defineProperty(G,"isAbsolute",{enumerable:!0,get:function(){return Y.isAbsolute}}),Object.defineProperty(G,"http2https",{enumerable:!0,get:function(){return Y.http2https}}),Object.defineProperty(G,"combineURLs",{enumerable:!0,get:function(){return Y.combineURLs}}),Object.defineProperty(G,"buildFullPath",{enumerable:!0,get:function(){return Y.buildFullPath}});var X=string;Object.defineProperty(G,"getRandom",{enumerable:!0,get:function(){return X.getRandom}}),Object.defineProperty(G,"strReplace",{enumerable:!0,get:function(){return X.strReplace}}),Object.defineProperty(G,"truncate",{enumerable:!0,get:function(){return X.truncate}}),Object.defineProperty(G,"loadScript",{enumerable:!0,get:function(){return X.loadScript}}),Object.defineProperty(G,"getScript",{enumerable:!0,get:function(){return X.getScript}});var W=ua;Object.defineProperty(G,"getBrowserInfo",{enumerable:!0,get:function(){return W.getBrowserInfo}}),Object.defineProperty(G,"getSystemInfo",{enumerable:!0,get:function(){return W.getSystemInfo}}),Object.defineProperty(G,"isAndroid",{enumerable:!0,get:function(){return W.isAndroid}}),Object.defineProperty(G,"isNewsApp",{enumerable:!0,get:function(){return W.isNewsApp}}),Object.defineProperty(G,"isLiteNewsApp",{enumerable:!0,get:function(){return W.isLiteNewsApp}});var z=cookie;Object.defineProperty(G,"setCookie",{enumerable:!0,get:function(){return z.setCookie}}),Object.defineProperty(G,"getCookie",{enumerable:!0,get:function(){return z.getCookie}}),Object.defineProperty(G,"delCookie",{enumerable:!0,get:function(){return z.delCookie}})})(dist);var weixin={},eventemitter3={exports:{}};(function(G){var U=Object.prototype.hasOwnProperty,L="~";function Y(){}Object.create&&(Y.prototype=Object.create(null),new Y().__proto__||(L=!1));function X(Z,ee,te){this.fn=Z,this.context=ee,this.once=te||!1}function W(Z,ee,te,re,ie){if(typeof te!="function")throw new TypeError("The listener must be a function");var ne=new X(te,re||Z,ie),oe=L?L+ee:ee;return Z._events[oe]?Z._events[oe].fn?Z._events[oe]=[Z._events[oe],ne]:Z._events[oe].push(ne):(Z._events[oe]=ne,Z._eventsCount++),Z}function z(Z,ee){--Z._eventsCount===0?Z._events=new Y:delete Z._events[ee]}function J(){this._events=new Y,this._eventsCount=0}J.prototype.eventNames=function(){var ee=[],te,re;if(this._eventsCount===0)return ee;for(re in te=this._events)U.call(te,re)&&ee.push(L?re.slice(1):re);return Object.getOwnPropertySymbols?ee.concat(Object.getOwnPropertySymbols(te)):ee},J.prototype.listeners=function(ee){var te=L?L+ee:ee,re=this._events[te];if(!re)return[];if(re.fn)return[re.fn];for(var ie=0,ne=re.length,oe=new Array(ne);ie<ne;ie++)oe[ie]=re[ie].fn;return oe},J.prototype.listenerCount=function(ee){var te=L?L+ee:ee,re=this._events[te];return re?re.fn?1:re.length:0},J.prototype.emit=function(ee,te,re,ie,ne,oe){var se=L?L+ee:ee;if(!this._events[se])return!1;var ae=this._events[se],le=arguments.length,ue,ce;if(ae.fn){switch(ae.once&&this.removeListener(ee,ae.fn,void 0,!0),le){case 1:return ae.fn.call(ae.context),!0;case 2:return ae.fn.call(ae.context,te),!0;case 3:return ae.fn.call(ae.context,te,re),!0;case 4:return ae.fn.call(ae.context,te,re,ie),!0;case 5:return ae.fn.call(ae.context,te,re,ie,ne),!0;case 6:return ae.fn.call(ae.context,te,re,ie,ne,oe),!0}for(ce=1,ue=new Array(le-1);ce<le;ce++)ue[ce-1]=arguments[ce];ae.fn.apply(ae.context,ue)}else{var he=ae.length,fe;for(ce=0;ce<he;ce++)switch(ae[ce].once&&this.removeListener(ee,ae[ce].fn,void 0,!0),le){case 1:ae[ce].fn.call(ae[ce].context);break;case 2:ae[ce].fn.call(ae[ce].context,te);break;case 3:ae[ce].fn.call(ae[ce].context,te,re);break;case 4:ae[ce].fn.call(ae[ce].context,te,re,ie);break;default:if(!ue)for(fe=1,ue=new Array(le-1);fe<le;fe++)ue[fe-1]=arguments[fe];ae[ce].fn.apply(ae[ce].context,ue)}}return!0},J.prototype.on=function(ee,te,re){return W(this,ee,te,re,!1)},J.prototype.once=function(ee,te,re){return W(this,ee,te,re,!0)},J.prototype.removeListener=function(ee,te,re,ie){var ne=L?L+ee:ee;if(!this._events[ne])return this;if(!te)return z(this,ne),this;var oe=this._events[ne];if(oe.fn)oe.fn===te&&(!ie||oe.once)&&(!re||oe.context===re)&&z(this,ne);else{for(var se=0,ae=[],le=oe.length;se<le;se++)(oe[se].fn!==te||ie&&!oe[se].once||re&&oe[se].context!==re)&&ae.push(oe[se]);ae.length?this._events[ne]=ae.length===1?ae[0]:ae:z(this,ne)}return this},J.prototype.removeAllListeners=function(ee){var te;return ee?(te=L?L+ee:ee,this._events[te]&&z(this,te)):(this._events=new Y,this._eventsCount=0),this},J.prototype.off=J.prototype.removeListener,J.prototype.addListener=J.prototype.on,J.prefixed=L,J.EventEmitter=J,G.exports=J})(eventemitter3);var request$1={};Object.defineProperty(request$1,"__esModule",{value:!0});var request=function(G,U){var L=[];for(var Y in U)L.push("".concat(encodeURIComponent(Y),"=").concat(encodeURIComponent(U[Y])));var X=L.join("&");return new Promise(function(W,z){if(window.XMLHttpRequest){var J=new window.XMLHttpRequest;J.onreadystatechange=function(){J.readyState===4&&(J.status>=200&&J.status<=304?W(JSON.parse(J.responseText)):z(J.status))},J.open("POST",G,!0),J.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),J.withCredentials=!0,J.send(X)}})};request$1.default=request;var DownloadListener={};Object.defineProperty(DownloadListener,"__esModule",{value:!0});DownloadListener.DOWNLOADER=void 0;DownloadListener.DOWNLOADER={DOWNLOADSTART:"downloadStart",DOWNLOADING:"downloadIng",DOWNLOADSTEPS:"downloadSteps",DOWNLOADSUCCESS:"downloadSuccess",INSTALLPENDING:"installPending",INSTALLSUCCESS:"installSuccess",CANCEl:"cancel",REMOVED:"removed",ERROR:"error",UNKNOWN:"unknown"};var __extends$t=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$s=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$s=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$s.apply(this,arguments)},__awaiter$h=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$h=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(weixin,"__esModule",{value:!0});var eventemitter3_1$8=eventemitter3.exports,gh_qqnews_utils_1$7=dist,request_1$1=request$1,DownloadListener_1$3=DownloadListener,WeixinAppDownloader=function(G){__extends$t(U,G);function U(L){var Y=G.call(this)||this;return Y.isReady=!1,Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:"",developer:"",appVersion:"",privacyUrl:"",permissionUrl:""},Y.version=0,Y.WeixinJSBridge=null,Y.data=__assign$s(__assign$s({},Y.data),L),Y}return U.prototype.ready=function(){var L=this;if(this.WeixinJSBridge||this.isReady)return Promise.resolve(this.WeixinJSBridge);if(typeof window.WeixinJSBridge!="undefined")return this.WeixinJSBridge=window.WeixinJSBridge,Promise.resolve(window.WeixinJSBridge);if(window.self!==window.top)return window.top&&typeof window.top.WeixinJSBridge!="undefined"?(this.isReady=!0,this.WeixinJSBridge=window.top.WeixinJSBridge,Promise.resolve(window.top.WeixinJSBridge)):new Promise(function(X,W){var z=20,J=setInterval(function(){z-=1,z<=0?(clearInterval(J),W(new Error("[@tencent/gh-qqnews-downapp] get WeixinJSBridge error in ready"))):typeof window.top.WeixinJSBridge!="undefined"&&(clearInterval(J),L.isReady=!0,L.WeixinJSBridge=window.top.WeixinJSBridge,X(window.top.WeixinJSBridge))},300)});var Y=6e3;return new Promise(function(X,W){var z=setTimeout(function(){W(new Error("[@tencent/gh-qqnews-downapp] get WeixinJSBridge timeout in ".concat(Y,"ms")))},Y);window.WeixinJSBridgeReady=function(){L.isReady=!0,L.WeixinJSBridge=window.WeixinJSBridge,clearTimeout(z),X(window.WeixinJSBridge)},document.addEventListener("WeixinJSBridgeReady",window.WeixinJSBridgeReady,!1)})},U.prototype.getVersion=function(){if(this.version)return this.version;var L=navigator.userAgent.toLowerCase().match(/micromessenger\/(\d+)\.(\d+)\.(\d+)/)||["",0,0,0],Y=L[0],X=L[1],W=L[2],z=L[3];return Y?(this.version=Number(X)*100+Number(W)+Number(z)/1e3,this.version):0},U.prototype.getNetworkType=function(L){return __awaiter$h(this,void 0,void 0,function(){var Y,X=this;return __generator$h(this,function(W){switch(W.label){case 0:return[4,this.ready()];case 1:return W.sent(),Y={fail:"none",edge:"wwan",wwan:"wwan",wifi:"wifi"},[2,new Promise(function(z){X.WeixinJSBridge.invoke("getNetworkType",{},function(J){var Z=J.err_msg,ee=(Z.match(/(wifi|wwan|edge|fail)/)||["fail"])[0];typeof L=="function"&&L(Y[ee]),z(Y[ee])})})]}})})},U.prototype.run=function(L){var Y=this;L===void 0&&(L="");var X=L||this.data.openUrl;this.checkAppIsInstalled(function(W){W?Y.openApp(X):Y.download()})},U.prototype.checkAppIsInstalled=function(L){return __awaiter$h(this,void 0,void 0,function(){var Y,X=this;return __generator$h(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,3]),[4,this.ready()];case 1:return W.sent(),[3,3];case 2:return Y=W.sent(),console.error(Y),[2,!1];case 3:return[2,new Promise(function(z){X.WeixinJSBridge.invoke("getInstallState",{packageName:X.data.packageName,packageUrl:X.data.openUrl},function(J){var Z=J.err_msg,ee=!1;return Z&&Z.indexOf("yes")>-1&&(ee=!0),typeof L=="function"&&L(ee),z(ee),ee})})]}})})},U.prototype.openApp=function(L){return L===void 0&&(L=""),__awaiter$h(this,void 0,void 0,function(){var Y,X,W,z=this;return __generator$h(this,function(J){switch(J.label){case 0:return J.trys.push([0,2,,3]),[4,this.ready()];case 1:return J.sent(),[3,3];case 2:return Y=J.sent(),console.error(Y),[2,Promise.reject(new Error("WeixinAppDownloader.openApp ready error"))];case 3:if(X=L||this.data.openUrl||"",!X&&!this.data.wxAppId)throw new Error("openUrl or wxAppId must need at least one");return W={schemeUrl:X},this.data.wxAppId&&(W={appID:this.data.wxAppId,parameter:X,extInfo:X}),this.getVersion()>=605.006?[2,new Promise(function(Z,ee){z.WeixinJSBridge.invoke("launchApplication",W,function(te){var re=te.err_msg;re==="launchApplication:ok"?Z(!0):re==="launchApplication:fail"&&ee(new Error("WeixinAppDownloader.openApp faied"))})})]:(window.location.href=X,[2,Promise.resolve(!0)])}})})},U.prototype.getDownloadConfig=function(){return __awaiter$h(this,void 0,void 0,function(){var L,Y,X,W,z,J;return __generator$h(this,function(Z){switch(Z.label){case 0:if(this.data.appVersion)return[2,this.data];if(L="gh.downapp",Y=window.sessionStorage.getItem(L),Y)try{return X=JSON.parse(Y),[2,__assign$s(__assign$s({},this.data),{developer:X.name.txt,appVersion:X.ver.txt,privacyUrl:X.yinsi.url,permissionUrl:X.quanxian.url})]}catch(ee){}return W="https://api.prize.qq.com/v1/newsapp/answer/other/config?actname=download_app_info",[4,(0,request_1$1.default)(W)];case 1:return z=Z.sent(),z.code===0&&z.data&&(J=z.data.data.peizhi.app_info,J)?(window.sessionStorage&&window.sessionStorage.setItem(L,JSON.stringify(J)),[2,__assign$s(__assign$s({},this.data),{developer:J.name.txt,appVersion:J.ver.txt,privacyUrl:J.yinsi.url,permissionUrl:J.quanxian.url})]):[2,this.data]}})})},U.prototype.download=function(){return __awaiter$h(this,void 0,void 0,function(){var L,Y,X,W=this;return __generator$h(this,function(z){switch(z.label){case 0:if(!(0,gh_qqnews_utils_1$7.getSystemInfo)().android)return[3,6];z.label=1;case 1:return z.trys.push([1,3,,4]),[4,this.ready()];case 2:return z.sent(),[3,4];case 3:return L=z.sent(),[2,console.error(L)];case 4:return[4,this.getDownloadConfig()];case 5:return Y=z.sent(),this.WeixinJSBridge.invoke("addDownloadTask",{task_name:Y.appName,task_url:Y.downloadUrl,thumb_url:Y.downLogo,developer:Y.developer,app_version:Y.appVersion,privacy_agreement_url:Y.privacyUrl,permission_url:Y.permissionUrl},function(J){var Z=J.err_msg,ee=J.download_id;if(W.getVersion()>=605.007)if(Z==="addDownloadTask:ok"||Z==="add_download_task:ok")W.emit(DownloadListener_1$3.DOWNLOADER.DOWNLOADSTART),W.addDownloadLister();else if(Z==="addDownloadTask:cancel"||Z==="add_download_task:cancel")W.emit(DownloadListener_1$3.DOWNLOADER.CANCEl);else throw new Error("WeixinAppDownloader.download error, err_msg: ".concat(Z));else W.install(ee)}),this.fallbackDownload(),[3,7];case 6:X=this.data.appleStoreId,window.location.href="http://itunes.apple.com/cn/app/id".concat(X),z.label=7;case 7:return[2]}})})},U.prototype.fallbackDownload=function(){var L=this,Y=setTimeout(function(){window.location.href=L.data.downloadUrl||""},2e3),X=function(){clearTimeout(Y),window.removeEventListener("blur",X)};setTimeout(function(){window.removeEventListener("blur",X)},3e3),window.addEventListener("blur",X)},U.prototype.addDownloadLister=function(){var L=this;this.WeixinJSBridge.on("wxdownload:state_change",function(Y){var X=Y.err_code,W=Y.state;switch(W){case"download_start":{L.emit(DownloadListener_1$3.DOWNLOADER.DOWNLOADSTART);break}case"downloading":{L.emit(DownloadListener_1$3.DOWNLOADER.DOWNLOADING);break}case"download_fail":{L.emit(DownloadListener_1$3.DOWNLOADER.ERROR,{err_code:X});break}case"download_removed":{L.emit(DownloadListener_1$3.DOWNLOADER.REMOVED);break}case"download_succ":{L.emit(DownloadListener_1$3.DOWNLOADER.DOWNLOADSUCCESS);break}default:console.error("WeixinAppDownloader.addDownloadLister: unkown state: ".concat(W))}})},U.prototype.install=function(L){this.WeixinJSBridge.invoke("installDownloadTask",{download_id:L})},U}(eventemitter3_1$8.EventEmitter);weixin.default=WeixinAppDownloader;var qq={},__extends$s=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$r=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$r=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$r.apply(this,arguments)},__awaiter$g=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$g=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(qq,"__esModule",{value:!0});var eventemitter3_1$7=eventemitter3.exports,gh_qqnews_utils_1$6=dist,DownloadListener_1$2=DownloadListener,QQAppDownloader=function(G){__extends$s(U,G);function U(L){var Y=G.call(this)||this;return Y.isReady=!1,Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.mqq=null,Y.data=__assign$r(__assign$r({},Y.data),L),Y}return U.prototype.ready=function(){var L,Y;return __awaiter$g(this,void 0,void 0,function(){var X,W,z=this;return __generator$g(this,function(J){switch(J.label){case 0:if(this.isReady||this.mqq)return[2,!0];if(window.mqq||((L=window.top)===null||L===void 0?void 0:L.mqq))return this.isReady=!0,this.mqq=window.mqq||((Y=window.top)===null||Y===void 0?void 0:Y.mqq),[2,!0];X=function(){var Z="//open.mobile.qq.com/sdk/qqapi.js?_bid=152";return new Promise(function(ee,te){(0,gh_qqnews_utils_1$6.loadScript)(Z,{iframe:window.top!==window.self}).then(function(){var re;z.isReady=!0,z.mqq=window.mqq||((re=window.top)===null||re===void 0?void 0:re.mqq),ee(!0)}).catch(te)})},J.label=1;case 1:return J.trys.push([1,3,,4]),[4,X()];case 2:return[2,J.sent()];case 3:return J.sent(),[3,4];case 4:return J.trys.push([4,6,,7]),[4,X()];case 5:return[2,J.sent()];case 6:return W=J.sent(),console.error("[@tencent/gh-qqnews-downapp] get qqapi error, ".concat(W.message)),[2,!1];case 7:return[2]}})})},U.prototype.getNetworkType=function(L){return __awaiter$g(this,void 0,void 0,function(){var Y,X=this;return __generator$g(this,function(W){switch(W.label){case 0:return[4,this.ready()];case 1:return W.sent(),Y={"-1":"none",0:"none",1:"wifi",2:"wwan",3:"wwan",4:"wwan"},[2,new Promise(function(z){X.mqq.device.getNetworkType(function(J){typeof L=="function"&&L(Y[J]),z(Y[J])})})]}})})},U.prototype.downloadApp=function(L,Y){this.mqq.app.downloadApp({appid:this.data.appleStoreId,url:this.data.downloadUrl,packageName:this.data.packageName,actionCode:L,via:"ANDROIDQQ.TXREADING",appName:this.data.appName},function(X){typeof Y=="function"&&Y(X)})},U.prototype.run=function(L){var Y=this;L===void 0&&(L=""),this.checkAppIsInstalled(function(X){X?Y.openApp(L):Y.download()})},U.prototype.checkAppIsInstalled=function(L){return __awaiter$g(this,void 0,void 0,function(){var Y=this;return __generator$g(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),[2,new Promise(function(W){var z=(0,gh_qqnews_utils_1$6.getSystemInfo)().android?Y.data.packageName:Y.data.openUrl;Y.mqq.app.isAppInstalled(z,function(J){var Z=!1;typeof J=="object"?Number(J.code)===0&&J.result&&(Z=!0):J&&(Z=!0),typeof L=="function"&&L(Z),W(Z)})})]}})})},U.prototype.openApp=function(L){return L===void 0&&(L=""),__awaiter$g(this,void 0,void 0,function(){var Y;return __generator$g(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:if(X.sent(),Y=L||this.data.openUrl||"",!Y)throw new TypeError("QQAppDownloader.openApp: openUrl is needed");return(0,gh_qqnews_utils_1$6.getSystemInfo)().android?window.location.href=Y:this.mqq.app.launchApp(Y),[2,Promise.resolve(!0)]}})})},U.prototype.download=function(){return __awaiter$g(this,void 0,void 0,function(){var L=this;return __generator$g(this,function(Y){switch(Y.label){case 0:return(0,gh_qqnews_utils_1$6.getSystemInfo)().android?[4,this.ready()]:[3,2];case 1:return Y.sent(),this.emit(DownloadListener_1$2.DOWNLOADER.DOWNLOADSTART),this.downloadApp(2,function(X){var W=X.state,z=X.pro;W===4&&(z=100),L.emit(DownloadListener_1$2.DOWNLOADER.DOWNLOADSTEPS,z),z>=100&&setTimeout(function(){L.install()},200)}),[3,3];case 2:if(!this.data.appleStoreId)throw new TypeError("WeixinAppDownloader.download error: appleStoreId is needed");window.location.href="http://itunes.apple.com/cn/app/id".concat(this.data.appleStoreId),Y.label=3;case 3:return[2]}})})},U.prototype.install=function(){var L=this;this.emit(DownloadListener_1$2.DOWNLOADER.INSTALLPENDING),this.downloadApp(5,function(Y){var X=Y.state;X===9&&L.emit(DownloadListener_1$2.DOWNLOADER.INSTALLSUCCESS)})},U}(eventemitter3_1$7.EventEmitter);qq.default=QQAppDownloader;var tadchid={},__extends$r=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$q=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$q=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$q.apply(this,arguments)};Object.defineProperty(tadchid,"__esModule",{value:!0});var eventemitter3_1$6=eventemitter3.exports,TadChidAppDownloader=function(G){__extends$r(U,G);function U(L){var Y=G.call(this)||this;return Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$q(__assign$q({},Y.data),L),Y}return U.prototype.getNetworkType=function(L){return typeof L=="function"&&L("none"),Promise.resolve("none")},U.prototype.run=function(L){L===void 0&&(L=""),this.openApp(L)},U.prototype.checkAppIsInstalled=function(L){return typeof L=="function"&&L(!0),Promise.resolve(!0)},U.prototype.openApp=function(L){return L===void 0&&(L=""),window.location.href=L||this.data.openUrl||"",Promise.resolve(!0)},U.prototype.download=function(){console.log("not nedd download")},U}(eventemitter3_1$6.EventEmitter);tadchid.default=TadChidAppDownloader;var qqnews={},rAF={};Object.defineProperty(rAF,"__esModule",{value:!0});rAF.createCbName=void 0;var createCbName=function(G){return G===void 0&&(G="cb"),"".concat(G,"_").concat(Math.random().toString(36).slice(2))};rAF.createCbName=createCbName;var __extends$q=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$p=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$p=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$p.apply(this,arguments)},__awaiter$f=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$f=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(qqnews,"__esModule",{value:!0});var eventemitter3_1$5=eventemitter3.exports,rAF_1=rAF,gh_qqnews_utils_1$5=dist,os=(0,gh_qqnews_utils_1$5.getSystemInfo)(),QQNewsAppDownloader=function(G){__extends$q(U,G);function U(L){var Y=G.call(this)||this;return Y.isReady=!1,Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$p(__assign$p({},Y.data),L),Y}return U.prototype.ready=function(){var L=this;return this.isReady?Promise.resolve(!0):window.TencentNews?(this.isReady=!0,Promise.resolve(!0)):os.android?new Promise(function(Y,X){(0,gh_qqnews_utils_1$5.loadScript)("https://mat1.gtimg.com/www/js/newsapp/jsapi/news.js?_tsid=1",{iframe:window.top!==window.self}).then(function(){L.isReady=!0,Y(!0)}).catch(X)}):new Promise(function(Y,X){var W=15,z=setInterval(function(){W-=1,W<=0?(clearInterval(z),X(new Error("get TencentNews error"))):window.TencentNews&&window.jsBridge&&(clearInterval(z),L.isReady=!0,Y(window.TencentNews))},300);document.addEventListener("TencentNewsJSInjectionComplete",function(){clearInterval(z),L.isReady=!0,Y(!0)})})},U.prototype.getNetworkType=function(L){return __awaiter$f(this,void 0,void 0,function(){var Y,X;return __generator$f(this,function(W){switch(W.label){case 0:return[4,this.ready()];case 1:return W.sent(),Y=(0,rAF_1.createCbName)("networkCallback"),X={0:"none",1:"wifi",2:"wwan",3:"wwan"},[2,new Promise(function(z){window[Y]=function(J){typeof L=="function"&&L(X[J]),z(X[J]),delete window[Y]},(0,gh_qqnews_utils_1$5.getSystemInfo)().android?window.TencentNews.getNetworkStatus(Y):window.TencentNews.getNetworkStatus(window[Y])})]}})})},U.prototype.run=function(L){var Y=this;L===void 0&&(L="");var X=L||this.data.openUrl||"";X.indexOf("http://")===0||X.indexOf("https://")===0||(0,gh_qqnews_utils_1$5.getBrowserInfo)().name==="qqnews"&&X.indexOf("qqnews://")===0||(0,gh_qqnews_utils_1$5.getBrowserInfo)().name==="qqnewslite"&&X.indexOf("qqnewslite://")===0?this.openApp(X):this.checkAppIsInstalled(function(W){if(W)Y.openApp(L);else{Y.openApp(L);var z=new Date().valueOf();setTimeout(function(){var J=new Date().valueOf();new gh_qqnews_utils_1$5.PageVisibility().isShow()&&1560>J-z&&Y.download()},1500)}})},U.prototype.checkAppIsInstalled=function(L){return __awaiter$f(this,void 0,void 0,function(){var Y=this;return __generator$f(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),[2,new Promise(function(W){var z=os.android?Y.data.packageName:Y.data.openUrl,J=(0,rAF_1.createCbName)();window[J]=function(Z,ee){var te=!!(os.android?Z:ee);typeof L=="function"&&L(te),W(te)},os.android?window.TencentNews.checkCanOpenNativeUrl(z,J):window.TencentNews.checkCanOpenNativeUrl(z,window[J])})]}})})},U.prototype.openApp=function(L){return L===void 0&&(L=""),__awaiter$f(this,void 0,void 0,function(){var Y;return __generator$f(this,function(X){switch(X.label){case 0:return Y=L||this.data.openUrl||"",Y.indexOf("http://")===0||Y.indexOf("https://")===0||(0,gh_qqnews_utils_1$5.getBrowserInfo)().name==="qqnews"&&Y.indexOf("qqnews://")===0||(0,gh_qqnews_utils_1$5.getBrowserInfo)().name==="qqnewslite"&&Y.indexOf("qqnewslite://")===0?(window.location.href=Y,[2,!0]):[4,this.ready()];case 1:return X.sent(),os.android?window.TencentNews.openApp(Y,this.data.packageName):window.TencentNews.openNativeUrl(Y,null,null),[2,!0]}})})},U.prototype.download=function(){return __awaiter$f(this,void 0,void 0,function(){return __generator$f(this,function(L){switch(L.label){case 0:return[4,this.ready()];case 1:return L.sent(),os.android?window.TencentNews.downloadApp(this.data.downloadUrl,this.data.packageName,this.data.appName):window.location.href="http://itunes.apple.com/cn/app/id".concat(this.data.appleStoreId),[2]}})})},U}(eventemitter3_1$5.EventEmitter);qqnews.default=QQNewsAppDownloader;var qqvideo={},__extends$p=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$o=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$o=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$o.apply(this,arguments)},__awaiter$e=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$e=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(qqvideo,"__esModule",{value:!0});var eventemitter3_1$4=eventemitter3.exports,DownloadListener_1$1=DownloadListener,QQVideoAppDownloader=function(G){__extends$p(U,G);function U(L){var Y=G.call(this)||this;return Y.isReady=!1,Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$o(__assign$o({},Y.data),L),Y}return U.prototype.ready=function(){var L=this;return typeof window.TenvideoJSBridge!="undefined"||this.isReady?Promise.resolve(window.TenvideoJSBridge):new Promise(function(Y){window.TenVideoReadyCallback=function(){L.isReady=!0,Y(window.TenvideoJSBridge),delete window.TenVideoReadyCallback},document.addEventListener("onTenvideoJSBridgeReady",window.TenVideoReadyCallback,!1)})},U.prototype.getNetworkType=function(L){return __awaiter$e(this,void 0,void 0,function(){var Y;return __generator$e(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),Y={0:"none",1:"wifi",2:"wwan",3:"wwan",4:"wwan",5:"wwan"},[2,new Promise(function(W){window.TenvideoJSBridge.invoke("getNetworkState",null,function(z){var J=JSON.parse(z).result.state;typeof L=="function"&&L(Y[J]),W(Y[J])})})]}})})},U.prototype.run=function(L){var Y=this;L===void 0&&(L=""),this.checkAppIsInstalled(function(X){X?Y.openApp(L):Y.download()})},U.prototype.checkAppIsInstalled=function(L){return __awaiter$e(this,void 0,void 0,function(){var Y=this;return __generator$e(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),[2,new Promise(function(W){window.TenvideoJSBridge.invoke("isInstalled",{pkgName:Y.data.packageName,pkgUrl:Y.data.openUrl},function(z){var J=JSON.parse(z),Z=J.errCode,ee=J.result.installed,te=String(Z)==="0"?!!ee:!1;typeof L=="function"&&L(te),W(te),String(Z)!=="0"&&console.error("QQVideoAppDownloader.checkAppInstall get error: ".concat(Z))})})]}})})},U.prototype.openApp=function(L){L===void 0&&(L="");var Y=L||this.data.openUrl||"";if(Y)window.location.href=Y;else throw new TypeError("QQVideoAppDownloader.openApp: openUrl is needed");return Promise.resolve(!0)},U.prototype.download=function(){return __awaiter$e(this,void 0,void 0,function(){var L,Y,X,W,z,J,Z;return __generator$e(this,function(ee){switch(ee.label){case 0:return[4,this.ready()];case 1:return ee.sent(),L=this.data,Y=L.openUrl,X=L.downloadUrl,W=L.packageName,z=L.downLogo,J=L.appName,Z=L.appleStoreId,window.TenvideoJSBridge.invoke("download3rdApp",{downloadUrl:X,packageName:W,iconUrl:z,appName:J,itunesUrl:"http://itunes.apple.com/cn/app/id".concat(Z),packageUrl:Y}),[2]}})})},U.prototype.addDownloadLister=function(){var L=this;window.TenvideoJSBridge.on("onDownloadTaskStateChanged",function(Y){var X=Y.state;switch(X){case 10:{L.emit(DownloadListener_1$1.DOWNLOADER.INSTALLSUCCESS);break}case 11:case 12:{L.emit(DownloadListener_1$1.DOWNLOADER.DOWNLOADSTART);break}case 13:{L.emit(DownloadListener_1$1.DOWNLOADER.DOWNLOADING);break}case 17:{L.emit(DownloadListener_1$1.DOWNLOADER.ERROR);break}}}),window.TenvideoJSBridge.on("onDownloadTaskProgressChanged",function(Y){var X=Y.progress;L.emit(DownloadListener_1$1.DOWNLOADER.DOWNLOADSTEPS,X)})},U}(eventemitter3_1$4.EventEmitter);qqvideo.default=QQVideoAppDownloader;var qqmusic={},__extends$o=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$n=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$n=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$n.apply(this,arguments)},__awaiter$d=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$d=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(qqmusic,"__esModule",{value:!0});var eventemitter3_1$3=eventemitter3.exports,DownloadListener_1=DownloadListener,gh_qqnews_utils_1$4=dist,QQMusicAppDownloader=function(G){__extends$o(U,G);function U(L){var Y=G.call(this)||this;return Y.isReady=!1,Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$n(__assign$n({},Y.data),L),Y}return U.prototype.ready=function(){var L=this;return typeof window.M!="undefined"||this.isReady?Promise.resolve(window.M):new Promise(function(Y){window.TenMusicReadyCallback=function(){L.isReady=!0,Y(window.TenMusicReadyCallback),delete window.TenMusicReadyCallback},document.addEventListener("WebViewJavascriptBridgeReady",window.TenMusicReadyCallback,!1)})},U.prototype.run=function(L){var Y=this;L===void 0&&(L=""),(0,gh_qqnews_utils_1$4.getSystemInfo)().android?this.checkAppIsInstalled(function(X){X?Y.openApp(L):Y.download()}):this.openApp(L).catch(function(){Y.download()})},U.prototype.getNetworkType=function(L){return __awaiter$d(this,void 0,void 0,function(){var Y;return __generator$d(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),Y={unknown:"none",none:"none",wifi:"wifi","2G":"wwan","3G":"wwan","4G":"wwan","5G":"wwan"},[2,new Promise(function(W){window.M.client.invoke("device","getNetworkType",{},function(z){var J=z.code,Z=z.data.type;if(J===0)typeof L=="function"&&L(Y[Z]),W(Y[Z]);else throw new Error("QQMusicAppDownloader.getNetworkType error: ".concat(J))})})]}})})},U.prototype.checkAppIsInstalled=function(L){return __awaiter$d(this,void 0,void 0,function(){var Y=this;return __generator$d(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:return X.sent(),[2,new Promise(function(W){window.M.client.invoke("app","isInstalled",{android:[Y.data.packageName],ios:[Y.data.openUrl]},function(z){var J=z.code,Z=z.data.installed,ee=Number(J)===0&&Z.length>0?Number(Z[0])===1:!1;typeof L=="function"&&L(ee),W(ee),Number(J)!==0&&console.error("QQMusicAppDownloader.checkAppInstall get error: ".concat(J))})})]}})})},U.prototype.openApp=function(L){return L===void 0&&(L=""),__awaiter$d(this,void 0,void 0,function(){var Y;return __generator$d(this,function(X){switch(X.label){case 0:return Y=L||this.data.openUrl||"",(0,gh_qqnews_utils_1$4.getSystemInfo)().android?(window.location.href=Y,[2,Promise.resolve(!0)]):[4,this.ready()];case 1:return X.sent(),[2,new Promise(function(W,z){window.M.client.invoke("ui","openUrl",{url:Y,target:"app",type:"default"},function(J){var Z=J.code;Z===0?W(!0):Z===1&&z(new Error("QQMusicAppDownloader.openApp error: ".concat(Z)))})})]}})})},U.prototype.downloadApp=function(L){var Y=this;return new Promise(function(X){window.M.client.invoke("app","downloadApp",{appid:Y.data.appleStoreId,url:Y.data.downloadUrl,packageName:Y.data.packageName,actionCode:L,appName:Y.data.appName},function(W){var z=W.code;X(z)})})},U.prototype.download=function(){return __awaiter$d(this,void 0,void 0,function(){var L,Y;return __generator$d(this,function(X){switch(X.label){case 0:return[4,this.ready()];case 1:X.sent(),(0,gh_qqnews_utils_1$4.getSystemInfo)().android&&this.addDownloadLister(),X.label=2;case 2:return X.trys.push([2,4,,5]),[4,this.downloadApp("0")];case 3:return L=X.sent(),L===0&&this.downloadApp("1"),[3,5];case 4:return Y=X.sent(),[2,Promise.reject(Y)];case 5:return[2]}})})},U.prototype.addDownloadLister=function(){var L=this;window.M.client.invoke("app","downloadAppState",{action:1},function(Y){var X=Y.code,W=Y.data,z=W.state,J=W.progress;if(X===0)z&&(L.emit(DownloadListener_1.DOWNLOADER.DOWNLOADING),L.emit(DownloadListener_1.DOWNLOADER.DOWNLOADSTEPS,J));else throw new Error("QQMusicAppDownloader.addDownloadLister error: ".concat(X))})},U}(eventemitter3_1$3.EventEmitter);qqmusic.default=QQMusicAppDownloader;var browser={},checkOpenedTime$1={};Object.defineProperty(checkOpenedTime$1,"__esModule",{value:!0});var gh_qqnews_utils_1$3=dist,checkOpenedTime=function(){var G=new gh_qqnews_utils_1$3.PageVisibility,U=2210,L=!1;return new Promise(function(Y){var X=new Date().getTime(),W=setTimeout(function(){if(L)return Y(!1);Y(new Date().getTime()-X<U+80&&G.isShow())},U),z=function(){clearTimeout(W),L=!0,Y(!1)};G.visibilityChange(function(J){J||z()}),window.removeEventListener("pagehide",z),window.addEventListener("pagehide",z)})};checkOpenedTime$1.default=checkOpenedTime;var __extends$n=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$m=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$m=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$m.apply(this,arguments)};Object.defineProperty(browser,"__esModule",{value:!0});var eventemitter3_1$2=eventemitter3.exports,gh_qqnews_utils_1$2=dist,checkOpenedTime_1$1=checkOpenedTime$1,BrowserAppDownloader=function(G){__extends$n(U,G);function U(L){var Y=G.call(this)||this;return Y.data={openUrl:"qqnews://article_9500",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$m(__assign$m({},Y.data),L),Y}return U.prototype.run=function(L){var Y=this;L===void 0&&(L=""),this.openApp(L),(0,checkOpenedTime_1$1.default)().then(function(X){X&&Y.download()})},U.prototype.getNetworkType=function(L){return typeof L=="function"&&L("none"),Promise.resolve("none")},U.prototype.checkAppIsInstalled=function(L){return new Promise(function(Y){var X=!1;typeof L=="function"&&L(X),Y(X)})},U.prototype.openApp=function(L){L===void 0&&(L="");var Y=L||this.data.openUrl||"";if(!Y)throw new TypeError("BrowserDownloader.openApp: openUrl is needed");if((0,gh_qqnews_utils_1$2.getSystemInfo)().android){var X=document.createElement("iframe");X.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;",X.src=Y,document.body.appendChild(X)}else window.location.href=Y;return Promise.resolve(!0)},U.prototype.download=function(){(0,gh_qqnews_utils_1$2.getSystemInfo)().android?window.location.href=this.data.downloadUrl||"":window.location.href="http://itunes.apple.com/cn/app/id".concat(this.data.appleStoreId)},U}(eventemitter3_1$2.EventEmitter);browser.default=BrowserAppDownloader;var isClient$1={};Object.defineProperty(isClient$1,"__esModule",{value:!0});var isClient=function(){return typeof window!="undefined"};isClient$1.default=isClient;var wxwork={},createDownGuide$1={};Object.defineProperty(createDownGuide$1,"__esModule",{value:!0});var guideStyle=`
#tencent-downapp-guide{background-color: rgba(0, 0, 0, 0.6);backdrop-filter:blur(8px);position: fixed; top:0;left: 0; width: 100%; height: 100%;z-index: 199;}
#tencent-downapp-guide > div {position: absolute;top: 5px;right: 22px;}
#tencent-downapp-guide img {width:266px;}`,createDownGuide=function(){var G="tencent-downapp-guide",U=document.getElementById(G);if(U){U.style.display="block";return}var L=document.createElement("div"),Y=document.createElement("div"),X=document.createElement("style");X.id="".concat(G,"-style"),X.innerHTML=guideStyle,Y.innerHTML='<img src="https://mat1.gtimg.com/qqcdn/tupload/1652759144335.png" />',L.appendChild(Y),L.id=G,document.head.appendChild(X),document.body.appendChild(L);var W=document.getElementById(G);W&&W.addEventListener("click",function(){W.style.display="none"})};createDownGuide$1.default=createDownGuide;var __extends$m=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$l=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$l=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$l.apply(this,arguments)};Object.defineProperty(wxwork,"__esModule",{value:!0});var eventemitter3_1$1=eventemitter3.exports,gh_qqnews_utils_1$1=dist,create_down_guide_1$2=createDownGuide$1,checkOpenedTime_1=checkOpenedTime$1,WXWorkAppDownloader=function(G){__extends$m(U,G);function U(L){var Y=G.call(this)||this;return Y.data={openUrl:"qqnews://article_9527",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$l(__assign$l({},Y.data),L),Y}return U.prototype.run=function(L){var Y=this;L===void 0&&(L=""),this.openApp(L),(0,checkOpenedTime_1.default)().then(function(X){X&&Y.download()})},U.prototype.getNetworkType=function(L){return typeof L=="function"&&L("none"),Promise.resolve("none")},U.prototype.checkAppIsInstalled=function(L){return new Promise(function(Y){var X=!1;typeof L=="function"&&L(X),Y(X)})},U.prototype.openApp=function(L){L===void 0&&(L="");var Y=L||this.data.openUrl||"";return window.location.href=Y,Promise.resolve(!0)},U.prototype.download=function(){(0,gh_qqnews_utils_1$1.getSystemInfo)().android?window.location.href=this.data.downloadUrl||"":(0,create_down_guide_1$2.default)()},U}(eventemitter3_1$1.EventEmitter);wxwork.default=WXWorkAppDownloader;var weibo={},__extends$l=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$k=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$k=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$k.apply(this,arguments)};Object.defineProperty(weibo,"__esModule",{value:!0});var eventemitter3_1=eventemitter3.exports,create_down_guide_1$1=createDownGuide$1,WeiboAppDownloader=function(G){__extends$l(U,G);function U(L){var Y=G.call(this)||this;return Y.data={openUrl:"qqnews://article_9500",packageName:"com.tencent.news",downloadUrl:"",wxAppId:"",appleStoreId:"",appName:"App",downLogo:""},Y.data=__assign$k(__assign$k({},Y.data),L),Y}return U.prototype.run=function(){(0,create_down_guide_1$1.default)()},U.prototype.getNetworkType=function(L){return typeof L=="function"&&L("none"),Promise.resolve("none")},U.prototype.checkAppIsInstalled=function(L){return new Promise(function(Y){var X=!1;typeof L=="function"&&L(X),Y(X)})},U.prototype.openApp=function(){(0,create_down_guide_1$1.default)()},U.prototype.download=function(){(0,create_down_guide_1$1.default)()},U}(eventemitter3_1.EventEmitter);weibo.default=WeiboAppDownloader;(function(G){Object.defineProperty(G,"__esModule",{value:!0}),G.downloadParams=G.getDefaultDownloader=void 0;var U=dist,L=weixin,Y=qq,X=tadchid,W=qqnews,z=qqvideo,J=qqmusic,Z=browser,ee=isClient$1,te=wxwork,re=weibo,ie=function(){if(!ee.default)return null;var oe=(0,U.getBrowserInfo)();switch(oe.name){case"weixin":return L.default;case"qq":return Y.default;case"tadchid":return X.default;case"qqnews":case"qqnewslite":return W.default;case"tenvideo":return z.default;case"qqmusic":return J.default;case"wxwork":return te.default;case"weibo":return re.default;default:return Z.default}};G.getDefaultDownloader=ie,G.downloadParams={openUrl:"qqnews://article_9500",packageName:"com.tencent.news",downloadUrl:"https://dldir1v6.qq.com/dlomg/inews/TencentNews_14035.apk",wxAppId:"wx073f4a4daff0abe8",appleStoreId:"399363156",appName:"\u817E\u8BAF\u65B0\u95FB--\u767E\u4E07\u73B0\u91D1\u7EA2\u5305\u6D3E\u53D1\u4E2D...",downLogo:"https://mat1.gtimg.com/qqcdn/tupload/1638432859238.png",developer:"\u817E\u8BAF\u79D1\u6280(\u5317\u4EAC)\u6709\u9650\u516C\u53F8",appVersion:"",privacyUrl:"https://privacy.qq.com/document/priview/4bd0bd84be654afe8c1a545ea9b64ec8",permissionUrl:"https://dldir1.qq.com/weixin/android/wechat_webview_download_appinfo_new.html?fun=permission&package=com.tencent.news"};var ne={Downloader:(0,G.getDefaultDownloader)(),params:G.downloadParams};G.default=ne})(defaults);var isQQHost$1={};Object.defineProperty(isQQHost$1,"__esModule",{value:!0});var isClient_1=isClient$1,isQQHost=function(G){G===void 0&&(G="");var U=!G&&(0,isClient_1.default)()?window.location.hostname:G;return/\.qq\.com$/.test(U)};isQQHost$1.default=isQQHost;var showAppInfo$1={},__awaiter$c=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$c=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(showAppInfo$1,"__esModule",{value:!0});var gh_qqnews_utils_1=dist,request_1=request$1,getAppConfig=function(G){return __awaiter$c(void 0,void 0,void 0,function(){var U,L,Y,X,W,z,J;return __generator$c(this,function(Z){switch(Z.label){case 0:if(G||!(0,gh_qqnews_utils_1.isAndroid)())return[2,G!=null?G:null];if(U="ghh5.showappinfo",typeof((z=window==null?void 0:window.sessionStorage)===null||z===void 0?void 0:z.getItem)=="function"&&(L=window.sessionStorage.getItem(U),L))try{return[2,JSON.parse(L)]}catch(ee){}return Y="https://api.prize.qq.com/v1/newsapp/answer/other/config?actname=download_app_info",[4,(0,request_1.default)(Y)];case 1:return X=Z.sent(),X.code===0?(W=X.data.data.peizhi.app_info,typeof((J=window==null?void 0:window.sessionStorage)===null||J===void 0?void 0:J.setItem)=="function"&&window.sessionStorage.setItem(U,JSON.stringify(W)),[2,W]):[2,null]}})})},renderHtml=function(G,U){var L=`<div class="btn-c">
    <div class="btn">`.concat(G,`</div>
  </div>`);return(0,gh_qqnews_utils_1.isAndroid)()&&U&&(L+="<div>".concat(U.appname.txt,"&nbsp;").concat(U.ver.txt,`</div>
    <div>
      <p>\u5F00\u53D1\u8005\uFF1A`).concat(U.name.txt,`</p>
      <p>\u8FD0\u8425\u8005\uFF1A`).concat(U.name.txt,`</p>
    </div>
    <div>
      <a href="`).concat(U.yinsi.url,'">').concat(U.yinsi.txt,`</a>
      <span>|</span>
      <a href="`).concat(U.quanxian.url,'">').concat(U.quanxian.txt,`</a>
    </div>`)),L.replace(/>(\s*)</g,"><")},$=function(G,U){return U===void 0&&(U=document),U.querySelector(G)},getProps=function(G){return __awaiter$c(void 0,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie;return __generator$c(this,function(ne){switch(ne.label){case 0:return U=G.container,L=G.color,Y=G.btnText,X=G.config,W=G.onClick,z=G.onAfterClick,J=L!=null?L:"#03cebe",Z=Y!=null?Y:"\u6253\u5F00\u817E\u8BAF\u65B0\u95FB",ee=W!=null?W:function(){},te=z!=null?z:function(){},re=null,U?typeof U=="string"?(re=document.querySelector(U),re||(console.error("[@tencent/gh-qqnews-downapp] not found container `".concat(U,"`, show info in body insteadly")),re=document.body)):re=U:re=document.body,[4,getAppConfig(X)];case 1:return ie=ne.sent(),[2,{color:J,btnText:Z,container:null,onClick:ee,onAfterClick:te,root:re,config:ie}]}})})},showAppInfo=function(G){return __awaiter$c(void 0,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne;return __generator$c(this,function(oe){switch(oe.label){case 0:return $(".appInfo .btn")?[2]:[4,getProps(G)];case 1:return U=oe.sent(),L=U.root,Y=U.color,X=U.btnText,W=U.onClick,z=U.onAfterClick,J=U.config,$(".appInfo .btn")?[2]:(Z=document.createElement("style"),ee=document.createElement("div"),ee.setAttribute("class","appInfo"),Z.innerHTML=`.appInfo{ width: 100%;padding:10px 0;overflow: hidden;position:fixed;left: 0;bottom: 0;background: rgba(0, 0, 0, 0.6); box-sizing: border-box;font-size:11px;z-index:19;color:#fff;text-align:center;}
  .appInfo > div{overflow: hidden;margin: 0 auto;margin-bottom: 7px;}
  .appInfo p { margin: 0 }
  .appInfo span{color: #e0e0e0;margin: 0 10px;}
  .appInfo a{color: `.concat(Y,`;text-decoration: none;}
  .appInfo .btn-c{padding: 0 10px;}
  .appInfo .btn{height: 44px;background: `).concat(Y,";line-height: 44px;border-radius: 44px;color: #fff;width: 100%;font-size: 16px;text-align: center;}"),ee.innerHTML=renderHtml(X,J),(ie=$("head"))===null||ie===void 0||ie.appendChild(Z),L.appendChild(ee),L.style.paddingBottom="".concat(((ne=$(".appInfo"))===null||ne===void 0?void 0:ne.offsetHeight)||0,"px"),te=$(".appInfo .btn"),te&&(re=function(){typeof W=="function"&&W(),typeof z=="function"&&z()},te.addEventListener("click",re,!1)),[2])}})})};showAppInfo$1.default=showAppInfo;var __assign$j=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return __assign$j=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$j.apply(this,arguments)},__awaiter$b=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$b=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};Object.defineProperty(dist$1,"__esModule",{value:!0});var defaults_1=defaults,isQQHost_1=isQQHost$1,create_down_guide_1=createDownGuide$1,show_app_info_1=showAppInfo$1,AppDownload=function(){function G(U){this.ins=null,this.init(U)}return G.prototype.run=function(U){return this.ins.run(U)},G.prototype.on=function(U,L){return this.ins.on(U,L)},G.prototype.getNetworkType=function(U){return this.ins.getNetworkType(U)},G.prototype.checkAppIsInstalled=function(U){return this.ins.checkAppIsInstalled(U)},G.prototype.openApp=function(U){return this.ins.openApp(U)},G.prototype.download=function(){return this.ins.download()},G.prototype.showBrowserGuide=function(){(0,create_down_guide_1.default)()},G.prototype.showAppInfo=function(U){return __awaiter$b(this,void 0,void 0,function(){var L,Y,X,W,z,J,Z=this;return __generator$b(this,function(ee){switch(ee.label){case 0:return L=U!=null?U:{},Y=L.btnText,X=L.onClick,W="",Y?(W=Y,[3,3]):[3,1];case 1:return[4,this.ins.checkAppIsInstalled()];case 2:z=ee.sent(),W="".concat(z?"\u6253\u5F00":"\u4E0B\u8F7D","\u817E\u8BAF\u65B0\u95FB"),ee.label=3;case 3:return J=function(){typeof X=="function"?X():Z.run()},(0,show_app_info_1.default)(__assign$j(__assign$j({},U),{btnText:W,onClick:J})),[2]}})})},G.prototype.init=function(U){var L=defaults_1.default.Downloader;if(L){var Y=U?Object.assign({},defaults_1.downloadParams,U):defaults_1.downloadParams;this.ins=new L(Y)}(0,isQQHost_1.default)()||console.warn("AppDownload should be used in *.qq.com")},G}(),_default=dist$1.default=AppDownload;function noop$3(){}const extend=Object.assign,inBrowser$1=typeof window!="undefined";function get(G,U){const L=U.split(".");let Y=G;return L.forEach(X=>{var W;Y=(W=Y[X])!=null?W:""}),Y}const unknownProp=null,numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeStringProp=G=>({type:String,default:G});var inBrowser=typeof window!="undefined";function onMountedOrActivated(G){let U;onMounted(()=>{G(),nextTick(()=>{U=!0})}),onActivated(()=>{U&&G()})}function useEventListener(G,U,L={}){if(!inBrowser)return;const{target:Y=window,passive:X=!1,capture:W=!1}=L;let z;const J=ee=>{const te=unref(ee);te&&!z&&(te.addEventListener(G,U,{capture:W,passive:X}),z=!0)},Z=ee=>{const te=unref(ee);te&&z&&(te.removeEventListener(G,U,W),z=!1)};onUnmounted(()=>Z(Y)),onDeactivated(()=>Z(Y)),onMountedOrActivated(()=>J(Y)),isRef(Y)&&watch(Y,(ee,te)=>{Z(te),J(ee)})}var width,height;function useWindowSize(){if(!width&&(width=ref(0),height=ref(0),inBrowser)){const G=()=>{width.value=window.innerWidth,height.value=window.innerHeight};G(),window.addEventListener("resize",G,{passive:!0}),window.addEventListener("orientationchange",G,{passive:!0})}return{width,height}}var overflowScrollReg=/scroll|auto/i,defaultRoot=inBrowser?window:void 0;function isElement(G){return G.tagName!=="HTML"&&G.tagName!=="BODY"&&G.nodeType===1}function getScrollParent(G,U=defaultRoot){let L=G;for(;L&&L!==U&&isElement(L);){const{overflowY:Y}=window.getComputedStyle(L);if(overflowScrollReg.test(Y))return L;L=L.parentNode}return U}const isDef=G=>G!=null,isFunction=G=>typeof G=="function",isObject$1=G=>G!==null&&typeof G=="object",isPromise=G=>isObject$1(G)&&isFunction(G.then)&&isFunction(G.catch),isNumeric=G=>typeof G=="number"||/^\d+(\.\d+)?$/.test(G),isIOS=()=>inBrowser$1?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;isIOS();const stopPropagation=G=>G.stopPropagation();function preventDefault(G,U){(typeof G.cancelable!="boolean"||G.cancelable)&&G.preventDefault(),U&&stopPropagation(G)}useWindowSize();function addUnit(G){if(isDef(G))return isNumeric(G)?`${G}px`:String(G)}function getZIndexStyle(G){const U={};return G!==void 0&&(U.zIndex=+G),U}const camelizeRE=/-(\w)/g,camelize=G=>G.replace(camelizeRE,(U,L)=>L.toUpperCase()),kebabCase=G=>G.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,""),{hasOwnProperty}=Object.prototype;function assignKey(G,U,L){const Y=U[L];!isDef(Y)||(!hasOwnProperty.call(G,L)||!isObject$1(Y)?G[L]=Y:G[L]=deepAssign(Object(G[L]),Y))}function deepAssign(G,U){return Object.keys(U).forEach(L=>{assignKey(G,U,L)}),G}var stdin_default$5={name:"\u59D3\u540D",tel:"\u7535\u8BDD",save:"\u4FDD\u5B58",confirm:"\u786E\u8BA4",cancel:"\u53D6\u6D88",delete:"\u5220\u9664",loading:"\u52A0\u8F7D\u4E2D...",noCoupon:"\u6682\u65E0\u4F18\u60E0\u5238",nameEmpty:"\u8BF7\u586B\u5199\u59D3\u540D",addContact:"\u6DFB\u52A0\u8054\u7CFB\u4EBA",telInvalid:"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u7535\u8BDD",vanCalendar:{end:"\u7ED3\u675F",start:"\u5F00\u59CB",title:"\u65E5\u671F\u9009\u62E9",weekdays:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],monthTitle:(G,U)=>`${G}\u5E74${U}\u6708`,rangePrompt:G=>`\u6700\u591A\u9009\u62E9 ${G} \u5929`},vanCascader:{select:"\u8BF7\u9009\u62E9"},vanPagination:{prev:"\u4E0A\u4E00\u9875",next:"\u4E0B\u4E00\u9875"},vanPullRefresh:{pulling:"\u4E0B\u62C9\u5373\u53EF\u5237\u65B0...",loosing:"\u91CA\u653E\u5373\u53EF\u5237\u65B0..."},vanSubmitBar:{label:"\u5408\u8BA1:"},vanCoupon:{unlimited:"\u65E0\u95E8\u69DB",discount:G=>`${G}\u6298`,condition:G=>`\u6EE1${G}\u5143\u53EF\u7528`},vanCouponCell:{title:"\u4F18\u60E0\u5238",count:G=>`${G}\u5F20\u53EF\u7528`},vanCouponList:{exchange:"\u5151\u6362",close:"\u4E0D\u4F7F\u7528",enable:"\u53EF\u7528",disabled:"\u4E0D\u53EF\u7528",placeholder:"\u8F93\u5165\u4F18\u60E0\u7801"},vanAddressEdit:{area:"\u5730\u533A",postal:"\u90AE\u653F\u7F16\u7801",areaEmpty:"\u8BF7\u9009\u62E9\u5730\u533A",addressEmpty:"\u8BF7\u586B\u5199\u8BE6\u7EC6\u5730\u5740",postalEmpty:"\u90AE\u653F\u7F16\u7801\u4E0D\u6B63\u786E",addressDetail:"\u8BE6\u7EC6\u5730\u5740",defaultAddress:"\u8BBE\u4E3A\u9ED8\u8BA4\u6536\u8D27\u5730\u5740"},vanAddressList:{add:"\u65B0\u589E\u5730\u5740"}};const lang=ref("zh-CN"),messages=reactive({"zh-CN":stdin_default$5}),Locale={messages(){return messages[lang.value]},use(G,U){lang.value=G,this.add({[G]:U})},add(G={}){deepAssign(messages,G)}};var stdin_default$4=Locale;function createTranslate(G){const U=camelize(G)+".";return(L,...Y)=>{const X=stdin_default$4.messages(),W=get(X,U+L)||get(X,L);return isFunction(W)?W(...Y):W}}function genBem(G,U){return U?typeof U=="string"?` ${G}--${U}`:Array.isArray(U)?U.reduce((L,Y)=>L+genBem(G,Y),""):Object.keys(U).reduce((L,Y)=>L+(U[Y]?genBem(G,Y):""),""):""}function createBEM(G){return(U,L)=>(U&&typeof U!="string"&&(L=U,U=""),U=U?`${G}__${U}`:G,`${U}${genBem(U,L)}`)}function createNamespace(G){const U=`van-${G}`;return[U,createBEM(U),createTranslate(U)]}const HAPTICS_FEEDBACK="van-haptics-feedback";function callInterceptor(G,{args:U=[],done:L,canceled:Y}){if(G){const X=G.apply(null,U);isPromise(X)?X.then(W=>{W?L():Y&&Y()}).catch(noop$3):X?L():Y&&Y()}else L()}function withInstall(G){return G.install=U=>{const{name:L}=G;U.component(L,G),U.component(camelize(`-${L}`),G)},G}function useExpose(G){const U=getCurrentInstance();U&&extend(U.proxy,G)}const[name$4,bem$4]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$3=defineComponent({name:name$4,props:badgeProps,setup(G,{slots:U}){const L=()=>{if(U.content)return!0;const{content:z,showZero:J}=G;return isDef(z)&&z!==""&&(J||z!==0)},Y=()=>{const{dot:z,max:J,content:Z}=G;if(!z&&L())return U.content?U.content():isDef(J)&&isNumeric(Z)&&+Z>J?`${J}+`:Z},X=computed(()=>{const z={background:G.color};if(G.offset){const[J,Z]=G.offset;U.default?(z.top=addUnit(Z),typeof J=="number"?z.right=addUnit(-J):z.right=J.startsWith("-")?J.replace("-",""):`-${J}`):(z.marginTop=addUnit(Z),z.marginLeft=addUnit(J))}return z}),W=()=>{if(L()||G.dot)return createVNode("div",{class:bem$4([G.position,{dot:G.dot,fixed:!!U.default}]),style:X.value},[Y()])};return()=>{if(U.default){const{tag:z}=G;return createVNode(z,{class:bem$4("wrapper")},{default:()=>[U.default(),W()]})}return W()}}});const Badge=withInstall(stdin_default$3),[name$3,bem$3]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$3),configProviderProps={tag:makeStringProp("div"),themeVars:Object,iconPrefix:String};function mapThemeVarsToCSSVars(G){const U={};return Object.keys(G).forEach(L=>{U[`--van-${kebabCase(L)}`]=G[L]}),U}defineComponent({name:name$3,props:configProviderProps,setup(G,{slots:U}){const L=computed(()=>{if(G.themeVars)return mapThemeVarsToCSSVars(G.themeVars)});return provide(CONFIG_PROVIDER_KEY,G),()=>createVNode(G.tag,{class:bem$3(),style:L.value},{default:()=>{var Y;return[(Y=U.default)==null?void 0:Y.call(U)]}})}});const[name$2,bem$2]=createNamespace("icon"),isImage=G=>G==null?void 0:G.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$2=defineComponent({name:name$2,props:iconProps,setup(G,{slots:U}){const L=inject(CONFIG_PROVIDER_KEY,null),Y=computed(()=>G.classPrefix||(L==null?void 0:L.iconPrefix)||bem$2());return()=>{const{tag:X,dot:W,name:z,size:J,badge:Z,color:ee}=G,te=isImage(z);return createVNode(Badge,mergeProps({dot:W,tag:X,class:[Y.value,te?"":`${Y.value}-${z}`],style:{color:ee,fontSize:addUnit(J)},content:Z},G.badgeProps),{default:()=>{var re;return[(re=U.default)==null?void 0:re.call(U),te&&createVNode("img",{class:bem$2("image"),src:z},null)]}})}}});const Icon=withInstall(stdin_default$2),popupSharedProps={show:Boolean,zIndex:numericProp,overlay:truthProp,duration:numericProp,teleport:[String,Object],lockScroll:truthProp,lazyRender:truthProp,beforeClose:Function,overlayStyle:Object,overlayClass:unknownProp,transitionAppear:Boolean,closeOnClickOverlay:truthProp};function getDirection(G,U){return G>U?"horizontal":U>G?"vertical":""}function useTouch(){const G=ref(0),U=ref(0),L=ref(0),Y=ref(0),X=ref(0),W=ref(0),z=ref(""),J=()=>z.value==="vertical",Z=()=>z.value==="horizontal",ee=()=>{L.value=0,Y.value=0,X.value=0,W.value=0,z.value=""};return{move:ie=>{const ne=ie.touches[0];L.value=(ne.clientX<0?0:ne.clientX)-G.value,Y.value=ne.clientY-U.value,X.value=Math.abs(L.value),W.value=Math.abs(Y.value);const oe=10;(!z.value||X.value<oe&&W.value<oe)&&(z.value=getDirection(X.value,W.value))},start:ie=>{ee(),G.value=ie.touches[0].clientX,U.value=ie.touches[0].clientY},reset:ee,startX:G,startY:U,deltaX:L,deltaY:Y,offsetX:X,offsetY:W,direction:z,isVertical:J,isHorizontal:Z}}let totalLockCount=0;const BODY_LOCK_CLASS="van-overflow-hidden";function useLockScroll(G,U){const L=useTouch(),Y=Z=>{L.move(Z);const ee=L.deltaY.value>0?"10":"01",te=getScrollParent(Z.target,G.value),{scrollHeight:re,offsetHeight:ie,scrollTop:ne}=te;let oe="11";ne===0?oe=ie>=re?"00":"01":ne+ie>=re&&(oe="10"),oe!=="11"&&L.isVertical()&&!(parseInt(oe,2)&parseInt(ee,2))&&preventDefault(Z,!0)},X=()=>{document.addEventListener("touchstart",L.start),document.addEventListener("touchmove",Y,{passive:!1}),totalLockCount||document.body.classList.add(BODY_LOCK_CLASS),totalLockCount++},W=()=>{totalLockCount&&(document.removeEventListener("touchstart",L.start),document.removeEventListener("touchmove",Y),totalLockCount--,totalLockCount||document.body.classList.remove(BODY_LOCK_CLASS))},z=()=>U()&&X(),J=()=>U()&&W();onMountedOrActivated(z),onDeactivated(J),onBeforeUnmount(J),watch(U,Z=>{Z?X():W()})}function useLazyRender(G){const U=ref(!1);return watch(G,L=>{L&&(U.value=L)},{immediate:!0}),L=>()=>U.value?L():null}const POPUP_TOGGLE_KEY=Symbol(),[name$1,bem$1]=createNamespace("overlay"),overlayProps={show:Boolean,zIndex:numericProp,duration:numericProp,className:unknownProp,lockScroll:truthProp,lazyRender:truthProp,customStyle:Object};var stdin_default$1=defineComponent({name:name$1,props:overlayProps,setup(G,{slots:U}){const L=useLazyRender(()=>G.show||!G.lazyRender),Y=W=>{preventDefault(W,!0)},X=L(()=>{var W;const z=extend(getZIndexStyle(G.zIndex),G.customStyle);return isDef(G.duration)&&(z.animationDuration=`${G.duration}s`),withDirectives(createVNode("div",{style:z,class:[bem$1(),G.className],onTouchmove:G.lockScroll?Y:noop$3},[(W=U.default)==null?void 0:W.call(U)]),[[vShow,G.show]])});return()=>createVNode(Transition,{name:"van-fade",appear:!0},{default:X})}});const Overlay=withInstall(stdin_default$1),popupProps=extend({},popupSharedProps,{round:Boolean,position:makeStringProp("center"),closeIcon:makeStringProp("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:makeStringProp("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[name,bem]=createNamespace("popup");let globalZIndex=2e3;var stdin_default=defineComponent({name,inheritAttrs:!1,props:popupProps,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(G,{emit:U,attrs:L,slots:Y}){let X,W;const z=ref(),J=ref(),Z=useLazyRender(()=>G.show||!G.lazyRender),ee=computed(()=>{const fe={zIndex:z.value};if(isDef(G.duration)){const de=G.position==="center"?"animationDuration":"transitionDuration";fe[de]=`${G.duration}s`}return fe}),te=()=>{X||(G.zIndex!==void 0&&(globalZIndex=+G.zIndex),X=!0,z.value=++globalZIndex,U("open"))},re=()=>{X&&callInterceptor(G.beforeClose,{done(){X=!1,U("close"),U("update:show",!1)}})},ie=fe=>{U("click-overlay",fe),G.closeOnClickOverlay&&re()},ne=()=>{if(G.overlay)return createVNode(Overlay,{show:G.show,class:G.overlayClass,zIndex:z.value,duration:G.duration,customStyle:G.overlayStyle,onClick:ie},{default:Y["overlay-content"]})},oe=fe=>{U("click-close-icon",fe),re()},se=()=>{if(G.closeable)return createVNode(Icon,{role:"button",tabindex:0,name:G.closeIcon,class:[bem("close-icon",G.closeIconPosition),HAPTICS_FEEDBACK],classPrefix:G.iconPrefix,onClick:oe},null)},ae=()=>U("opened"),le=()=>U("closed"),ue=fe=>U("keydown",fe),ce=Z(()=>{var fe;const{round:de,position:_e,safeAreaInsetTop:me,safeAreaInsetBottom:ve}=G;return withDirectives(createVNode("div",mergeProps({ref:J,style:ee.value,class:[bem({round:de,[_e]:_e}),{"van-safe-area-top":me,"van-safe-area-bottom":ve}],onKeydown:ue},L),[(fe=Y.default)==null?void 0:fe.call(Y),se()]),[[vShow,G.show]])}),he=()=>{const{position:fe,transition:de,transitionAppear:_e}=G,me=fe==="center"?"van-fade":`van-popup-slide-${fe}`;return createVNode(Transition,{name:de||me,appear:_e,onAfterEnter:ae,onAfterLeave:le},{default:ce})};return watch(()=>G.show,fe=>{fe&&!X&&(te(),L.tabindex===0&&nextTick(()=>{var de;(de=J.value)==null||de.focus()})),!fe&&X&&(X=!1,U("close"))}),useExpose({popupRef:J}),useLockScroll(J,()=>G.show&&G.lockScroll),useEventListener("popstate",()=>{G.closeOnPopstate&&(re(),W=!1)}),onMounted(()=>{G.show&&te()}),onActivated(()=>{W&&(U("update:show",!0),W=!1)}),onDeactivated(()=>{G.show&&G.teleport&&(re(),W=!0)}),provide(POPUP_TOGGLE_KEY,()=>G.show),()=>G.teleport?createVNode(Teleport,{to:G.teleport},{default:()=>[ne(),he()]}):createVNode(Fragment,null,[ne(),he()])}});const Popup$1=withInstall(stdin_default);function touchX(G){return G.type.indexOf("mouse")!==-1?G.clientX:G.touches[0].clientX}function touchY(G){return G.type.indexOf("mouse")!==-1?G.clientY:G.touches[0].clientY}var isPassiveSupported=function(){var G=!1;try{var U=Object.defineProperty({},"passive",{get:function(){G=!0}});window.addEventListener("test",null,U)}catch(L){}return G}(),vueTouchEvents={install:function(G,U){var L=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100},U);function Y(se){var ae=this.$$touchObj,le=se.type.indexOf("touch")>=0,ue=se.type.indexOf("mouse")>=0,ce=this;le&&(ae.lastTouchStartTime=se.timeStamp),!(ue&&ae.lastTouchStartTime&&se.timeStamp-ae.lastTouchStartTime<350)&&(ae.touchStarted||(re(this),ae.touchStarted=!0,ae.touchMoved=!1,ae.swipeOutBounded=!1,ae.startX=touchX(se),ae.startY=touchY(se),ae.currentX=0,ae.currentY=0,ae.touchStartTime=se.timeStamp,ae.hasSwipe=ee(this,"swipe")||ee(this,"swipe.left")||ee(this,"swipe.right")||ee(this,"swipe.top")||ee(this,"swipe.bottom"),ee(this,"hold")&&(ae.touchHoldTimer=setTimeout(function(){ae.touchHoldTimer=null,te(se,ce,"hold")},ae.options.touchHoldTolerance)),te(se,this,"press")))}function X(se){var ae=this.$$touchObj,le=touchX(se),ue=touchY(se),ce=ae.currentX!=le||ae.currentY!=ue;if(ae.currentX=le,ae.currentY=ue,ae.touchMoved){if(ae.hasSwipe&&!ae.swipeOutBounded){var fe=ae.options.swipeTolerance;ae.swipeOutBounded=Math.abs(ae.startX-ae.currentX)>fe&&Math.abs(ae.startY-ae.currentY)>fe}}else{var he=ae.options.tapTolerance;ae.touchMoved=Math.abs(ae.startX-ae.currentX)>he||Math.abs(ae.startY-ae.currentY)>he,ae.touchMoved&&(ne(ae),te(se,this,"drag.once"))}if(ee(this,"rollover")&&ce){var de=se.timeStamp,_e=ae.options.rollOverFrequency;(ae.touchRollTime==null||de>ae.touchRollTime+_e)&&(ae.touchRollTime=de,te(se,this,"rollover"))}if(ee(this,"drag")&&ae.touchStarted&&ae.touchMoved&&ce){var de=se.timeStamp,_e=ae.options.dragFrequency;(ae.touchDragTime==null||de>ae.touchDragTime+_e)&&(ae.touchDragTime=de,te(se,this,"drag"))}}function W(){var se=this.$$touchObj;ne(se),ie(this),se.touchStarted=se.touchMoved=!1,se.startX=se.startY=0}function z(se){var ae=this.$$touchObj,le=se.type.indexOf("touch")>=0,ue=se.type.indexOf("mouse")>=0;le&&(ae.lastTouchEndTime=se.timeStamp);var ce=le&&!ae.touchHoldTimer;if(ne(ae),ae.touchStarted=!1,ie(this),!(ue&&ae.lastTouchEndTime&&se.timeStamp-ae.lastTouchEndTime<350))if(te(se,this,"release"),ae.touchMoved){if(ae.hasSwipe&&!ae.swipeOutBounded){var he=ae.options.swipeTolerance,fe,de=Math.abs(ae.startY-ae.currentY),_e=Math.abs(ae.startX-ae.currentX);(de>he||_e>he)&&(de>he?fe=ae.startY>ae.currentY?"top":"bottom":fe=ae.startX>ae.currentX?"left":"right",ee(this,"swipe."+fe)?te(se,this,"swipe."+fe,fe):te(se,this,"swipe",fe))}}else if(ee(this,"longtap")&&se.timeStamp-ae.touchStartTime>ae.options.longTapTimeInterval)se.cancelable&&se.preventDefault(),te(se,this,"longtap");else if(ee(this,"hold")&&ce){se.cancelable&&se.preventDefault();return}else te(se,this,"tap")}function J(){re(this)}function Z(){ie(this)}function ee(se,ae){var le=se.$$touchObj.callbacks[ae];return le!=null&&le.length>0}function te(se,ae,le,ue){var ce=ae.$$touchObj,he=ce.callbacks[le];if(he==null||he.length===0)return null;for(var fe=0;fe<he.length;fe++){var de=he[fe];de.modifiers.stop&&se.stopPropagation(),de.modifiers.prevent&&se.preventDefault(),!(de.modifiers.self&&se.target!==se.currentTarget)&&typeof de.value=="function"&&(ue?de.value(ue,se):de.value(se))}}function re(se){var ae=se.$$touchObj.options.touchClass;ae&&se.classList.add(ae)}function ie(se){var ae=se.$$touchObj.options.touchClass;ae&&se.classList.remove(ae)}function ne(se){se.touchHoldTimer&&(clearTimeout(se.touchHoldTimer),se.touchHoldTimer=null)}function oe(se,ae){var le=se.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:L};return ae&&(le.options=Object.assign({},le.options,ae)),se.$$touchObj=le,se.$$touchObj}G.directive("touch",{beforeMount:function(se,ae){var le=oe(se),ue=isPassiveSupported?{passive:!0}:!1,ce=ae.arg||"tap";switch(ce){case"swipe":var he=ae.modifiers;if(he.left||he.right||he.top||he.bottom){for(var fe in ae.modifiers)if(["left","right","top","bottom"].indexOf(fe)>=0){var de="swipe."+fe;le.callbacks[de]=le.callbacks[de]||[],le.callbacks[de].push(ae)}}else le.callbacks.swipe=le.callbacks.swipe||[],le.callbacks.swipe.push(ae);break;case"press":case"drag":ae.modifiers.disablePassive&&(ue=!1);default:le.callbacks[ce]=le.callbacks[ce]||[],le.callbacks[ce].push(ae)}le.hasBindTouchEvents||(se.addEventListener("touchstart",Y,ue),se.addEventListener("touchmove",X,ue),se.addEventListener("touchcancel",W),se.addEventListener("touchend",z),le.options.disableClick||(se.addEventListener("mousedown",Y),se.addEventListener("mousemove",X),se.addEventListener("mouseup",z),se.addEventListener("mouseenter",J),se.addEventListener("mouseleave",Z)),le.hasBindTouchEvents=!0)},unmounted:function(se){se.removeEventListener("touchstart",Y),se.removeEventListener("touchmove",X),se.removeEventListener("touchcancel",W),se.removeEventListener("touchend",z),se.$$touchObj&&!se.$$touchObj.options.disableClick&&(se.removeEventListener("mousedown",Y),se.removeEventListener("mousemove",X),se.removeEventListener("mouseup",z),se.removeEventListener("mouseenter",J),se.removeEventListener("mouseleave",Z)),delete se.$$touchObj}}),G.directive("touch-class",{beforeMount:function(se,ae){oe(se,{touchClass:ae.value})}}),G.directive("touch-options",{beforeMount:function(se,ae){oe(se,ae.value)}})}};/*!
  * vue-router v4.0.16
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",PolySymbol=G=>hasSymbol?Symbol(G):"_vr_"+G,matchedRouteKey=PolySymbol("rvlm"),viewDepthKey=PolySymbol("rvd"),routerKey=PolySymbol("r"),routeLocationKey=PolySymbol("rl"),routerViewLocationKey=PolySymbol("rvl"),isBrowser=typeof window!="undefined";function isESModule(G){return G.__esModule||hasSymbol&&G[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(G,U){const L={};for(const Y in U){const X=U[Y];L[Y]=Array.isArray(X)?X.map(G):G(X)}return L}const noop$2=()=>{},TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=G=>G.replace(TRAILING_SLASH_RE,"");function parseURL(G,U,L="/"){let Y,X={},W="",z="";const J=U.indexOf("?"),Z=U.indexOf("#",J>-1?J:0);return J>-1&&(Y=U.slice(0,J),W=U.slice(J+1,Z>-1?Z:U.length),X=G(W)),Z>-1&&(Y=Y||U.slice(0,Z),z=U.slice(Z,U.length)),Y=resolveRelativePath(Y!=null?Y:U,L),{fullPath:Y+(W&&"?")+W+z,path:Y,query:X,hash:z}}function stringifyURL(G,U){const L=U.query?G(U.query):"";return U.path+(L&&"?")+L+(U.hash||"")}function stripBase(G,U){return!U||!G.toLowerCase().startsWith(U.toLowerCase())?G:G.slice(U.length)||"/"}function isSameRouteLocation(G,U,L){const Y=U.matched.length-1,X=L.matched.length-1;return Y>-1&&Y===X&&isSameRouteRecord(U.matched[Y],L.matched[X])&&isSameRouteLocationParams(U.params,L.params)&&G(U.query)===G(L.query)&&U.hash===L.hash}function isSameRouteRecord(G,U){return(G.aliasOf||G)===(U.aliasOf||U)}function isSameRouteLocationParams(G,U){if(Object.keys(G).length!==Object.keys(U).length)return!1;for(const L in G)if(!isSameRouteLocationParamsValue(G[L],U[L]))return!1;return!0}function isSameRouteLocationParamsValue(G,U){return Array.isArray(G)?isEquivalentArray(G,U):Array.isArray(U)?isEquivalentArray(U,G):G===U}function isEquivalentArray(G,U){return Array.isArray(U)?G.length===U.length&&G.every((L,Y)=>L===U[Y]):G.length===1&&G[0]===U}function resolveRelativePath(G,U){if(G.startsWith("/"))return G;if(!G)return U;const L=U.split("/"),Y=G.split("/");let X=L.length-1,W,z;for(W=0;W<Y.length;W++)if(z=Y[W],!(X===1||z==="."))if(z==="..")X--;else break;return L.slice(0,X).join("/")+"/"+Y.slice(W-(W===Y.length?1:0)).join("/")}var NavigationType;(function(G){G.pop="pop",G.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(G){G.back="back",G.forward="forward",G.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(G){if(!G)if(isBrowser){const U=document.querySelector("base");G=U&&U.getAttribute("href")||"/",G=G.replace(/^\w+:\/\/[^\/]+/,"")}else G="/";return G[0]!=="/"&&G[0]!=="#"&&(G="/"+G),removeTrailingSlash(G)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(G,U){return G.replace(BEFORE_HASH_RE,"#")+U}function getElementPosition(G,U){const L=document.documentElement.getBoundingClientRect(),Y=G.getBoundingClientRect();return{behavior:U.behavior,left:Y.left-L.left-(U.left||0),top:Y.top-L.top-(U.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(G){let U;if("el"in G){const L=G.el,Y=typeof L=="string"&&L.startsWith("#"),X=typeof L=="string"?Y?document.getElementById(L.slice(1)):document.querySelector(L):L;if(!X)return;U=getElementPosition(X,G)}else U=G;"scrollBehavior"in document.documentElement.style?window.scrollTo(U):window.scrollTo(U.left!=null?U.left:window.pageXOffset,U.top!=null?U.top:window.pageYOffset)}function getScrollKey(G,U){return(history.state?history.state.position-U:-1)+G}const scrollPositions=new Map;function saveScrollPosition(G,U){scrollPositions.set(G,U)}function getSavedScrollPosition(G){const U=scrollPositions.get(G);return scrollPositions.delete(G),U}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(G,U){const{pathname:L,search:Y,hash:X}=U,W=G.indexOf("#");if(W>-1){let J=X.includes(G.slice(W))?G.slice(W).length:1,Z=X.slice(J);return Z[0]!=="/"&&(Z="/"+Z),stripBase(Z,"")}return stripBase(L,G)+Y+X}function useHistoryListeners(G,U,L,Y){let X=[],W=[],z=null;const J=({state:ie})=>{const ne=createCurrentLocation(G,location),oe=L.value,se=U.value;let ae=0;if(ie){if(L.value=ne,U.value=ie,z&&z===oe){z=null;return}ae=se?ie.position-se.position:0}else Y(ne);X.forEach(le=>{le(L.value,oe,{delta:ae,type:NavigationType.pop,direction:ae?ae>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Z(){z=L.value}function ee(ie){X.push(ie);const ne=()=>{const oe=X.indexOf(ie);oe>-1&&X.splice(oe,1)};return W.push(ne),ne}function te(){const{history:ie}=window;!ie.state||ie.replaceState(assign({},ie.state,{scroll:computeScrollPosition()}),"")}function re(){for(const ie of W)ie();W=[],window.removeEventListener("popstate",J),window.removeEventListener("beforeunload",te)}return window.addEventListener("popstate",J),window.addEventListener("beforeunload",te),{pauseListeners:Z,listen:ee,destroy:re}}function buildState(G,U,L,Y=!1,X=!1){return{back:G,current:U,forward:L,replaced:Y,position:window.history.length,scroll:X?computeScrollPosition():null}}function useHistoryStateNavigation(G){const{history:U,location:L}=window,Y={value:createCurrentLocation(G,L)},X={value:U.state};X.value||W(Y.value,{back:null,current:Y.value,forward:null,position:U.length-1,replaced:!0,scroll:null},!0);function W(Z,ee,te){const re=G.indexOf("#"),ie=re>-1?(L.host&&document.querySelector("base")?G:G.slice(re))+Z:createBaseLocation()+G+Z;try{U[te?"replaceState":"pushState"](ee,"",ie),X.value=ee}catch(ne){console.error(ne),L[te?"replace":"assign"](ie)}}function z(Z,ee){const te=assign({},U.state,buildState(X.value.back,Z,X.value.forward,!0),ee,{position:X.value.position});W(Z,te,!0),Y.value=Z}function J(Z,ee){const te=assign({},X.value,U.state,{forward:Z,scroll:computeScrollPosition()});W(te.current,te,!0);const re=assign({},buildState(Y.value,Z,null),{position:te.position+1},ee);W(Z,re,!1),Y.value=Z}return{location:Y,state:X,push:J,replace:z}}function createWebHistory(G){G=normalizeBase(G);const U=useHistoryStateNavigation(G),L=useHistoryListeners(G,U.state,U.location,U.replace);function Y(W,z=!0){z||L.pauseListeners(),history.go(W)}const X=assign({location:"",base:G,go:Y,createHref:createHref.bind(null,G)},U,L);return Object.defineProperty(X,"location",{enumerable:!0,get:()=>U.location.value}),Object.defineProperty(X,"state",{enumerable:!0,get:()=>U.state.value}),X}function createWebHashHistory(G){return G=location.host?G||location.pathname+location.search:"",G.includes("#")||(G+="#"),createWebHistory(G)}function isRouteLocation(G){return typeof G=="string"||G&&typeof G=="object"}function isRouteName(G){return typeof G=="string"||typeof G=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=PolySymbol("nf");var NavigationFailureType;(function(G){G[G.aborted=4]="aborted",G[G.cancelled=8]="cancelled",G[G.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(G,U){return assign(new Error,{type:G,[NavigationFailureSymbol]:!0},U)}function isNavigationFailure(G,U){return G instanceof Error&&NavigationFailureSymbol in G&&(U==null||!!(G.type&U))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(G,U){const L=assign({},BASE_PATH_PARSER_OPTIONS,U),Y=[];let X=L.start?"^":"";const W=[];for(const ee of G){const te=ee.length?[]:[90];L.strict&&!ee.length&&(X+="/");for(let re=0;re<ee.length;re++){const ie=ee[re];let ne=40+(L.sensitive?.25:0);if(ie.type===0)re||(X+="/"),X+=ie.value.replace(REGEX_CHARS_RE,"\\$&"),ne+=40;else if(ie.type===1){const{value:oe,repeatable:se,optional:ae,regexp:le}=ie;W.push({name:oe,repeatable:se,optional:ae});const ue=le||BASE_PARAM_PATTERN;if(ue!==BASE_PARAM_PATTERN){ne+=10;try{new RegExp(`(${ue})`)}catch(he){throw new Error(`Invalid custom RegExp for param "${oe}" (${ue}): `+he.message)}}let ce=se?`((?:${ue})(?:/(?:${ue}))*)`:`(${ue})`;re||(ce=ae&&ee.length<2?`(?:/${ce})`:"/"+ce),ae&&(ce+="?"),X+=ce,ne+=20,ae&&(ne+=-8),se&&(ne+=-20),ue===".*"&&(ne+=-50)}te.push(ne)}Y.push(te)}if(L.strict&&L.end){const ee=Y.length-1;Y[ee][Y[ee].length-1]+=.7000000000000001}L.strict||(X+="/?"),L.end?X+="$":L.strict&&(X+="(?:/|$)");const z=new RegExp(X,L.sensitive?"":"i");function J(ee){const te=ee.match(z),re={};if(!te)return null;for(let ie=1;ie<te.length;ie++){const ne=te[ie]||"",oe=W[ie-1];re[oe.name]=ne&&oe.repeatable?ne.split("/"):ne}return re}function Z(ee){let te="",re=!1;for(const ie of G){(!re||!te.endsWith("/"))&&(te+="/"),re=!1;for(const ne of ie)if(ne.type===0)te+=ne.value;else if(ne.type===1){const{value:oe,repeatable:se,optional:ae}=ne,le=oe in ee?ee[oe]:"";if(Array.isArray(le)&&!se)throw new Error(`Provided param "${oe}" is an array but it is not repeatable (* or + modifiers)`);const ue=Array.isArray(le)?le.join("/"):le;if(!ue)if(ae)ie.length<2&&G.length>1&&(te.endsWith("/")?te=te.slice(0,-1):re=!0);else throw new Error(`Missing required param "${oe}"`);te+=ue}}return te}return{re:z,score:Y,keys:W,parse:J,stringify:Z}}function compareScoreArray(G,U){let L=0;for(;L<G.length&&L<U.length;){const Y=U[L]-G[L];if(Y)return Y;L++}return G.length<U.length?G.length===1&&G[0]===40+40?-1:1:G.length>U.length?U.length===1&&U[0]===40+40?1:-1:0}function comparePathParserScore(G,U){let L=0;const Y=G.score,X=U.score;for(;L<Y.length&&L<X.length;){const W=compareScoreArray(Y[L],X[L]);if(W)return W;L++}if(Math.abs(X.length-Y.length)===1){if(isLastScoreNegative(Y))return 1;if(isLastScoreNegative(X))return-1}return X.length-Y.length}function isLastScoreNegative(G){const U=G[G.length-1];return G.length>0&&U[U.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(G){if(!G)return[[]];if(G==="/")return[[ROOT_TOKEN]];if(!G.startsWith("/"))throw new Error(`Invalid path "${G}"`);function U(ne){throw new Error(`ERR (${L})/"${ee}": ${ne}`)}let L=0,Y=L;const X=[];let W;function z(){W&&X.push(W),W=[]}let J=0,Z,ee="",te="";function re(){!ee||(L===0?W.push({type:0,value:ee}):L===1||L===2||L===3?(W.length>1&&(Z==="*"||Z==="+")&&U(`A repeatable param (${ee}) must be alone in its segment. eg: '/:ids+.`),W.push({type:1,value:ee,regexp:te,repeatable:Z==="*"||Z==="+",optional:Z==="*"||Z==="?"})):U("Invalid state to consume buffer"),ee="")}function ie(){ee+=Z}for(;J<G.length;){if(Z=G[J++],Z==="\\"&&L!==2){Y=L,L=4;continue}switch(L){case 0:Z==="/"?(ee&&re(),z()):Z===":"?(re(),L=1):ie();break;case 4:ie(),L=Y;break;case 1:Z==="("?L=2:VALID_PARAM_RE.test(Z)?ie():(re(),L=0,Z!=="*"&&Z!=="?"&&Z!=="+"&&J--);break;case 2:Z===")"?te[te.length-1]=="\\"?te=te.slice(0,-1)+Z:L=3:te+=Z;break;case 3:re(),L=0,Z!=="*"&&Z!=="?"&&Z!=="+"&&J--,te="";break;default:U("Unknown state");break}}return L===2&&U(`Unfinished custom RegExp for param "${ee}"`),re(),z(),X}function createRouteRecordMatcher(G,U,L){const Y=tokensToParser(tokenizePath(G.path),L),X=assign(Y,{record:G,parent:U,children:[],alias:[]});return U&&!X.record.aliasOf==!U.record.aliasOf&&U.children.push(X),X}function createRouterMatcher(G,U){const L=[],Y=new Map;U=mergeOptions({strict:!1,end:!0,sensitive:!1},U);function X(te){return Y.get(te)}function W(te,re,ie){const ne=!ie,oe=normalizeRouteRecord(te);oe.aliasOf=ie&&ie.record;const se=mergeOptions(U,te),ae=[oe];if("alias"in te){const ce=typeof te.alias=="string"?[te.alias]:te.alias;for(const he of ce)ae.push(assign({},oe,{components:ie?ie.record.components:oe.components,path:he,aliasOf:ie?ie.record:oe}))}let le,ue;for(const ce of ae){const{path:he}=ce;if(re&&he[0]!=="/"){const fe=re.record.path,de=fe[fe.length-1]==="/"?"":"/";ce.path=re.record.path+(he&&de+he)}if(le=createRouteRecordMatcher(ce,re,se),ie?ie.alias.push(le):(ue=ue||le,ue!==le&&ue.alias.push(le),ne&&te.name&&!isAliasRecord(le)&&z(te.name)),"children"in oe){const fe=oe.children;for(let de=0;de<fe.length;de++)W(fe[de],le,ie&&ie.children[de])}ie=ie||le,Z(le)}return ue?()=>{z(ue)}:noop$2}function z(te){if(isRouteName(te)){const re=Y.get(te);re&&(Y.delete(te),L.splice(L.indexOf(re),1),re.children.forEach(z),re.alias.forEach(z))}else{const re=L.indexOf(te);re>-1&&(L.splice(re,1),te.record.name&&Y.delete(te.record.name),te.children.forEach(z),te.alias.forEach(z))}}function J(){return L}function Z(te){let re=0;for(;re<L.length&&comparePathParserScore(te,L[re])>=0&&(te.record.path!==L[re].record.path||!isRecordChildOf(te,L[re]));)re++;L.splice(re,0,te),te.record.name&&!isAliasRecord(te)&&Y.set(te.record.name,te)}function ee(te,re){let ie,ne={},oe,se;if("name"in te&&te.name){if(ie=Y.get(te.name),!ie)throw createRouterError(1,{location:te});se=ie.record.name,ne=assign(paramsFromLocation(re.params,ie.keys.filter(ue=>!ue.optional).map(ue=>ue.name)),te.params),oe=ie.stringify(ne)}else if("path"in te)oe=te.path,ie=L.find(ue=>ue.re.test(oe)),ie&&(ne=ie.parse(oe),se=ie.record.name);else{if(ie=re.name?Y.get(re.name):L.find(ue=>ue.re.test(re.path)),!ie)throw createRouterError(1,{location:te,currentLocation:re});se=ie.record.name,ne=assign({},re.params,te.params),oe=ie.stringify(ne)}const ae=[];let le=ie;for(;le;)ae.unshift(le.record),le=le.parent;return{name:se,path:oe,params:ne,matched:ae,meta:mergeMetaFields(ae)}}return G.forEach(te=>W(te)),{addRoute:W,resolve:ee,removeRoute:z,getRoutes:J,getRecordMatcher:X}}function paramsFromLocation(G,U){const L={};for(const Y of U)Y in G&&(L[Y]=G[Y]);return L}function normalizeRouteRecord(G){return{path:G.path,redirect:G.redirect,name:G.name,meta:G.meta||{},aliasOf:void 0,beforeEnter:G.beforeEnter,props:normalizeRecordProps(G),children:G.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in G?G.components||{}:{default:G.component}}}function normalizeRecordProps(G){const U={},L=G.props||!1;if("component"in G)U.default=L;else for(const Y in G.components)U[Y]=typeof L=="boolean"?L:L[Y];return U}function isAliasRecord(G){for(;G;){if(G.record.aliasOf)return!0;G=G.parent}return!1}function mergeMetaFields(G){return G.reduce((U,L)=>assign(U,L.meta),{})}function mergeOptions(G,U){const L={};for(const Y in G)L[Y]=Y in U?U[Y]:G[Y];return L}function isRecordChildOf(G,U){return U.children.some(L=>L===G||isRecordChildOf(G,L))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(G){return encodeURI(""+G).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(G){return commonEncode(G).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(G){return commonEncode(G).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(G){return encodeQueryValue(G).replace(EQUAL_RE,"%3D")}function encodePath(G){return commonEncode(G).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(G){return G==null?"":encodePath(G).replace(SLASH_RE,"%2F")}function decode(G){try{return decodeURIComponent(""+G)}catch(U){}return""+G}function parseQuery(G){const U={};if(G===""||G==="?")return U;const Y=(G[0]==="?"?G.slice(1):G).split("&");for(let X=0;X<Y.length;++X){const W=Y[X].replace(PLUS_RE," "),z=W.indexOf("="),J=decode(z<0?W:W.slice(0,z)),Z=z<0?null:decode(W.slice(z+1));if(J in U){let ee=U[J];Array.isArray(ee)||(ee=U[J]=[ee]),ee.push(Z)}else U[J]=Z}return U}function stringifyQuery(G){let U="";for(let L in G){const Y=G[L];if(L=encodeQueryKey(L),Y==null){Y!==void 0&&(U+=(U.length?"&":"")+L);continue}(Array.isArray(Y)?Y.map(W=>W&&encodeQueryValue(W)):[Y&&encodeQueryValue(Y)]).forEach(W=>{W!==void 0&&(U+=(U.length?"&":"")+L,W!=null&&(U+="="+W))})}return U}function normalizeQuery(G){const U={};for(const L in G){const Y=G[L];Y!==void 0&&(U[L]=Array.isArray(Y)?Y.map(X=>X==null?null:""+X):Y==null?Y:""+Y)}return U}function useCallbacks(){let G=[];function U(Y){return G.push(Y),()=>{const X=G.indexOf(Y);X>-1&&G.splice(X,1)}}function L(){G=[]}return{add:U,list:()=>G,reset:L}}function guardToPromiseFn(G,U,L,Y,X){const W=Y&&(Y.enterCallbacks[X]=Y.enterCallbacks[X]||[]);return()=>new Promise((z,J)=>{const Z=re=>{re===!1?J(createRouterError(4,{from:L,to:U})):re instanceof Error?J(re):isRouteLocation(re)?J(createRouterError(2,{from:U,to:re})):(W&&Y.enterCallbacks[X]===W&&typeof re=="function"&&W.push(re),z())},ee=G.call(Y&&Y.instances[X],U,L,Z);let te=Promise.resolve(ee);G.length<3&&(te=te.then(Z)),te.catch(re=>J(re))})}function extractComponentsGuards(G,U,L,Y){const X=[];for(const W of G)for(const z in W.components){let J=W.components[z];if(!(U!=="beforeRouteEnter"&&!W.instances[z]))if(isRouteComponent(J)){const ee=(J.__vccOpts||J)[U];ee&&X.push(guardToPromiseFn(ee,L,Y,W,z))}else{let Z=J();X.push(()=>Z.then(ee=>{if(!ee)return Promise.reject(new Error(`Couldn't resolve component "${z}" at "${W.path}"`));const te=isESModule(ee)?ee.default:ee;W.components[z]=te;const ie=(te.__vccOpts||te)[U];return ie&&guardToPromiseFn(ie,L,Y,W,z)()}))}}return X}function isRouteComponent(G){return typeof G=="object"||"displayName"in G||"props"in G||"__vccOpts"in G}function useLink(G){const U=inject(routerKey),L=inject(routeLocationKey),Y=computed(()=>U.resolve(unref(G.to))),X=computed(()=>{const{matched:Z}=Y.value,{length:ee}=Z,te=Z[ee-1],re=L.matched;if(!te||!re.length)return-1;const ie=re.findIndex(isSameRouteRecord.bind(null,te));if(ie>-1)return ie;const ne=getOriginalPath(Z[ee-2]);return ee>1&&getOriginalPath(te)===ne&&re[re.length-1].path!==ne?re.findIndex(isSameRouteRecord.bind(null,Z[ee-2])):ie}),W=computed(()=>X.value>-1&&includesParams(L.params,Y.value.params)),z=computed(()=>X.value>-1&&X.value===L.matched.length-1&&isSameRouteLocationParams(L.params,Y.value.params));function J(Z={}){return guardEvent(Z)?U[unref(G.replace)?"replace":"push"](unref(G.to)).catch(noop$2):Promise.resolve()}return{route:Y,href:computed(()=>Y.value.href),isActive:W,isExactActive:z,navigate:J}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(G,{slots:U}){const L=reactive(useLink(G)),{options:Y}=inject(routerKey),X=computed(()=>({[getLinkClass(G.activeClass,Y.linkActiveClass,"router-link-active")]:L.isActive,[getLinkClass(G.exactActiveClass,Y.linkExactActiveClass,"router-link-exact-active")]:L.isExactActive}));return()=>{const W=U.default&&U.default(L);return G.custom?W:h$4("a",{"aria-current":L.isExactActive?G.ariaCurrentValue:null,href:L.href,onClick:L.navigate,class:X.value},W)}}}),RouterLink=RouterLinkImpl;function guardEvent(G){if(!(G.metaKey||G.altKey||G.ctrlKey||G.shiftKey)&&!G.defaultPrevented&&!(G.button!==void 0&&G.button!==0)){if(G.currentTarget&&G.currentTarget.getAttribute){const U=G.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(U))return}return G.preventDefault&&G.preventDefault(),!0}}function includesParams(G,U){for(const L in U){const Y=U[L],X=G[L];if(typeof Y=="string"){if(Y!==X)return!1}else if(!Array.isArray(X)||X.length!==Y.length||Y.some((W,z)=>W!==X[z]))return!1}return!0}function getOriginalPath(G){return G?G.aliasOf?G.aliasOf.path:G.path:""}const getLinkClass=(G,U,L)=>G!=null?G:U!=null?U:L,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(G,{attrs:U,slots:L}){const Y=inject(routerViewLocationKey),X=computed(()=>G.route||Y.value),W=inject(viewDepthKey,0),z=computed(()=>X.value.matched[W]);provide(viewDepthKey,W+1),provide(matchedRouteKey,z),provide(routerViewLocationKey,X);const J=ref();return watch(()=>[J.value,z.value,G.name],([Z,ee,te],[re,ie,ne])=>{ee&&(ee.instances[te]=Z,ie&&ie!==ee&&Z&&Z===re&&(ee.leaveGuards.size||(ee.leaveGuards=ie.leaveGuards),ee.updateGuards.size||(ee.updateGuards=ie.updateGuards))),Z&&ee&&(!ie||!isSameRouteRecord(ee,ie)||!re)&&(ee.enterCallbacks[te]||[]).forEach(oe=>oe(Z))},{flush:"post"}),()=>{const Z=X.value,ee=z.value,te=ee&&ee.components[G.name],re=G.name;if(!te)return normalizeSlot(L.default,{Component:te,route:Z});const ie=ee.props[G.name],ne=ie?ie===!0?Z.params:typeof ie=="function"?ie(Z):ie:null,se=h$4(te,assign({},ne,U,{onVnodeUnmounted:ae=>{ae.component.isUnmounted&&(ee.instances[re]=null)},ref:J}));return normalizeSlot(L.default,{Component:se,route:Z})||se}}});function normalizeSlot(G,U){if(!G)return null;const L=G(U);return L.length===1?L[0]:L}const RouterView=RouterViewImpl;function createRouter(G){const U=createRouterMatcher(G.routes,G),L=G.parseQuery||parseQuery,Y=G.stringifyQuery||stringifyQuery,X=G.history,W=useCallbacks(),z=useCallbacks(),J=useCallbacks(),Z=shallowRef(START_LOCATION_NORMALIZED);let ee=START_LOCATION_NORMALIZED;isBrowser&&G.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const te=applyToParams.bind(null,Ie=>""+Ie),re=applyToParams.bind(null,encodeParam),ie=applyToParams.bind(null,decode);function ne(Ie,ke){let Me,Ye;return isRouteName(Ie)?(Me=U.getRecordMatcher(Ie),Ye=ke):Ye=Ie,U.addRoute(Ye,Me)}function oe(Ie){const ke=U.getRecordMatcher(Ie);ke&&U.removeRoute(ke)}function se(){return U.getRoutes().map(Ie=>Ie.record)}function ae(Ie){return!!U.getRecordMatcher(Ie)}function le(Ie,ke){if(ke=assign({},ke||Z.value),typeof Ie=="string"){const Le=parseURL(L,Ie,ke.path),pe=U.resolve({path:Le.path},ke),ge=X.createHref(Le.fullPath);return assign(Le,pe,{params:ie(pe.params),hash:decode(Le.hash),redirectedFrom:void 0,href:ge})}let Me;if("path"in Ie)Me=assign({},Ie,{path:parseURL(L,Ie.path,ke.path).path});else{const Le=assign({},Ie.params);for(const pe in Le)Le[pe]==null&&delete Le[pe];Me=assign({},Ie,{params:re(Ie.params)}),ke.params=re(ke.params)}const Ye=U.resolve(Me,ke),xe=Ie.hash||"";Ye.params=te(ie(Ye.params));const Re=stringifyURL(Y,assign({},Ie,{hash:encodeHash(xe),path:Ye.path})),we=X.createHref(Re);return assign({fullPath:Re,hash:xe,query:Y===stringifyQuery?normalizeQuery(Ie.query):Ie.query||{}},Ye,{redirectedFrom:void 0,href:we})}function ue(Ie){return typeof Ie=="string"?parseURL(L,Ie,Z.value.path):assign({},Ie)}function ce(Ie,ke){if(ee!==Ie)return createRouterError(8,{from:ke,to:Ie})}function he(Ie){return _e(Ie)}function fe(Ie){return he(assign(ue(Ie),{replace:!0}))}function de(Ie){const ke=Ie.matched[Ie.matched.length-1];if(ke&&ke.redirect){const{redirect:Me}=ke;let Ye=typeof Me=="function"?Me(Ie):Me;return typeof Ye=="string"&&(Ye=Ye.includes("?")||Ye.includes("#")?Ye=ue(Ye):{path:Ye},Ye.params={}),assign({query:Ie.query,hash:Ie.hash,params:Ie.params},Ye)}}function _e(Ie,ke){const Me=ee=le(Ie),Ye=Z.value,xe=Ie.state,Re=Ie.force,we=Ie.replace===!0,Le=de(Me);if(Le)return _e(assign(ue(Le),{state:xe,force:Re,replace:we}),ke||Me);const pe=Me;pe.redirectedFrom=ke;let ge;return!Re&&isSameRouteLocation(Y,Ye,Me)&&(ge=createRouterError(16,{to:pe,from:Ye}),Ae(Ye,Ye,!0,!1)),(ge?Promise.resolve(ge):ve(pe,Ye)).catch(Ee=>isNavigationFailure(Ee)?isNavigationFailure(Ee,2)?Ee:Ze(Ee):Ve(Ee,pe,Ye)).then(Ee=>{if(Ee){if(isNavigationFailure(Ee,2))return _e(assign(ue(Ee.to),{state:xe,force:Re,replace:we}),ke||pe)}else Ee=be(pe,Ye,!0,we,xe);return ye(pe,Ye,Ee),Ee})}function me(Ie,ke){const Me=ce(Ie,ke);return Me?Promise.reject(Me):Promise.resolve()}function ve(Ie,ke){let Me;const[Ye,xe,Re]=extractChangingRecords(Ie,ke);Me=extractComponentsGuards(Ye.reverse(),"beforeRouteLeave",Ie,ke);for(const Le of Ye)Le.leaveGuards.forEach(pe=>{Me.push(guardToPromiseFn(pe,Ie,ke))});const we=me.bind(null,Ie,ke);return Me.push(we),runGuardQueue(Me).then(()=>{Me=[];for(const Le of W.list())Me.push(guardToPromiseFn(Le,Ie,ke));return Me.push(we),runGuardQueue(Me)}).then(()=>{Me=extractComponentsGuards(xe,"beforeRouteUpdate",Ie,ke);for(const Le of xe)Le.updateGuards.forEach(pe=>{Me.push(guardToPromiseFn(pe,Ie,ke))});return Me.push(we),runGuardQueue(Me)}).then(()=>{Me=[];for(const Le of Ie.matched)if(Le.beforeEnter&&!ke.matched.includes(Le))if(Array.isArray(Le.beforeEnter))for(const pe of Le.beforeEnter)Me.push(guardToPromiseFn(pe,Ie,ke));else Me.push(guardToPromiseFn(Le.beforeEnter,Ie,ke));return Me.push(we),runGuardQueue(Me)}).then(()=>(Ie.matched.forEach(Le=>Le.enterCallbacks={}),Me=extractComponentsGuards(Re,"beforeRouteEnter",Ie,ke),Me.push(we),runGuardQueue(Me))).then(()=>{Me=[];for(const Le of z.list())Me.push(guardToPromiseFn(Le,Ie,ke));return Me.push(we),runGuardQueue(Me)}).catch(Le=>isNavigationFailure(Le,8)?Le:Promise.reject(Le))}function ye(Ie,ke,Me){for(const Ye of J.list())Ye(Ie,ke,Me)}function be(Ie,ke,Me,Ye,xe){const Re=ce(Ie,ke);if(Re)return Re;const we=ke===START_LOCATION_NORMALIZED,Le=isBrowser?history.state:{};Me&&(Ye||we?X.replace(Ie.fullPath,assign({scroll:we&&Le&&Le.scroll},xe)):X.push(Ie.fullPath,xe)),Z.value=Ie,Ae(Ie,ke,Me,we),Ze()}let Te;function Se(){Te||(Te=X.listen((Ie,ke,Me)=>{const Ye=le(Ie),xe=de(Ye);if(xe){_e(assign(xe,{replace:!0}),Ye).catch(noop$2);return}ee=Ye;const Re=Z.value;isBrowser&&saveScrollPosition(getScrollKey(Re.fullPath,Me.delta),computeScrollPosition()),ve(Ye,Re).catch(we=>isNavigationFailure(we,12)?we:isNavigationFailure(we,2)?(_e(we.to,Ye).then(Le=>{isNavigationFailure(Le,20)&&!Me.delta&&Me.type===NavigationType.pop&&X.go(-1,!1)}).catch(noop$2),Promise.reject()):(Me.delta&&X.go(-Me.delta,!1),Ve(we,Ye,Re))).then(we=>{we=we||be(Ye,Re,!1),we&&(Me.delta?X.go(-Me.delta,!1):Me.type===NavigationType.pop&&isNavigationFailure(we,20)&&X.go(-1,!1)),ye(Ye,Re,we)}).catch(noop$2)}))}let Ue=useCallbacks(),Pe=useCallbacks(),Ne;function Ve(Ie,ke,Me){Ze(Ie);const Ye=Pe.list();return Ye.length?Ye.forEach(xe=>xe(Ie,ke,Me)):console.error(Ie),Promise.reject(Ie)}function ze(){return Ne&&Z.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Ie,ke)=>{Ue.add([Ie,ke])})}function Ze(Ie){return Ne||(Ne=!Ie,Se(),Ue.list().forEach(([ke,Me])=>Ie?Me(Ie):ke()),Ue.reset()),Ie}function Ae(Ie,ke,Me,Ye){const{scrollBehavior:xe}=G;if(!isBrowser||!xe)return Promise.resolve();const Re=!Me&&getSavedScrollPosition(getScrollKey(Ie.fullPath,0))||(Ye||!Me)&&history.state&&history.state.scroll||null;return nextTick().then(()=>xe(Ie,ke,Re)).then(we=>we&&scrollToPosition(we)).catch(we=>Ve(we,Ie,ke))}const De=Ie=>X.go(Ie);let Ke;const Qe=new Set;return{currentRoute:Z,addRoute:ne,removeRoute:oe,hasRoute:ae,getRoutes:se,resolve:le,options:G,push:he,replace:fe,go:De,back:()=>De(-1),forward:()=>De(1),beforeEach:W.add,beforeResolve:z.add,afterEach:J.add,onError:Pe.add,isReady:ze,install(Ie){const ke=this;Ie.component("RouterLink",RouterLink),Ie.component("RouterView",RouterView),Ie.config.globalProperties.$router=ke,Object.defineProperty(Ie.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Z)}),isBrowser&&!Ke&&Z.value===START_LOCATION_NORMALIZED&&(Ke=!0,he(X.location).catch(xe=>{}));const Me={};for(const xe in START_LOCATION_NORMALIZED)Me[xe]=computed(()=>Z.value[xe]);Ie.provide(routerKey,ke),Ie.provide(routeLocationKey,reactive(Me)),Ie.provide(routerViewLocationKey,Z);const Ye=Ie.unmount;Qe.add(Ie),Ie.unmount=function(){Qe.delete(Ie),Qe.size<1&&(ee=START_LOCATION_NORMALIZED,Te&&Te(),Te=null,Z.value=START_LOCATION_NORMALIZED,Ke=!1,Ne=!1),Ye()}}}}function runGuardQueue(G){return G.reduce((U,L)=>U.then(()=>L()),Promise.resolve())}function extractChangingRecords(G,U){const L=[],Y=[],X=[],W=Math.max(U.matched.length,G.matched.length);for(let z=0;z<W;z++){const J=U.matched[z];J&&(G.matched.find(ee=>isSameRouteRecord(ee,J))?Y.push(J):L.push(J));const Z=G.matched[z];Z&&(U.matched.find(ee=>isSameRouteRecord(ee,Z))||X.push(Z))}return[L,Y,X]}Promise.prototype.finally||(Promise.prototype.finally=function(U){var L=this.constructor;return this.then(function(Y){return L.resolve(U()).then(function(){return Y})},function(Y){return L.resolve(U()).then(function(){return L.reject(Y)})})});var SET_LEVEL_MODE$1;(function(G){G.SOFT="soft",G.HARD="hard",G.SMOOTH="smooth"})(SET_LEVEL_MODE$1||(SET_LEVEL_MODE$1={}));var PLAY_MODE$1;(function(G){G.VOD="vod",G.LIVE="live"})(PLAY_MODE$1||(PLAY_MODE$1={}));var CAN_PLAY_ALL$1=null,VIDEO_CONTAINER_CLASS$1="txp_videos_container",END_STATE$1;(function(G){G.NORMAL="normal",G.INTERRUPT="interrupt",G.ERROR="error"})(END_STATE$1||(END_STATE$1={}));var VIDEO_EVTS$1;(function(G){G.timeupdate="timeupdate",G.durationchange="durationchange",G.volumechange="volumechange",G.canplay="canplay",G.playing="playing",G.pause="pause",G.waiting="waiting",G.seeking="seeking",G.seeked="seeked",G.loadeddata="loadeddata",G.loadedmetadata="loadedmetadata",G.ended="ended",G.error="error",G.progress="progress",G.ratechange="ratechange",G.resize="resize"})(VIDEO_EVTS$1||(VIDEO_EVTS$1={}));var VIDEO_STATE$1;(function(G){G.IDLE="idle",G.LOAD_START="loadStart",G.CANPLAY="canplay",G.PLAYING="playing",G.PAUSE="pause",G.SEEKING="seeking",G.SEEKED="seeked",G.BUFFERING="buffering",G.END="end"})(VIDEO_STATE$1||(VIDEO_STATE$1={}));var ERROR_CODE$1;(function(G){G.UNKNOWN_ERR="70011000",G.MEDIA_ERR_ABORTED="70011100",G.MEDIA_ERR_NETWORK="70011101",G.MEDIA_ERR_DECODE="70011102",G.MEDIA_ERR_SRC_NOT_SUPPORTED="70011103",G.ORG_LOAD_TIMEOUT="70011104",G.ORG_PLAY_STUCK_ERR="70011111",G.NULL_URL="70011112",G.MISSING_KERNEL="70011113",G.KERNEL_NOT_SPT="70011114"})(ERROR_CODE$1||(ERROR_CODE$1={}));var VIDEO_ELEMENT_ERROR$1={1:{code:ERROR_CODE$1.MEDIA_ERR_ABORTED,message:"\u89C6\u9891\u83B7\u53D6\u88AB\u7EC8\u6B62"},2:{code:ERROR_CODE$1.MEDIA_ERR_NETWORK,message:"\u4E0B\u8F7D\u89C6\u9891\u53D1\u751F\u9519\u8BEF"},3:{code:ERROR_CODE$1.MEDIA_ERR_DECODE,message:"\u5C1D\u8BD5\u89E3\u7801\u51FA\u9519"},4:{code:ERROR_CODE$1.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u8BE5\u97F3\u89C6\u9891"}},ERROR_MSG$1;(function(G){G.UNKNOWN="\u672A\u77E5\u9519\u8BEF",G.XHR_NET="\u89C6\u9891\u83B7\u53D6\u9014\u4E2D\u51FA\u73B0\u95EE\u9898",G.PRELOAD_VIDEO_TIMEOUT="\u52A0\u8F7D\u89C6\u9891\u8D85\u65F6",G.PLAY_STUCK="\u89C6\u9891\u65E0\u6CD5\u7EE7\u7EED\u64AD\u653E",G.LOAD_STREAM_FAIL="\u89C6\u9891\u6D41\u83B7\u53D6\u9014\u4E2D\u51FA\u73B0\u95EE\u9898",G.INNER="\u5185\u90E8\u9519\u8BEF",G.NULL_URL="\u4F20\u5165\u7684\u5730\u5740\u4E3A\u7A7A"})(ERROR_MSG$1||(ERROR_MSG$1={}));var PLAY_EVENT$1;(function(G){G.RESTART="restart",G.TIME_UPDATE="timeupdate",G.METADATA_CHANGE="metadataChange",G.RATE_CHANGE="rateChange",G.VOLUME_CHANGE="volumeChange",G.DURATION_CHANGE="durationChange",G.AUTOPLAY_BLOCKED="autoplayBlocked",G.LOAD_PROGRESS="loadProgress",G.STATE_CHANGE="stateChange",G.FIRST_PLAYING="firstPlaying",G.VIDEONODE_PLAY_OVER="videoNodePlayOver",G.VIDEONODE_START_PLAY="videoNodeStartPlay",G.VIDEONODE_FIRST_PLAYING="videoNodeFirstPlaying",G.VIDEONODE_CHANGE="videoNodeChange",G.LIST_CHANGE="listChange",G.SET_LOADING="setLoading",G.PRELOAD_START="preloadStart",G.PRELOAD_VIDEONODE_OVER="preloadVideonodeOver",G.PRELOAD_VIDEONODE_CLEAR="preloadVideonodeClear",G.PRELOAD_VIDEONODE_ERROR="preloadVideonodeError",G.VIDEO_BUFFER_CHANGE="videoBufferChange",G.SETLEVEL_START="setLevelStart",G.SETLEVEL_OVER="setLevelOver",G.RESIZE="resize",G.STOPED="stoped",G.ERROR="error",G.RETRY_BACKURL="retryBackUrl",G.DECODE_TIME="decodeTime",G.ELEMENT_EVTS="elementEvts",G.VIDEO_RESIZE="videoResize"})(PLAY_EVENT$1||(PLAY_EVENT$1={}));var VIDEO_NODE_EVENT$1;(function(G){G.TIME_UPDATE="vn_timeupdate",G.METADATA_CHANGE="vn_metadataChange",G.VOLUME_CHANGE="vn_volumeChange",G.DURATION_CHANGE="vn_durationChange",G.PLAY_PROMISE_CATCHED="vn_playPromiseCatched",G.LOAD_PROGRESS="vn_loadProgress",G.RATE_CHANGE="vn_rateChange",G.BUFFER_APPENDED="vn_bufferAppended",G.STATE_CHANGE="vn_stateChange",G.ERROR="vn_error",G.RETRY="vn_retry",G.SET_LOADING="vn_setLoading",G.VIDEO_BUFFER_CHANGE="vn_videoBufferChange",G.SETLEVEL_START="vn_setLevelStart",G.SETLEVEL_OVER="vn_setLevelOver",G.URL_CHANGE="vn_urlChange",G.FIRST_PLAYING="vn_firstPlaying",G.ELEMENT_EVTS="vn_elementEvts",G.PLAY_OVER="vn_playOver",G.VIDEO_RESIZE="vn_videoResize"})(VIDEO_NODE_EVENT$1||(VIDEO_NODE_EVENT$1={}));var MSE_EVENTS$1;(function(G){G.OEPN="open",G.CLOSE="close",G.ERROR="error",G.REINIT="REINIT",G.UPDATE_END="updateend",G.REMOVE_END="removeend"})(MSE_EVENTS$1||(MSE_EVENTS$1={}));var PAUSE_TYPE$1;(function(G){G.USER="user",G.INNER="inner",G.SYS="sys"})(PAUSE_TYPE$1||(PAUSE_TYPE$1={}));var PLAYER_LOG_LEVEL$1;(function(G){G[G.NONE=0]="NONE",G[G.CORE=1]="CORE",G[G.KERNEL=2]="KERNEL"})(PLAYER_LOG_LEVEL$1||(PLAYER_LOG_LEVEL$1={}));var PRELOAD_TYPE$1;(function(G){G.META_DATA="metadata",G.AUTO="auto",G.AUTO_LOAD="autoLoad"})(PRELOAD_TYPE$1||(PRELOAD_TYPE$1={}));var CODEC$1;(function(G){G[G.H264=0]="H264",G[G.H265=1]="H265",G[G.AV1=2]="AV1"})(CODEC$1||(CODEC$1={}));var VIDEO_ELEMENT_STATE$1;(function(G){G.FREE="0",G.USED="1"})(VIDEO_ELEMENT_STATE$1||(VIDEO_ELEMENT_STATE$1={}));var CDN_PATH_PREFIX$1="//vm.gtimg.cn/thumbplayer/",CACHE_SIZE_KEY$1;(function(G){G.DEMUX="demux_cache_size"})(CACHE_SIZE_KEY$1||(CACHE_SIZE_KEY$1={}));function t$1(G,U,L,Y){return new(L||(L=Promise))(function(X,W){function z(ee){try{Z(Y.next(ee))}catch(te){W(te)}}function J(ee){try{Z(Y.throw(ee))}catch(te){W(te)}}function Z(ee){var te;ee.done?X(ee.value):(te=ee.value,te instanceof L?te:new L(function(re){re(te)})).then(z,J)}Z((Y=Y.apply(G,U||[])).next())})}function e$1(G,U){var L,Y,X,W,z={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return W={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function J(Z){return function(ee){return function(te){if(L)throw new TypeError("Generator is already executing.");for(;z;)try{if(L=1,Y&&(X=2&te[0]?Y.return:te[0]?Y.throw||((X=Y.return)&&X.call(Y),0):Y.next)&&!(X=X.call(Y,te[1])).done)return X;switch(Y=0,X&&(te=[2&te[0],X.value]),te[0]){case 0:case 1:X=te;break;case 4:return z.label++,{value:te[1],done:!1};case 5:z.label++,Y=te[1],te=[0];continue;case 7:te=z.ops.pop(),z.trys.pop();continue;default:if(X=z.trys,!((X=X.length>0&&X[X.length-1])||te[0]!==6&&te[0]!==2)){z=0;continue}if(te[0]===3&&(!X||te[1]>X[0]&&te[1]<X[3])){z.label=te[1];break}if(te[0]===6&&z.label<X[1]){z.label=X[1],X=te;break}if(X&&z.label<X[2]){z.label=X[2],z.ops.push(te);break}X[2]&&z.ops.pop(),z.trys.pop();continue}te=U.call(G,z)}catch(re){te=[6,re],Y=0}finally{L=X=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([Z,ee])}}}function n$3(G,U,L){if(L||arguments.length===2)for(var Y,X=0,W=U.length;X<W;X++)!Y&&X in U||(Y||(Y=Array.prototype.slice.call(U,0,X)),Y[X]=U[X]);return G.concat(Y||Array.prototype.slice.call(U))}var r$4;(function(G){G[G.sync=1]="sync",G[G.async=0]="async"})(r$4||(r$4={}));var i$3=function(){function G(){this._hasPriority=!1,this._array=[]}return G.prototype.insert=function(U,L){if(L===void 0&&(L=!1),U.priority!==0&&(this._hasPriority=!0),!this._hasPriority)return L?(this._array.unshift(U),0):(this._array.push(U),this._array.length-1);var Y=this._array.findIndex(function(X){return X.priority===U.priority?L:X.priority<U.priority});return Y===-1?(this._array.push(U),this._array.length-1):(this._array.splice(Y,0,U),Y)},G.prototype.clone=function(){return n$3([],this._array,!0)},G.prototype.getListener=function(U){return this._array[U]},G.prototype.getListeners=function(){return this._array.map(function(U){return U.listener})},G.prototype.remove=function(U){var L=this._array.findIndex(function(Y){return Y.listener===U});L!==-1&&(this._array[L].isRemove=!0,this._array.splice(L,1))},G.prototype.findIdx=function(U){return this._array.findIndex(function(L){return L.listener===U})},G.prototype.size=function(){return this._array.length},G}(),s$3=function(){function G(U){U===void 0&&(U={}),this._events=Object.create(null),this._cacheEvents=Object.create(null);var L=U.maxListeners,Y=L===void 0?10:L,X=U.replayType,W=X===void 0?r$4.sync:X,z=U.isCache,J=z!==void 0&&z;this._isCache=J,this._replayType=W,this._maxListeners=Y}return G.prototype.setCacheStatus=function(U){this._isCache=U},G.prototype.setReplayType=function(U){this._replayType=U},G.prototype.getCacheStatus=function(){return this._isCache},G.prototype.clearCache=function(){this._isCache=!1,this._cacheEvents=Object.create(null)},G.prototype.setMaxListeners=function(U){return this._maxListeners=U,this},G.prototype.getMaxListeners=function(){return this._maxListeners},G.prototype.emit=function(U){for(var L=[],Y=1;Y<arguments.length;Y++)L[Y-1]=arguments[Y];return this._emit.apply(this,n$3([!1,U],L,!1))},G.prototype.asyncEmit=function(U){for(var L=[],Y=1;Y<arguments.length;Y++)L[Y-1]=arguments[Y];return this._emit.apply(this,n$3([!0,U],L,!1))},G.prototype.addListener=function(U,L){return this._addListener(U,{listener:L,priority:0,isOnce:!1})},G.prototype.on=function(U,L,Y){return Y===void 0&&(Y=0),this._addListener(U,{listener:L,priority:Y,isOnce:!1})},G.prototype.listeners=function(U){var L=this._events[U];return L?L.getListeners():[]},G.prototype.prependListener=function(U,L){return this._addListener(U,{listener:L,priority:0,isOnce:!1},!0)},G.prototype.once=function(U,L,Y){return Y===void 0&&(Y=0),this._addListener(U,{listener:L,priority:Y,isOnce:!0})},G.prototype.removeListener=function(U,L){var Y=this._events[U];return Y?(Y.remove(L),this):this},G.prototype.off=function(U,L){return this.removeListener(U,L)},G.prototype.removeAllListeners=function(U){return U===void 0?(this._events=Object.create(null),this):(this._events[U]&&delete this._events[U],this)},G.prototype.listenerCount=function(U){var L;return((L=this._events[U])===null||L===void 0?void 0:L.size())||0},G.prototype.eventNames=function(){return Object.getOwnPropertyNames(this._events)},G.prototype._emit=function(U,L){var Y=this;U===void 0&&(U=!1);for(var X=[],W=2;W<arguments.length;W++)X[W-2]=arguments[W];var z=[{type:L,target:this,data:X.length===1?X[0]:X}],J=this._events[L],Z={stopIndex:-1,onceCount:0,emitData:z};if(this._addCacheEvent(L,Z,U),!J)return!!U&&Promise.resolve(!1);var ee=Promise.resolve();return J.clone().some(function(te,re){return(te.isOnce||te.isRemove)&&(Z.onceCount+=1),!te.isRemove&&(U?(ee=ee.then(function(){return t$1(Y,void 0,void 0,function(){return e$1(this,function(ie){switch(ie.label){case 0:return Z.stopIndex>=0||te.isRemove?[2]:(te.isOnce&&J.remove(te.listener),[4,te.listener.apply(this,z)]);case 1:return ie.sent()===G.STOP_IMMEDIATE_PROPAGATION&&(Z.stopIndex=Math.max(re-Z.onceCount,0)),[2]}})})}),!1):(te.isOnce&&J.remove(te.listener),te.listener.apply(Y,z)===G.STOP_IMMEDIATE_PROPAGATION&&(Z.stopIndex=Math.max(re-Z.onceCount,0),!0)))}),!U||ee.then(function(){return!0})},G.prototype._addCacheEvent=function(U,L,Y){if(this._isCache){var X=Y?Promise.resolve(L):L;this._cacheEvents[U]?this._cacheEvents[U].push(X):this._cacheEvents[U]=[X]}},G.prototype._replayCacheEvent=function(U,L,Y){var X=this,W=this._cacheEvents[U];if(this._isCache&&W){var z=L.isOnce?1:0;W.some(function(J,Z){return J instanceof Promise?(W[Z]=J.then(function(ee){return t$1(X,void 0,void 0,function(){var te;return e$1(this,function(re){switch(re.label){case 0:return ee.stopIndex>=0&&Y>ee.stopIndex?[2,ee]:[4,L.listener.apply(this,ee.emitData)];case 1:return te=re.sent(),L.isOnce&&this.off(U,L.listener),te===G.STOP_IMMEDIATE_PROPAGATION?ee.stopIndex=Math.max(Y-z,0):ee.stopIndex>=0&&Y<=ee.stopIndex&&(ee.stopIndex=ee.stopIndex-z+1),[2,ee]}})})}),L.isOnce):(J.stopIndex>=0&&Y>J.stopIndex||(L.isOnce&&X.off(U,L.listener),L.listener.apply(X,J.emitData)===G.STOP_IMMEDIATE_PROPAGATION?J.stopIndex=Math.max(Y-z,0):J.stopIndex>=0&&Y<=J.stopIndex&&(J.stopIndex=J.stopIndex-z+1)),L.isOnce)})}},G.prototype._addListener=function(U,L,Y){var X=this;Y===void 0&&(Y=!1),this._events[U]||(this._events[U]=new i$3);var W=this._events[U].insert(L,Y);return this._maxListeners>0&&this._events[U].size()===this._maxListeners&&console.warn("Possible EventEmitter memory leak detected. ".concat(this._events[U].size()," ").concat(String(U)," listeners ")+"added. Use emitter.setMaxListeners() to increase limit"),this._replayType===r$4.async?setTimeout(function(){var z=X._events[U].findIdx(L.listener);z!==-1&&X._replayCacheEvent(U,L,z)}):this._replayCacheEvent(U,L,W),this},G.STOP_IMMEDIATE_PROPAGATION="EventEmitter.STOP_IMMEDIATE_PROPAGATION",G}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var e=function(){return(e=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++)for(var X in U=arguments[L])Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X]);return G}).apply(this,arguments)},t=function(){function G(){}return G.setDefault=function(U){G.defaultOptions=e(e({},G.defaultOptions),U)},G.getCookie=function(U){var L=void 0,Y=document.cookie?document.cookie.split("; "):[],X={};return Y.some(function(W){var z=W.split("="),J=z[0],Z=z.slice(1),ee=G.decode(J),te=G.parseValue(Z.join("="));return ee===U?(L=te,!0):(X[ee]=te,!1)}),U===void 0?X:L},G.setCookie=function(U,L,Y){return Y===void 0&&(Y={}),G.set(U,L,Y)},G.clearCookie=function(U,L,Y){L===void 0&&(L=""),Y===void 0&&(Y=""),G.setCookie(U,"",{domain:L,path:Y,expires:-1})},G.clearAllCookies=function(U,L){U===void 0&&(U=""),L===void 0&&(L="");var Y=document.cookie?document.cookie.split("; "):[],X={domain:U,path:L,expires:-1};Y.forEach(function(W){var z=W.split("=")[0];G.set(z,"",X,!0)})},G.set=function(U,L,Y,X){X===void 0&&(X=!1);var W=e(e({},G.defaultOptions),Y),z=W.domain,J=W.path,Z=W.secure,ee=W.expires,te=W.sameSite,re=new Date(Date.now()+24*ee*60*60*1e3),ie=[(X?U:G.encode(U))+"="+G.stringifyValue(L),"; expires="+re.toUTCString(),J?"; path="+J:"",z?"; domain="+z:"",te?"; SameSite="+te:"",Z?"; Secure":""].join("");return document.cookie=ie,ie},G.encode=function(U){return G.raw?U:encodeURIComponent(U)},G.decode=function(U){return G.raw?U:decodeURIComponent(U)},G.stringifyValue=function(U){return G.encode(G.json?JSON.stringify(U):String(U))},G.parseValue=function(U){if(G.raw)return U;var L=U;L.indexOf('"')===0&&(L=L.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return L=decodeURIComponent(L.replace(/\+/g," ")),G.json?JSON.parse(L):L}catch(Y){}},G.raw=!1,G.json=!1,G.defaultOptions={domain:"",path:"/",expires:365,secure:!0,sameSite:""},G}(),n$2=function(G,U){var L=""+G;return!L||L.length>=U?L:""+Array(U+1-L.length).join("0")+G},i$2=/\[([^\]]+)]|(Y|y){1,4}|M{1,4}|D{1,2}|d{1,2}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function r$3(G,U){U===void 0&&(U="yyyy-MM-DD HH:mm:ss");var L=new Date(G);if(isNaN(L.getTime()))return L.toString();var Y=U,X=""+L.getFullYear(),W=X.slice(-2),z=L.getHours(),J=""+(z%12||12),Z=""+(L.getMonth()+1),ee=""+L.getDate(),te=""+L.getDay(),re=""+L.getMinutes(),ie=""+L.getSeconds(),ne=""+L.getMilliseconds(),oe=15*Math.round(L.getTimezoneOffset()/15),se=Math.abs(oe),ae=n$2(Math.floor(se/60),2),le=n$2(se%60,2),ue=oe<=0?"+":"-",ce=""+ue+ae+":"+le,he=""+ue+ae+le,fe={YY:W,YYYY:X,yy:W,yyyy:X,M:Z,MM:n$2(Z,2),D:ee,DD:n$2(ee,2),d:te,dd:n$2(ee,2),H:""+z,HH:n$2(z,2),h:n$2(J,1),hh:n$2(J,2),a:z<12?"am":"pm",A:z<12?"AM":"PM",m:re,mm:n$2(re,2),s:ie,ss:n$2(ie,2),SSS:n$2(ne,3),Z:ce,ZZ:he};return Y.replace(i$2,function(de,_e){return _e||fe[de]||de})}var o$2;function v$2(G){try{return decodeURIComponent(G.replace(/\+/g," "))}catch(U){return null}}function g$1(G,U){var L=[null,void 0,"",NaN].includes(G);if(U.isSkipEmpty&&L)return null;var Y=!U.isSkipEmpty&&L?"":G;try{return U.encode?encodeURIComponent(Y):Y}catch(X){return null}}function h$3(G){var U=G.split("#"),L=U[0],Y=U[1],X=Y===void 0?"":Y,W=L.split("?"),z=W[0],J=W[1],Z=J===void 0?"":J,ee=v$2(X),te=Object.create(null);return Z.split("&").forEach(function(re){var ie=re.split("="),ne=ie[0],oe=ie[1],se=oe===void 0?"":oe,ae=v$2(ne),le=v$2(se);ae===null||le===null||ae===""&&le===""||te[ae]||(te[ae]=le)}),{url:z,query:te,hash:ee}}function m$2(G,U){U===void 0&&(U={encode:!0,isSkipEmpty:!1});var L=G.url,Y=G.query,X=Y===void 0?{}:Y,W=G.hash,z=L.split("#"),J=z[0],Z=z[1],ee=Z===void 0?"":Z,te=J.split("?")[0],re=[],ie=g$1(W||ee,U),ne=e(e({},h$3(L).query),X);return Object.keys(ne).forEach(function(oe){var se=g$1(oe,U),ae=g$1(ne[oe],U);se!==null&&ae!==null&&re.push(se+"="+ae)}),te+(re.length?"?"+re.join("&"):"")+(ie?"#"+ie:"")}function y$1(G,U){var L;if(!U||!document.querySelectorAll("style[data-tag="+U+"]").length){var Y=document.createElement("style");Y.textContent=G.trim(),U&&(Y.dataset.tag=U),(L=document.getElementsByTagName("head")[0])===null||L===void 0||L.appendChild(Y)}}function x$1(G,U){return new Promise(function(L,Y){if(U&&document.querySelectorAll("script[data-tag="+U+"]").length)return L();var X=document.createElement("script"),W=e({type:"text/javascript",charset:"utf-8"},G);Object.keys(W).forEach(function(z){return S$1(X,z,W[z])}),U&&(X.dataset.tag=U),X.onload=function(){return L()},X.onreadystatechange=function(){var z=X.readyState;["complete","loaded"].includes(z)&&(X.onreadystatechange=null,L())},X.onerror=Y,document.body.appendChild(X)})}function S$1(G,U,L){if(G)return L===void 0?G.getAttribute(U):G.setAttribute(U,L)}function M(G,U){return!!(G!=null&&G.className)&&G.getAttribute("class").split(" ").indexOf(U)!==-1}function q(G,U){if(G&&!M(G,U)){var L=(G.className+" "+U).trim();G.setAttribute("class",L)}}function _$1(G,U){if(G){var L=G.className.split(" "),Y=L.indexOf(U);Y!==-1&&(L.splice(Y,1),G.className=L.join(" "))}}function E$1(G,U,L){if(G&&U)if(typeof U!="string"||L===void 0){if(typeof U=="string"&&L===void 0)return(G.currentStyle?G.currentStyle:getComputedStyle(G,null))[U];typeof U=="object"&&Object.keys(U).forEach(function(X){return E$1(G,X,U[X])})}else{var Y=/width|height|left|right|top|bottom|padding|margin/i.test(U)&&typeof L=="number";G.style[U]=Y?L+"px":L}}function O$1(G){E$1(G,{display:"none"})}function k(G,U){U===void 0&&(U="block"),E$1(G,{display:U})}function j$1(G,U){if(G)return U===void 0?G.innerText:void(G.innerText=U)}function C$1(G,U){if(G)return U===void 0?G.innerHTML:void(G.innerHTML=U)}(function(G){G[G.equal=0]="equal",G[G.low=-1]="low",G[G.high=1]="high"})(o$2||(o$2={}));var A$1=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z-]+(?:\.[\da-z-]+)*)?(?:\+[\da-z-]+(?:\.[\da-z-]+)*)?)?)?$/i;function P$1(G){var U,L,Y=G.replace(/^v/,"").replace(/\+.*$/,""),X=(L="-",(U=Y).indexOf(L)===-1?U.length:U.indexOf(L)),W=Y.substring(0,X).split(".");return W.push(Y.substring(X+1)),W}function N(G){return isNaN(Number(G))?G:Number(G)}function D(G){if(typeof G!="string")throw new TypeError("Invalid argument expected string");if(!A$1.test(G))throw new Error("Invalid argument not valid semver ('"+G+"' received)")}function T(G,U){[G,U].forEach(D);for(var L=P$1(G),Y=P$1(U),X=0;X<Math.max(L.length-1,Y.length-1);X++){var W=parseInt(L[X]||"0",10),z=parseInt(Y[X]||"0",10);if(W>z)return o$2.high;if(z>W)return o$2.low}var J=L[L.length-1],Z=Y[Y.length-1];if(J&&Z){var ee=J.split(".").map(N),te=Z.split(".").map(N);for(X=0;X<Math.max(ee.length,te.length);X++){if(ee[X]===void 0||typeof te[X]=="string"&&typeof ee[X]=="number")return-1;if(te[X]===void 0||typeof ee[X]=="string"&&typeof te[X]=="number")return 1;if(ee[X]>te[X])return o$2.high;if(te[X]>ee[X])return o$2.low}}else if(J||Z)return J?o$2.low:o$2.high;return o$2.equal}var B=/</g,I$1=/>/g,H=/"/g,Q=/'/g,R=/&/g;function V(G){return G?(""+G).replace(R,"&amp;").replace(B,"&lt;").replace(I$1,"&gt;").replace(H,"&quot;").replace(Q,"&#39;"):""}var comTool$1={isObject:function(G){return typeof G=="object"&&G.constructor===Object},createGUID:function(G){G===void 0&&(G=32);for(var U=G||32,L="",Y=1;Y<=U;Y++){var X=Math.floor(Math.random()*16).toString(16);L+=X}return L},xss:V,removeDiscontinuityTimeRangesFromPlayTime:function(G,U){var L=comTool$1.findDiscontinuityTimeRangeAtPlaytime(G,U);if(L)return L.start;var Y=G;return U.forEach(function(X){X.end<G&&(Y-=X.end-X.start)}),Y},findDiscontinuityTimeRangeAtPlaytime:function(G,U){return comTool$1.mergeTimeRanges(U).find(function(L){return G>=L.start&&G<=L.end})},mergeTimeRanges:function(G){var U=-1,L=-1,Y=[];return G.forEach(function(X){var W=X.start,z=X.end;U<0&&(U=W),W!==L&&L>=0&&(Y.push({start:U,end:L}),U=W),L=z}),U>=0&&L>=0&&Y.push({start:U,end:L}),Y},compareVersion:T,formatPlayTime:function(G){var U=G;if(typeof U=="string"&&(U=parseInt(U,10)),typeof U!="number"||Number.isNaN(U))return"00:00";var L=function(z){return z<10?"0".concat(z):z},Y=Math.floor(U/3600),X=Math.floor((U-Y*3600)/60),W=Math.floor(U-Y*3600-X*60);return Y===0?[L(X),L(W)].join(":"):[Y,L(X),L(W)].join(":")},dateFormat:function(G,U){return U===void 0&&(U=Date.now()),r$3(U,G||"yyyy-MM-dd hh:mm:ss")},base64ToArrayBuffer:function(G){for(var U=window.atob(G),L=U.length,Y=new Uint8Array(L),X=0;X<L;X++)Y[X]=U.charCodeAt(X);return Y},setTimeoutByRAF:function(G,U){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame,Y=+new Date;function X(){+new Date-Y>U?G():L(X)}X()}};function uaMatch$1(G){var U,L,Y;G=G||navigator.userAgent,G=G.toLowerCase(),this.browser={},this.os={},this.mobile=!1,this.spider=!1,G.indexOf("mobile")>-1&&(this.mobile=!0);for(var X={android_1:/android[\s\/]([\d\.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\stouch;\sCPU\siPhone\sos\s([\d_]+)/i,ipod_100:/iPod.*os\s?([\d_\.]+)/i,iphone:/iPhone;\sCPU\siPhone\sos\s([\d_]+)/i,iphone_100:/iPhone.*os\s?([\d_\.]+)/i,ipad_1:/ipad;\scpu\sos\s([\d_]+)/i,ipad_2:/ipad([\d]+)?/i,windows:/windows\snt\s([\d\.]+)/i,mac:/Macintosh.*mac\sos\sx\s([\d_\.]+)/i,linux:/Linux/i},W,z,J=Object.keys(X),Z=0,ee=J.length;Z<ee;Z++){var te=J[Z];if(W=X[te].exec(G),!!W){z=te.replace(/_\d+/,""),this.os[z]=!0,this.os.osName=z,W[1]&&(this.os.version=W[1].replace(/_/g,"."));break}}(this.os.iphone||this.os.ipad||this.os.ipod)&&(this.os.ios=!0);var re={wechat:/MicroMessenger\/([\d\.]+)/i,ipadqq:/IPadQQ\/([\d\.]+)/i,mqq:/qq\/([\d\.]+)/i,qzone:/QZONEJSSDK\/([\d\.]+)/i,mqqbrowser:/mqqbrowser\/([\d\.]+)/i,qqbrowser:/[^m]QQBrowser\/([\d\.]+)/i,x5:/tbs\/(\d+)/i,uc:/UCBrowser\/([\d\.]+)/i,safari_1:/Version\/(([\d\.]+))\sSafari\/[\d\.]+/i,safari_2:/Safari\/([\d\.]+)/i,chrome_1:/CriOS\/([\d\.]+)/i,chrome_2:/Chrome\/([\d\.]+)/i,firefox:/Firefox\/([\d\.]+)/i,ie_1:/MSIE\s([\d\.]+)/i,ie_2:/(trident\/\d\.\d)/i,ie_3:/(Edge)\/\d+\.\d+/i,weibo:/weibo__([\d\.]+)/i,qqnews:/qqnews\/([\d\.]+)/i,qqlive_1:/QQLiveBrowser\/([\d\.]+)/i,qqlive_2:/QQLiveHDBrowser\/([\d\.]+)/i,kuaibao:/qnreading\/([\d\.]+)/i,liebao:/LieBaoFast\/([\d\.]+)/i,douban:/com\.douban\.frodo\/([\d\.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,qqdownloader:/qqdownloader\/([\d\.]+)/i};this.spider=/(googlebot|bingbot|yandex|baiduspider|360Spider|Sogou Spider|twitterbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|petalbot|applebot|bytespider|mpcrawler)/i.test(G);for(var ie,ne,oe=Object.keys(re),se=0,ee=oe.length;se<ee;se++){var ae=oe[se];if(ie=re[ae].exec(G),!!ie){if(ne=ae.replace(/_\d+/,""),this.browser[ne])return this;this.browser[ne]={version:ie[1]},this.browser.browserName=ne,this.browser.version=ie[1]}}return this.os.android&&this.browser.safari&&(this.browser.safari=null),this.browser.chrome&&this.browser.safari&&(this.browser.safari=null),((Y=(L=(U=this.browser)===null||U===void 0?void 0:U.ie)===null||L===void 0?void 0:L.version)===null||Y===void 0?void 0:Y.indexOf("trident"))>-1&&(this.browser.ie.version.indexOf("6.0")>-1?this.browser.ie.version="10":this.browser.ie.version.indexOf("5.0")>-1?this.browser.ie.version="9":this.browser.ie.version.indexOf("4.0")>-1?this.browser.ie.version="8":this.browser.ie.version="11"),this}var uaTool$1=uaMatch$1.call({},navigator.userAgent),jsonTool$1={safelyStringify:function(G){try{return JSON.stringify(G)}catch(U){return"{}"}}},__assign$i=globalThis&&globalThis.__assign||function(){return __assign$i=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$i.apply(this,arguments)},__spreadArray$4=globalThis&&globalThis.__spreadArray||function(G,U,L){if(L||arguments.length===2)for(var Y=0,X=U.length,W;Y<X;Y++)(W||!(Y in U))&&(W||(W=Array.prototype.slice.call(U,0,Y)),W[Y]=U[Y]);return G.concat(W||Array.prototype.slice.call(U))},LogCacheLimit$1=4e3,noop$1=function(){},dummyConsole$1={trace:noop$1,debug:noop$1,info:noop$1,log:noop$1,warn:noop$1,error:noop$1},PatchedConsole$1=Object.assign({},dummyConsole$1);function patchConsole$1(G){(G||Object.keys(dummyConsole$1)).forEach(function(U){var L;PatchedConsole$1[U]=((L=self.console)===null||L===void 0?void 0:L[U])||noop$1})}function enableConsoleOutput$1(G){patchConsole$1(G);try{PatchedConsole$1.log()}catch(U){PatchedConsole$1=dummyConsole$1}}function logtool$1(G){return function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L]}}var LogMode$1;(function(G){G[G.console=1]="console",G[G.cache=2]="cache"})(LogMode$1||(LogMode$1={}));var Logger$1=function(){function G(U,L,Y){if(this.playerId=U,this.scopeName=L,!this.playerId)throw new Error("Missing logger id");G.cache[U]||(G.cache[U]=[]),this.logModeConfig=__assign$i({trace:LogMode$1.console,debug:LogMode$1.console,info:LogMode$1.console,log:LogMode$1.cache|LogMode$1.console,warn:LogMode$1.cache|LogMode$1.console,error:LogMode$1.cache|LogMode$1.console},Y)}return G.prototype.trace=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["trace"],U,!1))},G.prototype.debug=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["debug"],U,!1))},G.prototype.info=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["info"],U,!1))},G.prototype.log=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["log"],U,!1))},G.prototype.warn=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["warn"],U,!1))},G.prototype.error=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$4(["error"],U,!1))},G.prototype.callApi=function(U){for(var L=[],Y=1;Y<arguments.length;Y++)L[Y-1]=arguments[Y];var X=this,W=X.playerId,z=X.scopeName,J="[".concat(W.slice(-8),"][").concat(getLogTime$1(),"]").concat(z?"[".concat(z,"]"):"");if(this.logModeConfig[U]&LogMode$1.cache){var Z="[".concat(U,"]").concat(J," ").concat(L.join(","));Z.length>=LogCacheLimit$1&&(PatchedConsole$1.warn("Logger cache limit exceeded: ".concat(Z.length)),Z="".concat(Z.slice(0,LogCacheLimit$1),"...")),G.cache[W].push(Z)}this.logModeConfig[U]&LogMode$1.console&&PatchedConsole$1[U].apply(PatchedConsole$1,__spreadArray$4([J],L,!1))},G.level=0,G.cache={},G}(),logMethodCallDecoratorCreator$1=function(G){G===void 0&&(G="");var U=function(L,Y,X){var W=X.value;X.value=function(){for(var z=[],J=0;J<arguments.length;J++)z[J]=arguments[J];var Z=this._logger||this.logger;return typeof(Z==null?void 0:Z.log)=="function"&&Z.log("@".concat(G,".").concat(Y,"()"),jsonTool$1.safelyStringify(z)),W.apply(this,z)}};return U};function dumpLog$1(G){var U=document.createElement("a"),L=G.join(`

`);U.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(L))),U.setAttribute("download","tp-log-".concat(Date.now(),".txt")),U.style.display="none",document.body.appendChild(U),U.click(),document.body.removeChild(U)}function getLogTime$1(){var G=new Date,U="".concat(G.getHours(),":").concat(G.getMinutes(),":").concat(G.getSeconds())+".".concat("0000".concat(G.getMilliseconds()).slice(-3));return U}var cookieTool$1={set:function(G,U,L,Y,X){var W={domain:L,path:Y};return X&&(W.expires=new Date().getTime()+X*3600*1e3),t.setCookie(G,U,W),!0},get:function(G){return t.getCookie(G)||""},del:t.clearCookie},lsTool$1={getData:function(G){var U="";try{window.localStorage&&(U=window.localStorage[G])}catch(L){window.console.log(L)}return U},setData:function(G,U){if(!(G==="undefined"||G===void 0))try{window.localStorage&&(window.localStorage[G]=U)}catch(L){window.console.log(L)}},delData:function(G){try{window.localStorage&&window.localStorage.removeItem(G)}catch(U){window.console.log(U)}}},urlTool$1={object2string:function(G,U){return U===void 0&&(U="&"),this.convertUrlParam(G,U,!1)},convertUrlParam:function(G,U,L){if(U===void 0&&(U="&"),L===void 0&&(L=!0),!G)return"";var Y=Object.keys(G);if(Y.length<=0)return"";var X=[];return Y.forEach(function(W){var z="";L?z="".concat(encodeURIComponent(W),"=").concat(encodeURIComponent(G[W])):z="".concat(W,"=").concat(G[W]),X.push(z)}),X.join(U)},getRootDomain:function(){var G=window.location.hostname||window.location.host,U=window.location.host.split(".");return U.length>1&&(G=U.slice(U.length-2).join(".")),G},getTopFrameUrl:function(){var G="";if(window.top!==window)try{G=window.top.location.href}catch(U){G=document.referrer}else G=window.location.href;return G},getDomainOfURL:function(G){if(typeof G=="undefined"||G===null||G==="")return"";try{return new URL(G).hostname}catch(U){return""}},getUrlParamByKey:function(G,U){return h$3(G||location.href).query[U]||""},getUrlParams:function(G){return h$3(G||location.href).query},updateUrlParam:function(G,U,L){var Y=G,X=this.getUrlParamByKey(Y,U),W="".concat(U,"=").concat(L);return X?Y=Y.replace("".concat(U,"=").concat(X),W):Y=Y+(Y.indexOf("?")!==-1?"&":"?")+W,Y},getFileName:function(G){if(!G)return null;var U=G,L=U.indexOf("?");L>0&&(U=U.slice(0,L));var Y=U.lastIndexOf("/");Y>0&&(U=U.slice(Y+1,U.length));var X=U.lastIndexOf("#");return X>0&&(U=U.slice(0,X)),U},getFileExtension:function(G){if(!G)return null;var U=urlTool$1.getFileName(G);if(U){var L=U.split(".");if(L&&L.length>1)return L[L.length-1]}return null}},__extends$k=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),SimpleDefer$1=function(){function G(){var U=this;this.promise=new Promise(function(L,Y){U.resolve=L,U.reject=Y})}return G}(),TimeoutDefer$1=function(G){__extends$k(U,G);function U(L){var Y=G.call(this)||this;return L.timeoutMS>0&&setTimeout(function(){return Y.reject()},L.timeoutMS),Y}return U}(SimpleDefer$1),__assign$h=globalThis&&globalThis.__assign||function(){return __assign$h=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$h.apply(this,arguments)},domTool$1={insertStyle:y$1,loadScript:function(G,U,L,Y){var X=new TimeoutDefer$1({timeoutMS:L});return x$1(__assign$h(__assign$h({},Y),{src:G}),U).then(X.resolve).catch(X.reject),X.promise},attr:S$1,removeAttr:function(G,U){!G||U&&(U==="src"?delete G.src:G.removeAttribute(U))},css:E$1,append:function(G,U){!G||G.appendChild(U)},prepend:function(G,U){G.children[0]?G.insertBefore(U,G.children[0]):G.appendChild(U)},addClass:q,removeClass:_$1,hasClass:M,hide:O$1,show:k,text:j$1,html:C$1,creatDom:function(G){var U=document.createElement("div");return U.innerHTML=G,U.firstChild},getDomSize:function(G){if(!G)return{width:0,height:0};var U=G.currentStyle?G.currentStyle:window.getComputedStyle(G,null),L=parseFloat(U.width),Y=parseFloat(U.height);return{width:L,height:Y}},createVideoDom:function(G){var U,L;G===void 0&&(G={});var Y={playsinline:{playsinline:"isiPhoneShowPlaysinline","webkit-playsinline":"isiPhoneShowPlaysinline"},airplay:{airplay:"allow","x-webkit-airplay":"allow"},crossorigin:{crossOrigin:"anonymous"},"h5-page":{"x5-video-player-type":"h5-page"}},X=__assign$h({playsinline:!0,"h5-page":!0},G),W=Object.keys(X).reduce(function(J,Z){return Y[Z]&&typeof X[Z]=="boolean"?J=__assign$h(__assign$h({},J),X[Z]?Y[Z]:{}):J[Z]=X[Z],J},{}),z=document.createElement("video");return Object.keys(W).forEach(function(J){z.setAttribute(J,W[J])}),E$1(z,{position:"absolute",width:(U=G==null?void 0:G.width)!==null&&U!==void 0?U:"100%",height:(L=G==null?void 0:G.height)!==null&&L!==void 0?L:"100%",top:0,left:0}),z},getElementFromConfig:function(G){return typeof G=="string"?document.querySelector(G):G}},r$2=function(){return(r$2=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++)for(var X in U=arguments[L])Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X]);return G}).apply(this,arguments)};function n$1(G,U,L,Y){return new(L||(L=Promise))(function(X,W){function z(ee){try{Z(Y.next(ee))}catch(te){W(te)}}function J(ee){try{Z(Y.throw(ee))}catch(te){W(te)}}function Z(ee){var te;ee.done?X(ee.value):(te=ee.value,te instanceof L?te:new L(function(re){re(te)})).then(z,J)}Z((Y=Y.apply(G,U||[])).next())})}function o$1(G,U){var L,Y,X,W,z={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return W={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function J(Z){return function(ee){return function(te){if(L)throw new TypeError("Generator is already executing.");for(;z;)try{if(L=1,Y&&(X=2&te[0]?Y.return:te[0]?Y.throw||((X=Y.return)&&X.call(Y),0):Y.next)&&!(X=X.call(Y,te[1])).done)return X;switch(Y=0,X&&(te=[2&te[0],X.value]),te[0]){case 0:case 1:X=te;break;case 4:return z.label++,{value:te[1],done:!1};case 5:z.label++,Y=te[1],te=[0];continue;case 7:te=z.ops.pop(),z.trys.pop();continue;default:if(X=z.trys,!((X=X.length>0&&X[X.length-1])||te[0]!==6&&te[0]!==2)){z=0;continue}if(te[0]===3&&(!X||te[1]>X[0]&&te[1]<X[3])){z.label=te[1];break}if(te[0]===6&&z.label<X[1]){z.label=X[1],X=te;break}if(X&&z.label<X[2]){z.label=X[2],z.ops.push(te);break}X[2]&&z.ops.pop(),z.trys.pop();continue}te=U.call(G,z)}catch(re){te=[6,re],Y=0}finally{L=X=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([Z,ee])}}}var i$1=function(){function G(){this.interceptors=[]}return G.prototype.use=function(U,L){return this.interceptors.push({resolved:U,rejected:L}),this.interceptors.length-1},G.prototype.traverse=function(U,L){L===void 0&&(L=!1);var Y=Promise.resolve(U);return(L?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(X,W){if(W){var z=W.resolved,J=W.rejected;Y=Y.then(z,J)}return X},""),Y},G.prototype.eject=function(U){this.interceptors[U]&&(this.interceptors[U]=null)},G}(),c$2={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new i$1,response:new i$1}},a$2=/^([a-z][a-z\d+\-.]*:)?\/\//i,u$2=Object.prototype.toString;function s$2(G){return n$1(this,void 0,void 0,function(){var U;return o$1(this,function(L){switch(L.label){case 0:if(window.fetch)return[2];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,x$1({src:G})];case 2:return L.sent(),[3,4];case 3:throw U=L.sent(),function(Y){if(typeof Image!="undefined"){var X=new Image(1,1),W=r$2({attaid:"0f400053130",token:"6552374442",comps:"@tencent/ovb-request",version:"1.1.18",ua:navigator.userAgent,url:location.href,_dc:Math.random()},Y),z=Object.keys(W).map(function(J){return J+"="+encodeURIComponent(W[J])}).join("&");X.src="https://h.trace.qq.com/kv?"+z}}({func:"loadPolyfill",result:0,params:G,error_msg:U.message}),new Error("\u52A0\u8F7D polyfill "+G+" \u5931\u8D25: "+U.message);case 4:return[2]}})})}function l$2(G){return["Accept","Content-Type"].forEach(function(U){return L=U,void((Y=G.headers)&&Object.keys(Y).forEach(function(X){X!==L&&X.toUpperCase()===L.toUpperCase()&&(Y[L]=Y[X],delete Y[X])}));var L,Y}),function(U){if(u$2.call(U)!=="[object Object]")return!1;var L=Object.getPrototypeOf(U);return L===null||L===Object.prototype}(G.body)&&(G.body=JSON.stringify(G.body),G.headers&&(G.headers["Content-Type"]="application/json;charset=utf-8")),G}var f$2=function(){},d$2=1;function h$2(G,U){return U===void 0&&(U={}),new Promise(function(L,Y){var X,W=U.name,z=U.query,J=z===void 0?{}:z,Z=U.param,ee=Z===void 0?"callback":Z,te=U.timeout,re=te===void 0?6e4:te,ie=U.prefix,ne=ie===void 0?"jsonp_":ie,oe=U.controller,se=W||""+ne+d$2++,ae=document.createElement("script"),le=re?setTimeout(function(){ue(!0),Y(new Error("jsonp timeout"))},re):null,ue=function(he){var fe;he===void 0&&(he=!1),(fe=ae.parentNode)===null||fe===void 0||fe.removeChild(ae),le&&clearTimeout(le),oe&&(oe.element=null),window[se]=he?f$2:null},ce=m$2({url:G,query:r$2(r$2({},J),(X={},X[ee]=se,X))});ae.src=ce,oe&&(oe.element=ae),ae.onerror=function(he){ue(),Y(he)},window[se]=function(he){ue(),L(he)},document.body.append(ae)})}function m$1(G){return n$1(this,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se,ae,le;return o$1(this,function(ue){switch(ue.label){case 0:return U=c$2.baseURL,L=c$2.defaults,Y=c$2.interceptors,[4,s$2(c$2.polyfillUrl)];case 1:return ue.sent(),(X=r$2(r$2({},L),G)).headers||(X.headers=function(ce){ce===void 0&&(ce="GET");var he=c$2.headers[ce]||{};return r$2(r$2({},c$2.headers.common),he)}(X.method)),l$2(X),[4,Y.request.traverse(X,!0)];case 2:if((W=ue.sent())instanceof Error)throw W;return W.url=function(ce,he){return!ce||a$2.test(he)?he:ce.replace(/\/+$/,"")+"/"+he.replace(/^\/+/,"")}(U,W.url),z=W.url,J=W.timeout,Z=W.params,ee=W.method,te=["GET","DELETE","OPTIONS","HEAD"].includes(ee===void 0?"GET":ee)&&!!Z,re=te?m$2({url:z,query:Z}):z,ie=[],J&&!W.signal&&(se=new Promise(function(ce){ne=setTimeout(function(){ce(new Error("timeout"))},J)}),ie.push(se),oe=new AbortController,W.signal=oe.signal),ie.push(fetch(re,W).catch(function(ce){return ce})),[4,Promise.race(ie)];case 3:return ae=ue.sent(),ne&&clearTimeout(ne),[4,Y.response.traverse(ae)];case 4:if((le=ue.sent())instanceof Error)throw oe==null||oe.abort(),le;return[2,le]}})})}var netTool$1={jsonp:h$2,img:function(G){return new window.Promise(function(U,L){var Y=new Image;Y.src=G,U()})},fetch:function(G,U){return U===void 0&&(U={}),m$1({url:G,method:U.method,body:U.body}).then(function(L){return L.json()})},xhr:function(G){var U=G.retryCount||0,L=+new Date,Y=0,X=function(W,z){var J=function(ee){ee===void 0&&(ee="xhrNetworkError"),Y<U?(Y++,X(W,z)):z({error:ee,target:Z})},Z=new XMLHttpRequest;G.timeout&&(Z.timeout=G.timeout),G.responseType&&(Z.responseType=G.responseType),Z.withCredentials=!!G.withCredentials,Z.ontimeout=G.ontimeout,Z.open(G.method||"get",G.url),G.range&&Z.setRequestHeader("Range","bytes=".concat(G.range[0],"-").concat(G.range[1])),G.headers&&Object.keys(G.headers).forEach(function(ee){Z.setRequestHeader(ee,G.headers[ee])}),Z.onload=function(){if(Z.status===200||Z.status===206){W({data:Z.response,target:Z,startTimestamp:L});return}J("xhrStatusCodeError")},Z.onerror=function(ee){J()},Z.onabort=function(){},Z.ontimeout=function(){J()},G.body?Z.send(G.body):Z.send()};return new Promise(function(W,z){X(W,z)})}},__awaiter$a=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$a=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},testVideoElement$1=document.createElement("video"),videoTool$1={getBuffered:function(G){for(var U=[],L=G.buffered.length,Y=0;Y<L;Y++)U.push({start:G.buffered.start(Y),end:G.buffered.end(Y)});return U},checkTimeInBuffer:function(G,U){for(var L=!1,Y=U.length,X=0;X<Y;X++){var W=U[X].start,z=U[X].end;if(G>=W&&G<=z){L=!0;break}}return L},clear:function(G){G!=null&&G.src&&(G instanceof HTMLVideoElement?G.removeAttribute("src"):G.src=null,G.load())},destroyElement:function(G){G.destroy?G.destroy():G instanceof HTMLVideoElement&&(videoTool$1.clear(G),G.remove())},captureVideo:function(G,U){var L=U.dx,Y=U.dy,X=U.dw,W=U.dh,z=G.videoWidth,J=G.videoHeight,Z=document.createElement("canvas");Z.width=z,Z.height=J;var ee=Z.getContext("2d");return ee.drawImage(G,0,0,z,J),{captureHeight:W,captureWidth:X,captureX:L,captureY:Y,playtime:G.currentTime,data:ee.getImageData(L,Y,X,W)}},resizeElement:function(G,U){if(!(!U||!G)){var L=U.width,Y=U.height;G.resize&&typeof L=="number"&&typeof Y=="number"?G.resize(L,Y):G instanceof HTMLVideoElement&&domTool$1.css(G,U)}},appendElement:function(G,U){G.appendToParent?G.appendToParent(U):G instanceof HTMLVideoElement&&domTool$1.append(U,G)},removeElement:function(G,U){G.removeFromParent?G.removeFromParent(U):G instanceof HTMLVideoElement&&G.remove()},setElementFitType:function(G,U){G&&G instanceof HTMLVideoElement&&domTool$1.css(G,{"object-fit":U})},getDefaultMaxBufferTime:function(){var G=navigator.connection;return G&&G.type==="wifi"?180:G&&G.type==="4g"?120:180},isAutoPlayBlockedMessage:function(G){return G&&/interact|not allowed|user gesture/.test(G)},notSupportLoadBeforeHasUserGestures:function(){return!!(uaTool$1.browser.x5||uaTool$1.os.ios&&uaTool$1.browser.wechat)},supportSameTimePlay:function(){return!(uaTool$1.browser.x5&&["45031","45032"].indexOf("".concat(uaTool$1.browser.x5.version))!==-1||uaTool$1.browser.mqqbrowser&&!(uaTool$1.browser.qqlive||uaTool$1.browser.wechat||uaTool$1.browser.mqq)||uaTool$1.os.ios&&uaTool$1.os.version&&comTool$1.compareVersion(uaTool$1.os.version,"11.0")<0)},cannotDetectAutoPlayBlock:function(){return uaTool$1.browser.chrome&&comTool$1.compareVersion(uaTool$1.browser.chrome.version,"66.0")<0},supportMediaFragmentsURISpec:function(G){return typeof G!="undefined"?!!G:window.navigator.userAgent.indexOf("jsdom")!==-1?!1:!uaTool$1.mobile||!!uaTool$1.os.ios},getVideoPlaybackQuality:function(G){var U=0,L=0;if(G!=null&&G.getVideoPlaybackQuality){var Y=G.getVideoPlaybackQuality();L=Y.droppedVideoFrames||0,U=Y.totalVideoFrames||0}else G&&G.webkitDecodedFrameCount&&(U=G.webkitDecodedFrameCount,L=G.webkitDroppedFrameCount);return{totalVideoFrames:U,droppedVideoFrames:L}},supportMSE:function(){var G=videoTool$1.getMediaSource();if(!G)return!1;var U=window.SourceBuffer||window.WebKitSourceBuffer,L=G&&typeof G.isTypeSupported=="function"&&G.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),Y=!U||U.prototype&&typeof U.prototype.appendBuffer=="function"&&typeof U.prototype.remove=="function";return!!L&&!!Y},supportVideoFormat:function(){var G={mp4:"video/mp4",mov:"video/mp4",hls:"application/x-mpegURL",avi:"video/x-msvideo",mpeg:"video/mpeg",webm:"video/webm",ogg:"video/ogg"},U=[];return Object.keys(G).forEach(function(L){var Y=G[L],X=testVideoElement$1.canPlayType(Y);["maybe","probably"].indexOf(X)!==-1&&U.push(L)}),U},supportAV1:function(){var G=videoTool$1.getMediaSource();return G==null?void 0:G.isTypeSupported("video/mp4;codecs=av01.0.12M.08")},isVideoCanPlayType:function(G){return testVideoElement$1.canPlayType(G)},isMediaSourceTypeSupported:function(G){try{return videoTool$1.getMediaSource().isTypeSupported(G)}catch(U){return!1}},isMediaCapabilitiesTypeSupported:function(G){return __awaiter$a(this,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie;return __generator$a(this,function(ne){switch(ne.label){case 0:U=G.type,L=G.mimeType,Y=G.resolution,X=Y===void 0?"860x480":Y,W=G.bitrate,z=W===void 0?800:W,J=G.framerate,Z=J===void 0?30:J,ne.label=1;case 1:switch(ne.trys.push([1,3,,4]),ee={type:"media-source"},U){case"audio":ee.audio={contentType:L};break;case"audio-spatial":ee.audio={contentType:L,spatialRendering:!0};break;case"video":te=X.toLowerCase().split("x"),re=te[0],ie=te[1],ee.video={contentType:L,bitrate:z,framerate:Z,height:+re,width:+ie}}return[4,navigator.mediaCapabilities.decodingInfo(ee)];case 2:return[2,ne.sent().supported];case 3:return ne.sent(),[2,!1];case 4:return[2]}})})},isHDRSupported:function(){try{return window.matchMedia("(dynamic-range: high)").matches?2:window.matchMedia("(color-gamut: p3)").matches?1:0}catch(G){return 0}},isDolbyVisionSupported:function(){return videoTool$1.isMediaSourceTypeSupported('video/mp4; codecs="dvhe"')},isDolbyAtomsSupported:function(G){return videoTool$1.isMediaSourceTypeSupported('audio/mp4; codecs="ec-3"')},getMediaSource:function(){if(typeof window!="undefined")return window.MediaSource||window.WebKitMediaSource},supportWidevine:function(){return __awaiter$a(this,void 0,void 0,function(){var G,U,L;return __generator$a(this,function(Y){switch(Y.label){case 0:if(G=[window.MediaKeys,window.WebKitMediaKeys].some(function(X){return X}),!G)return[2,!1];if(U=typeof window.navigator.requestMediaKeySystemAccess!="undefined",!U)return[2,!1];L=[{initDataTypes:["cenc"],audioCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,window.navigator.requestMediaKeySystemAccess("com.widevine.alpha",L)];case 2:return Y.sent(),[2,!0];case 3:return Y.sent(),[2,!1];case 4:return[2]}})})},supportFairplay:function(){var G,U=KeySystems$1.FairPlayWebKit,L=(G=window.WebKitMediaKeys)===null||G===void 0?void 0:G.isTypeSupported(U,"video/mp4");return L}},stringTool$1={arrayToString:function(G){return String.fromCharCode.apply(null,new Uint16Array(G.buffer))},base64ToUint8Array:function(G){for(var U="=".repeat((4-G.length%4)%4),L=(G+U).replace(/-/g,"+").replace(/_/g,"/"),Y=window.atob(L),X=new Uint8Array(Y.length),W=0;W<Y.length;++W)X[W]=Y.charCodeAt(W);return X},arrayBufferToBase64:function(G){for(var U="",L=new Uint8Array(G),Y=L.byteLength,X=0;X<Y;X++)U+=String.fromCharCode(L[X]);return window.btoa(U)},stringToArray:function(G){for(var U=G.length,L=new ArrayBuffer(U*2),Y=new Uint16Array(L),X=0;X<U;X++)Y[X]=G.charCodeAt(X);return Y}},DRM_ERR_CODE$1;(function(G){G.UNKNOWN="70090000",G.KEY_SYS_ACCESS_FAILED="70090001",G.KEY_SESSION_CREATION_FAILED="70090002",G.KEY_SYS_NOT_SUPPORTED="70090003",G.KEY_SYS_NOT_REQUESTED="70090004",G.KEY_SESSION_NOT_EXIST="70090005",G.KEY_NOT_EXIST="70090006",G.INIT_DATA_EMPTY="70090007",G.FPS_SET_KEY_FAILED="70090008",G.FPS_CERTIFICATE_NOT_EXIST="7009009",G.HDCP_ERROR="70090010",G.LICENSE_REQUEST_FAILED="70090011",G.LICENSE_NOT_EXIST="70090012",G.KEY_SESSION_REQUEST_FAILED="70090013",G.KEY_SESSION_UPDATE_FAILED="70090014",G.KEY_EXPIRED="70090015",G.KEY_RELEASED="70090016",G.KEY_INTERNAL_ERROR="70090017"})(DRM_ERR_CODE$1||(DRM_ERR_CODE$1={}));function transformInitData$1(G,U,L){var Y=stringTool$1.stringToArray(U),X=G.byteLength+4+Y.byteLength+4+L.byteLength,W=0,z=new ArrayBuffer(X),J=new DataView(z),Z=new Uint8Array(z,W,G.byteLength);Z.set(G),W+=Z.byteLength,J.setUint32(W,Y.byteLength,!0),W+=4;var ee=new Uint16Array(z,W,Y.length);ee.set(Y),W+=ee.byteLength,J.setUint32(W,L.byteLength,!0),W+=4;var te=new Uint8Array(z,W,L.byteLength);return te.set(L),new Uint8Array(z,0,z.byteLength)}function getContentId$1(G){var U,L,Y,X=stringTool$1.arrayToString(G),W=(Y=(L=(U=X.split("skd://"))===null||U===void 0?void 0:U[1])===null||L===void 0?void 0:L.split("?"))===null||Y===void 0?void 0:Y[0];return W}var __extends$j=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$g=globalThis&&globalThis.__assign||function(){return __assign$g=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$g.apply(this,arguments)},__awaiter$9=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$9=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},KeySystems$1;(function(G){G.FairPlayWebKit="com.apple.fps.1_0",G.Widevine="com.widevine.alpha",G.FairPlay="com.apple.fps"})(KeySystems$1||(KeySystems$1={}));function getSupportedKeySystemConfig$1(G){switch(G){case KeySystems$1.FairPlayWebKit:return null;case KeySystems$1.Widevine:return{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"',robustness:"SW_SECURE_CRYPTO"}]};case KeySystems$1.FairPlay:return{initDataTypes:["skd"],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}]};default:return null}}var ERR$1="error",DRM$1=function(G){__extends$j(U,G);function U(L,Y,X){var W=G.call(this)||this;return W.started=!1,W.mediaKeyDescriptor=null,W.mediaKeyPromise=null,W.onVideoEncrypted=function(z){if(!W.mediaKeyPromise){W.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SYS_NOT_REQUESTED,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u8BF7\u6C42CDM"});return}W.mediaKeyPromise.then(function(J){if(!W.mediaKeyDescriptor){W.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u83B7\u53D6\u5230MediaKey"});return}if(W.mediaKeyDescriptor.hasInitialized){W.logger.warn("Media key-session has been initialized but requested again");return}if(!W.mediaKeyDescriptor.mediaKeys){W.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u83B7\u53D6\u5230MediaKey"});return}if(W.media.setMediaKeys(W.mediaKeyDescriptor.mediaKeys),!W.mediaKeyDescriptor.mediaKeySession){W.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46CDM Session\u672A\u521B\u5EFA"});return}if(!z.initData){W.emit(ERR$1,{code:DRM_ERR_CODE$1.INIT_DATA_EMPTY,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u4E8B\u4EF6\u4FE1\u606F\u4E2D\u6CA1\u6709\u7528\u4E8E\u521B\u5EFA\u8BF7\u6C42\u7684initData"});return}W.mediaKeyDescriptor.mediaKeySession.generateRequest(z.initDataType,z.initData).catch(function(Z){W.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_REQUEST_FAILED,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46CDM Session\u8BF7\u6C42\u5931\u8D25"})}),W.mediaKeyDescriptor.initData=z.initData,W.mediaKeyDescriptor.hasInitialized=!0})},W.onVideoWebkitneedkey=function(z){var J=W.config.fpsCustomContentId(z.initData),Z=U.serverCertificate[KeySystems$1.FairPlayWebKit];if(!Z){W.emit(ERR$1,{code:DRM_ERR_CODE$1.FPS_CERTIFICATE_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46 Fairplay \u670D\u52A1\u7AEF\u8BC1\u4E66\u672A\u914D\u7F6E"});return}var ee=W.config.fpsCustomTransformInitData(z.initData,J,Z);if(W.mediaKeyDescriptor.initData=ee,W.mediaKeyDescriptor.mediaKeySession){W.logger.warn("Media key-session has already been initialized");return}W.mediaKeyDescriptor.mediaKeySession=W.createSessionWithMediaKey(W.mediaKeyDescriptor.mediaKeys,ee),W.mediaKeyDescriptor.assetID=J,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeyadded=W.onFPSKeySessionKeyAdded,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeyerror=W.onFPSKeySessionKeyError,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeymessage=function(te){W.onMediaKeySessionMessage(W.mediaKeyDescriptor.mediaKeySession,te)}},W.onFPSKeySessionKeyAdded=function(z){},W.onFPSKeySessionKeyError=function(z){var J=W.mediaKeyDescriptor.mediaKeySession.error;if(J.systemCode){var Z={1212433232:[DRM_ERR_CODE$1.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"]};Z[J.systemCode]&&W.emit(ERR$1,{code:Z[J.systemCode][0],message:Z[J.systemCode][1]});return}W.emit(ERR$1,{code:DRM_ERR_CODE$1.UNKNOWN,message:"\u672A\u77E5\u9519\u8BEF"})},W.media=L,W.logger=X,W.config=__assign$g({keySystem:null,fpsCustomContentId:getContentId$1,fpsCustomTransformInitData:transformInitData$1},Y),W}return Object.defineProperty(U.prototype,"isFairPlay",{get:function(){var L=this.config.keySystem;return L===KeySystems$1.FairPlay||L===KeySystems$1.FairPlayWebKit},enumerable:!1,configurable:!0}),U.isKeySystemSupported=function(L){var Y,X,W,z=(Y={},Y[KeySystems$1.FairPlayWebKit]=[(X=self.WebKitMediaKeys)===null||X===void 0?void 0:X.isTypeSupported(L,"video/mp4")],Y[KeySystems$1.FairPlay]=[uaTool$1.browser.safari,self.MediaKeys,self.navigator.requestMediaKeySystemAccess],Y[KeySystems$1.Widevine]=[self.MediaKeys,self.navigator.requestMediaKeySystemAccess],Y);return(W=z[L])===null||W===void 0?void 0:W.every(Boolean)},U.prototype.destroy=function(){this.removeAllListeners(),this.logger=null},U.prototype.configure=function(L){var Y=this;this.config=__assign$g(__assign$g({},this.config),L),this.config.certificate&&Object.keys(this.config.certificate).forEach(function(X){U.serverCertificate[X]=Y.config.certificate[X]})},U.prototype.hasStarted=function(){return this.started},U.prototype.init=function(L){return __awaiter$9(this,void 0,void 0,function(){return __generator$9(this,function(Y){switch(Y.label){case 0:return[4,this.reset()];case 1:return Y.sent(),L&&this.configure(L),typeof U.serverCertificate[this.config.keySystem]!="string"?[3,3]:[4,this.requestServerCertificate(this.config.keySystem,U.serverCertificate[this.config.keySystem])];case 2:Y.sent(),Y.label=3;case 3:return this.bind(),[2]}})})},U.prototype.reset=function(){return __awaiter$9(this,void 0,void 0,function(){var L,Y,X;return __generator$9(this,function(W){switch(W.label){case 0:if(this.started=!1,!this.config.keySystem||!this.mediaKeyDescriptor)return[2];if(L=(X={},X[KeySystems$1.FairPlayWebKit]=this.cleanupFPSSession,X[KeySystems$1.FairPlay]=this.cleanupMediaKeySession,X[KeySystems$1.Widevine]=this.cleanupMediaKeySession,X),this.videoEncryptedEventPicker(!1),!L[this.config.keySystem])return[3,4];Y=this.mediaKeyDescriptor.mediaKeySession,this.mediaKeyPromise=null,this.mediaKeyDescriptor=null,W.label=1;case 1:return W.trys.push([1,3,,4]),[4,L[this.config.keySystem].call(this,Y)];case 2:return W.sent(),[3,4];case 3:return W.sent(),[3,4];case 4:return[2]}})})},U.prototype.bind=function(){var L=this.config.keySystem;if(!!L){if(!U.isKeySystemSupported(L)){this.logger.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 ".concat(L));return}this.started=!0,this.mediaKeyPromise=this.createKeySystemAccess(L),this.videoEncryptedEventPicker(!0)}},U.prototype.cleanupMediaKeySession=function(L){return!this.media||!L?Promise.resolve():(L.onmessage=null,L.onkeystatuseschange=null,L.close().catch(function(){}),this.media.setMediaKeys(null))},U.prototype.videoEncryptedEventPicker=function(L){var Y;L===void 0&&(L=!0);var X=(Y={},Y[KeySystems$1.FairPlayWebKit]=["webkitneedkey",this.onVideoWebkitneedkey],Y[KeySystems$1.Widevine]=["encrypted",this.onVideoEncrypted],Y[KeySystems$1.FairPlay]=["encrypted",this.onVideoEncrypted],Y),W=X[this.config.keySystem],z=W[0],J=W[1];L?this.media.addEventListener(z,J):this.media.removeEventListener(z,J)},U.prototype.createSessionWithMediaKey=function(L,Y){var X,W=(X={},X[KeySystems$1.FairPlayWebKit]=this.createFPSWebkitSession,X[KeySystems$1.Widevine]=this.createMediaKeySession,X[KeySystems$1.FairPlay]=this.createMediaKeySession,X);return W[this.config.keySystem].call(this,L,Y)},U.prototype.createKeySystemAccess=function(L){var Y,X=(Y={},Y[KeySystems$1.Widevine]=this.requestKeySystemAccess,Y[KeySystems$1.FairPlay]=this.requestKeySystemAccess,Y[KeySystems$1.FairPlayWebKit]=this.requestFPSMediaKeys,Y);return X[this.config.keySystem].call(this,L)},U.prototype.requestLicense=function(L,Y){var X;if(!this.config.licenseUrl){this.emit(ERR$1,{code:DRM_ERR_CODE$1.LICENSE_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u672A\u914D\u7F6E\u89E3\u5BC6\u8BC1\u4E66\u5730\u5740"});return}var W=(X={},X[KeySystems$1.FairPlayWebKit]=this.createFPSLicenseRequest,X[KeySystems$1.Widevine]=this.createWidevineLicenseRequest,X[KeySystems$1.FairPlay]=this.createFPSLicenseRequest,X);return W[this.config.keySystem].call(this,L,Y)},U.prototype.requestServerCertificate=function(L,Y){return __awaiter$9(this,void 0,void 0,function(){var X;return __generator$9(this,function(W){switch(W.label){case 0:return[4,netTool$1.xhr({method:"GET",responseType:"arraybuffer",url:Y})];case 1:return X=W.sent().data,U.serverCertificate[L]=new Uint8Array(X),[2]}})})},U.prototype.requestKeySystemAccess=function(L){return __awaiter$9(this,void 0,void 0,function(){var Y,X;return __generator$9(this,function(W){switch(W.label){case 0:if(Y=getSupportedKeySystemConfig$1(L),!Y)return this.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SYS_NOT_SUPPORTED,message:"".concat(L," \u4E0D\u652F\u6301")}),[2];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,self.navigator.requestMediaKeySystemAccess(L,[Y])];case 2:return X=W.sent(),[2,this.onMediaKeySystemObtained(L,X)];case 3:return W.sent(),this.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SYS_ACCESS_FAILED,message:"\u8BBF\u95EECDM\u5931\u8D25, keySystem ".concat(L)}),[2];case 4:return[2]}})})},U.prototype.onMediaKeySystemObtained=function(L,Y){return __awaiter$9(this,void 0,void 0,function(){var X;return __generator$9(this,function(W){switch(W.label){case 0:return[4,Y.createMediaKeys()];case 1:X=W.sent(),this.mediaKeyDescriptor={hasInitialized:!1,mediaKeySession:null,mediaKeySystemAccess:Y,mediaKeys:X},W.label=2;case 2:return W.trys.push([2,5,,6]),L!==KeySystems$1.FairPlay?[3,4]:[4,X.setServerCertificate(U.serverCertificate[KeySystems$1.FairPlay])];case 3:W.sent(),W.label=4;case 4:return this.createSessionWithMediaKey(X),[2,X];case 5:return W.sent(),this.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_CREATION_FAILED,message:"CDM Session\u521D\u59CB\u5316\u5931\u8D25"}),[2];case 6:return[2]}})})},U.prototype.createMediaKeySession=function(L){var Y=this;if(this.mediaKeyDescriptor.mediaKeySession){this.logger.warn("Media key-session has already been initialized");return}var X={"output-restricted":[DRM_ERR_CODE$1.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"],"output-downscaled":[DRM_ERR_CODE$1.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"],"status-pending":null,"internal-error":[DRM_ERR_CODE$1.KEY_INTERNAL_ERROR,"\u5185\u90E8\u9519\u8BEF"],usable:null,expired:[DRM_ERR_CODE$1.KEY_EXPIRED,"MediaKey\u5DF2\u8FC7\u671F"],released:[DRM_ERR_CODE$1.KEY_RELEASED,"MediaKey\u5DF2\u4ECECDM\u4E2D\u6CE8\u9500"]};this.mediaKeyDescriptor.mediaKeySession=L.createSession(),this.mediaKeyDescriptor.mediaKeySession.onkeystatuseschange=function(W){var z,J,Z;(Z=(J=(z=W.target)===null||z===void 0?void 0:z.keyStatuses)===null||J===void 0?void 0:J.forEach)===null||Z===void 0||Z.call(J,function(ee,te){if(!!Y.mediaKeyDescriptor&&X[ee]){var re=X[ee],ie=re[0],ne=re[1];Y.emit(ERR$1,{code:ie,message:ne})}})},this.mediaKeyDescriptor.mediaKeySession.onmessage=function(W){Y.onMediaKeySessionMessage(Y.mediaKeyDescriptor.mediaKeySession,W)}},U.prototype.onMediaKeySessionMessage=function(L,Y){var X=this;this.requestLicense(Y,function(W){var z=W.data;if(X.config.licenseResponseSetup&&(z=X.config.licenseResponseSetup(z)||z),!z){X.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_UPDATE_FAILED,message:"CDM Session\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8BC1\u4E66\u89E3\u6790"});return}var J=L.update(z);J==null||J.catch(function(Z){X.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_UPDATE_FAILED,message:"CDM Session\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8BC1\u4E66\u89E3\u6790"})})})},U.prototype.createWidevineLicenseRequest=function(L,Y){var X=this,W=L.message,z={method:"POST",responseType:"arraybuffer",body:W,url:this.config.licenseUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"}};this.config.licenseRequestSetup&&(z=this.config.licenseRequestSetup(z)),netTool$1.xhr(z).then(function(J){Y(J)}).catch(function(J){X.emit(ERR$1,{code:DRM_ERR_CODE$1.LICENSE_REQUEST_FAILED,message:"\u8BC1\u4E66\u8BF7\u6C42\u5931\u8D25 ".concat(J==null?void 0:J.message)})})},U.prototype.createFPSLicenseRequest=function(L,Y){var X=this,W=L.message,z=encodeURIComponent(stringTool$1.arrayBufferToBase64(W)),J={method:"POST",responseType:"arraybuffer",body:"spc=".concat(z,"&assetId=").concat(this.mediaKeyDescriptor.assetID),url:this.config.licenseUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"}};this.config.licenseRequestSetup&&(J=this.config.licenseRequestSetup(J)),netTool$1.xhr(J).then(function(Z){Y(Z)}).catch(function(Z){X.logger.warn("license request error",Z),X.emit(ERR$1,{code:DRM_ERR_CODE$1.LICENSE_REQUEST_FAILED,message:"\u8BC1\u4E66\u8BF7\u6C42\u5931\u8D25"})})},U.prototype.requestFPSMediaKeys=function(){var L=new window.WebKitMediaKeys(KeySystems$1.FairPlayWebKit);return this.media.webkitSetMediaKeys(L),this.mediaKeyDescriptor={mediaKeySession:null,initData:null,hasInitialized:!1,mediaKeySystemAccess:null,mediaKeys:this.media.webkitKeys},Promise.resolve(L)},U.prototype.createFPSWebkitSession=function(L,Y){if(!L){this.emit(ERR$1,{code:DRM_ERR_CODE$1.FPS_SET_KEY_FAILED,message:"Webkit MediaKey\u521B\u5EFA\u5931\u8D25"});return}var X=L.createSession("video/mp4",Y);if(!X){this.emit(ERR$1,{code:DRM_ERR_CODE$1.KEY_SESSION_CREATION_FAILED,message:"Webkit CDM Session\u521B\u5EFA\u5931\u8D25"});return}return X},U.prototype.cleanupFPSSession=function(L){return L&&(this.media.webkitSetMediaKeys(null),L.onwebkitkeyadded=null,L.onwebkitkeyerror=null,L.onwebkitkeymessage=null),Promise.resolve()},U.serverCertificate={},U}(s$3),AutoPlayPolicy$1=function(){function G(U,L){this._logger=new Logger$1(L.instanceId,"AutoPlayPolicy"),this._videoElement=U}return G.prototype.userTrigger=function(){var U=this;this._triggerDefer=new SimpleDefer$1,this._logger.log("userTrigger(), start");var L,Y=function(z){L>0&&(clearTimeout(L),L=0),U._logger.log("userTrigger(), catch: ",z.name,z.message),videoTool$1.isAutoPlayBlockedMessage(z.message)?U._triggerDefer.reject(z):(U._logger.log("userTrigger() over, catched."),U._triggerDefer.resolve())},X=this._videoElement.play();if(this._videoElement.pause(),this._videoElement.readyState===0)X&&X.catch(Y),L=window.setTimeout(function(){U._logger.log("userTrigger() over, timeout."),U._triggerDefer.resolve()},300);else{this._logger.log("userTrigger() over, sync.");var W=uaTool$1.browser.safari&&!uaTool$1.mobile?400:0;window.setTimeout(function(){U._triggerDefer.resolve()},W)}return this._triggerDefer.promise},G.prototype.destroy=function(){this._videoElement=null},G}(),__decorate$e=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$e=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},_a$b,VALID_PREVIOUS_STATE_MAP$1=(_a$b={},_a$b[VIDEO_STATE$1.LOAD_START]=[VIDEO_STATE$1.IDLE],_a$b[VIDEO_STATE$1.CANPLAY]=[VIDEO_STATE$1.LOAD_START],_a$b[VIDEO_STATE$1.PLAYING]=[VIDEO_STATE$1.CANPLAY,VIDEO_STATE$1.SEEKED,VIDEO_STATE$1.PAUSE,VIDEO_STATE$1.BUFFERING],_a$b[VIDEO_STATE$1.BUFFERING]=[VIDEO_STATE$1.PLAYING],_a$b[VIDEO_STATE$1.PAUSE]=[VIDEO_STATE$1.PLAYING,VIDEO_STATE$1.BUFFERING],_a$b[VIDEO_STATE$1.SEEKING]=[VIDEO_STATE$1.CANPLAY,VIDEO_STATE$1.PLAYING,VIDEO_STATE$1.PAUSE,VIDEO_STATE$1.BUFFERING],_a$b[VIDEO_STATE$1.SEEKED]=[VIDEO_STATE$1.SEEKING],_a$b[VIDEO_STATE$1.END]=[VIDEO_STATE$1.LOAD_START,VIDEO_STATE$1.CANPLAY,VIDEO_STATE$1.SEEKING,VIDEO_STATE$1.SEEKED,VIDEO_STATE$1.BUFFERING,VIDEO_STATE$1.PLAYING,VIDEO_STATE$1.PAUSE],_a$b[VIDEO_STATE$1.IDLE]=[VIDEO_STATE$1.END],_a$b),VALID_STATE_IN_LEVEL_SWITCHING$1=[VIDEO_STATE$1.PAUSE,VIDEO_STATE$1.PLAYING,VIDEO_STATE$1.END,VIDEO_STATE$1.IDLE],logMethodCall$f=logMethodCallDecoratorCreator$1("StateMgr"),StateMgr$1=function(){function G(U){var L;this.videoEvtHandler=(L={},L[VIDEO_EVTS$1.canplay]=this.onCanplayEvt.bind(this),L[VIDEO_EVTS$1.playing]=this.setPlaying.bind(this),L[VIDEO_EVTS$1.waiting]=this.setWaiting.bind(this),L[VIDEO_EVTS$1.pause]=this.onPauseEvt.bind(this),L[VIDEO_EVTS$1.seeking]=this.onSeekingEvt.bind(this),L[VIDEO_EVTS$1.seeked]=this.onSeekedEvt.bind(this),L),this.videoNode=U,this.logger=new Logger$1(U.config.instanceId,"StateMgr")}return G.prototype.destroy=function(){this.videoNode=null},G.prototype.validCallState=function(U){var L;return(L=VALID_PREVIOUS_STATE_MAP$1[U])===null||L===void 0?void 0:L.includes(this.videoNode.state)},G.prototype.setEnded=function(){this.setVideoNodeState(VIDEO_STATE$1.END),this.setVideoNodeState(VIDEO_STATE$1.IDLE)},G.prototype.setLoadStart=function(){this.setVideoNodeState(VIDEO_STATE$1.LOAD_START)},G.prototype.setCanplay=function(){this.setVideoNodeState(VIDEO_STATE$1.CANPLAY)},G.prototype.setWaiting=function(){this.setVideoNodeState(VIDEO_STATE$1.BUFFERING)},G.prototype.setPlaying=function(){this.setVideoNodeState(VIDEO_STATE$1.PLAYING)},G.prototype.onSetLevelOver=function(){this.videoNode.state===VIDEO_STATE$1.PAUSE&&this.setVideoNodeState(VIDEO_STATE$1.PLAYING)},G.prototype.receiveVideoEvt=function(U){var L,Y;(Y=(L=this.videoEvtHandler)[U])===null||Y===void 0||Y.call(L)},G.prototype.setVideoNodeState=function(U){if(this.videoNode.getLevelSwitching()&&!VALID_STATE_IN_LEVEL_SWITCHING$1.includes(U)){this.logger.log("can not set state 2 ".concat(U," when level switching"));return}if(!VALID_PREVIOUS_STATE_MAP$1[U].includes(this.videoNode.state)){this.logger.log("can not set state from ".concat(this.videoNode.state," to ").concat(U));return}this.videoNode.state=U},G.prototype.onCanplayEvt=function(){var U=uaTool$1.os.ios||uaTool$1.browser.safari;U&&this.isVideoElementPlaying()&&this.videoNode.state===VIDEO_STATE$1.BUFFERING?this.setVideoNodeState(VIDEO_STATE$1.PLAYING):this.setVideoNodeState(VIDEO_STATE$1.CANPLAY)},G.prototype.onPauseEvt=function(){this.setVideoNodeState(VIDEO_STATE$1.PAUSE)},G.prototype.onSeekingEvt=function(){this.setVideoNodeState(VIDEO_STATE$1.SEEKING)},G.prototype.onSeekedEvt=function(){this.setVideoNodeState(VIDEO_STATE$1.SEEKED);var U=uaTool$1.os.ios||uaTool$1.browser.safari;U&&this.isVideoElementPlaying()&&this.setVideoNodeState(VIDEO_STATE$1.PLAYING)},G.prototype.isVideoElementPlaying=function(){return!this.videoNode.videoElement.paused&&!this.videoNode.videoElement.ended},__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"destroy",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[String]),__metadata$e("design:returntype",void 0)],G.prototype,"validCallState",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"setEnded",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"setLoadStart",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"setCanplay",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"setWaiting",null),__decorate$e([logMethodCall$f,__metadata$e("design:type",Function),__metadata$e("design:paramtypes",[]),__metadata$e("design:returntype",void 0)],G.prototype,"setPlaying",null),G}(),__extends$i=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$f=globalThis&&globalThis.__assign||function(){return __assign$f=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$f.apply(this,arguments)},__decorate$d=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$d=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$e=logMethodCallDecoratorCreator$1("BaseVideoNode"),BaseVideoNode$1=function(G){__extends$i(U,G);function U(L){var Y,X=G.call(this)||this;X._played=!1,X._evtBlocking=!1,X._pauseCloseToEndStateCheckTimeoutId=0,X._targetSeekTime=-1,X._userStartTime=0,X._isUserSeek=!1,X._setLoadingDelayTimeoutId=0,X.mainLoopEnabled=!1,X.bufferStartTimeStamp=0,X.loadTimeoutId=0,X.levelSwitchTargetPlaytime=-1,X.setLevelMode=SET_LEVEL_MODE$1.SOFT,X._logger=new Logger$1(L.instanceId,"BaseVideoNode"),X._config=L,X.stateMgr=new StateMgr$1(X);var W=X._config.container;return X._video=X.findFreeVideoElement(),X._autoPlayPolicy=new AutoPlayPolicy$1(X._video,{instanceId:L.instanceId}),X._state=VIDEO_STATE$1.IDLE,X._playbackRate=1,X._idx=0,X._videoInfo=null,X._pauseType=void 0,X._videoEventMap=(Y={},Y[VIDEO_EVTS$1.timeupdate]=X.onVideoEventTimeUpdate.bind(X),Y[VIDEO_EVTS$1.durationchange]=X.onVideoEventDurationChange.bind(X),Y[VIDEO_EVTS$1.volumechange]=X.onVideoEventVolumeChange.bind(X),Y[VIDEO_EVTS$1.canplay]=X.onVideoEventCanplay.bind(X),Y[VIDEO_EVTS$1.playing]=X.onVideoEventPlaying.bind(X),Y[VIDEO_EVTS$1.pause]=X.onVideoEventPause.bind(X),Y[VIDEO_EVTS$1.waiting]=X.onVideoEventWaiting.bind(X),Y[VIDEO_EVTS$1.seeking]=X.onVideoEventSeeking.bind(X),Y[VIDEO_EVTS$1.seeked]=X.onVideoEventSeeked.bind(X),Y[VIDEO_EVTS$1.loadeddata]=X.onVideoEventLoadeddata.bind(X),Y[VIDEO_EVTS$1.loadedmetadata]=X.onVideoEventLoadedmetadata.bind(X),Y[VIDEO_EVTS$1.ended]=X.onVideoEventEnded.bind(X),Y[VIDEO_EVTS$1.error]=X.onVideoEventError.bind(X),Y[VIDEO_EVTS$1.progress]=X.onVideoEventProgress.bind(X),Y[VIDEO_EVTS$1.ratechange]=X.onVideoEventRateChange.bind(X),Y[VIDEO_EVTS$1.resize]=X.onVideoEventResize.bind(X),Y),X._drm=new DRM$1(X._video,L.drmConfig,X._logger),X._drm.on("error",X.onDrmError.bind(X)),X._eventMap={video:X.onVideoEvents.bind(X)},X._eventAddedMap={},X._videoElementContainer=domTool$1.getElementFromConfig(W).querySelector(".".concat(VIDEO_CONTAINER_CLASS$1)),videoTool$1.appendElement(X._video,X._videoElementContainer),X.addVideoElementResizeObserver(),X}return U.prototype.setLevel=function(L){if(L===void 0&&(L=SET_LEVEL_MODE$1.HARD),!this.checkCanSetLevel())return Promise.reject(new Error("setLevel can't start"));this._logger.log("setLevel(), succ exec: ",this._videoInfo);var Y=this._videoInfo.playtime;this.load(this._videoInfo,{startTime:Y}),this.play();var X=new SimpleDefer$1;return this._levelSwitchingDefer=X,this.levelSwitchTargetPlaytime=Y,this.setLoading(!0),this.emit(VIDEO_NODE_EVENT$1.SETLEVEL_START,{videoInfo:this._videoInfo,mode:L}),X.promise},U.prototype.isCurrentContentDRMEncrypted=function(){return this._state===VIDEO_STATE$1.IDLE?!1:this._drm.hasStarted()},U.prototype.getLevelSwitching=function(){return!!this._levelSwitchingDefer},U.prototype.checkSetLevelOver=function(L){if(!!this.getLevelSwitching()){var Y=!1,X=!1,W=!1;this._config.type===PLAY_MODE$1.LIVE?(Y=L===VIDEO_EVTS$1.playing,W=L===VIDEO_EVTS$1.timeupdate):(Y=L===VIDEO_EVTS$1.playing&&videoTool$1.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI),X=L===VIDEO_EVTS$1.seeked&&!videoTool$1.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI),W=L===VIDEO_EVTS$1.timeupdate&&this._video.currentTime-this.levelSwitchTargetPlaytime>=.3),(Y||X||W)&&(this._logger.log("setLevelOver(), reason: "+"succOnPlaying=".concat(Y,"/succOnSeeked=").concat(X,"/succOnTimeupdate=").concat(W)),this.setLevelOver())}},U.prototype.setLevelOver=function(){!this._levelSwitchingDefer||(this._levelSwitchingDefer.resolve(),this._levelSwitchingDefer=null,this.levelSwitchTargetPlaytime=-1,this.setLoading(!1),this.stateMgr.onSetLevelOver(),this.emit(VIDEO_NODE_EVENT$1.SETLEVEL_OVER,{videoInfo:this._videoInfo}))},U.prototype.checkCanSetLevel=function(){return this._played?this.getLevelSwitching()?(this._logger.warn("setLevel(), in progress."),!1):!this._videoInfo||this._videoInfo.playtime<=0?(this._logger.warn("setLevel(), setLevel can't start."),!1):this._config.type===PLAY_MODE$1.VOD&&this._videoInfo.playtime+1>=this._videoInfo.duration?(this._logger.warn("setLevel(), video is about to end."),!1):!0:(this._logger.warn("setLevel(), play is not triggered."),!1)},U.prototype.checkCanSeek=function(L,Y){return Y===void 0&&(Y=!1),this._videoInfo?this._video.duration<=0?(this._logger.log("seek(), cannot seek when the duration is 0"),!1):L-this._videoInfo.duration>=1?(this._logger.log("seek(), return because too large time, uid=".concat(this._videoInfo.uid,"/idx=").concat(this.idx,"/time=").concat(L)+"/duration=".concat(this._videoInfo.duration)),!1):typeof this.setLevelMode!="undefined"&&this.setLevelMode!==SET_LEVEL_MODE$1.SMOOTH&&this.getLevelSwitching()&&Y?(this._logger.log("seek(), cannot seek when hard/soft level switching"),!1):!0:(this._logger.log("seek(), return because null videoInfo, time=".concat(L,"/idx=").concat(this.idx)),!1)},U.prototype.findFreeVideoElement=function(){for(var L=this._config.videoElements,Y=null,X=0;X<L.length;X++){var W=L[X];if(typeof W.dataset.used=="undefined"||W.dataset.used===VIDEO_ELEMENT_STATE$1.FREE){Y=L[X];break}}if(!Y)throw new Error("Unable to find free video element!");return Y.dataset.used=VIDEO_ELEMENT_STATE$1.USED,Y},U.prototype.setMainLoopEnable=function(L){var Y=this;if(this.mainLoopEnabled!==L)if(this.mainLoopEnabled=L,this._logger.log("setMainLoopEnable(), value=".concat(L)),L){var X=function(){!Y.mainLoopEnabled||(Y.mainLoopInProcess(),Y.mainLoopRafId=requestAnimationFrame(X))};this.mainLoopRafId=requestAnimationFrame(X)}else window.cancelAnimationFrame(this.mainLoopRafId)},U.prototype.mainLoopInProcess=function(){this.handlerPlayingStateInMainLoop(),this.handlerBufferingStateInMainLoop()},U.prototype.handlerPlayingStateInMainLoop=function(){var L;this._state!==VIDEO_STATE$1.PLAYING||this._video.duration<=0||((L=this.onAccurateTimeupdate)===null||L===void 0||L.call(this,this._video.currentTime,this._video.duration),this.updatePlaytime(this._video.currentTime,!0))},U.prototype.handlerBufferingStateInMainLoop=function(){if(this._state!==VIDEO_STATE$1.BUFFERING){this.bufferStartTimeStamp!==0&&(this.bufferStartTimeStamp=0);return}var L=+new Date;if(this.bufferStartTimeStamp!==0){if(L-this.bufferStartTimeStamp>this._config.maxBufferingTimeout){this._logger.log("checkBuffering stuck!!! uid=".concat(this._videoInfo.uid,"/loadingUrl=").concat(this._videoInfo.loadingUrl));var Y=this._videoInfo;Y.error={code:ERROR_CODE$1.ORG_PLAY_STUCK_ERR,message:ERROR_MSG$1.PLAY_STUCK},this.stopInner(!1,Y)}}else this.bufferStartTimeStamp=L},U.prototype.setCheckLoadTimeoutEnable=function(L){var Y=this;L?this.loadTimeoutId=window.setTimeout(function(){Y.errorHandler({code:ERROR_CODE$1.ORG_LOAD_TIMEOUT,message:ERROR_MSG$1.PRELOAD_VIDEO_TIMEOUT})},this._config.maxPreloadTimeout):this.loadTimeoutId>0&&(clearTimeout(this.loadTimeoutId),this.loadTimeoutId=0)},U.prototype.setEndInner=function(){this._state!==VIDEO_STATE$1.END&&this._state!==VIDEO_STATE$1.IDLE&&(this._logger.log("setEndInner(), idx=".concat(this._idx,"/uid=").concat(this._videoInfo.uid,"/playtime=").concat(this._videoInfo.playtime)+"/duration=".concat(this._videoInfo.duration,"}")),this.stateMgr.setEnded(),this.emit(VIDEO_NODE_EVENT$1.PLAY_OVER,{isUserStop:!1,endState:END_STATE$1.NORMAL,videoInfo:this._videoInfo}))},U.prototype.stopInner=function(L,Y){var X;!this._video||!this._videoInfo||(this.setMainLoopEnable(!1),this.setCheckLoadTimeoutEnable(!1),this.bufferStartTimeStamp=0,this._isUserSeek=!1,this._logger.log("stopInner(), uid/state/idx: ".concat((X=this._videoInfo)===null||X===void 0?void 0:X.uid,"/").concat(this.state,"/").concat(this.idx)),this.setVideoEvents(!1),this._config.clearVideoAfterStop?videoTool$1.clear(this._video):this._video.pause(),this._config.createVideoNodeWhenLoad&&(this._video.dataset.used=VIDEO_ELEMENT_STATE$1.FREE),this._videoInfo&&(this._videoInfo.extraVars.isLoadstarted=!1,this._videoInfo=null),this._pauseCloseToEndStateCheckTimeoutId>0&&(window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId),this._pauseCloseToEndStateCheckTimeoutId=0),this.state!==VIDEO_STATE$1.IDLE&&(L||(this.stateMgr.setEnded(),this._played=!1,this._levelSwitchingDefer=null,Y!=null&&Y.error&&this.emit(VIDEO_NODE_EVENT$1.ERROR,{videoInfo:Y}))))},U.prototype.onVideoEventPause=function(){this._pauseType!==PAUSE_TYPE$1.INNER&&this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.pause)},U.prototype.onVideoEventPlaying=function(){this.setCheckLoadTimeoutEnable(!1),this._isUserSeek=!1,this.updateVideoSize(),uaTool$1.browser.x5&&this.onVideoEventDurationChange(),this._videoInfo.hasFirstPlaying||this.emit(VIDEO_NODE_EVENT$1.FIRST_PLAYING,{videoInfo:this._videoInfo}),this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.playing),this._videoInfo&&(this._videoInfo.hasFirstPlaying=!0),this._userStartTime=0,this.checkSetLevelOver(VIDEO_EVTS$1.playing)},U.prototype.onVideoEventRateChange=function(){this.emit(VIDEO_NODE_EVENT$1.RATE_CHANGE,{playbackRate:this.playbackRate,videoInfo:this._videoInfo})},U.prototype.onVideoEventEnded=function(){this._logger.log("setEndInner(), reason=endedEvt"),this.setEndInner()},U.prototype.onVideoEventSeeked=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.seeked),this.checkSetLevelOver(VIDEO_EVTS$1.seeked),this.resumeAfterSeek(),this._isUserSeek=!1},U.prototype.resumeAfterSeek=function(){!this._played||this._video.ended||!this._isUserSeek||(this._video.paused?this._config.remainPauseStateAfterSeek||this.videoplay():this.stateMgr.setPlaying())},U.prototype.onVideoEventCanplay=function(){this.setCheckLoadTimeoutEnable(!1),this._videoInfo&&(this._videoInfo.qualityInfo.canplaytime||(this._videoInfo.qualityInfo.canplaytime=videoTool$1.getBuffered(this._video)),this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.canplay))},U.prototype.onVideoEventResize=function(){this.updateVideoSize()},U.prototype.onVideoEventDurationChange=function(){this._video.duration>0&&this._video.duration!==this._videoInfo.duration&&(this._videoInfo.duration=this._video.duration,this._logger.log("onVideoEventDurationChange(), uid=".concat(this._videoInfo.uid,"/duration=").concat(this._videoInfo.duration,"/")+"idx=".concat(this.idx)),this.emit(VIDEO_NODE_EVENT$1.DURATION_CHANGE,{videoInfo:this._videoInfo}))},U.prototype.onVideoEventVolumeChange=function(){this.emit(VIDEO_NODE_EVENT$1.VOLUME_CHANGE,{volume:this.volume,videoInfo:this._videoInfo})},U.prototype.onVideoEventTimeUpdate=function(){this._video.currentTime!==0&&(this.updatePlaytime(this._video.currentTime),this.checkSetLevelOver(VIDEO_EVTS$1.timeupdate),(this._state===VIDEO_STATE$1.BUFFERING||this._state===VIDEO_STATE$1.SEEKED)&&this.stateMgr.setPlaying())},U.prototype.onVideoEventWaiting=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.waiting)},U.prototype.onVideoEventSeeking=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS$1.seeking)},U.prototype.onVideoEventProgress=function(){this.emit(VIDEO_NODE_EVENT$1.VIDEO_BUFFER_CHANGE,{videoInfo:this._videoInfo})},U.prototype.onVideoEventLoadedmetadata=function(){this.updateVideoSize(),this.emit(VIDEO_NODE_EVENT$1.METADATA_CHANGE,{videoInfo:this._videoInfo})},U.prototype.updateVideoSize=function(){var L=this._video.videoWidth,Y=this._video.videoHeight;this._videoInfo&&(this._videoInfo.videoWidth!==L||this._videoInfo.videoHeight!==Y)&&(this._videoInfo.videoWidth=L,this._videoInfo.videoHeight=Y,this.emit(VIDEO_NODE_EVENT$1.VIDEO_RESIZE,{videoInfo:this._videoInfo}),this.adjustmentVideoSizeIfSmallBorder())},U.prototype.addVideoElementResizeObserver=function(){var L=this;!window.ResizeObserver||this._video instanceof HTMLVideoElement&&(this.videoResizeObserver=new ResizeObserver(function(Y){L.adjustmentVideoSizeIfSmallBorder()}),this.videoResizeObserver.observe(this._video))},U.prototype.removeVideoElementResizeObserver=function(){this.videoResizeObserver&&this._video&&this._video instanceof HTMLVideoElement&&(this.videoResizeObserver.disconnect(),this.videoResizeObserver.unobserve(this._video),this.videoResizeObserver=null)},U.prototype.adjustmentVideoSizeIfSmallBorder=function(){if(this._video instanceof HTMLVideoElement&&!!this._videoInfo&&!(this._config.minFillBlackBorder<=0)){var L=domTool$1.getDomSize(this._video),Y=L.width,X=L.height,W=this._videoInfo.videoWidth*(X/this._videoInfo.videoHeight),z=this._videoInfo.videoHeight*(Y/this._videoInfo.videoWidth),J=this._config.minFillBlackBorder;W<Y&&W>=Y-J?videoTool$1.setElementFitType(this._video,"cover"):z<X&&z>=X-J?videoTool$1.setElementFitType(this._video,"cover"):videoTool$1.setElementFitType(this._video,"contain")}},U.prototype.onVideoEventLoadeddata=function(){this.emit(VIDEO_NODE_EVENT$1.VIDEO_BUFFER_CHANGE,{videoInfo:this._videoInfo})},U.prototype.onVideoEventError=function(){this.errorHandler()},U.prototype.errorHandler=function(L){var Y=this.parseErrorData(L);this._logger.log("errorHandler(), error: ",Y),this.retryWhenError(Y)},U.prototype.parseErrorData=function(L){var Y,X,W,z,J;if(L)return Y=L.code,z=Y===void 0?ERROR_CODE$1.UNKNOWN_ERR:Y,X=L.message,J=X===void 0?ERROR_MSG$1.UNKNOWN:X,{code:z,message:J};var Z=VIDEO_ELEMENT_ERROR$1[(W=this.videoElement.error)===null||W===void 0?void 0:W.code]||{code:ERROR_CODE$1.UNKNOWN_ERR,message:ERROR_MSG$1.UNKNOWN};return z=Z.code,J=Z.message,{code:z,message:J}},U.prototype.retryWhenError=function(L){var Y=this._videoInfo,X=this.setRetryUrl(Y),W=Y.config.expireTimeStamp,z=typeof W=="undefined"?!1:W<+new Date;if(!L.fatal&&!z&&X){var J=Y.getRetryCount();this._logger.log("retryOnError(), retryCount=",J),this.emit(VIDEO_NODE_EVENT$1.RETRY,__assign$f({error:L,retryCount:J,videoInfo:Y},X)),this.stopInner(!0),this.stateMgr.setWaiting();var Z=Y.playtime,ee=this._played?Z:this._userStartTime,te=this._played?this.play.bind(this):this.load.bind(this);te(Y,{startTime:ee});return}this._logger.log("retryOnError(), fatal."),this._videoInfo.error=L,this.stopInner(!1,this._videoInfo)},U.prototype.onDrmError=function(L){var Y=L.data,X=Y.code,W=Y.message;this._logger.log("onDrmError(), code=".concat(X,"/msg=").concat(W)),this._videoInfo.error=L.data,this.stopInner(!1,this._videoInfo)},U.prototype.setVideoEvents=function(L){var Y=this,X;this._eventAddedMap.videoEventAdded!==L&&(this._logger.log("setVideoEvents(), idx=".concat(this._idx,"/value=").concat(L,"/uid=").concat((X=this._videoInfo)===null||X===void 0?void 0:X.uid)),this._eventAddedMap.videoEventAdded=L,Object.keys(this._videoEventMap).forEach(function(W){L?Y._video.addEventListener(W,Y._eventMap.video):Y._video.removeEventListener(W,Y._eventMap.video)}))},U.prototype.setLoading=function(L,Y){var X=this;Y===void 0&&(Y=0),this._setLoadingDelayTimeoutId>0&&(window.clearTimeout(this._setLoadingDelayTimeoutId),this._setLoadingDelayTimeoutId=0),L?Y>0?this._setLoadingDelayTimeoutId=window.setTimeout(function(){X.emit(VIDEO_NODE_EVENT$1.SET_LOADING,{show:!0})},Y):this.emit(VIDEO_NODE_EVENT$1.SET_LOADING,{show:!0}):this.emit(VIDEO_NODE_EVENT$1.SET_LOADING,{show:!1})},U.prototype.onVideoEvents=function(L){var Y=this,X;if(this.state===VIDEO_STATE$1.IDLE||!this._videoInfo||this._evtBlocking){this._logger.log("videoevt discard, idx=".concat(this._idx,"/uid=").concat((X=this._videoInfo)===null||X===void 0?void 0:X.uid,"/evttype=").concat(L.type,"/")+"state=".concat(this.state,"/evtBlocking=").concat(this._evtBlocking));return}L.type!=="timeupdate"&&L.type!=="progress"&&this._logger.log("videoevt, uid=".concat(this._videoInfo.uid,"/idx=").concat(this.idx,"/type=").concat(L.type,"/")+"time=".concat(this._video.currentTime,"/duration=").concat(this._video.duration)),this.emit(VIDEO_NODE_EVENT$1.ELEMENT_EVTS,{videoInfo:this._videoInfo,elementEvtType:L.type});var W=Math.abs(this._videoInfo.duration-this._videoInfo.playtime)<.1&&this._videoInfo.duration>0;L.type==="pause"&&W?this._pauseCloseToEndStateCheckTimeoutId=window.setTimeout(function(){Y._videoEventMap[L.type]&&Y._videoEventMap[L.type](L)},0):(L.type==="ended"&&this._pauseCloseToEndStateCheckTimeoutId>0&&(window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId),this._pauseCloseToEndStateCheckTimeoutId=0),this._videoEventMap[L.type]&&this._videoEventMap[L.type](L))},U.prototype.createStream=function(L){return null},U.prototype.setRetryUrl=function(L){var Y=L.loadingUrl,X=Y,W=L.setNextBackUrl();return W?{prevUrl:X,curUrl:L.loadingUrl}:null},U.prototype.triggerAutoplay=function(){var L=this;return this._evtBlocking=!0,this._autoPlayPolicy.userTrigger().then(function(){return L._evtBlocking=!1}).catch(function(Y){throw L._evtBlocking=!1,Y})},Object.defineProperty(U.prototype,"useWorker",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"idx",{get:function(){return this._idx},set:function(L){this._idx=L,this._video.dataset.idx="".concat(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElement",{get:function(){return this._video},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){return{width:this._video.videoWidth,height:this._video.videoHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){return videoTool$1.getBuffered(this._video)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){return this._video.playbackRate},set:function(L){this._playbackRate=L;try{this._video.playbackRate=L}catch(Y){this._logger.warn("set playbackRate: ".concat(Y==null?void 0:Y.message))}},enumerable:!1,configurable:!0}),U.prototype.videoplay=function(){var L=this,Y;this._logger.log("videoplay(), uid=".concat((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid,"/state=").concat(this.state,"/idx=").concat(this.idx));var X=this._video.play();return X&&X.catch(function(W){L._logger.warn("".concat(L.idx," play() catch: ").concat(W.name,", ").concat(W.message));var z=videoTool$1.isAutoPlayBlockedMessage(W.message);L.setLoading(!1),L.emit(VIDEO_NODE_EVENT$1.PLAY_PROMISE_CATCHED,{videoInfo:L._videoInfo,isAutoPlayBlocked:z})}),this._video.playbackRate=this._playbackRate,X},Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){return this._videoInfo},enumerable:!1,configurable:!0}),U.prototype.pause=function(){if(!this._played){this._logger.warn("pause(), VideoNode has not been played");return}if(!this.stateMgr.validCallState(VIDEO_STATE$1.PAUSE)){this._logger.log("call pause in invaild state ".concat(this._state));return}this.pauseInner(PAUSE_TYPE$1.USER)},U.prototype.pauseInner=function(L){var Y;L===void 0&&(L=PAUSE_TYPE$1.INNER),this._logger.log("pause(), uid=".concat((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid,"/state=").concat(this.state,"/idx=").concat(this.idx,"/type=").concat(L)),this._pauseType=L,this._video.pause()},U.prototype.resume=function(){throw new Error("not implements")},Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!uaTool$1.browser.x5},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){var L=this._videoInfo?this._videoInfo.duration:0;return Number.isNaN(L)?0:L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._video.muted?0:this._video.volume},set:function(L){if(L<0||L>1){this._logger.warn("The volume value range is [0,1]");return}this._video.volume=L,this._video.muted=L<=0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){return this._videoInfo?this._videoInfo.playtime:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this._state},set:function(L){var Y;if(this._state!==L){var X=this._state;this._state=L,this._videoInfo&&(this._videoInfo.state=this._state),this._logger.log("set state(), uid=".concat((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid,"/idx=").concat(this._idx,"/old=").concat(X,"/new=").concat(L));var W={videoInfo:this._videoInfo,new:L,old:X};L===VIDEO_STATE$1.PAUSE?(W.pauseType=this._pauseType||PAUSE_TYPE$1.SYS,this._pauseType=void 0):L===VIDEO_STATE$1.SEEKING?(W.seekingTime=this._targetSeekTime,W.isUserSeek=this._isUserSeek,this._targetSeekTime=-1):L===VIDEO_STATE$1.SEEKED&&(W.isUserSeek=this._isUserSeek),this.setLoadingOnStateChange(),W&&this.emit(VIDEO_NODE_EVENT$1.STATE_CHANGE,W)}},enumerable:!1,configurable:!0}),U.prototype.stop=function(){this.stopInner()},U.prototype.updatePlaytime=function(L,Y){if(Y===void 0&&(Y=!1),!!this._videoInfo){var X=videoTool$1.getVideoPlaybackQuality(this._video),W=X.totalVideoFrames,z=X.droppedVideoFrames;this._videoInfo.qualityInfo.totalVideoFrames=W,this._videoInfo.qualityInfo.droppedVideoFrames=z,this._videoInfo.playtime!==L&&(this._videoInfo.playtime=L),Y||this.emit(VIDEO_NODE_EVENT$1.TIME_UPDATE,{videoInfo:this._videoInfo})}},U.prototype.destroy=function(){var L,Y,X;this.stopInner(),this._video&&(this._eventMap&&(this.setVideoEvents(!1),this._eventMap=null),videoTool$1.clear(this._video),videoTool$1.removeElement(this._video,this._videoElementContainer),this._video.dataset.used=VIDEO_ELEMENT_STATE$1.FREE),(L=this._autoPlayPolicy)===null||L===void 0||L.destroy(),(Y=this.stateMgr)===null||Y===void 0||Y.destroy(),this.removeAllListeners(),this.removeVideoElementResizeObserver(),(X=this._drm)===null||X===void 0||X.destroy(),this._autoPlayPolicy=null,this._video=null,this._videoInfo=null,this._videoElementContainer=null,this._played=!1,this._config=null,this._logger.log("VideoNode has been destroyed!")},U.prototype.setLoadingOnStateChange=function(){if(!this._played){this.setLoading(!1);return}if([VIDEO_STATE$1.BUFFERING,VIDEO_STATE$1.SEEKING].includes(this._state)){var L=500;this.setLoading(!0,L);return}(this._config.type===PLAY_MODE$1.LIVE&&VIDEO_STATE$1.CANPLAY!==this._state||this._config.type===PLAY_MODE$1.VOD)&&this.setLoading(!1)},__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[String]),__metadata$d("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[Boolean]),__metadata$d("design:returntype",void 0)],U.prototype,"setCheckLoadTimeoutEnable",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[]),__metadata$d("design:returntype",void 0)],U.prototype,"setEndInner",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[Boolean,Object]),__metadata$d("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[Object]),__metadata$d("design:returntype",void 0)],U.prototype,"retryWhenError",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[]),__metadata$d("design:returntype",void 0)],U.prototype,"pause",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[String]),__metadata$d("design:returntype",void 0)],U.prototype,"pauseInner",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[]),__metadata$d("design:returntype",void 0)],U.prototype,"stop",null),__decorate$d([logMethodCall$e,__metadata$d("design:type",Function),__metadata$d("design:paramtypes",[]),__metadata$d("design:returntype",void 0)],U.prototype,"destroy",null),U}(s$3),__extends$h=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__decorate$c=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$c=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$d=logMethodCallDecoratorCreator$1("OrgVideoNode"),OrgVideoNode$1=function(G){__extends$h(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.onVideoEventCanplay=function(){var L;(L=this._canplayDefer)===null||L===void 0||L.resolve(),G.prototype.onVideoEventCanplay.call(this)},U.prototype.onVideoEventLoadedmetadata=function(){G.prototype.onVideoEventLoadedmetadata.call(this),(uaTool$1.os.ios||uaTool$1.browser.safari)&&[PRELOAD_TYPE$1.META_DATA,PRELOAD_TYPE$1.AUTO].includes(this._config.preloadType)&&this.onVideoEventCanplay()},U.prototype.onVideoEventLoadeddata=function(){G.prototype.onVideoEventLoadeddata.call(this),this.checkPlayInitSeek()},U.prototype.onVideoEventTimeUpdate=function(){G.prototype.onVideoEventTimeUpdate.call(this),this.checkPlayInitSeek()},U.prototype.load=function(L,Y){var X=this;return L.loadingUrl?(this.stopInner(!0),this._drm.init(L.config.drmConfig),this._videoInfo=L,this._videoInfo.extraVars.isLoadstarted=!0,this.setVideoEvents(!0),this.stateMgr.setLoadStart(),this.assignStartTime((Y==null?void 0:Y.startTime)||0),this._video.src=this._videoInfo.loadingUrl,this._logger.log("load(), loadingUrl=".concat(this._videoInfo.loadingUrl)),this._config.preloadType===PRELOAD_TYPE$1.AUTO_LOAD&&this._video.load(),this.setCheckLoadTimeoutEnable(!0),this._canplayDefer=new SimpleDefer$1,videoTool$1.notSupportLoadBeforeHasUserGestures()&&(this._logger.log("load(), notSupportLoadBeforeHasUserGestures"),setTimeout(function(){X.onVideoEventCanplay()})),!0):!1},U.prototype.play=function(L,Y){var X=this;this._logger.log("play(), uid=".concat(L==null?void 0:L.uid,"/idx=").concat(this.idx,"/state=").concat(this.state)),this._played=!0,L&&!L.extraVars.isLoadstarted&&this.load(L,Y);var W=null;return uaTool$1.browser.safari&&this._canplayDefer?this._canplayDefer.promise.then(function(){X.videoplay()}):W=this.videoplay(),this.setMainLoopEnable(!0),W},U.prototype.assignStartTime=function(L){if(this._config.type!==PLAY_MODE$1.LIVE){this._userStartTime=L;var Y=!Number.isNaN(L)&&L>=0?L:0;Y<=0||(videoTool$1.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI)&&!this._videoInfo.loadingUrl.startsWith("blob:")?(this._logger.log("assignStartTime by #t"),this._videoInfo.setLoadingUrlStartTime(Y)):(this._logger.log("assignStartTime with seek()"),this._needPlaySeektime=Y))}},U.prototype.checkPlayInitSeek=function(){this._needPlaySeektime>0&&this._videoInfo&&this._video.duration>0&&(this._logger.log("checkPlayInitSeek(), idx=".concat(this.idx,"/seektime=").concat(this._needPlaySeektime)),this.seek(this._needPlaySeektime),this._needPlaySeektime=0)},U.prototype.stopInner=function(L,Y){this._canplayDefer=null,this._needPlaySeektime=0,G.prototype.stopInner.call(this,L,Y)},U.prototype.seek=function(L,Y){Y===void 0&&(Y=!1);var X=L;return this.checkCanSeek(X,Y)?(Math.abs(X-this._videoInfo.duration)<=1&&(X=this._videoInfo.duration-1),this._isUserSeek=Y,this._logger.log("seek(), uid".concat(this._videoInfo.uid,"/idx=").concat(this.idx,"/time=").concat(X,"/duration=").concat(this._video.duration,"/")+"state=".concat(this.state)),this._targetSeekTime=X,this._video.currentTime=X,!0):!1},U.prototype.handlerPlayingStateInMainLoop=function(){G.prototype.handlerPlayingStateInMainLoop.call(this);var L=Math.abs(this._video.duration-this._video.currentTime),Y=this._config.originKernelConfig.advanceEndTime;Y>0&&L<=Y&&(this._logger.log("setEndInner(), reason=leftTimeCheck"),this.setEndInner())},U.prototype.setEndInner=function(){this.state!==VIDEO_STATE$1.END&&this.state!==VIDEO_STATE$1.IDLE&&(this.onAccurateTimeupdate&&this.onAccurateTimeupdate(0),this.updatePlaytime(this._video.currentTime)),G.prototype.setEndInner.call(this)},__decorate$c([logMethodCall$d,__metadata$c("design:type",Function),__metadata$c("design:paramtypes",[Object,Object]),__metadata$c("design:returntype",void 0)],U.prototype,"load",null),__decorate$c([logMethodCall$d,__metadata$c("design:type",Function),__metadata$c("design:paramtypes",[Object,Object]),__metadata$c("design:returntype",void 0)],U.prototype,"play",null),__decorate$c([logMethodCall$d,__metadata$c("design:type",Function),__metadata$c("design:paramtypes",[Boolean,Object]),__metadata$c("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$c([logMethodCall$d,__metadata$c("design:type",Function),__metadata$c("design:paramtypes",[Number,Object]),__metadata$c("design:returntype",void 0)],U.prototype,"seek",null),U}(BaseVideoNode$1);function getEnvVals$2(){var G="npm";try{G="npm"}catch(X){}var U="";try{U="1.4.86"}catch(X){}var L="";try{L=1652967199476}catch(X){}var Y=!1;try{Y=0==="1"}catch(X){}return{CHANNEL:G,VERSION:U,BUILD_TIME:L,LOCAL_DEV:Y}}var _a$a=getEnvVals$2(),CHANNEL$2=_a$a.CHANNEL,BUILD_TIME$2=_a$a.BUILD_TIME,VERSION$3=_a$a.VERSION,LOCAL_DEV$1=_a$a.LOCAL_DEV,defaultPlayerConfig$1={type:PLAY_MODE$1.VOD,interruptPlayNextMinTime:1,backupUrlsMaxRetryCount:5,maxPreloadTimeout:3e4,maxBufferingTimeout:3e4,isPlayList:!1,preloadType:PRELOAD_TYPE$1.AUTO_LOAD,maxVideoNodeCount:1,minFillBlackBorder:10},__extends$g=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$e=globalThis&&globalThis.__assign||function(){return __assign$e=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$e.apply(this,arguments)},__decorate$b=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$b=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},__awaiter$8=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$8=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},CHANNEL_MAP$1;(function(G){G[G.cdn=1]="cdn",G[G.npm=0]="npm"})(CHANNEL_MAP$1||(CHANNEL_MAP$1={}));var logMethodCall$c=logMethodCallDecoratorCreator$1("KernelProxy"),loadKernelDeferMap$1={},KernelProxy$1=function(G){__extends$g(U,G);function U(L){var Y=this,X,W,z;return Y=G.call(this)||this,Y._volume=1,Y._videoElements=[],Y._addedEvts=[],typeof L.instanceId=="undefined"&&(L.instanceId=comTool$1.createGUID()),Y._logger=new Logger$1(L.instanceId,"KernelProxy"),Y._config=__assign$e(__assign$e(__assign$e({},defaultPlayerConfig$1),L),{maxVideoNodeCount:(z=(X=L.maxVideoNodeCount)!==null&&X!==void 0?X:(W=L.originKernelConfig)===null||W===void 0?void 0:W.maxVideoNodeCount)!==null&&z!==void 0?z:defaultPlayerConfig$1.maxVideoNodeCount}),L.logLevel>PLAYER_LOG_LEVEL$1.NONE&&enableConsoleOutput$1(),Y._config.videoElements||(Y._config.videoElements=Y.createVideoElements()),Y.createVideoElementsContainer(),Y._kernelEvtHandler=Y.kernelEvtHandler.bind(Y),Y.collectUsage(Y.prepareUsageData()),Y}return Object.defineProperty(U.prototype,"isCollected",{get:function(){return U._isCollected},set:function(L){U._isCollected=L},enumerable:!1,configurable:!0}),U.prototype.prepareUsageData=function(){var L=CHANNEL_MAP$1[CHANNEL$2],Y=0,X=urlTool$1.getTopFrameUrl(),W=X==null?void 0:X.split("?")[0],z=urlTool$1.getDomainOfURL(X);return{attaid:"05700050920",token:"3619167286",topUrl:"".concat(encodeURIComponent(X)),pageUrl:"".concat(encodeURIComponent(W)),domain:"".concat(encodeURIComponent(z)),channel:"".concat(L),from:"".concat(Y),version:VERSION$3,_dc:"".concat(Math.random())}},U.prototype.collectUsage=function(L){if(!this.isCollected){this.isCollected=!0;var Y=Object.keys(KernelFactory$3.kernelMap).join("$"),X=new Image;X.src="https://h.trace.qq.com/kv?".concat(urlTool$1.object2string(__assign$e(__assign$e({},L),{kernel:Y}),"&"))}},Object.defineProperty(U.prototype,"config",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.config)||this._config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"useWorker",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.useWorker)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"kernelName",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.kernelName},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElements",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoElements)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoElement",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.currentVideoElement},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.supportPreload)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.duration)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.playtime)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoInfos",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoInfos)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"preloadVideoInfos",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.preloadVideoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfoIdx",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.currentVideoInfoIdx)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"totalVideoInfoCount",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.totalVideoInfoCount)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.supportPlaybackRate)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"played",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.played)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.state)||VIDEO_STATE$1.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoSize)||{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoBuffered)||[]},enumerable:!1,configurable:!0}),U.prototype.captureVideo=function(L,Y,X,W,z){var J;return(J=this._kernel)===null||J===void 0?void 0:J.captureVideo(L,Y,X,W,z)},U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.log.apply(L,Y)},U.prototype.warn=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.warn.apply(L,Y)},U.prototype.error=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.error.apply(L,Y)},U.prototype.hasAppended=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.hasAppended(L))},U.prototype.hasPreloaded=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.hasPreloaded(L))},Object.defineProperty(U.prototype,"volume",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.volume)||this._volume},set:function(L){this._volume=L,this._kernel?this._kernel.volume=L:this.emit(PLAY_EVENT$1.VOLUME_CHANGE,{volume:L})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.playbackRate)||this._playbackRate},set:function(L){this._playbackRate=L,this._kernel?this._kernel.playbackRate=L:this.emit(PLAY_EVENT$1.RATE_CHANGE,{playbackRate:L})},enumerable:!1,configurable:!0}),U.prototype.resizeVideoElements=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.resizeVideoElements(L)},U.prototype.resize=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.resize(L)},U.prototype.seek=function(L){var Y;return(Y=this._kernel)===null||Y===void 0?void 0:Y.seek(L)},U.prototype.play=function(L,Y){var X;return __awaiter$8(this,void 0,void 0,function(){var W;return __generator$8(this,function(z){switch(z.label){case 0:return L?[4,this.checkWhetherNeedToSwitchKernel(L,Y)]:[3,2];case 1:if(W=z.sent().error,W)return this.emit(PLAY_EVENT$1.ERROR,{videoInfo:{error:W}}),[2,Promise.reject(W)];z.label=2;case 2:return[2,(X=this._kernel)===null||X===void 0?void 0:X.play(L,Y)]}})})},U.prototype.load=function(L,Y){var X;return __awaiter$8(this,void 0,void 0,function(){var W;return __generator$8(this,function(z){switch(z.label){case 0:return L?[4,this.checkWhetherNeedToSwitchKernel(L,Y)]:[3,2];case 1:if(W=z.sent().error,W)return this.emit(PLAY_EVENT$1.ERROR,{videoInfo:{error:W}}),[2,Promise.reject(W)];z.label=2;case 2:return[2,(X=this._kernel)===null||X===void 0?void 0:X.load(L,Y)]}})})},U.prototype.playNext=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.playNext(L)},U.prototype.pause=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.pause(L)},U.prototype.stop=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.stop(L)},U.prototype.appendNext=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.appendNext(L))},U.prototype.preloadNext=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];return(L=this._kernel)===null||L===void 0?void 0:L.preloadNext.apply(L,Y)},U.prototype.clearAllPreload=function(){var L;(L=this._kernel)===null||L===void 0||L.clearAllPreload()},U.prototype.triggerAutoplay=function(){var L=this,Y;if(!this._kernel){this._logger.log("triggerAutoplay(), start");var X=function(z){return new AutoPlayPolicy$1(z,{instanceId:L._config.instanceId}).userTrigger()},W=this._videoElements.map(X);return Promise.all(W)}return(Y=this._kernel)===null||Y===void 0?void 0:Y.triggerAutoplay()},U.prototype.setLevel=function(L,Y,X){return __awaiter$8(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$8(this,function(te){switch(te.label){case 0:return this._kernel?(W=typeof L=="string"?__assign$e(__assign$e({},X),{url:L}):L,z=this.currentVideoInfo,[4,this.checkWhetherNeedToSwitchKernel(W,null,!0)]):[2,Promise.reject("\u5207\u6362\u6E05\u6670\u5EA6\u65F6\u627E\u4E0D\u5230\u5185\u6838")];case 1:return J=te.sent(),Z=J.isKernelSwitched,ee=J.error,ee!=null&&ee.message?[2,Promise.reject(ee==null?void 0:ee.message)]:Z?[2,this.setLevelWhenKernelSwitched(__assign$e(__assign$e(__assign$e({},W),{backupUrls:Y}),X),z)]:typeof L=="string"?[2,this._kernel.setLevel(L,Y,X)]:[2,this._kernel.setLevel(L)]}})})},U.prototype.destroy=function(){var L,Y;this._videoElements&&(this._videoElements.forEach(function(X){videoTool$1.destroyElement(X)}),this._videoElements=null),!((L=this.videoElementsContainer)===null||L===void 0)&&L.parentNode&&this.videoElementsContainer.remove(),this._kernel&&(this.setKernelEvts(!1),(Y=this._kernel)===null||Y===void 0||Y.destroy(),this._kernel=null),this.removeAllListeners(),this._kernelEvtHandler=null,this._config=null},U.prototype.checkWhetherNeedToSwitchKernel=function(L,Y,X){return X===void 0&&(X=!1),__awaiter$8(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$8(this,function(te){switch(te.label){case 0:return W=L instanceof Array?L[0]:L,z=W.kernelName||(Y==null?void 0:Y.kernelName),J=KernelFactory$3.selectKernel(L,z),J?KernelFactory$3.kernelMap[J]?[3,2]:[4,this.loadKernel(J)]:[3,3];case 1:te.sent(),te.label=2;case 2:if(KernelFactory$3.kernelMap[J]&&!KernelFactory$3.kernelMap[J].isEnvSupport)return Z=getUrlConfigVideoType$1(W),[2,{isKernelSwitched:!1,error:{code:ERROR_CODE$1.KERNEL_NOT_SPT,message:J===KERNEL_NAME$1.ORIGIN?"\u65E0\u6CD5\u652F\u6301".concat(Z,"\u683C\u5F0F\u64AD\u653E"):"".concat(Z,"\u683C\u5F0F\u9700\u8981").concat(J,"\u5185\u6838\u64AD\u653E\uFF0C\u4F46\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u6B64\u5185\u6838")}}];te.label=3;case 3:return ee=KernelFactory$3.kernelMap[J]?J:KERNEL_NAME$1.ORIGIN,this._kernel&&this._kernel.kernelName!==ee&&(this._kernel.played&&!X&&this.emit(PLAY_EVENT$1.STOPED,{videoInfo:this._kernel.currentVideoInfo,endState:END_STATE$1.INTERRUPT}),this.setKernelEvts(!1),this._kernel.destroy(),this._kernel=null),this._kernel?[3,5]:[4,this.createKernel(ee)];case 4:return te.sent(),[2,{isKernelSwitched:!0,error:null}];case 5:return[2,{isKernelSwitched:!1,error:null}]}})})},U.prototype.loadKernel=function(L,Y){return Y===void 0&&(Y=3),__awaiter$8(this,void 0,void 0,function(){var X,W,z,J;return __generator$8(this,function(Z){switch(Z.label){case 0:return X=KERNEL_NAME_2_CDN_PATH_MAP[L],X?loadKernelDeferMap$1[L]?(this._logger.log("auto download kernel [".concat(X,"] has been started!")),[4,loadKernelDeferMap$1[L].promise]):[3,2]:[2,!1];case 1:return W=Z.sent(),this._logger.log("auto download kernel [".concat(X,"] succ=").concat(W)),[2,W];case 2:loadKernelDeferMap$1[L]=new SimpleDefer$1,this._logger.log("auto download kernel [".concat(X,"]")),z=!1,J=0,Z.label=3;case 3:if(!(J<Y))return[3,9];Z.label=4;case 4:return Z.trys.push([4,6,,7]),[4,domTool$1.loadScript(CDN_PATH_PREFIX$1+X)];case 5:return Z.sent(),this._logger.log("auto download kernel [".concat(X,"] succ=true")),z=!0,[3,7];case 6:return Z.sent(),z=!1,this._logger.error("auto download kernel [".concat(X,"] failed")),[3,7];case 7:if(z)return[3,9];Z.label=8;case 8:return J++,[3,3];case 9:return loadKernelDeferMap$1[L].resolve(z),[2,z]}})})},U.prototype.createKernel=function(L){this._kernel=KernelFactory$3.createKernel(L,this._config),typeof this._volume!="undefined"&&(this._kernel.volume=this._volume),typeof this._playbackRate!="undefined"&&(this._kernel.playbackRate=this._playbackRate),this.setKernelEvts(!0)},U.prototype.createVideoElements=function(){for(var L=this._config,Y=L.instanceId,X=L.videoElementConfig,W=L.maxVideoNodeCount,z=__assign$e(__assign$e({preload:this._config.preloadType===PRELOAD_TYPE$1.META_DATA?"metadata":"auto"},X),{playerid:Y}),J=0;J<W;J++){var Z=domTool$1.createVideoDom(z);this._videoElements.push(Z)}return this._videoElements},U.prototype.createVideoElementsContainer=function(){var L=this._config.container,Y=domTool$1.getElementFromConfig(L);this.videoElementsContainer=domTool$1.creatDom(`
      <div class="`.concat(VIDEO_CONTAINER_CLASS$1,`" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;">
      </div>
    `).trim()),domTool$1.append(Y,this.videoElementsContainer)},U.prototype.on=function(L,Y,X){return G.prototype.on.call(this,L,Y,X),this.proxyEvent(L),this},U.prototype.once=function(L,Y,X){return G.prototype.once.call(this,L,Y,X),this.proxyEvent(L,!0),this},U.prototype.setKernelEvts=function(L){var Y=this;if(!!this._kernel){L&&this.setKernelEvts(!1);var X=L?this._kernel.on:this._kernel.off;this._addedEvts.forEach(function(W){X.apply(Y._kernel,[W,Y._kernelEvtHandler])})}},U.prototype.kernelEvtHandler=function(L){if(this.setLevelWhenKernelSwitchedDefer){var Y=this.checkSetLevelOverWhenKernelSwitched(L);Y&&(this.setLevelWhenKernelSwitchedDefer=null)}else this.emit(L.type,L.data)},U.prototype.setLevelWhenKernelSwitched=function(L,Y){return this.emit(PLAY_EVENT$1.SETLEVEL_START,{videoInfo:Y,mode:SET_LEVEL_MODE$1.HARD}),this._kernel.play(L,{startTime:(Y==null?void 0:Y.playtime)||0}),this.setLevelWhenKernelSwitchedDefer=new SimpleDefer$1,this.setLevelWhenKernelSwitchedDefer.promise},U.prototype.checkSetLevelOverWhenKernelSwitched=function(L){var Y;return L.type===PLAY_EVENT$1.STATE_CHANGE&&L.data.new===VIDEO_STATE$1.PLAYING?(this.setLevelWhenKernelSwitchedDefer.resolve(),this.emit(PLAY_EVENT$1.SETLEVEL_OVER,{videoInfo:this.currentVideoInfo}),!0):L.type===PLAY_EVENT$1.ERROR?(this.setLevelWhenKernelSwitchedDefer.reject((Y=L.data.videoInfo)===null||Y===void 0?void 0:Y.error),this.emit(PLAY_EVENT$1.SETLEVEL_OVER,{videoInfo:this.currentVideoInfo,fail:!0}),!0):!1},U.prototype.proxyEvent=function(L,Y){if(Y===void 0&&(Y=!1),!this._addedEvts.includes(L)&&(this._addedEvts.push(L),!!this._kernel)){if(Y){this._kernel.once(L,this._kernelEvtHandler);return}this._kernel.on(L,this._kernelEvtHandler)}},U._isCollected=!1,__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[Object,Object]),__metadata$b("design:returntype",Promise)],U.prototype,"play",null),__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[Object,Object]),__metadata$b("design:returntype",Promise)],U.prototype,"load",null),__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[Object,Array,Object]),__metadata$b("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[]),__metadata$b("design:returntype",void 0)],U.prototype,"destroy",null),__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[Object,Object,Object]),__metadata$b("design:returntype",Promise)],U.prototype,"checkWhetherNeedToSwitchKernel",null),__decorate$b([logMethodCall$c,__metadata$b("design:type",Function),__metadata$b("design:paramtypes",[String]),__metadata$b("design:returntype",void 0)],U.prototype,"createKernel",null),U}(s$3),_a$9,UrlParamKey$2;(function(G){G.forceKernel="__forceKernel"})(UrlParamKey$2||(UrlParamKey$2={}));function assignApiToPrototype$1(G,U,L){for(var Y=Object.getPrototypeOf(G),X=Object.getOwnPropertyNames(U),W=0,z=L.length;W<z;W++){var J=L[W],Z=X.indexOf(J)!==-1;Z||typeof Y[J]!="function"||(U[J]=Y[J].bind(G))}}var KernelFactory$2=function(){function G(){}return G.registerKernel=function(U,L){if(!!this.kernelMap){if(this.kernelMap[U]&&L)throw new Error("".concat(U," has been registered!"));this.kernelMap[U]=L}},G.getKernelByName=function(U){return G.kernelMap[U]},G.create=function(U){return new KernelProxy$1(U)},G.createKernel=function(U,L){if(U){var Y=G.kernelMap[U];if(!Y)throw new Error("Can't find [".concat(U,"] kernel"));if(Y.isEnvSupport){var X=new Y(L);return Y.exportApis&&assignApiToPrototype$1(X,KernelProxy$1.prototype,Y.exportApis),X}window.console.log("Browser does not support kernelName[".concat(U,"]"))}return new G.kernelMap.origin(L)},G.checkKernelIsSupportUrlConfig=function(U,L){var Y=getUrlConfigVideoType$1(L),X=this.selectKernelWithAssign(U,Y);return!!X},G.selectKernel=function(U,L){var Y=U instanceof Array?U[0]:U,X=getUrlConfigVideoType$1(Y);return this.selectKernelFromUrl()||this.selectKernelWhenDrm(Y)||this.selectKernelWithAssign(L,X)||this.selectKernelIfSpecialVideoType(X)||L||this.selectKernelFromInstalledList(X)||this.selectKernelInPresetMap(X)},G.selectKernelFromUrl=function(){var U=urlTool$1.getUrlParamByKey(location.href,UrlParamKey$2.forceKernel);return U},G.selectKernelWhenDrm=function(U){var L;return[KeySystems$1.FairPlay,KeySystems$1.FairPlayWebKit].includes((L=U.drmConfig)===null||L===void 0?void 0:L.keySystem)?KERNEL_NAME$1.ORIGIN:U.vcodec===CODEC$1.H264&&U.chachaParam?KERNEL_NAME$1.HLS_JS:U.vcodec===CODEC$1.H265&&U.chachaParam?!uaTool$1.mobile&&uaTool$1.browser.safari?KERNEL_NAME$1.HLS_JS:KERNEL_NAME$1.WASM:null},G.selectKernelWithAssign=function(U,L){var Y;if(!U)return null;var X=G.getKernelByName(U);return!X||!X.isEnvSupport||X.canPlayType!==CAN_PLAY_ALL$1&&!(!((Y=X.canPlayType)===null||Y===void 0)&&Y.includes(L))?null:U},G.selectKernelIfSpecialVideoType=function(U){if(U==="hls"){var L=G.kernelMap[KERNEL_NAME$1.ORIGIN];if(L.canPlayType.includes(U))return KERNEL_NAME$1.ORIGIN}return null},G.selectKernelFromInstalledList=function(U){for(var L=KERNEL_NAME_BY_PRIORITY$1.filter(function(W){return!!G.kernelMap[W]}),Y=0;Y<L.length;Y++){var X=this.selectKernelWithAssign(L[Y],U);if(X)return X}return null},G.selectKernelInPresetMap=function(U){return VIDEO_TYPE_2_KERNEL_NAME_MAP$1[U]},G.kernelMap={},G}(),KernelFactory$3=KernelFactory$2,KERNEL_NAME$1;(function(G){G.ORIGIN="origin",G.DEMUX_2_FMP4="demux2fmp4",G.FLV_JS="flv.js",G.HLS_JS="hls.js",G.WASM="wasm"})(KERNEL_NAME$1||(KERNEL_NAME$1={}));var KERNEL_NAME_BY_PRIORITY$1=[KERNEL_NAME$1.HLS_JS,KERNEL_NAME$1.FLV_JS,KERNEL_NAME$1.DEMUX_2_FMP4,KERNEL_NAME$1.WASM,KERNEL_NAME$1.ORIGIN],VIDEO_TYPE_2_KERNEL_NAME_MAP$1={flv:KERNEL_NAME$1.FLV_JS,hls:KERNEL_NAME$1.HLS_JS},kernelCdnPrefix="core/".concat(LOCAL_DEV$1?"latest":VERSION$3),KERNEL_NAME_2_CDN_PATH_MAP=(_a$9={},_a$9[KERNEL_NAME$1.HLS_JS]="".concat(kernelCdnPrefix,"/txhlsjs-kernel.js"),_a$9[KERNEL_NAME$1.FLV_JS]="".concat(kernelCdnPrefix,"/flvjs-kernel.js"),_a$9[KERNEL_NAME$1.DEMUX_2_FMP4]="".concat(kernelCdnPrefix,"/demux2fmp4-kernel.js"),_a$9[KERNEL_NAME$1.WASM]="".concat(kernelCdnPrefix,"/wasm-kernel.js"),_a$9);function compareUrlConfig$1(G,U){return!G||!U?!1:!!(G.uid&&U.uid&&G.uid===U.uid||G===U)}function fileExtension2VideoType$1(G){return["m3u8","m3u"].indexOf(G)!==-1?"hls":G}function checkUrlConfigVailed$1(G,U){var L;if(!G)return{code:ERROR_CODE$1.NULL_URL,message:ERROR_MSG$1.NULL_URL,fatal:!0};var Y=(L=KernelFactory$3.getKernelByName(U))===null||L===void 0?void 0:L.canPlayType,X=function(Z,ee){var te=!Z.url;if(te)return{code:ERROR_CODE$1.NULL_URL,message:ERROR_MSG$1.NULL_URL,fatal:!0};if(!Z.url.startsWith("blob:")){var re=getUrlConfigVideoType$1(Z);if(re&&ee&&ee.indexOf(re)===-1){var ie=VIDEO_TYPE_2_KERNEL_NAME_MAP$1[re],ne="".concat(U!==KERNEL_NAME$1.ORIGIN?"".concat(U,"\u5185\u6838"):"","\u65E0\u6CD5\u64AD\u653E").concat(re,"\u683C\u5F0F")+"".concat(ie?"\uFF0C\u9700\u8981\u4F7F\u7528".concat(ie,"\u5185\u6838"):"");return{code:ERROR_CODE$1.MISSING_KERNEL,message:ne,fatal:!0}}}};if(G instanceof Array){for(var W=0,z=G.length;W<z;W++){var J=X(G[W],Y);if(J)return J}return}return X(G,Y)}function getUrlConfigVideoType$1(G){var U,L=(G||{}).url;if(!L||L.startsWith("blob:"))return"";var Y=urlTool$1.getFileExtension(L),X=(U=fileExtension2VideoType$1(Y))===null||U===void 0?void 0:U.toLocaleLowerCase();return X}var __assign$d=globalThis&&globalThis.__assign||function(){return __assign$d=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$d.apply(this,arguments)},GUID_LEN$1=8,VideoInfo$1=function(){function G(U,L){this.playtime=0,this.duration=0,this.performance={},this.startTime=0,this.state=VIDEO_STATE$1.IDLE,this.fileSize=0,this.videoWidth=0,this.videoHeight=0,this.hasFirstPlaying=!1,this.startPts=0,this.discontinuityTimeRanges=[],this._logger=new Logger$1(L.instanceId,"VideoInfo"),this._extraVars={},this._qualityInfo={},this._uid=comTool$1.createGUID(GUID_LEN$1),this._config=U,this._playerConfig=L,this.codecs=this._config.codec?__assign$d({},this._config.codec):{video:"",audio:""},this.reset(),this._logger.log("new VideoInfo(), uid: ".concat(this.uid))}return G.prototype.toJSON=function(){return this.serializedString()},G.prototype.toString=function(){return this.serializedString()},Object.defineProperty(G.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"qualityInfo",{get:function(){return this._qualityInfo},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uid",{get:function(){return this._uid},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"loadingUrl",{get:function(){return this._loadingUrl},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"extraVars",{get:function(){return this._extraVars},enumerable:!1,configurable:!0}),G.prototype.reset=function(){this._nextBackUrlIdx=0,this._retryCount=0,this.performance={},this._loadingUrl=this._config.url},G.prototype.setLoadingUrlStartTime=function(U){this._loadingUrl&&U>0&&(this._loadingUrl="".concat(this._loadingUrl.split("#t=")[0],"#t=").concat(U))},G.prototype.setDependVideoInfo=function(U){return this.startTime=U?U.startTime+U.duration:0,this._logger.log("setDependVideoInfo succ, uid/starttime: ".concat(this.uid,"/").concat(this.startTime)),!0},G.prototype.setNextBackUrl=function(){return!this._config.url||this._retryCount>=this._playerConfig.backupUrlsMaxRetryCount?!1:(this._retryCount++,this._config.backupUrls&&this._config.backupUrls.length>0?this._nextBackUrlIdx>=this._config.backupUrls.length?(this._loadingUrl=this._config.url,this._nextBackUrlIdx=0):(this._loadingUrl=this._config.backupUrls[this._nextBackUrlIdx],this._nextBackUrlIdx++):this._loadingUrl=this._config.url,!0)},G.prototype.getRetryCount=function(){return this._retryCount},G.prototype.destroy=function(){this.extraVars.stream=null},G.prototype.serializedString=function(){var U,L;return"VideoInfo{u:".concat(this._loadingUrl,",t:").concat(this.playtime,",s:").concat(this.state,",ec:").concat(((U=this.error)===null||U===void 0?void 0:U.code)||"",",em:").concat(((L=this.error)===null||L===void 0?void 0:L.message)||"",",r:").concat(this._nextBackUrlIdx,"}")},G}(),__extends$f=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$c=globalThis&&globalThis.__assign||function(){return __assign$c=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$c.apply(this,arguments)},__decorate$a=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$a=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},__awaiter$7=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$7=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},__spreadArray$3=globalThis&&globalThis.__spreadArray||function(G,U,L){if(L||arguments.length===2)for(var Y=0,X=U.length,W;Y<X;Y++)(W||!(Y in U))&&(W||(W=Array.prototype.slice.call(U,0,Y)),W[Y]=U[Y]);return G.concat(W||Array.prototype.slice.call(U))},logMethodCall$b=logMethodCallDecoratorCreator$1("BasePlayer"),BasePlayer$1=function(G){__extends$f(U,G);function U(L){var Y,X,W=G.call(this)||this;return W._firstPlaying=!1,W._hasUserGestures=!1,W._volume=1,W._playbackRate=1,W._playBlocking=!1,W._logger=new Logger$1(L.instanceId,"BasePlayer"),W._config=L,W._videoInfos=[],W._curUrlIdx=-1,W._curVideoNode=null,W._preloaders=[],W._vnList=[],W._eventMap={videonode:W.videonodeEventHandler.bind(W)},W._played=!1,W.videoEvt2PlayerEvtMap=(Y={},Y[VIDEO_NODE_EVENT$1.DURATION_CHANGE]=PLAY_EVENT$1.DURATION_CHANGE,Y[VIDEO_NODE_EVENT$1.VOLUME_CHANGE]=PLAY_EVENT$1.VOLUME_CHANGE,Y[VIDEO_NODE_EVENT$1.ERROR]=PLAY_EVENT$1.ERROR,Y[VIDEO_NODE_EVENT$1.METADATA_CHANGE]=PLAY_EVENT$1.METADATA_CHANGE,Y[VIDEO_NODE_EVENT$1.SETLEVEL_OVER]=PLAY_EVENT$1.SETLEVEL_OVER,Y[VIDEO_NODE_EVENT$1.SETLEVEL_START]=PLAY_EVENT$1.SETLEVEL_START,Y[VIDEO_NODE_EVENT$1.SET_LOADING]=PLAY_EVENT$1.SET_LOADING,Y[VIDEO_NODE_EVENT$1.STATE_CHANGE]=PLAY_EVENT$1.STATE_CHANGE,Y[VIDEO_NODE_EVENT$1.TIME_UPDATE]=PLAY_EVENT$1.TIME_UPDATE,Y[VIDEO_NODE_EVENT$1.VIDEO_BUFFER_CHANGE]=PLAY_EVENT$1.VIDEO_BUFFER_CHANGE,Y[VIDEO_NODE_EVENT$1.LOAD_PROGRESS]=PLAY_EVENT$1.LOAD_PROGRESS,Y[VIDEO_NODE_EVENT$1.FIRST_PLAYING]=PLAY_EVENT$1.VIDEONODE_FIRST_PLAYING,Y[VIDEO_NODE_EVENT$1.RATE_CHANGE]=PLAY_EVENT$1.RATE_CHANGE,Y[VIDEO_NODE_EVENT$1.RETRY]=PLAY_EVENT$1.RETRY_BACKURL,Y[VIDEO_NODE_EVENT$1.ELEMENT_EVTS]=PLAY_EVENT$1.ELEMENT_EVTS,Y[VIDEO_NODE_EVENT$1.PLAY_OVER]=PLAY_EVENT$1.STOPED,Y[VIDEO_NODE_EVENT$1.VIDEO_RESIZE]=PLAY_EVENT$1.VIDEO_RESIZE,Y),W.videoEvtHandlerMap=(X={},X[VIDEO_NODE_EVENT$1.STATE_CHANGE]=W.onVideoNodeStateChange.bind(W),X[VIDEO_NODE_EVENT$1.PLAY_PROMISE_CATCHED]=W.onVideoNodePlayPromiseCatched.bind(W),X[VIDEO_NODE_EVENT$1.FIRST_PLAYING]=W.onVideoNodeFirstPlaying.bind(W),X[VIDEO_NODE_EVENT$1.PLAY_OVER]=W.onVideoNodePlayOver.bind(W),X[VIDEO_NODE_EVENT$1.ERROR]=W.onVideoNodeError.bind(W),X),W._config.createVideoNodeWhenLoad||W.createVideoNodes(W._config.maxVideoNodeCount),W}return U.prototype.decideSetLevelMode=function(){return this._vnList.length<2?SET_LEVEL_MODE$1.HARD:SET_LEVEL_MODE$1.SOFT},U.prototype.createVideoNode=function(L){return new OrgVideoNode$1(L)},U.prototype.createVideoNodes=function(L){for(var Y=0;Y<L;Y++){var X=this.createVideoNode(this._config);X.idx=Y,X.volume=this._volume,X.playbackRate=this._playbackRate,X.videoElement instanceof HTMLElement&&(X.videoElement.dataset.idx="".concat(Y)),this._vnList.push(X)}},U.prototype.createStream=function(L){return null},U.prototype.setPlayEvents=function(L,Y){var X=this;!L||(Y&&this.setPlayEvents(L,!1),this._logger.log("set VideoNode evts, idx=".concat(L.idx,"/value=").concat(Y)),Object.keys(VIDEO_NODE_EVENT$1).forEach(function(W){var z=Y?L.on:L.off;z.apply(L,[VIDEO_NODE_EVENT$1[W],X._eventMap.videonode])}))},U.prototype.videonodeEventHandler=function(L){this.logVideoNodeEvts(L);var Y=!0;this.videoEvtHandlerMap[L.type]&&(Y=this.videoEvtHandlerMap[L.type](L)),Y&&L.type in this.videoEvt2PlayerEvtMap&&this.emit(this.videoEvt2PlayerEvtMap[L.type],L.data)},U.prototype.onVideoNodeStateChange=function(L){return L.data.new===VIDEO_STATE$1.PAUSE&&L.data.pauseType===PAUSE_TYPE$1.INNER?(this._logger.log("inner pause does not emit event."),!1):(L.data.new===VIDEO_STATE$1.PLAYING&&(this._checkPlayBlocked=!1),!0)},U.prototype.onVideoNodePlayPromiseCatched=function(L){return this._checkPlayBlocked&&L.data.isAutoPlayBlocked&&(this._checkPlayBlocked=!1,this.playBlocked()),!0},U.prototype.onVideoNodeFirstPlaying=function(L){return this._firstPlaying||(this.emit(PLAY_EVENT$1.FIRST_PLAYING,{videoInfo:this.currentVideoInfo}),this._firstPlaying=!0,this._hasUserGestures=!0),!0},U.prototype.onVideoNodePlayOver=function(L){if(!this._config.isPlayList&&!this.nextVideoInfo){var Y=this.currentVideoInfo;this.stopInner(END_STATE$1.NORMAL,!0,Y),this.emit(PLAY_EVENT$1.VIDEONODE_PLAY_OVER,{videoInfo:Y})}else this.emit(PLAY_EVENT$1.VIDEONODE_PLAY_OVER,{videoInfo:this.currentVideoInfo}),this.checkPlayNext();return!1},U.prototype.onVideoNodeError=function(L){var Y;return this.stopInner(END_STATE$1.ERROR,!0,(Y=L.data)===null||Y===void 0?void 0:Y.videoInfo),!1},U.prototype.logVideoNodeEvts=function(L){var Y,X;if(!(L.type===VIDEO_NODE_EVENT$1.TIME_UPDATE||L.type===VIDEO_NODE_EVENT$1.VIDEO_BUFFER_CHANGE)&&!(L.type===VIDEO_NODE_EVENT$1.ELEMENT_EVTS&&(L.data.elementEvtType===VIDEO_EVTS$1.timeupdate||L.data.elementEvtType===VIDEO_EVTS$1.progress))){var W=L.data;L.type===VIDEO_NODE_EVENT$1.STATE_CHANGE?W="[".concat(L.data.old,"->").concat(L.data.new,"]"):L.type===VIDEO_NODE_EVENT$1.ELEMENT_EVTS&&(W="[elementEvtType=".concat(L.data.elementEvtType,"]")),this._logger.log("get VideoNode evt, type=".concat(L.type,"/uid=").concat((X=(Y=this._curVideoNode)===null||Y===void 0?void 0:Y.currentVideoInfo)===null||X===void 0?void 0:X.uid,"/data="),W)}},U.prototype.playBlocked=function(){var L=this;this._playBlocking=!0,this._triggerAutoplayPromise=null,setTimeout(function(){L.emit(PLAY_EVENT$1.AUTOPLAY_BLOCKED,{videoInfo:L.currentVideoInfo})},0),this.setLoading(!1)},U.prototype.setLoading=function(L){this.emit(PLAY_EVENT$1.SET_LOADING,{show:L})},U.prototype.captureVideo=function(L,Y,X,W,z){var J,Z=this.currentVideoElement;if(!!Z){if(Z instanceof HTMLVideoElement)try{var ee=videoTool$1.captureVideo(Z,{dx:L,dy:Y,dw:X,dh:W});return Promise.resolve(ee)}catch(te){return Promise.reject(te)}return(J=Z.captureVideo)===null||J===void 0?void 0:J.call(Z,L,Y,X,W)}},U.prototype.triggerAutoplay=function(){var L=this;if(this._triggerAutoplayPromise)return this._triggerAutoplayPromise;this._logger.log("triggerAutoplay(), start");for(var Y=[],X=this._vnList.length,W=0;W<X;W++){var z=this._vnList[W].triggerAutoplay();Y.push(z)}return this._triggerAutoplayPromise=Promise.all(Y),this._triggerAutoplayPromise.catch(function(J){L._logger.log("play() triggerAutoplay catched: ",J),L.playBlocked()}),this._triggerAutoplayPromise},Object.defineProperty(U.prototype,"useWorker",{get:function(){return this._curVideoNode?this._curVideoNode.useWorker:!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElements",{get:function(){var L;return(L=this._vnList)===null||L===void 0?void 0:L.map(function(Y){return Y.videoElement})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoElement",{get:function(){return this._curVideoNode?this._curVideoNode.videoElement:null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoInfos",{get:function(){return this._videoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"preloadVideoInfos",{get:function(){return this._preloaders.map(function(L){return L.videoInfo})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){return this._curVideoNode?this._curVideoNode.videoSize:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){return this._curVideoNode?this._curVideoNode.videoBuffered:[{start:0,end:0}]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){return this._curVideoNode?this._curVideoNode.currentVideoInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nextVideoInfo",{get:function(){return this._videoInfos[this._curUrlIdx+1]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfoIdx",{get:function(){return this._curVideoNode?this._videoInfos.indexOf(this._curVideoNode.currentVideoInfo):-1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"totalVideoInfoCount",{get:function(){return this._videoInfos.length},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),U.prototype.resizeVideoElements=function(L){var Y=this.videoElements;!L||!Y||Y.length<=0||(Y.forEach(function(X){videoTool$1.resizeElement(X,L)}),this.emit(PLAY_EVENT$1.RESIZE,L))},U.prototype.resize=function(L){this.resizeVideoElements(L)},U.prototype.hasAppended=function(L){return!!this._videoInfos.find(function(Y){return compareUrlConfig$1(Y.config,L)})},U.prototype.hasPreloaded=function(L){return!!this.preloadVideoInfos.find(function(Y){return compareUrlConfig$1(Y.config,L)})},U.prototype.seek=function(L){var Y;return this.state===VIDEO_STATE$1.IDLE||L<0||!(!((Y=this._curVideoNode)===null||Y===void 0)&&Y.currentVideoInfo)?!1:this._curVideoNode.seek(L,!0)},U.prototype.pause=function(L){if(!this._played){this._logger.warn("pause(), player has not been played");return}this.pauseInner(L||PAUSE_TYPE$1.USER)},U.prototype.pauseInner=function(L){L===void 0&&(L=PAUSE_TYPE$1.INNER),this.state!==VIDEO_STATE$1.PAUSE&&this._curVideoNode&&this._curVideoNode.pauseInner(L)},Object.defineProperty(U.prototype,"played",{get:function(){return this._played},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){return this._curVideoNode?this._curVideoNode.duration:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){return this._curVideoNode?this._curVideoNode.playtime:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this._curVideoNode?this._curVideoNode.state:VIDEO_STATE$1.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(L){this._playbackRate=L;for(var Y=this._vnList.length,X=0;X<Y;X++)this._vnList[X].playbackRate=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._volume},set:function(L){this._volume=L;for(var Y=this._vnList.length,X=0;X<Y;X++)this._vnList[X].volume=L},enumerable:!1,configurable:!0}),U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.log.apply(L,Y)},U.prototype.resumeInner=function(){var L;!this._played||((L=this._curVideoNode)===null||L===void 0?void 0:L.currentVideoInfo)&&(this._curVideoNode.duration===0||this._curVideoNode.playtime<this._curVideoNode.duration)&&this._curVideoNode.videoplay()},U.prototype.appendNext=function(L){if(!this._config.isPlayList){this._logger.warn("appendNext() only supported when [isPlayList] is true");return}if(!this._played){this._logger.warn("appendNext(), player has not been played");return}var Y=checkUrlConfigVailed$1(L,this.kernelName);if(Y){this._logger.warn("appendNext(), urlconfig err=",Y);return}var X=this._videoInfos.find(function(z){return compareUrlConfig$1(z.config,L)});if(X)return this._logger.warn("appendNext(), duplicate append! uid[".concat(X.uid,"]")),!1;var W=this.preloadVideoInfos.find(function(z){return compareUrlConfig$1(z.config,L)});return W||(W=new VideoInfo$1(L,this._config)),this.clearAllPreloadInner(W),this._videoInfos=this._videoInfos.slice(0,this._curUrlIdx+1),this._videoInfos=this._videoInfos.concat(W),this._logger.log("appendNext() succ, appendVideoInfo=",W),this.emit(PLAY_EVENT$1.LIST_CHANGE),this.appendAfter(W),!0},U.prototype.preloadNext=function(){for(var L=this,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];if(!this._config.isPlayList){this._logger.warn("preloadNext() only supported when [isPlayList] is true");return}if(!this.supportPreload){this._logger.warn("preloadNext() fail, browser not support preload.");return}if(!this._played){this._logger.warn("preloadNext() fail, player has not been played.");return}var W=checkUrlConfigVailed$1(Y,this.kernelName);if(!W){var z=[];Y.forEach(function(J){var Z=L._videoInfos.findIndex(function(te){return compareUrlConfig$1(te.config,J)});if(Z!==-1&&Z<=L._curUrlIdx){L._logger.warn("preloadInner() fail, because this videoInfo has been played.");return}if(Z!==-1&&Z>=L._curUrlIdx+1+1){L._logger.warn("preloadInner() fail, can not skip next to preload.");return}if(L.nextVideoInfo&&!compareUrlConfig$1(L.nextVideoInfo.config,J)){L._logger.warn("preloadInner() fail, the next has been appended, you only can preload next.");return}var ee=L.preloadVideoInfos.findIndex(function(te){return compareUrlConfig$1(te.config,J)})!==-1;if(ee){L._logger.warn("preloadInner() fail, the VideoInfo has been preloaded.");return}L.nextVideoInfo&&compareUrlConfig$1(J,L.nextVideoInfo.config)?z.push(L.nextVideoInfo):z.push(new VideoInfo$1(J,L._config))}),this.preloadInner.apply(this,__spreadArray$3([!1,{startTime:0,kernelName:this.kernelName}],z,!1))}},U.prototype.preloadInner=function(L,Y){for(var X=[],W=2;W<arguments.length;W++)X[W-2]=arguments[W];var z=[],J=X.length;if(!(J<=0)){for(var Z=0;Z<J;Z++)if(!!X[Z]){this.clearPreloader(X[Z]);var ee=this.preparePreloader(L,X[Z]);ee&&(X[Z].setDependVideoInfo(this.currentVideoInfo),ee.load(L,this,X[Z],Y),z.push(ee))}this._preloaders=this._preloaders.concat(z),this._logger.log("preload(), preloader's length: ",this._preloaders.length),z.length>0&&this.emit(PLAY_EVENT$1.PRELOAD_START,{preloadVideoInfos:z.map(function(te){return te.videoInfo})})}},U.prototype.checkPlayNext=function(){var L;!this._played||(this._logger.log("checkPlayNext(), curUrlIdx=".concat(this._curUrlIdx,"/urlLength=").concat(this._videoInfos.length,"/")+"nextStartTime: ".concat((L=this.nextVideoInfo)===null||L===void 0?void 0:L.playtime)),this.nextVideoInfo?this.playNextInner():this._logger.log("playlist over>>>, total len: ",this._videoInfos.length))},U.prototype.playNext=function(L){if(!this._played){this._logger.warn("playNext(), player has not been played");return}this.playNextInner({isInterrupt:!0})},U.prototype.playNextInner=function(L){var Y=(L||{}).isInterrupt;this._logger.log("playNextInner(), curUrlIdx=".concat(this._curUrlIdx,"/")+"urlLength=".concat(this._videoInfos.length,"/isInterrupt=").concat(Y));var X=Math.abs(this.playtime-this.duration)<=this._config.interruptPlayNextMinTime;if(Y&&X&&this.state===VIDEO_STATE$1.PLAYING){this._logger.log("playNextInner(), playNext right now! return!");return}if(this._curUrlIdx+1>=this._videoInfos.length){this._logger.warn("There is no next VideoInfo.");return}this._curUrlIdx+=1,this.setPlayEvents(this._curVideoNode,!1),Y&&this._curVideoNode.pauseInner();var W=this._videoInfos[this._curUrlIdx];this.clearAllPreloadInner(W),Y&&this.emit(PLAY_EVENT$1.VIDEONODE_PLAY_OVER,{videoInfo:this.currentVideoInfo}),this.playInner()},U.prototype.play=function(L,Y){return __awaiter$7(this,void 0,void 0,function(){var X,W,z=this;return __generator$7(this,function(J){return this.state===VIDEO_STATE$1.IDLE&&!L?(this._logger.warn("play(), no urlConfig when idle state"),[2]):(X=function(){if(!z._played&&z._curUrlIdx===-1){var Z=z._videoInfos[0],ee=!z.supportPreload||z.findPreloadIdxByVideoInfo(Z)!==1;Z&&ee&&(z._played=!0,z._curUrlIdx=0,z.playInner())}},W=function(){if(z._logger.log("triggerAutoplay(), over"),!L)z._played?z._playBlocking||videoTool$1.cannotDetectAutoPlayBlock()?(z._playBlocking=!1,setTimeout(function(){var ee,te;((te=(ee=z._curVideoNode)===null||ee===void 0?void 0:ee.videoBuffered)===null||te===void 0?void 0:te.length)<=0&&z.setLoading(!0),z.resumeInner()},0)):[VIDEO_STATE$1.PAUSE,VIDEO_STATE$1.CANPLAY,VIDEO_STATE$1.SEEKED].indexOf(z.state)!==-1?z.resumeInner():z._logger.log("play() has been called, but cannot do nothing."):(z.setLoading(!0),X());else{var Z=z.loadInner(L,Y);Z&&(z.setLoading(!0),X())}},this._checkPlayBlocked=!0,this._vnList.length<=1||this._hasUserGestures?(this._logger.log("play(), skip triggerAutoplay()."),W()):this.triggerAutoplay().then(W).catch(function(){z._config.type===PLAY_MODE$1.VOD&&L&&!videoTool$1.notSupportLoadBeforeHasUserGestures()&&z.loadInner(L,Y)}),[2])})})},U.prototype.load=function(L,Y){return __awaiter$7(this,void 0,void 0,function(){return __generator$7(this,function(X){return!L||L instanceof Array&&L.length<=0?(this.clearBeforeLoad(),[2]):(this.loadInner(L,Y),[2])})})},U.prototype.loadInner=function(L,Y){var X=this;this.clearBeforeLoad();var W=checkUrlConfigVailed$1(L,this.kernelName);if(W)return this.emit(PLAY_EVENT$1.ERROR,{videoInfo:{error:W}}),!1;this._config.createVideoNodeWhenLoad&&(this._vnList.forEach(function(ee){return ee.destroy()}),this._vnList.length=0,this.createVideoNodes(this._config.maxVideoNodeCount)),this.emit(PLAY_EVENT$1.RESTART);var z=(Y||{}).startTime,J=z===void 0?0:z;this._firstPlayTimeArg=Math.max(0,J),this._videoInfos=[].concat(L).map(function(ee){return new VideoInfo$1(ee,X._config)}),this.emit(PLAY_EVENT$1.LIST_CHANGE);var Z=this._videoInfos[0];return this.preloadInner(!0,__assign$c(__assign$c({},Y),{startTime:J,kernelName:this.kernelName}),Z),!0},U.prototype.clearBeforeLoad=function(){var L;(L=this._vnList)===null||L===void 0||L.forEach(function(Y){videoTool$1.clear(Y.videoElement)}),this.stopInner(this._played?END_STATE$1.INTERRUPT:END_STATE$1.NORMAL,this._played,this._played?this.currentVideoInfo:null)},U.prototype.checkAutoPreloadNext=function(L){var Y=this.currentVideoInfo.config.autoPreloadLeftTime;Y<=0||(Y>=this.currentVideoInfo.duration&&this.currentVideoInfo.playtime>0||Y>=L)&&this.nextVideoInfo&&this.preloadVideoInfos.indexOf(this.nextVideoInfo)===-1&&this.preloadInner(!1,{startTime:0,kernelName:this.kernelName},this.nextVideoInfo)},U.prototype.clearAllPreload=function(){this.clearAllPreloadInner()},U.prototype.clearAllPreloadInner=function(L){var Y=this;if(!(!this._preloaders||this._preloaders.length<=0)){var X=this._preloaders.filter(function(W){return W.videoInfo!==L});X.forEach(function(W){Y.clearPreloader(W.videoInfo)})}},U.prototype.findPreloadIdxByVideoInfo=function(L){return L?this._preloaders.findIndex(function(Y){return Y.videoInfo===L}):-1},U.prototype.clearPreloader=function(L,Y){if(!(!this._preloaders||this._preloaders.length<=0)&&!!L){var X=this.findPreloadIdxByVideoInfo(L);if(X!==-1&&X!==-1){var W=this._preloaders.splice(X,1)[0];W.clear(Y)}}},U.prototype.stop=function(L){L===void 0&&(L=END_STATE$1.INTERRUPT),this.state!==VIDEO_STATE$1.IDLE&&this.stopInner(L,!0)},U.prototype.stopInner=function(L,Y,X){var W;L===void 0&&(L=END_STATE$1.NORMAL),Y===void 0&&(Y=!1),X===void 0&&(X=null),((W=this._config)===null||W===void 0?void 0:W.type)===PLAY_MODE$1.VOD&&this.clearAllPreloadInner();var z=this._videoInfos;if(this._videoInfos=[],this._vnList)for(var J=this._vnList.length,Z=0;Z<J;Z++)this._vnList[Z].stop(),this.setPlayEvents(this._vnList[Z],!1);this._curUrlIdx=-1,z&&z.forEach(function(re){re.destroy()}),this._firstPlaying=!1,this._played=!1,this._curVideoNode=null;var ee=X==null?void 0:X.error,te=ee?END_STATE$1.ERROR:L;this._logger.log("stopInner(), endState=".concat(te)),Y&&(this.emit(PLAY_EVENT$1.STOPED,{videoInfo:X,isUserStop:L===END_STATE$1.INTERRUPT,endState:te}),ee&&this.emit(PLAY_EVENT$1.ERROR,{videoInfo:X}))},U.prototype.checkSetLevelError=function(L){return this._played?L?this.currentVideoInfo?this.currentVideoInfo.playtime<=0?"\u64AD\u653E\u672A\u5F00\u59CB":this._config.type===PLAY_MODE$1.VOD&&this.currentVideoInfo.playtime+1>=this.currentVideoInfo.duration&&this.currentVideoInfo.duration!==1/0?"\u64AD\u653E\u5373\u5C06\u7ED3\u675F":L===this.currentVideoInfo.loadingUrl?"\u5207\u6362\u7684\u89C6\u9891\u5730\u5740\u6CA1\u6709\u53D8\u5316":null:"\u627E\u4E0D\u5230\u5F53\u524D\u64AD\u653E\u4FE1\u606F":"\u5207\u6362\u7684\u89C6\u9891\u5730\u5740\u4E3A\u7A7A":"\u64AD\u653E\u672A\u5F00\u59CB"},U.prototype.setLevel=function(L,Y,X){var W;typeof L=="string"?W=L:(W=L.url,Y=L.backupUrls,X=L);var z=this.checkSetLevelError(W);return z?(this._logger.warn("setLevel(), ".concat(z)),Promise.reject(new Error(z))):(this._urlBeforeSetLevel={url:W,backupUrls:Y},this.currentVideoInfo.config.url=W,Y&&(this.currentVideoInfo.config.backupUrls=Y),X&&Object.assign(this.currentVideoInfo.config,X),this.currentVideoInfo.reset(),this.setLevelInner(this.currentVideoInfo.config))},U.prototype.setCurVideoNode=function(L,Y){Y===void 0&&(Y=!1),!(this._curVideoNode===L&&!Y)&&(this._curVideoNode&&(this._curVideoNode.onAccurateTimeupdate=null,this.setPlayEvents(this._curVideoNode,!1)),L&&(this._curVideoNode=L,this._curVideoNode.onAccurateTimeupdate=this.checkAccuratePlaytime.bind(this),this.setPlayEvents(this._curVideoNode,!0)))},U.prototype.destroy=function(){if(this.stopInner(),this._vnList)for(var L=this._vnList.length,Y=0;Y<L;Y++)this._vnList[Y].destroy();this._preloaders&&(this._preloaders.forEach(function(X){X.clear()}),this._preloaders=null),this.removeAllListeners(),this._videoInfos=null,this._curVideoNode=null,this._vnList=null,this._eventMap=null},__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[]),__metadata$a("design:returntype",void 0)],U.prototype,"playBlocked",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object]),__metadata$a("design:returntype",void 0)],U.prototype,"resizeVideoElements",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Number]),__metadata$a("design:returntype",void 0)],U.prototype,"seek",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[]),__metadata$a("design:returntype",void 0)],U.prototype,"resumeInner",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object]),__metadata$a("design:returntype",void 0)],U.prototype,"appendNext",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object]),__metadata$a("design:returntype",void 0)],U.prototype,"preloadNext",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Boolean,Object,Object]),__metadata$a("design:returntype",void 0)],U.prototype,"preloadInner",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[]),__metadata$a("design:returntype",void 0)],U.prototype,"checkPlayNext",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object]),__metadata$a("design:returntype",void 0)],U.prototype,"playNext",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object]),__metadata$a("design:returntype",void 0)],U.prototype,"playNextInner",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object,Object]),__metadata$a("design:returntype",Promise)],U.prototype,"play",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object,Object]),__metadata$a("design:returntype",Promise)],U.prototype,"load",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[String]),__metadata$a("design:returntype",void 0)],U.prototype,"stop",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[String,Object,Object]),__metadata$a("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[Object,Array,Object]),__metadata$a("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$a([logMethodCall$b,__metadata$a("design:type",Function),__metadata$a("design:paramtypes",[]),__metadata$a("design:returntype",void 0)],U.prototype,"destroy",null),U}(s$3),__assign$b=globalThis&&globalThis.__assign||function(){return __assign$b=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$b.apply(this,arguments)},defaultOriginKernelConfig$1={maxVideoNodeCount:1,advanceEndTime:uaTool$1.browser.x5?.1:0,prePlayNextTime:uaTool$1.browser.x5?.2:0};function mergeKernelConfig$1(G){return __assign$b(__assign$b({},G),{originKernelConfig:__assign$b(__assign$b({},defaultOriginKernelConfig$1),G.originKernelConfig)})}var __decorate$9=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$9=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$a=logMethodCallDecoratorCreator$1("OrgPreLoader"),OrgPreLoader$1=function(){function G(U){var L;this.playerConfig=U,this._defer=new SimpleDefer$1,this._logger=new Logger$1(U.instanceId,"OrgPreLoader"),this._evtMaps=(L={},L[VIDEO_NODE_EVENT$1.STATE_CHANGE]=this.firstLoadStateChangeHandler.bind(this),L[VIDEO_NODE_EVENT$1.ERROR]=this.errorHandler.bind(this),L)}return Object.defineProperty(G.prototype,"promise",{get:function(){return this._defer.promise},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"videoInfo",{get:function(){return this._videoInfo},enumerable:!1,configurable:!0}),G.prototype.getVideoNode=function(){var U;return(U=this._videoInfo)===null||U===void 0?void 0:U.extraVars.preloadVideoNode},G.prototype.errorHandler=function(U){this.preloadFail(U.data.videoInfo.error)},G.prototype.firstLoadStateChangeHandler=function(U){U.data.new===VIDEO_STATE$1.CANPLAY&&this.preloadSucc()},G.prototype.preloadSucc=function(){this._logger.log("preload url ready>>>>>> uid=".concat(this._videoInfo.uid)),this.clearInner(!0),this._evtDispatcher.emit(PLAY_EVENT$1.PRELOAD_VIDEONODE_OVER,{videoInfo:this._videoInfo}),this._defer.resolve()},G.prototype.preloadFail=function(U){this._logger.log("preload url fail>>>>>> uid: ".concat(this._videoInfo.uid)),this.clearInner(),this._evtDispatcher.emit(PLAY_EVENT$1.PRELOAD_VIDEONODE_ERROR,{videoInfo:this._videoInfo}),this._videoInfo.error=U,this._defer.reject(U)},G.prototype.setVideoNodeEvents=function(U){var L=this,Y=this.getVideoNode();Object.keys(this._evtMaps).forEach(function(X){U?Y.on(X,L._evtMaps[X]):Y.off(X,L._evtMaps[X])})},G.prototype.load=function(U,L,Y,X){this._videoInfo=Y,this._evtDispatcher=L,this.setVideoNodeEvents(!0),this._logger.log("load(), isFirstLoad=".concat(U)),this.getVideoNode().load(Y,X)},G.prototype.clearInner=function(U,L){if(!!this._videoInfo){var Y=this.getVideoNode();!Y||(this._logger.log("clear(), uid=".concat(this._videoInfo.uid,"/keep=").concat(U)),this.setVideoNodeEvents(!1),U||(this._videoInfo.extraVars.preloadVideoNode=null,Y.stop()),L&&this._evtDispatcher.emit(PLAY_EVENT$1.PRELOAD_VIDEONODE_CLEAR,{videoInfo:this._videoInfo}))}},G.prototype.clear=function(U){this.clearInner(U,!0)},__decorate$9([logMethodCall$a,__metadata$9("design:type",Function),__metadata$9("design:paramtypes",[Boolean,s$3,Object,Object]),__metadata$9("design:returntype",void 0)],G.prototype,"load",null),__decorate$9([logMethodCall$a,__metadata$9("design:type",Function),__metadata$9("design:paramtypes",[Boolean]),__metadata$9("design:returntype",void 0)],G.prototype,"clear",null),G}(),__extends$e=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__decorate$8=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$8=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$9=logMethodCallDecoratorCreator$1("MultiPlayer"),MultiPlayer$1=function(G){__extends$e(U,G);function U(L){var Y,X=G.call(this,mergeKernelConfig$1(L))||this;return X._needHideVideoNode=null,X._videonodeEventMap=(Y={},Y[VIDEO_NODE_EVENT$1.STATE_CHANGE]=X.onCurVideoNodeStateChange.bind(X),Y),X}return Object.defineProperty(U,"canPlayType",{get:function(){return videoTool$1.supportVideoFormat()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){return videoTool$1.supportSameTimePlay()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"kernelName",{get:function(){return KERNEL_NAME$1.ORIGIN},enumerable:!1,configurable:!0}),U.prototype.seek=function(L){return this.getLevelSwitching()?!1:G.prototype.seek.call(this,L)},U.prototype.createVideoNodes=function(L){G.prototype.createVideoNodes.call(this,L);for(var Y=0;Y<this._vnList.length;Y++){var X=this._vnList[Y];Y===0?this._firstVideoNode=X:this.visibleVideoNode(X,!1)}},U.prototype.videonodeEventHandler=function(L){this._videonodeEventMap[L.type]&&this._videonodeEventMap[L.type](L),G.prototype.videonodeEventHandler.call(this,L)},U.prototype.onCurVideoNodeStateChange=function(L){if(L.data.new===VIDEO_STATE$1.PLAYING&&(this.switchVideoNode(),!this.currentVideoInfo.extraVars.isStartPlay)){this.currentVideoInfo.extraVars.isStartPlay=!0;var Y=this.currentVideoInfo?this.currentVideoInfo.uid:null;this._logger.log("videoNodeStartPlay: uid[".concat(Y,"]")),this.emit(PLAY_EVENT$1.VIDEONODE_START_PLAY,{videoInfo:this.currentVideoInfo})}},U.prototype.onVideoNodeStateChange=function(L){return this.getLevelSwitching()&&!VALID_STATE_IN_LEVEL_SWITCHING$1.includes(L.data.new)?!1:G.prototype.onVideoNodeStateChange.call(this,L)},U.prototype.pauseInner=function(L){if(L===void 0&&(L=PAUSE_TYPE$1.INNER),this._prePlayNext){this._logger.warn("pause when preplaynext, return!!");return}G.prototype.pauseInner.call(this,L)},U.prototype.resumeInner=function(){if(this.getLevelSwitching()){this._setLevelVideoNode.play();return}G.prototype.resumeInner.call(this)},U.prototype.loadInner=function(L,Y){for(var X,W=((X=this._vnList)===null||X===void 0?void 0:X.length)||0,z=0;z<W;z++)this.visibleVideoNode(this._vnList[z],!1);return G.prototype.loadInner.call(this,L,Y)},U.prototype.playInner=function(L){var Y=this;if(this.getLevelSwitching()){this._setLevelVideoNode.play(),this._logger.log("play(), setlevel");return}if(this._videoInfos.length<=0||!this._videoInfos[this._curUrlIdx]){this._logger.warn("play(), !videoInfo");return}var X=this._videoInfos[this._curUrlIdx],W=this._curVideoNode?this._curVideoNode.state:VIDEO_STATE$1.IDLE,z=this.findPreloadIdxByVideoInfo(X),J=function(te){var re,ie,ne;Y._logger.log("playInner(), playImpl(), preloadSucc=".concat(te));var oe=z!==-1?(ie=(re=Y._preloaders[z])===null||re===void 0?void 0:re.videoInfo)===null||ie===void 0?void 0:ie.extraVars.preloadVideoNode:null,se,ae=!1;if(se=oe,se||(se=Y.getIdleVideoNode()),!se&&Y._curVideoNode&&Y._curVideoNode.state===VIDEO_STATE$1.IDLE&&(se=Y._curVideoNode,ae=!0),se||Y._logger.warn("can not find idle videonode!"),Y.setCurVideoNode(se,ae),z!==-1){var le=Y._preloaders.splice(z,1)[0];le.clear(!0)}Y._needHideVideoNode?Y._needHideVideoNode===Y._curVideoNode?(Y.visibleVideoNode(Y._curVideoNode,!0),Y._logger.log("visibleVideoNode, need==current")):te&&Y.switchVideoNode():(Y.visibleVideoNode(Y._curVideoNode,!0),Y._logger.log("visibleVideoNode, null need")),Y._curVideoNode.state!==VIDEO_STATE$1.PLAYING&&Y._curVideoNode.play(X,{startTime:L}),Y.emit(PLAY_EVENT$1.VIDEONODE_CHANGE,{videoInfo:Y.currentVideoInfo}),te&&(Y._videoInfos.indexOf(Y.currentVideoInfo)!==0&&(Y.emit(PLAY_EVENT$1.DURATION_CHANGE,{videoInfo:Y.currentVideoInfo}),Y.emit(PLAY_EVENT$1.STATE_CHANGE,{videoInfo:Y.currentVideoInfo,new:Y._curVideoNode.state,old:W})),Y.currentVideoInfo.extraVars.isStartPlay||(Y.currentVideoInfo.extraVars.isStartPlay=!0,Y._logger.log("videoNodeStartPlay: uid[".concat(Y.currentVideoInfo.uid,"]")),Y.emit(PLAY_EVENT$1.VIDEONODE_START_PLAY,{videoInfo:Y.currentVideoInfo}))),Y._logger.log("playInner(), playImpl(), uid=".concat((ne=Y.currentVideoInfo)===null||ne===void 0?void 0:ne.uid,"/")+"urlIdx=".concat(Y._curUrlIdx,"/state=").concat(Y._curVideoNode.state))},Z=200,ee=0;z!==-1?(X.hasFirstPlaying&&(ee=window.setTimeout(function(){Y.emit(PLAY_EVENT$1.STATE_CHANGE,{videoInfo:X,new:VIDEO_STATE$1.BUFFERING,old:W})},Z)),this._preloaders[z].promise.then(function(){clearTimeout(ee),Y._logger.log("play(), preloadVideoNode succ, uid=".concat(X.uid)),J(!0)}).catch(function(te){Y._logger.log("play(), preloadVideoNode error, uid=".concat(X.uid,"/error="),te),te.code in ERROR_CODE$1&&(clearTimeout(ee),X.error=te,Y.stopInner(END_STATE$1.ERROR,!0,X))})):X.error?(this._logger.log("play(), got preload error"),this.stopInner(END_STATE$1.ERROR,!0,X)):J(!1)},U.prototype.visibleVideoNode=function(L,Y){var X;!L||!L.videoElement||(this.setVideoElementState(L.videoElement,Y),this._logger.log(">>>visibleVideoNode<<<, value=".concat(Y,"/uid=").concat((X=L.currentVideoInfo)===null||X===void 0?void 0:X.uid)))},U.prototype.setVideoElementState=function(L,Y){var X=Y?this._volume:0;L.volume!==X&&(L.volume=X);var W=this._volume<=0||!Y;L.muted!==W&&(L.muted=W),domTool$1.css(L,"zIndex",Y?"0":"-1"),domTool$1.css(L,"visibility",Y?"inherit":"hidden")},U.prototype.switchVideoNode=function(){if(!(!this._needHideVideoNode||this._curVideoNode===this._needHideVideoNode)){this._logger.log(">>>>>switchVideoNode<<<<<"),this.visibleVideoNode(this._curVideoNode,!0);var L=this._needHideVideoNode;this.visibleVideoNode(L,!1),L&&L.stop(),this._needHideVideoNode=null}},U.prototype.playNextInner=function(L){this._needHideVideoNode=this._curVideoNode,this._prePlayNext=!1,G.prototype.playNextInner.call(this,L)},U.prototype.appendAfter=function(L){var Y=this._curVideoNode?this._curVideoNode.state===VIDEO_STATE$1.IDLE:!0;this._played&&this._curUrlIdx+1===this._videoInfos.indexOf(L)&&Y&&this.playNextInner()},U.prototype.preparePreloader=function(L,Y){this._logger.log("preparePreloader(), isFirstLoad=",L);var X=this.getIdleVideoNode();return X?(Y.extraVars.preloadVideoNode=X,L&&(this.setCurVideoNode(X),this.visibleVideoNode(X,!0)),new OrgPreLoader$1(this._config)):null},U.prototype.getIdleVideoNode=function(){if(this._firstVideoNode){var L=this._firstVideoNode;return this._firstVideoNode=null,L}for(var Y=null,X=this._vnList.length,W=0;W<X;W++)if(this._vnList[W].state===VIDEO_STATE$1.IDLE&&this._vnList[W]!==this._curVideoNode){var z=this._vnList.splice(W,1);Y=z[0];break}return Y&&this._vnList.push(Y),Y},U.prototype.getLevelSwitching=function(){return!!this._setLevelVideoNode},U.prototype.setLevelInner=function(L){var Y=this,X=this.decideSetLevelMode();if(X===SET_LEVEL_MODE$1.HARD)return this._curVideoNode.setLevel();var W=new SimpleDefer$1,z=this.currentVideoInfo;this._logger.log("setLevelInner(), uid: ".concat(z.uid)),this.pauseInner(),this.setPlayEvents(this._curVideoNode,!1),this.emit(PLAY_EVENT$1.SETLEVEL_START,{videoInfo:z,mode:SET_LEVEL_MODE$1.SMOOTH}),this.setLoading(!0);var J=this._curVideoNode.playtime,Z=this.getIdleVideoNode();Z?this.visibleVideoNode(Z,!1):(this._curVideoNode.stop(),Z=this._curVideoNode),z.extraVars.isLoadstarted=!1,this._setLevelVideoNode=Z,this._setLevelVideoNode.setLevelEvtMap={};var ee=this._curVideoNode;this.setCurVideoNode(Z,!0);var te=function(){Y._logger.log(">>>>>rollbackLevelVideoNode<<<<<"),Y._urlBeforeSetLevel&&(Object.assign(Y.currentVideoInfo.config,Y._urlBeforeSetLevel),Y.currentVideoInfo.reset(),Y._urlBeforeSetLevel=null),Y.setPlayEvents(Y._curVideoNode,!0),Y.resumeInner()};return Z.setLevelEvtMap[VIDEO_NODE_EVENT$1.STATE_CHANGE]=function(re){re.data.new===VIDEO_STATE$1.PLAYING&&(Y._logger.log("setLevel succ>>>>>> uid: ".concat(z.uid),re),Y.clearSetLevelThings(!0),Y.switchVideoNodeWhenSetLevelSucc(ee),W.resolve(),Y.emit(PLAY_EVENT$1.SETLEVEL_OVER,{videoInfo:z}),Y.setLoading(!1))},Z.setLevelEvtMap[VIDEO_NODE_EVENT$1.ERROR]=function(re){var ie;Y._logger.log("setLevel fail>>>>>> uid: ".concat(z.uid),re),Y.clearSetLevelThings(),te(),W.reject(new Error("setLevel failed, ".concat((ie=z.error)===null||ie===void 0?void 0:ie.message))),Y.emit(PLAY_EVENT$1.SETLEVEL_OVER,{videoInfo:z,fail:!0}),Y.setLoading(!1)},Z.on(VIDEO_NODE_EVENT$1.STATE_CHANGE,Z.setLevelEvtMap[VIDEO_NODE_EVENT$1.STATE_CHANGE]),Z.on(VIDEO_NODE_EVENT$1.ERROR,Z.setLevelEvtMap[VIDEO_NODE_EVENT$1.ERROR]),Z.play(z,{startTime:J}),W.promise},U.prototype.switchVideoNodeWhenSetLevelSucc=function(L){this._logger.log(">>>>>switchLevelVideoNode<<<<<"),L===this._curVideoNode?this.visibleVideoNode(this._curVideoNode,!0):(this.visibleVideoNode(this._curVideoNode,!0),this.visibleVideoNode(L,!1),L==null||L.stop())},U.prototype.clearSetLevelThings=function(L){if(!!this.getLevelSwitching()){var Y=this._setLevelVideoNode;Y.setLevelEvtMap&&(Object.keys(Y.setLevelEvtMap).forEach(function(X){Y.off(X,Y.setLevelEvtMap[X])}),Y.setLevelEvtMap=null),L||Y.stop(),this.clearAllPreloadInner(),this._setLevelVideoNode=null}},U.prototype.checkAccuratePlaytime=function(L,Y){var X,W,z=this._config.originKernelConfig.prePlayNextTime,J=Math.abs(Y-L);if(z>0&&J<z&&!this._prePlayNext){this._prePlayNext=!0;var Z=this.findPreloadIdxByVideoInfo(this.nextVideoInfo);if(this.nextVideoInfo&&Z!==-1){var ee=(W=(X=this._preloaders[Z])===null||X===void 0?void 0:X.videoInfo)===null||W===void 0?void 0:W.extraVars.preloadVideoNode;ee&&(this._logger.log("preplay next!! idx/state: ".concat(ee.idx,"/").concat(ee.state)),ee.play())}}this.checkAutoPreloadNext(J)},U.prototype.stopInner=function(L,Y,X){L===void 0&&(L=END_STATE$1.NORMAL),Y===void 0&&(Y=!1),X===void 0&&(X=null),this._firstVideoNode=null,this._prePlayNext=!1,this.clearSetLevelThings(!0),G.prototype.stopInner.call(this,L,Y,X)},U.prototype.destroy=function(){this._needHideVideoNode=null,this._setLevelVideoNode=null,this._firstVideoNode=null;var L=this.videoElements;G.prototype.destroy.call(this),L.forEach(function(Y){Y instanceof HTMLVideoElement&&(Y.volume=1,Y.muted=!1,domTool$1.css(Y,{zIndex:"0",visibility:"inherit"}),Y.dataset.idx="0")})},U.isEnvSupport=!0,__decorate$8([logMethodCall$9,__metadata$8("design:type",Function),__metadata$8("design:paramtypes",[Number]),__metadata$8("design:returntype",void 0)],U.prototype,"playInner",null),__decorate$8([logMethodCall$9,__metadata$8("design:type",Function),__metadata$8("design:paramtypes",[]),__metadata$8("design:returntype",void 0)],U.prototype,"switchVideoNode",null),U}(BasePlayer$1),__extends$d=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),BaseLivePlayer$1=function(G){__extends$d(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.playInner=function(L){var Y=this._videoInfos[0];this.setPlayEvents(this._curVideoNode,!0),this._curVideoNode.play(Y),this.emit(PLAY_EVENT$1.VIDEONODE_CHANGE,{videoInfo:Y})},U.prototype.resumeInner=function(){var L;!this._played||!((L=this._curVideoNode)===null||L===void 0)&&L.currentVideoInfo&&this._curVideoNode.videoplay()},U.prototype.loadInner=function(L,Y){var X=G.prototype.loadInner.call(this,L,Y);return X?(this.setCurVideoNode(this._vnList[0]),this._curVideoNode.load(this._videoInfos[0]),!0):!1},U.prototype.appendAfter=function(L){},U.prototype.checkAccuratePlaytime=function(L,Y){},U.prototype.preparePreloader=function(L,Y){return null},U.prototype.getIdleVideoNode=function(){return this._vnList[0]},U.prototype.setLevelInner=function(L){return this._curVideoNode.setLevel()},U.prototype.playBlocked=function(){G.prototype.playBlocked.call(this),this.pause()},Object.defineProperty(U.prototype,"supportPreload",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nextVideoInfo",{get:function(){return this.currentVideoInfo},enumerable:!1,configurable:!0}),U}(BasePlayer$1);["seek","hasAppended","hasPreloaded","playNext","appendNext","preloadNext","clearAllPreload","appendAfter","checkPlayNext","playNextInner","checkAutoPreloadNext","clearAllPreloadInner"].forEach(function(G){BaseLivePlayer$1.prototype[G]=function(){console.warn("[thumbplayer] ".concat(G,"() is not support due to live stream"))}});var __extends$c=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),LivePlayer$1=function(G){__extends$c(U,G);function U(L){return G.call(this,mergeKernelConfig$1(L))||this}return Object.defineProperty(U.prototype,"kernelName",{get:function(){return KERNEL_NAME$1.ORIGIN},enumerable:!1,configurable:!0}),U}(BaseLivePlayer$1),OrgPlayer$1=function(){function G(U){return U.type===PLAY_MODE$1.LIVE?new LivePlayer$1(U):new MultiPlayer$1(U)}return Object.defineProperty(G,"canPlayType",{get:function(){return videoTool$1.supportVideoFormat()},enumerable:!1,configurable:!0}),G.isEnvSupport=!0,G.VERSION=VERSION$3,G.BUILD_TIME=BUILD_TIME$2,G}(),ThumbPlayerCore$2=Object.freeze(Object.defineProperty({__proto__:null,MultiPlayer:MultiPlayer$1,OrgPlayer:OrgPlayer$1,OrgVideoNode:OrgVideoNode$1,OrgPreloader:OrgPreLoader$1,originDefaultConfig:defaultOriginKernelConfig$1,VideoInfo:VideoInfo$1,BaseVideoNode:BaseVideoNode$1,BasePlayer:BasePlayer$1,BaseLivePlayer:BaseLivePlayer$1,defaultPlayerConfig:defaultPlayerConfig$1,EvtEmitter:s$3,SimpleDefer:SimpleDefer$1,get DrmKeySystems(){return KeySystems$1},KernelFactory:KernelFactory$3,get KERNEL_NAME(){return KERNEL_NAME$1},KernelProxy:KernelProxy$1,get SET_LEVEL_MODE(){return SET_LEVEL_MODE$1},get PLAY_MODE(){return PLAY_MODE$1},CAN_PLAY_ALL:CAN_PLAY_ALL$1,VIDEO_CONTAINER_CLASS:VIDEO_CONTAINER_CLASS$1,get END_STATE(){return END_STATE$1},get VIDEO_EVTS(){return VIDEO_EVTS$1},get VIDEO_STATE(){return VIDEO_STATE$1},get ERROR_CODE(){return ERROR_CODE$1},VIDEO_ELEMENT_ERROR:VIDEO_ELEMENT_ERROR$1,get ERROR_MSG(){return ERROR_MSG$1},get PLAY_EVENT(){return PLAY_EVENT$1},get VIDEO_NODE_EVENT(){return VIDEO_NODE_EVENT$1},get MSE_EVENTS(){return MSE_EVENTS$1},get PAUSE_TYPE(){return PAUSE_TYPE$1},get PLAYER_LOG_LEVEL(){return PLAYER_LOG_LEVEL$1},get PRELOAD_TYPE(){return PRELOAD_TYPE$1},get CODEC(){return CODEC$1},get VIDEO_ELEMENT_STATE(){return VIDEO_ELEMENT_STATE$1},CDN_PATH_PREFIX:CDN_PATH_PREFIX$1,get CACHE_SIZE_KEY(){return CACHE_SIZE_KEY$1},commonTool:comTool$1,uaTool:uaTool$1,logTool:logtool$1,logMethodCallDecoratorCreator:logMethodCallDecoratorCreator$1,logMethodCallDecoratorCreater:logMethodCallDecoratorCreator$1,Logger:Logger$1,enableConsoleOutput:enableConsoleOutput$1,get LogMode(){return LogMode$1},dumpLog:dumpLog$1,cookieTool:cookieTool$1,lsTool:lsTool$1,urlTool:urlTool$1,domTool:domTool$1,netTool:netTool$1,videoTool:videoTool$1,stringTool:stringTool$1,jsonTool:jsonTool$1,CHANNEL:CHANNEL$2,BUILD_TIME:BUILD_TIME$2,VERSION:VERSION$3,LOCAL_DEV:LOCAL_DEV$1},Symbol.toStringTag,{value:"Module"}));KernelFactory$3.registerKernel(KERNEL_NAME$1.ORIGIN,OrgPlayer$1);window.ThumbPlayerCore=ThumbPlayerCore$2;var ThumbPlayerCore$1=Object.freeze(Object.defineProperty({__proto__:null,MultiPlayer:MultiPlayer$1,OrgPlayer:OrgPlayer$1,OrgVideoNode:OrgVideoNode$1,OrgPreloader:OrgPreLoader$1,originDefaultConfig:defaultOriginKernelConfig$1,VideoInfo:VideoInfo$1,BaseVideoNode:BaseVideoNode$1,BasePlayer:BasePlayer$1,BaseLivePlayer:BaseLivePlayer$1,defaultPlayerConfig:defaultPlayerConfig$1,EvtEmitter:s$3,SimpleDefer:SimpleDefer$1,get DrmKeySystems(){return KeySystems$1},KernelFactory:KernelFactory$3,get KERNEL_NAME(){return KERNEL_NAME$1},KernelProxy:KernelProxy$1,get SET_LEVEL_MODE(){return SET_LEVEL_MODE$1},get PLAY_MODE(){return PLAY_MODE$1},CAN_PLAY_ALL:CAN_PLAY_ALL$1,VIDEO_CONTAINER_CLASS:VIDEO_CONTAINER_CLASS$1,get END_STATE(){return END_STATE$1},get VIDEO_EVTS(){return VIDEO_EVTS$1},get VIDEO_STATE(){return VIDEO_STATE$1},get ERROR_CODE(){return ERROR_CODE$1},VIDEO_ELEMENT_ERROR:VIDEO_ELEMENT_ERROR$1,get ERROR_MSG(){return ERROR_MSG$1},get PLAY_EVENT(){return PLAY_EVENT$1},get VIDEO_NODE_EVENT(){return VIDEO_NODE_EVENT$1},get MSE_EVENTS(){return MSE_EVENTS$1},get PAUSE_TYPE(){return PAUSE_TYPE$1},get PLAYER_LOG_LEVEL(){return PLAYER_LOG_LEVEL$1},get PRELOAD_TYPE(){return PRELOAD_TYPE$1},get CODEC(){return CODEC$1},get VIDEO_ELEMENT_STATE(){return VIDEO_ELEMENT_STATE$1},CDN_PATH_PREFIX:CDN_PATH_PREFIX$1,get CACHE_SIZE_KEY(){return CACHE_SIZE_KEY$1},commonTool:comTool$1,uaTool:uaTool$1,logTool:logtool$1,logMethodCallDecoratorCreator:logMethodCallDecoratorCreator$1,logMethodCallDecoratorCreater:logMethodCallDecoratorCreator$1,Logger:Logger$1,enableConsoleOutput:enableConsoleOutput$1,get LogMode(){return LogMode$1},dumpLog:dumpLog$1,cookieTool:cookieTool$1,lsTool:lsTool$1,urlTool:urlTool$1,domTool:domTool$1,netTool:netTool$1,videoTool:videoTool$1,stringTool:stringTool$1,jsonTool:jsonTool$1,CHANNEL:CHANNEL$2,BUILD_TIME:BUILD_TIME$2,VERSION:VERSION$3,LOCAL_DEV:LOCAL_DEV$1},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(G,U){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(L[X]=Y[X])},extendStatics$1(G,U)};function __extends$b(G,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");extendStatics$1(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var __assign$a=function(){return __assign$a=Object.assign||function(U){for(var L,Y=1,X=arguments.length;Y<X;Y++){L=arguments[Y];for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&(U[W]=L[W])}return U},__assign$a.apply(this,arguments)};function __decorate$7(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W}function __metadata$7(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)}function __awaiter$6(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})}function __generator$6(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}}function __spreadArray$2(G,U,L){if(L||arguments.length===2)for(var Y=0,X=U.length,W;Y<X;Y++)(W||!(Y in U))&&(W||(W=Array.prototype.slice.call(U,0,Y)),W[Y]=U[Y]);return G.concat(W||Array.prototype.slice.call(U))}var sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal$1:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(G){return Object.prototype.toString.call(G)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(G){return typeof G=="object"&&G.buffer&&G.buffer.constructor===ArrayBuffer});var createOutputMethod=function(G,U){return function(L){return new Sha256(U,!0).update(L)[G]()}},createMethod=function(G){var U=createOutputMethod("hex",G);NODE_JS&&(U=nodeWrap(U,G)),U.create=function(){return new Sha256(G)},U.update=function(X){return U.create().update(X)};for(var L=0;L<OUTPUT_TYPES.length;++L){var Y=OUTPUT_TYPES[L];U[Y]=createOutputMethod(Y,G)}return U},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(G){if(typeof G=="string")return crypto.createHash(algorithm).update(G,"utf8").digest("hex");if(G==null)throw new Error(ERROR);return G.constructor===ArrayBuffer&&(G=new Uint8Array(G)),Array.isArray(G)||ArrayBuffer.isView(G)||G.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(G)).digest("hex"):method(G)};return nodeMethod},createHmacOutputMethod=function(G,U){return function(L,Y){return new HmacSha256(L,U,!0).update(Y)[G]()}},createHmacMethod=function(G){var U=createHmacOutputMethod("hex",G);U.create=function(X){return new HmacSha256(X,G)},U.update=function(X,W){return U.create(X).update(W)};for(var L=0;L<OUTPUT_TYPES.length;++L){var Y=OUTPUT_TYPES[L];U[Y]=createHmacOutputMethod(Y,G)}return U};function Sha256(G,U){U?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=G}Sha256.prototype.update=function(G){if(!this.finalized){var U,L=typeof G;if(L!=="string"){if(L==="object"){if(G===null)throw new Error(ERROR);if(ARRAY_BUFFER&&G.constructor===ArrayBuffer)G=new Uint8Array(G);else if(!Array.isArray(G)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(G)))throw new Error(ERROR)}else throw new Error(ERROR);U=!0}for(var Y,X=0,W,z=G.length,J=this.blocks;X<z;){if(this.hashed&&(this.hashed=!1,J[0]=this.block,J[16]=J[1]=J[2]=J[3]=J[4]=J[5]=J[6]=J[7]=J[8]=J[9]=J[10]=J[11]=J[12]=J[13]=J[14]=J[15]=0),U)for(W=this.start;X<z&&W<64;++X)J[W>>2]|=G[X]<<SHIFT[W++&3];else for(W=this.start;X<z&&W<64;++X)Y=G.charCodeAt(X),Y<128?J[W>>2]|=Y<<SHIFT[W++&3]:Y<2048?(J[W>>2]|=(192|Y>>6)<<SHIFT[W++&3],J[W>>2]|=(128|Y&63)<<SHIFT[W++&3]):Y<55296||Y>=57344?(J[W>>2]|=(224|Y>>12)<<SHIFT[W++&3],J[W>>2]|=(128|Y>>6&63)<<SHIFT[W++&3],J[W>>2]|=(128|Y&63)<<SHIFT[W++&3]):(Y=65536+((Y&1023)<<10|G.charCodeAt(++X)&1023),J[W>>2]|=(240|Y>>18)<<SHIFT[W++&3],J[W>>2]|=(128|Y>>12&63)<<SHIFT[W++&3],J[W>>2]|=(128|Y>>6&63)<<SHIFT[W++&3],J[W>>2]|=(128|Y&63)<<SHIFT[W++&3]);this.lastByteIndex=W,this.bytes+=W-this.start,W>=64?(this.block=J[16],this.start=W-64,this.hash(),this.hashed=!0):this.start=W}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var G=this.blocks,U=this.lastByteIndex;G[16]=this.block,G[U>>2]|=EXTRA[U&3],this.block=G[16],U>=56&&(this.hashed||this.hash(),G[0]=this.block,G[16]=G[1]=G[2]=G[3]=G[4]=G[5]=G[6]=G[7]=G[8]=G[9]=G[10]=G[11]=G[12]=G[13]=G[14]=G[15]=0),G[14]=this.hBytes<<3|this.bytes>>>29,G[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var G=this.h0,U=this.h1,L=this.h2,Y=this.h3,X=this.h4,W=this.h5,z=this.h6,J=this.h7,Z=this.blocks,ee,te,re,ie,ne,oe,se,ae,le,ue,ce;for(ee=16;ee<64;++ee)ne=Z[ee-15],te=(ne>>>7|ne<<25)^(ne>>>18|ne<<14)^ne>>>3,ne=Z[ee-2],re=(ne>>>17|ne<<15)^(ne>>>19|ne<<13)^ne>>>10,Z[ee]=Z[ee-16]+te+Z[ee-7]+re<<0;for(ce=U&L,ee=0;ee<64;ee+=4)this.first?(this.is224?(ae=300032,ne=Z[0]-1413257819,J=ne-150054599<<0,Y=ne+24177077<<0):(ae=704751109,ne=Z[0]-210244248,J=ne-1521486534<<0,Y=ne+143694565<<0),this.first=!1):(te=(G>>>2|G<<30)^(G>>>13|G<<19)^(G>>>22|G<<10),re=(X>>>6|X<<26)^(X>>>11|X<<21)^(X>>>25|X<<7),ae=G&U,ie=ae^G&L^ce,se=X&W^~X&z,ne=J+re+se+K[ee]+Z[ee],oe=te+ie,J=Y+ne<<0,Y=ne+oe<<0),te=(Y>>>2|Y<<30)^(Y>>>13|Y<<19)^(Y>>>22|Y<<10),re=(J>>>6|J<<26)^(J>>>11|J<<21)^(J>>>25|J<<7),le=Y&G,ie=le^Y&U^ae,se=J&X^~J&W,ne=z+re+se+K[ee+1]+Z[ee+1],oe=te+ie,z=L+ne<<0,L=ne+oe<<0,te=(L>>>2|L<<30)^(L>>>13|L<<19)^(L>>>22|L<<10),re=(z>>>6|z<<26)^(z>>>11|z<<21)^(z>>>25|z<<7),ue=L&Y,ie=ue^L&G^le,se=z&J^~z&X,ne=W+re+se+K[ee+2]+Z[ee+2],oe=te+ie,W=U+ne<<0,U=ne+oe<<0,te=(U>>>2|U<<30)^(U>>>13|U<<19)^(U>>>22|U<<10),re=(W>>>6|W<<26)^(W>>>11|W<<21)^(W>>>25|W<<7),ce=U&L,ie=ce^U&Y^ue,se=W&z^~W&J,ne=X+re+se+K[ee+3]+Z[ee+3],oe=te+ie,X=G+ne<<0,G=ne+oe<<0;this.h0=this.h0+G<<0,this.h1=this.h1+U<<0,this.h2=this.h2+L<<0,this.h3=this.h3+Y<<0,this.h4=this.h4+X<<0,this.h5=this.h5+W<<0,this.h6=this.h6+z<<0,this.h7=this.h7+J<<0},Sha256.prototype.hex=function(){this.finalize();var G=this.h0,U=this.h1,L=this.h2,Y=this.h3,X=this.h4,W=this.h5,z=this.h6,J=this.h7,Z=HEX_CHARS[G>>28&15]+HEX_CHARS[G>>24&15]+HEX_CHARS[G>>20&15]+HEX_CHARS[G>>16&15]+HEX_CHARS[G>>12&15]+HEX_CHARS[G>>8&15]+HEX_CHARS[G>>4&15]+HEX_CHARS[G&15]+HEX_CHARS[U>>28&15]+HEX_CHARS[U>>24&15]+HEX_CHARS[U>>20&15]+HEX_CHARS[U>>16&15]+HEX_CHARS[U>>12&15]+HEX_CHARS[U>>8&15]+HEX_CHARS[U>>4&15]+HEX_CHARS[U&15]+HEX_CHARS[L>>28&15]+HEX_CHARS[L>>24&15]+HEX_CHARS[L>>20&15]+HEX_CHARS[L>>16&15]+HEX_CHARS[L>>12&15]+HEX_CHARS[L>>8&15]+HEX_CHARS[L>>4&15]+HEX_CHARS[L&15]+HEX_CHARS[Y>>28&15]+HEX_CHARS[Y>>24&15]+HEX_CHARS[Y>>20&15]+HEX_CHARS[Y>>16&15]+HEX_CHARS[Y>>12&15]+HEX_CHARS[Y>>8&15]+HEX_CHARS[Y>>4&15]+HEX_CHARS[Y&15]+HEX_CHARS[X>>28&15]+HEX_CHARS[X>>24&15]+HEX_CHARS[X>>20&15]+HEX_CHARS[X>>16&15]+HEX_CHARS[X>>12&15]+HEX_CHARS[X>>8&15]+HEX_CHARS[X>>4&15]+HEX_CHARS[X&15]+HEX_CHARS[W>>28&15]+HEX_CHARS[W>>24&15]+HEX_CHARS[W>>20&15]+HEX_CHARS[W>>16&15]+HEX_CHARS[W>>12&15]+HEX_CHARS[W>>8&15]+HEX_CHARS[W>>4&15]+HEX_CHARS[W&15]+HEX_CHARS[z>>28&15]+HEX_CHARS[z>>24&15]+HEX_CHARS[z>>20&15]+HEX_CHARS[z>>16&15]+HEX_CHARS[z>>12&15]+HEX_CHARS[z>>8&15]+HEX_CHARS[z>>4&15]+HEX_CHARS[z&15];return this.is224||(Z+=HEX_CHARS[J>>28&15]+HEX_CHARS[J>>24&15]+HEX_CHARS[J>>20&15]+HEX_CHARS[J>>16&15]+HEX_CHARS[J>>12&15]+HEX_CHARS[J>>8&15]+HEX_CHARS[J>>4&15]+HEX_CHARS[J&15]),Z},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var G=this.h0,U=this.h1,L=this.h2,Y=this.h3,X=this.h4,W=this.h5,z=this.h6,J=this.h7,Z=[G>>24&255,G>>16&255,G>>8&255,G&255,U>>24&255,U>>16&255,U>>8&255,U&255,L>>24&255,L>>16&255,L>>8&255,L&255,Y>>24&255,Y>>16&255,Y>>8&255,Y&255,X>>24&255,X>>16&255,X>>8&255,X&255,W>>24&255,W>>16&255,W>>8&255,W&255,z>>24&255,z>>16&255,z>>8&255,z&255];return this.is224||Z.push(J>>24&255,J>>16&255,J>>8&255,J&255),Z},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var G=new ArrayBuffer(this.is224?28:32),U=new DataView(G);return U.setUint32(0,this.h0),U.setUint32(4,this.h1),U.setUint32(8,this.h2),U.setUint32(12,this.h3),U.setUint32(16,this.h4),U.setUint32(20,this.h5),U.setUint32(24,this.h6),this.is224||U.setUint32(28,this.h7),G};function HmacSha256(G,U,L){var Y,X=typeof G;if(X==="string"){var W=[],z=G.length,J=0,Z;for(Y=0;Y<z;++Y)Z=G.charCodeAt(Y),Z<128?W[J++]=Z:Z<2048?(W[J++]=192|Z>>6,W[J++]=128|Z&63):Z<55296||Z>=57344?(W[J++]=224|Z>>12,W[J++]=128|Z>>6&63,W[J++]=128|Z&63):(Z=65536+((Z&1023)<<10|G.charCodeAt(++Y)&1023),W[J++]=240|Z>>18,W[J++]=128|Z>>12&63,W[J++]=128|Z>>6&63,W[J++]=128|Z&63);G=W}else if(X==="object"){if(G===null)throw new Error(ERROR);if(ARRAY_BUFFER&&G.constructor===ArrayBuffer)G=new Uint8Array(G);else if(!Array.isArray(G)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(G)))throw new Error(ERROR)}else throw new Error(ERROR);G.length>64&&(G=new Sha256(U,!0).update(G).array());var ee=[],te=[];for(Y=0;Y<64;++Y){var re=G[Y]||0;ee[Y]=92^re,te[Y]=54^re}Sha256.call(this,U,L),this.update(te),this.oKeyPad=ee,this.inner=!0,this.sharedMemory=L}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var G=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(G),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256);var adPluginMap={};function setAdPlugin(G,U){adPluginMap[G]=U}function getAdPlugin(G){return adPluginMap[G]}var AdPluginName="__thumbplayer-ad",AD_TYPE;(function(G){G.PRE="preAd",G.POST="postAd"})(AD_TYPE||(AD_TYPE={}));function isPreOrPostAd(G){return[AD_TYPE.PRE,AD_TYPE.POST].indexOf(G.adType)!==-1}var ErrorCode;(function(G){G.SUC="0",G.UNKNOWN="70040000",G.AD_END_DEFAULT_FAIL="70040002",G.AD_REQ_INFO_DEFAULT_FAIL="70040003",G.GETINFO_PLUGIN_MISSING="70040001",G.GETINFO_NET="70014001",G.GETINFO_TIMEOUT="70014003",G.GETINFO_PARSE="70014004",G.GETINFO_INNER="70014005",G.GETINFO_SERVER_CODE_PREFIX="70013",G.GETINFO_LIVE_SERVER_CODE_PREFIX="70023",G.UNPAIED_1080P="70013091.0"})(ErrorCode||(ErrorCode={}));var ErrorMsg;(function(G){G.GETINFO_PLUGIN_MISSING="\u6CA1\u6709\u627E\u5230\u83B7\u53D6\u89C6\u9891\u4FE1\u606F\u63D2\u4EF6",G.GETINFO_INNER="\u83B7\u53D6\u89C6\u9891\u4FE1\u606F\u5185\u90E8\u9519\u8BEF",G.GETINFO_NET="\u65E0\u6CD5\u83B7\u53D6\u89C6\u9891\u4FE1\u606F",G.GETINFO_TIMEOUT="\u83B7\u53D6\u89C6\u9891\u4FE1\u606F\u8D85\u65F6",G.GETINFO_PARSE="\u89C6\u9891\u4FE1\u606F\u65E0\u6CD5\u89E3\u6790",G.GETINFO_CODE="\u64AD\u653E\u540E\u53F0\u8FD4\u56DE\u9519\u8BEF"})(ErrorMsg||(ErrorMsg={}));var H5_EXT_EVENT;(function(G){G.SET_LOADING="SET_LOADING",G.GETINFO_START="GETINFO_START",G.GETINFO_OVER="GETINFO_OVER",G.VID_CHANGE="VID_CHANGE",G.DESTROY="DESTROY",G.DATASET_UPDATE="data-set:update",G.DATASET_STATE_UPDATE="data-set:stateUpdate",G.RETRY_PLAY="retryPlay"})(H5_EXT_EVENT||(H5_EXT_EVENT={}));var H5_PLAY_EVENT;(function(G){G.PLAY_SESSION_START="PLAY_SESSION_START",G.AD_REQ_INFO_START="AD_REQ_INFO_START",G.AD_REQ_INFO_END="AD_REQ_INFO_END",G.AD_REQ_ASSETS_START="AD_REQ_ASSETS_START",G.AD_AUTOPLAY_BLOCKED="AD_AUTOPLAY_BLOCKED",G.AD_PLAYING="AD_PLAYING",G.AD_VOLUME_CHANGE="AD_VOLUME_CHANGE",G.AD_ASSETS_LOADED="AD_ASSETS_LOADED",G.AD_PAUSE="AD_PAUSE",G.AD_END="AD_END",G.AD_TIME_UPDATE="AD_TIME_UPDATE",G.VIDEO_REQ_INFO_START="VIDEO_REQ_INFO_START",G.VIDEO_REQ_INFO_END="VIDEO_REQ_INFO_END",G.VIDEO_LOAD_START="VIDEO_LOAD_START",G.VIDEO_LOAD_PROGRESS="VIDEO_LOAD_PROGRESS",G.VIDEO_DURATION_CHANGE="VIDEO_DURATION_CHANGE",G.VIDEO_METADATA_CHANGE="VIDEO_METADATA_CHANGE",G.VIDEO_TIMEUPDATE="VIDEO_TIMEUPDATE",G.VIDEO_VOLUME_CHANGE="VIDEO_VOLUME_CHANGE",G.VIDEO_RATE_CHANGE="VIDEO_RATE_CHANGE",G.VIDEO_CANPLAY="VIDEO_CANPLAY",G.VIDEO_PLAYING="VIDEO_PLAYING",G.VIDEO_AUTOPLAY_BLOCKED="VIDEO_AUTOPLAY_BLOCKED",G.VIDEO_PAUSE="VIDEO_PAUSE",G.VIDEO_BUFFERING="VIDEO_BUFFERING",G.VIDEO_SEEKING="VIDEO_SEEKING",G.VIDEO_SEEKED="VIDEO_SEEKED",G.VIDEO_SETLEVEL_START="VIDEO_SETLEVEL_START",G.VIDEO_SETLEVEL_END="VIDEO_SETLEVEL_END",G.VIDEO_RESIZE="VIDEO_RESIZE",G.VIDEO_END="VIDEO_END",G.PLAY_SESSION_END="PLAY_SESSION_END"})(H5_PLAY_EVENT||(H5_PLAY_EVENT={}));var pluginStorage={},pluginExists=function(G){return Object.prototype.hasOwnProperty.call(pluginStorage,G)},getPlugin=function(G){return pluginExists(G)?pluginStorage[G]:void 0};function registerPlugin(G,U){if(typeof G!="string")throw new Error('Illegal plugin name, "'+G+'", must be a string, was '+typeof G+".");if(typeof U!="function")throw new Error('Illegal plugin for "'+G+'", must be a function, was '+typeof U+".");if(pluginExists(G)){console.warn('A plugin named "'+G+'" already exists. You may want to avoid re-registering plugins!');return}return pluginStorage[G]=U,U}function deregisterPlugin(G){pluginExists(G)&&delete pluginStorage[G]}function getPlugins(G){G===void 0&&(G=Object.keys(pluginStorage));var U;return G.forEach(function(L){var Y=getPlugin(L);Y&&(U=U||{},U[L]=Y)}),U}var methodPrefix="hook",playHooks=Object.values(H5_PLAY_EVENT),Plugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=this.constructor,z=G.call(this)||this;if(z.player=L,z.config=Y,z.hookMap={},W===U)throw new Error("Plugin must be sub-classed; not directly instantiated.");z.logger_=new Logger$1(L.config.instanceId,z.constructor.pluginName);var J=(X||{}).msg;return z.msg=J,z.registerHook(),z}return U.prototype.log=function(){for(var L,Y,X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];(Y=(L=this.logger_).log)===null||Y===void 0||Y.call.apply(Y,__spreadArray$2([L],X))},U.prototype.warn=function(){for(var L,Y,X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];(Y=(L=this.logger_).warn)===null||Y===void 0||Y.call.apply(Y,__spreadArray$2([L],X))},U.prototype.error=function(){for(var L,Y,X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];(Y=(L=this.logger_).error)===null||Y===void 0||Y.call.apply(Y,__spreadArray$2([L],X))},U.prototype.debug=function(){for(var L,Y,X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];(Y=(L=this.logger_).debug)===null||Y===void 0||Y.call.apply(Y,__spreadArray$2([L],X))},U.prototype.info=function(){for(var L,Y,X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];(Y=(L=this.logger_).info)===null||Y===void 0||Y.call.apply(Y,__spreadArray$2([L],X))},U.prototype.hasPlugin=function(L){return!!pluginExists(L)},U.prototype.destroy=function(){var L,Y=this.player,X=this.name;!((L=Y.plugins)===null||L===void 0)&&L[X]&&delete Y.plugins[X],this.unRegisterHook(),this.hookMap=null,this.player=null,this.removeAllListeners()},U.prototype.hookPlaySessionStart=function(L){},U.prototype.hookAdReqInfoStart=function(L){},U.prototype.hookAdReqInfoEnd=function(L){},U.prototype.hookAdReqAssetsStart=function(L){},U.prototype.hookAdAutoplayBlocked=function(L){},U.prototype.hookAdPlaying=function(L){},U.prototype.hookAdVolumeChange=function(L){},U.prototype.hookAdAssetsLoaded=function(L){},U.prototype.hookAdPause=function(L){},U.prototype.hookAdEnd=function(L){},U.prototype.hookAdTimeUpdate=function(L){},U.prototype.hookVideoReqInfoStart=function(L){},U.prototype.hookVideoReqInfoEnd=function(L){},U.prototype.hookVideoLoadStart=function(L){},U.prototype.hookVideoMetadataChange=function(L){},U.prototype.hookVideoLoadProgress=function(L){},U.prototype.hookVideoDurationChange=function(L){},U.prototype.hookVideoTimeupdate=function(L){},U.prototype.hookVideoVolumeChange=function(L){},U.prototype.hookVideoResize=function(L){},U.prototype.hookVideoRateChange=function(L){},U.prototype.hookVideoCanplay=function(L){},U.prototype.hookVideoPlaying=function(L){},U.prototype.hookVideoAutoplayBlocked=function(L){},U.prototype.hookVideoPause=function(L){},U.prototype.hookVideoBuffering=function(L){},U.prototype.hookVideoSeeking=function(L){},U.prototype.hookVideoSeeked=function(L){},U.prototype.hookVideoSetlevelStart=function(L){},U.prototype.hookVideoSetlevelEnd=function(L){},U.prototype.hookVideoEnd=function(L){},U.prototype.hookPlaySessionEnd=function(L){},U.prototype.registerHook=function(){var L=this;playHooks.forEach(function(Y){var X=getHookMethodName(Y);L.hookMap[Y]=function(W){var z;return(z=L[X])===null||z===void 0?void 0:z.call(L,W.data)},L.player.on(Y,L.hookMap[Y])})},U.prototype.unRegisterHook=function(){var L=this;playHooks.forEach(function(Y){!L.hookMap[Y]||L.player.off(Y,L.hookMap[Y])})},U.VERSION="",U.pluginName="",U}(s$3);function isFunctionPlugin(G){var U=typeof G=="string"?getPlugin(G):G;return typeof U=="function"&&!Object.prototype.isPrototypeOf.call(Plugin.prototype,U.prototype)}function createPluginFactory(G,U){for(var L=[],Y=2;Y<arguments.length;Y++)L[Y-2]=arguments[Y];var X=L[0],W;if(isFunctionPlugin(U))W=U.apply(X,L);else{var z=U;z.prototype.name=G,W=new(z.bind.apply(z,__spreadArray$2([void 0],L)))}return W&&(X.plugins[G]=W),W}function getHookMethodName(G){return methodPrefix+G.toLowerCase().replace(/^[a-z]/,function(U){return U.toUpperCase()}).replace(/_[a-z]/g,function(U){return U[1].toUpperCase()})}var VideoReqInfoPluginName="__thumbplayer-video-request";function isVideoId(G){return typeof G=="string"||typeof G=="number"}var DRM_TYPE={NONE:0,CHACHA:3,FAIR_PLAY:4,WIDEVINE:5,ChinaDRM:6},DRM_VALUE={NONE:0,CHACHA:8,FAIR_PLAY:16,WIDEVINE:32},DATA_EVENTS;(function(G){G.UPDATE="data-set:update",G.STATE_UPDATE="data-set:stateUpdate"})(DATA_EVENTS||(DATA_EVENTS={}));var DATA_STATE;(function(G){G.INIT="PLAYER:init",G.SESSION_START="PLAYER:session_start",G.SESSION_END="PLAYER:session_end",G.GET_INFO="PLAYER:getinfo",G.GET_INFO_START="PLAYER:getinfo_start",G.GET_INFO_END="PLAYER:getinfo_end",G.SUBTITLE="PLAYER:subtitle",G.SUBTITLE_START="PLAYER:subtitle_start",G.SUBTITLE_END="PLAYER:subtitle_end",G.LOAD_START="PLAYER:load_start",G.LOAD_END="PLAYER:load_end",G.LOAD="PLAYER:load",G.BUFFER="PLAYER:buffer",G.BUFFER_START="PLAYER:buffer_start",G.BUFFER_END="PLAYER:buffer_end",G.SEEK="PLAYER:seek",G.SEEK_START="PLAYER:seek_start",G.SEEK_END="PLAYER:seek_end",G.USER_SEEK_START="PLAYER:user_seek_start",G.USER_SEEK_END="PLAYER:user_seek_end",G.END="PLAYER:end",G.ERROR="PLAYER:error",G.FATAL_ERROR="PLAYER:fatal_error",G.FIRST_PLAY="PLAYER:firstPlay",G.IDLE="PLAYER:idle",G.PLAYING="PLAYER:playing",G.SET_LEVEL="PLAYER:setLevel",G.SET_LEVEL_START="PLAYER:setLevel_start",G.SET_LEVEL_END="PLAYER:setLevel_end",G.PAUSE="PLAYER:pause",G.PAUSE_START="PLAYER:pause_start",G.PAUSE_END="PLAYER:pause_end",G.SET_RATE="PLAYER:setRate",G.RETRY_BACKURL="PLAYER:retryBackUrl",G.RETRY_PLAY="PLAYER:retryPlay",G.AUTO_PLAY_BLOCKED="PLAYER:autoplayBlocked"})(DATA_STATE||(DATA_STATE={}));var LOG_TYPE;(function(G){G.USER_ACTION="log:userAction",G.PLUGIN_ACTION="log:pluginAction",G.CORE_EVENT="log:coreEvent",G.API_INVOKE="log:apiInvoke",G.UNCATEGORIZED="log:uncategorized"})(LOG_TYPE||(LOG_TYPE={}));var BUFFER_REASON;(function(G){G[G.NETWORK_UNSTABLE=1400027]="NETWORK_UNSTABLE",G[G.PARALLEL_DOWNLOAD=1400028]="PARALLEL_DOWNLOAD",G[G.CDN_NO_CONNECTION=1400007]="CDN_NO_CONNECTION",G[G.CDN_URL_SWITCH_SUCCESS=1400029]="CDN_URL_SWITCH_SUCCESS",G[G.CDN_SLOW=1400030]="CDN_SLOW",G[G.CDN_URL_SWITCH_UNSUCCESS=1400031]="CDN_URL_SWITCH_UNSUCCESS",G[G.CDN_TIMEOUT=1400026]="CDN_TIMEOUT",G[G.CDN_TIMEOUT_URL_SWITCH=1400032]="CDN_TIMEOUT_URL_SWITCH",G[G.BYTERATE_ERROR=1400033]="BYTERATE_ERROR",G[G.DOWNLOAD_TOO_SHORT=1400034]="DOWNLOAD_TOO_SHORT",G[G.P2P_UPLOAD_SLOW=1400035]="P2P_UPLOAD_SLOW",G[G.DEFAULT=0]="DEFAULT"})(BUFFER_REASON||(BUFFER_REASON={}));var LOCAL_KEY$1;(function(G){G.GUID="thumbplayer-h5-guid",G.VOLUME="thumbplayer-h5-volume"})(LOCAL_KEY$1||(LOCAL_KEY$1={}));var PersistedUserSettings;(function(G){G.definition="user-setting:definition",G.volume="user-setting:volume",G.playbackRate="user-setting:playbackRate",G.subtitle="user-setting:subtitle",G.audioTrack="user-setting:audioTrack"})(PersistedUserSettings||(PersistedUserSettings={}));var DEFAULT_KEY={loginid:"",loginex:"",logintype:"",hh_ip:"",hc_main_login:"",hc_vuserid:"",hc_openid:"",hc_appid:"",hc_access_token:"",hc_vuession:"",vip:0,codec:CODEC$1.H264,freetype:0,mobile:0,guid:"",ua:"",uip:"",device:"",resolution:"",osver:"",p2pver:"",appVer:"",playerver:"",playertype:0,playercore:"",confid:"",downloadkit:0,online:1,p2p:0,sstrength:0,network:0,testid:0,curcore:"",curcorever:"",speed:0,quic:0,platform:"",flowid:"",vid:"",cid:"",columnId:"",livepid:"",interactid:"",url:"",referrer:"",topUrl:"",drm:0,drmtype:0,fmt:0,cdnid:0,dltype:"",rate:0,clip:0,status:0,duration:0,type:0,cdnuip:"",cdnip:"",ptag:"",sdtfrom:"",authfrom:"",currentDefnList:[],currentDefn:"",currentAudioTrack:0,currentAudioTrackList:[],currentSubtitle:"",currentSubtitleList:[],sessionBufferCount:0,sessionRetryBackUrlCount:0,sessionRetryPlayCount:0},COMMON_DATA_KEY={};Object.keys(DEFAULT_KEY).forEach(function(G){return COMMON_DATA_KEY[G]=G});var _a$1$2,FreezeKey="thumbplayer-h5-dataset",KeySystemToDrmType=(_a$1$2={},_a$1$2[KeySystems$1.Widevine]=DRM_TYPE.WIDEVINE,_a$1$2[KeySystems$1.FairPlay]=DRM_TYPE.FAIR_PLAY,_a$1$2[KeySystems$1.FairPlayWebKit]=DRM_TYPE.FAIR_PLAY,_a$1$2.none=DRM_TYPE.NONE,_a$1$2),confIdMap={default:0,hlsProgressive:1,hlsFragPrefetch:2},DataSet=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.player=L,W.isSeeking=!1,W.isBuffering=!1,W.isSettingLevel=!1,W.isLoading=!1,W.lastPlay=0,W.playDuration=0,W.prevPlayTimeS=0,W.sessionBufferCount=0,W.sessionRetryBackUrlCount=0,W.sessionRetryPlayCount=0,W.commonMapFreeze={},W.stateMapFreeze={},W.isLive=!1,W.evtIdMap={},W.writeCommon=function(z,J,Z){var ee=W.commonMap[z];return W.commonMap[z]=J,U.canUseProxy||W.emit(DATA_EVENTS.UPDATE,{key:z,oldVal:ee,newVal:J}),Z?W.freeze("common",z,Z):!1},W.writeState=function(z,J,Z){var ee=J.type||LOG_TYPE.UNCATEGORIZED,te=W.stateMap[z],re=W.getStartEventData(z);return W.stateMap[z]=__assign$a(__assign$a(__assign$a({},ee===LOG_TYPE.CORE_EVENT?W.stats:{}),{type:ee,ftime:+new Date,name:z,eventId:W.generateEvtId()}),J),!U.canUseProxy&&W.commonMap[COMMON_DATA_KEY.flowid]&&W.emit(DATA_EVENTS.STATE_UPDATE,{key:z,oldVal:te,newVal:W.stateMap[z],startEvent:re}),Z?W.freeze("state",z,Z):!1},W.onClose=function(){var z=+new Date;return{code:ErrorCode.SUC,playDuration:W.playDuration,ftime:z}},W.getStats=function(){return __assign$a(__assign$a({playDuration:W.playDuration},W.stats),W.visualStats)},W.generateFlowId=function(){return comTool$1.createGUID(32)},W.generateEvtId=function(){return comTool$1.createGUID(8)},W.getStartEventData=function(z){var J,Z=(J={},J[DATA_STATE.SEEK_END]=W.stateMap[DATA_STATE.SEEK_START],J[DATA_STATE.BUFFER_END]=W.stateMap[DATA_STATE.BUFFER_START],J[DATA_STATE.LOAD_END]=W.stateMap[DATA_STATE.LOAD_START],J[DATA_STATE.SET_LEVEL_END]=W.stateMap[DATA_STATE.SET_LEVEL_START],J[DATA_STATE.PAUSE_END]=W.stateMap[DATA_STATE.PAUSE_START],J[DATA_STATE.GET_INFO_END]=W.stateMap[DATA_STATE.GET_INFO_START],J);return Z[z]},W.resetState=function(){W.isBuffering=!1,W.isSeeking=!1,W.isSettingLevel=!1},W.finalCleanup=function(z,J){var Z,ee,te=J.error,re=J.loadingUrl,ie=J.config,ne=(ee=(Z=ie==null?void 0:ie.backupUrls)===null||Z===void 0?void 0:Z.findIndex(function(oe){return oe===re}))!==null&&ee!==void 0?ee:-1;W.isSeeking&&(W.writeState(DATA_STATE.SEEK_END,{currentUrl:re,urlIndex:ne,type:LOG_TYPE.CORE_EVENT,ftime:z,error:te,code:(te==null?void 0:te.code)||ErrorCode.SUC,name:DATA_STATE.SEEK_END,eventId:W.evtIdMap[DATA_STATE.SEEK_START]}),W.isSeeking=!1),W.isBuffering&&(W.writeState(DATA_STATE.BUFFER_END,{currentUrl:re,urlIndex:ne,type:LOG_TYPE.CORE_EVENT,ftime:z,code:(te==null?void 0:te.code)||ErrorCode.SUC,error:te,name:DATA_STATE.BUFFER_END,eventId:W.evtIdMap[DATA_STATE.BUFFER_START]}),W.isBuffering=!1),W.isSettingLevel&&(W.isSettingLevel=!1,W.writeState(DATA_STATE.SET_LEVEL_END,{currentUrl:re,urlIndex:ne,type:LOG_TYPE.CORE_EVENT,ftime:z,code:(te==null?void 0:te.code)||ErrorCode.SUC,error:te,name:DATA_STATE.SET_LEVEL_END,eventId:W.evtIdMap[DATA_STATE.SET_LEVEL_START]})),W.isLoading&&(W.isLoading=!1,W.writeState(DATA_STATE.LOAD_END,{type:LOG_TYPE.CORE_EVENT,currentUrl:re,urlIndex:ne,ftime:z,error:te,code:(te==null?void 0:te.code)||ErrorCode.SUC,name:DATA_STATE.LOAD_END,eventId:W.evtIdMap[DATA_STATE.LOAD_START]}))},W.onAutoplayBlocked=function(z){W.writeState(DATA_STATE.AUTO_PLAY_BLOCKED,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.AUTO_PLAY_BLOCKED,eventId:W.generateEvtId(),ftime:+new Date})},W.onRetryLoad=function(z){var J=z.data,Z=J.prevUrl,ee=J.curUrl,te=J.error,re=te===void 0?{}:te;W.writeState(DATA_STATE.RETRY_BACKURL,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.RETRY_BACKURL,eventId:W.generateEvtId(),prevUrl:Z,currentUrl:ee,ftime:+new Date,error:re,code:re==null?void 0:re.code}),W.sessionRetryBackUrlCount++,W.writeCommon(COMMON_DATA_KEY.sessionRetryBackUrlCount,W.sessionRetryBackUrlCount)},W.onRetryPlay=function(z){var J=z.data,Z=J.retryTimes;W.writeState(DATA_STATE.RETRY_PLAY,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.RETRY_PLAY,eventId:W.generateEvtId(),ftime:+new Date,ext:{retryTimes:Z}}),W.sessionRetryPlayCount++,W.writeCommon(COMMON_DATA_KEY.sessionRetryPlayCount,W.sessionRetryPlayCount)},W.onBuffering=function(z){if(!W.isBuffering){W.isBuffering=!0;var J=W.generateEvtId();W.evtIdMap[DATA_STATE.BUFFER_START]=J,W.writeState(DATA_STATE.BUFFER_START,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.BUFFER_START,eventId:J,prevState:z.old,ftime:+new Date}),W.sessionBufferCount++,W.writeCommon(COMMON_DATA_KEY.sessionBufferCount,W.sessionBufferCount)}},W.onLoadStart=function(z){var J,Z,ee,te,re,ie,ne,oe;W.resetState();var se=(J=z.videoInfo)===null||J===void 0?void 0:J.config,ae=+new Date;W.writeCommon(COMMON_DATA_KEY.curcore,W.player.kernelName);var le=(Z=KernelFactory$3.getKernelByName(W.player.kernelName))===null||Z===void 0?void 0:Z.VERSION;W.writeCommon(COMMON_DATA_KEY.curcorever,le),W.writeCommon(COMMON_DATA_KEY.drmtype,KeySystemToDrmType[((ee=se.drmConfig)===null||ee===void 0?void 0:ee.keySystem)||"none"]),W.writeCommon(COMMON_DATA_KEY.playertype,W.player.kernelName===KERNEL_NAME$1.ORIGIN?0:1);var ue=(re=(te=W.player.corePlayer).getHls)===null||re===void 0?void 0:re.call(te),ce=(ne=(ie=W.player.corePlayer).getP2P)===null||ne===void 0?void 0:ne.call(ie);if(ce&&W.writeCommon(COMMON_DATA_KEY.p2pver,(oe=ce.getVersion)===null||oe===void 0?void 0:oe.call(ce)),ue){var he=ue.config||{},fe=he.progressive,de=he.startFragPrefetch,_e=confIdMap.default;fe&&(_e+=confIdMap.hlsProgressive),de&&(_e+=confIdMap.hlsFragPrefetch),_e&&W.writeCommon(COMMON_DATA_KEY.confid,_e),ue.once("hlsBufferAppended",function(){var ve="TEMPORARY_FRAG_BUFFER_LOG";W.writeState(ve,{type:LOG_TYPE.CORE_EVENT,name:ve,ext:{cost:+new Date-ae}})})}W.isLoading=!0;var me=W.generateEvtId();W.evtIdMap[DATA_STATE.LOAD_START]=me,W.writeState(DATA_STATE.LOAD_START,{type:LOG_TYPE.CORE_EVENT,eventId:me,name:DATA_STATE.LOAD_START,ftime:ae})},W.onEnd=function(z){W.writeState(DATA_STATE.END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.END,eventId:W.generateEvtId(),ftime:+new Date,ext:{playDuration:W.playDuration},code:ErrorCode.SUC})},W.onIdle=function(z,J){},W.onSeeking=function(z){var J,Z,ee=+new Date;W.isSeeking&&W.writeState(DATA_STATE.SEEK_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.SEEK_END,ftime:ee,eventId:W.evtIdMap[DATA_STATE.SEEK_START],ext:{isUserSeek:((Z=(J=W.stateMap[DATA_STATE.SEEK_START])===null||J===void 0?void 0:J.ext)===null||Z===void 0?void 0:Z.isUserSeek)||!1}}),W.isLive||W.resetState(),W.isSeeking=!0;var te=W.generateEvtId();W.evtIdMap[DATA_STATE.SEEK_START]=te,W.writeState(DATA_STATE.SEEK_START,{type:LOG_TYPE.CORE_EVENT,ftime:ee,name:DATA_STATE.SEEK_START,eventId:te,ext:{inBufferedRange:videoTool$1.checkTimeInBuffer(z.seekingTime,W.player.videoBuffered),isUserSeek:z.isUserSeek}})},W.onSeeked=function(z){!W.isSeeking||(W.isSeeking=!1,W.writeState(DATA_STATE.SEEK_END,{type:LOG_TYPE.CORE_EVENT,eventId:W.evtIdMap[DATA_STATE.SEEK_START],ftime:+new Date,name:DATA_STATE.SEEK_END,ext:{isUserSeek:z.isUserSeek},code:ErrorCode.SUC}))},W.onPause=function(z){var J=z.pauseType,Z=W.generateEvtId();W.evtIdMap[DATA_STATE.PAUSE_START]=Z,W.writeState(DATA_STATE.PAUSE_START,{type:LOG_TYPE.CORE_EVENT,ftime:+new Date,name:DATA_STATE.PAUSE_START,eventId:Z,pauseType:J})},W.onPlaying=function(z){var J=+new Date;W.isBuffering&&(W.writeState(DATA_STATE.BUFFER_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.BUFFER_END,ftime:J,eventId:W.evtIdMap[DATA_STATE.BUFFER_START]}),W.isBuffering=!1),W.lastPlay=J,W.evtIdMap[DATA_STATE.PAUSE_START]&&(W.writeState(DATA_STATE.PAUSE_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.PAUSE_END,eventId:W.evtIdMap[DATA_STATE.PAUSE_START],ftime:J,code:ErrorCode.SUC}),delete W.evtIdMap[DATA_STATE.PAUSE_START])},W.onCanPlay=function(z){var J=+new Date;W.isLoading&&(W.writeState(DATA_STATE.LOAD_END,{type:LOG_TYPE.CORE_EVENT,ftime:J,name:DATA_STATE.LOAD_END,eventId:W.evtIdMap[DATA_STATE.LOAD_START],code:ErrorCode.SUC}),W.isLoading=!1)},W.onSetLevelStart=function(z){var J=+new Date;W.isSeeking&&(W.isSeeking=!1,W.writeState(DATA_STATE.SEEK_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.SEEK_END,ftime:J,eventId:W.evtIdMap[DATA_STATE.SEEK_START]})),W.resetState(),W.isSettingLevel=!0;var Z=W.generateEvtId();W.evtIdMap[DATA_STATE.SET_LEVEL_START]=Z,W.writeState(DATA_STATE.SET_LEVEL_START,{type:LOG_TYPE.CORE_EVENT,ftime:J,eventId:Z,name:DATA_STATE.SET_LEVEL_START,ext:{defn:W.commonMap.currentDefn,mode:z.data.mode}})},W.onSetLevelEnd=function(z){var J=z.data,Z=J===void 0?{}:J,ee=Z.videoInfo,te=(ee||{}).error;W.isSettingLevel=!1,W.writeCommon(COMMON_DATA_KEY.curcore,W.player.kernelName),W.writeState(DATA_STATE.SET_LEVEL_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.SET_LEVEL_END,ftime:+new Date,eventId:W.evtIdMap[DATA_STATE.SET_LEVEL_START],error:te,code:(te==null?void 0:te.code)||ErrorCode.SUC})},W.onError=function(z){var J,Z,ee=z.data,te=(ee||{}).videoInfo,re=te||{},ie=re.error,ne=re.state,oe=re.currentFragSn,se=re.currentFragUrl,ae=re.loadingUrl,le=re.config,ue=+new Date;W.writeState(DATA_STATE.ERROR,{currentUrl:ae,urlIndex:(Z=(J=le==null?void 0:le.backupUrls)===null||J===void 0?void 0:J.findIndex(function(ce){return ce===ae}))!==null&&Z!==void 0?Z:-1,type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.ERROR,eventId:W.generateEvtId(),fragUrl:se,ext:{fragSn:oe},code:ie.code,error:ie,ftime:ue,prevState:ne}),W.finalCleanup(ue,te)},W.onDurationChange=function(z){var J=z.data,Z=J===void 0?{}:J,ee=Z.videoInfo,te=(ee||{}).duration,re=te===void 0?0:te;W.commonMap.duration=re},W.onFirstPlay=function(z){var J=+new Date;W.writeState(DATA_STATE.FIRST_PLAY,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.FIRST_PLAY,ftime:J,eventId:W.generateEvtId()})},W.onTimeChange=function(z){var J=Math.floor(W.player.playtime);!J||J!==W.prevPlayTimeS&&(W.prevPlayTimeS=J,W.playDuration||(W.playDuration=0),W.playDuration+=1)},W.onStateChange=function(z){var J,Z=z.data,ee=Z.new,te=(J={},J[VIDEO_STATE$1.BUFFERING]=W.onBuffering,J[VIDEO_STATE$1.LOAD_START]=W.onLoadStart,J[VIDEO_STATE$1.END]=W.onEnd,J[VIDEO_STATE$1.IDLE]=W.onIdle,J[VIDEO_STATE$1.SEEKING]=W.onSeeking,J[VIDEO_STATE$1.SEEKED]=W.onSeeked,J[VIDEO_STATE$1.PAUSE]=W.onPause,J[VIDEO_STATE$1.PLAYING]=W.onPlaying,J[VIDEO_STATE$1.CANPLAY]=W.onCanPlay,J[VIDEO_STATE$1.SEEKING]=W.onSeeking,J);te[ee]&&te[ee](Z)},W.onRateChange=function(z){W.writeState(DATA_STATE.SET_RATE,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.SET_RATE,eventId:W.generateEvtId(),ftime:+new Date})},W.onVideoReqInfoStart=function(){var z=W.generateEvtId();W.evtIdMap[DATA_STATE.GET_INFO_START]=z,W.writeState(DATA_STATE.GET_INFO_START,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.GET_INFO_START,eventId:z,ftime:+new Date})},W.onVideoReqInfoEnd=function(z){var J=z.data,Z=J.code,ee=J.data,te=ee===void 0?{}:ee;W.sessionRetryBackUrlCount=0,W.evtIdMap[DATA_STATE.GET_INFO_START]&&W.writeState(DATA_STATE.GET_INFO_END,{type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.GET_INFO_END,code:Z,ext:{reqBody:urlTool$1.object2string(te.reqParams||{},"&"),reqPath:te.reqPath||"",retryCount:te.alreadyRetryCount||0},error:te.error||{},eventId:W.evtIdMap[DATA_STATE.GET_INFO_START],ftime:+new Date})},W.onPlaySessionStart=function(z){var J=z.data;W.writeCommon(COMMON_DATA_KEY.flowid,J.flowid),W.emit(DATA_EVENTS.STATE_UPDATE,{key:DATA_STATE.INIT,oldVal:void 0,newVal:W.stateMap[DATA_STATE.INIT],startEvent:void 0}),W.writeState(DATA_STATE.SESSION_START,{eventId:W.generateEvtId(),type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.SESSION_START,ftime:+new Date})},W.onPlaySessionEnd=function(z){var J=z.data,Z=J.code,ee=Z===ErrorCode.SUC?__assign$a({},W.stateMap[DATA_STATE.END]):__assign$a({},W.stateMap[DATA_STATE.ERROR]);Z!==ErrorCode.SUC&&W.removeUserSetting([PersistedUserSettings.definition,PersistedUserSettings.audioTrack]),W.writeState(DATA_STATE.SESSION_END,__assign$a(__assign$a({},ee),{code:Z,eventId:W.generateEvtId(),name:DATA_STATE.SESSION_END,type:LOG_TYPE.CORE_EVENT,ftime:+new Date})),W.playDuration=0,W.prevPlayTimeS=0,W.sessionBufferCount=0,W.sessionRetryBackUrlCount=0,W.sessionRetryPlayCount=0},W.getGUID=function(){var z=lsTool$1.getData(LOCAL_KEY$1.GUID);if(z)return z;var J=comTool$1.createGUID(32);return lsTool$1.setData(LOCAL_KEY$1.GUID,J),J},W.isTabFocused=function(){var z=["hidden","msHidden","webkitHidden"],J=z.find(function(Z){return typeof document[Z]!="undefined"});return J?document[J]?0:1:-1},W.isPlayerInViewport=function(){var z=W.player.container;if(!z.offsetParent)return 0;var J=z.getBoundingClientRect(),Z=window.innerHeight||document.documentElement.clientHeight,ee=window.innerWidth||document.documentElement.clientWidth,te=J.top<=Z&&J.top+J.height>=0,re=J.left<=ee&&J.left+J.width>=0;return+(te&&re)},W.commonMap=U.canUseProxy?new Proxy({},{get:function(z,J,Z){return Reflect.get(z,J,Z)},set:function(z,J,Z,ee){if(typeof J!="string"||W.commonMapFreeze[J])return!1;var te=Reflect.get(z,J,ee),re=Reflect.set(z,J,Z,ee);return te!==Z&&W.emit(DATA_EVENTS.UPDATE,{key:J,oldVal:te,newVal:Z}),re}}):{},W.stateMap=U.canUseProxy?new Proxy({},{get:function(z,J,Z){return Reflect.get(z,J,Z)},set:function(z,J,Z,ee){if(typeof J!="string"||W.stateMapFreeze[J])return!1;var te=Reflect.get(z,J,ee),re=Reflect.set(z,J,Z,ee);return W.commonMap[COMMON_DATA_KEY.flowid]&&W.emit(DATA_EVENTS.STATE_UPDATE,{key:J,oldVal:te,newVal:Z,startEvent:W.getStartEventData(J),startEventData:W.getStartEventData(J)}),re}}):{},W.isLive=W.player.config.type===PLAY_MODE$1.LIVE,W.setEnv(),W.commonInfo(),W.persistUserSetting(),W}return Object.defineProperty(U.prototype,"stats",{get:function(){var L,Y,X,W=this.player,z=W.playbackRate,J=W.volume,Z=W.played,ee=W.playtime,te=W.currentVideoInfo;return{volume:J,playbackRate:z,played:Z,playtime:ee,urlIndex:(X=(Y=(L=te==null?void 0:te.config)===null||L===void 0?void 0:L.backupUrls)===null||Y===void 0?void 0:Y.findIndex(function(re){return re===te.loadingUrl}))!==null&&X!==void 0?X:-1,currentUrl:te==null?void 0:te.loadingUrl,paused:this.paused,fragUrl:te==null?void 0:te.currentFragUrl}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"visualStats",{get:function(){var L=this.isTabFocused(),Y=this.isPlayerInViewport();return{isTabFocused:L,isPlayerInViewport:Y}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"paused",{get:function(){var L,Y;return(Y=(L=this.player)===null||L===void 0?void 0:L.currentVideoElement)===null||Y===void 0?void 0:Y.paused},enumerable:!1,configurable:!0}),U.prototype.defrost=function(L,Y,X){switch(X===void 0&&(X="secret"),L){case"state":return this.stateMapFreeze[Y]===X?(delete this.stateMapFreeze[Y],!0):!1;case"common":return this.commonMapFreeze[Y]===X?(delete this.commonMapFreeze[Y],!0):!1}},U.prototype.freeze=function(L,Y,X){switch(X===void 0&&(X="secret"),L){case"state":return this.stateMapFreeze[Y]?(this.player.log(Y+"\u5DF2\u9501\u5B9A"),!1):(this.stateMapFreeze[Y]=X,!0);case"common":return this.commonMapFreeze[Y]?(this.player.log(Y+"\u5DF2\u9501\u5B9A"),!1):(this.commonMapFreeze[Y]=X,!0);default:return!1}},U.prototype.setEnv=function(){var L=this;this.player.on(PLAY_EVENT$1.STATE_CHANGE,this.onStateChange),this.player.on(PLAY_EVENT$1.FIRST_PLAYING,this.onFirstPlay),this.player.on(PLAY_EVENT$1.TIME_UPDATE,this.onTimeChange),this.player.on(PLAY_EVENT$1.DURATION_CHANGE,this.onDurationChange),this.player.on(PLAY_EVENT$1.ERROR,this.onError),this.player.on(PLAY_EVENT$1.SETLEVEL_START,this.onSetLevelStart),this.player.on(PLAY_EVENT$1.SETLEVEL_OVER,this.onSetLevelEnd),this.player.on(PLAY_EVENT$1.RATE_CHANGE,this.onRateChange),this.player.on(PLAY_EVENT$1.RETRY_BACKURL,this.onRetryLoad),this.player.on(PLAY_EVENT$1.AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.player.on(H5_PLAY_EVENT.VIDEO_REQ_INFO_START,this.onVideoReqInfoStart),this.player.on(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,this.onVideoReqInfoEnd),this.player.on(H5_PLAY_EVENT.PLAY_SESSION_START,this.onPlaySessionStart),this.player.on(H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd),this.player.on(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(Y){var X=Y.data;if(X.code!==ErrorCode.SUC){var W=X.data,z=((W==null?void 0:W.error)||{}).code;L.writeState(DATA_STATE.ERROR,{eventId:L.generateEvtId(),type:LOG_TYPE.CORE_EVENT,name:DATA_STATE.ERROR,code:z,ftime:+new Date})}}),this.msg.on(H5_EXT_EVENT.RETRY_PLAY,this.onRetryPlay)},U.prototype.commonInfo=function(){var L=uaTool$1.os,Y=uaTool$1.mobile;this.writeCommon(COMMON_DATA_KEY.mobile,Y?1:0,FreezeKey),this.writeCommon(COMMON_DATA_KEY.online,1,FreezeKey),this.writeCommon(COMMON_DATA_KEY.resolution,screen.width+"*"+screen.height+"*"+(window.devicePixelRatio||1),FreezeKey),this.writeCommon(COMMON_DATA_KEY.ua,navigator.userAgent.replace(/,/g,"\\,"),FreezeKey),this.writeCommon(COMMON_DATA_KEY.osver,L.osName+" "+L.version,FreezeKey),this.writeCommon(COMMON_DATA_KEY.playertype,0),this.writeCommon(COMMON_DATA_KEY.confid,confIdMap.default),this.writeCommon(COMMON_DATA_KEY.playercore,Object.keys(KernelFactory$3.kernelMap).join(","),FreezeKey),this.writeCommon(COMMON_DATA_KEY.playerver,VERSION$3),this.writeCommon(COMMON_DATA_KEY.speed,0),this.writeCommon(COMMON_DATA_KEY.drm,0),this.writeCommon(COMMON_DATA_KEY.url,location.href,FreezeKey),this.writeCommon(COMMON_DATA_KEY.topUrl,urlTool$1.getTopFrameUrl(),FreezeKey),this.writeCommon(COMMON_DATA_KEY.referrer,document.referrer,FreezeKey),this.writeCommon(COMMON_DATA_KEY.guid,this.getGUID())},U.prototype.persistUserSetting=function(){var L=this,Y={},X=this.player.config,W=X.disableUserSettingCache,z=X.type,J=function(Z){var ee;return((ee=W==null?void 0:W.indexOf)===null||ee===void 0?void 0:ee.call(W,Z))>-1};U.SETTING_CONFIG.forEach(function(Z){var ee=Z.dsKey,te=Z.lsKey,re=Z.oldDsKey,ie=te+"_"+z;if(!J(ee)&&!(re&&J(re))){Y[ee]=ie;var ne=lsTool$1.getData(ie);!ne||ee&&L.writeCommon(ee,ne)}}),this.msg.on(H5_EXT_EVENT.DATASET_UPDATE,function(Z){var ee=Z.data,te=ee.newVal,re=ee.key;!Y[re]||lsTool$1.setData(Y[re],te)})},U.prototype.removeUserSetting=function(L){var Y=this,X=typeof L=="string"?[L]:L;X.forEach(function(W){Y.writeCommon(W,"")})},U.pluginName="dataset",U.UserSettingKeyPrefix="__thumbplayer_setting_",U.SETTING_CONFIG=[{oldDsKey:COMMON_DATA_KEY.currentDefn,dsKey:PersistedUserSettings.definition,lsKey:U.UserSettingKeyPrefix+"_definition"},{oldDsKey:COMMON_DATA_KEY.currentSubtitle,dsKey:PersistedUserSettings.subtitle,lsKey:U.UserSettingKeyPrefix+"_subtitle"},{oldDsKey:COMMON_DATA_KEY.currentAudioTrack,dsKey:PersistedUserSettings.audioTrack,lsKey:U.UserSettingKeyPrefix+"_audioTrack"},{dsKey:PersistedUserSettings.volume,lsKey:U.UserSettingKeyPrefix+"_volume"},{dsKey:PersistedUserSettings.playbackRate,lsKey:U.UserSettingKeyPrefix+"_playbackRate"}],U.canUseProxy=typeof window.Proxy!="undefined",U}(Plugin),DEFAULT_DETECT_URL="//thumbplayer-76307.gzc.vod.tencent-cloud.com/testvideo/f00364tdl4t_sd_h264_25fps_480x270.mp4",ErrorReportPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.setEvents(!0),W}return U.prototype.destroy=function(){this._eventMap=null,this.setEvents(!1),G.prototype.destroy.call(this)},U.prototype.setEvents=function(L){this._eventMap||(this._eventMap={onPlayerSessionEnd:this.onPlayerSessionEnd.bind(this)}),L?this.player.on(H5_PLAY_EVENT.PLAY_SESSION_END,this._eventMap.onPlayerSessionEnd):this.player.off(H5_PLAY_EVENT.PLAY_SESSION_END,this._eventMap.onPlayerSessionEnd)},U.prototype.onPlayerSessionEnd=function(L){var Y,X;return __awaiter$6(this,void 0,void 0,function(){var W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:return W=L.data.code||ErrorCode.SUC,z=this.player.config.type===PLAY_MODE$1.VOD,W===ErrorCode.SUC||!z||W.startsWith(ErrorCode.GETINFO_SERVER_CODE_PREFIX)||uaTool$1.spider?[2]:[4,this.getDetectMp4(((X=(Y=L.data)===null||Y===void 0?void 0:Y.videoInfo)===null||X===void 0?void 0:X.loadingUrl)||DEFAULT_DETECT_URL)];case 1:return J=Z.sent(),this.report(L.data.code,L.data.message,J),[2]}})})},U.prototype.getDetectMp4=function(L){return __awaiter$6(this,void 0,void 0,function(){var Y,X,W,z,J,Z,ee,te,re;return __generator$6(this,function(ie){switch(ie.label){case 0:Y={downloadCode:0,downloadSpeed:0},ie.label=1;case 1:return ie.trys.push([1,3,,4]),X=+new Date,[4,netTool$1.xhr({url:L,retryCount:0,responseType:"arraybuffer",range:[0,102400]})];case 2:return W=ie.sent(),Y.downloadCode=W==null?void 0:W.target.status,z=W.data.byteLength/1024,J=(+new Date-X)/1e3,Y.downloadSpeed=Math.floor(z/J),[3,4];case 3:return Z=ie.sent(),ee=Z||{},te=ee.error,re=ee.target,te==="xhrNetworkError"?Y.downloadCode=-1:te==="xhrStatusCodeError"&&(Y.downloadCode=re==null?void 0:re.status),[3,4];case 4:return[2,Y]}})})},U.prototype.report=function(L,Y,X){var W,z=urlTool$1.getTopFrameUrl(),J=(z==null?void 0:z.split("?")[0])||"",Z=["attaid=09e00059501","token=3157925191","_dc="+Math.random(),"playerver="+this.player.getCommonKv(COMMON_DATA_KEY.playerver),"url="+encodeURIComponent(z),"isvisible="+((W=this.player.dataset.visualStats)===null||W===void 0?void 0:W.isTabFocused),"ua="+navigator.userAgent,"curl="+J,"os="+(uaTool$1.os.osName||"")+(uaTool$1.os.version||""),"errmsg="+(Y||""),"errcode="+L,"detcode="+X.downloadCode,"detspeed="+X.downloadSpeed,"platform="+this.player.getCommonKv(COMMON_DATA_KEY.platform),"flowid="+(this.player.getCommonKv(COMMON_DATA_KEY.flowid)||"?"),"guid="+(this.player.getCommonKv(COMMON_DATA_KEY.guid)||"?")],ee=new Image;ee.src="https://h.trace.qq.com/kv?"+Z.join("&")},U.pluginName="errorReport",U}(Plugin);function proxyPlayEvent(G,U){var L,Y=(L={},L[PLAY_EVENT$1.DURATION_CHANGE]={evt:H5_PLAY_EVENT.VIDEO_DURATION_CHANGE,getParam:function(X){return{duration:X.videoInfo.duration}}},L[PLAY_EVENT$1.METADATA_CHANGE]={evt:H5_PLAY_EVENT.VIDEO_METADATA_CHANGE,getParam:function(X){return{width:X.videoInfo.videoWidth,height:X.videoInfo.videoHeight}}},L[PLAY_EVENT$1.VIDEO_BUFFER_CHANGE]={evt:H5_PLAY_EVENT.VIDEO_LOAD_PROGRESS,getParam:function(){return{bufferRange:G.videoBuffered}}},L[PLAY_EVENT$1.TIME_UPDATE]={evt:H5_PLAY_EVENT.VIDEO_TIMEUPDATE,getParam:function(X){return{playtime:X.videoInfo.playtime}}},L[PLAY_EVENT$1.VOLUME_CHANGE]={evt:H5_PLAY_EVENT.VIDEO_VOLUME_CHANGE,getParam:function(){return{volume:G.volume}}},L[PLAY_EVENT$1.RATE_CHANGE]={evt:H5_PLAY_EVENT.VIDEO_RATE_CHANGE,getParam:function(){return{rate:G.playbackRate}}},L[PLAY_EVENT$1.VIDEO_RESIZE]={evt:H5_PLAY_EVENT.VIDEO_RESIZE,getParam:function(X){return{videoWidth:X.videoInfo.videoWidth,videoHeight:X.videoInfo.videoHeight}}},L[PLAY_EVENT$1.AUTOPLAY_BLOCKED]={evt:H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,getParam:function(){}},L[PLAY_EVENT$1.SETLEVEL_OVER]={evt:H5_PLAY_EVENT.VIDEO_SETLEVEL_END,getParam:function(X){var W,z,J,Z=(J=(z=(W=X.videoInfo)===null||W===void 0?void 0:W.error)===null||z===void 0?void 0:z.code)!==null&&J!==void 0?J:ErrorCode.UNKNOWN;return{code:X.fail?Z:ErrorCode.SUC}}},L);Object.keys(Y).forEach(function(X){U.on(X,function(W){var z=Y[X],J=z.evt,Z=z.getParam;G.emit(J,Z(W.data))})})}var adEvents=[H5_PLAY_EVENT.AD_REQ_INFO_START,H5_PLAY_EVENT.AD_REQ_INFO_END,H5_PLAY_EVENT.AD_REQ_ASSETS_START,H5_PLAY_EVENT.AD_ASSETS_LOADED,H5_PLAY_EVENT.AD_END,H5_PLAY_EVENT.AD_PLAYING,H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,H5_PLAY_EVENT.AD_PAUSE,H5_PLAY_EVENT.AD_TIME_UPDATE,H5_PLAY_EVENT.AD_VOLUME_CHANGE];function proxyAdEvent(G){var U=getAdPlugin(G.config.instanceId);!U||adEvents.forEach(function(L){U.on(L,function(Y){var X=Y.data;G.emit(L,X)})})}var BridgeMessageName;(function(G){G.STORAGE_INIT_FAILED="storageInitFailed",G.STORAGE_READY="storageReady",G.REQUEST_STORE_LOG="requestStoreLog",G.STORE_LOG_SUCCESS="storeLogSuccess",G.STORE_LOG_FAILED="storeLogFailed",G.REQUEST_REPORT_LOG="requestReportLog",G.REPORT_LOG_SUCCESS="reportLogSuccess",G.REPORT_LOG_FAILED="reportLogFailed"})(BridgeMessageName||(BridgeMessageName={}));var REMOTE_STORAGE_CLASS_NAME="thumbplayer-remote-storage-bridge",DEFAULT_IFRAME_TIMEOUT=10*1e3,REPORT_TIMEOUT=20*1e3,MessageBridge=function(){function G(U,L){var Y=this;this.sender=U,this.receiver=L,this.callbackMap={},this.hasDestroy=!1,this.onReceiverMessage=function(X){Y.receiverMessageHandler(X)},this.sender.addEventListener("message",this.onReceiverMessage)}return G.prototype.postMessage=function(U){if(this.hasDestroy)throw new Error("Cannot exec postMessage after destroy");this.receiver.postMessage(U,"*")},G.prototype.on=function(U,L){this.hasDestroy||(this.callbackMap[U]||(this.callbackMap[U]=[]),this.callbackMap[U].push(L))},G.prototype.off=function(U,L){if(!this.hasDestroy){var Y=this.callbackMap[U];if(!!(Y!=null&&Y.length)){var X=Y.indexOf(L);X!==-1&&Y.splice(X,1)}}},G.prototype.destroy=function(){var U;this.hasDestroy=!0,(U=this.sender)===null||U===void 0||U.removeEventListener("message",this.onReceiverMessage),this.sender=null,this.receiver=null,this.callbackMap=null},G.prototype.receiverMessageHandler=function(U){var L=this,Y;if(!(!this.isBridgeMessage(U.data)||this.hasDestroy)){var X=U.data;(Y=this.callbackMap[X.name])===null||Y===void 0||Y.forEach(function(W){W(X,L.postMessage.bind(L))})}},G.prototype.isBridgeMessage=function(U){return typeof U=="object"&&typeof(U==null?void 0:U.name)=="string"&&typeof(U==null?void 0:U.instanceId)=="string"},G}(),RemoteStorageBridge=function(G){__extends$b(U,G);function U(L,Y,X){X===void 0&&(X=DEFAULT_IFRAME_TIMEOUT);var W=G.call(this,self,U.getIframe(L,X).contentWindow)||this;return W.instanceId=Y,W.timeout=X,U.instanceCount+=1,W}return U.getIframe=function(L,Y){if(Y===void 0&&(Y=DEFAULT_IFRAME_TIMEOUT),U.iframeEl)return U.iframeEl;var X=document.createElement("iframe");return X.src=L,document.body.append(X),X.style.display="none",X.classList.add(REMOTE_STORAGE_CLASS_NAME),U.iframeEl=X,U.rejectTimeout=window.setTimeout(function(){U.storageDefer.reject(new Error("IFrame wait timeout"))},Y),X},U.prototype.storeLogs=function(L){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(Y){switch(Y.label){case 0:return[4,U.storageDefer.promise];case 1:return Y.sent(),[4,this.postMessagePromise({name:BridgeMessageName.REQUEST_STORE_LOG,instanceId:this.instanceId,data:L},BridgeMessageName.STORE_LOG_SUCCESS,BridgeMessageName.STORE_LOG_FAILED)];case 2:return Y.sent(),[2]}})})},U.prototype.report=function(L){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(Y){switch(Y.label){case 0:return[4,U.storageDefer.promise];case 1:return Y.sent(),[4,this.postMessagePromise({name:BridgeMessageName.REQUEST_REPORT_LOG,instanceId:this.instanceId,data:L},BridgeMessageName.REPORT_LOG_SUCCESS,BridgeMessageName.REPORT_LOG_FAILED,REPORT_TIMEOUT)];case 2:return Y.sent(),[2]}})})},U.prototype.postMessagePromise=function(L,Y,X,W){var z=this;return W===void 0&&(W=this.timeout),new Promise(function(J,Z){var ee=L.instanceId,te=setTimeout(function(){Z(new Error("PostMessage response timeout: "+L.name+" / "+L.instanceId)),re(!1)},W),re=function(oe){oe===void 0&&(oe=!1);var se=oe?z.on.bind(z):z.off.bind(z);se(X,ie),se(Y,ne),!oe&&clearTimeout(te)},ie=function(oe){ee===oe.instanceId&&(Z(oe.data),re(!1))},ne=function(oe){ee===oe.instanceId&&(J(oe),re(!1))};re(!0),z.postMessage(L)})},U.prototype.destroy=function(){var L;U.instanceCount-=1,U.instanceCount<=0&&(clearTimeout(U.rejectTimeout),U.rejectTimeout=null,(L=U.iframeEl)===null||L===void 0||L.remove(),U.iframeEl=null,U.instanceCount=0,U.storageDefer=new SimpleDefer$1,G.prototype.destroy.call(this))},U.prototype.receiverMessageHandler=function(L){if(!!this.isBridgeMessage(L.data)){if(L.data.name===BridgeMessageName.STORAGE_READY){U.storageDefer.resolve(),clearTimeout(U.rejectTimeout);return}G.prototype.receiverMessageHandler.call(this,L)}},U.storageDefer=new SimpleDefer$1,U.instanceCount=0,U}(MessageBridge),PageWatcher=function(G){__extends$b(U,G);function U(){var L=G.call(this)||this;return L.emitPageLeave=function(){document.visibilityState==="hidden"&&(Date.now()-L.pageLeaveTimeStamp<=U.THROTTLE_GAP||(L.pageLeaveTimeStamp=Date.now(),L.emit(PageWatcherEvent.PageLeave)))},L.emitPageUnload=function(){Date.now()-L.pageUnloadTimeStamp<=U.THROTTLE_GAP||(L.pageUnloadTimeStamp=Date.now(),L.emit(PageWatcherEvent.UNLOAD))},L.setPageLeave(),L.setPageUnload(),L}return U.prototype.setPageLeave=function(){window.addEventListener("pagehide",this.emitPageLeave),document.addEventListener("visibilitychange",this.emitPageLeave)},U.prototype.setPageUnload=function(){window.addEventListener("beforeunload",this.emitPageUnload),window.addEventListener("unload",this.emitPageUnload)},U.THROTTLE_GAP=10,U}(s$3),PageWatcherEvent;(function(G){G.PageLeave="pageLeave",G.UNLOAD="unload"})(PageWatcherEvent||(PageWatcherEvent={}));var singleton=new PageWatcher,PageWatcher$1={instance:singleton,PageWatcherEvent};function collectData(){return{vuid:cookieTool$1.get("vqq_vuserid")||cookieTool$1.get("vuserid"),openid:cookieTool$1.get("openid")||cookieTool$1.get("vqq_openid"),guid:lsTool$1.getData(LOCAL_KEY$1.GUID)}}var WHITE_LIST_URL="//v.qq.com/cache/wuji/object?appid=tenvideo_offline_log&schemaid=whileList&schemakey=d5dccc35902346b2bdcbcef774fefe99",cbIndex=0;function fetchWhiteList(G){var U=3e3,L=200,Y="offline_log",X=encodeURIComponent('projectId="'+G+'"'),W=WHITE_LIST_URL+"&include=encryptValue,type&filter="+X+"&otype=jsonp";return cbIndex+=1,netTool$1.jsonp(W,{name:Y+cbIndex%L,timeout:U})}var WhiteListType;(function(G){G.vuid="2",G.guid="5",G.openid="6"})(WhiteListType||(WhiteListType={}));function validateWhiteList(G){return __awaiter$6(this,void 0,void 0,function(){var U,L;return __generator$6(this,function(Y){switch(Y.label){case 0:U=collectData(),Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,fetchWhiteList(G)];case 2:return L=Y.sent(),[2,Object.entries(WhiteListType).some(function(X){var W=X[0],z=X[1],J=U[W];return J&&L.data.some(function(Z){return Z.type===z&&Z.encryptValue===sha256.exports.sha256(J)})})];case 3:return Y.sent(),[2,!1];case 4:return[2]}})})}var OfflineLogPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.pageWatcher=PageWatcher$1.instance,W.logInfoChange={},W.isDestroy=!1,W.onPageLeave=function(){W.storeLogs()},W.storeLogs=function(z){return __awaiter$6(W,void 0,void 0,function(){var J,Z,ee,te,re;return __generator$6(this,function(ie){switch(ie.label){case 0:if(J=this.instanceId,!J)return[2];if(Z=Logger$1.cache[J],ee={logs:Z,info:this.logInfoChange,ext:z},te=z||ee.logs.length||Boolean(Object.keys(this.logInfoChange).length),Logger$1.cache[J]=[],this.logInfoChange={},!te)return[2];ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,this.remoteStorage.storeLogs(ee)];case 2:return ie.sent(),[3,4];case 3:return re=ie.sent(),this.logger.error("Error occur when store offlineLog: "+re),[3,4];case 4:return[2]}})})},W.onPlayerError=function(z){var J,Z,ee;W.logInfoChange.code=(ee=(Z=(J=z.data)===null||J===void 0?void 0:J.videoInfo)===null||Z===void 0?void 0:Z.error)===null||ee===void 0?void 0:ee.code,W.storeLogs()},W.config=__assign$a(__assign$a({},DEFAULT_CONFIG$1),Y||{}),W.logger=new Logger$1(W.instanceId,U.pluginName),W.remoteStorage=new RemoteStorageBridge(RECORDER_DEPLOY_URL,W.instanceId),RemoteStorageBridge.storageDefer.promise.then(function(){W.isDestroy||(W.setPollLogger(),W.setPageWatcher(),W.setPlayerEvt())}).catch(function(z){W.logger.error("Error occur when init DB: "+z)}),W.logEnvInfo(),W.checkWhiteList(),W}return Object.defineProperty(U,"isEnvSupport",{get:function(){return typeof window.Proxy=="function"},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(L){switch(L.label){case 0:return L.trys.push([0,2,3,4]),this.isDestroy=!0,this.setPollLogger(!1),this.setPageWatcher(!1),this.setPlayerEvt(!1),[4,this.storeLogs({clearContentCache:!0})];case 1:return L.sent(),[3,4];case 2:return L.sent(),[3,4];case 3:return this.remoteStorage.destroy(),G.prototype.destroy.call(this),[7];case 4:return[2]}})})},U.prototype.report=function(L,Y){return __awaiter$6(this,void 0,void 0,function(){var X;return __generator$6(this,function(W){switch(W.label){case 0:if(!L&&U.isInWhiteList)return[2];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,this.remoteStorage.report({downloadOnFailed:L,reportSource:Y})];case 2:return W.sent(),[2,{status:!0,msg:""}];case 3:return X=W.sent(),[2,{status:!1,msg:X.message}];case 4:return[2]}})})},U.prototype.logEnvInfo=function(){try{this.logger.log("UserAgent: "+navigator.userAgent),this.logger.log("URL: "+location.href),this.logger.log("TOP URL: "+urlTool$1.getTopFrameUrl()),this.logger.log("instanceId: "+this.player.config.instanceId),this.logger.log("Kernel List: "+Object.keys(KernelFactory$3.kernelMap).join(","))}catch(L){}},U.prototype.checkWhiteList=function(){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X;return __generator$6(this,function(W){switch(W.label){case 0:return U.hasCheckWhiteList?[2]:(L=this.config.platform,U.hasCheckWhiteList=!0,Y=U,[4,validateWhiteList(L)]);case 1:if(Y.isInWhiteList=W.sent(),!U.isInWhiteList)return[3,5];W.label=2;case 2:return W.trys.push([2,4,,5]),[4,this.report(!1)];case 3:return W.sent(),[3,5];case 4:return X=W.sent(),this.logger.error("Error occur when reporting: "+X),[3,5];case 5:return[2]}})})},U.prototype.setPollLogger=function(L){L===void 0&&(L=!0);var Y=this.config.pollTime,X=Y===void 0?3e3:Y;clearInterval(this.pollTimer),L&&(this.pollTimer=window.setInterval(this.storeLogs,X))},U.prototype.setPageWatcher=function(L){L===void 0&&(L=!0);var Y=this.pageWatcher,X=L?Y.on.bind(Y):Y.off.bind(Y);X(PageWatcher$1.PageWatcherEvent.PageLeave,this.onPageLeave),X(PageWatcher$1.PageWatcherEvent.UNLOAD,this.onPageLeave)},U.prototype.setPlayerEvt=function(L){L===void 0&&(L=!0);var Y=L?this.player.on.bind(this.player):this.player.off.bind(this.player);Y(PLAY_EVENT$1.ERROR,this.onPlayerError)},U.prototype.hookVideoReqInfoEnd=function(L){var Y,X,W=(X=(Y=L.data)===null||Y===void 0?void 0:Y.error)===null||X===void 0?void 0:X.code;W&&(this.logInfoChange.code=W),this.logInfoChange.videoName=this.player.dataset.commonMap.videoName,this.storeLogs()},U.prototype.hookPlaySessionStart=function(){this.logInfoChange=this.collectLogInfo(),this.storeLogs()},U.prototype.hookPlaySessionEnd=function(L){this.logInfoChange.code=L.code,this.storeLogs({clearInfoCache:!0})},U.prototype.collectLogInfo=function(){var L=this.player.dataset.commonMap,Y=L.guid,X=L.drm,W=L.videoName,z=L.vid,J=L.hc_vuserid,Z=L.flowid,ee=L.platform;return{code:"",drm:Boolean(X),startTime:Date.now(),endTime:Date.now(),guid:Y,ua:navigator.userAgent,url:location.href,videoName:W,vid:z,platform:ee,vuid:J,instanceId:this.instanceId,id:Z}},Object.defineProperty(U.prototype,"instanceId",{get:function(){return this.player.config.instanceId},enumerable:!1,configurable:!0}),U.pluginName="offlineLog",U.hasCheckWhiteList=!1,U.isInWhiteList=!1,U}(Plugin),DEFAULT_CONFIG$1={platform:"1",disable:!1,pollTime:3e3},RECORDER_DEPLOY_URL="https://v.qq.com/thumbplayer-offline-log.html",PlayLimitConfigValidateMsg;(function(G){G.EMPTY_CONFIG="\u914D\u7F6E\u4E0D\u80FD\u4E3A\u7A7A",G.POINTS_BOTH_EMPTY="startPoint / endPoint \u914D\u7F6E\u4E0D\u80FD\u540C\u65F6\u4E3A\u7A7A",G.START_TIME_BELOW_ZERO="startPoint.value \u503C\u4E0D\u80FD\u5C0F\u4E8E 0",G.END_TIME_BELOW_START_TIME="endPoint.value \u503C\u4E0D\u80FD\u5C0F\u4E8E startPoint.value"})(PlayLimitConfigValidateMsg||(PlayLimitConfigValidateMsg={}));var DEFAULT_PRIORITY=0,DEFAULT_END_STATE=END_STATE$1.NORMAL,DEFAULT_PLAYTIME_BOUNDARY={startTime:0,startPriority:DEFAULT_PRIORITY,endTime:1/0,endPriority:DEFAULT_PRIORITY,endState:END_STATE$1.NORMAL},ruleValidator={emptyConfigCheck:function(G){if(!G)return PlayLimitConfigValidateMsg.EMPTY_CONFIG},emptyStartAndEndCheck:function(G){var U=G.startPoint,L=G.endPoint;if(!U&&!L)return PlayLimitConfigValidateMsg.POINTS_BOTH_EMPTY},startBelowZero:function(G){var U=G.startPoint;if(U&&U.value<0)return PlayLimitConfigValidateMsg.START_TIME_BELOW_ZERO},endBelowStart:function(G){var U=G.startPoint,L=G.endPoint;if(U&&L&&U.value>=L.value)return PlayLimitConfigValidateMsg.END_TIME_BELOW_START_TIME}},CONFIG_ID_START=0,PlaytimeLimiterPlugin=function(G){__extends$b(U,G);function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.configRules=ruleValidator,L.nextId=CONFIG_ID_START,L.limitConfigMap={},L.isCanplayEmitted=!1,L.canplaySeekPos=null,L.hookVideoTimeupdate=function(Y){var X=Y.playtime;if(!(X<L.range.endTime))return L.player.corePlayer.stop(L.range.endState),s$3.STOP_IMMEDIATE_PROPAGATION},L.hookPlaySessionEnd=function(){L.isCanplayEmitted=null,L.canplaySeekPos=null},L}return Object.defineProperty(U.prototype,"range",{get:function(){return this.limitRange||(this.limitRange=this.mergePlaytimeLimitConfigs(Object.values(this.limitConfigMap))),__assign$a({},this.limitRange)},enumerable:!1,configurable:!0}),U.prototype.addLimitConfig=function(L){if(!this.validatePlayTimeConfig(L))return null;var Y=this.generateID();return this.limitConfigMap[Y]=__assign$a(__assign$a({},L),{vidOrUrl:this.player.vid||this.player.url}),this.onConfigChange(),Y},U.prototype.deleteLimitConfig=function(L){delete this.limitConfigMap[L],this.onConfigChange()},U.prototype.clearAllConfig=function(L){var Y=this;Object.entries(this.limitConfigMap).forEach(function(X){var W=X[0],z=X[1];z.vidOrUrl!==L&&delete Y.limitConfigMap[W]}),this.limitRange=null},U.prototype.getLimitConfig=function(L){return this.limitConfigMap[L]},U.prototype.setLimitConfig=function(L,Y){return this.getLimitConfig(L)&&this.validatePlayTimeConfig(Y)?(this.limitConfigMap[L]=Y,this.onConfigChange(),!0):!1},U.prototype.generateID=function(){return this.nextId++},U.prototype.validatePlayTimeConfig=function(L){var Y=this;return Object.values(this.configRules).every(function(X){var W=X(L);return W?(Y.player.log(W),!1):!0})},U.prototype.mergePlaytimeLimitConfigs=function(L){var Y=this,X=__assign$a({},DEFAULT_PLAYTIME_BOUNDARY);return L.forEach(function(W){var z=W.startPoint,J=W.endPoint;X=Y.mergeStartPoint(X,z),X=Y.mergeEndPoint(X,J)}),X},U.prototype.mergeStartPoint=function(L,Y){return this.shouldUpdateStartTime(L,Y)?__assign$a(__assign$a({},L),{startTime:Y.value,startPriority:Y.priority||DEFAULT_PRIORITY}):L},U.prototype.shouldUpdateStartTime=function(L,Y){if(!Y)return!1;var X=Y.value,W=Y.priority,z=W===void 0?DEFAULT_PRIORITY:W,J=L.startTime,Z=L.startPriority,ee=L.endTime;return X<ee&&(z>Z||z===Z&&X>J)},U.prototype.mergeEndPoint=function(L,Y){return this.shouldUpdateEndTime(L,Y)?__assign$a(__assign$a({},L),{endTime:Y.value,endPriority:Y.priority||DEFAULT_PRIORITY,endState:Y.endState||DEFAULT_END_STATE}):L},U.prototype.shouldUpdateEndTime=function(L,Y){if(!Y)return!1;var X=Y.value,W=Y.priority,z=W===void 0?DEFAULT_PRIORITY:W,J=L.startTime,Z=L.endPriority,ee=L.endTime;return X>J&&(z>Z||z===Z&&X<ee)},U.prototype.onConfigChange=function(){if(this.limitRange=this.mergePlaytimeLimitConfigs(Object.values(this.limitConfigMap)),!(this.player.playtime>=this.range.startTime))return this.seekPlayer(this.range.startTime),__assign$a({},this.limitRange)},U.prototype.hookVideoCanplay=function(){!this.isCanplayEmitted&&this.canplaySeekPos&&(this.player.seek(this.canplaySeekPos),this.canplaySeekPos=null),this.isCanplayEmitted=!0},U.prototype.seekPlayer=function(L){this.isCanplayEmitted?this.player.seek(this.canplaySeekPos):this.canplaySeekPos=L},U.pluginName="playtimeLimiter",U}(Plugin),report=function(G){var U=G.data,L=U===void 0?{}:U,Y=G.url,X=Y===void 0?"":Y,W=constructPayload(L);if(W.length>MAX_LENGTH_OF_PAYLOAD){netTool$1.xhr({method:"POST",url:X,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:W});return}var z=new Image;z.src=X+"&"+W},constructPayload=function(G){G===void 0&&(G={});var U=Object.keys(G).reduce(function(L,Y){return L[Y]=encodeURIComponent(G[Y]||""),L},{_dc:Math.random()});return urlTool$1.object2string(U,"&")},MAX_LENGTH_OF_PAYLOAD=2048,BaseReporter=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.RELEASE_DELAY=3e5,W.reporter=report,W.reportedEvt={},W.FLOW_DATA_KEY="",W.REPORT_URL="",W.REPORT_KEY="",W.config=Y,W}return U.prototype.saveToLS=function(L,Y){var X=this.getPrevData();X[L]={data:Y,ts:Date.now()},lsTool$1.setData(this.FLOW_DATA_KEY,JSON.stringify(X))},U.prototype.removeFromLS=function(L){var Y=this.getPrevData();delete Y[L],lsTool$1.setData(this.FLOW_DATA_KEY,JSON.stringify(Y))},U.prototype.reportPrev=function(){var L=this,Y=this.getPrevData();Object.keys(Y).forEach(function(X){Y[X].ts+L.RELEASE_DELAY<Date.now()&&(L.report(Y[X].data),delete Y[X])}),lsTool$1.setData(this.FLOW_DATA_KEY,JSON.stringify(Y))},U.prototype.report=function(L){if(L===void 0&&(L={}),!uaTool$1.spider){var Y=__assign$a(__assign$a({},this.reportHeader),L);this.reporter({data:Y,url:this.REPORT_URL,key:this.REPORT_KEY})}},U.prototype.getPrevData=function(){var L=lsTool$1.getData(this.FLOW_DATA_KEY)||"{}",Y;try{Y=JSON.parse(L)}catch(X){Y={}}return Y},U}(Plugin),VodQaReportBeaconAppKey="0WEB0QEJW44KW5A5",LiveQaReportBeaconAppKey="0WEB0CN7W9446C2I",VodQaReportCacheKey="__thumbplayer_vod_qa_report__",BeaconSDKPath="//beacon.cdn.qq.com/sdk/4.5.6/beacon_web.min.js",RequestMaxRetry=3,BeaconRequest=function(){function G(){}return G.loadBeaconSDK=function(){var U=this;return typeof window.BeaconAction=="function"?Promise.resolve():(G.SDKLoadingDefer||(G.SDKLoadingDefer=new Promise(function(L,Y){return __awaiter$6(U,void 0,void 0,function(){var X,W,z;return __generator$6(this,function(J){switch(J.label){case 0:W=0,J.label=1;case 1:if(!(W<RequestMaxRetry))return[3,6];J.label=2;case 2:return J.trys.push([2,4,,5]),[4,domTool$1.loadScript(BeaconSDKPath)];case 3:return J.sent(),L(),[3,6];case 4:return z=J.sent(),X=z,[3,5];case 5:return W++,[3,1];case 6:return Y(X),[2]}})})})),G.SDKLoadingDefer)},G.flushQueue=function(U){!G.queues[U]||!G.instances[U]||(G.queues[U].forEach(function(L){G.report(L)}),G.queues[U]=[])},G.clear=function(U){G.queues[U]=[]},G.report=function(U){var L=U.data,Y=U.key,X=G.instances[Y],W=(L||{}).stepname;if(!X){G.queues[Y].push(U);return}X.onDirectUserAction(W,L)},G.register=function(U,L){return __awaiter$6(this,void 0,void 0,function(){var Y;return __generator$6(this,function(X){switch(X.label){case 0:if(G.queues[U])return[2];G.queues[U]=[],L&&(G.SDKLoadingDefer=L),X.label=1;case 1:return X.trys.push([1,3,,4]),[4,G.loadBeaconSDK()];case 2:return X.sent(),G.SDKLoadingDefer=null,Y=new window.BeaconAction({appkey:U,strictMode:!1,isOversea:!1}),G.instances[U]=Y,G.flushQueue(U),[3,4];case 3:return X.sent(),[3,4];case 4:return[2]}})})},G.instances={},G.queues={},G}(),getQQFromCookie$1=function(){var G=cookieTool$1.get("luin")||cookieTool$1.get("uin");return G&&(G=G.replace(/\D/g,"").replace(/^0+/,"")),G},BufferThresholds=1.2*1e3,DEFAULT_KEYS$1$1={cdnuip:"",iqq:"",pvid:"",qqopen_id:COMMON_DATA_KEY.hc_openid,playno:COMMON_DATA_KEY.flowid,cdnid:COMMON_DATA_KEY.cdnid,guid:COMMON_DATA_KEY.guid,fplayerver:COMMON_DATA_KEY.playerver,dsip:"",sstrength:"",devtype:"",nettype:"",freetype:"",platform:COMMON_DATA_KEY.platform,codec:COMMON_DATA_KEY.codec,device:COMMON_DATA_KEY.device,resolution:COMMON_DATA_KEY.resolution,osver:COMMON_DATA_KEY.osver,playertype:COMMON_DATA_KEY.playertype,appver:COMMON_DATA_KEY.appVer,use_p2p:COMMON_DATA_KEY.p2p,p2p_play:COMMON_DATA_KEY.p2p,p2pver:COMMON_DATA_KEY.p2pver,playtype:"",scenesid:COMMON_DATA_KEY.sid,sid:COMMON_DATA_KEY.vid,livepid:COMMON_DATA_KEY.livepid,contentid:COMMON_DATA_KEY.cid,drm:COMMON_DATA_KEY.drmtype,playtime:"",isuserpay:"",live_type:"",xserverip:"",durl:"",lookback:"",live_tag:"",extraInfo:"",spanId:"",tuid:"",ext1:"",ext2:"",ext3:""},CMD$1;(function(G){G[G.START=205]="START",G[G.LOOP=263]="LOOP",G[G.ERROR=150]="ERROR"})(CMD$1||(CMD$1={}));var STEP_NAME$1;(function(G){G.START="live_loading",G.LOOP="live_period",G.ERROR="live_error"})(STEP_NAME$1||(STEP_NAME$1={}));var LiveQaReporterPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.REPORT_KEY=LiveQaReportBeaconAppKey,W.seq=0,W.lastPlayDuration=0,W.bufferHistory=[],W.flowHeader={cnntime:0,maxspeed:0,testspeed:0,downspeed:0,recnncount:0,loadingtime:0,blockcount:0,blocktime:0,errorcode:0,geturltime:0,fullecode:"",prdlength:0,get_stream_data_duration:0,get_sync_frame_duration:0,live_delay:0},W.isSettingLevel=!1,W.setEvtHandler=function(){W.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,W.onStateChange),W.player.on(PLAY_EVENT$1.RETRY_BACKURL,W.onRetryUrl)},W.onRetryUrl=function(){W.flowHeader.recnncount=W.flowHeader.recnncount+1},W.onStateChange=function(J){var Z,ee=J.data,te=ee.key,re=(Z={},Z[DATA_STATE.LOAD_END]=W.onLoad,Z[DATA_STATE.BUFFER_END]=W.onBuffer,Z[DATA_STATE.GET_INFO_END]=W.onGetinfoEnd,Z[DATA_STATE.SET_LEVEL_START]=W.onSetLevel,Z[DATA_STATE.SESSION_START]=W.onSessionStart,Z[DATA_STATE.SESSION_END]=W.onSessionEnd,Z);re[te]&&re[te](ee)},W.onSessionStart=function(){W.resetLoopData(),W.seq=0},W.onSessionEnd=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=ee.code;W.onPeriod({code:te}),W.seq=0,W.endPeriodReport(),W.reportedEvt={}},W.startPeriodReport=function(){W.endPeriodReport(),W.period=setInterval(W.onPeriod,6e4)},W.endPeriodReport=function(){W.period&&(clearInterval(W.period),W.period=null)},W.onSetLevel=function(){W.isSettingLevel=!0,W.onPeriod(),W.endPeriodReport()},W.onBuffer=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie=ee.ftime,ne=re.ftime;ie-ne<=BufferThresholds||W.bufferHistory.push({stime:ne,etime:ie})},W.onGetinfoEnd=function(J){var Z=J.newVal,ee=J.startEvent,te=Z.ftime,re=ee.ftime;W.flowHeader.geturltime=te-re},W.onLoad=function(J){if(!(W.reportedEvt[CMD$1.START]&&!W.isSettingLevel)){W.reportedEvt[CMD$1.START]=!0,W.isSettingLevel=!1;var Z=J.startEvent,ee=Z===void 0?{}:Z,te=J.newVal,re=te===void 0?{}:te,ie=re.code;ie===ErrorCode.SUC&&(W.flowHeader.loadingtime=re.ftime-ee.ftime,W.flowHeader.errorcode=ie,W.flowHeader.fullecode=ie,W.report({step:CMD$1.START,stepname:STEP_NAME$1.START,code:ie}),W.startPeriodReport())}},W.onPeriod=function(J){var Z=(J||{code:ErrorCode.SUC}).code,ee=Z===void 0?ErrorCode.SUC:Z,te=W.bufferHistory.reduce(function(se,ae){var le=se[0],ue=se[1],ce=ae.etime,he=ae.stime,fe=ce-he;return[le+1,ue+fe]},[0,0]),re=te[0],ie=te[1],ne=W.player.dataset.getStats().playDuration;W.flowHeader.blockcount=re,W.flowHeader.blocktime=ie,W.flowHeader.prdlength=ne-W.lastPlayDuration,W.flowHeader.errorcode=ee,W.flowHeader.fullecode=ee;var oe={step:ee===ErrorCode.SUC?CMD$1.LOOP:CMD$1.ERROR,stepname:ee===ErrorCode.SUC?STEP_NAME$1.LOOP:STEP_NAME$1.ERROR,code:ee};W.report(oe),W.resetLoopData(),W.lastPlayDuration=ne},W.resetLoopData=function(){W.bufferHistory=[],W.flowHeader=__assign$a(__assign$a({},W.flowHeader),{blockcount:0,blocktime:0,errorcode:0,loadingtime:0,fullecode:"",prdlength:0,recnncount:0,downspeed:0,live_delay:0})};var z=L.config.liveQaReporterConfig;return W.config={paramsKey:__assign$a(__assign$a({},DEFAULT_KEYS$1$1),(z==null?void 0:z.paramsKey)||{})},W.setEvtHandler(),BeaconRequest.register(W.REPORT_KEY,z==null?void 0:z.externalBeaconDefer),W.reporter=BeaconRequest.report,W}return Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L,Y,X=this.config.paramsKey,W=X===void 0?{}:X,z=this.player.getCommonKv,J=__assign$a({cdnuip:z(W.cdnuip)||"",iqq:z(W.iqq)||getQQFromCookie$1(),qqopen_id:z(W.qqopen_id)||"",pvid:cookieTool$1.get("pgv_pvid")||"",playno:z(W.playno)||"",cdnid:z(W.cdnid)||"",guid:z(W.guid)||"",fplayerver:z(W.fplayerver)||"",dsip:z(W.dsip)||"",sstrength:z(W.sstrength)||0,devtype:z(W.devtype)||0,nettype:z(W.nettype)||100,codec:z(W.codec)||CODEC$1.H264,freetype:z(W.freetype)||0,platform:z(W.platform)||"",device:z(W.device)||"",resolution:z(W.resolution)||"",osver:z(W.osver)||"",playertype:z(W.playertype)||0,appver:z(W.appver)||"",use_p2p:z(W.use_p2p)||0,p2p_play:z(W.p2p_play)||0,p2pver:z(W.p2pver)||"",playtype:z(W.playtype)||1,scenesid:z(W.scenesid)||0,drm:z(W.drm)||0,sid:z(W.sid)||0,livepid:z(W.livepid)||0,contentid:z(W.contentid)||0,playtime:z(W.playtime)||0,isuerpay:z(W.isuserpay)||0,live_type:z(W.live_type)||0,xserverip:z(W.xserverip)||"",durl:z(W.durl)||((Y=(L=this.player)===null||L===void 0?void 0:L.currentVideoInfo)===null||Y===void 0?void 0:Y.loadingUrl)||"",lookback:z(W.lookback)||0,live_tag:z(W.live_tag)||0,extraInfo:z(W.extraInfo)||"",spanId:z(W.spanId)||"",tuid:z(W.tuid)||"",kernel:this.player.kernelName,domain:urlTool$1.getDomainOfURL(urlTool$1.getTopFrameUrl()),seq:this.seq,ext1:z(W.ext1)||"",ext2:z(W.ext2)||"",ext3:z(W.ext3)||""},this.flowHeader);return J},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this.endPeriodReport(),BeaconRequest.clear(this.REPORT_KEY),G.prototype.destroy.call(this)},U.prototype.report=function(L){G.prototype.report.call(this,L),this.seq=this.seq+1},U.pluginName="live-qa-reporter",U}(BaseReporter),AdReportHelper=function(){function G(U){var L=this;this.reportData={},this.currentBufferHistory=[],this.onStateChange=function(Y){var X,W=Y.data,z=W.new,J=W.old,Z=(X={},X[VIDEO_STATE$1.CANPLAY]=L.onCanPlay,X[VIDEO_STATE$1.BUFFERING]=L.onBuffering,X[VIDEO_STATE$1.END]=L.onEnd,X);Z[z]&&Z[z](Y.data.videoInfo,J)},this.onError=function(Y){var X,W,z=Y.data,J=z.videoInfo;if(!!J){var Z=J.uid,ee=J.error,te=L.reportData[Z];!te||(te.load>=0&&(L.emitToMainReporter({code:ee.code,step:"30",stime:te.load,stepname:STEP_NAME.FIRST_LOAD,etime:Date.now(),url:J.loadingUrl,urlIndex:((W=(X=J.config)===null||X===void 0?void 0:X.backupUrls)===null||W===void 0?void 0:W.findIndex(function(re){return re===J.loadingUrl}))||-1},te),te.load=-1),L.emitToMainReporter({step:"50",playDuration:J.playtime,code:ee.code,stepname:STEP_NAME.END,tbcount:0,tbduration:0,scount:0,etime:Date.now(),bcount:L.currentBufferHistory.length,tduration:L.currentBufferHistory.reduce(function(re,ie){return re+(ie.etime-ie.stime)},0)},te))}},this.onFirstPlaying=function(Y){var X=Y.data,W=X.videoInfo;if(!!W){var z=L.reportData[W.uid];if(z){z.load>=0&&L.reportFirstLoad(W,z);var J=Date.now(),Z={step:"32",stepname:STEP_NAME.FIRST_RENDERING,stime:J,etime:J,code:ErrorCode.SUC};L.emitToMainReporter(Z,z);return}}},this.onVideoNodeChange=function(Y){var X=Y.data,W=X.videoInfo;!W||L.reportData[W.uid]||(L.reportData[W.uid]={seq:0,flowidSuffix:"_ad"+L.getAdClipNumber(),load:Date.now()})},this.reportFirstLoad=function(Y,X){var W,z,J,Z,ee,te,re=(Z=(J=(z=(W=L.adPlayer.currentVideoInfo)===null||W===void 0?void 0:W.extraVars)===null||z===void 0?void 0:z.stream)===null||J===void 0?void 0:J.cacheSize)!==null&&Z!==void 0?Z:0,ie={step:"30",stepname:STEP_NAME.FIRST_LOAD,stime:X.load,etime:Date.now(),url:Y.loadingUrl,urlIndex:((te=(ee=Y.config)===null||ee===void 0?void 0:ee.backupUrls)===null||te===void 0?void 0:te.findIndex(function(ne){return ne===Y.loadingUrl}))||-1,code:ErrorCode.SUC,cachesize:re};L.emitToMainReporter(ie,X),X.load=-1},this.onCanPlay=function(Y){if(!!Y){var X=L.reportData[Y.uid];if(X){if(X.load>=0){L.reportFirstLoad(Y,X);return}if(X.buffer>=0){var W=Date.now(),z=X.buffer;if(X.buffer=-1,W-z<=1200)return;L.currentBufferHistory.push({stime:z,etime:Date.now()});var J={step:"35",stime:z,stepname:STEP_NAME.BUFFERING,etime:Date.now(),ptime:L.adPlayer.playtime,code:ErrorCode.SUC};L.emitToMainReporter(J,X);return}}}},this.onEnd=function(Y){if(!!Y){var X=L.reportData[Y.uid];if(X){var W={step:"50",playDuration:Y.playtime,code:ErrorCode.SUC,stepname:STEP_NAME.END,tbcount:0,tbduration:0,scount:0,etime:Date.now(),bcount:L.currentBufferHistory.length,tduration:L.currentBufferHistory.reduce(function(z,J){return z+(J.etime-J.stime)},0)};L.emitToMainReporter(W,X)}}},this.onBuffering=function(Y){if(!!Y){var X=L.reportData[Y.uid];X&&(X.buffer=Date.now())}},this.reporterPlugin=U}return G.prototype.destroy=function(){this.unbindCoreEvents()},G.prototype.init=function(U){this.adPlayer&&this.unbindCoreEvents();var L=U.currentVideoInfo;!L||(this.adPlayer=U,this.bindCoreEvents(),this.reportData={},this.reportData[L.uid]={seq:0,flowidSuffix:"ad"+this.getAdClipNumber(),load:Date.now()})},G.prototype.getAdClipNumber=function(){return Object.keys(this.reportData).length},G.prototype.bindCoreEvents=function(){this.adPlayer.on(PLAY_EVENT$1.STATE_CHANGE,this.onStateChange),this.adPlayer.on(PLAY_EVENT$1.ERROR,this.onError),this.adPlayer.on(PLAY_EVENT$1.VIDEONODE_FIRST_PLAYING,this.onFirstPlaying),this.adPlayer.on(PLAY_EVENT$1.VIDEONODE_CHANGE,this.onVideoNodeChange)},G.prototype.unbindCoreEvents=function(){this.adPlayer.off(PLAY_EVENT$1.STATE_CHANGE,this.onStateChange),this.adPlayer.off(PLAY_EVENT$1.ERROR,this.onError),this.adPlayer.off(PLAY_EVENT$1.VIDEONODE_FIRST_PLAYING,this.onFirstPlaying),this.adPlayer.off(PLAY_EVENT$1.VIDEONODE_CHANGE,this.onVideoNodeChange)},G.prototype.emitToMainReporter=function(U,L){var Y=__assign$a(__assign$a({code:ErrorCode.SUC},U),{flowid:L.flowidSuffix,seq:L.seq,scenesid:1,duration:this.adPlayer.duration,kernel:this.adPlayer.kernelName,vid:"",fmt:"",rate:"",cdnid:"",cdnip:"",drm:"",definition:"",dltype:""});L.seq+=1,this.reporterPlugin.emit("adReport",Y)},G}(),STEP_NAME;(function(G){G.INIT="init_player",G.GETINFO="get_cdn_url",G.FIRST_LOAD="first_load",G.FIRST_RENDERING="first_rendering",G.BUFFERING="second_buffering",G.SEEKING="user_seek",G.END="play_done"})(STEP_NAME||(STEP_NAME={}));var DEFAULT_KEYS$2={platform:COMMON_DATA_KEY.platform,flowid:COMMON_DATA_KEY.flowid,uin:"",QQopenid:COMMON_DATA_KEY.hc_openid,WXopenid:COMMON_DATA_KEY.hc_openid,logintype:COMMON_DATA_KEY.hc_main_login,guid:COMMON_DATA_KEY.guid,uip:"",cdnuip:COMMON_DATA_KEY.cdnuip,codec:COMMON_DATA_KEY.codec,cdnip:COMMON_DATA_KEY.cdnip,online:COMMON_DATA_KEY.online,p2p:COMMON_DATA_KEY.p2p,sstrength:COMMON_DATA_KEY.sstrength,network:COMMON_DATA_KEY.network,speed:COMMON_DATA_KEY.speed,device:COMMON_DATA_KEY.device,resolution:COMMON_DATA_KEY.resolution,testid:COMMON_DATA_KEY.testid,osver:COMMON_DATA_KEY.osver,p2pver:COMMON_DATA_KEY.p2pver,appver:COMMON_DATA_KEY.appVer,playerver:COMMON_DATA_KEY.playerver,playertype:COMMON_DATA_KEY.playertype,confid:COMMON_DATA_KEY.confid,cdnid:COMMON_DATA_KEY.cdnid,drm:COMMON_DATA_KEY.drmtype,scenesid:"",playtype:"",dltype:COMMON_DATA_KEY.dltype,vid:COMMON_DATA_KEY.vid,definition:COMMON_DATA_KEY.currentDefn,fmt:COMMON_DATA_KEY.fmt,rate:COMMON_DATA_KEY.rate,duration:"",kernel:"",ext1:"",ext2:"",ext3:""},VodQaReporterPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.REPORT_KEY=VodQaReportBeaconAppKey,W.FLOW_DATA_KEY=VodQaReportCacheKey,W.seq=0,W.bufferHistory=[],W.seekHistory=[],W.initData={fmt:"",rate:"",cdnid:""},W.bufferCount=0,W.seekCount=0,W.setEvtHandler=function(){W.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,W.onStateChange),W.player.on(PLAY_EVENT$1.SETLEVEL_OVER,function(){W.bufferCount=0,W.seekCount=0}),document.addEventListener("visibilitychange",W.onVisibilityChange),window.addEventListener("pagehide",W.onPageHide)},W.onPageHide=function(){W.saveData()},W.onVisibilityChange=function(J){document.visibilityState==="hidden"?W.saveData():W.player&&W.removeFromLS(W.player.getCommonKv(COMMON_DATA_KEY.flowid))},W.onStateChange=function(J){var Z,ee=J.data,te=ee.key,re=(Z={},Z[DATA_STATE.INIT]=W.onPlayerInit,Z[DATA_STATE.LOAD_END]=W.onLoad,Z[DATA_STATE.BUFFER_END]=W.onBuffer,Z[DATA_STATE.GET_INFO_END]=W.onGetinfoEnd,Z[DATA_STATE.SEEK_END]=W.onSeek,Z[DATA_STATE.SESSION_END]=W.onPlaySessionEnd,Z[DATA_STATE.FIRST_PLAY]=W.onFirstPlay,Z[DATA_STATE.SESSION_START]=W.reset,Z[DATA_STATE.RETRY_BACKURL]=function(){W.bufferCount=0,W.seekCount=0},Z);re[te]&&re[te](ee)},W.onPlayerInit=function(J){var Z=J.newVal,ee=Z.ftime,te=Z.ext,re=te===void 0?{}:te,ie=re.stime;W.report({stepname:STEP_NAME.INIT,step:"5",stime:ie,etime:ee,code:ErrorCode.SUC})},W.onGetinfoEnd=function(J){var Z=J.newVal,ee=J.startEvent,te=Z.ftime,re=Z.code,ie=ee.ftime;W.report({stepname:STEP_NAME.GETINFO,step:"15",stime:ie,etime:te,code:re})},W.onLoad=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie=re.ftime,ne=ee,oe=ne.ftime,se=ne.currentUrl,ae=ne.urlIndex,le=ne.code;W.report({stepname:STEP_NAME.FIRST_LOAD,step:"30",stime:ie,etime:oe,url:se||"",urlindex:ae+1,fileopenedtime:0,firstpacketreadtime:0,code:le})},W.onFirstPlay=function(){if(!W.reportedEvt[STEP_NAME.FIRST_RENDERING]){W.reportedEvt[STEP_NAME.FIRST_RENDERING]=!0;var J=+new Date;W.report({step:"32",stepname:STEP_NAME.FIRST_RENDERING,stime:J,etime:J,code:ErrorCode.SUC})}},W.onBuffer=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie=ee.ftime,ne=ee.playtime,oe=ee.currentUrl,se=ee.code,ae=re.ftime,le=re.prevState,ue=le===VIDEO_STATE$1.SEEKING?1:0,ce=W.player.playbackRate>1?2:1;ie-ae<=BufferThresholds||(W.bufferHistory.push({stime:ae,etime:ie}),W.bufferCount<20&&(W.report({step:"35",stepname:STEP_NAME.BUFFERING,ptime:ne,levent:ue,stime:ae,etime:ie,scene:ce,format:W.player.getCommonKv(W.config.paramsKey.fmt)||0,url:oe||"",reason:0,code:se,vt:W.player.getCommonKv(W.config.paramsKey.cdnid)||0}),W.bufferCount+=1))},W.onSeek=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie=ee.ftime,ne=ee.playtime,oe=ee.code,se=ee.ext,ae=se===void 0?{}:se,le=re.ftime,ue=re.playtime;!ae.isUserSeek||(W.seekHistory.push({lstime:le,letime:ie}),W.seekCount<20&&(W.report({step:"40",stepname:STEP_NAME.SEEKING,lstime:le,letime:ie,pstime:ue,petime:ne,format:W.player.getCommonKv(W.config.paramsKey.fmt)||0,code:oe}),W.seekCount+=1))},W.onPlaySessionEnd=function(J){if(!W.reportedEvt[STEP_NAME.END]){W.reportedEvt[STEP_NAME.END]=!0;var Z=J.newVal,ee=Z===void 0?{}:Z,te=ee.ftime,re=ee.code,ie=W.player.dataset.getStats().playDuration,ne=[re.indexOf(ErrorCode.GETINFO_SERVER_CODE_PREFIX)===0,re.indexOf("70014")===0,re.indexOf("7004")===0,re==="70011112",re==="70011113"].some(function(se){return se}),oe=ne?ErrorCode.SUC:re;W.report(__assign$a(__assign$a({step:"50",stepname:STEP_NAME.END,etime:te,playduration:ie,code:oe},W.seekStat),W.bufferStat)),W.removeFromLS(W.player.getCommonKv(COMMON_DATA_KEY.flowid)),W.seq=0}},W.onInit=function(){W.reportPrev()},W.saveData=function(){var J=+new Date,Z=W.player.getCommonKv(COMMON_DATA_KEY.flowid);if(!(!Z||W.reportedEvt[STEP_NAME.END])){var ee=W.player.dataset.getStats().playDuration,te=__assign$a(__assign$a({step:"50",stepname:STEP_NAME.END,etime:J,code:ErrorCode.SUC,playduration:ee},W.seekStat),W.bufferStat);W.saveToLS(Z,__assign$a(__assign$a({},W.reportHeader),te))}},W.reset=function(){W.reportedEvt={},W.initData.fmt="",W.initData.rate="",W.initData.cdnid="",W.bufferHistory=[],W.seekHistory=[],W.bufferCount=0,W.seekCount=0};var z=L.config.vodQaReporterConfig;return W.config={paramsKey:__assign$a(__assign$a({},DEFAULT_KEYS$2),(z==null?void 0:z.paramsKey)||{})},W.setEvtHandler(),BeaconRequest.register(W.REPORT_KEY,z==null?void 0:z.externalBeaconDefer),W.reporter=BeaconRequest.report,W.onInit(),W.adReportHelper=new AdReportHelper(W),W.player.on(H5_PLAY_EVENT.AD_REQ_ASSETS_START,function(J){var Z=J.data;setTimeout(function(){var ee=getAdPlugin(L==null?void 0:L.config.instanceId),te=ee[Z.adType==="ZT"?"ztVideoAdPlayer":"videoAdPlayer"];!te||W.adReportHelper.init(te)})}),W.on("adReport",function(J){G.prototype.report.call(W,__assign$a(__assign$a({},J.data),{flowid:W.reportHeader.flowid+"_"+J.data.flowid}))}),W}return Object.defineProperty(U.prototype,"seekStat",{get:function(){var L=this.seekHistory.reduce(function(W,z){var J=W[0],Z=W[1],ee=z.letime-z.lstime;return ee>BufferThresholds?[J+1,Z+ee]:W},[0,0]),Y=L[0],X=L[1];return{tbcount:Y,tbduration:X,scount:this.seekHistory.length}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"bufferStat",{get:function(){var L=this.bufferHistory.reduce(function(Y,X){return Y+(X.etime-X.stime)},0);return{tduration:L,bcount:this.bufferHistory.length}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L=this,Y=this.config.paramsKey,X=this.player.getCommonKv;Object.entries(this.initData).forEach(function(z){var J=z[0],Z=z[1];Z||(L.initData[J]=X(Y[J])||"")});var W={platform:X(Y.platform)||"",flowid:X(Y.flowid)||"",uin:X(Y.uin)||getQQFromCookie$1(),QQopenid:X(Y.QQopenid)||"",WXopenid:X(Y.WXopenid)||"",logintype:X(Y.logintype)||0,guid:X(Y.guid)||"",uip:X(Y.uip)||"",cdnuip:X(Y.cdnuip)||"",cdnip:X(Y.cdnip)||"",online:X(Y.online)||1,p2p:X(Y.p2p)||0,sstrength:X(Y.sstrength)||0,network:X(Y.network)||0,speed:X(Y.speed)||0,device:X(Y.device)||"",resolution:X(Y.resolution)||"",testid:X(Y.testid)||0,codec:X(Y.codec)||CODEC$1.H264,osver:X(Y.osver)||"",p2pver:X(Y.p2pver)||"",appver:X(Y.appver)||"",playerver:X(Y.playerver)||"",confid:X(Y.confid)||0,playertype:X(Y.playertype)||0,cdnid:this.initData.cdnid,scenesid:X(Y.scenesid)||0,playtype:0,dltype:X(Y.dltype)||0,vid:X(Y.vid)||"",fmt:this.initData.fmt,rate:this.initData.rate,drm:X(Y.drm)||0,definition:X(Y.definition)||"",duration:Math.round(X(Y.duration)||this.player.duration),seq:this.seq,kernel:this.player.kernelName,domain:urlTool$1.getDomainOfURL(urlTool$1.getTopFrameUrl()),ext1:X(Y.ext1)||"",ext2:X(Y.ext2)||"",ext3:X(Y.ext3)||""};return W},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){window.removeEventListener("pagehide",this.onPageHide),document.removeEventListener("visibilitychange",this.onVisibilityChange),BeaconRequest.clear(this.REPORT_KEY),G.prototype.destroy.call(this)},U.prototype.report=function(L){G.prototype.report.call(this,L),this.seq=this.seq+1},U.pluginName="vod-qa-reporter",U}(BaseReporter),OFFICIAL_PLUGIN={VOD_FLOW_REPORTER:"vod-flow-reporter",LIVE_FLOW_REPORTER:"live-flow-reporter",GETINFO_LIVE:"getinfo-live",GETINFO_VOD:"getinfo-vod",BARRAGE:"barrage",MARKID:"markid",CONTEXT_MENU:"context-menu",WATERMARK:"ui-watermark",UI_PREVIEW:"ui-preview",UI_PREVIEW_LIST:"ui-preview-list",UI_ROLE_FILTER:"ui-role-filter",SETTING_BTN:"setting-btn",CTRLBAR:"ctrlbar",ERROR_PAGE:"error-page",FULLSCREEN_RATIO:"fullscreen-ratio",INFO_PANEL:"info-panel",LIVE_POLL:"live-poll",POSTER:"poster",SUBTITLE:"subtitle",TIPS:"tips",UI_LOADING:"ui-loading",VR:"vr"},PLUGIN_MAP={"vod-flow-reporter":{cdnPath:"thumbplayer-plugin-atta-reporter",version:"1.4.93"},"live-flow-reporter":{cdnPath:"thumbplayer-plugin-atta-reporter",version:"1.4.93"},"getinfo-live":{pluginName:"__thumbplayer-video-request",version:"1.4.84"},"getinfo-vod":{pluginName:"__thumbplayer-video-request",version:"1.4.94"},barrage:{pluginName:"Barrage",version:"1.4.91"},markid:{pluginName:"ui-markid",version:"1.4.84"},"context-menu":{cdnPath:"thumbplayer-plugin-ui-contextmenu",version:"1.4.95"},"ui-preview-list":{cdnPath:"thumbplayer-plugin-ui-preview",version:"1.4.67"},"ui-preview":{cdnPath:"thumbplayer-plugin-ui-preview",version:"1.4.67"},"ui-watermark":{cdnPath:"thumbplayer-plugin-watermark",version:"1.4.95"},"ui-role-filter":{version:"1.4.85"},"setting-btn":{version:"1.4.89"},ctrlbar:{version:"1.4.95"},"error-page":{version:"1.4.89"},"fullscreen-ratio":{version:"1.4.89"},"info-panel":{version:"1.4.91"},"live-poll":{version:"1.4.76"},poster:{version:"1.4.87"},subtitle:{version:"1.4.84"},tips:{version:"1.4.95"},"ui-loading":{version:"1.4.67"},vr:{version:"1.4.84"}},H5_PAUSE_TYPE;(function(G){G.USER_CLICK="user-click"})(H5_PAUSE_TYPE||(H5_PAUSE_TYPE={}));var AUTO_PLAY_POLICY;(function(G){G.IN_MUTED="autoPlayInMuted",G.USER_GESTURE="autoPlayRequireByUserGesture"})(AUTO_PLAY_POLICY||(AUTO_PLAY_POLICY={}));var PictureDirection;(function(G){G.NORMAL="normal",G.VERTICAL="vertical",G.HORIZON="horizon"})(PictureDirection||(PictureDirection={}));var PluginablePlayer=function(G){__extends$b(U,G);function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.plugins={},L.pluginMsg=new s$3,L.pluginMsgProxy={on:L.pluginMsg.on.bind(L.pluginMsg),off:L.pluginMsg.off.bind(L.pluginMsg),once:L.pluginMsg.once.bind(L.pluginMsg)},L.loadPlugin=function(Y){var X=Y.config,W=Y.timeout,z=Y.version,J=Y.crossOrigin,Z=Y.globalName,ee=Y.pluginName,te=ee===void 0?Z:ee,re=Y.insName,ie=Y.url;if(!ie&&!PLUGIN_MAP[te])throw new Error("\u60A8\u6240\u4F20\u5165\u7684\u63D2\u4EF6\u4E0D\u662F\u5B98\u65B9\u63D2\u4EF6\uFF0C\u5FC5\u987B\u63D0\u4F9B url");if(!ie&&PLUGIN_MAP[te]){var ne=z||PLUGIN_MAP[te].version,oe=PLUGIN_MAP[te].cdnPath||"thumbplayer-plugin-"+te;te=PLUGIN_MAP[te].pluginName||te,ie="//vm.gtimg.cn/thumbplayer/plugins/"+oe+"/"+ne+"/index.min.js"}return re=re||te,domTool$1.loadScript(ie,void 0,W,{crossOrigin:J}).then(function(){getPlugin(te)||registerPlugin(te,window[Z]),L.plugins[re]||L.createPlugin(re,__assign$a(__assign$a({},X),{pluginName:te}))})},L}return U.prototype.createPlugin=function(L,Y){Y===void 0&&(Y={});var X=Y.pluginName,W=X===void 0?L:X,z=getPlugin(W);if(!z)throw new Error("cannot find plugin: "+W);this.triggerSetupEvent({name:L,plugin:z,instance:null},!0),createPluginFactory(L,z,this,Y,{msg:this.pluginMsgProxy}),W===AdPluginName&&(setAdPlugin(this.config.instanceId,this.plugins[AdPluginName]),delete this.plugins[AdPluginName]),this.triggerSetupEvent({name:L,plugin:z,instance:null})},U.prototype.createPlugins=function(L){var Y=this;L.forEach(function(X){try{typeof X=="string"?Y.createPlugin(X):Y.createPlugin.apply(Y,X)}catch(W){console.error(W)}})},U.prototype.triggerSetupEvent=function(L,Y){var X=this;Y===void 0&&(Y=!1);var W=(Y?"before":"")+"pluginsetup";setTimeout(function(){X.pluginMsg.emit(W+":"+L.name,L)})},U.registerPlugin=registerPlugin,U.deregisterPlugin=deregisterPlugin,U.getPlugins=getPlugins,U.getPlugin=getPlugin,U.isFunctionPlugin=isFunctionPlugin,U.pluginExists=pluginExists,U.isBasicPlugin=isFunctionPlugin,U}(s$3);function definePlugins(G){return G.map(function(U){return[U[0].pluginName,U[1]]})}function autobind(G){return function(U,L,Y){var X=G;if(!X){var W=2,z=L.slice(W).toLowerCase(),J=Object.keys(PLAY_EVENT$1).find(function(ee){return PLAY_EVENT$1[ee].toLowerCase()===z});J?X=PLAY_EVENT$1[J]:(J=Object.keys(H5_PLAY_EVENT).find(function(ee){return H5_PLAY_EVENT[ee].toLowerCase()===z}),X=H5_PLAY_EVENT[J])}var Z=Y.value;Y.value=function(){for(var ee=[],te=0;te<arguments.length;te++)ee[te]=arguments[te];X&&this.player?this.player.on(X,Z.bind(this)):Z.apply(this,ee)}}}var logApiInvoke=function(G,U,L){var Y=L.value;L.value=function(){for(var X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];var z="";try{z=JSON.stringify(X)}catch(J){z="parse arg failed"}return this.setStateKv(U,{type:LOG_TYPE.API_INVOKE,ftime:Date.now(),ext:{from:"thumbplayer-h5",args:z}}),Y.apply(this,X)}},once=function(G,U,L){var Y=L.value;L.value=function(){for(var X=[],W=0;W<arguments.length;W++)X[W]=arguments[W];if(!this["__hasRun"+U])return this["__hasRun"+U]=!0,Y.apply(this,X)}},BaseFlowNode=function(G){__extends$b(U,G);function U(L){var Y=G.call(this)||this;return Y.flowid=L.flowid,Y}return U.prototype.destroy=function(){this.removeAllListeners()},U.prototype.getName=function(){return""},U}(s$3),FLOW_NODE_EVENT;(function(G){G.PRELOAD="PRELOAD",G.END="END",G.ABORT="ABORT"})(FLOW_NODE_EVENT||(FLOW_NODE_EVENT={}));var AdFlowNode=function(G){__extends$b(U,G);function U(L){var Y,X=G.call(this,L)||this;return X.config=L,X.onAdEnd=function(W){var z=W.data;z.adType===AD_TYPE.PRE&&(X.config.corePlayer.volume=getAdPlugin(X.config.instanceId).getAdVolume()),!X.isInValidAd(z)&&X.endFlow()},X.onAdAssetsLoaded=function(W){var z=W.data;X.isInValidAd(z)||X.emit(FLOW_NODE_EVENT.PRELOAD)},X.onAdPlayBlocked=function(W){var z=W.data;X.isInValidAd(z)||(X.isPreload=!0)},X.logger=new Logger$1(L.instanceId,"AdFlowNode"),(Y=getAdPlugin(L.instanceId))===null||Y===void 0||Y.on(H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,X.onAdPlayBlocked),X}return U.prototype.getName=function(){return"AdFlowNode."+this.config.startParam.adType},U.prototype.start=function(){var L=this;if(!this.checkCanPlayAd()){this.logger.log(this.getName()+" skip exec start"),this.endFlow();return}return this.logger.log(this.getName()+" exec start"),this.isPreload=!1,this.bindAdEvents(),getAdPlugin(this.config.instanceId).playAd(this.startParam).catch(function(){return L.endFlow()})},U.prototype.preload=function(){var L=this,Y=function(){L.emit(FLOW_NODE_EVENT.PRELOAD,{forcePreload:!0})};if(!this.checkCanPlayAd()){this.logger.log(this.getName()+" skip exec preload"),Y();return}return this.logger.log(this.getName()+" exec preload"),this.isPreload=!0,this.bindAdEvents(),getAdPlugin(this.config.instanceId).loadAd(this.startParam).then(function(X){X===!1&&Y()}).catch(Y)},U.prototype.destroy=function(){var L=getAdPlugin(this.config.instanceId);L&&(L.off(H5_PLAY_EVENT.AD_END,this.onAdEnd),L.off(H5_PLAY_EVENT.AD_ASSETS_LOADED,this.onAdAssetsLoaded),L.off(H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,this.onAdPlayBlocked)),G.prototype.destroy.call(this)},U.prototype.checkCanPlayAd=function(){return getAdPlugin(this.config.instanceId)&&this.startParam},U.prototype.bindAdEvents=function(){var L=getAdPlugin(this.config.instanceId);L.on(H5_PLAY_EVENT.AD_END,this.onAdEnd),L.on(H5_PLAY_EVENT.AD_ASSETS_LOADED,this.onAdAssetsLoaded)},Object.defineProperty(U.prototype,"startParam",{get:function(){return this.config.startParam},enumerable:!1,configurable:!0}),U.prototype.endFlow=function(){this.emit(FLOW_NODE_EVENT.END),this.destroy()},U.prototype.isInValidAd=function(L){return L.adType!==this.config.startParam.adType},__decorate$7([once,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[]),__metadata$7("design:returntype",void 0)],U.prototype,"bindAdEvents",null),U}(BaseFlowNode),FlowManager=function(){function G(U){this.config=U,this.flowNodeList=[],this.currentFlowNodeIndex=0,this.lastNodeList=[],this.logger=new Logger$1(U.playerInstanceId,"FlowManager")}return Object.defineProperty(G.prototype,"onFlowEnd",{get:function(){return this.config.onFlowEnd||function(){}},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"currentFlowNode",{get:function(){return this.flowNodeList[this.currentFlowNodeIndex]},enumerable:!1,configurable:!0}),G.prototype.push=function(){for(var U,L=this,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];Y.forEach(function(W){return L.bindNodeEvents(W)}),(U=this.flowNodeList).push.apply(U,Y)},G.prototype.pushLastNode=function(U){this.push(U),this.lastNodeList.push(U)},G.prototype.clear=function(){this.flowNodeList.forEach(function(U){return U.destroy()}),this.flowNodeList=[],this.lastNodeList=[],this.currentFlowNodeIndex=0},G.prototype.bindNodeEvents=function(U){var L=this;U.on(FLOW_NODE_EVENT.PRELOAD,function(Y){var X,W=Y.data;L.logger.log(U.getName()+" emited: FLOW_NODE_EVENT.PRELOAD"),(!L.config.disablePreload||(W==null?void 0:W.forcePreload))&&((X=L.getNextNode(U))===null||X===void 0||X.preload())}).on(FLOW_NODE_EVENT.END,function(Y){var X=Y.data;L.logger.log(U.getName()+" emited: FLOW_NODE_EVENT.END"),X.videoEndState&&(L.videoEndState=X.videoEndState),U.removeAllListeners();var W=L.getNextNode(U);if(!W){L.logger.log("no next node after "+U.getName()+", clear"),L.clear(),L.onFlowEnd({code:ErrorCode.SUC,endState:L.videoEndState}),L.videoEndState="";return}if(L.lastNodeList.includes(U))return L.logger.log("lastNodeList includes "+U.getName()+", end"),L.onFlowEnd({code:ErrorCode.SUC});L.currentFlowNodeIndex+=1,L.logger.log("next node start, current index is "+L.currentFlowNodeIndex),W.start()}).on(FLOW_NODE_EVENT.ABORT,function(Y){var X=Y.data;L.logger.log(U.getName()+" emited: FLOW_NODE_EVENT.ABORT"),L.clear(),L.onFlowEnd(__assign$a(__assign$a({},X),{endState:X.endState||END_STATE$1.ERROR}))})},G.prototype.getNextNode=function(U){var L=this.flowNodeList.indexOf(U);if(L!==-1)return this.flowNodeList[L+1]},G}(),maxRetryTimes=3,maxRetryTimesInVodSession=10,maxRetryTimesInLiveSession=30,VideoFlowNode=function(G){__extends$b(U,G);function U(L){var Y,X=G.call(this,L)||this;return X.config=L,X.retryTimes=0,X.retryTimesInSession=0,X.onVideoPlayBlocked=function(){return X.isPreload=!0},X.onVideoTimeUpdate=function(){var W,z=10,J=(W=X.startParam.postAdReqLeftTime)!==null&&W!==void 0?W:z;Number.isNaN(J)||X.corePlayer.playtime+J>=X.corePlayer.duration&&X.emitPreload()},X.onVideoStop=function(W){var z,J=W.data,Z=(z=J.videoInfo)===null||z===void 0?void 0:z.error;Z||(X.flowOverHandler(),X.emit(FLOW_NODE_EVENT.END,{videoEndState:J.endState}))},X.onVideoStateChange=function(W){var z=W.data;z.new===VIDEO_STATE$1.PLAYING&&(X.retryTimes=0)},X.onVideoError=function(W){var z,J,Z=W.data,ee=X.isLive?maxRetryTimesInLiveSession:maxRetryTimesInVodSession,te=X.retryTimesInSession>=ee,re=(z=Z==null?void 0:Z.videoInfo)===null||z===void 0?void 0:z.error;if(!X.startParam.vid||X.retryTimes>=maxRetryTimes||te||(re==null?void 0:re.fatal)){X.flowOverHandler(),X.emit(FLOW_NODE_EVENT.ABORT,__assign$a(__assign$a({},re),{code:(re==null?void 0:re.code)||ErrorCode.UNKNOWN}));return}X.retryTimes+=1,X.retryTimesInSession+=1,X.logger.log("play retry, retryTimes="+X.retryTimes+", retryTimesInSession="+X.retryTimesInSession),X.config.extEvtDispatcher.emit(H5_EXT_EVENT.RETRY_PLAY,{retryTimes:X.retryTimes}),X.startParam.videoLoadParam=__assign$a(__assign$a({},X.startParam.videoLoadParam),{startTime:(J=Z.videoInfo)===null||J===void 0?void 0:J.playtime}),X.isPreload?X.preload():X.start()},X.logger=new Logger$1(X.corePlayer.config.instanceId,"VideoFlowNode"),X.evtMap=(Y={},Y[PLAY_EVENT$1.TIME_UPDATE]=X.onVideoTimeUpdate,Y[PLAY_EVENT$1.STOPED]=X.onVideoStop,Y[PLAY_EVENT$1.ERROR]=X.onVideoError,Y[PLAY_EVENT$1.STATE_CHANGE]=X.onVideoStateChange,Y[PLAY_EVENT$1.AUTOPLAY_BLOCKED]=X.onVideoPlayBlocked,Y),X.setPlayerEvents(!0),X}return Object.defineProperty(U.prototype,"isLive",{get:function(){return this.corePlayer.config.type===PLAY_MODE$1.LIVE},enumerable:!1,configurable:!0}),U.prototype.getName=function(){return"VideoFlowNode"},U.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X;return __generator$6(this,function(W){switch(W.label){case 0:return this.isPreload?(this.isPreload=!1,this.logger.log(this.getName()+" exec start on preloaded"),[4,this.loadDefer]):[3,2];case 1:return W.sent(),this.isLive&&this.corePlayer.resize({width:"100%"}),this.corePlayer.play(),[2];case 2:return this.logger.log(this.getName()+" exec start"),this.isPreload=!1,[4,this.getVideoRsp()];case 3:return L=W.sent(),Y=L.urlConfig,X=L.kernelName,X&&(this.startParam.videoLoadParam=__assign$a({kernelName:X},this.startParam.videoLoadParam)),typeof this.config.videoLoadParamModifier=="function"&&(this.startParam.videoLoadParam=this.config.videoLoadParamModifier(this.startParam.videoLoadParam)),this.corePlayer.play(Y,this.startParam.videoLoadParam),[2]}})})},U.prototype.preload=function(){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X;return __generator$6(this,function(W){switch(W.label){case 0:return this.logger.log(this.getName()+" exec preload"),this.isPreload=!0,this.loadDefer=this.getVideoRsp(),[4,this.loadDefer];case 1:return L=W.sent(),Y=L.urlConfig,X=L.kernelName,X&&(this.startParam.videoLoadParam=__assign$a({kernelName:X},this.startParam.videoLoadParam)),this.isLive?(this.corePlayer.volume=0,[4,this.corePlayer.play(Y,this.startParam.videoLoadParam)]):[3,3];case 2:return W.sent(),this.corePlayer.resize({width:0}),[3,4];case 3:this.corePlayer.load(Y,this.startParam.videoLoadParam),W.label=4;case 4:return[2]}})})},U.prototype.setLevel=function(L){var Y;return __awaiter$6(this,void 0,void 0,function(){var X,W=this;return __generator$6(this,function(z){switch(z.label){case 0:return this.emitFromVideoNode(H5_PLAY_EVENT.VIDEO_SETLEVEL_START,{level:L}),[4,this.getLevelUrlConfig(L)];case 1:if(X=z.sent(),!X||!X.url)throw new Error("setLevel url is empty");return[2,(Y=this.corePlayer.setLevel(X.url,X.backupUrls,X))===null||Y===void 0?void 0:Y.catch(function(J){throw W.emitFromVideoNode(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,{code:(J==null?void 0:J.code)||ErrorCode.UNKNOWN,message:J==null?void 0:J.message,level:L}),J})]}})})},U.prototype.destroy=function(){this.setPlayerEvents(!1),G.prototype.destroy.call(this)},U.prototype.emitPreload=function(){this.emit(FLOW_NODE_EVENT.PRELOAD,{forcePreload:!0})},U.prototype.requestVideoInfo=function(L){var Y,X;return L===void 0&&(L={}),__awaiter$6(this,void 0,void 0,function(){var W,z,J,Z,ee,te,re,ie=this;return __generator$6(this,function(ne){switch(ne.label){case 0:return W=this.config.videoReqInfoPlugin,z=L.extraData,J=z===void 0?{}:z,Z=L.emitFlowEvent,ee=Z===void 0?!0:Z,W?(ee&&this.tryEmit(function(){return ie.emitFromVideoNode(H5_PLAY_EVENT.VIDEO_REQ_INFO_START)}),(Y=W.abort)===null||Y===void 0||Y.call(W),this.tryEmit(function(){return ie.config.extEvtDispatcher.emit(H5_EXT_EVENT.GETINFO_START)}),[4,W.request(this.startParam.vid,__assign$a(__assign$a(__assign$a({},this.startParam.videoReqInfoParam),{flowid:this.flowid}),J))]):[2];case 1:return te=ne.sent(),this.tryEmit(function(){return ie.config.extEvtDispatcher.emit(H5_EXT_EVENT.GETINFO_OVER,te)}),re=((X=te.error)===null||X===void 0?void 0:X.code)||ErrorCode.SUC,ee&&this.tryEmit(function(){return ie.emitFromVideoNode(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,{code:re,data:te})}),[2,te]}})})},U.prototype.getVideoRsp=function(){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X,W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:if(L=this.startParam.urlConfig,L)return[2,{urlConfig:L}];Z.label=1;case 1:return Z.trys.push([1,3,,4]),[4,this.requestVideoInfo()];case 2:if(Y=Z.sent(),X=Y||{},W=X.urlConfig,z=X.error,z||!isUrlConfigValid(W))throw z;return[2,Y];case 3:return J=Z.sent(),this.logger.log(J),this.flowOverHandler(),this.emit(FLOW_NODE_EVENT.ABORT,__assign$a(__assign$a({},J),{code:(J==null?void 0:J.code)||ErrorCode.GETINFO_NET})),[2,{urlConfig:null}];case 4:return[2]}})})},U.prototype.setPlayerEvents=function(L){var Y=this;L===void 0&&(L=!0);var X=L?this.corePlayer.on:this.corePlayer.off;Object.keys(this.evtMap).forEach(function(W){X.call(Y.corePlayer,W,Y.evtMap[W])})},U.prototype.flowOverHandler=function(){this.retryTimes=0,this.retryTimesInSession=0},Object.defineProperty(U.prototype,"corePlayer",{get:function(){return this.config.corePlayer},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"startParam",{get:function(){return this.config.startParam},set:function(L){this.config.startParam=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"emitFromVideoNode",{get:function(){return this.config.emitFromVideoNode},enumerable:!1,configurable:!0}),U.prototype.getLevelUrlConfig=function(L){var Y,X;return __awaiter$6(this,void 0,void 0,function(){var W,z,J,Z;return __generator$6(this,function(ee){switch(ee.label){case 0:return isUrlConfig(L)?(W=L,[3,4]):[3,1];case 1:return typeof L!="string"?[3,2]:(W={url:L},[3,4]);case 2:return z=__assign$a(__assign$a({},this.startParam.videoReqInfoParam),L),this.startParam=__assign$a(__assign$a({},this.startParam),{videoReqInfoParam:z}),[4,this.requestVideoInfo({emitFlowEvent:!1,extraData:z})];case 3:if(J=ee.sent(),!J)throw new Error;if(W=J.urlConfig,J.error)throw Z=(X=(Y=J.error.data)===null||Y===void 0?void 0:Y.params)===null||X===void 0?void 0:X.msg,this.emitFromVideoNode(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,{code:J.error.code||ErrorCode.UNKNOWN,message:Z||J.error.message,level:L}),J.error;ee.label=4;case 4:return[2,W]}})})},U.prototype.tryEmit=function(L){try{L()}catch(Y){this.logger.error(Y)}},__decorate$7([once,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[]),__metadata$7("design:returntype",void 0)],U.prototype,"emitPreload",null),U}(BaseFlowNode);function isUrlConfigValid(G){return Array.isArray(G)?G.every(isUrlConfig):isUrlConfig(G)}function isUrlConfig(G){return typeof(G==null?void 0:G.url)=="string"}var FlowPlayer=function(G){__extends$b(U,G);function U(L){var Y=G.call(this)||this;Y.isSettingLevel=!1,Y.emitFromVideoNode=function(z){for(var J=[],Z=1;Z<arguments.length;Z++)J[Z-1]=arguments[Z];Y.emit.apply(Y,__spreadArray$2([z],J))},Y.onFlowEnd=function(z){var J,Z=z.code,ee=Z===void 0?ErrorCode.SUC:Z,te=z.endState,re=te===void 0?END_STATE$1.NORMAL:te;Y.log("onFlowEnd, code="+ee+", endState="+re),Y.config.type===PLAY_MODE$1.LIVE&&((J=getAdPlugin(Y.config.instanceId))===null||J===void 0||J.stopAd()),Y.emit(H5_PLAY_EVENT.PLAY_SESSION_END,__assign$a(__assign$a({},z),{endState:re,code:ee}))};var X=L.useSingleVideoElement,W=X===void 0?uaTool$1.mobile:X;return Y.corePlayer=new KernelProxy$1(__assign$a(__assign$a({},L),{maxVideoNodeCount:W?1:L==null?void 0:L.maxVideoNodeCount,createVideoNodeWhenLoad:W})),Y.logger=new Logger$1(Y.config.instanceId,"FlowPlayer"),Y.flowManager=new FlowManager({playerInstanceId:Y.config.instanceId,onFlowEnd:Y.onFlowEnd,disablePreload:W}),Y.proxyAllPlayEvent(),Y.proxyStateChange(),Y.proxyVideoStopped(),proxyPlayEvent(Y,Y.corePlayer),Y.on(H5_PLAY_EVENT.PLAY_SESSION_START,function(){Y.isSettingLevel=!1}),Y}return Object.defineProperty(U.prototype,"videoReqInfoPlugin",{get:function(){return null},enumerable:!1,configurable:!0}),U.prototype.load=function(L,Y){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(X){return L?(this.loadItem(L,Y),[2,this.flowManager.currentFlowNode.preload()]):[2,this.corePlayer.load()]})})},U.prototype.play=function(L,Y){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(X){return L?(this.loadItem(L,Y),[2,this.flowManager.currentFlowNode.start()]):[2,this.resumePlay()]})})},U.prototype.setLevel=function(L){return __awaiter$6(this,void 0,void 0,function(){var Y;return __generator$6(this,function(X){switch(X.label){case 0:if(!this.checkCanSetLevel())throw new Error("setLevel can't start");this.isSettingLevel=!0,X.label=1;case 1:return X.trys.push([1,3,4,5]),[4,this.videoNode.setLevel(L)];case 2:return X.sent(),[3,5];case 3:throw Y=X.sent(),Y;case 4:return this.isSettingLevel=!1,[7];case 5:return[2]}})})},U.prototype.preloadVid=function(L){throw new Error("Method not implemented.")},U.prototype.pause=function(L){return this.corePlayer.pause(L)},U.prototype.seek=function(L){return this.corePlayer.seek(L)},U.prototype.stop=function(L){var Y,X,W;!this.flowManager.currentFlowNode||(this.log("stop(), endState="+L),this.flowManager.clear(),(X=getAdPlugin((Y=this.config)===null||Y===void 0?void 0:Y.instanceId))===null||X===void 0||X.stopAd(),(W=this.videoReqInfoPlugin)===null||W===void 0||W.abort(),this.corePlayer.stop(L),this.emit(H5_PLAY_EVENT.PLAY_SESSION_END,{code:ErrorCode.SUC,endState:L||END_STATE$1.INTERRUPT}))},U.prototype.destroy=function(){return this.stop(),this.removeAllListeners(),this.corePlayer.destroy()},U.prototype.checkCanSetLevel=function(){return this.videoNode&&!this.isSettingLevel},U.prototype.loadPostAd=function(){!this.videoNode||this.flowManager.currentFlowNode!==this.videoNode||this.videoNode.emitPreload()},U.prototype.prepareUsageData=function(){return this.corePlayer.prepareUsageData()},Object.defineProperty(U.prototype,"nodeBeforePreAd",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nodeBeforePostAd",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoNode",{get:function(){return this.flowManager.flowNodeList.find(function(L){return L instanceof VideoFlowNode})},enumerable:!1,configurable:!0}),U.prototype.proxyAllPlayEvent=function(){var L=this;Object.keys(PLAY_EVENT$1).forEach(function(Y){L.corePlayer.on(PLAY_EVENT$1[Y],function(X){var W=X.data;return L.emit(PLAY_EVENT$1[Y],W)})})},U.prototype.proxyStateChange=function(){var L,Y=this,X=(L={},L[VIDEO_STATE$1.LOAD_START]=H5_PLAY_EVENT.VIDEO_LOAD_START,L[VIDEO_STATE$1.CANPLAY]=H5_PLAY_EVENT.VIDEO_CANPLAY,L[VIDEO_STATE$1.BUFFERING]=H5_PLAY_EVENT.VIDEO_BUFFERING,L[VIDEO_STATE$1.SEEKING]=H5_PLAY_EVENT.VIDEO_SEEKING,L[VIDEO_STATE$1.SEEKED]=H5_PLAY_EVENT.VIDEO_SEEKED,L);this.corePlayer.on(PLAY_EVENT$1.STATE_CHANGE,function(W){var z=W.data,J=z.new;if(X[J])return Y.emit(X[J],{});(J===VIDEO_STATE$1.PLAYING||J===VIDEO_STATE$1.PAUSE)&&Y.proxyPlayPause(J,z)})},U.prototype.proxyVideoStopped=function(){var L=this;this.corePlayer.on(PLAY_EVENT$1.STOPED,function(Y){var X,W=Y.data,z=(X=W==null?void 0:W.videoInfo)===null||X===void 0?void 0:X.error,J=__assign$a(__assign$a({},W),{code:(z==null?void 0:z.code)||ErrorCode.SUC});L.emit(H5_PLAY_EVENT.VIDEO_END,J)})},U.prototype.proxyPlayPause=function(L,Y){var X;L===VIDEO_STATE$1.PLAYING?this.emit(H5_PLAY_EVENT.VIDEO_PLAYING,{isFirst:!(!((X=Y.videoInfo)===null||X===void 0)&&X.hasFirstPlaying)}):L===VIDEO_STATE$1.PAUSE&&this.emit(H5_PLAY_EVENT.VIDEO_PAUSE,{pauseType:Y.pauseType})},U.prototype.resumePlay=function(){var L;!((L=this.flowManager.currentFlowNode)===null||L===void 0)&&L.isPreload?this.flowManager.currentFlowNode.start():this.corePlayer.play()},U.prototype.loadItem=function(L,Y){var X,W;this.flowManager.currentFlowNode&&(this.log("loadItem(), stop because of currentFlowNode is running"),this.stop());var z=comTool$1.createGUID();this.emit(H5_PLAY_EVENT.PLAY_SESSION_START,{flowid:z});var J=__assign$a({},Y);isVideoId(L)?J.vid=L:J.urlConfig=L;var Z=[new AdFlowNode({flowid:z,instanceId:this.config.instanceId,startParam:__assign$a({adType:AD_TYPE.PRE},J.adParam),corePlayer:this.corePlayer}),new VideoFlowNode({flowid:z,corePlayer:this.corePlayer,videoReqInfoPlugin:this.videoReqInfoPlugin,startParam:J,extEvtDispatcher:this.pluginMsg,emitFromVideoNode:this.emitFromVideoNode,videoLoadParamModifier:this.videoLoadParamModifier})],ee=this,te=ee.nodeBeforePreAd,re=ee.nodeBeforePostAd;te instanceof BaseFlowNode&&Z.unshift(te),(X=this.flowManager).push.apply(X,Z),this.config.type!==PLAY_MODE$1.LIVE&&(re instanceof BaseFlowNode&&this.flowManager.push(re),this.flowManager.pushLastNode(new AdFlowNode({flowid:z,instanceId:this.config.instanceId,startParam:__assign$a({adType:AD_TYPE.POST},J.adParam),corePlayer:this.corePlayer}))),this.log("loadItem(), flowNodeList="+((W=this.flowManager.flowNodeList)===null||W===void 0?void 0:W.map(function(ie){return ie.getName()})))},Object.defineProperty(U.prototype,"isCollected",{get:function(){return this.corePlayer._isCollected},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"_kernel",{get:function(){return this.corePlayer._kernel},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this.corePlayer.config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"useWorker",{get:function(){return this.corePlayer.useWorker},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"kernelName",{get:function(){return this.corePlayer.kernelName},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElements",{get:function(){return this.corePlayer.videoElements},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoElement",{get:function(){return this.corePlayer.currentVideoElement},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){return this.corePlayer.supportPreload},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){return this.corePlayer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){return this.corePlayer.playtime},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoInfos",{get:function(){return this.corePlayer.videoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"preloadVideoInfos",{get:function(){return this.corePlayer.preloadVideoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){return this.corePlayer.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfoIdx",{get:function(){return this.corePlayer.currentVideoInfoIdx},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"totalVideoInfoCount",{get:function(){return this.corePlayer.totalVideoInfoCount},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return this.corePlayer.supportPlaybackRate},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"played",{get:function(){return this.corePlayer.played},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this.corePlayer.state},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){return this.corePlayer.videoSize},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){return this.corePlayer.videoBuffered},enumerable:!1,configurable:!0}),U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];return(L=this.logger).log.apply(L,Y)},U.prototype.hasAppended=function(L){return this.corePlayer.hasAppended(L)},U.prototype.hasPreloaded=function(L){return this.corePlayer.hasPreloaded(L)},Object.defineProperty(U.prototype,"volume",{get:function(){return this.corePlayer.volume},set:function(L){this.corePlayer.volume=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){return this.corePlayer.playbackRate},set:function(L){this.corePlayer.playbackRate=L},enumerable:!1,configurable:!0}),U.prototype.resizeVideoElements=function(L){return this.corePlayer.resizeVideoElements(L)},U.prototype.resize=function(L){return this.corePlayer.resize(L)},U.prototype.playNext=function(L){return this.corePlayer.playNext(L)},U.prototype.captureVideo=function(L,Y,X,W,z){return this.corePlayer.captureVideo(L,Y,X,W,z)},U.prototype.appendNext=function(L){return this.corePlayer.appendNext(L)},U.prototype.preloadNext=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];return(L=this.corePlayer).preloadNext.apply(L,Y)},U.prototype.clearAllPreload=function(){return this.corePlayer.clearAllPreload()},U.prototype.triggerAutoplay=function(){return this.corePlayer.triggerAutoplay()},U._isCollected=!1,U}(PluginablePlayer),_a$8,CHANNEL$1="npm";try{CHANNEL$1="npm"}catch(G){}var logMethodCall$8=logMethodCallDecoratorCreator$1("H5Player"),rotateTransformValue=(_a$8={},_a$8[PictureDirection.VERTICAL]="rotateX(180deg)",_a$8[PictureDirection.HORIZON]="rotateY(180deg)",_a$8[PictureDirection.NORMAL]="none",_a$8),H5Player=function(G){__extends$b(U,G);function U(L){var Y=G.call(this,__assign$a(__assign$a({},L.coreConfig),L))||this;Y.plugins={},Y.interactMod=null,Y.getCommonKv=function(te){return Y.dataset.commonMap[te]},Y.getStateKv=function(te){return Y.dataset.stateMap[te]},Y.mutedVolume=1,Y.hasMutePlayed=!1,Y.mixin=function(te){var re=typeof te=="function"?te():te;Object.keys(re).forEach(function(ie){if(ie in Y)throw new Error("cannot override existing player method: "+ie);var ne=re[ie];if(typeof ne!="function"){console.error("mixin "+ne+" is not a function");return}Y[ie]=ne})},Y.log("new H5Player(), input config=",jsonTool$1.safelyStringify(L));var X=Date.now(),W=L.container,z=L.plugins,J=L.mixins,Z=L.lazyInitPlugins;if(Y.container=typeof W=="string"?document.querySelector(W):W,!Y.container)throw new Error("cannot find container: "+W);var ee=100;return Y.setMaxListeners(ee),Y.createClickMask(),Y.createInnerPlugins(),z instanceof Array&&(Z?setTimeout(function(){return Y.createPlugins(z)}):Y.createPlugins(z)),J instanceof Array&&J.forEach(Y.mixin),Y.forwardPluginEvents(),Y.initContainerStyle(),Y.setupEventFlagData(),Y.setupLoopPlay(),Y.checkAutoPlayInMute(),Y.autoHideMouse(),Y.applyStyleOnVideoNodeChange(),Y.on(H5_PLAY_EVENT.PLAY_SESSION_START,function(){Y.hasMutePlayed=!1}),Y.setStateKv(DATA_STATE.INIT,{type:LOG_TYPE.CORE_EVENT,ftime:Date.now(),ext:{stime:X}}),Y}return U.registerSavedCommonKey=function(L){if(DataSet.SETTING_CONFIG[L]){console.warn("key "+L+" already registered");return}DataSet.SETTING_CONFIG.push({dsKey:L,lsKey:"__thumbplayer_custom_"+L+"__"})},U.prototype.load=function(L,Y){return L?(this.cacheLoadParam(L,Y),this.corePlayer.load(),G.prototype.load.call(this,L,this.getParamWithStartTime(L,Y))):G.prototype.load.call(this)},U.prototype.play=function(L,Y){return L?(this.cacheLoadParam(L,Y),this.corePlayer.load(),G.prototype.play.call(this,L,this.getParamWithStartTime(L,Y))):G.prototype.play.call(this)},U.prototype.createPlugin=function(L,Y){Y===void 0&&(Y={}),G.prototype.createPlugin.call(this,L,Y);var X=Y.pluginName,W=X===void 0?L:X;W===AdPluginName&&proxyAdEvent(this)},U.prototype.replay=function(){var L,Y,X=this.vid,W=this.playUrl;if((Y=(L=this.loadParam)===null||L===void 0?void 0:L.videoLoadParam)===null||Y===void 0||delete Y.startTime,X)return this.play(X,this.loadParam);if(W){var z=W.lastIndexOf("#");return z>0&&(W=W.slice(0,z)),this.play({url:W},this.loadParam)}this.log("Current player has no available vid or url to replay")},U.prototype.pause=function(L){return G.prototype.pause.call(this,L)},U.prototype.seek=function(L){var Y=this.timeRange,X=Y.startTime,W=Y.endTime,z=Math.min(W,Math.max(X,L));return G.prototype.seek.call(this,z)},U.prototype.stop=function(L){return G.prototype.stop.call(this,L)},U.prototype.setLevel=function(L){return G.prototype.setLevel.call(this,L)},U.prototype.setPictureImage=function(L){L===void 0&&(L=PictureDirection.NORMAL),this.pictureDirection=L,this.isPlayingAd?this.setAdVideoStyle({transform:rotateTransformValue[L]}):this.setVideoStyle({transform:rotateTransformValue[L]}),L===PictureDirection.NORMAL&&(this.rotateDegree=0)},U.prototype.setRotate=function(L){typeof L!="number"||Number.isNaN(L)||(this.rotateDegree=L,this.isPlayingAd?this.setAdVideoStyle({transform:"rotate("+L+"deg)"}):this.setVideoStyle({transform:"rotate("+L+"deg)"}))},U.prototype.getRotate=function(){return this.rotateDegree},Object.defineProperty(U.prototype,"volume",{get:function(){return this.corePlayer.volume},set:function(L){var Y;this.corePlayer.volume=L,(Y=getAdPlugin(this.config.instanceId))===null||Y===void 0||Y.setAdVolume(L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"timeRange",{get:function(){return this.playtimeLimiter.range},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){var L=this,Y,X;try{this.stop(),this.pluginMsg.emit(H5_EXT_EVENT.DESTROY)}catch(z){this.log(z)}this.plugins&&(Object.keys(this.plugins).forEach(function(z){var J,Z;(Z=(J=L.plugins[z])===null||J===void 0?void 0:J.destroy)===null||Z===void 0||Z.call(J)}),delete this.plugins),setAdPlugin((Y=this.config)===null||Y===void 0?void 0:Y.instanceId,null),this.removeAllListeners(),this.pluginMsg.removeAllListeners(),this.corePlayer.destroy(),this.container.innerHTML="",(X=this.interactMod)===null||X===void 0||X.remove(),this.interactMod=null;var W=this.container.cloneNode();this.container.parentNode.replaceChild(W,this.container),this.container=W,clearTimeout(this.mouseMoveTimer),this.container.style.cursor==="none"&&(this.container.style.cursor="auto")},Object.defineProperty(U.prototype,"offlineLogPlugin",{get:function(){return this.plugins[OfflineLogPlugin.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"pluginInstances",{get:function(){return this.plugins},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"player",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,PlaytimeLimiterPlugin.pluginName,{get:function(){return this.plugins[PlaytimeLimiterPlugin.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,DataSet.pluginName,{get:function(){return this.plugins[DataSet.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,OfflineLogPlugin.pluginName,{get:function(){return this.plugins[OfflineLogPlugin.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoReqInfoPlugin",{get:function(){return this.plugins[VideoReqInfoPluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"vid",{get:function(){return isVideoId(this.currentPlayItem)?this.currentPlayItem:null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"url",{get:function(){var L;return(L=this.currentVideoInfo)===null||L===void 0?void 0:L.loadingUrl},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"paused",{get:function(){return this.state===VIDEO_STATE$1.PAUSE},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"muted",{get:function(){return this.volume===0},set:function(L){L?(this.mutedVolume=this.volume,this.volume=0):this.muted&&(this.volume=this.mutedVolume)},enumerable:!1,configurable:!0}),U.prototype.setStateKv=function(L,Y,X){this.dataset.writeState(L,Y,X)},U.prototype.setCommonKv=function(L,Y,X){var W=this;typeof L=="string"?this.dataset.writeCommon(L,Y,X):Object.keys(L).forEach(function(z){return W.dataset.writeCommon(z,L[z],Y)})},U.prototype.prepareUsageData=function(){return __assign$a(__assign$a({},G.prototype.prepareUsageData.call(this)),{from:"1",channel:CHANNEL$1})},Object.defineProperty(U.prototype,"videoReqParam",{get:function(){var L;return(L=this.loadParam)===null||L===void 0?void 0:L.videoReqInfoParam},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"isCollected",{get:function(){return FlowPlayer._isCollected},set:function(L){FlowPlayer._isCollected=L},enumerable:!1,configurable:!0}),U.prototype.getParamWithStartTime=function(L,Y){var X;Y===void 0&&(Y={});var W=this.playtimeLimiter;if(!L||!((X=Y.videoLoadParam)===null||X===void 0)&&X.startTime)return Y;if(typeof L=="string"||typeof L=="number")W.clearAllConfig(L);else{if(Array.isArray(L))return Y;W.clearAllConfig(L.url)}return Y.playTimeLimit&&W.addLimitConfig(Y.playTimeLimit),__assign$a(__assign$a({},Y),{videoLoadParam:__assign$a(__assign$a({},Y.videoLoadParam),{startTime:this.timeRange.startTime})})},U.prototype.createClickMask=function(){var L=this,Y=this.config,X=Y.enableInteractMod,W=X===void 0?!0:X,z=Y.type;if(!(!W||z===PLAY_MODE$1.LIVE)){var J=document.createElement("div");J.classList.add("thumbplayer-user-mod"),domTool$1.css(J,{width:"100%",height:"100%",position:"absolute","z-index":1}),domTool$1.append(this.container,J),J.addEventListener("click",function(){[VIDEO_STATE$1.PAUSE,VIDEO_STATE$1.CANPLAY].includes(L.state)?L.play():[VIDEO_STATE$1.PLAYING,VIDEO_STATE$1.BUFFERING].includes(L.state)&&L.pause(H5_PAUSE_TYPE.USER_CLICK)}),this.interactMod=J}},U.prototype.initContainerStyle=function(){var L=this.container;L.style.outline="0 none",L.style.overflow="hidden",L.style.backgroundColor="#000",getComputedStyle(L).position==="static"&&(L.style.position="relative")},U.prototype.forwardPluginEvents=function(){var L=this;this[DataSet.pluginName].on(DATA_EVENTS.STATE_UPDATE,function(Y){var X=Y.data;L.pluginMsg.emit(H5_EXT_EVENT.DATASET_STATE_UPDATE,X)}),this[DataSet.pluginName].on(DATA_EVENTS.UPDATE,function(Y){var X=Y.data;L.pluginMsg.emit(H5_EXT_EVENT.DATASET_UPDATE,X)}),this.on(PLAY_EVENT$1.SET_LOADING,function(Y){var X=Y.data;L.pluginMsg.emit(H5_EXT_EVENT.SET_LOADING,{value:X.show})})},U.prototype.createInnerPlugins=function(){var L;this.createPlugin(DataSet.pluginName),OfflineLogPlugin.isEnvSupport&&!(!((L=this.config.offlineConfig)===null||L===void 0)&&L.disable)&&this.createPlugin(OfflineLogPlugin.pluginName),this.createPlugin(PlaytimeLimiterPlugin.pluginName),this.createPlugin(ErrorReportPlugin.pluginName),this.createPlugin(this.config.type===PLAY_MODE$1.LIVE?LiveQaReporterPlugin.pluginName:VodQaReporterPlugin.pluginName)},U.prototype.cacheLoadParam=function(L,Y){!L||(isVideoId(L)&&(this.setCommonKv(COMMON_DATA_KEY.vid,L),this.pluginMsg.emit(H5_EXT_EVENT.VID_CHANGE,{oldVal:this.vid,newVal:L})),this.currentPlayItem=L,Y&&Object.keys(Y).length&&(this.loadParam=Y))},U.prototype.setupEventFlagData=function(){var L=this;this.on(H5_PLAY_EVENT.AD_PLAYING,function(){return L.isPlayingAd=!0}),this.on(H5_PLAY_EVENT.AD_END,function(){return L.isPlayingAd=!1})},U.prototype.setupLoopPlay=function(){var L=this;this.on(H5_PLAY_EVENT.PLAY_SESSION_END,function(Y){var X=Y.data,W=X.endState,z=W===END_STATE$1.NORMAL;L.config.loop&&z&&L.replay()}),this.on(H5_PLAY_EVENT.VIDEO_PLAYING,function(Y){var X=Y.data;if(!(!X.isFirst||!L.config.loop)){var W=L.currentVideoElement;if(W instanceof HTMLVideoElement){var z="mp4";W.loop=isUrlConfig(L.currentPlayItem)&&urlTool$1.getFileExtension(L.playUrl)===z}}})},Object.defineProperty(U.prototype,"playUrl",{get:function(){var L=this.currentPlayItem;if(!isVideoId(L)&&!Array.isArray(L))return L==null?void 0:L.url},enumerable:!1,configurable:!0}),U.prototype.checkAutoPlayInMute=function(){var L=this;if(!(!this.config.autoPlayInMute&&this.config.autoPlayPolicy!==AUTO_PLAY_POLICY.IN_MUTED)){var Y=function(){var X;L.hasMutePlayed||(L.hasMutePlayed=!0,L.muted=!0,(X=getAdPlugin(L.config.instanceId))===null||X===void 0||X.setAdVolume(0),L.play())};this.on(H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,function(){return setTimeout(Y)}),this.on(H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,Y)}},U.prototype.autoHideMouse=function(){var L=this,Y=5e3;this.container.addEventListener("mousemove",function(){L.container.style.cursor==="none"&&(L.container.style.cursor="auto"),clearTimeout(L.mouseMoveTimer),L.mouseMoveTimer=setTimeout(L.hideMouseOnFullscreen.bind(L),Y)})},U.prototype.hideMouseOnFullscreen=function(){var L=document,Y=L.fullscreenElement||L.webkitFullscreenElement||L.mozFullScreenElement||L.msFullscreenElement;(this.config.autoHideMouse||Y)&&this.state===VIDEO_STATE$1.PLAYING&&(this.container.style.cursor="none")},U.prototype.setVideoStyle=function(L){domTool$1.css(this.corePlayer.currentVideoElement,L)},U.prototype.setAdVideoStyle=function(L){var Y,X,W,z=(W=(X=getAdPlugin((Y=this.config)===null||Y===void 0?void 0:Y.instanceId))===null||X===void 0?void 0:X.videoAdPlayer)===null||W===void 0?void 0:W.videoElements;z&&z.forEach(function(J){return domTool$1.css(J,L)})},U.prototype.applyStyleOnVideoNodeChange=function(){var L=this,Y=function(){if(!(L.pictureDirection===void 0&&L.rotateDegree===void 0))return rotateTransformValue[L.pictureDirection]||"rotate("+L.rotateDegree+"deg)"};this.corePlayer.on(PLAY_EVENT$1.VIDEONODE_CHANGE,function(){var X=Y();X&&L.setVideoStyle({transform:X})}),this.on(H5_PLAY_EVENT.AD_REQ_ASSETS_START,function(X){var W=X.data;if(!!isPreOrPostAd(W)){var z=Y();z&&L.setAdVideoStyle({transform:z})}}),this.on(H5_PLAY_EVENT.AD_END,function(X){var W=X.data;if(!!isPreOrPostAd(W)){var z=Y();z&&L.setAdVideoStyle({transform:"none"})}})},U.registerKernel=KernelFactory$3.registerKernel,U.KernelFactory=KernelFactory$3,__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object,Object]),__metadata$7("design:returntype",void 0)],U.prototype,"load",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object,Object]),__metadata$7("design:returntype",void 0)],U.prototype,"play",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[]),__metadata$7("design:returntype",void 0)],U.prototype,"replay",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String]),__metadata$7("design:returntype",void 0)],U.prototype,"pause",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Number]),__metadata$7("design:returntype",void 0)],U.prototype,"seek",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String]),__metadata$7("design:returntype",void 0)],U.prototype,"stop",null),__decorate$7([logMethodCall$8,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object]),__metadata$7("design:returntype",void 0)],U.prototype,"setLevel",null),U}(FlowPlayer);H5Player.registerPlugin(DataSet.pluginName,DataSet);H5Player.registerPlugin(PlaytimeLimiterPlugin.pluginName,PlaytimeLimiterPlugin);H5Player.registerPlugin(ErrorReportPlugin.pluginName,ErrorReportPlugin);H5Player.registerPlugin(OfflineLogPlugin.pluginName,OfflineLogPlugin);H5Player.registerPlugin(VodQaReporterPlugin.pluginName,VodQaReporterPlugin);H5Player.registerPlugin(LiveQaReporterPlugin.pluginName,LiveQaReporterPlugin);function createH5Player(G){return new H5Player(G)}var BUILD_TIME$1=1652967203451,VERSION$2="1.4.86",ThumbPlayerH5=Object.freeze({__proto__:null,createH5Player,EvtEmitter:s$3,PLAY_EVENT:PLAY_EVENT$1,VIDEO_STATE:VIDEO_STATE$1,H5Player,KERNEL_NAME:KERNEL_NAME$1,PLAY_MODE:PLAY_MODE$1,END_STATE:END_STATE$1,PRELOAD_TYPE:PRELOAD_TYPE$1,BUILD_TIME:BUILD_TIME$1,VERSION:VERSION$2,BaseReporter,get ErrorCode(){return ErrorCode},get ErrorMsg(){return ErrorMsg},getAdPlugin,adEvents,BaseFlowNode,get FLOW_NODE_EVENT(){return FLOW_NODE_EVENT},BeaconRequest,ImageRequest:report,definePlugins,autobind,logApiInvoke,once,get H5_EXT_EVENT(){return H5_EXT_EVENT},get H5_PLAY_EVENT(){return H5_PLAY_EVENT},Plugin,isFunctionPlugin,createPluginFactory,getHookMethodName,registerPlugin,deregisterPlugin,getPlugin,getPlugins,pluginExists,AdPluginName,get AD_TYPE(){return AD_TYPE},isPreOrPostAd,VideoReqInfoPluginName,isVideoId,DRM_TYPE,DRM_VALUE,OFFICIAL_PLUGIN,PLUGIN_MAP,get H5_PAUSE_TYPE(){return H5_PAUSE_TYPE},get AUTO_PLAY_POLICY(){return AUTO_PLAY_POLICY},get PictureDirection(){return PictureDirection},get DATA_EVENTS(){return DATA_EVENTS},get DATA_STATE(){return DATA_STATE},get LOG_TYPE(){return LOG_TYPE},get BUFFER_REASON(){return BUFFER_REASON},get LOCAL_KEY(){return LOCAL_KEY$1},get PersistedUserSettings(){return PersistedUserSettings},DEFAULT_KEY,COMMON_DATA_KEY});window.ThumbPlayerH5=ThumbPlayerH5;var ThumbPlayerH5$1=Object.freeze(Object.defineProperty({__proto__:null,get AD_TYPE(){return AD_TYPE},get AUTO_PLAY_POLICY(){return AUTO_PLAY_POLICY},AdPluginName,get BUFFER_REASON(){return BUFFER_REASON},BUILD_TIME:BUILD_TIME$1,BaseFlowNode,BaseReporter,BeaconRequest,COMMON_DATA_KEY,get DATA_EVENTS(){return DATA_EVENTS},get DATA_STATE(){return DATA_STATE},DEFAULT_KEY,DRM_TYPE,DRM_VALUE,get ErrorCode(){return ErrorCode},get ErrorMsg(){return ErrorMsg},get FLOW_NODE_EVENT(){return FLOW_NODE_EVENT},H5Player,get H5_EXT_EVENT(){return H5_EXT_EVENT},get H5_PAUSE_TYPE(){return H5_PAUSE_TYPE},get H5_PLAY_EVENT(){return H5_PLAY_EVENT},ImageRequest:report,get LOCAL_KEY(){return LOCAL_KEY$1},get LOG_TYPE(){return LOG_TYPE},OFFICIAL_PLUGIN,PLUGIN_MAP,get PersistedUserSettings(){return PersistedUserSettings},get PictureDirection(){return PictureDirection},Plugin,VERSION:VERSION$2,VideoReqInfoPluginName,adEvents,autobind,createH5Player,createPluginFactory,definePlugins,deregisterPlugin,getAdPlugin,getHookMethodName,getPlugin,getPlugins,isFunctionPlugin,isPreOrPostAd,isVideoId,logApiInvoke,once,pluginExists,registerPlugin,get END_STATE(){return END_STATE$1},EvtEmitter:s$3,get KERNEL_NAME(){return KERNEL_NAME$1},get PLAY_EVENT(){return PLAY_EVENT$1},get PLAY_MODE(){return PLAY_MODE$1},get PRELOAD_TYPE(){return PRELOAD_TYPE$1},get VIDEO_STATE(){return VIDEO_STATE$1}},Symbol.toStringTag,{value:"Module"})),isMobile$2=/mobile/i.test(navigator.userAgent),txpHideClass="txp_none";Promise.prototype.finally||(Promise.prototype.finally=function(U){var L=this.constructor;return this.then(function(Y){return L.resolve(U()).then(function(){return Y})},function(Y){return L.resolve(U()).then(function(){return L.reject(Y)})})});var SET_LEVEL_MODE;(function(G){G.SOFT="soft",G.HARD="hard",G.SMOOTH="smooth"})(SET_LEVEL_MODE||(SET_LEVEL_MODE={}));var PLAY_MODE;(function(G){G.VOD="vod",G.LIVE="live"})(PLAY_MODE||(PLAY_MODE={}));var CAN_PLAY_ALL=null,VIDEO_CONTAINER_CLASS="txp_videos_container",END_STATE;(function(G){G.NORMAL="normal",G.INTERRUPT="interrupt",G.ERROR="error"})(END_STATE||(END_STATE={}));var VIDEO_READY_STATE;(function(G){G[G.HAVE_NOTHING=0]="HAVE_NOTHING",G[G.HAVE_METADATA=1]="HAVE_METADATA",G[G.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",G[G.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",G[G.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"})(VIDEO_READY_STATE||(VIDEO_READY_STATE={}));var VIDEO_EVTS;(function(G){G.loadstart="loadstart",G.timeupdate="timeupdate",G.durationchange="durationchange",G.volumechange="volumechange",G.canplay="canplay",G.playing="playing",G.pause="pause",G.waiting="waiting",G.seeking="seeking",G.seeked="seeked",G.loadeddata="loadeddata",G.loadedmetadata="loadedmetadata",G.ended="ended",G.error="error",G.progress="progress",G.ratechange="ratechange",G.resize="resize",G.frameRender="videoFrameRender"})(VIDEO_EVTS||(VIDEO_EVTS={}));var VIDEO_STATE;(function(G){G.IDLE="idle",G.LOAD_START="loadStart",G.CANPLAY="canplay",G.PLAYING="playing",G.PAUSE="pause",G.SEEKING="seeking",G.SEEKED="seeked",G.BUFFERING="buffering",G.END="end"})(VIDEO_STATE||(VIDEO_STATE={}));var ERROR_CODE;(function(G){G.UNKNOWN_ERR="70011000",G.MEDIA_ERR_ABORTED="70011100",G.MEDIA_ERR_NETWORK="70011101",G.MEDIA_ERR_DECODE="70011102",G.MEDIA_ERR_SRC_NOT_SUPPORTED="70011103",G.ORG_LOAD_TIMEOUT="70011104",G.STATE_STUCK="70011105",G.ORG_PLAY_STUCK_ERR="70011111",G.NULL_URL="70011112",G.MISSING_KERNEL="70011113",G.KERNEL_NOT_SPT="70011114"})(ERROR_CODE||(ERROR_CODE={}));var VIDEO_ELEMENT_ERROR={1:{code:ERROR_CODE.MEDIA_ERR_ABORTED,message:"\u89C6\u9891\u83B7\u53D6\u88AB\u7EC8\u6B62"},2:{code:ERROR_CODE.MEDIA_ERR_NETWORK,message:"\u4E0B\u8F7D\u89C6\u9891\u53D1\u751F\u9519\u8BEF"},3:{code:ERROR_CODE.MEDIA_ERR_DECODE,message:"\u5C1D\u8BD5\u89E3\u7801\u51FA\u9519"},4:{code:ERROR_CODE.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u8BE5\u97F3\u89C6\u9891"}},ERROR_MSG;(function(G){G.UNKNOWN="\u672A\u77E5\u9519\u8BEF",G.XHR_NET="\u89C6\u9891\u83B7\u53D6\u9014\u4E2D\u51FA\u73B0\u95EE\u9898",G.PRELOAD_VIDEO_TIMEOUT="\u52A0\u8F7D\u89C6\u9891\u8D85\u65F6",G.PLAY_STUCK="\u89C6\u9891\u65E0\u6CD5\u7EE7\u7EED\u64AD\u653E",G.LOAD_STREAM_FAIL="\u89C6\u9891\u6D41\u83B7\u53D6\u9014\u4E2D\u51FA\u73B0\u95EE\u9898",G.INNER="\u5185\u90E8\u9519\u8BEF",G.NULL_URL="\u4F20\u5165\u7684\u5730\u5740\u4E3A\u7A7A"})(ERROR_MSG||(ERROR_MSG={}));var PLAY_EVENT;(function(G){G.RESTART="restart",G.TIME_UPDATE="timeupdate",G.METADATA_CHANGE="metadataChange",G.RATE_CHANGE="rateChange",G.VOLUME_CHANGE="volumeChange",G.DURATION_CHANGE="durationChange",G.AUTOPLAY_BLOCKED="autoplayBlocked",G.LOAD_PROGRESS="loadProgress",G.STATE_CHANGE="stateChange",G.FIRST_PLAYING="firstPlaying",G.VIDEONODE_PLAY_OVER="videoNodePlayOver",G.VIDEONODE_START_PLAY="videoNodeStartPlay",G.VIDEONODE_FIRST_PLAYING="videoNodeFirstPlaying",G.VIDEONODE_CHANGE="videoNodeChange",G.LIST_CHANGE="listChange",G.SET_LOADING="setLoading",G.PRELOAD_START="preloadStart",G.PRELOAD_VIDEONODE_OVER="preloadVideonodeOver",G.PRELOAD_VIDEONODE_CLEAR="preloadVideonodeClear",G.PRELOAD_VIDEONODE_ERROR="preloadVideonodeError",G.VIDEO_BUFFER_CHANGE="videoBufferChange",G.SETLEVEL_START="setLevelStart",G.SETLEVEL_OVER="setLevelOver",G.RESIZE="resize",G.STOPED="stoped",G.ERROR="error",G.RETRY_BACKURL="retryBackUrl",G.VIDEO_FRAME_RENDER="videoFrameRender",G.ELEMENT_EVTS="elementEvts",G.VIDEO_RESIZE="videoResize",G.FULLSCREEN_CHANGE="fullscreenChange"})(PLAY_EVENT||(PLAY_EVENT={}));var VIDEO_NODE_EVENT;(function(G){G.TIME_UPDATE="vn_timeupdate",G.METADATA_CHANGE="vn_metadataChange",G.VOLUME_CHANGE="vn_volumeChange",G.DURATION_CHANGE="vn_durationChange",G.PLAY_PROMISE_CATCHED="vn_playPromiseCatched",G.LOAD_PROGRESS="vn_loadProgress",G.RATE_CHANGE="vn_rateChange",G.BUFFER_APPENDED="vn_bufferAppended",G.STATE_CHANGE="vn_stateChange",G.ERROR="vn_error",G.RETRY="vn_retry",G.SET_LOADING="vn_setLoading",G.VIDEO_BUFFER_CHANGE="vn_videoBufferChange",G.SETLEVEL_START="vn_setLevelStart",G.SETLEVEL_OVER="vn_setLevelOver",G.URL_CHANGE="vn_urlChange",G.FIRST_PLAYING="vn_firstPlaying",G.ELEMENT_EVTS="vn_elementEvts",G.PLAY_OVER="vn_playOver",G.VIDEO_RESIZE="vn_videoResize",G.VIDEO_FRAME_RENDER="vn_videoFrameRender"})(VIDEO_NODE_EVENT||(VIDEO_NODE_EVENT={}));var MSE_EVENTS;(function(G){G.OEPN="open",G.CLOSE="close",G.ERROR="error",G.REINIT="REINIT",G.UPDATE_END="updateend",G.REMOVE_END="removeend"})(MSE_EVENTS||(MSE_EVENTS={}));var PAUSE_TYPE;(function(G){G.USER="user",G.INNER="inner",G.SYS="sys"})(PAUSE_TYPE||(PAUSE_TYPE={}));var PLAYER_LOG_LEVEL;(function(G){G[G.NONE=0]="NONE",G[G.CORE=1]="CORE",G[G.KERNEL=2]="KERNEL"})(PLAYER_LOG_LEVEL||(PLAYER_LOG_LEVEL={}));var PRELOAD_TYPE;(function(G){G.META_DATA="metadata",G.AUTO="auto",G.AUTO_LOAD="autoLoad"})(PRELOAD_TYPE||(PRELOAD_TYPE={}));var CODEC;(function(G){G[G.H264=0]="H264",G[G.H265=1]="H265",G[G.AV1=2]="AV1"})(CODEC||(CODEC={}));var VIDEO_ELEMENT_STATE;(function(G){G.FREE="0",G.USED="1"})(VIDEO_ELEMENT_STATE||(VIDEO_ELEMENT_STATE={}));var CDN_PATH_PREFIX="//vm.gtimg.cn/thumbplayer/",CACHE_SIZE_KEY;(function(G){G.DEMUX="demux_cache_size"})(CACHE_SIZE_KEY||(CACHE_SIZE_KEY={}));var comTool={supportES6:function(){try{eval("var foo = (x)=>x+1")}catch(G){return!1}return!0},isObject:function(G){return typeof G=="object"&&G.constructor===Object},createGUID:function(G){G===void 0&&(G=32);for(var U=G||32,L="",Y=1;Y<=U;Y++){var X=Math.floor(Math.random()*16).toString(16);L+=X}return L},xss:V,removeDiscontinuityTimeRangesFromPlayTime:function(G,U){var L=comTool.findDiscontinuityTimeRangeAtPlaytime(G,U);if(L)return L.start;var Y=G;return U.forEach(function(X){X.end<G&&(Y-=X.end-X.start)}),Y},findDiscontinuityTimeRangeAtPlaytime:function(G,U){return comTool.mergeTimeRanges(U).find(function(L){return G>=L.start&&G<=L.end})},mergeTimeRanges:function(G){var U=-1,L=-1,Y=[];return G.forEach(function(X){var W=X.start,z=X.end;U<0&&(U=W),W!==L&&L>=0&&(Y.push({start:U,end:L}),U=W),L=z}),U>=0&&L>=0&&Y.push({start:U,end:L}),Y},compareVersion:T,formatPlayTime:function(G){var U=G;if(typeof U=="string"&&(U=parseInt(U,10)),typeof U!="number"||Number.isNaN(U))return"00:00";var L=function(z){return z<10?"0"+z:z},Y=Math.floor(U/3600),X=Math.floor((U-Y*3600)/60),W=Math.floor(U-Y*3600-X*60);return Y===0?[L(X),L(W)].join(":"):[Y,L(X),L(W)].join(":")},dateFormat:function(G,U){return U===void 0&&(U=Date.now()),r$3(U,G||"yyyy-MM-dd hh:mm:ss")},base64ToArrayBuffer:function(G){for(var U=window.atob(G),L=U.length,Y=new Uint8Array(L),X=0;X<L;X++)Y[X]=U.charCodeAt(X);return Y},setTimeoutByRAF:function(G,U){var L=window.requestAnimationFrame||window.webkitRequestAnimationFrame,Y=+new Date;function X(){+new Date-Y>U?G():L(X)}X()}},mobileDevReg=/android|iPod|ipad|iPhone|mobile/i;function uaMatch(G){var U,L,Y;G=G||navigator.userAgent,G=G.toLowerCase(),this.browser={},this.os={},this.mobile=!1,this.spider=!1,mobileDevReg.test(G)&&(this.mobile=!0);var X=/(googlebot|bingbot|yandex|twitterbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|petalbot|applebot|mpcrawler|spider)/i;X.test(G)&&(this.spider=!0);for(var W={android_1:/android[\s\/]([\d\.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\stouch;\sCPU\siPhone\sos\s([\d_]+)/i,ipod_100:/iPod.*os\s?([\d_\.]+)/i,iphone:/iPhone;\sCPU\siPhone\sos\s([\d_]+)/i,iphone_100:/iPhone.*os\s?([\d_\.]+)/i,ipad_1:/ipad;\scpu\sos\s([\d_]+)/i,ipad_2:/ipad([\d]+)?/i,windows:/windows\snt\s([\d\.]+)/i,mac:/Macintosh.*mac\sos\sx\s([\d_\.]+)/i,linux:/Linux/i},z,J,Z=Object.keys(W),ee=0,te=Z.length;ee<te;ee++){var re=Z[ee];if(z=W[re].exec(G),!!z){J=re.replace(/_\d+/,""),this.os[J]=!0,this.os.osName=J,z[1]&&(this.os.version=z[1].replace(/_/g,"."));break}}(this.os.iphone||this.os.ipad||this.os.ipod)&&(this.os.ios=!0);for(var ie={wechat:/MicroMessenger\/([\d\.]+)/i,ipadqq:/IPadQQ\/([\d\.]+)/i,mqq:/qq\/([\d\.]+)/i,qzone:/QZONEJSSDK\/([\d\.]+)/i,mqqbrowser:/mqqbrowser\/([\d\.]+)/i,qqbrowser:/[^m]QQBrowser\/([\d\.]+)/i,x5:/tbs\/(\d+)/i,uc:/UCBrowser\/([\d\.]+)/i,safari_1:/Version\/(([\d\.]+))\sSafari\/[\d\.]+/i,safari_2:/Safari\/([\d\.]+)/i,chrome_1:/CriOS\/([\d\.]+)/i,chrome_2:/Chrome\/([\d\.]+)/i,firefox:/Firefox\/([\d\.]+)/i,ie_1:/MSIE\s([\d\.]+)/i,ie_2:/(trident\/\d\.\d)/i,ie_3:/(Edge)\/\d+\.\d+/i,weibo:/weibo__([\d\.]+)/i,qqnews:/qqnews\/([\d\.]+)/i,qqlive_1:/QQLiveBrowser\/([\d\.]+)/i,qqlive_2:/QQLiveHDBrowser\/([\d\.]+)/i,kuaibao:/qnreading\/([\d\.]+)/i,liebao:/LieBaoFast\/([\d\.]+)/i,douban:/com\.douban\.frodo\/([\d\.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,qqdownloader:/qqdownloader\/([\d\.]+)/i},ne,oe,se=Object.keys(ie),ae=0,te=se.length;ae<te;ae++){var le=se[ae];if(ne=ie[le].exec(G),!!ne){if(oe=le.replace(/_\d+/,""),this.browser[oe])return this;this.browser[oe]={version:ne[1]},this.browser.browserName=oe,this.browser.version=ne[1]}}return this.os.android&&this.browser.safari&&(this.browser.safari=null),this.browser.chrome&&this.browser.safari&&(this.browser.safari=null),((Y=(L=(U=this.browser)===null||U===void 0?void 0:U.ie)===null||L===void 0?void 0:L.version)===null||Y===void 0?void 0:Y.indexOf("trident"))>-1&&(this.browser.ie.version.indexOf("6.0")>-1?this.browser.ie.version="10":this.browser.ie.version.indexOf("5.0")>-1?this.browser.ie.version="9":this.browser.ie.version.indexOf("4.0")>-1?this.browser.ie.version="8":this.browser.ie.version="11"),this}var uaTool=uaMatch.call({},navigator.userAgent),jsonTool={safelyStringify:function(G){try{return JSON.stringify(G)}catch(U){return"{}"}}},__assign$9=globalThis&&globalThis.__assign||function(){return __assign$9=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$9.apply(this,arguments)},__spreadArray$1=globalThis&&globalThis.__spreadArray||function(G,U,L){if(L||arguments.length===2)for(var Y=0,X=U.length,W;Y<X;Y++)(W||!(Y in U))&&(W||(W=Array.prototype.slice.call(U,0,Y)),W[Y]=U[Y]);return G.concat(W||Array.prototype.slice.call(U))},LogCacheLimit=4e3,noop=function(){},dummyConsole={trace:noop,debug:noop,info:noop,log:noop,warn:noop,error:noop},PatchedConsole=Object.assign({},dummyConsole);function patchConsole(G){(G||Object.keys(dummyConsole)).forEach(function(U){var L;PatchedConsole[U]=((L=self.console)===null||L===void 0?void 0:L[U])||noop})}function enableConsoleOutput(G){patchConsole(G);try{PatchedConsole.log()}catch(U){PatchedConsole=dummyConsole}}function logtool(G){return function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L]}}var LogMode;(function(G){G[G.console=1]="console",G[G.cache=2]="cache"})(LogMode||(LogMode={}));var Logger=function(){function G(U,L,Y){if(this.playerId=U,this.scopeName=L,!this.playerId)throw new Error("Missing logger id");G.cache[U]||(G.cache[U]=[]),this.logModeConfig=__assign$9({trace:LogMode.console,debug:LogMode.console,info:LogMode.console,log:LogMode.cache|LogMode.console,warn:LogMode.cache|LogMode.console,error:LogMode.cache|LogMode.console},Y)}return G.prototype.trace=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["trace"],U,!1))},G.prototype.debug=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["debug"],U,!1))},G.prototype.info=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["info"],U,!1))},G.prototype.log=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["log"],U,!1))},G.prototype.warn=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["warn"],U,!1))},G.prototype.error=function(){for(var U=[],L=0;L<arguments.length;L++)U[L]=arguments[L];this.callApi.apply(this,__spreadArray$1(["error"],U,!1))},G.prototype.callApi=function(U){for(var L=[],Y=1;Y<arguments.length;Y++)L[Y-1]=arguments[Y];var X=this,W=X.playerId,z=X.scopeName,J="["+W.slice(-8)+"]["+getLogTime()+"]"+(z?"["+z+"]":"");if(this.logModeConfig[U]&LogMode.cache){var Z="["+U+"]"+J+" "+L.join(",");Z.length>=LogCacheLimit&&(PatchedConsole.warn("Logger cache limit exceeded: "+Z.length),Z=Z.slice(0,LogCacheLimit)+"..."),G.cache[W].push(Z)}this.logModeConfig[U]&LogMode.console&&PatchedConsole[U].apply(PatchedConsole,__spreadArray$1([J],L,!1))},G.level=0,G.cache={},G}(),logMethodCallDecoratorCreator=function(G){G===void 0&&(G="");var U=function(L,Y,X){var W=X.value;X.value=function(){for(var z=[],J=0;J<arguments.length;J++)z[J]=arguments[J];var Z=this._logger||this.logger;return typeof(Z==null?void 0:Z.log)=="function"&&Z.log("@"+G+"."+Y+"()",jsonTool.safelyStringify(z)),W.apply(this,z)}};return U};function dumpLog(G){var U=document.createElement("a"),L=G.join(`

`);U.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(L)),U.setAttribute("download","tp-log-"+Date.now()+".txt"),U.style.display="none",document.body.appendChild(U),U.click(),document.body.removeChild(U)}function getLogTime(){var G=new Date,U=G.getHours()+":"+G.getMinutes()+":"+G.getSeconds()+("."+("0000"+G.getMilliseconds()).slice(-3));return U}var cookieTool={set:function(G,U,L,Y,X){var W={domain:L,path:Y};return X&&(W.expires=new Date().getTime()+X*3600*1e3),t.setCookie(G,U,W),!0},get:function(G){return t.getCookie(G)||""},del:t.clearCookie},lsTool={getData:function(G){var U="";try{window.localStorage&&(U=window.localStorage[G])}catch(L){window.console.log(L)}return U},setData:function(G,U){if(!(G==="undefined"||G===void 0))try{window.localStorage&&(window.localStorage[G]=U)}catch(L){window.console.log(L)}},delData:function(G){try{window.localStorage&&window.localStorage.removeItem(G)}catch(U){window.console.log(U)}}},urlTool={object2string:function(G,U){return U===void 0&&(U="&"),this.convertUrlParam(G,U,!1)},convertUrlParam:function(G,U,L){if(U===void 0&&(U="&"),L===void 0&&(L=!0),!G)return"";var Y=Object.keys(G);if(Y.length<=0)return"";var X=[];return Y.forEach(function(W){var z="";L?z=encodeURIComponent(W)+"="+encodeURIComponent(G[W]):z=W+"="+G[W],X.push(z)}),X.join(U)},getRootDomain:function(){var G=window.location.hostname||window.location.host,U=window.location.host.split(".");return U.length>1&&(G=U.slice(U.length-2).join(".")),G},getTopFrameUrl:function(){var G="";if(window.top!==window)try{G=window.top.location.href}catch(U){G=document.referrer}else G=window.location.href;return G},getDomainOfURL:function(G){if(typeof G=="undefined"||G===null||G==="")return"";try{return new URL(G).hostname}catch(U){return""}},getUrlParamByKey:function(G,U){return h$3(G||location.href).query[U]||""},getUrlParams:function(G){return h$3(G||location.href).query},updateUrlParam:function(G,U,L){var Y=G,X=this.getUrlParamByKey(Y,U),W=U+"="+L;return X?Y=Y.replace(U+"="+X,W):Y=Y+(Y.indexOf("?")!==-1?"&":"?")+W,Y},getFileName:function(G){if(!G)return null;var U=G,L=U.indexOf("?");L>0&&(U=U.slice(0,L));var Y=U.lastIndexOf("/");Y>0&&(U=U.slice(Y+1,U.length));var X=U.lastIndexOf("#");return X>0&&(U=U.slice(0,X)),U},getFileExtension:function(G){if(!G)return null;if(this.isWebRTCLink(G))return"webrtc";var U=urlTool.getFileName(G);if(U){var L=U.split(".");if(L&&L.length>1)return L[L.length-1]}return null},isWebRTCLink:function(G){return/^webrtc:\/\//.test(G)}},__extends$a=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),SimpleDefer=function(){function G(){var U=this;this.state="pending",this.promise=new Promise(function(L,Y){U.resolve=function(X){U.state="fulfilled",L(X)},U.reject=function(X){U.state="rejected",Y(X)}})}return G}(),TimeoutDefer=function(G){__extends$a(U,G);function U(L){var Y=G.call(this)||this;return L.timeoutMS>0&&setTimeout(function(){return Y.reject()},L.timeoutMS),Y}return U}(SimpleDefer),__assign$8=globalThis&&globalThis.__assign||function(){return __assign$8=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$8.apply(this,arguments)},domTool={insertStyle:y$1,loadScript:function(G,U,L,Y){var X=new TimeoutDefer({timeoutMS:L});return x$1(__assign$8(__assign$8({},Y),{src:G}),U).then(X.resolve).catch(X.reject),X.promise},attr:S$1,removeAttr:function(G,U){!G||U&&(U==="src"?delete G.src:G.removeAttribute(U))},css:E$1,append:function(G,U){!G||G.appendChild(U)},prepend:function(G,U){G.children[0]?G.insertBefore(U,G.children[0]):G.appendChild(U)},addClass:q,removeClass:_$1,hasClass:M,hide:O$1,show:k,text:j$1,html:C$1,creatDom:function(G){var U=document.createElement("div");return U.innerHTML=G,U.firstChild},getDomSize:function(G){if(!G)return{width:0,height:0};var U=G.currentStyle?G.currentStyle:window.getComputedStyle(G,null),L=parseFloat(U.width),Y=parseFloat(U.height);return{width:L,height:Y}},createVideoDom:function(G){var U,L;G===void 0&&(G={});var Y={playsinline:{playsinline:"isiPhoneShowPlaysinline","webkit-playsinline":"isiPhoneShowPlaysinline"},airplay:{airplay:"allow","x-webkit-airplay":"allow"},crossorigin:{crossOrigin:"anonymous"},"h5-page":{"x5-video-player-type":"h5-page"}},X=__assign$8({playsinline:!0,"h5-page":!0},G),W=Object.keys(X).reduce(function(J,Z){return Y[Z]&&typeof X[Z]=="boolean"?J=__assign$8(__assign$8({},J),X[Z]?Y[Z]:{}):J[Z]=X[Z],J},{}),z=document.createElement("video");return Object.keys(W).forEach(function(J){z.setAttribute(J,W[J])}),E$1(z,{position:"absolute",width:(U=G==null?void 0:G.width)!==null&&U!==void 0?U:"100%",height:(L=G==null?void 0:G.height)!==null&&L!==void 0?L:"100%",top:0,left:0}),z},getElementFromConfig:function(G){return typeof G=="string"?document.querySelector(G):G}},r$1=function(){return(r$1=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++)for(var X in U=arguments[L])Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X]);return G}).apply(this,arguments)};function n(G,U,L,Y){return new(L||(L=Promise))(function(X,W){function z(ee){try{Z(Y.next(ee))}catch(te){W(te)}}function J(ee){try{Z(Y.throw(ee))}catch(te){W(te)}}function Z(ee){var te;ee.done?X(ee.value):(te=ee.value,te instanceof L?te:new L(function(re){re(te)})).then(z,J)}Z((Y=Y.apply(G,U||[])).next())})}function o(G,U){var L,Y,X,W,z={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return W={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function J(Z){return function(ee){return function(te){if(L)throw new TypeError("Generator is already executing.");for(;z;)try{if(L=1,Y&&(X=2&te[0]?Y.return:te[0]?Y.throw||((X=Y.return)&&X.call(Y),0):Y.next)&&!(X=X.call(Y,te[1])).done)return X;switch(Y=0,X&&(te=[2&te[0],X.value]),te[0]){case 0:case 1:X=te;break;case 4:return z.label++,{value:te[1],done:!1};case 5:z.label++,Y=te[1],te=[0];continue;case 7:te=z.ops.pop(),z.trys.pop();continue;default:if(X=z.trys,!((X=X.length>0&&X[X.length-1])||te[0]!==6&&te[0]!==2)){z=0;continue}if(te[0]===3&&(!X||te[1]>X[0]&&te[1]<X[3])){z.label=te[1];break}if(te[0]===6&&z.label<X[1]){z.label=X[1],X=te;break}if(X&&z.label<X[2]){z.label=X[2],z.ops.push(te);break}X[2]&&z.ops.pop(),z.trys.pop();continue}te=U.call(G,z)}catch(re){te=[6,re],Y=0}finally{L=X=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([Z,ee])}}}var i=function(){function G(){this.interceptors=[]}return G.prototype.use=function(U,L){return this.interceptors.push({resolved:U,rejected:L}),this.interceptors.length-1},G.prototype.traverse=function(U,L){L===void 0&&(L=!1);var Y=Promise.resolve(U);return(L?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,function(X,W){if(W){var z=W.resolved,J=W.rejected;Y=Y.then(z,J)}return X},""),Y},G.prototype.eject=function(U){this.interceptors[U]&&(this.interceptors[U]=null)},G}(),c$1={defaults:{timeout:0,method:"GET",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new i,response:new i}},u$1=/^([a-z][a-z\d+\-.]*:)?\/\//i,a$1=Object.prototype.toString;function s$1(G){return n(this,void 0,void 0,function(){var U;return o(this,function(L){switch(L.label){case 0:if(window.fetch)return[2];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,x$1({src:G})];case 2:return L.sent(),[3,4];case 3:throw U=L.sent(),new Error("\u52A0\u8F7D polyfill "+G+" \u5931\u8D25: "+U.message);case 4:return[2]}})})}function l$1(G){return["Accept","Content-Type"].forEach(function(U){return L=U,void((Y=G.headers)&&Object.keys(Y).forEach(function(X){X!==L&&X.toUpperCase()===L.toUpperCase()&&(Y[L]=Y[X],delete Y[X])}));var L,Y}),function(U){if(a$1.call(U)!=="[object Object]")return!1;var L=Object.getPrototypeOf(U);return L===null||L===Object.prototype}(G.body)&&(G.body=JSON.stringify(G.body),G.headers&&(G.headers["Content-Type"]="application/json;charset=utf-8")),G}var f$1=function(){},d$1=1;function h$1(G,U){return U===void 0&&(U={}),new Promise(function(L,Y){var X,W=U.name,z=U.query,J=z===void 0?{}:z,Z=U.param,ee=Z===void 0?"callback":Z,te=U.timeout,re=te===void 0?6e4:te,ie=U.prefix,ne=ie===void 0?"jsonp_":ie,oe=U.controller,se=U.charset,ae=W||""+ne+d$1++,le=document.createElement("script"),ue=re?setTimeout(function(){ce(!0),Y(new Error("jsonp timeout"))},re):null,ce=function(fe){var de;fe===void 0&&(fe=!1),(de=le.parentNode)===null||de===void 0||de.removeChild(le),ue&&clearTimeout(ue),oe&&(oe.element=null),window[ae]=fe?f$1:null},he=m$2({url:G,query:r$1(r$1({},J),(X={},X[ee]=ae,X))});le.src=he,se&&(le.charset=se),oe&&(oe.element=le),le.onerror=function(fe){ce(),Y(fe)},window[ae]=function(fe){ce(),L(fe)},document.body.appendChild(le)})}function v$1(G){return n(this,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se,ae,le;return o(this,function(ue){switch(ue.label){case 0:return U=c$1.baseURL,L=c$1.defaults,Y=c$1.interceptors,[4,s$1(c$1.polyfillUrl)];case 1:return ue.sent(),(X=r$1(r$1({},L),G)).headers||(X.headers=function(ce){ce===void 0&&(ce="GET");var he=c$1.headers[ce]||{};return r$1(r$1({},c$1.headers.common),he)}(X.method)),l$1(X),[4,Y.request.traverse(X,!0)];case 2:if((W=ue.sent())instanceof Error)throw W;return W.url=function(ce,he){return!ce||u$1.test(he)?he:ce.replace(/\/+$/,"")+"/"+he.replace(/^\/+/,"")}(U,W.url),z=W.url,J=W.timeout,Z=W.params,ee=W.method,te=["GET","DELETE","OPTIONS","HEAD"].includes(ee===void 0?"GET":ee)&&!!Z,re=te?m$2({url:z,query:Z}):z,ie=[],J&&!W.signal&&(se=new Promise(function(ce){ne=setTimeout(function(){ce(new Error("timeout"))},J)}),ie.push(se),oe=new AbortController,W.signal=oe.signal),ie.push(fetch(re,W).catch(function(ce){return ce})),[4,Promise.race(ie)];case 3:return ae=ue.sent(),ne&&clearTimeout(ne),[4,Y.response.traverse(ae)];case 4:if((le=ue.sent())instanceof Error)throw oe==null||oe.abort(),le;return[2,le]}})})}var netTool={jsonp:h$1,img:function(G){return new window.Promise(function(U,L){var Y=new Image;Y.src=G,U()})},fetch:function(G,U){return U===void 0&&(U={}),v$1({url:G,method:U.method,body:U.body}).then(function(L){return L.json()})},xhr:function(G){var U=G.retryCount||0,L=+new Date,Y=0,X=function(W,z){var J=function(ee){ee===void 0&&(ee="xhrNetworkError"),Y<U?(Y++,X(W,z)):z({error:ee,target:Z})},Z=new XMLHttpRequest;Z.open(G.method||"get",G.url),G.timeout&&(Z.timeout=G.timeout),G.responseType&&(Z.responseType=G.responseType),Z.withCredentials=!!G.withCredentials,Z.ontimeout=G.ontimeout,G.range&&Z.setRequestHeader("Range","bytes="+G.range[0]+"-"+G.range[1]),G.headers&&Object.keys(G.headers).forEach(function(ee){Z.setRequestHeader(ee,G.headers[ee])}),Z.onload=function(){if(Z.status===200||Z.status===206){W({data:Z.response,target:Z,startTimestamp:L});return}J("xhrStatusCodeError")},Z.onerror=function(ee){J()},Z.onabort=function(){},Z.ontimeout=function(){J()},G.body?Z.send(G.body):Z.send()};return new Promise(function(W,z){X(W,z)})}},__awaiter$5=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$5=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},testVideoElement=document.createElement("video"),videoTool={getBuffered:function(G){for(var U=[],L=G.buffered.length,Y=0;Y<L;Y++)U.push({start:G.buffered.start(Y),end:G.buffered.end(Y)});return U},checkTimeInBuffer:function(G,U){for(var L=!1,Y=U.length,X=0;X<Y;X++){var W=U[X].start,z=U[X].end;if(G>=W&&G<=z){L=!0;break}}return L},clear:function(G){!G||(G instanceof HTMLVideoElement?(G.removeAttribute("src"),G.srcObject=null):(G.srcConfig=null,G.src=null),G.load())},destroyElement:function(G){var U;!G||((U=G.destroy)===null||U===void 0||U.call(G),videoTool.clear(G),videoTool.removeElement(G,null))},captureVideo:function(G,U){var L=U.dx,Y=U.dy,X=U.dw,W=U.dh,z=G.videoWidth,J=G.videoHeight,Z=document.createElement("canvas");Z.width=z,Z.height=J;var ee=Z.getContext("2d");return ee.drawImage(G,0,0,z,J),{captureHeight:W,captureWidth:X,captureX:L,captureY:Y,playtime:G.currentTime,data:ee.getImageData(L,Y,X,W)}},resizeElement:function(G,U){var L;if(!(!U||!G))if(G instanceof HTMLElement)domTool.css(G,U);else{var Y=U.width,X=U.height;typeof Y=="number"&&typeof X=="number"&&((L=G.resize)===null||L===void 0||L.call(G,Y,X))}},appendElement:function(G,U){var L;G instanceof HTMLElement?domTool.append(U,G):(L=G.appendToParent)===null||L===void 0||L.call(G,U)},removeElement:function(G,U){var L;G instanceof HTMLElement?G!=null&&G.parentNode&&G.remove():(L=G.removeFromParent)===null||L===void 0||L.call(G,U)},setElementFitType:function(G,U){G&&G instanceof HTMLElement&&domTool.css(G,{"object-fit":U})},getDefaultMaxBufferTime:function(){var G=navigator.connection;return G&&G.type==="wifi"?180:G&&G.type==="4g"?120:180},isAutoPlayBlockedMessage:function(G){return G&&/interact|not allowed|user gesture/.test(G)},supportSameTimePlay:function(){return!(uaTool.browser.x5&&["45031","45032"].indexOf(""+uaTool.browser.x5.version)!==-1||uaTool.browser.mqqbrowser&&!(uaTool.browser.qqlive||uaTool.browser.wechat||uaTool.browser.mqq)||uaTool.os.ios&&uaTool.os.version&&comTool.compareVersion(uaTool.os.version,"11.0")<0)},cannotDetectAutoPlayBlock:function(){return uaTool.browser.chrome&&comTool.compareVersion(uaTool.browser.chrome.version,"66.0")<0},supportMediaFragmentsURISpec:function(G){return typeof G!="undefined"?!!G:window.navigator.userAgent.indexOf("jsdom")!==-1?!1:!uaTool.mobile||!!uaTool.os.ios},getVideoPlaybackQuality:function(G){var U=0,L=0;if(G!=null&&G.getVideoPlaybackQuality){var Y=G.getVideoPlaybackQuality();L=Y.droppedVideoFrames||0,U=Y.totalVideoFrames||0}else G&&G.webkitDecodedFrameCount&&(U=G.webkitDecodedFrameCount,L=G.webkitDroppedFrameCount);return{totalVideoFrames:U,droppedVideoFrames:L}},supportMSE:function(){var G=videoTool.getMediaSource();if(!G)return!1;var U=window.SourceBuffer||window.WebKitSourceBuffer,L=G&&typeof G.isTypeSupported=="function"&&G.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),Y=!U||U.prototype&&typeof U.prototype.appendBuffer=="function"&&typeof U.prototype.remove=="function";return!!L&&!!Y},supportVideoFormat:function(){var G={mp4:"video/mp4",mov:"video/mp4",hls:"application/x-mpegURL",avi:"video/x-msvideo",mpeg:"video/mpeg",webm:"video/webm",ogg:"video/ogg"},U=[];return Object.keys(G).forEach(function(L){var Y=G[L],X=testVideoElement.canPlayType(Y);["maybe","probably"].indexOf(X)!==-1&&U.push(L)}),U},supportAV1:function(){var G=videoTool.getMediaSource();return G==null?void 0:G.isTypeSupported("video/mp4;codecs=av01.0.12M.08")},isVideoCanPlayType:function(G){return testVideoElement.canPlayType(G)},isMediaSourceTypeSupported:function(G){try{return videoTool.getMediaSource().isTypeSupported(G)}catch(U){return!1}},isMediaCapabilitiesTypeSupported:function(G){return __awaiter$5(this,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te,re,ie;return __generator$5(this,function(ne){switch(ne.label){case 0:U=G.type,L=G.mimeType,Y=G.resolution,X=Y===void 0?"860x480":Y,W=G.bitrate,z=W===void 0?800:W,J=G.framerate,Z=J===void 0?30:J,ne.label=1;case 1:switch(ne.trys.push([1,3,,4]),ee={type:"media-source"},U){case"audio":ee.audio={contentType:L};break;case"audio-spatial":ee.audio={contentType:L,spatialRendering:!0};break;case"video":te=X.toLowerCase().split("x"),re=te[0],ie=te[1],ee.video={contentType:L,bitrate:z,framerate:Z,height:+re,width:+ie}}return[4,navigator.mediaCapabilities.decodingInfo(ee)];case 2:return[2,ne.sent().supported];case 3:return ne.sent(),[2,!1];case 4:return[2]}})})},isHDRSupported:function(){try{return window.matchMedia("(dynamic-range: high)").matches?2:window.matchMedia("(color-gamut: p3)").matches?1:0}catch(G){return 0}},isDolbyVisionSupported:function(){return videoTool.isMediaSourceTypeSupported('video/mp4; codecs="dvhe"')},isDolbyAtomsSupported:function(G){return videoTool.isMediaSourceTypeSupported('audio/mp4; codecs="ec-3"')},getMediaSource:function(){if(typeof window!="undefined")return window.MediaSource||window.WebKitMediaSource},supportWidevine:function(){return __awaiter$5(this,void 0,void 0,function(){var G,U,L;return __generator$5(this,function(Y){switch(Y.label){case 0:if(G=[window.MediaKeys,window.WebKitMediaKeys].some(function(X){return X}),!G)return[2,!1];if(U=typeof window.navigator.requestMediaKeySystemAccess!="undefined",!U)return[2,!1];L=[{initDataTypes:["cenc"],audioCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,window.navigator.requestMediaKeySystemAccess("com.widevine.alpha",L)];case 2:return Y.sent(),[2,!0];case 3:return Y.sent(),[2,!1];case 4:return[2]}})})},supportFairplay:function(){var G,U=KeySystems.FairPlayWebKit,L=(G=window.WebKitMediaKeys)===null||G===void 0?void 0:G.isTypeSupported(U,"video/mp4");return L},supportWebGL:function(){var G=document.createElement("canvas"),U;try{U=G.getContext("webgl")}catch(L){return!1}return!!U}},stringTool={arrayToString:function(G){return String.fromCharCode.apply(null,new Uint16Array(G.buffer))},base64ToUint8Array:function(G){for(var U="=".repeat((4-G.length%4)%4),L=(G+U).replace(/-/g,"+").replace(/_/g,"/"),Y=window.atob(L),X=new Uint8Array(Y.length),W=0;W<Y.length;++W)X[W]=Y.charCodeAt(W);return X},arrayBufferToBase64:function(G){for(var U="",L=new Uint8Array(G),Y=L.byteLength,X=0;X<Y;X++)U+=String.fromCharCode(L[X]);return window.btoa(U)},stringToArray:function(G){for(var U=G.length,L=new ArrayBuffer(U*2),Y=new Uint16Array(L),X=0;X<U;X++)Y[X]=G.charCodeAt(X);return Y}},_a$7,LoopMode;(function(G){G[G.Timer=0]="Timer",G[G.RAF=1]="RAF"})(LoopMode||(LoopMode={}));var LoopRunnerPair=(_a$7={},_a$7[LoopMode.RAF]=[window.requestAnimationFrame.bind(window),window.cancelAnimationFrame.bind(window)],_a$7[LoopMode.Timer]=[window.setTimeout.bind(window),window.clearTimeout.bind(window)],_a$7),TaskLoop=function(){function G(U,L){this.running=!1,this.callback=U,L===LoopMode.RAF&&LoopRunnerPair[L][0]?this.mode=LoopMode.RAF:this.mode=LoopMode.Timer,this.runner=LoopRunnerPair[this.mode][0]}return G.prototype.start=function(U){var L=this;if(U===void 0&&(U=0),!this.running){this.running=!0;var Y=function(){var X;!L.running||((X=L.callback)===null||X===void 0||X.call(L),L.loopId=L.runner(Y,U))};this.loopId=this.runner(Y,U)}},G.prototype.stop=function(){!this.running||(this.running=!1,this.loopId&&LoopRunnerPair[this.mode][1](this.loopId),this.loopId=null)},G.prototype.destroy=function(){this.stop(),this.callback=null,this.loopId=null},G}(),DRM_ERR_CODE;(function(G){G.UNKNOWN="70090000",G.KEY_SYS_ACCESS_FAILED="70090001",G.KEY_SESSION_CREATION_FAILED="70090002",G.KEY_SYS_NOT_SUPPORTED="70090003",G.KEY_SYS_NOT_REQUESTED="70090004",G.KEY_SESSION_NOT_EXIST="70090005",G.KEY_NOT_EXIST="70090006",G.INIT_DATA_EMPTY="70090007",G.FPS_SET_KEY_FAILED="70090008",G.FPS_CERTIFICATE_NOT_EXIST="7009009",G.HDCP_ERROR="70090010",G.LICENSE_REQUEST_FAILED="70090011",G.LICENSE_NOT_EXIST="70090012",G.KEY_SESSION_REQUEST_FAILED="70090013",G.KEY_SESSION_UPDATE_FAILED="70090014",G.KEY_EXPIRED="70090015",G.KEY_RELEASED="70090016",G.KEY_INTERNAL_ERROR="70090017"})(DRM_ERR_CODE||(DRM_ERR_CODE={}));function transformInitData(G,U,L){var Y=stringTool.stringToArray(U),X=G.byteLength+4+Y.byteLength+4+L.byteLength,W=0,z=new ArrayBuffer(X),J=new DataView(z),Z=new Uint8Array(z,W,G.byteLength);Z.set(G),W+=Z.byteLength,J.setUint32(W,Y.byteLength,!0),W+=4;var ee=new Uint16Array(z,W,Y.length);ee.set(Y),W+=ee.byteLength,J.setUint32(W,L.byteLength,!0),W+=4;var te=new Uint8Array(z,W,L.byteLength);return te.set(L),new Uint8Array(z,0,z.byteLength)}function getContentId(G){var U,L,Y,X=stringTool.arrayToString(G),W=(Y=(L=(U=X.split("skd://"))===null||U===void 0?void 0:U[1])===null||L===void 0?void 0:L.split("?"))===null||Y===void 0?void 0:Y[0];return W}var __extends$9=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$7=globalThis&&globalThis.__assign||function(){return __assign$7=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$7.apply(this,arguments)},__awaiter$4=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$4=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},KeySystems;(function(G){G.FairPlayWebKit="com.apple.fps.1_0",G.Widevine="com.widevine.alpha",G.FairPlay="com.apple.fps"})(KeySystems||(KeySystems={}));function getSupportedKeySystemConfig(G){switch(G){case KeySystems.FairPlayWebKit:return null;case KeySystems.Widevine:return{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"',robustness:"SW_SECURE_CRYPTO"}]};case KeySystems.FairPlay:return{initDataTypes:["skd"],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}]};default:return null}}var ERR="error",DRM=function(G){__extends$9(U,G);function U(L,Y,X){var W=G.call(this)||this;return W.started=!1,W.mediaKeyDescriptor=null,W.mediaKeyPromise=null,W.onVideoEncrypted=function(z){if(!W.mediaKeyPromise){W.emit(ERR,{code:DRM_ERR_CODE.KEY_SYS_NOT_REQUESTED,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u8BF7\u6C42CDM"});return}W.mediaKeyPromise.then(function(J){if(!W.mediaKeyDescriptor){W.emit(ERR,{code:DRM_ERR_CODE.KEY_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u83B7\u53D6\u5230MediaKey"});return}if(W.mediaKeyDescriptor.hasInitialized){W.logger.warn("Media key-session has been initialized but requested again");return}if(!W.mediaKeyDescriptor.mediaKeys){W.emit(ERR,{code:DRM_ERR_CODE.KEY_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u5C1A\u672A\u83B7\u53D6\u5230MediaKey"});return}if(W.media.setMediaKeys(W.mediaKeyDescriptor.mediaKeys),!W.mediaKeyDescriptor.mediaKeySession){W.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46CDM Session\u672A\u521B\u5EFA"});return}if(!z.initData){W.emit(ERR,{code:DRM_ERR_CODE.INIT_DATA_EMPTY,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u4E8B\u4EF6\u4FE1\u606F\u4E2D\u6CA1\u6709\u7528\u4E8E\u521B\u5EFA\u8BF7\u6C42\u7684initData"});return}W.mediaKeyDescriptor.mediaKeySession.generateRequest(z.initDataType,z.initData).catch(function(Z){W.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_REQUEST_FAILED,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46CDM Session\u8BF7\u6C42\u5931\u8D25"})}),W.mediaKeyDescriptor.initData=z.initData,W.mediaKeyDescriptor.hasInitialized=!0})},W.onVideoWebkitneedkey=function(z){var J=W.config.fpsCustomContentId(z.initData),Z=U.serverCertificate[KeySystems.FairPlayWebKit];if(!Z){W.emit(ERR,{code:DRM_ERR_CODE.FPS_CERTIFICATE_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46 Fairplay \u670D\u52A1\u7AEF\u8BC1\u4E66\u672A\u914D\u7F6E"});return}var ee=W.config.fpsCustomTransformInitData(z.initData,J,Z);if(W.mediaKeyDescriptor.initData=ee,W.mediaKeyDescriptor.mediaKeySession){W.logger.warn("Media key-session has already been initialized");return}W.mediaKeyDescriptor.mediaKeySession=W.createSessionWithMediaKey(W.mediaKeyDescriptor.mediaKeys,ee),W.mediaKeyDescriptor.assetID=J,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeyadded=W.onFPSKeySessionKeyAdded,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeyerror=W.onFPSKeySessionKeyError,W.mediaKeyDescriptor.mediaKeySession.onwebkitkeymessage=function(te){W.onMediaKeySessionMessage(W.mediaKeyDescriptor.mediaKeySession,te)}},W.onFPSKeySessionKeyAdded=function(z){},W.onFPSKeySessionKeyError=function(z){var J=W.mediaKeyDescriptor.mediaKeySession.error;if(J.systemCode){var Z={1212433232:[DRM_ERR_CODE.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"]};Z[J.systemCode]&&W.emit(ERR,{code:Z[J.systemCode][0],message:Z[J.systemCode][1]});return}W.emit(ERR,{code:DRM_ERR_CODE.UNKNOWN,message:"\u672A\u77E5\u9519\u8BEF"})},W.media=L,W.logger=X,W.config=__assign$7({keySystem:null,fpsCustomContentId:getContentId,fpsCustomTransformInitData:transformInitData},Y),W}return Object.defineProperty(U.prototype,"isFairPlay",{get:function(){var L=this.config.keySystem;return L===KeySystems.FairPlay||L===KeySystems.FairPlayWebKit},enumerable:!1,configurable:!0}),U.isKeySystemSupported=function(L){var Y,X,W,z=(Y={},Y[KeySystems.FairPlayWebKit]=[(X=self.WebKitMediaKeys)===null||X===void 0?void 0:X.isTypeSupported(L,"video/mp4")],Y[KeySystems.FairPlay]=[uaTool.browser.safari,self.MediaKeys,self.navigator.requestMediaKeySystemAccess],Y[KeySystems.Widevine]=[self.MediaKeys,self.navigator.requestMediaKeySystemAccess],Y);return(W=z[L])===null||W===void 0?void 0:W.every(Boolean)},U.prototype.destroy=function(){this.removeAllListeners(),this.logger=null},U.prototype.configure=function(L){var Y=this;this.config=__assign$7(__assign$7({},this.config),L),this.config.certificate&&Object.keys(this.config.certificate).forEach(function(X){U.serverCertificate[X]=Y.config.certificate[X]})},U.prototype.hasStarted=function(){return this.started},U.prototype.init=function(L){return __awaiter$4(this,void 0,void 0,function(){return __generator$4(this,function(Y){switch(Y.label){case 0:return[4,this.reset()];case 1:return Y.sent(),L&&this.configure(L),typeof U.serverCertificate[this.config.keySystem]!="string"?[3,3]:[4,this.requestServerCertificate(this.config.keySystem,U.serverCertificate[this.config.keySystem])];case 2:Y.sent(),Y.label=3;case 3:return this.bind(),[2]}})})},U.prototype.reset=function(){return __awaiter$4(this,void 0,void 0,function(){var L,Y,X;return __generator$4(this,function(W){switch(W.label){case 0:if(this.started=!1,!this.config.keySystem||!this.mediaKeyDescriptor)return[2];if(L=(X={},X[KeySystems.FairPlayWebKit]=this.cleanupFPSSession,X[KeySystems.FairPlay]=this.cleanupMediaKeySession,X[KeySystems.Widevine]=this.cleanupMediaKeySession,X),this.videoEncryptedEventPicker(!1),!L[this.config.keySystem])return[3,4];Y=this.mediaKeyDescriptor.mediaKeySession,this.mediaKeyPromise=null,this.mediaKeyDescriptor=null,W.label=1;case 1:return W.trys.push([1,3,,4]),[4,L[this.config.keySystem].call(this,Y)];case 2:return W.sent(),[3,4];case 3:return W.sent(),[3,4];case 4:return[2]}})})},U.prototype.bind=function(){var L=this.config.keySystem;if(!!L){if(!U.isKeySystemSupported(L)){this.logger.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 "+L);return}this.started=!0,this.mediaKeyPromise=this.createKeySystemAccess(L),this.videoEncryptedEventPicker(!0)}},U.prototype.cleanupMediaKeySession=function(L){return!this.media||!L?Promise.resolve():(L.onmessage=null,L.onkeystatuseschange=null,L.close().catch(function(){}),this.media.setMediaKeys(null))},U.prototype.videoEncryptedEventPicker=function(L){var Y;L===void 0&&(L=!0);var X=(Y={},Y[KeySystems.FairPlayWebKit]=["webkitneedkey",this.onVideoWebkitneedkey],Y[KeySystems.Widevine]=["encrypted",this.onVideoEncrypted],Y[KeySystems.FairPlay]=["encrypted",this.onVideoEncrypted],Y),W=X[this.config.keySystem],z=W[0],J=W[1];L?this.media.addEventListener(z,J):this.media.removeEventListener(z,J)},U.prototype.createSessionWithMediaKey=function(L,Y){var X,W=(X={},X[KeySystems.FairPlayWebKit]=this.createFPSWebkitSession,X[KeySystems.Widevine]=this.createMediaKeySession,X[KeySystems.FairPlay]=this.createMediaKeySession,X);return W[this.config.keySystem].call(this,L,Y)},U.prototype.createKeySystemAccess=function(L){var Y,X=(Y={},Y[KeySystems.Widevine]=this.requestKeySystemAccess,Y[KeySystems.FairPlay]=this.requestKeySystemAccess,Y[KeySystems.FairPlayWebKit]=this.requestFPSMediaKeys,Y);return X[this.config.keySystem].call(this,L)},U.prototype.requestLicense=function(L,Y){var X;if(!this.config.licenseUrl){this.emit(ERR,{code:DRM_ERR_CODE.LICENSE_NOT_EXIST,message:"\u89C6\u9891\u8D44\u6E90\u5DF2\u52A0\u5BC6\uFF0C\u4F46\u672A\u914D\u7F6E\u89E3\u5BC6\u8BC1\u4E66\u5730\u5740"});return}var W=(X={},X[KeySystems.FairPlayWebKit]=this.createFPSLicenseRequest,X[KeySystems.Widevine]=this.createWidevineLicenseRequest,X[KeySystems.FairPlay]=this.createFPSLicenseRequest,X);return W[this.config.keySystem].call(this,L,Y)},U.prototype.requestServerCertificate=function(L,Y){return __awaiter$4(this,void 0,void 0,function(){var X;return __generator$4(this,function(W){switch(W.label){case 0:return[4,netTool.xhr({method:"GET",responseType:"arraybuffer",url:Y})];case 1:return X=W.sent().data,U.serverCertificate[L]=new Uint8Array(X),[2]}})})},U.prototype.requestKeySystemAccess=function(L){return __awaiter$4(this,void 0,void 0,function(){var Y,X;return __generator$4(this,function(W){switch(W.label){case 0:if(Y=getSupportedKeySystemConfig(L),!Y)return this.emit(ERR,{code:DRM_ERR_CODE.KEY_SYS_NOT_SUPPORTED,message:L+" \u4E0D\u652F\u6301"}),[2];W.label=1;case 1:return W.trys.push([1,3,,4]),[4,self.navigator.requestMediaKeySystemAccess(L,[Y])];case 2:return X=W.sent(),[2,this.onMediaKeySystemObtained(L,X)];case 3:return W.sent(),this.emit(ERR,{code:DRM_ERR_CODE.KEY_SYS_ACCESS_FAILED,message:"\u8BBF\u95EECDM\u5931\u8D25, keySystem "+L}),[2];case 4:return[2]}})})},U.prototype.onMediaKeySystemObtained=function(L,Y){return __awaiter$4(this,void 0,void 0,function(){var X;return __generator$4(this,function(W){switch(W.label){case 0:return[4,Y.createMediaKeys()];case 1:X=W.sent(),this.mediaKeyDescriptor={hasInitialized:!1,mediaKeySession:null,mediaKeySystemAccess:Y,mediaKeys:X},W.label=2;case 2:return W.trys.push([2,5,,6]),L!==KeySystems.FairPlay?[3,4]:[4,X.setServerCertificate(U.serverCertificate[KeySystems.FairPlay])];case 3:W.sent(),W.label=4;case 4:return this.createSessionWithMediaKey(X),[2,X];case 5:return W.sent(),this.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_CREATION_FAILED,message:"CDM Session\u521D\u59CB\u5316\u5931\u8D25"}),[2];case 6:return[2]}})})},U.prototype.createMediaKeySession=function(L){var Y=this;if(this.mediaKeyDescriptor.mediaKeySession){this.logger.warn("Media key-session has already been initialized");return}var X={"output-restricted":[DRM_ERR_CODE.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"],"output-downscaled":[DRM_ERR_CODE.HDCP_ERROR,"\u4F60\u53EF\u80FD\u94FE\u63A5\u4E86\u4E0D\u652F\u6301HDCP\u6807\u51C6\u7684\u663E\u793A\u5668"],"status-pending":null,"internal-error":[DRM_ERR_CODE.KEY_INTERNAL_ERROR,"\u5185\u90E8\u9519\u8BEF"],usable:null,expired:[DRM_ERR_CODE.KEY_EXPIRED,"MediaKey\u5DF2\u8FC7\u671F"],released:[DRM_ERR_CODE.KEY_RELEASED,"MediaKey\u5DF2\u4ECECDM\u4E2D\u6CE8\u9500"]};this.mediaKeyDescriptor.mediaKeySession=L.createSession(),this.mediaKeyDescriptor.mediaKeySession.onkeystatuseschange=function(W){var z,J,Z;(Z=(J=(z=W.target)===null||z===void 0?void 0:z.keyStatuses)===null||J===void 0?void 0:J.forEach)===null||Z===void 0||Z.call(J,function(ee,te){if(!!Y.mediaKeyDescriptor&&X[ee]){var re=X[ee],ie=re[0],ne=re[1];Y.emit(ERR,{code:ie,message:ne})}})},this.mediaKeyDescriptor.mediaKeySession.onmessage=function(W){Y.onMediaKeySessionMessage(Y.mediaKeyDescriptor.mediaKeySession,W)}},U.prototype.onMediaKeySessionMessage=function(L,Y){var X=this;this.requestLicense(Y,function(W){var z=W.data;if(X.config.licenseResponseSetup&&(z=X.config.licenseResponseSetup(z)||z),!z){X.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_UPDATE_FAILED,message:"CDM Session\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8BC1\u4E66\u89E3\u6790"});return}var J=L.update(z);J==null||J.catch(function(Z){X.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_UPDATE_FAILED,message:"CDM Session\u66F4\u65B0\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8BC1\u4E66\u89E3\u6790"})})})},U.prototype.createWidevineLicenseRequest=function(L,Y){var X=this,W=L.message,z={method:"POST",responseType:"arraybuffer",body:W,url:this.config.licenseUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"}};this.config.licenseRequestSetup&&(z=this.config.licenseRequestSetup(z)),netTool.xhr(z).then(function(J){Y(J)}).catch(function(J){var Z=J||{},ee=Z.code,te=Z.message,re=DRM_ERR_CODE.LICENSE_REQUEST_FAILED+"."+(ee!=null?ee:"0");X.emit(ERR,{code:re,message:"\u8BC1\u4E66\u8BF7\u6C42\u5931\u8D25 [code: "+ee+"] "+te})})},U.prototype.createFPSLicenseRequest=function(L,Y){var X=this,W=L.message,z=encodeURIComponent(stringTool.arrayBufferToBase64(W)),J={method:"POST",responseType:"arraybuffer",body:"spc="+z+"&assetId="+this.mediaKeyDescriptor.assetID,url:this.config.licenseUrl,headers:{"Content-Type":"application/x-www-form-urlencoded"}};this.config.licenseRequestSetup&&(J=this.config.licenseRequestSetup(J)),netTool.xhr(J).then(function(Z){Y(Z)}).catch(function(Z){X.logger.warn("license request error",Z),X.emit(ERR,{code:DRM_ERR_CODE.LICENSE_REQUEST_FAILED,message:"\u8BC1\u4E66\u8BF7\u6C42\u5931\u8D25"})})},U.prototype.requestFPSMediaKeys=function(){var L=new window.WebKitMediaKeys(KeySystems.FairPlayWebKit);return this.media.webkitSetMediaKeys(L),this.mediaKeyDescriptor={mediaKeySession:null,initData:null,hasInitialized:!1,mediaKeySystemAccess:null,mediaKeys:this.media.webkitKeys},Promise.resolve(L)},U.prototype.createFPSWebkitSession=function(L,Y){if(!L){this.emit(ERR,{code:DRM_ERR_CODE.FPS_SET_KEY_FAILED,message:"Webkit MediaKey\u521B\u5EFA\u5931\u8D25"});return}var X=L.createSession("video/mp4",Y);if(!X){this.emit(ERR,{code:DRM_ERR_CODE.KEY_SESSION_CREATION_FAILED,message:"Webkit CDM Session\u521B\u5EFA\u5931\u8D25"});return}return X},U.prototype.cleanupFPSSession=function(L){return L&&(this.media.webkitSetMediaKeys(null),L.onwebkitkeyadded=null,L.onwebkitkeyerror=null,L.onwebkitkeymessage=null),Promise.resolve()},U.serverCertificate={},U}(s$3),AutoPlayPolicy=function(){function G(U,L){this._logger=new Logger(L.instanceId,"AutoPlayPolicy"),this._videoElement=U}return G.prototype.userTrigger=function(){var U=this;this._triggerDefer=new SimpleDefer,this._logger.log("userTrigger(), start");var L,Y=function(z){L>0&&(clearTimeout(L),L=0),U._logger.log("userTrigger(), catch: ",z.name,z.message),videoTool.isAutoPlayBlockedMessage(z.message)?U._triggerDefer.reject(z):(U._logger.log("userTrigger() over, catched."),U._triggerDefer.resolve())},X=this._videoElement.play();if(this._videoElement.pause(),this._videoElement.readyState===0)X&&X.catch(Y),L=window.setTimeout(function(){U._logger.log("userTrigger() over, timeout."),U._triggerDefer.resolve()},300);else{this._logger.log("userTrigger() over, sync.");var W=uaTool.browser.safari&&!uaTool.mobile?400:0;window.setTimeout(function(){U._triggerDefer.resolve()},W)}return this._triggerDefer.promise},G.prototype.destroy=function(){this._videoElement=null},G}(),__extends$8=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),CheckHealth=function(G){__extends$8(U,G);function U(L){var Y=G.call(this)||this;return Y.stateStartTimeStamp=0,Y.preFramePlaytime=0,Y.playtimeStalledFrameCount=0,Y.videoNode=L,Y.setVideoNodeEvts(!0),Y}return U.prototype.loop=function(){var L=+new Date;this.checkStateStalled(L),this.checkPlaytimeStalled()},U.prototype.destroy=function(){this.setVideoNodeEvts(!1),this.removeAllListeners(),this.stateStartTimeStamp=0,this.videoNode=null,this.videoNodeEvtMap=null,this.preFramePlaytime=0,this.playtimeStalledFrameCount=0},U.prototype.setVideoNodeEvts=function(L){var Y,X=this;this.videoNodeEvtMap||(this.videoNodeEvtMap=(Y={},Y[VIDEO_NODE_EVENT.STATE_CHANGE]=this.videoNodeStateChange.bind(this),Y)),Object.keys(this.videoNodeEvtMap).forEach(function(W){L?X.videoNode.on(W,X.videoNodeEvtMap[W]):X.videoNode.off(W,X.videoNodeEvtMap[W])})},U.prototype.videoNodeStateChange=function(L){this.stateStartTimeStamp=+new Date},U.prototype.checkStateStalled=function(L){var Y=this.videoNode,X=Y.config,W=Y.state;[VIDEO_STATE.BUFFERING,VIDEO_STATE.SEEKING].indexOf(W)!==-1&&(this.stateStartTimeStamp<=0||X.maxStateStalledTime<=0||L-this.stateStartTimeStamp>X.maxStateStalledTime&&(this.stateStartTimeStamp=0,this.emit(HEALTH_EVTS.STATE_STUCK,{code:ERROR_CODE.STATE_STUCK,message:ERROR_MSG.PLAY_STUCK,state:W})))},U.prototype.checkPlaytimeStalled=function(){var L=this.videoNode,Y=L.config,X=L.state,W=L.videoElement;X!==VIDEO_STATE.PLAYING||W.duration<=0||W.currentTime<=0||Y.maxPlaytimeStalledTime<=0||(this.preFramePlaytime>0&&(this.preFramePlaytime!==W.currentTime?this.playtimeStalledFrameCount=0:(this.playtimeStalledFrameCount++,this.playtimeStalledFrameCount*16.7>Y.maxPlaytimeStalledTime&&(this.playtimeStalledFrameCount=0,this.emit(HEALTH_EVTS.PLAYTIME_STUCK,{code:ERROR_CODE.ORG_PLAY_STUCK_ERR,message:ERROR_MSG.PLAY_STUCK,state:X})))),this.preFramePlaytime=W.currentTime)},U}(s$3),HEALTH_EVTS;(function(G){G.STATE_STUCK="state-stuck",G.PLAYTIME_STUCK="playtime-stuck"})(HEALTH_EVTS||(HEALTH_EVTS={}));var __decorate$6=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$6=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},_a$6,VALID_PREVIOUS_STATE_MAP=(_a$6={},_a$6[VIDEO_STATE.LOAD_START]=[VIDEO_STATE.IDLE],_a$6[VIDEO_STATE.CANPLAY]=[VIDEO_STATE.LOAD_START],_a$6[VIDEO_STATE.PLAYING]=[VIDEO_STATE.CANPLAY,VIDEO_STATE.SEEKED,VIDEO_STATE.PAUSE,VIDEO_STATE.BUFFERING],_a$6[VIDEO_STATE.BUFFERING]=[VIDEO_STATE.PLAYING],_a$6[VIDEO_STATE.PAUSE]=[VIDEO_STATE.PLAYING,VIDEO_STATE.BUFFERING],_a$6[VIDEO_STATE.SEEKING]=[VIDEO_STATE.CANPLAY,VIDEO_STATE.PLAYING,VIDEO_STATE.PAUSE,VIDEO_STATE.BUFFERING,VIDEO_STATE.SEEKING],_a$6[VIDEO_STATE.SEEKED]=[VIDEO_STATE.SEEKING],_a$6[VIDEO_STATE.END]=[VIDEO_STATE.LOAD_START,VIDEO_STATE.CANPLAY,VIDEO_STATE.SEEKING,VIDEO_STATE.SEEKED,VIDEO_STATE.BUFFERING,VIDEO_STATE.PLAYING,VIDEO_STATE.PAUSE],_a$6[VIDEO_STATE.IDLE]=[VIDEO_STATE.END],_a$6),VALID_STATE_IN_LEVEL_SWITCHING=[VIDEO_STATE.PAUSE,VIDEO_STATE.PLAYING,VIDEO_STATE.END,VIDEO_STATE.IDLE],logMethodCall$7=logMethodCallDecoratorCreator("StateMgr"),StateMgr=function(){function G(U){var L;this.videoEvtHandler=(L={},L[VIDEO_EVTS.canplay]=this.onCanplayEvt.bind(this),L[VIDEO_EVTS.playing]=this.setPlaying.bind(this),L[VIDEO_EVTS.waiting]=this.setWaiting.bind(this),L[VIDEO_EVTS.pause]=this.onPauseEvt.bind(this),L[VIDEO_EVTS.seeking]=this.onSeekingEvt.bind(this),L[VIDEO_EVTS.seeked]=this.onSeekedEvt.bind(this),L),this.videoNode=U,this.logger=new Logger(U.config.instanceId,"StateMgr")}return G.prototype.destroy=function(){this.videoNode=null},G.prototype.validCallState=function(U){var L;return(L=VALID_PREVIOUS_STATE_MAP[U])===null||L===void 0?void 0:L.includes(this.videoNode.state)},G.prototype.setEnded=function(){this.setVideoNodeState(VIDEO_STATE.END),this.setVideoNodeState(VIDEO_STATE.IDLE)},G.prototype.setLoadStart=function(){this.setVideoNodeState(VIDEO_STATE.LOAD_START)},G.prototype.setCanplay=function(){this.setVideoNodeState(VIDEO_STATE.CANPLAY)},G.prototype.setWaiting=function(){this.setVideoNodeState(VIDEO_STATE.BUFFERING)},G.prototype.setPlaying=function(){this.setVideoNodeState(VIDEO_STATE.PLAYING)},G.prototype.onSetLevelOver=function(){this.videoNode.state===VIDEO_STATE.PAUSE&&this.setVideoNodeState(VIDEO_STATE.PLAYING)},G.prototype.receiveVideoEvt=function(U){var L,Y;(Y=(L=this.videoEvtHandler)[U])===null||Y===void 0||Y.call(L)},G.prototype.setVideoNodeState=function(U){if(this.videoNode.getLevelSwitching()&&!VALID_STATE_IN_LEVEL_SWITCHING.includes(U)){this.logger.log("can not set state 2 "+U+" when level switching");return}if(!VALID_PREVIOUS_STATE_MAP[U].includes(this.videoNode.state)){this.logger.log("can not set state from "+this.videoNode.state+" to "+U);return}this.videoNode.state=U},G.prototype.onCanplayEvt=function(){var U=uaTool.os.ios||uaTool.browser.safari;U&&this.isVideoElementPlaying()&&this.videoNode.state===VIDEO_STATE.BUFFERING?this.setVideoNodeState(VIDEO_STATE.PLAYING):this.setVideoNodeState(VIDEO_STATE.CANPLAY)},G.prototype.onPauseEvt=function(){this.setVideoNodeState(VIDEO_STATE.PAUSE)},G.prototype.onSeekingEvt=function(){this.setVideoNodeState(VIDEO_STATE.SEEKING)},G.prototype.onSeekedEvt=function(){this.setVideoNodeState(VIDEO_STATE.SEEKED);var U=uaTool.os.ios||uaTool.browser.safari;U&&this.isVideoElementPlaying()&&this.setVideoNodeState(VIDEO_STATE.PLAYING)},G.prototype.isVideoElementPlaying=function(){return!this.videoNode.videoElement.paused&&!this.videoNode.videoElement.ended},__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"destroy",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[String]),__metadata$6("design:returntype",void 0)],G.prototype,"validCallState",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"setEnded",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"setLoadStart",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"setCanplay",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"setWaiting",null),__decorate$6([logMethodCall$7,__metadata$6("design:type",Function),__metadata$6("design:paramtypes",[]),__metadata$6("design:returntype",void 0)],G.prototype,"setPlaying",null),G}(),__extends$7=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$6=globalThis&&globalThis.__assign||function(){return __assign$6=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$6.apply(this,arguments)},__decorate$5=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$5=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},IGNORE_EVT_TYPE$1=[VIDEO_EVTS.timeupdate,VIDEO_EVTS.progress,VIDEO_EVTS.frameRender],logMethodCall$6=logMethodCallDecoratorCreator("BaseVideoNode"),BaseVideoNode=function(G){__extends$7(U,G);function U(L){var Y,X=G.call(this)||this;X._played=!1,X._evtBlocking=!1,X._pauseCloseToEndStateCheckTimeoutId=0,X._targetSeekTime=-1,X._userStartTime=0,X._isUserSeek=!1,X._setLoadingDelayTimeoutId=0,X.loadTimeoutId=0,X.levelSwitchTargetPlaytime=-1,X.setLevelMode=SET_LEVEL_MODE.SOFT,X._logger=new Logger(L.instanceId,"BaseVideoNode"),X._config=L,X.stateMgr=new StateMgr(X),X.checkPlayHealth=new CheckHealth(X),X.setHealthEvents(),X.mainTaskLoop=new TaskLoop(X.mainLoopInProcess.bind(X),LoopMode.RAF);var W=X._config.container;return X._video=X.findFreeVideoElement(),X._autoPlayPolicy=new AutoPlayPolicy(X._video,{instanceId:L.instanceId}),X._state=VIDEO_STATE.IDLE,X._playbackRate=1,X._idx=0,X._videoInfo=null,X._pauseType=void 0,X._videoEventMap=(Y={},Y[VIDEO_EVTS.loadstart]=X.onVideoEventLoadStart.bind(X),Y[VIDEO_EVTS.timeupdate]=X.onVideoEventTimeUpdate.bind(X),Y[VIDEO_EVTS.durationchange]=X.onVideoEventDurationChange.bind(X),Y[VIDEO_EVTS.volumechange]=X.onVideoEventVolumeChange.bind(X),Y[VIDEO_EVTS.canplay]=X.onVideoEventCanplay.bind(X),Y[VIDEO_EVTS.playing]=X.onVideoEventPlaying.bind(X),Y[VIDEO_EVTS.pause]=X.onVideoEventPause.bind(X),Y[VIDEO_EVTS.waiting]=X.onVideoEventWaiting.bind(X),Y[VIDEO_EVTS.seeking]=X.onVideoEventSeeking.bind(X),Y[VIDEO_EVTS.seeked]=X.onVideoEventSeeked.bind(X),Y[VIDEO_EVTS.loadeddata]=X.onVideoEventLoadeddata.bind(X),Y[VIDEO_EVTS.loadedmetadata]=X.onVideoEventLoadedmetadata.bind(X),Y[VIDEO_EVTS.ended]=X.onVideoEventEnded.bind(X),Y[VIDEO_EVTS.error]=X.onVideoEventError.bind(X),Y[VIDEO_EVTS.progress]=X.onVideoEventProgress.bind(X),Y[VIDEO_EVTS.ratechange]=X.onVideoEventRateChange.bind(X),Y[VIDEO_EVTS.resize]=X.onVideoEventResize.bind(X),Y),X._drm=new DRM(X._video,L.drmConfig,X._logger),X._drm.on("error",X.onDrmError.bind(X)),X._eventMap={video:X.onVideoEvents.bind(X)},X._eventAddedMap={},X._videoElementContainer=domTool.getElementFromConfig(W).querySelector("."+VIDEO_CONTAINER_CLASS),videoTool.appendElement(X._video,X._videoElementContainer),X.addVideoElementResizeObserver(),X}return U.prototype.setLevel=function(L){if(L===void 0&&(L=SET_LEVEL_MODE.HARD),!this.checkCanSetLevel())return Promise.reject(new Error("setLevel can't start"));this._logger.log("setLevel(), succ exec: ",this._videoInfo);var Y=this._videoInfo.playtime;this.load(this._videoInfo,{startTime:Y}),this.play();var X=new SimpleDefer;return this._levelSwitchingDefer=X,this.levelSwitchTargetPlaytime=Y,this.setLoading(!0),this.emit(VIDEO_NODE_EVENT.SETLEVEL_START,{videoInfo:this._videoInfo,mode:L}),X.promise},U.prototype.isCurrentContentDRMEncrypted=function(){return this._state===VIDEO_STATE.IDLE?!1:this._drm.hasStarted()},U.prototype.getLevelSwitching=function(){return!!this._levelSwitchingDefer},U.prototype.checkSetLevelOver=function(L){if(!!this.getLevelSwitching()){var Y=!1,X=!1,W=!1;this._config.type===PLAY_MODE.LIVE?(Y=L===VIDEO_EVTS.playing,W=L===VIDEO_EVTS.timeupdate):(Y=L===VIDEO_EVTS.playing&&videoTool.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI),X=L===VIDEO_EVTS.seeked&&!videoTool.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI),W=L===VIDEO_EVTS.timeupdate&&this._video.currentTime-this.levelSwitchTargetPlaytime>=.3),(Y||X||W)&&(this._logger.log("setLevelOver(), reason: "+("succOnPlaying="+Y+"/succOnSeeked="+X+"/succOnTimeupdate="+W)),this.setLevelOver())}},U.prototype.setLevelOver=function(){!this._levelSwitchingDefer||(this._levelSwitchingDefer.resolve(),this._levelSwitchingDefer=null,this.levelSwitchTargetPlaytime=-1,this.setLoading(!1),this.stateMgr.onSetLevelOver(),this.emit(VIDEO_NODE_EVENT.SETLEVEL_OVER,{videoInfo:this._videoInfo}))},U.prototype.checkCanSetLevel=function(){return this._played?this.getLevelSwitching()?(this._logger.warn("setLevel(), in progress."),!1):!this._videoInfo||this._videoInfo.playtime<=0?(this._logger.warn("setLevel(), setLevel can't start."),!1):this._config.type===PLAY_MODE.VOD&&this._videoInfo.playtime+1>=this._videoInfo.duration?(this._logger.warn("setLevel(), video is about to end."),!1):!0:(this._logger.warn("setLevel(), play is not triggered."),!1)},U.prototype.checkCanSeek=function(L,Y){return Y===void 0&&(Y=!1),this._videoInfo?this._video.duration<=0?(this._logger.log("seek(), cannot seek when the duration is 0"),!1):L-this._videoInfo.duration>=1?(this._logger.log("seek(), return because too large time, uid="+this._videoInfo.uid+"/idx="+this.idx+"/time="+L+("/duration="+this._videoInfo.duration)),!1):typeof this.setLevelMode!="undefined"&&this.setLevelMode!==SET_LEVEL_MODE.SMOOTH&&this.getLevelSwitching()&&Y?(this._logger.log("seek(), cannot seek when hard/soft level switching"),!1):!0:(this._logger.log("seek(), return because null videoInfo, time="+L+"/idx="+this.idx),!1)},U.prototype.findFreeVideoElement=function(){for(var L=this._config.videoElements,Y=null,X=0;X<L.length;X++){var W=L[X];if(typeof W.dataset.used=="undefined"||W.dataset.used===VIDEO_ELEMENT_STATE.FREE){Y=L[X];break}}if(!Y)throw new Error("Unable to find free video element!");return Y.dataset.used=VIDEO_ELEMENT_STATE.USED,Y},U.prototype.setMainLoopEnable=function(L){L?this.mainTaskLoop.start():this.mainTaskLoop.stop()},U.prototype.mainLoopInProcess=function(){this.updateAccuratePlaytime(),this.checkPlayHealth.loop()},U.prototype.updateAccuratePlaytime=function(){var L;this._state!==VIDEO_STATE.PLAYING||this._video.duration<=0||this._video.readyState<VIDEO_READY_STATE.HAVE_ENOUGH_DATA||((L=this.onAccurateTimeupdate)===null||L===void 0||L.call(this,this._video.currentTime,this._video.duration),this.updatePlaytime(this._video.currentTime,!0))},U.prototype.setCheckLoadTimeoutEnable=function(L){var Y=this;if(L){if(this._config.maxPreloadTimeout<=0)return;this.loadTimeoutId=window.setTimeout(function(){Y.errorHandler({code:ERROR_CODE.ORG_LOAD_TIMEOUT,message:ERROR_MSG.PRELOAD_VIDEO_TIMEOUT})},this._config.maxPreloadTimeout)}else this.loadTimeoutId>0&&(clearTimeout(this.loadTimeoutId),this.loadTimeoutId=0)},U.prototype.setEndInner=function(){this._state!==VIDEO_STATE.END&&this._state!==VIDEO_STATE.IDLE&&(this._logger.log("setEndInner(), idx="+this._idx+"/uid="+this._videoInfo.uid+"/playtime="+this._videoInfo.playtime+("/duration="+this._videoInfo.duration+"}")),this.stateMgr.setEnded(),this.emit(VIDEO_NODE_EVENT.PLAY_OVER,{isUserStop:!1,endState:END_STATE.NORMAL,videoInfo:this._videoInfo}))},U.prototype.stopInner=function(L,Y){var X;!this._video||!this._videoInfo||(this.setMainLoopEnable(!1),this.setCheckLoadTimeoutEnable(!1),this._isUserSeek=!1,this._logger.log("stopInner(), uid/state/idx: "+((X=this._videoInfo)===null||X===void 0?void 0:X.uid)+"/"+this.state+"/"+this.idx),this.setVideoEvents(!1),this._config.clearVideoAfterStop?videoTool.clear(this._video):this._video.pause(),this._config.createVideoNodeWhenLoad&&(this._video.dataset.used=VIDEO_ELEMENT_STATE.FREE),this._videoInfo&&(this._videoInfo.extraVars.isLoadstarted=!1,this._videoInfo=null),this._pauseCloseToEndStateCheckTimeoutId>0&&(window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId),this._pauseCloseToEndStateCheckTimeoutId=0),this.state!==VIDEO_STATE.IDLE&&(L||(this.stateMgr.setEnded(),this._played=!1,this._levelSwitchingDefer=null,Y!=null&&Y.error&&this.emit(VIDEO_NODE_EVENT.ERROR,{videoInfo:Y}))))},U.prototype.onVideoEventPause=function(){this._pauseType!==PAUSE_TYPE.INNER&&this.stateMgr.receiveVideoEvt(VIDEO_EVTS.pause)},U.prototype.onVideoEventPlaying=function(){this.setCheckLoadTimeoutEnable(!1),this._isUserSeek=!1,this.updateVideoSize(),uaTool.browser.x5&&this.onVideoEventDurationChange(),this._videoInfo.hasFirstPlaying||this.emit(VIDEO_NODE_EVENT.FIRST_PLAYING,{videoInfo:this._videoInfo}),this.stateMgr.receiveVideoEvt(VIDEO_EVTS.playing),this._videoInfo&&(this._videoInfo.hasFirstPlaying=!0),this._userStartTime=0,this.checkSetLevelOver(VIDEO_EVTS.playing)},U.prototype.onVideoEventRateChange=function(){this.emit(VIDEO_NODE_EVENT.RATE_CHANGE,{playbackRate:this.playbackRate,videoInfo:this._videoInfo})},U.prototype.onVideoEventEnded=function(){this._logger.log("setEndInner(), reason=endedEvt"),this.setEndInner()},U.prototype.onVideoEventSeeked=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS.seeked),this.checkSetLevelOver(VIDEO_EVTS.seeked),this.resumeAfterSeek(),this._isUserSeek=!1},U.prototype.resumeAfterSeek=function(){!this._played||this._video.ended||!this._isUserSeek||(this._video.paused?this._config.remainPauseStateAfterSeek||this.videoplay():this.stateMgr.setPlaying())},U.prototype.onVideoEventCanplay=function(){this.setCheckLoadTimeoutEnable(!1),this._videoInfo&&(this._videoInfo.qualityInfo.canplaytime||(this._videoInfo.qualityInfo.canplaytime=videoTool.getBuffered(this._video)),this.stateMgr.receiveVideoEvt(VIDEO_EVTS.canplay))},U.prototype.onVideoEventResize=function(){this.updateVideoSize(!0)},U.prototype.onVideoEventDurationChange=function(){this._video.duration>0&&this._video.duration!==this._videoInfo.duration&&(this._videoInfo.duration=this._video.duration,this._logger.log("onVideoEventDurationChange(), uid="+this._videoInfo.uid+"/duration="+this._videoInfo.duration+"/"+("idx="+this.idx)),this.emit(VIDEO_NODE_EVENT.DURATION_CHANGE,{videoInfo:this._videoInfo}))},U.prototype.onVideoEventVolumeChange=function(){this.emit(VIDEO_NODE_EVENT.VOLUME_CHANGE,{volume:this.volume,videoInfo:this._videoInfo})},U.prototype.onVideoEventTimeUpdate=function(){this._video.currentTime!==0&&(this.updatePlaytime(this._video.currentTime),this.checkSetLevelOver(VIDEO_EVTS.timeupdate),this._state===VIDEO_STATE.BUFFERING&&this.stateMgr.setPlaying())},U.prototype.onVideoEventLoadStart=function(){},U.prototype.onVideoEventWaiting=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS.waiting)},U.prototype.onVideoEventSeeking=function(){this.stateMgr.receiveVideoEvt(VIDEO_EVTS.seeking)},U.prototype.onVideoEventProgress=function(){this.emit(VIDEO_NODE_EVENT.VIDEO_BUFFER_CHANGE,{videoInfo:this._videoInfo})},U.prototype.onVideoEventLoadedmetadata=function(L){this.updateVideoSize(),this.emit(VIDEO_NODE_EVENT.METADATA_CHANGE,{videoInfo:this._videoInfo})},U.prototype.updateVideoSize=function(L){L===void 0&&(L=!1);var Y=this._video.videoWidth,X=this._video.videoHeight;this._videoInfo&&(this._videoInfo.videoWidth!==Y||this._videoInfo.videoHeight!==X)&&(this._videoInfo.videoWidth=Y,this._videoInfo.videoHeight=X,this.emit(VIDEO_NODE_EVENT.VIDEO_RESIZE,{videoInfo:this._videoInfo,isNative:L}),this.adjustmentVideoSizeIfSmallBorder())},U.prototype.addVideoElementResizeObserver=function(){var L=this;!window.ResizeObserver||this._video instanceof HTMLVideoElement&&(this.videoResizeObserver=new ResizeObserver(function(Y){L.adjustmentVideoSizeIfSmallBorder()}),this.videoResizeObserver.observe(this._video))},U.prototype.removeVideoElementResizeObserver=function(){this.videoResizeObserver&&this._video&&this._video instanceof HTMLVideoElement&&(this.videoResizeObserver.disconnect(),this.videoResizeObserver.unobserve(this._video),this.videoResizeObserver=null)},U.prototype.adjustmentVideoSizeIfSmallBorder=function(){if(this._video instanceof HTMLVideoElement&&!!this._videoInfo&&!(this._config.minFillBlackBorder<=0)){var L=domTool.getDomSize(this._video),Y=L.width,X=L.height,W=this._videoInfo.videoWidth*(X/this._videoInfo.videoHeight),z=this._videoInfo.videoHeight*(Y/this._videoInfo.videoWidth),J=this._config.minFillBlackBorder;W<Y&&W>=Y-J?videoTool.setElementFitType(this._video,"cover"):z<X&&z>=X-J?videoTool.setElementFitType(this._video,"cover"):videoTool.setElementFitType(this._video,"contain")}},U.prototype.onVideoEventLoadeddata=function(){this.emit(VIDEO_NODE_EVENT.VIDEO_BUFFER_CHANGE,{videoInfo:this._videoInfo})},U.prototype.onVideoEventError=function(){this.errorHandler()},U.prototype.errorHandler=function(L){var Y=this.parseErrorData(L);this._logger.log("errorHandler(), error: ",Y),this.retryWhenError(Y)},U.prototype.parseErrorData=function(L){var Y,X,W,z,J;if(L)return Y=L.code,z=Y===void 0?ERROR_CODE.UNKNOWN_ERR:Y,X=L.message,J=X===void 0?ERROR_MSG.UNKNOWN:X,{code:z,message:J};var Z=VIDEO_ELEMENT_ERROR[(W=this.videoElement.error)===null||W===void 0?void 0:W.code]||{code:ERROR_CODE.UNKNOWN_ERR,message:ERROR_MSG.UNKNOWN};return z=Z.code,J=Z.message,{code:z,message:J}},U.prototype.retryWhenError=function(L){var Y=this._videoInfo,X=this.setRetryUrl(Y),W=Y.config.expireTimeStamp,z=typeof W=="undefined"?!1:W<+new Date;if(!L.fatal&&!z&&X){var J=Y.getRetryCount();this._logger.log("retryOnError(), retryCount=",J),this.emit(VIDEO_NODE_EVENT.RETRY,__assign$6({error:L,retryCount:J,videoInfo:Y},X)),this.stopInner(!0),this.stateMgr.setWaiting(),this._state!==VIDEO_STATE.BUFFERING&&this.setLoading(!0),this.doRetry(Y);return}this._logger.log("retryOnError(), fatal."),this._videoInfo.error=L,this._levelSwitchingDefer&&this._levelSwitchingDefer.reject(),this.stopInner(!1,this._videoInfo)},U.prototype.doRetry=function(L){var Y=L.playtime,X=this._video.currentTime>0?this._video.currentTime:Y,W=this._played?X:this._userStartTime,z=this._played?this.play.bind(this):this.load.bind(this);L.playtime=W,z(L,{startTime:W})},U.prototype.onDrmError=function(L){var Y=L.data,X=Y.code,W=Y.message;this._logger.log("onDrmError(), code="+X+"/msg="+W),this._videoInfo.error=L.data,this.stopInner(!1,this._videoInfo)},U.prototype.setHealthEvents=function(){var L=this,Y=function(X){L._logger.warn("get health evt!!! evt="+X.type+"/uid="+L._videoInfo.uid+"/state="+L._state),L.retryWhenError(X.data)};this.checkPlayHealth.on(HEALTH_EVTS.STATE_STUCK,Y),this.checkPlayHealth.on(HEALTH_EVTS.PLAYTIME_STUCK,Y)},U.prototype.setVideoEvents=function(L){var Y=this,X;this._eventAddedMap.videoEventAdded!==L&&(this._logger.log("setVideoEvents(), idx="+this._idx+"/value="+L+"/uid="+((X=this._videoInfo)===null||X===void 0?void 0:X.uid)),this._eventAddedMap.videoEventAdded=L,Object.keys(this._videoEventMap).forEach(function(W){L?Y._video.addEventListener(W,Y._eventMap.video):Y._video.removeEventListener(W,Y._eventMap.video)}))},U.prototype.setLoading=function(L,Y){var X=this;Y===void 0&&(Y=0),this._setLoadingDelayTimeoutId>0&&(window.clearTimeout(this._setLoadingDelayTimeoutId),this._setLoadingDelayTimeoutId=0),L?Y>0?this._setLoadingDelayTimeoutId=window.setTimeout(function(){X.emit(VIDEO_NODE_EVENT.SET_LOADING,{show:!0})},Y):this.emit(VIDEO_NODE_EVENT.SET_LOADING,{show:!0}):this.emit(VIDEO_NODE_EVENT.SET_LOADING,{show:!1})},U.prototype.onVideoEvents=function(L){var Y=this,X;if(this.state===VIDEO_STATE.IDLE||!this._videoInfo||this._evtBlocking){this._logger.log("videoevt discard, idx="+this._idx+"/uid="+((X=this._videoInfo)===null||X===void 0?void 0:X.uid)+"/evttype="+L.type+"/"+("state="+this.state+"/evtBlocking="+this._evtBlocking));return}IGNORE_EVT_TYPE$1.includes(L.type)||this._logger.log("videoevt, uid="+this._videoInfo.uid+"/idx="+this.idx+"/type="+L.type+"/"+("time="+this._video.currentTime+"/duration="+this._video.duration)),this.emit(VIDEO_NODE_EVENT.ELEMENT_EVTS,{videoInfo:this._videoInfo,elementEvtType:L.type});var W=Math.abs(this._videoInfo.duration-this._videoInfo.playtime)<.1&&this._videoInfo.duration>0;L.type==="pause"&&W?this._pauseCloseToEndStateCheckTimeoutId=window.setTimeout(function(){Y._videoEventMap[L.type]&&Y._videoEventMap[L.type](L)},0):(L.type==="ended"&&this._pauseCloseToEndStateCheckTimeoutId>0&&(window.clearTimeout(this._pauseCloseToEndStateCheckTimeoutId),this._pauseCloseToEndStateCheckTimeoutId=0),this._videoEventMap[L.type]&&this._videoEventMap[L.type](L))},U.prototype.createStream=function(L){return null},U.prototype.setRetryUrl=function(L){var Y=L.loadingUrl,X=Y,W=L.setNextBackUrl();return W?{prevUrl:X,curUrl:L.loadingUrl}:null},U.prototype.triggerAutoplay=function(){var L=this;return this._evtBlocking=!0,this._autoPlayPolicy.userTrigger().then(function(){return L._evtBlocking=!1}).catch(function(Y){throw L._evtBlocking=!1,Y})},Object.defineProperty(U.prototype,"useWorker",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"idx",{get:function(){return this._idx},set:function(L){this._idx=L,this._video.dataset.idx=""+L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElement",{get:function(){return this._video},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){return{width:this._video.videoWidth,height:this._video.videoHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){return videoTool.getBuffered(this._video)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){return this._video.playbackRate},set:function(L){this._playbackRate=L;try{this._video.playbackRate=L}catch(Y){this._logger.warn("set playbackRate: "+(Y==null?void 0:Y.message))}},enumerable:!1,configurable:!0}),U.prototype.videoplay=function(){var L=this,Y;this._logger.log("videoplay(), uid="+((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid)+"/state="+this.state+"/idx="+this.idx);var X=this._video.play();return X?X.catch(function(W){L._logger.warn(L.idx+" play() catch: "+W.name+", "+W.message);var z=videoTool.isAutoPlayBlockedMessage(W.message);z&&L.setLoading(!1),L.emit(VIDEO_NODE_EVENT.PLAY_PROMISE_CATCHED,{videoInfo:L._videoInfo,isAutoPlayBlocked:z})}):X=Promise.resolve(),this._video.playbackRate=this._playbackRate,X},Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){return this._videoInfo},enumerable:!1,configurable:!0}),U.prototype.pause=function(){if(!this._played){this._logger.warn("pause(), VideoNode has not been played");return}if(!this.stateMgr.validCallState(VIDEO_STATE.PAUSE)){this._logger.log("call pause in invaild state "+this._state);return}this.pauseInner(PAUSE_TYPE.USER)},U.prototype.pauseInner=function(L){var Y;L===void 0&&(L=PAUSE_TYPE.INNER),this._logger.log("pause(), uid="+((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid)+"/state="+this.state+"/idx="+this.idx+"/type="+L),this._pauseType=L,this._video.pause()},U.prototype.resume=function(){throw new Error("not implements")},Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!uaTool.browser.x5},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){var L=this._videoInfo?this._videoInfo.duration:0;return Number.isNaN(L)?0:L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._video.muted?0:this._video.volume},set:function(L){if(L<0||L>1){this._logger.warn("The volume value range is [0,1]");return}this._video.volume=L,this._video.muted=L<=0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){return this._videoInfo?this._videoInfo.playtime:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this._state},set:function(L){var Y;if(this._state!==L){var X=this._state;this._state=L,this._videoInfo&&(this._videoInfo.state=this._state),this._logger.log("set state(), uid="+((Y=this._videoInfo)===null||Y===void 0?void 0:Y.uid)+"/idx="+this._idx+"/old="+X+"/new="+L);var W={videoInfo:this._videoInfo,new:L,old:X};L===VIDEO_STATE.PAUSE?(W.pauseType=this._pauseType||PAUSE_TYPE.SYS,this._pauseType=void 0):L===VIDEO_STATE.SEEKING?(W.seekingTime=this._targetSeekTime,W.isUserSeek=this._isUserSeek,this._targetSeekTime=-1):L===VIDEO_STATE.SEEKED&&(W.isUserSeek=this._isUserSeek),this.setLoadingOnStateChange(),this.emit(VIDEO_NODE_EVENT.STATE_CHANGE,W)}},enumerable:!1,configurable:!0}),U.prototype.stop=function(){this.stopInner()},U.prototype.updatePlaytime=function(L,Y){if(Y===void 0&&(Y=!1),!!this._videoInfo){var X=videoTool.getVideoPlaybackQuality(this._video),W=X.totalVideoFrames,z=X.droppedVideoFrames;this._videoInfo.qualityInfo.totalVideoFrames=W,this._videoInfo.qualityInfo.droppedVideoFrames=z,this._videoInfo.playtime!==L&&(this._videoInfo.playtime=L),Y||this.emit(VIDEO_NODE_EVENT.TIME_UPDATE,{videoInfo:this._videoInfo})}},U.prototype.destroy=function(){var L,Y,X,W;this.stopInner(),this._video&&(this._eventMap&&(this.setVideoEvents(!1),this._eventMap=null),videoTool.clear(this._video),videoTool.removeElement(this._video,this._videoElementContainer),this._video.dataset.used=VIDEO_ELEMENT_STATE.FREE),(L=this._autoPlayPolicy)===null||L===void 0||L.destroy(),(Y=this.stateMgr)===null||Y===void 0||Y.destroy(),this.removeAllListeners(),this.removeVideoElementResizeObserver(),(X=this._drm)===null||X===void 0||X.destroy(),this._autoPlayPolicy=null,this._video=null,this._videoInfo=null,this._videoElementContainer=null,this._played=!1,this._config=null,(W=this.checkPlayHealth)===null||W===void 0||W.destroy(),this.mainTaskLoop.destroy(),this._logger.log("VideoNode has been destroyed!")},U.prototype.setLoadingOnStateChange=function(){if(!this._played){this.setLoading(!1);return}if([VIDEO_STATE.BUFFERING,VIDEO_STATE.SEEKING].includes(this._state)){var L=500;this.setLoading(!0,L);return}(this._config.type===PLAY_MODE.LIVE&&VIDEO_STATE.CANPLAY!==this._state||this._config.type===PLAY_MODE.VOD)&&this.setLoading(!1)},__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[String]),__metadata$5("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[Boolean]),__metadata$5("design:returntype",void 0)],U.prototype,"setCheckLoadTimeoutEnable",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[]),__metadata$5("design:returntype",void 0)],U.prototype,"setEndInner",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[Boolean,Object]),__metadata$5("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[Object]),__metadata$5("design:returntype",void 0)],U.prototype,"retryWhenError",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[]),__metadata$5("design:returntype",void 0)],U.prototype,"pause",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[String]),__metadata$5("design:returntype",void 0)],U.prototype,"pauseInner",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[]),__metadata$5("design:returntype",void 0)],U.prototype,"stop",null),__decorate$5([logMethodCall$6,__metadata$5("design:type",Function),__metadata$5("design:paramtypes",[]),__metadata$5("design:returntype",void 0)],U.prototype,"destroy",null),U}(s$3),__extends$6=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__decorate$4=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$4=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$5=logMethodCallDecoratorCreator("OrgVideoNode"),OrgVideoNode=function(G){__extends$6(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.onVideoEventCanplay=function(){var L;(L=this._canplayDefer)===null||L===void 0||L.resolve(),G.prototype.onVideoEventCanplay.call(this)},U.prototype.onVideoEventLoadedmetadata=function(){G.prototype.onVideoEventLoadedmetadata.call(this),(uaTool.os.ios||uaTool.browser.safari)&&[PRELOAD_TYPE.META_DATA,PRELOAD_TYPE.AUTO].includes(this._config.preloadType)&&this.onVideoEventCanplay()},U.prototype.onVideoEventLoadeddata=function(){G.prototype.onVideoEventLoadeddata.call(this),this.checkPlayInitSeek()},U.prototype.onVideoEventTimeUpdate=function(){G.prototype.onVideoEventTimeUpdate.call(this),this.checkPlayInitSeek()},U.prototype.onVideoEventLoadStart=function(){this.resolveWaitVideoLoadStartEvt()},U.prototype.load=function(L,Y){var X=this;return L.loadingUrl?(this.stopInner(!0),this._drm.init(L.config.drmConfig),this._videoInfo=L,this._videoInfo.extraVars.isLoadstarted=!0,this.setVideoEvents(!0),this.stateMgr.setLoadStart(),this.assignStartTime((Y==null?void 0:Y.startTime)||0),this._video.src=this._videoInfo.loadingUrl,this._logger.log("load(), loadingUrl="+this._videoInfo.loadingUrl+", uid="+this._videoInfo.uid),this._config.preloadType===PRELOAD_TYPE.AUTO_LOAD&&this._video.load(),this.setCheckLoadTimeoutEnable(!0),this._canplayDefer=new SimpleDefer,this.waitVideoLoadStartEvt().then(function(){X._logger.log("load(), video load succ...")}).catch(function(){X._logger.error("load(), video load cannot be trigger..."),X.onVideoEventCanplay()}),!0):!1},U.prototype.play=function(L,Y){var X=this;this._logger.log("play(), uid="+(L==null?void 0:L.uid)+"/idx="+this.idx+"/state="+this.state),this._played=!0,L&&!L.extraVars.isLoadstarted&&this.load(L,Y);var W=null;return uaTool.browser.safari&&this._canplayDefer?this._canplayDefer.promise.then(function(){X.videoplay()}):W=this.videoplay(),this.setMainLoopEnable(!0),W},U.prototype.assignStartTime=function(L){if(this._config.type!==PLAY_MODE.LIVE){this._userStartTime=L;var Y=!Number.isNaN(L)&&L>=0?L:0;Y<=0||(videoTool.supportMediaFragmentsURISpec(this._config.enableMediaFragmentsURI)&&!this._videoInfo.loadingUrl.startsWith("blob:")?(this._logger.log("assignStartTime by #t"),this._videoInfo.setLoadingUrlStartTime(Y)):(this._logger.log("assignStartTime with seek()"),this._needPlaySeektime=Y))}},U.prototype.checkPlayInitSeek=function(){this._needPlaySeektime>0&&this._videoInfo&&this._video.duration>0&&(this._logger.log("checkPlayInitSeek(), idx="+this.idx+"/seektime="+this._needPlaySeektime),this.seek(this._needPlaySeektime),this._needPlaySeektime=0)},U.prototype.stopInner=function(L,Y){this._canplayDefer=null,this._needPlaySeektime=0,G.prototype.stopInner.call(this,L,Y)},U.prototype.seek=function(L,Y){Y===void 0&&(Y=!1);var X=L;return this.checkCanSeek(X,Y)?(uaTool.browser.x5&&Math.abs(X-this._videoInfo.duration)<=1&&(X=this._videoInfo.duration-1),this._isUserSeek=Y,this._logger.log("seek(), uid"+this._videoInfo.uid+"/idx="+this.idx+"/time="+X+"/duration="+this._video.duration+"/"+("state="+this.state)),this._targetSeekTime=X,this._video.currentTime=X,!0):!1},U.prototype.updateAccuratePlaytime=function(){G.prototype.updateAccuratePlaytime.call(this);var L=Math.abs(this._video.duration-this._video.currentTime),Y=this._config.originKernelConfig.advanceEndTime;Y>0&&L<=Y&&(this._logger.log("setEndInner(), reason=leftTimeCheck"),this.setEndInner())},U.prototype.setEndInner=function(){this.state!==VIDEO_STATE.END&&this.state!==VIDEO_STATE.IDLE&&(this.onAccurateTimeupdate&&this.onAccurateTimeupdate(0),this.updatePlaytime(this._video.currentTime)),G.prototype.setEndInner.call(this)},U.prototype.waitVideoLoadStartEvt=function(){var L=this;this._waitVideoLoadStartEvtDefer=new SimpleDefer;var Y=50;return window.setTimeout(function(){L._waitVideoLoadStartEvtDefer.state!=="rejected"&&L._waitVideoLoadStartEvtDefer.reject()},Y),this._waitVideoLoadStartEvtDefer.promise},U.prototype.resolveWaitVideoLoadStartEvt=function(){this._waitVideoLoadStartEvtDefer&&this._waitVideoLoadStartEvtDefer.resolve()},__decorate$4([logMethodCall$5,__metadata$4("design:type",Function),__metadata$4("design:paramtypes",[Object,Object]),__metadata$4("design:returntype",void 0)],U.prototype,"load",null),__decorate$4([logMethodCall$5,__metadata$4("design:type",Function),__metadata$4("design:paramtypes",[Object,Object]),__metadata$4("design:returntype",void 0)],U.prototype,"play",null),__decorate$4([logMethodCall$5,__metadata$4("design:type",Function),__metadata$4("design:paramtypes",[Boolean,Object]),__metadata$4("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$4([logMethodCall$5,__metadata$4("design:type",Function),__metadata$4("design:paramtypes",[Number,Object]),__metadata$4("design:returntype",void 0)],U.prototype,"seek",null),U}(BaseVideoNode),__awaiter$3=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$3=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}};function detectStream(G){return __awaiter$3(this,void 0,void 0,function(){var U,L,Y,te,X,W,z,J,Z,ee,te;return __generator$3(this,function(re){switch(re.label){case 0:U={httpCode:-1},re.label=1;case 1:return re.trys.push([1,3,,4]),[4,netTool.xhr({url:G,retryCount:0,responseType:"arraybuffer",range:[0,102400]})];case 2:L=re.sent(),Y=L.data,te=L.target,X=L.startTimestamp,U.httpCode=te.status,W=Y.byteLength/1024,z=(+new Date-X)/1e3,U.downloadSpeed=Math.floor(W/z)+"kb/s";try{U.headers=te.getAllResponseHeaders()}catch(ie){}return[3,4];case 3:return J=re.sent(),Z=J||{},ee=Z.error,te=Z.target,U.httpCode=te==null?void 0:te.status,U.error=ee,[3,4];case 4:return[2,U]}})})}function getEnvVals$1(){var G="npm";try{G="npm"}catch(X){}var U="";try{U="1.4.125"}catch(X){}var L="";try{L=1659612196178}catch(X){}var Y=!1;try{Y=0==="1"}catch(X){}return{CHANNEL:G,VERSION:U,BUILD_TIME:L,LOCAL_DEV:Y}}var _a$5=getEnvVals$1(),CHANNEL=_a$5.CHANNEL,BUILD_TIME=_a$5.BUILD_TIME,VERSION=_a$5.VERSION,LOCAL_DEV=_a$5.LOCAL_DEV,defaultPlayerConfig={type:PLAY_MODE.VOD,interruptPlayNextMinTime:1,backupUrlsMaxRetryCount:5,maxPreloadTimeout:3e4,maxBufferingTimeout:3e4,maxStateStalledTime:3e4,maxPlaytimeStalledTime:1e4,isPlayList:!1,preloadType:PRELOAD_TYPE.AUTO_LOAD,maxVideoNodeCount:1,minFillBlackBorder:10},__extends$5=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$5=globalThis&&globalThis.__assign||function(){return __assign$5=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$5.apply(this,arguments)},__decorate$3=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$3=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},__awaiter$2=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$2=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},CHANNEL_MAP;(function(G){G[G.cdn=1]="cdn",G[G.npm=0]="npm"})(CHANNEL_MAP||(CHANNEL_MAP={}));var logMethodCall$4=logMethodCallDecoratorCreator("KernelProxy"),loadKernelDeferMap={},KernelProxy=function(G){__extends$5(U,G);function U(L){var Y,X,W,z=G.call(this)||this;return z._volume=1,z._videoElements=[],z._addedEvts=[],typeof L.instanceId=="undefined"&&(L.instanceId=comTool.createGUID()),z._logger=new Logger(L.instanceId,"KernelProxy"),z._config=__assign$5(__assign$5(__assign$5({},defaultPlayerConfig),L),{maxVideoNodeCount:(W=(Y=L.maxVideoNodeCount)!==null&&Y!==void 0?Y:(X=L.originKernelConfig)===null||X===void 0?void 0:X.maxVideoNodeCount)!==null&&W!==void 0?W:defaultPlayerConfig.maxVideoNodeCount}),L.logLevel>PLAYER_LOG_LEVEL.NONE&&enableConsoleOutput(),z._config.videoElements||(z._config.videoElements=z.createVideoElements()),z.createVideoElementsContainer(),z._kernelEvtHandler=z.kernelEvtHandler.bind(z),z.collectUsage(z.prepareUsageData()),z}return Object.defineProperty(U.prototype,"isCollected",{get:function(){return U._isCollected},set:function(L){U._isCollected=L},enumerable:!1,configurable:!0}),U.prototype.prepareUsageData=function(){var L=CHANNEL_MAP[CHANNEL],Y=0,X=urlTool.getTopFrameUrl(),W=X==null?void 0:X.split("?")[0],z=urlTool.getDomainOfURL(X);return{attaid:"05700050920",token:"3619167286",topUrl:""+encodeURIComponent(X),pageUrl:""+encodeURIComponent(W),domain:""+encodeURIComponent(z),channel:""+L,from:""+Y,version:VERSION,_dc:""+Math.random()}},U.prototype.collectUsage=function(L){if(!this.isCollected){this.isCollected=!0;var Y=Object.keys(KernelFactory$1.kernelMap).join("$"),X=new Image;X.src="https://h.trace.qq.com/kv?"+urlTool.object2string(__assign$5(__assign$5({},L),{kernel:Y}),"&")}},Object.defineProperty(U.prototype,"config",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.config)||this._config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"useWorker",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.useWorker)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"kernelName",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.kernelName},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElements",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoElements)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoElement",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.currentVideoElement},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.supportPreload)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.duration)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.playtime)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoInfos",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoInfos)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"preloadVideoInfos",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.preloadVideoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){var L;return(L=this._kernel)===null||L===void 0?void 0:L.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfoIdx",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.currentVideoInfoIdx)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"totalVideoInfoCount",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.totalVideoInfoCount)||0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.supportPlaybackRate)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"played",{get:function(){var L;return!!(!((L=this._kernel)===null||L===void 0)&&L.played)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.state)||VIDEO_STATE.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoSize)||{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.videoBuffered)||[]},enumerable:!1,configurable:!0}),U.prototype.captureVideo=function(L,Y,X,W,z){var J;return(J=this._kernel)===null||J===void 0?void 0:J.captureVideo(L,Y,X,W,z)},U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.log.apply(L,Y)},U.prototype.warn=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.warn.apply(L,Y)},U.prototype.error=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.error.apply(L,Y)},U.prototype.hasAppended=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.hasAppended(L))},U.prototype.hasPreloaded=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.hasPreloaded(L))},Object.defineProperty(U.prototype,"volume",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.volume)||this._volume},set:function(L){this._volume=L,this._kernel?this._kernel.volume=L:this.emit(PLAY_EVENT.VOLUME_CHANGE,{volume:L})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){var L;return((L=this._kernel)===null||L===void 0?void 0:L.playbackRate)||this._playbackRate},set:function(L){this._playbackRate=L,this._kernel?this._kernel.playbackRate=L:this.emit(PLAY_EVENT.RATE_CHANGE,{playbackRate:L})},enumerable:!1,configurable:!0}),U.prototype.resizeVideoElements=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.resizeVideoElements(L)},U.prototype.resize=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.resize(L)},U.prototype.seek=function(L){var Y;return(Y=this._kernel)===null||Y===void 0?void 0:Y.seek(L)},U.prototype.play=function(L,Y){var X;return __awaiter$2(this,void 0,void 0,function(){var W;return __generator$2(this,function(z){switch(z.label){case 0:return L?[4,this.checkWhetherNeedToSwitchKernel(L,Y)]:[3,2];case 1:if(W=z.sent().error,W)return this.emit(PLAY_EVENT.ERROR,{videoInfo:{error:W}}),[2,Promise.reject(W)];z.label=2;case 2:return[2,(X=this._kernel)===null||X===void 0?void 0:X.play(L,Y)]}})})},U.prototype.load=function(L,Y){var X;return __awaiter$2(this,void 0,void 0,function(){var W;return __generator$2(this,function(z){switch(z.label){case 0:return L?[4,this.checkWhetherNeedToSwitchKernel(L,Y)]:[3,2];case 1:if(W=z.sent().error,W)return this.emit(PLAY_EVENT.ERROR,{videoInfo:{error:W}}),[2,Promise.reject(W)];z.label=2;case 2:return[2,(X=this._kernel)===null||X===void 0?void 0:X.load(L,Y)]}})})},U.prototype.playNext=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.playNext(L)},U.prototype.pause=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.pause(L)},U.prototype.stop=function(L){var Y;(Y=this._kernel)===null||Y===void 0||Y.stop(L)},U.prototype.appendNext=function(L){var Y;return!!(!((Y=this._kernel)===null||Y===void 0)&&Y.appendNext(L))},U.prototype.preloadNext=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];return(L=this._kernel)===null||L===void 0?void 0:L.preloadNext.apply(L,Y)},U.prototype.clearAllPreload=function(){var L;(L=this._kernel)===null||L===void 0||L.clearAllPreload()},U.prototype.triggerAutoplay=function(){var L=this,Y;if(!this._kernel){this._logger.log("triggerAutoplay(), start");var X=function(z){return new AutoPlayPolicy(z,{instanceId:L._config.instanceId}).userTrigger()},W=this._videoElements.map(X);return Promise.all(W)}return(Y=this._kernel)===null||Y===void 0?void 0:Y.triggerAutoplay()},U.prototype.setLevel=function(L,Y,X){return __awaiter$2(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$2(this,function(te){switch(te.label){case 0:return this._kernel?(W=typeof L=="string"?__assign$5(__assign$5({},X),{url:L}):L,z=this.currentVideoInfo,[4,this.checkWhetherNeedToSwitchKernel(W,null,!0)]):[2,Promise.reject("\u5207\u6362\u6E05\u6670\u5EA6\u65F6\u627E\u4E0D\u5230\u5185\u6838")];case 1:return J=te.sent(),Z=J.isKernelSwitched,ee=J.error,ee!=null&&ee.message?[2,Promise.reject(ee==null?void 0:ee.message)]:Z?[2,this.setLevelWhenKernelSwitched(__assign$5(__assign$5(__assign$5({},W),{backupUrls:Y}),X),z)]:typeof L=="string"?[2,this._kernel.setLevel(L,Y,X)]:[2,this._kernel.setLevel(L)]}})})},U.prototype.destroy=function(){var L,Y;this._videoElements&&(this._videoElements.forEach(function(X){videoTool.destroyElement(X)}),this._videoElements=null),!((L=this.videoElementsContainer)===null||L===void 0)&&L.parentNode&&this.videoElementsContainer.remove(),this._kernel&&(this.setKernelEvts(!1),(Y=this._kernel)===null||Y===void 0||Y.destroy(),this._kernel=null),this.removeAllListeners(),this._kernelEvtHandler=null,this._config=null},U.prototype.checkWhetherNeedToSwitchKernel=function(L,Y,X){return X===void 0&&(X=!1),__awaiter$2(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$2(this,function(te){switch(te.label){case 0:return W=L instanceof Array?L[0]:L,z=W.kernelName||(Y==null?void 0:Y.kernelName),J=KernelFactory$1.selectKernel(L,z),J?KernelFactory$1.kernelMap[J]?[3,2]:[4,this.loadKernel(J)]:[3,3];case 1:te.sent(),te.label=2;case 2:if(KernelFactory$1.kernelMap[J]&&!KernelFactory$1.kernelMap[J].isEnvSupport)return Z=getUrlConfigVideoType(W),[2,{isKernelSwitched:!1,error:{code:ERROR_CODE.KERNEL_NOT_SPT,message:J===KERNEL_NAME.ORIGIN?"\u65E0\u6CD5\u652F\u6301"+Z+"\u683C\u5F0F\u64AD\u653E":Z+"\u683C\u5F0F\u9700\u8981"+J+"\u5185\u6838\u64AD\u653E\uFF0C\u4F46\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u6B64\u5185\u6838"}}];te.label=3;case 3:return ee=KernelFactory$1.kernelMap[J]?J:KERNEL_NAME.ORIGIN,this._kernel&&this._kernel.kernelName!==ee&&(this._kernel.played&&!X&&this.emit(PLAY_EVENT.STOPED,{videoInfo:this._kernel.currentVideoInfo,endState:END_STATE.INTERRUPT}),this.setKernelEvts(!1),this._kernel.destroy(),this._kernel=null),this._kernel?[3,5]:[4,this.createKernel(ee)];case 4:return te.sent(),[2,{isKernelSwitched:!0,error:null}];case 5:return[2,{isKernelSwitched:!1,error:null}]}})})},U.prototype.loadKernel=function(L,Y){return Y===void 0&&(Y=3),__awaiter$2(this,void 0,void 0,function(){var X,W,z,J;return __generator$2(this,function(Z){switch(Z.label){case 0:return X=getKernelCdnPath(L,this._config.autoLoadKernelVerMap),X?loadKernelDeferMap[L]?(this._logger.log("auto download kernel ["+X+"] has been started!"),[4,loadKernelDeferMap[L].promise]):[3,2]:[2,!1];case 1:return W=Z.sent(),this._logger.log("auto download kernel ["+X+"] succ="+W),[2,W];case 2:loadKernelDeferMap[L]=new SimpleDefer,this._logger.log("auto download kernel ["+X+"]"),z=!1,J=0,Z.label=3;case 3:if(!(J<Y))return[3,9];Z.label=4;case 4:return Z.trys.push([4,6,,7]),[4,domTool.loadScript(CDN_PATH_PREFIX+X)];case 5:return Z.sent(),this._logger.log("auto download kernel ["+X+"] succ=true"),z=!0,[3,7];case 6:return Z.sent(),z=!1,this._logger.error("auto download kernel ["+X+"] failed"),[3,7];case 7:if(z)return[3,9];Z.label=8;case 8:return J++,[3,3];case 9:return loadKernelDeferMap[L].resolve(z),[2,z]}})})},U.prototype.createKernel=function(L){this._kernel=KernelFactory$1.createKernel(L,this._config),typeof this._volume!="undefined"&&(this._kernel.volume=this._volume),typeof this._playbackRate!="undefined"&&(this._kernel.playbackRate=this._playbackRate),this.setKernelEvts(!0)},U.prototype.createVideoElements=function(){for(var L=this._config,Y=L.instanceId,X=L.videoElementConfig,W=L.maxVideoNodeCount,z=__assign$5(__assign$5({preload:this._config.preloadType===PRELOAD_TYPE.META_DATA?"metadata":"auto"},X),{playerid:Y}),J=0;J<W;J++){var Z=domTool.createVideoDom(z);this._videoElements.push(Z)}return this._videoElements},U.prototype.createVideoElementsContainer=function(){var L=this._config.container,Y=domTool.getElementFromConfig(L);this.videoElementsContainer=domTool.creatDom((`
      <div class="`+VIDEO_CONTAINER_CLASS+`" style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;">
      </div>
    `).trim()),domTool.append(Y,this.videoElementsContainer)},U.prototype.on=function(L,Y,X){return G.prototype.on.call(this,L,Y,X),this.proxyEvent(L),this},U.prototype.once=function(L,Y,X){return G.prototype.once.call(this,L,Y,X),this.proxyEvent(L,!0),this},U.prototype.setKernelEvts=function(L){var Y=this;if(!!this._kernel){L&&this.setKernelEvts(!1);var X=L?this._kernel.on:this._kernel.off;this._addedEvts.forEach(function(W){X.apply(Y._kernel,[W,Y._kernelEvtHandler])})}},U.prototype.kernelEvtHandler=function(L){if(this.setLevelWhenKernelSwitchedDefer){var Y=this.checkSetLevelOverWhenKernelSwitched(L);Y&&(this.setLevelWhenKernelSwitchedDefer=null)}else this.emit(L.type,L.data)},U.prototype.setLevelWhenKernelSwitched=function(L,Y){return this.emit(PLAY_EVENT.SETLEVEL_START,{videoInfo:Y,mode:SET_LEVEL_MODE.HARD}),this._kernel.play(L,{startTime:(Y==null?void 0:Y.playtime)||0}),this.setLevelWhenKernelSwitchedDefer=new SimpleDefer,this.setLevelWhenKernelSwitchedDefer.promise},U.prototype.checkSetLevelOverWhenKernelSwitched=function(L){var Y;return L.type===PLAY_EVENT.STATE_CHANGE&&L.data.new===VIDEO_STATE.PLAYING?(this.setLevelWhenKernelSwitchedDefer.resolve(),this.emit(PLAY_EVENT.SETLEVEL_OVER,{videoInfo:this.currentVideoInfo}),!0):L.type===PLAY_EVENT.ERROR?(this.setLevelWhenKernelSwitchedDefer.reject((Y=L.data.videoInfo)===null||Y===void 0?void 0:Y.error),this.emit(PLAY_EVENT.SETLEVEL_OVER,{videoInfo:this.currentVideoInfo,fail:!0}),!0):!1},U.prototype.proxyEvent=function(L,Y){if(Y===void 0&&(Y=!1),!this._addedEvts.includes(L)&&(this._addedEvts.push(L),!!this._kernel)){if(Y){this._kernel.once(L,this._kernelEvtHandler);return}this._kernel.on(L,this._kernelEvtHandler)}},U._isCollected=!1,__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[Object,Object]),__metadata$3("design:returntype",Promise)],U.prototype,"play",null),__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[Object,Object]),__metadata$3("design:returntype",Promise)],U.prototype,"load",null),__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[Object,Array,Object]),__metadata$3("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[]),__metadata$3("design:returntype",void 0)],U.prototype,"destroy",null),__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[Object,Object,Object]),__metadata$3("design:returntype",Promise)],U.prototype,"checkWhetherNeedToSwitchKernel",null),__decorate$3([logMethodCall$4,__metadata$3("design:type",Function),__metadata$3("design:paramtypes",[String]),__metadata$3("design:returntype",void 0)],U.prototype,"createKernel",null),U}(s$3),UrlParamKey$1;(function(G){G.forceKernel="__forceKernel"})(UrlParamKey$1||(UrlParamKey$1={}));function assignApiToPrototype(G,U,L){for(var Y=Object.getPrototypeOf(G),X=Object.getOwnPropertyNames(U),W=0,z=L.length;W<z;W++){var J=L[W],Z=X.indexOf(J)!==-1;Z||typeof Y[J]!="function"||(U[J]=Y[J].bind(G))}}var KernelFactory=function(){function G(){}return G.registerKernel=function(U,L){if(!!this.kernelMap){if(this.kernelMap[U]&&L)throw new Error(U+" has been registered!");this.kernelMap[U]=L}},G.getKernelByName=function(U){return G.kernelMap[U]},G.create=function(U){return new KernelProxy(U)},G.createKernel=function(U,L){if(U){var Y=G.kernelMap[U];if(!Y)throw new Error("Can't find ["+U+"] kernel");if(Y.isEnvSupport){var X=new Y(L);return Y.exportApis&&assignApiToPrototype(X,KernelProxy.prototype,Y.exportApis),X}window.console.log("Browser does not support kernelName["+U+"]")}return new G.kernelMap.origin(L)},G.checkKernelIsSupportUrlConfig=function(U,L){var Y=getUrlConfigVideoType(L),X=this.selectKernelWithAssign(U,Y);return!!X},G.selectKernel=function(U,L){var Y=U instanceof Array?U[0]:U,X=getUrlConfigVideoType(Y);return this.selectKernelFromUrl()||this.selectKernelWhenDrm(Y)||this.selectKernelWithAssign(L,X)||this.selectKernelIfSpecialVideoType(X)||L||this.selectKernelFromInstalledList(X)||this.selectKernelInPresetMap(X)},G.selectKernelFromUrl=function(){var U=urlTool.getUrlParamByKey(location.href,UrlParamKey$1.forceKernel);return U},G.selectKernelWhenDrm=function(U){var L;return[KeySystems.FairPlay,KeySystems.FairPlayWebKit].includes((L=U.drmConfig)===null||L===void 0?void 0:L.keySystem)?KERNEL_NAME.ORIGIN:U.vcodec===CODEC.H264&&U.chachaParam?KERNEL_NAME.HLS_JS:U.vcodec===CODEC.H265&&U.chachaParam?!uaTool.mobile&&uaTool.browser.safari?KERNEL_NAME.HLS_JS:KERNEL_NAME.WASM:null},G.selectKernelWithAssign=function(U,L){var Y;if(!U)return null;var X=G.getKernelByName(U);return!X||!X.isEnvSupport||X.canPlayType!==CAN_PLAY_ALL&&!(!((Y=X.canPlayType)===null||Y===void 0)&&Y.includes(L))?null:U},G.selectKernelIfSpecialVideoType=function(U){if(U==="hls"){var L=G.kernelMap[KERNEL_NAME.ORIGIN];if(L.canPlayType.includes(U))return KERNEL_NAME.ORIGIN}return null},G.selectKernelFromInstalledList=function(U){for(var L=KERNEL_NAME_BY_PRIORITY.filter(function(W){return!!G.kernelMap[W]}),Y=0;Y<L.length;Y++){var X=this.selectKernelWithAssign(L[Y],U);if(X)return X}return null},G.selectKernelInPresetMap=function(U){return VIDEO_TYPE_2_KERNEL_NAME_MAP[U]},G.kernelMap={},G}(),KernelFactory$1=KernelFactory,KERNEL_NAME;(function(G){G.ORIGIN="origin",G.DEMUX_2_FMP4="demux2fmp4",G.FLV_JS="flv.js",G.HLS_JS="hls.js",G.WASM="wasm",G.WEBRTC="webrtc"})(KERNEL_NAME||(KERNEL_NAME={}));var KERNEL_NAME_BY_PRIORITY=[KERNEL_NAME.HLS_JS,KERNEL_NAME.FLV_JS,KERNEL_NAME.DEMUX_2_FMP4,KERNEL_NAME.WASM,KERNEL_NAME.ORIGIN,KERNEL_NAME.WEBRTC],VIDEO_TYPE_2_KERNEL_NAME_MAP={flv:KERNEL_NAME.FLV_JS,hls:KERNEL_NAME.HLS_JS};function getKernelCdnPath(G,U){var L;U===void 0&&(U={});var Y=LOCAL_DEV?"latest":U[G]||"latest",X="core/"+Y,W=(L={},L[KERNEL_NAME.HLS_JS]=X+"/txhlsjs-kernel.js",L[KERNEL_NAME.FLV_JS]=X+"/flvjs-kernel.js",L[KERNEL_NAME.DEMUX_2_FMP4]=X+"/demux2fmp4-kernel.js",L[KERNEL_NAME.WASM]=X+"/wasm-kernel.js",L[KERNEL_NAME.WEBRTC]=X+"/webrtc-kernel.js",L);return W[G]}function compareUrlConfig(G,U){return!G||!U?!1:!!(G.uid&&U.uid&&G.uid===U.uid||G===U)}function fileExtension2VideoType(G){return["m3u8","m3u"].indexOf(G)!==-1?"hls":G}function checkUrlConfigVailed(G,U){var L;if(!G)return{code:ERROR_CODE.NULL_URL,message:ERROR_MSG.NULL_URL,fatal:!0};var Y=(L=KernelFactory$1.getKernelByName(U))===null||L===void 0?void 0:L.canPlayType,X=function(Z,ee){var te=!Z.url;if(te)return{code:ERROR_CODE.NULL_URL,message:ERROR_MSG.NULL_URL,fatal:!0};if(!Z.url.startsWith("blob:")){var re=getUrlConfigVideoType(Z);if(re&&ee&&ee.indexOf(re)===-1){var ie=VIDEO_TYPE_2_KERNEL_NAME_MAP[re],ne=(U!==KERNEL_NAME.ORIGIN?U+"\u5185\u6838":"")+"\u65E0\u6CD5\u64AD\u653E"+re+"\u683C\u5F0F"+(ie?"\uFF0C\u9700\u8981\u4F7F\u7528"+ie+"\u5185\u6838":"");return{code:ERROR_CODE.MISSING_KERNEL,message:ne,fatal:!0}}}};if(G instanceof Array){for(var W=0,z=G.length;W<z;W++){var J=X(G[W],Y);if(J)return J}return}return X(G,Y)}function getUrlConfigVideoType(G){var U,L=(G||{}).url;if(!L||L.startsWith("blob:"))return"";var Y=urlTool.getFileExtension(L),X=(U=fileExtension2VideoType(Y))===null||U===void 0?void 0:U.toLocaleLowerCase();return X}var __assign$4=globalThis&&globalThis.__assign||function(){return __assign$4=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$4.apply(this,arguments)},GUID_LEN=8,VideoInfo=function(){function G(U,L){this.playtime=0,this.duration=0,this.performance={},this.startTime=0,this.state=VIDEO_STATE.IDLE,this.fileSize=0,this.videoWidth=0,this.videoHeight=0,this.hasFirstPlaying=!1,this.startPts=0,this.discontinuityTimeRanges=[],this.videoFrameRate=0,this._logger=new Logger(L.instanceId,"VideoInfo"),this._extraVars={},this._qualityInfo={},this._uid=comTool.createGUID(GUID_LEN),this._config=U,this._playerConfig=L,this.codecs=this._config.codec?__assign$4({},this._config.codec):{video:"",audio:""},this.reset(),this._logger.log("new VideoInfo(), uid: "+this.uid)}return G.prototype.toJSON=function(){return this.serializedString()},G.prototype.toString=function(){return this.serializedString()},Object.defineProperty(G.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"qualityInfo",{get:function(){return this._qualityInfo},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"uid",{get:function(){return this._uid},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"loadingUrl",{get:function(){return this._loadingUrl},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"extraVars",{get:function(){return this._extraVars},enumerable:!1,configurable:!0}),G.prototype.reset=function(){this._nextBackUrlIdx=0,this._retryCount=0,this.performance={},this._loadingUrl=this._config.url},G.prototype.setLoadingUrlStartTime=function(U){this._loadingUrl&&U>0&&(this._loadingUrl=this._loadingUrl.split("#t=")[0]+"#t="+U)},G.prototype.setDependVideoInfo=function(U){return this.startTime=U?U.startTime+U.duration:0,this._logger.log("setDependVideoInfo succ, uid/starttime: "+this.uid+"/"+this.startTime),!0},G.prototype.setNextBackUrl=function(){return!this._config.url||this._retryCount>=this._playerConfig.backupUrlsMaxRetryCount?!1:(this._retryCount++,this._config.backupUrls&&this._config.backupUrls.length>0?this._nextBackUrlIdx>=this._config.backupUrls.length?(this._loadingUrl=this._config.url,this._nextBackUrlIdx=0):(this._loadingUrl=this._config.backupUrls[this._nextBackUrlIdx],this._nextBackUrlIdx++):this._loadingUrl=this._config.url,!0)},G.prototype.getRetryCount=function(){return this._retryCount},G.prototype.destroy=function(){this.extraVars.stream=null},G.prototype.serializedString=function(){var U,L;return"VideoInfo{u:"+this._loadingUrl+",t:"+this.playtime+",s:"+this.state+",ec:"+(((U=this.error)===null||U===void 0?void 0:U.code)||"")+",em:"+(((L=this.error)===null||L===void 0?void 0:L.message)||"")+",r:"+this._nextBackUrlIdx+"}"},G}(),__extends$4=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$3.apply(this,arguments)},__decorate$2=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$2=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},__awaiter$1=globalThis&&globalThis.__awaiter||function(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})},__generator$1=globalThis&&globalThis.__generator||function(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}},__spreadArray=globalThis&&globalThis.__spreadArray||function(G,U,L){if(L||arguments.length===2)for(var Y=0,X=U.length,W;Y<X;Y++)(W||!(Y in U))&&(W||(W=Array.prototype.slice.call(U,0,Y)),W[Y]=U[Y]);return G.concat(W||Array.prototype.slice.call(U))},IGNORE_EVT_TYPE=[VIDEO_NODE_EVENT.TIME_UPDATE,VIDEO_NODE_EVENT.VIDEO_BUFFER_CHANGE,VIDEO_NODE_EVENT.VIDEO_FRAME_RENDER],IGNORE_VIDEO_EVT=[VIDEO_EVTS.timeupdate,VIDEO_EVTS.progress,VIDEO_EVTS.frameRender],logMethodCall$3=logMethodCallDecoratorCreator("BasePlayer"),BasePlayer=function(G){__extends$4(U,G);function U(L){var Y,X,W=G.call(this)||this;return W._firstPlaying=!1,W._hasUserGestures=!1,W._volume=1,W._playbackRate=1,W._playBlocking=!1,W._logger=new Logger(L.instanceId,"BasePlayer"),W._config=L,W._videoInfos=[],W._curUrlIdx=-1,W._curVideoNode=null,W._preloaders=[],W._vnList=[],W._eventMap={videonode:W.videonodeEventHandler.bind(W),document:W.visibilityChangeHandler.bind(W)},W._played=!1,W.videoEvt2PlayerEvtMap=(Y={},Y[VIDEO_NODE_EVENT.DURATION_CHANGE]=PLAY_EVENT.DURATION_CHANGE,Y[VIDEO_NODE_EVENT.VOLUME_CHANGE]=PLAY_EVENT.VOLUME_CHANGE,Y[VIDEO_NODE_EVENT.ERROR]=PLAY_EVENT.ERROR,Y[VIDEO_NODE_EVENT.METADATA_CHANGE]=PLAY_EVENT.METADATA_CHANGE,Y[VIDEO_NODE_EVENT.SETLEVEL_OVER]=PLAY_EVENT.SETLEVEL_OVER,Y[VIDEO_NODE_EVENT.SETLEVEL_START]=PLAY_EVENT.SETLEVEL_START,Y[VIDEO_NODE_EVENT.SET_LOADING]=PLAY_EVENT.SET_LOADING,Y[VIDEO_NODE_EVENT.STATE_CHANGE]=PLAY_EVENT.STATE_CHANGE,Y[VIDEO_NODE_EVENT.TIME_UPDATE]=PLAY_EVENT.TIME_UPDATE,Y[VIDEO_NODE_EVENT.VIDEO_BUFFER_CHANGE]=PLAY_EVENT.VIDEO_BUFFER_CHANGE,Y[VIDEO_NODE_EVENT.LOAD_PROGRESS]=PLAY_EVENT.LOAD_PROGRESS,Y[VIDEO_NODE_EVENT.FIRST_PLAYING]=PLAY_EVENT.VIDEONODE_FIRST_PLAYING,Y[VIDEO_NODE_EVENT.RATE_CHANGE]=PLAY_EVENT.RATE_CHANGE,Y[VIDEO_NODE_EVENT.RETRY]=PLAY_EVENT.RETRY_BACKURL,Y[VIDEO_NODE_EVENT.ELEMENT_EVTS]=PLAY_EVENT.ELEMENT_EVTS,Y[VIDEO_NODE_EVENT.PLAY_OVER]=PLAY_EVENT.STOPED,Y[VIDEO_NODE_EVENT.VIDEO_RESIZE]=PLAY_EVENT.VIDEO_RESIZE,Y[VIDEO_NODE_EVENT.VIDEO_FRAME_RENDER]=PLAY_EVENT.VIDEO_FRAME_RENDER,Y),W.videoEvtHandlerMap=(X={},X[VIDEO_NODE_EVENT.STATE_CHANGE]=W.onVideoNodeStateChange.bind(W),X[VIDEO_NODE_EVENT.PLAY_PROMISE_CATCHED]=W.onVideoNodePlayPromiseCatched.bind(W),X[VIDEO_NODE_EVENT.FIRST_PLAYING]=W.onVideoNodeFirstPlaying.bind(W),X[VIDEO_NODE_EVENT.PLAY_OVER]=W.onVideoNodePlayOver.bind(W),X[VIDEO_NODE_EVENT.ERROR]=W.onVideoNodeError.bind(W),X),document.addEventListener("visibilitychange",W._eventMap.document),W._config.createVideoNodeWhenLoad||W.createVideoNodes(W._config.maxVideoNodeCount),W}return U.prototype.decideSetLevelMode=function(){return this._vnList.length<2?SET_LEVEL_MODE.HARD:SET_LEVEL_MODE.SOFT},U.prototype.createVideoNode=function(L){return new OrgVideoNode(L)},U.prototype.createVideoNodes=function(L){for(var Y=0;Y<L;Y++){var X=this.createVideoNode(this._config);X.idx=Y,X.volume=this._volume,X.playbackRate=this._playbackRate,X.videoElement instanceof HTMLElement&&(X.videoElement.dataset.idx=""+Y),this._vnList.push(X)}},U.prototype.createStream=function(L){return null},U.prototype.setPlayEvents=function(L,Y){var X=this;!L||(Y&&this.setPlayEvents(L,!1),this._logger.log("set VideoNode evts, idx="+L.idx+"/value="+Y),Object.keys(VIDEO_NODE_EVENT).forEach(function(W){var z=Y?L.on:L.off;z.apply(L,[VIDEO_NODE_EVENT[W],X._eventMap.videonode])}))},U.prototype.videonodeEventHandler=function(L){this.logVideoNodeEvts(L);var Y=!0;this.videoEvtHandlerMap[L.type]&&(Y=this.videoEvtHandlerMap[L.type](L)),Y&&L.type in this.videoEvt2PlayerEvtMap&&this.emit(this.videoEvt2PlayerEvtMap[L.type],L.data)},U.prototype.onVideoNodeStateChange=function(L){return L.data.new===VIDEO_STATE.PAUSE&&L.data.pauseType===PAUSE_TYPE.INNER?(this._logger.log("inner pause does not emit event."),!1):(L.data.new===VIDEO_STATE.PLAYING&&(this._checkPlayBlocked=!1),this.setKeepScreenAlive(L.data.new===VIDEO_STATE.PLAYING),!0)},U.prototype.onVideoNodePlayPromiseCatched=function(L){return this._checkPlayBlocked&&L.data.isAutoPlayBlocked&&(this._checkPlayBlocked=!1,this.playBlocked()),!0},U.prototype.onVideoNodeFirstPlaying=function(L){return this._firstPlaying||(this.emit(PLAY_EVENT.FIRST_PLAYING,{videoInfo:this.currentVideoInfo}),this._firstPlaying=!0,this._hasUserGestures=!0),!0},U.prototype.onVideoNodePlayOver=function(L){if(!this._config.isPlayList&&!this.nextVideoInfo){var Y=this.currentVideoInfo;this.stopInner(END_STATE.NORMAL,!0,Y),this.emit(PLAY_EVENT.VIDEONODE_PLAY_OVER,{videoInfo:Y})}else this.emit(PLAY_EVENT.VIDEONODE_PLAY_OVER,{videoInfo:this.currentVideoInfo}),this.checkPlayNext();return!1},U.prototype.onVideoNodeError=function(L){var Y=(L.data||{}).videoInfo;return this.detectSourceOnError(Y),this.stopInner(END_STATE.ERROR,!0,Y),!1},U.prototype.logVideoNodeEvts=function(L){var Y,X;if(!IGNORE_EVT_TYPE.includes(L.type)&&!(L.type===VIDEO_NODE_EVENT.ELEMENT_EVTS&&IGNORE_VIDEO_EVT.includes(L.data.elementEvtType))){var W=L.data;L.type===VIDEO_NODE_EVENT.STATE_CHANGE?W="["+L.data.old+"->"+L.data.new+"]":L.type===VIDEO_NODE_EVENT.ELEMENT_EVTS&&(W="[elementEvtType="+L.data.elementEvtType+"]"),this._logger.log("get VideoNode evt, type="+L.type+"/uid="+((X=(Y=this._curVideoNode)===null||Y===void 0?void 0:Y.currentVideoInfo)===null||X===void 0?void 0:X.uid)+"/data=",W)}},U.prototype.playBlocked=function(){var L=this;this._playBlocking=!0,this._triggerAutoplayPromise=null,setTimeout(function(){L.emit(PLAY_EVENT.AUTOPLAY_BLOCKED,{videoInfo:L.currentVideoInfo})},0),this.setLoading(!1)},U.prototype.setLoading=function(L){this.emit(PLAY_EVENT.SET_LOADING,{show:L})},U.prototype.setKeepScreenAlive=function(L){var Y=this,X=window.navigator.wakeLock;if(!!X)if(L){if(this.screenWakeLock)return;X.request("screen").then(function(W){Y.screenWakeLock=W}).catch(function(){})}else{if(!this.screenWakeLock)return;this.screenWakeLock.release(),this.screenWakeLock=null}},U.prototype.visibilityChangeHandler=function(){this.setKeepScreenAlive(this.state===VIDEO_STATE.PLAYING)},U.prototype.captureVideo=function(L,Y,X,W,z){var J,Z=this.currentVideoElement;if(!!Z){if(Z instanceof HTMLVideoElement)try{var ee=videoTool.captureVideo(Z,{dx:L,dy:Y,dw:X,dh:W});return Promise.resolve(ee)}catch(te){return Promise.reject(te)}return(J=Z.captureVideo)===null||J===void 0?void 0:J.call(Z,L,Y,X,W)}},U.prototype.triggerAutoplay=function(){var L=this;if(this._triggerAutoplayPromise)return this._triggerAutoplayPromise;this._logger.log("triggerAutoplay(), start");for(var Y=[],X=this._vnList.length,W=0;W<X;W++){var z=this._vnList[W].triggerAutoplay();Y.push(z)}return this._triggerAutoplayPromise=Promise.all(Y),this._triggerAutoplayPromise.catch(function(J){L._logger.log("play() triggerAutoplay catched: ",J),L.playBlocked()}),this._triggerAutoplayPromise},Object.defineProperty(U.prototype,"useWorker",{get:function(){return this._curVideoNode?this._curVideoNode.useWorker:!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoElements",{get:function(){var L;return(L=this._vnList)===null||L===void 0?void 0:L.map(function(Y){return Y.videoElement})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoElement",{get:function(){return this._curVideoNode?this._curVideoNode.videoElement:null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoInfos",{get:function(){return this._videoInfos},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"preloadVideoInfos",{get:function(){return this._preloaders.map(function(L){return L.videoInfo})},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoSize",{get:function(){return this._curVideoNode?this._curVideoNode.videoSize:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"videoBuffered",{get:function(){return this._curVideoNode?this._curVideoNode.videoBuffered:[{start:0,end:0}]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfo",{get:function(){return this._curVideoNode?this._curVideoNode.currentVideoInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nextVideoInfo",{get:function(){return this._videoInfos[this._curUrlIdx+1]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentVideoInfoIdx",{get:function(){return this._curVideoNode?this._videoInfos.indexOf(this._curVideoNode.currentVideoInfo):-1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"totalVideoInfoCount",{get:function(){return this._videoInfos.length},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),U.prototype.resizeVideoElements=function(L){var Y=this.videoElements;!L||!Y||Y.length<=0||(Y.forEach(function(X){videoTool.resizeElement(X,L)}),this.emit(PLAY_EVENT.RESIZE,L))},U.prototype.resize=function(L){this.resizeVideoElements(L)},U.prototype.hasAppended=function(L){return!!this._videoInfos.find(function(Y){return compareUrlConfig(Y.config,L)})},U.prototype.hasPreloaded=function(L){return!!this.preloadVideoInfos.find(function(Y){return compareUrlConfig(Y.config,L)})},U.prototype.seek=function(L){var Y;return this.state===VIDEO_STATE.IDLE||L<0||!(!((Y=this._curVideoNode)===null||Y===void 0)&&Y.currentVideoInfo)?!1:this._curVideoNode.seek(L,!0)},U.prototype.pause=function(L){if(!this._played){this._logger.warn("pause(), player has not been played");return}this.pauseInner(L||PAUSE_TYPE.USER)},U.prototype.pauseInner=function(L){L===void 0&&(L=PAUSE_TYPE.INNER),this.state!==VIDEO_STATE.PAUSE&&this._curVideoNode&&this._curVideoNode.pauseInner(L)},Object.defineProperty(U.prototype,"played",{get:function(){return this._played},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){return this._curVideoNode?this._curVideoNode.duration:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playtime",{get:function(){return this._curVideoNode?this._curVideoNode.playtime:0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"state",{get:function(){return this._curVideoNode?this._curVideoNode.state:VIDEO_STATE.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(L){this._playbackRate=L;for(var Y=this._vnList.length,X=0;X<Y;X++)this._vnList[X].playbackRate=L},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._volume},set:function(L){this._volume=L;for(var Y=this._vnList.length,X=0;X<Y;X++)this._vnList[X].volume=L},enumerable:!1,configurable:!0}),U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this._logger)===null||L===void 0||L.log.apply(L,Y)},U.prototype.resumeInner=function(){var L;!this._played||((L=this._curVideoNode)===null||L===void 0?void 0:L.currentVideoInfo)&&(this._curVideoNode.duration===0||this._curVideoNode.playtime<this._curVideoNode.duration)&&this._curVideoNode.videoplay()},U.prototype.appendNext=function(L){if(!this._config.isPlayList){this._logger.warn("appendNext() only supported when [isPlayList] is true");return}if(!this._played){this._logger.warn("appendNext(), player has not been played");return}var Y=checkUrlConfigVailed(L,this.kernelName);if(Y){this._logger.warn("appendNext(), urlconfig err=",Y);return}var X=this._videoInfos.find(function(z){return compareUrlConfig(z.config,L)});if(X)return this._logger.warn("appendNext(), duplicate append! uid["+X.uid+"]"),!1;var W=this.preloadVideoInfos.find(function(z){return compareUrlConfig(z.config,L)});return W||(W=new VideoInfo(L,this._config)),this.clearAllPreloadInner(W),this._videoInfos=this._videoInfos.slice(0,this._curUrlIdx+1),this._videoInfos=this._videoInfos.concat(W),this._logger.log("appendNext() succ, appendVideoInfo=",W),this.emit(PLAY_EVENT.LIST_CHANGE),this.appendAfter(W),!0},U.prototype.preloadNext=function(){for(var L=this,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];if(!this._config.isPlayList){this._logger.warn("preloadNext() only supported when [isPlayList] is true");return}if(!this.supportPreload){this._logger.warn("preloadNext() fail, browser not support preload.");return}if(!this._played){this._logger.warn("preloadNext() fail, player has not been played.");return}var W=checkUrlConfigVailed(Y,this.kernelName);if(!W){var z=[];Y.forEach(function(J){var Z=L._videoInfos.findIndex(function(te){return compareUrlConfig(te.config,J)});if(Z!==-1&&Z<=L._curUrlIdx){L._logger.warn("preloadInner() fail, because this videoInfo has been played.");return}if(Z!==-1&&Z>=L._curUrlIdx+1+1){L._logger.warn("preloadInner() fail, can not skip next to preload.");return}if(L.nextVideoInfo&&!compareUrlConfig(L.nextVideoInfo.config,J)){L._logger.warn("preloadInner() fail, the next has been appended, you only can preload next.");return}var ee=L.preloadVideoInfos.findIndex(function(te){return compareUrlConfig(te.config,J)})!==-1;if(ee){L._logger.warn("preloadInner() fail, the VideoInfo has been preloaded.");return}L.nextVideoInfo&&compareUrlConfig(J,L.nextVideoInfo.config)?z.push(L.nextVideoInfo):z.push(new VideoInfo(J,L._config))}),this.preloadInner.apply(this,__spreadArray([!1,{startTime:0,kernelName:this.kernelName}],z,!1))}},U.prototype.preloadInner=function(L,Y){for(var X=[],W=2;W<arguments.length;W++)X[W-2]=arguments[W];var z=[],J=X.length;if(!(J<=0)){for(var Z=0;Z<J;Z++)if(!!X[Z]){this.clearPreloader(X[Z]);var ee=this.preparePreloader(L,X[Z]);ee&&(X[Z].setDependVideoInfo(this.currentVideoInfo),ee.load(L,this,X[Z],Y),z.push(ee))}this._preloaders=this._preloaders.concat(z),this._logger.log("preload(), preloader's length: ",this._preloaders.length),z.length>0&&this.emit(PLAY_EVENT.PRELOAD_START,{preloadVideoInfos:z.map(function(te){return te.videoInfo})})}},U.prototype.checkPlayNext=function(){var L;!this._played||(this._logger.log("checkPlayNext(), curUrlIdx="+this._curUrlIdx+"/urlLength="+this._videoInfos.length+"/"+("nextStartTime: "+((L=this.nextVideoInfo)===null||L===void 0?void 0:L.playtime))),this.nextVideoInfo?this.playNextInner():this._logger.log("playlist over>>>, total len: ",this._videoInfos.length))},U.prototype.playNext=function(L){if(!this._played){this._logger.warn("playNext(), player has not been played");return}this.playNextInner({isInterrupt:!0})},U.prototype.playNextInner=function(L){var Y=(L||{}).isInterrupt;this._logger.log("playNextInner(), curUrlIdx="+this._curUrlIdx+"/"+("urlLength="+this._videoInfos.length+"/isInterrupt="+Y));var X=Math.abs(this.playtime-this.duration)<=this._config.interruptPlayNextMinTime;if(Y&&X&&this.state===VIDEO_STATE.PLAYING){this._logger.log("playNextInner(), playNext right now! return!");return}if(this._curUrlIdx+1>=this._videoInfos.length){this._logger.warn("There is no next VideoInfo.");return}this._curUrlIdx+=1,this.setPlayEvents(this._curVideoNode,!1),Y&&this._curVideoNode.pauseInner();var W=this._videoInfos[this._curUrlIdx];this.clearAllPreloadInner(W),Y&&this.emit(PLAY_EVENT.VIDEONODE_PLAY_OVER,{videoInfo:this.currentVideoInfo}),this.playInner()},U.prototype.play=function(L,Y){return __awaiter$1(this,void 0,void 0,function(){var X,W,z=this;return __generator$1(this,function(J){return this.state===VIDEO_STATE.IDLE&&!L?(this._logger.warn("play(), no urlConfig when idle state"),[2]):(X=function(){if(!z._played&&z._curUrlIdx===-1){var Z=z._videoInfos[0],ee=!z.supportPreload||z.findPreloadIdxByVideoInfo(Z)!==1;Z&&ee&&(z._played=!0,z._curUrlIdx=0,z.playInner())}},W=function(){if(z._logger.log("triggerAutoplay(), over"),!L)z._played?z._playBlocking||videoTool.cannotDetectAutoPlayBlock()?(z._playBlocking=!1,setTimeout(function(){var ee,te;((te=(ee=z._curVideoNode)===null||ee===void 0?void 0:ee.videoBuffered)===null||te===void 0?void 0:te.length)<=0&&z.setLoading(!0),z.resumeInner()},0)):[VIDEO_STATE.PAUSE,VIDEO_STATE.CANPLAY,VIDEO_STATE.SEEKED].indexOf(z.state)!==-1?z.resumeInner():z._logger.log("play() has been called, but cannot do nothing."):(z.setLoading(!0),X());else{var Z=z.loadInner(L,Y);Z&&(z.setLoading(!0),X())}},this._checkPlayBlocked=!0,this._vnList.length<=1||this._hasUserGestures?(this._logger.log("play(), skip triggerAutoplay()."),W()):this.triggerAutoplay().then(W).catch(function(){z._config.type===PLAY_MODE.VOD&&L&&z.loadInner(L,Y)}),[2])})})},U.prototype.load=function(L,Y){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(X){return!L||L instanceof Array&&L.length<=0?(this.clearBeforeLoad(),[2]):(this.loadInner(L,Y),[2])})})},U.prototype.loadInner=function(L,Y){var X=this;this.clearBeforeLoad();var W=checkUrlConfigVailed(L,this.kernelName);if(W)return this.emit(PLAY_EVENT.ERROR,{videoInfo:{error:W}}),!1;this._config.createVideoNodeWhenLoad&&(this._vnList.forEach(function(ee){return ee.destroy()}),this._vnList.length=0,this.createVideoNodes(this._config.maxVideoNodeCount)),this.emit(PLAY_EVENT.RESTART);var z=(Y||{}).startTime,J=z===void 0?0:z;this._firstPlayTimeArg=Math.max(0,J),this._videoInfos=[].concat(L).map(function(ee){return new VideoInfo(ee,X._config)}),this.emit(PLAY_EVENT.LIST_CHANGE);var Z=this._videoInfos[0];return this.preloadInner(!0,__assign$3(__assign$3({},Y),{startTime:J,kernelName:this.kernelName}),Z),!0},U.prototype.clearBeforeLoad=function(){var L;(L=this._vnList)===null||L===void 0||L.forEach(function(Y){videoTool.clear(Y.videoElement)}),this.stopInner(this._played?END_STATE.INTERRUPT:END_STATE.NORMAL,this._played,this._played?this.currentVideoInfo:null)},U.prototype.checkAutoPreloadNext=function(L){var Y=this.currentVideoInfo.config.autoPreloadLeftTime;Y<=0||(Y>=this.currentVideoInfo.duration&&this.currentVideoInfo.playtime>0||Y>=L)&&this.nextVideoInfo&&this.preloadVideoInfos.indexOf(this.nextVideoInfo)===-1&&this.preloadInner(!1,{startTime:0,kernelName:this.kernelName},this.nextVideoInfo)},U.prototype.clearAllPreload=function(){this.clearAllPreloadInner()},U.prototype.clearAllPreloadInner=function(L){var Y=this;if(!(!this._preloaders||this._preloaders.length<=0)){var X=this._preloaders.filter(function(W){return W.videoInfo!==L});X.forEach(function(W){Y.clearPreloader(W.videoInfo)})}},U.prototype.findPreloadIdxByVideoInfo=function(L){return L?this._preloaders.findIndex(function(Y){return Y.videoInfo===L}):-1},U.prototype.clearPreloader=function(L,Y){if(!(!this._preloaders||this._preloaders.length<=0)&&!!L){var X=this.findPreloadIdxByVideoInfo(L);if(X!==-1&&X!==-1){var W=this._preloaders.splice(X,1)[0];W.clear(Y)}}},U.prototype.stop=function(L){L===void 0&&(L=END_STATE.INTERRUPT),this.state!==VIDEO_STATE.IDLE&&this.stopInner(L,!0)},U.prototype.stopInner=function(L,Y,X){var W;L===void 0&&(L=END_STATE.NORMAL),Y===void 0&&(Y=!1),X===void 0&&(X=null),((W=this._config)===null||W===void 0?void 0:W.type)===PLAY_MODE.VOD&&this.clearAllPreloadInner();var z=this._videoInfos;if(this._videoInfos=[],this._vnList)for(var J=this._vnList.length,Z=0;Z<J;Z++)this._vnList[Z].stop(),this.setPlayEvents(this._vnList[Z],!1);this._curUrlIdx=-1,z&&z.forEach(function(re){re.destroy()}),this._firstPlaying=!1,this._played=!1,this._curVideoNode=null;var ee=X==null?void 0:X.error,te=ee?END_STATE.ERROR:L;this._logger.log("stopInner(), endState="+te),Y&&(this.emit(PLAY_EVENT.STOPED,{videoInfo:X,isUserStop:L===END_STATE.INTERRUPT,endState:te}),ee&&this.emit(PLAY_EVENT.ERROR,{videoInfo:X}))},U.prototype.checkSetLevelError=function(L){return this._played?L?this.currentVideoInfo?this.currentVideoInfo.playtime<=0?"\u64AD\u653E\u672A\u5F00\u59CB":this._config.type===PLAY_MODE.VOD&&this.currentVideoInfo.playtime+1>=this.currentVideoInfo.duration&&this.currentVideoInfo.duration!==1/0?"\u64AD\u653E\u5373\u5C06\u7ED3\u675F":L===this.currentVideoInfo.loadingUrl?"\u5207\u6362\u7684\u89C6\u9891\u5730\u5740\u6CA1\u6709\u53D8\u5316":null:"\u627E\u4E0D\u5230\u5F53\u524D\u64AD\u653E\u4FE1\u606F":"\u5207\u6362\u7684\u89C6\u9891\u5730\u5740\u4E3A\u7A7A":"\u64AD\u653E\u672A\u5F00\u59CB"},U.prototype.setLevel=function(L,Y,X){var W;typeof L=="string"?W=L:(W=L.url,Y=L.backupUrls,X=L);var z=this.checkSetLevelError(W);return z?(this._logger.warn("setLevel(), "+z),Promise.reject(new Error(z))):(this._urlBeforeSetLevel={url:W,backupUrls:Y},this.currentVideoInfo.config.url=W,Y&&(this.currentVideoInfo.config.backupUrls=Y),X&&Object.assign(this.currentVideoInfo.config,X),this.currentVideoInfo.reset(),this.setLevelInner(this.currentVideoInfo.config))},U.prototype.setCurVideoNode=function(L,Y){Y===void 0&&(Y=!1),!(this._curVideoNode===L&&!Y)&&(this._curVideoNode&&(this._curVideoNode.onAccurateTimeupdate=null,this.setPlayEvents(this._curVideoNode,!1)),L&&(this._curVideoNode=L,this._curVideoNode.onAccurateTimeupdate=this.checkAccuratePlaytime.bind(this),this.setPlayEvents(this._curVideoNode,!0)))},U.prototype.detectSourceOnError=function(L){var Y=this,X=L||{},W=X.loadingUrl,z=X.uid;if(!W){this._logger.error("detectSourceOnError, url=null");return}detectStream(W).then(function(J){Y._logger.error("detectSourceOnError="+jsonTool.safelyStringify(__assign$3({uid:z},J)))}).catch(function(J){Y._logger.error("detectSourceOnError err",J==null?void 0:J.message)})},U.prototype.destroy=function(){if(this.stopInner(),this._vnList)for(var L=this._vnList.length,Y=0;Y<L;Y++)this._vnList[Y].destroy();this._preloaders&&(this._preloaders.forEach(function(X){X.clear()}),this._preloaders=null),document.removeEventListener("visibilitychange",this._eventMap.document),this.removeAllListeners(),this.setKeepScreenAlive(!1),this._videoInfos=null,this._curVideoNode=null,this._vnList=null,this._eventMap=null},__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[]),__metadata$2("design:returntype",void 0)],U.prototype,"playBlocked",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object]),__metadata$2("design:returntype",void 0)],U.prototype,"resizeVideoElements",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Number]),__metadata$2("design:returntype",void 0)],U.prototype,"seek",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[]),__metadata$2("design:returntype",void 0)],U.prototype,"resumeInner",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object]),__metadata$2("design:returntype",void 0)],U.prototype,"appendNext",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object]),__metadata$2("design:returntype",void 0)],U.prototype,"preloadNext",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Boolean,Object,Object]),__metadata$2("design:returntype",void 0)],U.prototype,"preloadInner",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[]),__metadata$2("design:returntype",void 0)],U.prototype,"checkPlayNext",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object]),__metadata$2("design:returntype",void 0)],U.prototype,"playNext",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object]),__metadata$2("design:returntype",void 0)],U.prototype,"playNextInner",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object,Object]),__metadata$2("design:returntype",Promise)],U.prototype,"play",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object,Object]),__metadata$2("design:returntype",Promise)],U.prototype,"load",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[String]),__metadata$2("design:returntype",void 0)],U.prototype,"stop",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[String,Object,Object]),__metadata$2("design:returntype",void 0)],U.prototype,"stopInner",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[Object,Array,Object]),__metadata$2("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$2([logMethodCall$3,__metadata$2("design:type",Function),__metadata$2("design:paramtypes",[]),__metadata$2("design:returntype",void 0)],U.prototype,"destroy",null),U}(s$3),__assign$2=globalThis&&globalThis.__assign||function(){return __assign$2=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++){U=arguments[L];for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X])}return G},__assign$2.apply(this,arguments)},defaultOriginKernelConfig={maxVideoNodeCount:1,advanceEndTime:uaTool.browser.x5?.1:0,prePlayNextTime:uaTool.browser.x5?.2:0};function mergeKernelConfig(G){return __assign$2(__assign$2({},G),{originKernelConfig:__assign$2(__assign$2({},defaultOriginKernelConfig),G.originKernelConfig)})}var __decorate$1=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata$1=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$2=logMethodCallDecoratorCreator("OrgPreLoader"),OrgPreLoader=function(){function G(U){var L;this.playerConfig=U,this._defer=new SimpleDefer,this._logger=new Logger(U.instanceId,"OrgPreLoader"),this._evtMaps=(L={},L[VIDEO_NODE_EVENT.STATE_CHANGE]=this.firstLoadStateChangeHandler.bind(this),L[VIDEO_NODE_EVENT.ERROR]=this.errorHandler.bind(this),L)}return Object.defineProperty(G.prototype,"promise",{get:function(){return this._defer.promise},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"videoInfo",{get:function(){return this._videoInfo},enumerable:!1,configurable:!0}),G.prototype.getVideoNode=function(){var U;return(U=this._videoInfo)===null||U===void 0?void 0:U.extraVars.preloadVideoNode},G.prototype.errorHandler=function(U){this.preloadFail(U.data.videoInfo.error)},G.prototype.firstLoadStateChangeHandler=function(U){U.data.new===VIDEO_STATE.CANPLAY&&this.preloadSucc()},G.prototype.preloadSucc=function(){this._logger.log("preload url ready>>>>>> uid="+this._videoInfo.uid),this.clearInner(!0),this._evtDispatcher.emit(PLAY_EVENT.PRELOAD_VIDEONODE_OVER,{videoInfo:this._videoInfo}),this._defer.resolve()},G.prototype.preloadFail=function(U){this._logger.log("preload url fail>>>>>> uid: "+this._videoInfo.uid),this.clearInner(),this._evtDispatcher.emit(PLAY_EVENT.PRELOAD_VIDEONODE_ERROR,{videoInfo:this._videoInfo}),this._videoInfo.error=U,this._defer.reject(U)},G.prototype.setVideoNodeEvents=function(U){var L=this,Y=this.getVideoNode();Object.keys(this._evtMaps).forEach(function(X){U?Y.on(X,L._evtMaps[X]):Y.off(X,L._evtMaps[X])})},G.prototype.load=function(U,L,Y,X){this._videoInfo=Y,this._evtDispatcher=L,this.setVideoNodeEvents(!0),this._logger.log("load(), isFirstLoad="+U),this.getVideoNode().load(Y,X)},G.prototype.clearInner=function(U,L){if(!!this._videoInfo){var Y=this.getVideoNode();!Y||(this._logger.log("clear(), uid="+this._videoInfo.uid+"/keep="+U),this.setVideoNodeEvents(!1),U||(this._videoInfo.extraVars.preloadVideoNode=null,Y.stop()),L&&this._evtDispatcher.emit(PLAY_EVENT.PRELOAD_VIDEONODE_CLEAR,{videoInfo:this._videoInfo}))}},G.prototype.clear=function(U){this.clearInner(U,!0)},__decorate$1([logMethodCall$2,__metadata$1("design:type",Function),__metadata$1("design:paramtypes",[Boolean,s$3,Object,Object]),__metadata$1("design:returntype",void 0)],G.prototype,"load",null),__decorate$1([logMethodCall$2,__metadata$1("design:type",Function),__metadata$1("design:paramtypes",[Boolean]),__metadata$1("design:returntype",void 0)],G.prototype,"clear",null),G}(),__extends$3=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),__decorate=globalThis&&globalThis.__decorate||function(G,U,L,Y){var X=arguments.length,W=X<3?U:Y===null?Y=Object.getOwnPropertyDescriptor(U,L):Y,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(G,U,L,Y);else for(var J=G.length-1;J>=0;J--)(z=G[J])&&(W=(X<3?z(W):X>3?z(U,L,W):z(U,L))||W);return X>3&&W&&Object.defineProperty(U,L,W),W},__metadata=globalThis&&globalThis.__metadata||function(G,U){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,U)},logMethodCall$1=logMethodCallDecoratorCreator("MultiPlayer"),MultiPlayer=function(G){__extends$3(U,G);function U(L){var Y,X=G.call(this,mergeKernelConfig(L))||this;return X._needHideVideoNode=null,X._videonodeEventMap=(Y={},Y[VIDEO_NODE_EVENT.STATE_CHANGE]=X.onCurVideoNodeStateChange.bind(X),Y),X}return Object.defineProperty(U,"canPlayType",{get:function(){return videoTool.supportVideoFormat()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPreload",{get:function(){return videoTool.supportSameTimePlay()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"kernelName",{get:function(){return KERNEL_NAME.ORIGIN},enumerable:!1,configurable:!0}),U.prototype.seek=function(L){return this.getLevelSwitching()?!1:G.prototype.seek.call(this,L)},U.prototype.createVideoNodes=function(L){G.prototype.createVideoNodes.call(this,L);for(var Y=0;Y<this._vnList.length;Y++){var X=this._vnList[Y];Y===0?this._firstVideoNode=X:this.visibleVideoNode(X,!1)}},U.prototype.videonodeEventHandler=function(L){this._videonodeEventMap[L.type]&&this._videonodeEventMap[L.type](L),G.prototype.videonodeEventHandler.call(this,L)},U.prototype.onCurVideoNodeStateChange=function(L){if(L.data.new===VIDEO_STATE.PLAYING&&(this.switchVideoNode(),!this.currentVideoInfo.extraVars.isStartPlay)){this.currentVideoInfo.extraVars.isStartPlay=!0;var Y=this.currentVideoInfo?this.currentVideoInfo.uid:null;this._logger.log("videoNodeStartPlay: uid["+Y+"]"),this.emit(PLAY_EVENT.VIDEONODE_START_PLAY,{videoInfo:this.currentVideoInfo})}},U.prototype.onVideoNodeStateChange=function(L){return this.getLevelSwitching()&&!VALID_STATE_IN_LEVEL_SWITCHING.includes(L.data.new)?!1:G.prototype.onVideoNodeStateChange.call(this,L)},U.prototype.pauseInner=function(L){if(L===void 0&&(L=PAUSE_TYPE.INNER),this._prePlayNext){this._logger.warn("pause when preplaynext, return!!");return}G.prototype.pauseInner.call(this,L)},U.prototype.resumeInner=function(){if(this.getLevelSwitching()){this._setLevelVideoNode.play();return}G.prototype.resumeInner.call(this)},U.prototype.loadInner=function(L,Y){for(var X,W=((X=this._vnList)===null||X===void 0?void 0:X.length)||0,z=0;z<W;z++)this.visibleVideoNode(this._vnList[z],!1);return G.prototype.loadInner.call(this,L,Y)},U.prototype.playInner=function(L){var Y=this;if(this.getLevelSwitching()){this._setLevelVideoNode.play(),this._logger.log("play(), setlevel");return}if(this._videoInfos.length<=0||!this._videoInfos[this._curUrlIdx]){this._logger.warn("play(), !videoInfo");return}var X=this._videoInfos[this._curUrlIdx],W=this._curVideoNode?this._curVideoNode.state:VIDEO_STATE.IDLE,z=this.findPreloadIdxByVideoInfo(X),J=function(te){var re,ie,ne;Y._logger.log("playInner(), playImpl(), preloadSucc="+te);var oe=z!==-1?(ie=(re=Y._preloaders[z])===null||re===void 0?void 0:re.videoInfo)===null||ie===void 0?void 0:ie.extraVars.preloadVideoNode:null,se,ae=!1;if(se=oe,se||(se=Y.getIdleVideoNode()),!se&&Y._curVideoNode&&Y._curVideoNode.state===VIDEO_STATE.IDLE&&(se=Y._curVideoNode,ae=!0),se||Y._logger.warn("can not find idle videonode!"),Y.setCurVideoNode(se,ae),z!==-1){var le=Y._preloaders.splice(z,1)[0];le.clear(!0)}Y._needHideVideoNode?Y._needHideVideoNode===Y._curVideoNode?(Y.visibleVideoNode(Y._curVideoNode,!0),Y._logger.log("visibleVideoNode, need==current")):te&&Y.switchVideoNode():(Y.visibleVideoNode(Y._curVideoNode,!0),Y._logger.log("visibleVideoNode, null need")),Y._curVideoNode.state!==VIDEO_STATE.PLAYING&&Y._curVideoNode.play(X,{startTime:L}),Y.emit(PLAY_EVENT.VIDEONODE_CHANGE,{videoInfo:Y.currentVideoInfo}),te&&(Y._videoInfos.indexOf(Y.currentVideoInfo)!==0&&(Y.emit(PLAY_EVENT.DURATION_CHANGE,{videoInfo:Y.currentVideoInfo}),Y.emit(PLAY_EVENT.STATE_CHANGE,{videoInfo:Y.currentVideoInfo,new:Y._curVideoNode.state,old:W})),Y.currentVideoInfo.extraVars.isStartPlay||(Y.currentVideoInfo.extraVars.isStartPlay=!0,Y._logger.log("videoNodeStartPlay: uid["+Y.currentVideoInfo.uid+"]"),Y.emit(PLAY_EVENT.VIDEONODE_START_PLAY,{videoInfo:Y.currentVideoInfo}))),Y._logger.log("playInner(), playImpl(), uid="+((ne=Y.currentVideoInfo)===null||ne===void 0?void 0:ne.uid)+"/"+("urlIdx="+Y._curUrlIdx+"/state="+Y._curVideoNode.state))},Z=200,ee=0;z!==-1?(X.hasFirstPlaying&&(ee=window.setTimeout(function(){Y.emit(PLAY_EVENT.STATE_CHANGE,{videoInfo:X,new:VIDEO_STATE.BUFFERING,old:W})},Z)),this._preloaders[z].promise.then(function(){clearTimeout(ee),Y._logger.log("play(), preloadVideoNode succ, uid="+X.uid),J(!0)}).catch(function(te){Y._logger.log("play(), preloadVideoNode error, uid="+X.uid+"/error=",te),te.code in ERROR_CODE&&(clearTimeout(ee),X.error=te,Y.stopInner(END_STATE.ERROR,!0,X))})):X.error?(this._logger.log("play(), got preload error"),this.stopInner(END_STATE.ERROR,!0,X)):J(!1)},U.prototype.visibleVideoNode=function(L,Y){var X;!L||!L.videoElement||(this.setVideoElementState(L.videoElement,Y),this._logger.log(">>>visibleVideoNode<<<, value="+Y+"/uid="+((X=L.currentVideoInfo)===null||X===void 0?void 0:X.uid)))},U.prototype.setVideoElementState=function(L,Y){var X=Y?this._volume:0;L.volume!==X&&(L.volume=X);var W=this._volume<=0||!Y;L.muted!==W&&(L.muted=W),domTool.css(L,"zIndex",Y?"0":"-1"),domTool.css(L,"visibility",Y?"inherit":"hidden")},U.prototype.switchVideoNode=function(){if(!(!this._needHideVideoNode||this._curVideoNode===this._needHideVideoNode)){this._logger.log(">>>>>switchVideoNode<<<<<"),this.visibleVideoNode(this._curVideoNode,!0);var L=this._needHideVideoNode;this.visibleVideoNode(L,!1),L&&L.stop(),this._needHideVideoNode=null}},U.prototype.playNextInner=function(L){this._needHideVideoNode=this._curVideoNode,this._prePlayNext=!1,G.prototype.playNextInner.call(this,L)},U.prototype.appendAfter=function(L){var Y=this._curVideoNode?this._curVideoNode.state===VIDEO_STATE.IDLE:!0;this._played&&this._curUrlIdx+1===this._videoInfos.indexOf(L)&&Y&&this.playNextInner()},U.prototype.preparePreloader=function(L,Y){this._logger.log("preparePreloader(), isFirstLoad=",L);var X=this.getIdleVideoNode();return X?(Y.extraVars.preloadVideoNode=X,L&&(this.setCurVideoNode(X),this.visibleVideoNode(X,!0)),new OrgPreLoader(this._config)):null},U.prototype.getIdleVideoNode=function(){if(this._firstVideoNode){var L=this._firstVideoNode;return this._firstVideoNode=null,L}for(var Y=null,X=this._vnList.length,W=0;W<X;W++)if(this._vnList[W].state===VIDEO_STATE.IDLE&&this._vnList[W]!==this._curVideoNode){var z=this._vnList.splice(W,1);Y=z[0];break}return Y&&this._vnList.push(Y),Y},U.prototype.getLevelSwitching=function(){return!!this._setLevelVideoNode},U.prototype.setLevelInner=function(L){var Y=this,X=this.decideSetLevelMode();if(X===SET_LEVEL_MODE.HARD)return this._curVideoNode.setLevel();var W=new SimpleDefer,z=this.currentVideoInfo;this._logger.log("setLevelInner(), uid: "+z.uid),this.pauseInner(),this.setPlayEvents(this._curVideoNode,!1),this.emit(PLAY_EVENT.SETLEVEL_START,{videoInfo:z,mode:SET_LEVEL_MODE.SMOOTH}),this.setLoading(!0);var J=this._curVideoNode.playtime,Z=this.getIdleVideoNode();Z?this.visibleVideoNode(Z,!1):(this._curVideoNode.stop(),Z=this._curVideoNode),z.extraVars.isLoadstarted=!1,this._setLevelVideoNode=Z,this._setLevelVideoNode.setLevelEvtMap={};var ee=this._curVideoNode;this.setCurVideoNode(Z,!0);var te=function(){Y._logger.log(">>>>>rollbackLevelVideoNode<<<<<"),Y._urlBeforeSetLevel&&(Object.assign(Y.currentVideoInfo.config,Y._urlBeforeSetLevel),Y.currentVideoInfo.reset(),Y._urlBeforeSetLevel=null),Y.setPlayEvents(Y._curVideoNode,!0),Y.resumeInner()};return Z.setLevelEvtMap[VIDEO_NODE_EVENT.STATE_CHANGE]=function(re){re.data.new===VIDEO_STATE.PLAYING&&(Y._logger.log("setLevel succ>>>>>> uid: "+z.uid,re),Y.clearSetLevelThings(!0),Y.switchVideoNodeWhenSetLevelSucc(ee),W.resolve(),Y.emit(PLAY_EVENT.SETLEVEL_OVER,{videoInfo:z}),Y.setLoading(!1))},Z.setLevelEvtMap[VIDEO_NODE_EVENT.ERROR]=function(re){var ie;Y._logger.log("setLevel fail>>>>>> uid: "+z.uid,re),Y.clearSetLevelThings(),te(),W.reject(new Error("setLevel failed, "+((ie=z.error)===null||ie===void 0?void 0:ie.message))),Y.emit(PLAY_EVENT.SETLEVEL_OVER,{videoInfo:z,fail:!0}),Y.setLoading(!1)},Z.on(VIDEO_NODE_EVENT.STATE_CHANGE,Z.setLevelEvtMap[VIDEO_NODE_EVENT.STATE_CHANGE]),Z.on(VIDEO_NODE_EVENT.ERROR,Z.setLevelEvtMap[VIDEO_NODE_EVENT.ERROR]),Z.play(z,{startTime:J}),W.promise},U.prototype.switchVideoNodeWhenSetLevelSucc=function(L){this._logger.log(">>>>>switchLevelVideoNode<<<<<"),L===this._curVideoNode?this.visibleVideoNode(this._curVideoNode,!0):(this.visibleVideoNode(this._curVideoNode,!0),this.visibleVideoNode(L,!1),L==null||L.stop())},U.prototype.clearSetLevelThings=function(L){if(!!this.getLevelSwitching()){var Y=this._setLevelVideoNode;Y.setLevelEvtMap&&(Object.keys(Y.setLevelEvtMap).forEach(function(X){Y.off(X,Y.setLevelEvtMap[X])}),Y.setLevelEvtMap=null),L||Y.stop(),this.clearAllPreloadInner(),this._setLevelVideoNode=null}},U.prototype.checkAccuratePlaytime=function(L,Y){var X,W,z=this._config.originKernelConfig.prePlayNextTime,J=Math.abs(Y-L);if(z>0&&J<z&&!this._prePlayNext){this._prePlayNext=!0;var Z=this.findPreloadIdxByVideoInfo(this.nextVideoInfo);if(this.nextVideoInfo&&Z!==-1){var ee=(W=(X=this._preloaders[Z])===null||X===void 0?void 0:X.videoInfo)===null||W===void 0?void 0:W.extraVars.preloadVideoNode;ee&&(this._logger.log("preplay next!! idx/state: "+ee.idx+"/"+ee.state),ee.play())}}this.checkAutoPreloadNext(J)},U.prototype.stopInner=function(L,Y,X){L===void 0&&(L=END_STATE.NORMAL),Y===void 0&&(Y=!1),X===void 0&&(X=null),this._firstVideoNode=null,this._prePlayNext=!1,this.clearSetLevelThings(!0),G.prototype.stopInner.call(this,L,Y,X)},U.prototype.destroy=function(){this._needHideVideoNode=null,this._setLevelVideoNode=null,this._firstVideoNode=null;var L=this.videoElements;G.prototype.destroy.call(this),L.forEach(function(Y){Y instanceof HTMLVideoElement&&(Y.volume=1,Y.muted=!1,domTool.css(Y,{zIndex:"0",visibility:"inherit"}),Y.dataset.idx="0")})},U.isEnvSupport=!0,__decorate([logMethodCall$1,__metadata("design:type",Function),__metadata("design:paramtypes",[Number]),__metadata("design:returntype",void 0)],U.prototype,"playInner",null),__decorate([logMethodCall$1,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],U.prototype,"switchVideoNode",null),U}(BasePlayer),__extends$2=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),BaseLivePlayer=function(G){__extends$2(U,G);function U(){return G!==null&&G.apply(this,arguments)||this}return U.prototype.playInner=function(L){var Y=this._videoInfos[0];this.setPlayEvents(this._curVideoNode,!0),this._curVideoNode.play(Y),this.emit(PLAY_EVENT.VIDEONODE_CHANGE,{videoInfo:Y})},U.prototype.resumeInner=function(){var L;!this._played||!((L=this._curVideoNode)===null||L===void 0)&&L.currentVideoInfo&&this._curVideoNode.videoplay()},U.prototype.loadInner=function(L,Y){var X=G.prototype.loadInner.call(this,L,Y);return X?(this.setCurVideoNode(this._vnList[0]),this._curVideoNode.load(this._videoInfos[0]),!0):!1},U.prototype.appendAfter=function(L){},U.prototype.checkAccuratePlaytime=function(L,Y){},U.prototype.preparePreloader=function(L,Y){return null},U.prototype.getIdleVideoNode=function(){return this._vnList[0]},U.prototype.setLevelInner=function(L){return this._curVideoNode.setLevel()},U.prototype.playBlocked=function(){G.prototype.playBlocked.call(this),this.pause()},Object.defineProperty(U.prototype,"supportPreload",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"supportPlaybackRate",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nextVideoInfo",{get:function(){return this.currentVideoInfo},enumerable:!1,configurable:!0}),U}(BasePlayer);["seek","hasAppended","hasPreloaded","playNext","appendNext","preloadNext","clearAllPreload","appendAfter","checkPlayNext","playNextInner","checkAutoPreloadNext","clearAllPreloadInner"].forEach(function(G){BaseLivePlayer.prototype[G]=function(){console.warn("[thumbplayer] "+G+"() is not support due to live stream")}});var __extends$1=globalThis&&globalThis.__extends||function(){var G=function(U,L){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,X){Y.__proto__=X}||function(Y,X){for(var W in X)Object.prototype.hasOwnProperty.call(X,W)&&(Y[W]=X[W])},G(U,L)};return function(U,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");G(U,L);function Y(){this.constructor=U}U.prototype=L===null?Object.create(L):(Y.prototype=L.prototype,new Y)}}(),LivePlayer=function(G){__extends$1(U,G);function U(L){return G.call(this,mergeKernelConfig(L))||this}return Object.defineProperty(U.prototype,"kernelName",{get:function(){return KERNEL_NAME.ORIGIN},enumerable:!1,configurable:!0}),U}(BaseLivePlayer),OrgPlayer=function(){function G(U){return U.type===PLAY_MODE.LIVE?new LivePlayer(U):new MultiPlayer(U)}return Object.defineProperty(G,"canPlayType",{get:function(){return videoTool.supportVideoFormat()},enumerable:!1,configurable:!0}),G.isEnvSupport=!0,G.VERSION=VERSION,G.BUILD_TIME=BUILD_TIME,G}(),kernelEvtBus=new s$3,ThumbPlayerCore=Object.freeze(Object.defineProperty({__proto__:null,MultiPlayer,OrgPlayer,OrgVideoNode,OrgPreloader:OrgPreLoader,originDefaultConfig:defaultOriginKernelConfig,VideoInfo,BaseVideoNode,BasePlayer,BaseLivePlayer,defaultPlayerConfig,EvtEmitter:s$3,SimpleDefer,get DrmKeySystems(){return KeySystems},KernelFactory:KernelFactory$1,get KERNEL_NAME(){return KERNEL_NAME},KernelProxy,kernelEvtBus,get SET_LEVEL_MODE(){return SET_LEVEL_MODE},get PLAY_MODE(){return PLAY_MODE},CAN_PLAY_ALL,VIDEO_CONTAINER_CLASS,get END_STATE(){return END_STATE},get VIDEO_READY_STATE(){return VIDEO_READY_STATE},get VIDEO_EVTS(){return VIDEO_EVTS},get VIDEO_STATE(){return VIDEO_STATE},get ERROR_CODE(){return ERROR_CODE},VIDEO_ELEMENT_ERROR,get ERROR_MSG(){return ERROR_MSG},get PLAY_EVENT(){return PLAY_EVENT},get VIDEO_NODE_EVENT(){return VIDEO_NODE_EVENT},get MSE_EVENTS(){return MSE_EVENTS},get PAUSE_TYPE(){return PAUSE_TYPE},get PLAYER_LOG_LEVEL(){return PLAYER_LOG_LEVEL},get PRELOAD_TYPE(){return PRELOAD_TYPE},get CODEC(){return CODEC},get VIDEO_ELEMENT_STATE(){return VIDEO_ELEMENT_STATE},CDN_PATH_PREFIX,get CACHE_SIZE_KEY(){return CACHE_SIZE_KEY},commonTool:comTool,uaTool,logTool:logtool,logMethodCallDecoratorCreator,logMethodCallDecoratorCreater:logMethodCallDecoratorCreator,Logger,enableConsoleOutput,get LogMode(){return LogMode},dumpLog,cookieTool,lsTool,urlTool,domTool,netTool,videoTool,stringTool,jsonTool,TaskLoop,get LoopMode(){return LoopMode},CHANNEL,BUILD_TIME,VERSION,LOCAL_DEV},Symbol.toStringTag,{value:"Module"}));KernelFactory$1.registerKernel(KERNEL_NAME.ORIGIN,OrgPlayer);window.ThumbPlayerCore=ThumbPlayerCore;var queue=[],isReq=!1,qqlive=0,getClient=function(G){if(qqlive){G(qqlive);return}if(queue.push(G),!isReq){if(isReq=!0,document.domain!="qq.com")throw new Error("document.domain is not qq.com");var U=document.createElement("iframe");U.src=`javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\"qq.com\\";<\\\\/script>\\');document.close();};<\/script>'`,U.style.cssText="display:none;",document.body.appendChild(U),U.getClient=function(L){qqlive=L;for(var Y=queue.shift();Y;)Y&&Y(L),Y=queue.shift()},U.src="//v.qq.com/iframe/client.html"}};function styleInject$5(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z$6=".txp_video_error{position:absolute;top:0;left:0;width:100%;height:100%;z-index:99;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:#111;color:#fff}.txp_video_error.txp_none,.txp_video_error .txp_none{display:none!important}.txp_video_error a{color:#fff;text-decoration:none}.txp_video_error .txp_error_title{margin:10px 20px;font-size:18px;line-height:1.6;text-align:center}.txp_video_error .txp_error_title .txp_btn{color:#ff6428;font-size:inherit}.txp_video_error .error-noise-bg{position:absolute;width:100%;height:100%;left:0;top:0;z-index:-1}.txp_video_error .txp_error_code{margin:30px 20px 0;line-height:1.5;color:#666;pointer-events:auto;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_video_error .txp_error_code a{cursor:pointer;color:#666;border-bottom:1px solid}.txp_video_error .txp_error_code a:hover{color:#ff6428}.txp_video_error .txp_error_code::-moz-selection, .txp_video_error .txp_error_code ::-moz-selection{color:#fff;background:#eee}.txp_video_error .txp_error_code::selection,.txp_video_error .txp_error_code ::selection{color:#fff;background:#eee}.txp_video_error .txp_error_code::-moz-selection,.txp_video_error .txp_error_code ::-moz-selection{color:#fff;background:#eee}.txp_video_error .none{display:none}.txp_video_error .txp_link_refresh{color:#fc6526}.txp_video_error .txp_link_btn{display:block;margin-bottom:16px;padding:0 20px;border-radius:15px;background:#26262b;color:#fc6526;font-size:14px;line-height:30px;cursor:pointer}.txp_video_error .txp_link_btn:hover{color:#fff;background-color:#fc6526}.txp_video_error .txp_browser a{text-decoration:underline;cursor:pointer}.txp_video_error .txp_browser a:hover{color:#ff6428}";styleInject$5(css_248z$6);var ErrMsg;(function(G){G.DEFAULT="\u8FD9\u4E2A\u89C6\u9891\u88AB\u5916\u661F\u4EBA\u52AB\u8D70\uFF0C\u6682\u65F6\u770B\u4E0D\u4E86\u4E86~",G.LIMITED="\u5F88\u9057\u61BE\uFF0C\u5BF9\u6B64\u89C6\u9891\u7684\u8BBF\u95EE\u6682\u65F6\u53D7\u9650",G.SENSITIVE="\u6B64\u89C6\u9891\u5305\u542B\u654F\u611F\u4FE1\u606F\uFF0C\u5DF2\u88AB\u7BA1\u7406\u5458\u6349\u62FF~",G.NO_COPYRIGHT="\u6682\u65F6\u6CA1\u6709\u83B7\u5F97\u8BE5\u89C6\u9891\u7248\u6743\uFF0C\u52AA\u529B\u4E3A\u60A8\u4E89\u53D6\u4E2D~",G.NO_COPYRIGHT_IN_REGION="\u5F88\u62B1\u6B49\uFF0C\u7531\u4E8E\u7248\u6743\u9650\u5236\uFF0C\u60A8\u6240\u5728\u7684\u5730\u533A\u6682\u65F6\u65E0\u6CD5\u64AD\u653E\u8BE5\u89C6\u9891",G.NO_PLAYBACK_COPYRIGHTS="\u5F88\u62B1\u6B49\uFF0C\u8BE5\u89C6\u9891\u6682\u65E0\u64AD\u653E\u7248\u6743",G.NOT_SUPPROT_BROWSER="\u5E94\u7248\u6743\u65B9\u8981\u6C42\u672C\u7247\u91C7\u7528\u52A0\u5BC6\u683C\u5F0F\uFF0C\u6B64\u6D4F\u89C8\u5668\u6682\u4E0D\u652F\u6301\u64AD\u653E"})(ErrMsg||(ErrMsg={}));var errorCodeMap={default:ErrMsg.DEFAULT};errorCodeMap["70013051"]=errorCodeMap["70013052"]=errorCodeMap["70013061"]=errorCodeMap["70013062"]=errorCodeMap["70013063"]=errorCodeMap["70013065"]=errorCodeMap["70013066"]=errorCodeMap["70013069"]=errorCodeMap["70013071"]=errorCodeMap["70013073"]=errorCodeMap["70013074"]=errorCodeMap["70013076"]=errorCodeMap["70013077"]=errorCodeMap["70013081"]=errorCodeMap["70013082"]=errorCodeMap["70013086"]=errorCodeMap["70013094"]=ErrMsg.DEFAULT;errorCodeMap["70013064"]=errorCodeMap["70013100"]=ErrMsg.LIMITED;errorCodeMap["70013080.3"]=errorCodeMap["70013080.10"]=errorCodeMap["70013080.11"]=errorCodeMap["70013084"]=ErrMsg.SENSITIVE;errorCodeMap["70013080"]=errorCodeMap["70013080.7"]=errorCodeMap["70013080.9"]=errorCodeMap["70013083"]=ErrMsg.NO_COPYRIGHT;errorCodeMap["70013080.1"]=ErrMsg.NO_COPYRIGHT_IN_REGION;errorCodeMap["70013080.2"]=ErrMsg.NO_PLAYBACK_COPYRIGHTS;errorCodeMap["70013069.4"]=errorCodeMap["70013080.14"]=ErrMsg.NOT_SUPPROT_BROWSER;var shouldShowClientBtnErrs=["70013080.14","70013069.4","70013080.2"];function saveChannel(G){var U="qqlivechannel=channel1."+G;if(uaTool.browser.ie){var L=new Date;L.setTime(L.getTime()+24*60*60*1e3),document.cookie=U+";path=/;expires="+L.toUTCString()}else{var Y=document.createElement("input");document.querySelector("body").append(Y),Y.style.position="absolute",Y.style.top="-9999px",Y.value=U,Y.style.top=document.querySelector("body").scrollTop+"px",Y.focus(),Y.setSelectionRange(0,U.length),document.queryCommandSupported("copy")&&document.execCommand("copy",!0),Y.remove()}}function openClient(G){if(G.support&&G.sso){try{saveChannel(G.atag)}catch(U){}try{getClient(function(U){U&&U.exist().done(function(){U.open(G.sso),G.success()}).fail(function(){G.error()})})}catch(U){console.log(U)}}}var qqbrowserHelper={exist:!1,isLatestChromeSupportDrm:function(){var G=uaTool.os,U;if(G.windows)return U=parseFloat(G.version),U>6;if(G.mac){if(uaTool.browser.qqbrowser)return!1;var L=(G.version||"").split(".");return U=parseFloat((L[0]||"0")+"."+(L[1]||"0")),U>10.1}if(G.linux)return!1},detect:function(){var G="10.2.2101.400",U=new SimpleDefer,L=document.createElement("meta");L.name="referrer",L.content="always",document.head.prepend(L);var Y=this.isLatestChromeSupportDrm();return Y?fetch("http://127.0.0.1:28653/api/handle",{method:"POST",body:JSON.stringify({action:"GetQBVersion",cmd:""})}).then(function(X){return X.json()}).then(function(X){L.remove();var W=!1,z=X.result||"";z&&(W=comTool.compareVersion(z,G)!==-1),W?(qqbrowserHelper.exist=!0,U.resolve({exist:!0})):(qqbrowserHelper.exist=!1,U.resolve({exist:!1}))}).catch(function(){L.remove(),qqbrowserHelper.exist=!1,U.resolve({exist:!1})}):U.reject(),U},download:function(){try{location.assign("http://dldir1.qq.com/invc/tt/QQBrowser_Setup_DRM.exe")}catch(G){}},open:function(G){if(!qqbrowserHelper.exist)this.download();else{var U=document.createElement("meta");U.name="referrer",U.content="always",document.head.prepend(U),fetch("http://127.0.0.1:28653/api/handle",{method:"POST",body:JSON.stringify({action:"Open",cmd:encodeURIComponent(G)})}).then(function(){U.remove()}).catch(function(){U.remove()})}}},ErrorPagePluginName$1="error-page",ErrorPagePluginEvents$1={REPORT_LOG:"error-page:report-log"},defaultErrorText$1="\u51FA\u9519\u5566",dataRoleMap$1={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorHandler:"txp-ui-error-handler",errorRefresh:"txp-ui-error-refresh",errorCode:"txp-ui-error-code",background:"txp-ui-error-background",clientBtn:"txp-ui-error-client-btn",browserTip:"txp-ui-error-browser"},defaultNoiseConfig={enable:!0,interval:150,performanceRatio:5,size:4,opacity:.1},WHITE_RGB_VALUE=(255<<16)+(255<<8)+255,ErrorPagePlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,Y,X)||this;return z.innerElements={},z.clientExistDefer=new SimpleDefer,z.noiseAnimation=function(J,Z,ee,te,re){var ie=Math.floor(ee/re),ne=J.createImageData(Z,ie),oe=new Uint32Array(ne.data.buffer);J.clearRect(0,0,Z,ee);for(var se=0;se<oe.length;se++)oe[se]=((255*Math.random()*te|0)<<24)+WHITE_RGB_VALUE;for(var se=0;se<re;se++)J.putImageData(ne,0,ie*se)},z.browserTipClick=function(){qqbrowserHelper.open(location.href)},z.config=__assign$a(__assign$a({},L.config.errorPageConfig),Y),z.config.noiseConfig=__assign$a(__assign$a({},defaultNoiseConfig),(W=z.config)===null||W===void 0?void 0:W.noiseConfig),z.insertDOM(),z.setupDOMEvents(),z.setupPlayerEvents(),z}return U.prototype.show=function(L){L===void 0&&(L=defaultErrorText$1);var Y=this.player.getCommonKv(COMMON_DATA_KEY.flowid);if(typeof L=="string")this.innerElements.errorMsg.innerHTML=L,this.innerElements.errorCode.innerHTML=Y||"",this.innerElements.background.classList.add(txpHideClass),this.innerElements.errorRefresh.classList.remove(txpHideClass);else{var X=L.text,W=X===void 0?defaultErrorText$1:X,z=L.code,J=z===void 0?"":z,Z=L.img,ee=Z===void 0?"":Z,te=L.hideRefresh,re=te===void 0?!1:te;this.innerElements.errorMsg.innerHTML=W,this.innerElements.errorCode.innerHTML=J?String(J)+"-"+Y:Y,this.innerElements.background.src=ee,this.innerElements.background.classList.toggle(txpHideClass,!ee),this.innerElements.errorRefresh.classList.toggle(txpHideClass,re)}this.setNoise(!0),this.rootEl.classList.remove(txpHideClass)},U.prototype.hide=function(){this.rootEl.classList.add(txpHideClass),this.setNoise(!1),domTool.addClass(this.innerElements.clientBtn,txpHideClass),domTool.addClass(this.innerElements.browserTip,txpHideClass),domTool.addClass(this.innerElements.errorRefresh,txpHideClass)},U.prototype.resize=function(){if(!!this.noiseBg){var L=this.player.container,Y=L.clientWidth,X=L.clientHeight,W=this.config.noiseConfig.size;this.noiseBg.width=Y/W,this.noiseBg.height=X/W}},U.prototype.destroy=function(){var L;this.setNoise(!1),this.rootEl.parentNode&&this.rootEl.remove(),this.innerElements={},(L=this.noiseBg)===null||L===void 0||L.remove(),this.noiseBg=null,this.rootEl=null,G.prototype.destroy.call(this)},U.prototype.insertDOM=function(){var L=this,Y=this.player.container,X=this.config.noiseConfig,W='<div data-role="'+dataRoleMap$1.error+'" class="txp_video_error '+txpHideClass+`">
      `+(X.enable?'<canvas class="error-noise-bg"></canvas>':"")+`
      <img data-role="`+dataRoleMap$1.background+`" alt="error-background"/>
      <div data-role="`+dataRoleMap$1.errorMsg+`" class="txp_error_title"></div>
      <div data-role="`+dataRoleMap$1.errorHandler+`" class="txp_error_desc">
        <span data-role="`+dataRoleMap$1.errorRefresh+`">
          \u4F60\u53EF\u4EE5 <a href="javascript:;" class="txp_link_refresh">\u5237\u65B0</a> \u8BD5\u8BD5
        </span>
      </div>
      <a data-role="`+dataRoleMap$1.clientBtn+'" class="txp_link_btn '+txpHideClass+`"></a>
      <div data-role="`+dataRoleMap$1.browserTip+'" class="txp_browser '+txpHideClass+`"></div>
      <div class="txp_error_code" data-role="`+dataRoleMap$1.errorCode+`"></div>
    </div>`;Y.insertAdjacentHTML("beforeend",W),this.rootEl=Y.querySelector('[data-role="'+dataRoleMap$1.error+'"]'),this.noiseBg=this.rootEl.querySelector("canvas"),this.resize(),Object.keys(dataRoleMap$1).forEach(function(z){L.innerElements[z]=Y.querySelector('[data-role="'+dataRoleMap$1[z]+'"]')})},U.prototype.setupDOMEvents=function(){var L=this;this.innerElements.errorRefresh.querySelector(".txp_link_refresh").addEventListener("click",function(){L.config.useReplay?L.player.replay():location.reload()});var Y=5,X=300,W=0,z=0;this.innerElements.errorCode.addEventListener("click",function(){W+=1,W>=Y&&(W=0,L.emit(U.Events.REPORT_LOG)),z&&clearTimeout(z),z=window.setTimeout(function(){return W=0},X)}),this.innerElements.clientBtn.addEventListener("click",function(){L.clientExistDefer.promise.then(function(J){L.clickClientBtnOnExist(J)}).catch(function(){L.clickClientBtnOnNoExist()})})},U.prototype.setupPlayerEvents=function(){var L=this,Y=this.player;Y.on(H5_PLAY_EVENT.PLAY_SESSION_END,function(X){var W=X.data;if(!!L.config.showOnError){var z=W.code;if(z!==ErrorCode.SUC){var J=L.config,Z=J.hideRefresh,ee=J.img,te=W.message;if(Y.config.type===PLAY_MODE$1.LIVE&&W.data){var re=W.data.params,ie=re.msg,ne=re.showDownLoadClient,oe=re.showDownLoadBrowser,se=re.hideRefresh,ae=re.hideCode;ie&&(te=ie),se?domTool.addClass(L.innerElements.errorRefresh,txpHideClass):domTool.removeClass(L.innerElements.errorRefresh,txpHideClass),ae?domTool.addClass(L.innerElements.errorCode,txpHideClass):domTool.removeClass(L.innerElements.errorCode,txpHideClass),ne&&L.config.useClientBtn&&(L.checkClientExist(),L.setClientBtn()),oe&&L.config.useBrowserTip&&L.setBrowserTip()}else z.startsWith(ErrorCode.GETINFO_SERVER_CODE_PREFIX)&&(te=L.getVodErrMsg(z),shouldShowClientBtnErrs.includes(z)&&(L.config.useClientBtn&&(L.checkClientExist(),L.setClientBtn()),L.config.useBrowserTip&&L.setBrowserTip()));L.show({code:z,text:te,hideRefresh:Z,img:ee})}}}),Y.on(PLAY_EVENT$1.STATE_CHANGE,function(X){var W=X.data,z=W.new;(z===VIDEO_STATE$1.PLAYING||z===VIDEO_STATE$1.CANPLAY)&&L.hide()}),Y.on(H5_PLAY_EVENT.PLAY_SESSION_START,function(){return L.hide()})},U.prototype.getVodErrMsg=function(L){return errorCodeMap[L]||errorCodeMap.default},U.prototype.setClientBtn=function(){var L=this;domTool.addClass(this.innerElements.errorHandler,txpHideClass);var Y=uaTool.os.mac?"Mac\u5BA2\u6237\u7AEF\u89C2\u770B":"PC\u5BA2\u6237\u7AEF\u89C2\u770B";uaTool.os.mac?this.innerElements.clientBtn.innerHTML="\u6253\u5F00"+Y:this.clientExistDefer.promise.then(function(){L.innerElements.clientBtn.innerHTML="\u6253\u5F00"+Y}).catch(function(){L.innerElements.clientBtn.innerHTML="\u4E0B\u8F7D"+Y}),domTool.removeClass(this.innerElements.clientBtn,txpHideClass)},U.prototype.setNoise=function(L){var Y=this;L===void 0&&(L=!0);var X=this.config.noiseConfig,W=X.enable,z=X.performanceRatio,J=X.opacity;if(!(!W||!this.noiseBg)&&(clearInterval(this.noiseTimer),L)){var Z=this.noiseBg.getContext("2d"),ee=this.noiseBg,te=ee.width,re=ee.height;this.noiseTimer=setInterval(function(){Y.noiseAnimation(Z,te,re,J,z)},X.interval)}},U.prototype.checkClientExist=function(){var L=this;try{getClient(function(Y){if(Y){var X=Y.exist();X.done(function(){L.clientExistDefer.resolve(Y)}).fail(function(){L.clientExistDefer.reject()})}else L.clientExistDefer.reject()})}catch(Y){this.clientExistDefer.reject()}},U.prototype.clickClientBtnOnExist=function(L){if(this.player.config.type===PLAY_MODE$1.LIVE){var Y=this.player.getCommonKv(COMMON_DATA_KEY.livepid)||"",X=this.player.vid||"",W="qqlive://sso/pid="+Y+"&projectid="+X;L.open(W)}else{var z=this.player.vid,J=this.player.getCommonKv(COMMON_DATA_KEY.cid)||"",Z=Math.max(this.player.playtime-5,0),ee="web.playererror";openClient({support:!0,atag:"playererror",sso:"qqlive://sso/vbarid="+J+"&videoid="+z+"&start="+Z+"&atag="+ee,success:function(){},error:function(){this.openDownLoadLink()}})}},U.prototype.clickClientBtnOnNoExist=function(){this.openDownLoadLink()},U.prototype.openDownLoadLink=function(){window.open("https://v.qq.com/download.html#"+(uaTool.os.mac?"Mac":"Windows"),"_blank")},U.prototype.setBrowserTip=function(){var L=this;if(this.innerElements.browserTip.removeEventListener("click",this.browserTipClick),domTool.removeClass(this.innerElements.browserTip,txpHideClass),uaTool.browser.chrome&&comTool.compareVersion(uaTool.browser.chrome.version,"89")<0)this.innerElements.browserTip.innerHTML="\u6216\u4E0B\u8F7D\u6700\u65B0 Chrome \u6D4F\u89C8\u5668(89\u5185\u6838\u53CA\u4EE5\u4E0A)\u89C2\u770B";else if(uaTool.os.mac)this.innerElements.browserTip.innerHTML="\u6216\u4E0B\u8F7D\u6700\u65B0 Chrome\u3001Safari \u6D4F\u89C8\u5668\u89C2\u770B";else{var Y=!0;qqbrowserHelper.detect().promise.then(function(X){Y=X.exist,L.innerElements.browserTip.innerHTML="\u6216"+(Y?"\u4F7F\u7528":"\u4E0B\u8F7D")+'\u6700\u65B0<a style="display:inline; margin: 16px 0 0 0;text-decoration: underline;">QQ \u6D4F\u89C8\u5668</a>\u3001Chrome \u6D4F\u89C8\u5668\u89C2\u770B',L.innerElements.browserTip.addEventListener("click",L.browserTipClick)}).catch(function(){domTool.addClass(L.innerElements.browserTip,txpHideClass)})}},U.Events=ErrorPagePluginEvents$1,U.pluginName=ErrorPagePluginName$1,U}(Plugin);H5Player.registerPlugin(ErrorPagePlugin.pluginName,ErrorPagePlugin);var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal$1=="object"&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(G,U,L){var Y,X,W,z,J,Z,ee=0,te=!1,re=!1,ie=!0;if(typeof G!="function")throw new TypeError(FUNC_ERROR_TEXT);U=toNumber(U)||0,isObject(L)&&(te=!!L.leading,re="maxWait"in L,W=re?nativeMax(toNumber(L.maxWait)||0,U):W,ie="trailing"in L?!!L.trailing:ie);function ne(de){var _e=Y,me=X;return Y=X=void 0,ee=de,z=G.apply(me,_e),z}function oe(de){return ee=de,J=setTimeout(le,U),te?ne(de):z}function se(de){var _e=de-Z,me=de-ee,ve=U-_e;return re?nativeMin(ve,W-me):ve}function ae(de){var _e=de-Z,me=de-ee;return Z===void 0||_e>=U||_e<0||re&&me>=W}function le(){var de=now();if(ae(de))return ue(de);J=setTimeout(le,se(de))}function ue(de){return J=void 0,ie&&Y?ne(de):(Y=X=void 0,z)}function ce(){J!==void 0&&clearTimeout(J),ee=0,Y=Z=X=J=void 0}function he(){return J===void 0?z:ue(now())}function fe(){var de=now(),_e=ae(de);if(Y=arguments,X=this,Z=de,_e){if(J===void 0)return oe(Z);if(re)return J=setTimeout(le,U),ne(Z)}return J===void 0&&(J=setTimeout(le,U)),z}return fe.cancel=ce,fe.flush=he,fe}function throttle(G,U,L){var Y=!0,X=!0;if(typeof G!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(L)&&(Y="leading"in L?!!L.leading:Y,X="trailing"in L?!!L.trailing:X),debounce(G,U,{leading:Y,maxWait:U,trailing:X})}function isObject(G){var U=typeof G;return!!G&&(U=="object"||U=="function")}function isObjectLike(G){return!!G&&typeof G=="object"}function isSymbol(G){return typeof G=="symbol"||isObjectLike(G)&&objectToString.call(G)==symbolTag}function toNumber(G){if(typeof G=="number")return G;if(isSymbol(G))return NAN;if(isObject(G)){var U=typeof G.valueOf=="function"?G.valueOf():G;G=isObject(U)?U+"":U}if(typeof G!="string")return G===0?G:+G;G=G.replace(reTrim,"");var L=reIsBinary.test(G);return L||reIsOctal.test(G)?freeParseInt(G.slice(2),L?2:8):reIsBadHex.test(G)?NAN:+G}var lodash_throttle=throttle,css_248z$1$1='.plugin_ctrl_txp_shadow{position:absolute;z-index:2;left:0;top:0;width:100%;height:100%}.plugin_ctrl_txp_shadow.txp_none{display:none}.plugin_ctrl_airplay_btn{-webkit-transform:scale(.9);transform:scale(.9)}.plugin_ctrl_center_btn{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.plugin_ctrl_center_btn.txp_none{display:none}.plugin_ctrl_center_btn .txp_none{display:none!important}.plugin_ctrl_center_btn .btn_play{width:68px;height:68px;pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_play .icon_play{width:100%;height:100%}.plugin_ctrl_center_btn .btn_replay{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 22px;line-height:40px;border-radius:99em;color:#fff;font-size:14px;background-color:rgba(59,59,59,.95);pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_replay .icon_replay{margin-right:4px;width:15px;height:15px;fill:#fff}.plugin_ctrl_txp_gradient_bottom{position:absolute;z-index:3;left:0;bottom:0;width:100%;height:60px;background-image:-webkit-gradient(linear,left bottom, left top,color-stop(0, rgba(3,0,0,.3)),to(transparent));background-image:linear-gradient(0deg,rgba(3,0,0,.3) 0,transparent);opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;pointer-events:none}.plugin_ctrl_txp_gradient_bottom.txp_none{display:none}.plugin_ctrl_txp_mode_fullscreen{position:fixed!important;z-index:999999;width:100%!important;height:100%!important;padding-bottom:0!important;top:0;right:0;bottom:0;left:0}.plugin_ctrl_fake_fullscreen{overflow:hidden}._mod_thumbplayer_container_:-webkit-full-screen{width:100%!important;height:100%!important}@-webkit-keyframes txp_icon_scale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}to{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}@keyframes txp_icon_scale{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}50%{-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-transform-origin:center center;transform-origin:center center}to{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center}}.plugin_ctrl_txp_bottom{position:absolute;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:6;bottom:0;left:0;width:100%;height:48px;line-height:1;max-width:100%;max-height:100%;overflow:initial;text-indent:0;text-align:left;white-space:normal;word-break:break-all;color:#fff;font-size:14px;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,Microsoft Yahei,Arial,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none}.plugin_ctrl_txp_bottom.txp_none{display:none}.plugin_ctrl_txp_bottom .txp_btn{position:relative;cursor:pointer;background:none;border:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit}.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon{fill:#ff6022;cursor:pointer}.plugin_ctrl_txp_bottom .txp_icon_fake,.plugin_ctrl_txp_bottom .txp_icon_fullscreen,.plugin_ctrl_txp_bottom .txp_icon_pip,.plugin_ctrl_txp_bottom .txp_icon_volume,.plugin_ctrl_txp_bottom .txp_icon_volume_mute{stroke:#fff}.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_fake,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_fullscreen,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_pip,.plugin_ctrl_txp_bottom .txp_btn:hover .txp_icon_volume,.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=true] .txp_icon_fake{stroke:#ff6022}.plugin_ctrl_txp_bottom .txp_btn_pip[data-status=true] .txp_icon_pip{stroke:#ff6022;fill:#ff6022}.plugin_ctrl_txp_bottom .txp_controls{display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;bottom:0;left:0;width:100%;height:100%}.plugin_ctrl_txp_bottom *,.plugin_ctrl_txp_bottom :after,.plugin_ctrl_txp_bottom :before{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;text-indent:0}.plugin_ctrl_txp_bottom a,.plugin_ctrl_txp_bottom a:hover,.plugin_ctrl_txp_bottom a:visited{color:#fff;text-decoration:none!important}.plugin_ctrl_txp_bottom :focus,.plugin_ctrl_txp_bottom a:active{outline:0 none}.plugin_ctrl_txp_bottom .txp_left_controls,.plugin_ctrl_txp_bottom .txp_right_controls{position:relative;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.plugin_ctrl_txp_bottom .txp_controls .txp_btn{height:100%;text-align:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.plugin_ctrl_txp_bottom .txp_left_controls .txp_btn{margin-right:16px;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_txp_bottom .txp_left_controls .txp_btn:first-child{margin-left:16px}.plugin_ctrl_txp_bottom .txp_center_controls{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}.plugin_ctrl_txp_bottom .txp_right_controls{z-index:8}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn{margin-right:16px}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_definition,.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_language,.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_playrate{margin-right:24px}.plugin_ctrl_txp_bottom .txp_left_controls .txp_icon{display:block;margin:auto}.plugin_ctrl_txp_bottom .txp_left_controls .txp_icon_next{pointer-events:none}.plugin_ctrl_txp_bottom .txp_right_controls .txp_icon{display:block}.plugin_ctrl_txp_bottom .txp_controls .txp_tooltip{position:absolute;z-index:14;height:26px;border-radius:16px;font-size:12px;display:none;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;top:-30px;padding:4px 12px;white-space:nowrap;background-color:rgba(0,0,0,.8);left:50%;-webkit-transform:translate(-50%);transform:translate(-50%)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_fake .txp_tooltip{left:-15px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_play .txp_tooltip{left:-6px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_next .txp_tooltip{left:-11px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_controls .txp_btn_fullscreen .txp_tooltip{left:auto;right:-10px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_bottom .txp_btn_setting:hover .txp_icon_setting{-webkit-animation:txp_icon_rotate .3s ease both;animation:txp_icon_rotate .3s ease both}.plugin_ctrl_txp_bottom .txp_air_play:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_fake:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_fullscreen:hover .txp_icon,.plugin_ctrl_txp_bottom .txp_btn_pip:hover .txp_icon{-webkit-animation:txp_icon_scale .4s ease both;animation:txp_icon_scale .4s ease both}.plugin_ctrl_txp_bottom .txp_time_display{height:100%;margin-left:8px;white-space:nowrap;font-size:0;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour{margin-left:-8px}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_current,.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_duration{width:50px}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_current{text-align:right}.plugin_ctrl_txp_bottom .txp_time_display.reach_hour .txp_time_duration{text-align:left}.plugin_ctrl_txp_bottom .txp_time_display>div{display:inline;font-size:12px}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_separator{margin:0 3px;color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_current,.plugin_ctrl_txp_bottom .txp_time_display .txp_time_duration{width:32px;text-align:center}.plugin_ctrl_txp_bottom .txp_time_display .txp_time_duration{color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge{position:relative;font-size:12px;display:inline;margin-top:-1px;line-height:40px;padding-left:10px;cursor:default}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge:before{content:"";position:absolute;left:0;top:17px;display:inline-block;width:6px;height:6px;border-radius:100%;background-color:#ff7000}.plugin_ctrl_txp_bottom .txp_time_display .txp_live_badge_back:before{background-color:#bbb}.plugin_ctrl_txp_bottom .txp_time_display_live{margin-left:0}.plugin_ctrl_txp_bottom .txp_progress_bar_container{position:absolute;z-index:4;left:0;top:-8px;width:100%;height:8px;padding:0;vertical-align:top;cursor:pointer}.plugin_ctrl_txp_bottom .txp_progress_bar_container:after{content:"";display:block;width:100%;height:12px;position:absolute;bottom:-2px;z-index:-1}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover{z-index:9;cursor:pointer}.plugin_ctrl_txp_bottom .txp_progress_list{position:absolute;left:0;top:0;height:8px;width:100%}.plugin_ctrl_txp_bottom .txp_progress_list:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background-color:hsla(0,0%,100%,.35);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease;z-index:-1}.plugin_ctrl_txp_bottom .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_play{position:absolute;left:0;top:0;height:100%;width:2px;background-color:#ff6429;-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_hover,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_list:after,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_play,.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_progress_role{-webkit-transform:scaleY(1);transform:scaleY(1)}.plugin_ctrl_txp_bottom .txp_progress_load{background-color:hsla(0,0%,100%,.5)}.plugin_ctrl_txp_bottom .txp_progress_hover{position:absolute;width:10px;height:100%;bottom:0;background-color:#fff;border-radius:100%;background-clip:padding-box;opacity:0;-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_progress_role{position:absolute;left:0;top:0;height:100%;width:2px;background-color:rgba(178,250,77,.5);-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_btn_scrubber{position:absolute;width:12px;height:12px;top:-2px;margin-left:-6px;cursor:pointer;-webkit-transform:scale(0);transform:scale(0);-webkit-transition:all .15s ease;transition:all .15s ease}.plugin_ctrl_txp_bottom .txp_scrubber_indicator{position:relative;width:12px;height:12px;border-radius:100%;background-color:#ff6429}.plugin_ctrl_txp_bottom .txp_scrubber_indicator:before{content:"";position:absolute;left:-4px;top:-4px;width:20px;height:20px;border-radius:100%;display:block;background-color:rgba(254,100,41,.3)}.plugin_ctrl_txp_bottom .txp_progress_bar_container:hover .txp_btn_scrubber{-webkit-transform:scale(1);transform:scale(1)}.plugin_ctrl_txp_bottom .txp_btn_scrubber:hover .txp_scrubber_indicator:before{width:24px;height:24px;left:-6px;top:-6px}.plugin_ctrl_txp_bottom .txp_btn_play .txp_svg_symbol{visibility:hidden;opacity:0}.plugin_ctrl_txp_bottom .txp_btn_play[data-status=pause] .txp_svg_pause,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=play] .txp_svg_play,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=replay] .txp_svg_replay,.plugin_ctrl_txp_bottom .txp_btn_play[data-status=stop] .txp_svg_stop{visibility:visible;opacity:1;-webkit-animation:none;animation:none}.plugin_ctrl_txp_bottom .txp_popup{position:absolute;bottom:34px;z-index:20;width:100%;padding-bottom:24px;color:#eee;cursor:default}.plugin_ctrl_txp_bottom .txp_popup_content{background-color:rgba(0,0,0,.8);border-radius:4px}.plugin_ctrl_txp_bottom .txp_popup_audio_track,.plugin_ctrl_txp_bottom .txp_popup_definition,.plugin_ctrl_txp_bottom .txp_popup_language,.plugin_ctrl_txp_bottom .txp_popup_playrate{width:auto;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);font-size:0}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_language .txp_popup_content,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_popup_content{padding-top:10px}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem{min-width:104px;position:relative;padding:10px 22px;font-size:14px;text-align:center;cursor:pointer;white-space:nowrap;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:last-of-type,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:last-of-type{padding-bottom:20px}.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_audio_track .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_definition .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_language .txp_menuitem:hover,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:active,.plugin_ctrl_txp_bottom .txp_popup_playrate .txp_menuitem:hover{color:#ff6429}.plugin_ctrl_txp_bottom .txp_btn .txp_label{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;padding:1px 4px;cursor:pointer;color:#ececec;white-space:nowrap;border:2px solid #fff;border-radius:4px;font-weight:700}.plugin_ctrl_txp_bottom .txp_btn .txp_label:hover{color:#ff6022;border-color:#ff6022}.plugin_ctrl_txp_bottom .txp_btn_definition{position:relative;height:100%;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_txp_bottom .txp_volume{position:relative;display:table-cell;width:44px;height:45px;vertical-align:top;color:#fff}.plugin_ctrl_txp_bottom .txp_volume_text{padding-top:8px}.plugin_ctrl_txp_bottom .txp_btn_volume .txp_svg_symbol{display:none}.plugin_ctrl_txp_bottom .txp_btn_volume[data-status=mute] .txp_svg_volume_mute,.plugin_ctrl_txp_bottom .txp_btn_volume[data-status=normal] .txp_svg_volume{display:block}.plugin_ctrl_txp_bottom .txp_popup_volume{width:42px;-webkit-transform:translate(-50%);transform:translate(-50%);left:50%}.plugin_ctrl_txp_bottom .txp_popup_volume .txp_popup_content{overflow:hidden}.plugin_ctrl_txp_bottom .txp_volume_range{position:relative;margin:10px 19px;width:4px;height:90px;background-color:hsla(0,0%,65.1%,.5);border-radius:2px;cursor:pointer}.plugin_ctrl_txp_bottom .txp_volume_range:after{content:"";display:block;width:42px;height:90px;position:absolute;left:-19px;top:0}.plugin_ctrl_txp_bottom .txp_volume_range_current{position:absolute;left:0;bottom:0;width:100%;height:50%;background-color:#ff6429;border-radius:2px;z-index:1}.plugin_ctrl_txp_bottom .txp_volume_handle{position:absolute;top:-4px;left:-2px;width:8px;height:8px;background-color:#fff;border-radius:100%;cursor:pointer}.plugin_ctrl_txp_bottom .txp_volume_handle:before{content:"";display:block;position:absolute;left:-3px;top:-3px;width:14px;height:14px;opacity:0;-webkit-transform:scale(0);transform:scale(0);background-color:hsla(0,0%,100%,.2);border-radius:7px}.plugin_ctrl_txp_bottom .txp_volume_handle:after{content:"";width:32px;height:32px;display:block;position:absolute;left:-12px;top:-12px;z-index:-1;opacity:.5;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAADAUExURQAAAP+ZAP+RAP9/AP+aAP9/AP+OCP//AP9/AP+qAP+QDf+SDP+TDv+TCv+RCP+ZAP+TC/+TCP+QC/+RCv+SCf+SCv+QCv+RCv+TCf+PD/+PCP+RDP+RCf+RCv+PCf+RB/+RCv+RCf6RCv+ZEf+RC/+RCf+RC/+RC/6RCv+OB/+QC/+RC/+RCv+TC/+QC/+SC/+RC/+RCv+RCv+RCv+RC/6RCv6RCv6RCv6SCv6SCv2QC/+RCv+SCv+RC/+RCv2RCn+uAUwAAABAdFJOUwAFBwYIBAsBAgMNExEYOAoWHit4JUtXYhoQHCg1MT4gRmmHD1SlsbaUIi5BIy1DUltIb2VygY+Jm6KYrHyYuqzDURAFAAAB/klEQVQ4y6WVWZeiMBSEhQZmDAgJO7LIIrivuNv2/P9/NTdRp7VlTmfO1BMP36kKl5ui1XrQD9DPm+hzq1lXqn3TlW3mKCXLApMsU7aBpHaUehMlJvGNsq+mzE6mlKEwGZSVX0yZnSBKBkJFoIGCAiFDEgVm+oUDO4Q0FeMOCGNVQ+hq+kAyDuwCFfuE9ECE+FgNwJSRz5yCNMCmdmiCQnsKqIaURxKCKVeone4onMWRDoriWTgiHbWg5D0cDAXRQGqH2GasJ/N0tUrniR6bNpDIEIW7JQtGGnDjKEmdhQtaOGkSjYHU0Gc4GEoowF17rE+c/tKrs6z2ln1noo/tLg6QdLdsyzTYH5nRxHG9bGOBNpnnOpPIHPk0XG5fQUFSNEzCOHHcem1t8/0+31rr2nWSOCRYU6glBekJVX8609O+t37Pd8PTabjL39deP9VnU7CkL85A0SjghGC4zKx8eDiW5fEwzK1sCZZwygKyGSiISgDJ0Xzhbba7Q/mrqs7lYbfdeIt5BNmBAhNiIByx0zMhuQbD47kaDKrzESxryDZ7dELP4MrNrP2prAYfH4OqvOytzF39H/h9NO/LcI/nZeCXS/PAuT8h91Lc1ow0rRl5XDPuxeW+CtyXi/u68hfAn0pRnitFeakU7pJ6rj0E+lvt8RcpfzX/Q9l/8/v4DS6tX+XyhPN2AAAAAElFTkSuQmCC);background-size:32px 32px;pointer-events:none}.plugin_ctrl_txp_bottom .txp_volume_handle:hover:before{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.plugin_ctrl_txp_bottom .txp_volume_handle:hover:after{opacity:1}.plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_popup{width:24px}.plugin_ctrl_txp_bottom .txp_right_controls .txp_icon_popup{width:20px;height:20px;margin-top:0}.plugin_ctrl_txp_bottom .txp_btn_fake .txp_svg_symbol,.plugin_ctrl_txp_bottom .txp_btn_fullscreen .txp_svg_symbol{display:none}.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=false] .txp_svg_fake,.plugin_ctrl_txp_bottom .txp_btn_fake[data-status=true] .txp_svg_fake_true,.plugin_ctrl_txp_bottom .txp_btn_fullscreen[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_txp_bottom .txp_btn_fullscreen[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_txp_bottom .txp_popup .txp_current{color:#ff6429}.plugin_ctrl_txp_bottom .txp_btn_loop .txp_svg_loop,.plugin_ctrl_txp_bottom .txp_btn_loop .txp_svg_loop_off{display:none}.plugin_ctrl_txp_bottom .txp_btn_loop[data-status=false] .txp_svg_loop_off,.plugin_ctrl_txp_bottom .txp_btn_loop[data-status=true] .txp_svg_loop{display:block}.plugin_ctrl_txp_bottom .txp_controls .txp_btn:hover .txp_tooltip{display:-webkit-box;display:-ms-flexbox;display:flex}.plugin_ctrl_txp_bottom .txp_controls .txp_btn:visited .txp_tooltip{display:none}.plugin_ctrl_txp_bottom .txp_popup:hover{display:block}.plugin_ctrl_txp_bottom .txp_icon{position:relative;width:28px;height:28px;fill:#fff}.plugin_ctrl_txp_bottom .txp_icon:after,.plugin_ctrl_txp_bottom .txp_icon:before,.plugin_ctrl_txp_bottom .txp_icon_inner:after,.plugin_ctrl_txp_bottom .txp_icon_inner:before{content:"";position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box}.plugin_ctrl_txp_bottom .txp_icon_inner{position:absolute;width:100%;height:100%}.plugin_ctrl_txp_bottom .txp_controls .txp_disabled{cursor:default;opacity:.5;pointer-events:none}.plugin_ctrl_txp_bottom .txp_gradient_top{display:none}.plugin_ctrl_txp_bottom .txp_btn_scrubber,.plugin_ctrl_txp_bottom .txp_progress_load,.plugin_ctrl_txp_bottom .txp_progress_play{-webkit-transition:-webkit-transform .15s ease;transition:-webkit-transform .15s ease;transition:transform .15s ease;transition:transform .15s ease, -webkit-transform .15s ease}.plugin_ctrl_txp_bottom .txp_none{display:none!important}.plugin_ctrl_txp_mode_fullscreen .txp_controls .txp_btn_fullscreen .txp_tooltip{left:auto;right:0;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl_txp_mode_fullscreen .txp_controls .txp_btn_fake .txp_tooltip{left:-26px;-webkit-transform:translate(0);transform:translate(0)}.plugin_ctrl--large .plugin_ctrl_txp_gradient_bottom{height:100px}.plugin_ctrl--large .plugin_ctrl_txp_bottom{height:88px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_popup{bottom:64px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn{margin-right:24px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn .txp_label,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn .txp_label{height:26px;font-size:16px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_icon,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_icon{width:40px;height:40px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_time_display{margin-left:0}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_left_controls .txp_btn:first-child{margin-left:32px}.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_definition,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_language,.plugin_ctrl--large .plugin_ctrl_txp_bottom .txp_right_controls .txp_btn_playrate{margin-right:32px}.txp_interact_dot{position:absolute;top:2px;width:4px;height:4px;margin-left:-2px;border-radius:100%;background-color:#fff;-webkit-transition:all .1s;transition:all .1s}.txp_interact_dot:after{position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;content:""}.txp_interact_dot:hover{-webkit-transform:scale(2);transform:scale(2);-webkit-box-shadow:0 0 2px #ffb821;box-shadow:0 0 2px #ffb821}.txp_hotpoint_tip{color:#fff;position:relative;width:200px;bottom:60px;font-size:12px;line-height:24px;height:50px;padding:0 6px;background-color:rgba(0,0,0,.9);display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2;word-wrap:break-word}.txp_hotpoint_tip .txp_hotpoint_tip_title{color:#bbb}.txp_hotpoint_tip .txp_hotpoint_tip_detail{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}',css_248z$5='.plugin_ctrl_txp_shadow{position:absolute;z-index:2;left:0;top:0;width:100%;height:100%}.plugin_ctrl_txp_shadow.txp_none{display:none}.plugin_ctrl_airplay_btn{-webkit-transform:scale(.9);transform:scale(.9)}.plugin_ctrl_center_btn{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.plugin_ctrl_center_btn.txp_none{display:none}.plugin_ctrl_center_btn .txp_none{display:none!important}.plugin_ctrl_center_btn .btn_play{width:68px;height:68px;pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_play .icon_play{width:100%;height:100%}.plugin_ctrl_center_btn .btn_replay{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:0 22px;line-height:40px;border-radius:99em;color:#fff;font-size:14px;background-color:rgba(59,59,59,.95);pointer-events:auto;cursor:pointer}.plugin_ctrl_center_btn .btn_replay .icon_replay{margin-right:4px;width:15px;height:15px;fill:#fff}.plugin_ctrl_txp_gradient_bottom{position:absolute;z-index:3;left:0;bottom:0;width:100%;height:60px;background-image:-webkit-gradient(linear,left bottom, left top,color-stop(0, rgba(3,0,0,.3)),to(transparent));background-image:linear-gradient(0deg,rgba(3,0,0,.3) 0,transparent);opacity:1;-webkit-transition:opacity .15s ease-out;transition:opacity .15s ease-out;pointer-events:none}.plugin_ctrl_txp_gradient_bottom.txp_none{display:none}.plugin_ctrl_txp_mode_fullscreen{position:fixed!important;z-index:999999;width:100%!important;height:100%!important;padding-bottom:0!important;top:0;right:0;bottom:0;left:0}.plugin_ctrl_fake_fullscreen{overflow:hidden}._mod_thumbplayer_container_:-webkit-full-screen{width:100%!important;height:100%!important}.plugin_ctrl_mobile_txp_bottom{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;z-index:6;bottom:0;left:0;width:100%;height:40px;overflow:initial;line-height:1;max-width:100%;max-height:100%;color:#fff;font-size:14px;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,sans-serif;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-touch-callout:none}.plugin_ctrl_mobile_txp_bottom.txp_none{display:none}.plugin_ctrl_mobile_txp_bottom .txp_disabled{opacity:.5;pointer-events:none}.plugin_ctrl_mobile_txp_bottom *,.plugin_ctrl_mobile_txp_bottom :after,.plugin_ctrl_mobile_txp_bottom :before{margin:0;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box}.plugin_ctrl_mobile_txp_bottom a,.plugin_ctrl_mobile_txp_bottom a:hover,.plugin_ctrl_mobile_txp_bottom a:visited{color:#fff;text-decoration:none!important;pointer-events:auto}.plugin_ctrl_mobile_txp_bottom .txp_btn:active,.plugin_ctrl_mobile_txp_bottom .txp_btn:focus,.plugin_ctrl_mobile_txp_bottom a:focus{outline:0 none}.plugin_ctrl_mobile_txp_bottom .txp_icon{position:relative;display:inline-block;fill:#fff}.plugin_ctrl_mobile_txp_bottom .txp_icon:after,.plugin_ctrl_mobile_txp_bottom .txp_icon:before,.plugin_ctrl_mobile_txp_bottom .txp_icon_inner:after,.plugin_ctrl_mobile_txp_bottom .txp_icon_inner:before{content:"";position:absolute;-webkit-box-sizing:content-box;box-sizing:content-box}.plugin_ctrl_mobile_txp_bottom .txp_icon_inner{position:absolute;width:100%;height:100%}.plugin_ctrl_mobile_txp_bottom .txp_left_controls,.plugin_ctrl_mobile_txp_bottom .txp_right_controls{position:relative;float:left;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn{position:relative;cursor:pointer;background:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:PingFangSC-Regular,Helvetica Neue,Helvetica,Roboto,Microsoft Yahei,Arial,sans-serif;border:none;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_play{width:60px;height:100%}.plugin_ctrl_mobile_txp_bottom .txp_btn_play .txp_icon_play{display:block;width:30px;height:30px;margin:auto;fill:#fff}.plugin_ctrl_mobile_txp_bottom .txp_btn_play use{display:none}.plugin_ctrl_mobile_txp_bottom .txp_btn_play[data-status=pause] .txp_svg_pause,.plugin_ctrl_mobile_txp_bottom .txp_btn_play[data-status=play] .txp_svg_play,.plugin_ctrl_mobile_txp_bottom .txp_btn_play[data-status=replay] .txp_svg_replay,.plugin_ctrl_mobile_txp_bottom .txp_btn_play[data-status=stop] .txp_svg_stop{display:block}.plugin_ctrl_mobile_txp_bottom .txp_time_display{height:100%;padding:4px 8px 0 0;white-space:nowrap;font-size:0;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_time_display>div{display:inline;font-size:9px}.plugin_ctrl_mobile_txp_bottom .txp_time_display .txp_time_separator{margin:0 1px}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:45px;height:100%;-webkit-box-flex:0;-ms-flex:none;flex:none}.plugin_ctrl_mobile_txp_bottom .txp_icon_fullscreen{display:block;width:30px;height:30px;margin:auto}.plugin_ctrl_mobile_txp_bottom .txp_icon_fullscreen use{display:none}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_mobile_txp_bottom .txp_btn_fullscreen[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_mobile_txp_bottom .txp_unfullscreen .txp_btn_value{background-position:right 0}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize{width:45px;height:100%;-webkit-box-flex:0;-ms-flex:none;flex:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize[data-status=false] .txp_svg_fullscreen,.plugin_ctrl_mobile_txp_bottom .txp_btn_fullsize[data-status=true] .txp_svg_fullscreen_true{display:block}.plugin_ctrl_mobile_txp_bottom .txp_unfullsize .txp_btn_value{background-position:right 0}.plugin_ctrl_mobile_txp_bottom .txp_progress_bar_container{position:relative;height:100%;padding:0;vertical-align:top;-webkit-box-flex:1;-ms-flex:1;flex:1}.plugin_ctrl_mobile_txp_bottom .txp_progress_list{position:absolute;left:0;top:20px;width:100%;height:2px;background-color:rgba(31,31,31,.9);-webkit-transform:translateZ(0);transform:translateZ(0)}.plugin_ctrl_mobile_txp_bottom .txp_progress_play{position:absolute;left:0;top:0;height:100%;width:2px;background-color:#fd9000}.plugin_ctrl_mobile_txp_bottom .txp_btn_scrubber{position:absolute;width:30px;height:40px;margin-left:-10px}.plugin_ctrl_mobile_txp_bottom .txp_scrubber_indicator{position:absolute;top:16px;left:10px;width:10px;height:10px;border-radius:99em;background-color:#ff7000}.plugin_ctrl_mobile_txp_bottom .txp_scrubber_indicator:before{content:"";position:absolute;left:-4px;top:-4px;width:18px;height:18px;background-color:#ff7000;opacity:.4;border-radius:99em}.plugin_ctrl_mobile_txp_bottom .txp_btn_definition,.plugin_ctrl_mobile_txp_bottom .txp_btn_playrate{position:relative;padding:0 8px;height:44px;color:#fff;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_mobile_txp_bottom .txp_btn_definition .txp_label,.plugin_ctrl_mobile_txp_bottom .txp_btn_playrate .txp_label{margin:auto}.plugin_ctrl_mobile_txp_bottom .txp_btn .txp_tooltip{display:none!important}.plugin_ctrl_mobile_txp_bottom .txp_right_controls{min-width:15px}.plugin_ctrl_mobile_txp_bottom .txp_none{display:none}.plugin_ctrl_mobile_txp_bottom~video::-webkit-media-controls,.plugin_ctrl_mobile_txp_bottom~video::-webkit-media-controls-start-playback-button{display:none!important}.plugin_ctrl_mod_overlay_wrapper{position:static}.plugin_ctrl_mod_overlay_wrapper ol,.plugin_ctrl_mod_overlay_wrapper ul{list-style:none}.plugin_ctrl_mod_overlay_wrapper li{vertical-align:top}.plugin_ctrl_mod_overlay_wrapper *{-webkit-box-sizing:border-box;box-sizing:border-box}.plugin_ctrl_mod_overlay_wrapper .mod_overlay{position:absolute;background:rgba(0,0,0,.75);left:0;top:0;right:0;bottom:0;z-index:998;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff}.plugin_ctrl_mod_overlay_wrapper .mod_overlay.overlay_flex{display:-webkit-box;display:-ms-flexbox;display:flex}.plugin_ctrl_mod_overlay_wrapper .mod_overlay.txp_none{display:none}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select{width:100%;text-align:center}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select .title{font-size:16px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;font-size:18px;font-weight:700;padding:0 12px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li{height:70px;margin-right:6px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:0 12px}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li div:last-child{margin-top:6px;font-size:14px;font-weight:500}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current{color:#ff6022}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current span{position:relative}.plugin_ctrl_mod_overlay_wrapper .mod_speed_select li.current span:after{content:"";width:100%;height:3px;background:#ff6022;position:absolute;bottom:-3px;left:0}.plugin_ctrl_mod_overlay_wrapper .txp_btn_playrate{position:relative;width:55px;height:44px;color:#fff;white-space:nowrap;text-align:center;-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.plugin_ctrl_txp_mode_fullscreen .plugin_ctrl_mobile_txp_bottom{padding-bottom:env(safe-area-inset-bottom)}';function adaptMobileAdPlugin(G,U){!uaTool.mobile||(U.on(H5_PLAY_EVENT.AD_PLAYING,function(){return G.hide(!0)}),U.on(H5_PLAY_EVENT.AD_END,function(){return G.el.style.display=""}))}var Component=function(){function G(U,L,Y){var X;this.player=U,this.config=Y,this.CLICK_EVENT_NAME="click",this.eventMap={};var W=U.container;this.el=W.querySelector(L),this.isMobile=Y==null?void 0:Y.isMobile,this.isLive=((X=this.player.config)===null||X===void 0?void 0:X.type)==="live",this.showEl()}return G.prototype.destroy=function(){var U;!((U=this.el)===null||U===void 0)&&U.parentNode&&this.el.remove(),this.setEvts(!0),this.el=null,this.player=null},G.prototype.setEvts=function(U){var L=this;U===void 0&&(U=!1);var Y=U?this.player.off:this.player.on;Object.keys(this.eventMap).forEach(function(X){Y.call(L.player,X,L.eventMap[X])})},G.prototype.showEl=function(U){U===void 0&&(U=this.el),U&&U.classList.remove(G.hideClassName)},G.prototype.hideEl=function(U){U===void 0&&(U=this.el),U&&U.classList.add(G.hideClassName)},G.sel="",G.disabledClassName="txp_disabled",G.curClassName="txp_current",G.hideClassName="txp_none",G}();function onBtnClickPlay(G,U){U.isInRequest?G.triggerAutoplay().then(function(){return G.play()}):G.play()}var CenterBtn=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,U.sel,Y)||this;return W.config=Y,W.ctrlbar=X,W.prepareDOM(),W.initDOMEvents(),W.initPlayerEvents(),W}return U.prototype.initDOMEvents=function(){var L=this;this.playBtn.addEventListener("click",function(){L.hideEl(L.playBtn),onBtnClickPlay(L.player,L.ctrlbar)}),this.replayBtn.addEventListener("click",function(){L.hideEl(L.replayBtn),L.player.replay()})},U.prototype.initPlayerEvents=function(){var L=this,Y=this.player,X=function(){L.config.showCenterPlayBtn&&L.showEl(L.playBtn)};X(),Y.on(H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,function(W){var z=W.data;z.adType===AD_TYPE.PRE&&X()}),Y.on(H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,X),Y.on(H5_PLAY_EVENT.AD_PLAYING,function(){return L.hideEl(L.playBtn)}),Y.on(H5_PLAY_EVENT.VIDEO_PLAYING,function(W){var z=W.data;!z.isFirst||L.hideEl(L.playBtn)}),Y.on(H5_PLAY_EVENT.PLAY_SESSION_END,function(W){var z=W.data;L.hideEl(L.playBtn),!(!L.config.showCenterReplayBtn||z.endState!==END_STATE.NORMAL)&&L.showEl(L.replayBtn)}),Y.on(H5_PLAY_EVENT.PLAY_SESSION_START,function(){L.hideEl(L.replayBtn)})},U.prototype.prepareDOM=function(){var L='<div class="'+(""+U.sel.slice(1))+`">
      <div class="btn_play `+Component.hideClassName+`">
        <svg class="icon_play" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="50" style="fill:#222;fill-opacity:0.75"></circle>
          <path
            transform="translate(36, 33)"
            d="M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z"
            style="fill:#fff;"
          />
        </svg>
      </div>

      <div class="btn_replay `+Component.hideClassName+`">
        <svg class="icon_replay" viewBox="0 0 30 30">
          <use xlink:href="#txp_svg_replay"></use>
        </svg>
        <div>\u91CD\u65B0\u64AD\u653E</div>
      </div>
    </div>`;this.ctrlbar.el.insertAdjacentHTML("beforebegin",L),this.el=this.player.container.querySelector(U.sel),this.playBtn=this.el.querySelector(".btn_play"),this.replayBtn=this.el.querySelector(".btn_replay")},U.sel=".plugin_ctrl_center_btn",U.compName="CenterBtn",U}(Component),HOTPOINT_EVENTS$2;(function(G){G.HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",G.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",G.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout"})(HOTPOINT_EVENTS$2||(HOTPOINT_EVENTS$2={}));var isMobile$1=/mobile/i.test(navigator.userAgent),CtrlbarPluginName$2="ctrlbar",CTRL_EVENTS$2=__assign$a(__assign$a({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},HOTPOINT_EVENTS$2),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),pcRootClassName$1=".plugin_ctrl_txp_bottom",mobileRootClassName$1=".plugin_ctrl_mobile_txp_bottom",getRootClassName$1=function(G){return G?mobileRootClassName$1:pcRootClassName$1},shadowClassName$1=".plugin_ctrl_txp_shadow",gradientClassName$1=".plugin_ctrl_txp_gradient_bottom",containerClassName$1="_mod_thumbplayer_container_",largeSizeClassName$1="plugin_ctrl--large",bodyOverflowClassName$1="plugin_ctrl_fake_fullscreen",CTRL_SIZE$2;(function(G){G.LARGE="large",G.NORMAL="normal"})(CTRL_SIZE$2||(CTRL_SIZE$2={}));var PlayBtnStatus$2;(function(G){G.PAUSE="pause",G.PLAY="play",G.REPLAY="replay",G.STOP="stop"})(PlayBtnStatus$2||(PlayBtnStatus$2={}));var FakeFullscreen=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,U.sel,Y)||this;return W.ctrlbar=X,W.tip=W.el.querySelector(".txp_tooltip"),W.el.classList.remove(Component.hideClassName),W.setupDOMEvents(),W.ctrlbar.on(CTRL_EVENTS$2.FULLSCREEN_CHANGE,function(z){var J=z.data;J&&W.requestFullScreen("exit")}),W}return Object.defineProperty(U.prototype,"isFullScreen",{get:function(){return this.player.container.classList.contains(U.fullscreenClassName)},enumerable:!1,configurable:!0}),U.prototype.setTipStatus=function(L){this.el.dataset.status=String(L),this.isMobile||(this.tip.innerText=L?"\u9000\u51FA\u7F51\u9875\u5168\u5C4F":"\u7F51\u9875\u5168\u5C4F")},U.prototype.requestFullScreen=function(L){L===void 0&&(L="enter");var Y=this.player.container,X=L==="enter";Y.classList.toggle(U.fullscreenClassName,X),this.setTipStatus(X),this.ctrlbar.emit(CTRL_EVENTS$2.FAKE_FULLSCREEN_CHANGE,X)},U.prototype.setupDOMEvents=function(){var L=this;this.el.addEventListener(this.CLICK_EVENT_NAME,function(){L.player.setStateKv("ctrlbar:"+U.compName+":"+L.CLICK_EVENT_NAME,{type:LOG_TYPE.USER_ACTION}),L.requestFullScreen(L.isFullScreen?"exit":"enter")}),this.isMobile||(this.el.addEventListener("mouseover",function(){L.showEl(L.tip)}),this.el.addEventListener("mouseout",function(){L.hideEl(L.tip)}))},U.sel=".txp_right_controls .txp_btn_fake",U.fullscreenClassName="plugin_ctrl_txp_mode_fullscreen",U.compName="FakeFullscreen",U}(Component),fullscreenEvents=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],Fullscreen=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,U.sel,Y)||this;return W.ctrlbar=X,W.onFullscreenChange=function(){var z=W.isFullScreen;W.setDOMStatus(z?FullscreenStatus.Exit:FullscreenStatus.Enter),W.ctrlbar.emit(CTRL_EVENTS$2.FULLSCREEN_CHANGE,z)},W.tip=W.el.querySelector(".txp_tooltip"),W.setupDOMEvents(),W.isMobile||W.listenDblclick(),W.ctrlbar.on(CTRL_EVENTS$2.FAKE_FULLSCREEN_CHANGE,function(z){var J=z.data;J&&W.requestFullScreen("exit")}),W}return Object.defineProperty(U.prototype,"isFullScreen",{get:function(){var L=document,Y=L.mozFullScreen||L.webkitIsFullScreen;if(!Y)return!1;var X=L.fullscreenElement||L.webkitFullscreenElement||L.mozFullScreenElement||L.msFullscreenElement;return X===this.player.container||X===document},enumerable:!1,configurable:!0}),U.prototype.setDOMStatus=function(L){this.el.dataset.status=L,this.isMobile||(this.tip.innerText=L===FullscreenStatus.Exit?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F")},U.prototype.requestFullScreen=function(L){var Y=this,X;L===void 0&&(L="enter");var W=function(re){var ie;return(ie=re.requestFullscreen||re.mozRequestFullScreen||re.webkitRequestFullscreen||re.webkitRequestFullscreen||re.msRequestFullscreen)===null||ie===void 0?void 0:ie.bind(re)},z=function(re){var ie;return(ie=re.cancelFullScreen||re.mozCancelFullScreen||re.webkitCancelFullScreen||re.exitFullscreen||re.webkitExitFullscreen||re.msExitFullscreen)===null||ie===void 0?void 0:ie.bind(re)},J=W(this.player.container)||W(document),Z=z(this.player.container)||z(document),ee=L==="enter",te=ee?J:Z;try{(X=te())===null||X===void 0||X.catch(function(re){console.log("fullscreen error:",re),Y.ctrlbar.emit(CTRL_EVENTS$2.FULLSCREEN_ERROR,re)})}catch(re){ee?this.videoRequestFullScreen():this.videoExitFullScreen()}},U.prototype.videoRequestFullScreen=function(){var L=this.player.currentVideoElement;if(!!L)try{if(L.requestFullscreen)L.requestFullscreen();else if(L.webkitEnterFullscreen)L.webkitEnterFullscreen();else if(L.webkitRequestFullScreen)L.webkitRequestFullScreen();else{var Y=new Error("videoRequestFullScreen: not support");this.ctrlbar.emit(CTRL_EVENTS$2.FULLSCREEN_ERROR,Y),console.error(Y)}}catch(X){this.ctrlbar.emit(CTRL_EVENTS$2.FULLSCREEN_ERROR,X)}},U.prototype.videoExitFullScreen=function(){var L,Y=this.player.currentVideoElement;!Y||(L=Y.webkitExitFullscreen)===null||L===void 0||L.call(Y)},U.prototype.destroy=function(){var L=this;fullscreenEvents.forEach(function(Y){document.removeEventListener(Y,L.onFullscreenChange)}),G.prototype.destroy.call(this)},U.prototype.listenDblclick=function(){var L=this;this.player.container.querySelector(shadowClassName$1).addEventListener("dblclick",function(){var Y;if(!((Y=L.ctrlbar.instances.FakeFullscreen)===null||Y===void 0)&&Y.isFullScreen){L.ctrlbar.instances.FakeFullscreen.requestFullScreen("exit");return}L.requestFullScreen(L.isFullScreen?"exit":"enter")})},U.prototype.setupDOMEvents=function(){var L=this;this.el.addEventListener("click",function(){L.player.setStateKv("ctrlbar:"+U.compName+":click",{type:LOG_TYPE.USER_ACTION,message:"fullscreen="+L.isFullScreen}),L.requestFullScreen(L.isFullScreen?"exit":"enter")}),this.isMobile||(this.el.addEventListener("mouseover",function(){return L.showEl(L.tip)}),this.el.addEventListener("mouseout",function(){return L.hideEl(L.tip)})),fullscreenEvents.forEach(function(Y){document.addEventListener(Y,L.onFullscreenChange)})},U.sel=".txp_right_controls .txp_btn_fullscreen",U.compName="Fullscreen",U}(Component),FullscreenStatus;(function(G){G.Enter="false",G.Exit="true"})(FullscreenStatus||(FullscreenStatus={}));var HOTPOINT_TIP_TYPE;(function(G){G.DEFAULT="default",G.WITH_PREVIEW="with-preview",G.NONE="none"})(HOTPOINT_TIP_TYPE||(HOTPOINT_TIP_TYPE={}));var THROTTLE_WAIT=16.6,mouseEvtMap={mouseover:HOTPOINT_EVENTS$2.HOT_MOUSE_OVER,mousemove:HOTPOINT_EVENTS$2.HOT_MOUSE_MOVE,mouseout:HOTPOINT_EVENTS$2.HOT_MOUSE_OUT},HotPoint=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;return z.ctrlbar=X,z.hotPointMap={},z.isReady=!1,z.onVideoCanPlay=function(){z.isReady||(z.isReady=!0,z.renderDom())},z.onPlaySessionEnd=function(){z.isReady=!1,z.tipEl.classList.add(U.hideClassName),z.clearHotPoints()},z.config.hotPointTipType||(z.config.hotPointTipType=HOTPOINT_TIP_TYPE.DEFAULT),z.mouseEvtHandler=z.mouseEvtHandler.bind(z),z.mouseEvtFuncMap={mouseover:z.onMouseOver.bind(z),mousemove:lodash_throttle(z.onMouseMove.bind(z),THROTTLE_WAIT,{trailing:!1}),mouseout:z.onMouseOut.bind(z)},z.eventMap=(W={},W[H5_PLAY_EVENT.VIDEO_CANPLAY]=z.onVideoCanPlay,W[H5_PLAY_EVENT.PLAY_SESSION_END]=z.onPlaySessionEnd,W),z.config.hotPointTipType===HOTPOINT_TIP_TYPE.DEFAULT&&z.setupTip(),z.setEvts(!1),z.logger=new Logger(z.player.config.instanceId,"Ctrl:HotPoints"),z}return U.prototype.clearHotPoints=function(){Object.values(this.hotPointMap).forEach(function(L){var Y=L.el;Y instanceof HTMLElement&&Y.remove()}),this.hotPointMap={}},U.prototype.addHotPoints=function(L){var Y=this;if(!!(L!=null&&L.length)){var X=L.map(function(W){var z=__assign$a({},W);return z.uuid=comTool.createGUID(),Y.hotPointMap[z.uuid]=z,z});return this.isReady&&this.renderDom(),X}},U.prototype.deleteHotPoints=function(L){var Y=this;L.forEach(function(X){var W,z=Y.hotPointMap[X];!z||((W=z.el)===null||W===void 0||W.remove(),delete Y.hotPointMap[X])})},U.prototype.setEvts=function(L){var Y=this;L===void 0&&(L=!1);var X=L?this.el.removeEventListener:this.el.addEventListener;Object.keys(mouseEvtMap).forEach(function(W){X.call(Y.el,W,Y.mouseEvtHandler,!1)}),G.prototype.setEvts.call(this,L)},U.prototype.isValidHotPoint=function(L){return L.timing<=this.player.duration},U.prototype.renderDom=function(){var L=this;Object.entries(this.hotPointMap).forEach(function(Y){var X=Y[0],W=Y[1];if(!(W.el instanceof HTMLElement)){var z=L.createPointElement(W);!z||(L.el.insertAdjacentElement("beforeend",z),L.hotPointMap[X]=__assign$a(__assign$a({},W),{el:z}))}})},U.prototype.createPointElement=function(L){if(!this.isValidHotPoint(L)){this.logger.warn("ctrlbar: hotpoint \u5165\u503C\u975E\u6CD5\uFF0C\u5DF2\u5FFD\u7565",L);return}var Y=document.createElement("div"),X=L.timing/this.player.duration*100;return Y.classList.add(U.defaultPointClass),Y.style.left=X+"%",Y.dataset.info=JSON.stringify(L),Y},U.prototype.setupTip=function(){var L;this.config.hotPointCustomTipEl?L=this.config.hotPointCustomTipEl:(L=document.createElement("div"),L.classList.add(U.defaultTipClass)),L.classList.add(U.hideClassName),this.el.insertAdjacentElement("beforeend",L),this.tipEl=L},Object.defineProperty(U.prototype,"offsetLeft",{get:function(){return this.player.container.getBoundingClientRect().left},enumerable:!1,configurable:!0}),U.prototype.mouseEvtHandler=function(L){var Y=L.target.dataset;if(!!Y.info){var X=this.config.hotPointTipType,W=JSON.parse(Y.info);X===HOTPOINT_TIP_TYPE.DEFAULT&&this.mouseEvtFuncMap[L.type]({point:W,mouseEvent:L}),this.ctrlbar.emit(mouseEvtMap[L.type],{point:W,mouseEvent:L,hotPointTipType:X})}},U.prototype.onMouseOver=function(L){var Y=L.point;!this.tipEl||!Y.text||(this.tipEl.textContent=Y.text,this.tipEl.classList.remove(U.hideClassName))},U.prototype.onMouseMove=function(L){if(!!this.tipEl){var Y=L.mouseEvent,X=this.player.container,W=this.tipEl.getBoundingClientRect().width,z=Y.clientX-this.offsetLeft-W/2;z<0&&(z=0),z>X.clientWidth-W&&(z=X.clientWidth-W),this.tipEl.style.transform="translateX("+z+"px)"}},U.prototype.onMouseOut=function(){!this.tipEl||this.tipEl.classList.add(U.hideClassName)},U.sel=".txp_hotpoint",U.compName="HotPoint",U.defaultPointClass="txp_interact_dot",U.defaultTipClass="txp_hotpoint_tip",U}(Component),Progress=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;z.ctrlbar=X,z.isMouseDown=!1,z.maxPercent=1,z.isActive=!0,z.shouldHideHoverTime=!1,z.onMouseMove=function(Z){if(!!z.isMouseDown){var ee=Math.min(z.getPercentByClientX(Z),z.maxPercent);z.updateProgress(ee),z.ctrlbar.emit(CTRL_EVENTS$2.MOUSE_MOVE,ee),Z.preventDefault()}},z.onMouseUp=function(){if(!!z.isMouseDown){z.player.setStateKv("ctrlbar:"+U.compName+":"+(z.isMobile?"touchend":"mouseup"),{type:LOG_TYPE.USER_ACTION,eventId:z.evtId}),z.isMouseDown=!1;var Z=parseFloat(z.progressPlayed.style.width)/100;z.doSeek(Z),z.ctrlbar.emit(CTRL_EVENTS$2.MOUSE_UP,Z)}},z.onMouseDown=function(Z){if(z.evtId=z.player.dataset.generateEvtId(),z.player.setStateKv("ctrlbar:"+U.compName+":"+(z.isMobile?"touchstart":"mousedown"),{type:LOG_TYPE.USER_ACTION,eventId:z.evtId}),z.player.state!==VIDEO_STATE.IDLE){z.beforeSeek(),z.isMouseDown=!0;var ee=Math.min(z.getPercentByClientX(Z),z.maxPercent);z.updateProgress(ee),z.ctrlbar.emit(CTRL_EVENTS$2.MOUSE_DOWN,ee)}},z.eventMap=(W={},W[PLAY_EVENT.TIME_UPDATE]=z.onTimeUpdate.bind(z),W[PLAY_EVENT.STATE_CHANGE]=z.onStateChange.bind(z),W[PLAY_EVENT.VIDEO_BUFFER_CHANGE]=function(){return z.updateBufferedBar()},W),z.setEvts(),z.progressLoaded=z.el.querySelector(".txp_progress_load"),z.progressPlayed=z.el.querySelector(".txp_progress_play"),z.scrubber=z.el.querySelector(".txp_btn_scrubber"),z.tooltip=z.el.querySelector(".txp_tooltip");var J=45;return z.tooltipPosLimit=J/z.player.container.clientWidth/2*100+.5,z.isMobile&&z.el.appendChild(z.scrubber),z.el.addEventListener(z.isMobile?"touchstart":"mousedown",z.onMouseDown),document.addEventListener(z.isMobile?"touchmove":"mousemove",z.onMouseMove,{passive:!1}),document.addEventListener(z.isMobile?"touchend":"mouseup",z.onMouseUp),z.isMobile||(z.setTooltipOnHover(),z.el.addEventListener("mouseover",function(){X.emit(CTRL_EVENTS$2.HOVER_PROGRESS)})),z.listenReqInfoEnd(),z}return Object.defineProperty(U.prototype,"offsetLeft",{get:function(){return this.el.getBoundingClientRect().left},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"bufferedTime",{get:function(){var L=this,Y=this.player.videoBuffered,X=Y.length;if(X===1)return Y[0].end;var W=0;return Y.forEach(function(z,J){var Z=z.start,ee=z.end,te=L.player.playtime;if(te>=Z&&te<=ee)if(X>J+1)for(var re=J+1;re<X;re++){var ie=Y[re].start-Y[re-1].end;if(0<=ie&&ie<=.2)W=Y[re].end;else{W=Y[re-1].end;break}}else W=z.end}),W},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){document.removeEventListener(this.isMobile?"touchmove":"mousemove",this.onMouseMove),document.removeEventListener(this.isMobile?"touchend":"mouseup",this.onMouseUp),G.prototype.destroy.call(this)},U.prototype.setActive=function(L){this.isActive!==L&&(this.isActive=L,this.setEvts(!this.isActive),this.isActive?this.showEl():this.hideEl())},U.prototype.setTooltip=function(L){var Y=this,X=Y.tooltip,W=Y.tooltipPosLimit;X.innerText=comTool.formatPlayTime(L*this.ctrlbar.duration);var z=Math.max(W,Math.min(L*100,100-W));X.style.left=z+"%"},U.prototype.updateBufferedBar=function(L){if(L===void 0&&(L=this.bufferedTime),L===0){this.progressLoaded.style.width="0";return}if(!(!this.ctrlbar.duration||typeof L!="number")){var Y=Math.min(Math.round(L*100/this.ctrlbar.duration),this.maxPercent*100);Y>=99&&(Y=100),this.progressLoaded.style.width=Y+"%"}},U.prototype.updateProgress=function(L){if(!Number.isNaN(L)){var Y=L*100;this.progressPlayed.style.width=Y+"%",this.scrubber.style.left=Y+"%"}},U.prototype.getPercentByClientX=function(L){var Y=(this.isMobile?L.touches[0]:L).clientX,X=Y-this.offsetLeft;Math.abs(X-this.el.clientWidth)<=1&&(X=this.el.clientWidth);var W=X/this.el.clientWidth;return W=Math.max(0,Math.min(1,W)),W},U.prototype.onTimeUpdate=function(){if(!this.isMouseDown){var L=this.player.playtime/this.ctrlbar.duration;this.updateProgress(L),this.updateBufferedBar()}},U.prototype.onStateChange=function(L){var Y=L.data;[VIDEO_STATE.IDLE,VIDEO_STATE.END].indexOf(Y.new)!==-1&&(this.updateProgress(0),this.updateBufferedBar(0))},U.prototype.setTooltipOnHover=function(){var L=this;this.el.addEventListener("mouseover",function(Y){if(!L.config.hideHoverTime&&!(L.config.hideHoverTime===void 0&&L.shouldHideHoverTime)){var X=L.getPercentByClientX(Y);L.setTooltip(X),L.showEl(L.tooltip),L.tooltip.style.display="flex"}}),this.el.addEventListener("mouseout",function(){return L.hideEl(L.tooltip)}),this.el.addEventListener("mousemove",function(Y){var X=L.getPercentByClientX(Y);L.setTooltip(X)})},U.prototype.beforeSeek=function(){var L=this,Y=300;this.pauseTimer=window.setTimeout(function(){return L.player.pause()},Y)},U.prototype.doSeek=function(L){var Y=L*this.ctrlbar.duration;this.player.seek(Y),this.pauseTimer&&(window.clearTimeout(this.pauseTimer),this.pauseTimer=null),this.player.state===VIDEO_STATE.PAUSE&&!this.player.config.remainPauseStateAfterSeek&&this.player.play()},U.prototype.listenReqInfoEnd=function(){var L=this;this.player.pluginMsg.on(H5_EXT_EVENT.GETINFO_OVER,function(Y){var X,W,z,J=Y.data,Z=L.player.plugins,ee="ui-preview",te="ui-preview-list",re=Z[ee]||Z[te],ie=((X=J.parseData)===null||X===void 0?void 0:X.preview)>0;L.shouldHideHoverTime=!!(re&&!ie&&((z=(W=J.parseData)===null||W===void 0?void 0:W.previewList)===null||z===void 0?void 0:z.length))})},U.sel=".txp_progress_bar_container",U.compName="Progress",U}(Component),TIME_UPDATE_GAP_MS=200,PLAY_BACK_STATE;(function(G){G.IDLE="idle",G.BACK_PLAYING="backPlaying",G.LIVE_PLAYING="livePlaying"})(PLAY_BACK_STATE||(PLAY_BACK_STATE={}));var LiveProgress=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.ctrlbar=X,W.timeupdateTimerID=0,W.playbackState=PLAY_BACK_STATE.IDLE,W.maxBackDurationOverflow=!1,W.curBackDurationMS=0,W.liveStateTimeStr="",W.isSwitchBackOp=!1,W.addReturnLiveBtn(),W.addLiveTimeDisplay(),W.setActive(!1),W.addPlayerEvts(),W}return U.prototype.destroy=function(){var L,Y;!((L=this.liveTimeDisplayDom)===null||L===void 0)&&L.parentNode&&(this.liveTimeDisplayDom.remove(),this.liveTimeDisplayDom=null),!((Y=this.returnLiveBtn)===null||Y===void 0)&&Y.parentNode&&(this.returnLiveBtn.remove(),this.returnLiveBtn=null),this.setTimeupdateTimer(!1),G.prototype.destroy.call(this)},U.prototype.setActive=function(L){G.prototype.setActive.call(this,L),this.liveTimeDisplayDom.style.display=L?"flex":"none",this.hideEl(this.returnLiveBtn)},U.prototype.setTooltip=function(L){var Y=this,X=Y.tooltip,W=Y.tooltipPosLimit,z=Math.max(W,Math.min(L*100,100-W)),J=this.getTimeTip(L);X.style.left=z+"%",X.innerText=J},U.prototype.updateBufferedBar=function(L){},U.prototype.onTimeUpdate=function(){},U.prototype.onStateChange=function(){},U.prototype.beforeSeek=function(){},U.prototype.doSeek=function(L){this.seek(L)},U.prototype.addLiveTimeDisplay=function(){var L=this.ctrlbar.el.querySelector(".txp_left_controls"),Y=`<txpdiv class="txp_time_display txp_time_display_live" style="display: none;">
      <txpdiv class="txp_live_badge" style="display: block">\u76F4\u64AD\u4E2D</txpdiv>
    </txpdiv>`;this.liveTimeDisplayDom=domTool.creatDom(Y),this.liveBadgeDom=this.liveTimeDisplayDom.querySelector(".txp_live_badge"),L.append(this.liveTimeDisplayDom)},U.prototype.addReturnLiveBtn=function(){var L=this,Y=this.ctrlbar.el.querySelector(".txp_left_controls"),X=`<txpdiv class="txp_btn txp_btn_return txp_none">
      <txpdiv class="txp_label">\u8FD4\u56DE\u76F4\u64AD</txpdiv>
    </txpdiv>`;this.returnLiveBtn=domTool.creatDom(X),Y.append(this.returnLiveBtn),this.returnLiveBtn.addEventListener("click",function(){L.seek(1)})},U.prototype.updateLiveTime=function(L,Y){Y===void 0&&(Y=""),domTool.text(this.liveBadgeDom,L+" "+Y)},U.prototype.setPlayBackState=function(L){L?(domTool.addClass(this.liveBadgeDom,"txp_live_badge_back"),this.showEl(this.returnLiveBtn)):(domTool.removeClass(this.liveBadgeDom,"txp_live_badge_back"),this.hideEl(this.returnLiveBtn))},U.prototype.addPlayerEvts=function(){var L=this;this.player.on(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(Y){var X,W=Y.data,z=W.data,J=(z||{}).resData;if(L.clientStartTimeMS=Date.now(),L.playbackData=(X=J)===null||X===void 0?void 0:X.playback,!L.playbackData){L.setPlayBackEnabled(!1);return}L.playbackState===PLAY_BACK_STATE.IDLE&&(L.setPlayBackEnabled(!0),L.player.loadParam.videoReqInfoParam.playbacktime>0?L.enterState(PLAY_BACK_STATE.BACK_PLAYING):L.enterState(PLAY_BACK_STATE.LIVE_PLAYING))}),this.player.on(H5_PLAY_EVENT.PLAY_SESSION_END,function(){if(L.isSwitchBackOp){L.isSwitchBackOp=!1;return}L.enterState(PLAY_BACK_STATE.IDLE)}),this.player.on(H5_PLAY_EVENT.VIDEO_PLAYING,function(){L.isSwitchBackOp=!1})},U.prototype.setPlayBackEnabled=function(L){this.setActive(L),this.setTimeupdateTimer(L)},U.prototype.enterState=function(L,Y){if(!!this.playbackData&&this.playbackState!==L){var X=this.playbackState;if(this.playbackState=L,X===PLAY_BACK_STATE.IDLE&&L===PLAY_BACK_STATE.LIVE_PLAYING){this.updateProgress(1);return}if(X===PLAY_BACK_STATE.LIVE_PLAYING&&L===PLAY_BACK_STATE.BACK_PLAYING){this.enterBackPlaying(Y);var W=Y.backDurationMS,z=this.calcBackAbsoluteTimeS(Date.now(),W);this.switchPlay(z);return}if(X===PLAY_BACK_STATE.BACK_PLAYING&&L===PLAY_BACK_STATE.LIVE_PLAYING){this.exitBackPlaying(),this.switchPlay(0);return}L===PLAY_BACK_STATE.IDLE&&(this.exitBackPlaying(),this.setPlayBackEnabled(!1))}},U.prototype.switchPlay=function(L){var Y=this;this.isSwitchBackOp=!0;var X=function(){Y.player.play(Y.player.vid,{videoReqInfoParam:__assign$a(__assign$a({},Y.player.loadParam.videoReqInfoParam),{playbacktime:L})})};this.player.once(H5_PLAY_EVENT.PLAY_SESSION_END,X),this.player.stop()},U.prototype.seekInBackState=function(L){var Y=L.backDurationMS,X=this.calcBackAbsoluteTimeS(Date.now(),Y),W=this.player.currentVideoInfo.loadingUrl,z=urlTool.updateUrlParam(W,"wsStreamTimeABS",""+X);this.curBackDurationMS=Y,this.isSwitchBackOp=!0,this.player._kernel.play({url:z})},U.prototype.enterBackPlaying=function(L){var Y=L.backDurationMS;this.curBackDurationMS=Y,this.setPlayBackState(!0),this.updateLiveTime("\u56DE\u770B\u4E2D")},U.prototype.exitBackPlaying=function(){this.updateProgress(1),this.setPlayBackState(!1),this.curBackDurationMS=0,this.player.loadParam.videoReqInfoParam.playbacktime=0,this.updateLiveTime("\u76F4\u64AD\u4E2D")},U.prototype.setTimeupdateTimer=function(L){L?this.timeupdateTimerID===0&&(this.timeupdateTimerID=window.setInterval(this.onTimeupdate.bind(this),TIME_UPDATE_GAP_MS)):this.timeupdateTimerID>0&&(window.clearInterval(this.timeupdateTimerID),this.timeupdateTimerID=0)},U.prototype.calcMaxBackDurationS=function(L){var Y=this.playbackData.playbacktime;if(this.maxBackDurationOverflow)return Y;var X=this.calcStreamAbsoluteDurationMS(L)/1e3;return X<Y?(this.maxBackDurationOverflow=!1,X):(this.maxBackDurationOverflow=!0,Y)},U.prototype.calcAbsoluteTimeMS=function(L){return this.playbackData.svrtick*1e3+(L-this.clientStartTimeMS)},U.prototype.calcStreamAbsoluteDurationMS=function(L){return this.calcAbsoluteTimeMS(L)-this.playbackData.playbackstart*1e3},U.prototype.calcBackAbsoluteTimeS=function(L,Y){return Math.round((this.calcAbsoluteTimeMS(L)-Y)/1e3)},U.prototype.onTimeupdate=function(){if(!this.isMouseDown&&this.player.state===VIDEO_STATE.PLAYING){var L="",Y="",X=Date.now(),W=this.calcStreamAbsoluteDurationMS(X);if(this.playbackState===PLAY_BACK_STATE.BACK_PLAYING){var z=this.calcMaxBackDurationS(X),J=(W-this.curBackDurationMS)/1e3,Z=this.calcBackAbsoluteTimeS(X,this.curBackDurationMS);if(this.player.loadParam.videoReqInfoParam.playbacktime=Z,Y="\u56DE\u770B\u4E2D",L=""+comTool.formatPlayTime(J),!this.maxBackDurationOverflow){var ee=(z-this.curBackDurationMS/1e3)/z;this.updateProgress(ee)}}else Y="\u76F4\u64AD\u4E2D",L=""+comTool.formatPlayTime(W/1e3);this.liveStateTimeStr!==L&&(this.liveStateTimeStr=L,this.updateLiveTime(Y,L))}},U.prototype.calcPercent2BackTimeS=function(L){var Y=this.calcMaxBackDurationS(Date.now()),X=(1-L)*Y;return X},U.prototype.getTimeTip=function(L){var Y=this.calcPercent2BackTimeS(L),X=comTool.formatPlayTime(Y);return"\u56DE\u9000"+X},U.prototype.seek=function(L){if(L===1){this.enterState(PLAY_BACK_STATE.LIVE_PLAYING);return}var Y=this.calcPercent2BackTimeS(L)*1e3;this.playbackState===PLAY_BACK_STATE.LIVE_PLAYING?this.enterState(PLAY_BACK_STATE.BACK_PLAYING,{backDurationMS:Y}):this.playbackState===PLAY_BACK_STATE.BACK_PLAYING&&this.seekInBackState({backDurationMS:Y})},U}(Progress),LoopStatus;(function(G){G.Loop="true",G.NotLoop="false"})(LoopStatus||(LoopStatus={}));var LocalLoopConfigKey="thumbplayer-h5-loop",Loop=function(G){__extends$b(U,G);function U(L,Y){var X=G.call(this,L,U.sel,Y)||this;return X.tip=X.el.querySelector(".txp_tooltip"),X.setupDOMEvents(),X.initLoopConfig(),X}return Object.defineProperty(U.prototype,"isLoopMode",{get:function(){return this.el.dataset.status===LoopStatus.Loop},set:function(L){this.player.config.loop=L,this.el.dataset.status=String(L),this.tip.innerText=L?"\u5173\u95ED\u5FAA\u73AF\u64AD\u653E":"\u6253\u5F00\u5FAA\u73AF\u64AD\u653E"},enumerable:!1,configurable:!0}),U.prototype.setupDOMEvents=function(){var L=this;this.el.addEventListener(this.CLICK_EVENT_NAME,function(){L.isLoopMode=!L.isLoopMode,lsTool.setData(LocalLoopConfigKey,L.isLoopMode?LoopStatus.Loop:LoopStatus.NotLoop)})},U.prototype.initLoopConfig=function(){var L=this.player.config.loop;if(typeof L!="undefined"){this.isLoopMode=!!L;return}var Y=lsTool.getData(LocalLoopConfigKey);Y&&(this.isLoopMode=Y===LoopStatus.Loop)},U.compName="Loop",U.sel=".txp_left_controls .txp_btn_loop",U}(Component),NextBtn=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;z.ctrlbar=X;var J=Y.showNextBtnUIOnly;return J?z.el.classList.remove(Component.disabledClassName):(z.onVideoNodeChange=z.onVideoNodeChange.bind(z),z.eventMap=(W={},W[PLAY_EVENT$1.VIDEONODE_CHANGE]=z.onVideoNodeChange,W[PLAY_EVENT$1.LIST_CHANGE]=z.onVideoNodeChange,W),z.setEvts()),z.el.addEventListener(z.CLICK_EVENT_NAME,function(){if(z.player.setStateKv("ctrlbar:"+U.compName+":"+z.CLICK_EVENT_NAME,{type:LOG_TYPE.USER_ACTION}),z.ctrlbar.emit(CTRL_EVENTS$2.CLICK_NEXTBTN),!J){var Z=z.player.currentVideoInfoIdx;Z===-1||Z>=z.player.totalVideoInfoCount-1||z.player.playNext()}}),z}return U.prototype.onVideoNodeChange=function(){var L=this.player.currentVideoInfoIdx;L!==-1&&L+1<this.player.totalVideoInfoCount?this.el.classList.remove(Component.disabledClassName):this.el.classList.add(Component.disabledClassName)},U.sel=".txp_left_controls .txp_btn_next",U.compName="NextBtn",U}(Component),PictureInPicture=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,U.sel,Y)||this;return W.ctrlbar=X,W.isPiP=!1,W.onEnterPiP=function(){W.isPiP=!0,W.setDOMStatus(!1)},W.onLeavePiP=function(){W.isPiP=!1,W.setDOMStatus(!0)},typeof HTMLVideoElement.prototype.requestPictureInPicture=="undefined"?(W.el.classList.add(Component.hideClassName),W):(W.setupDOMEvents(),W.setupPlayerEvents(),W.tooltip=W.el.querySelector(".txp_tooltip"),W)}return U.prototype.enterPicInPic=function(){var L=this.player.currentVideoElement;!L||(L.requestPictureInPicture(),this.setDOMStatus(!1))},U.prototype.leavePicInPic=function(){var L,Y;(Y=(L=document.exitPictureInPicture())===null||L===void 0?void 0:L.catch)===null||Y===void 0||Y.call(L,function(){}),this.setDOMStatus(!0)},U.prototype.destroy=function(){this.setupVideoListener(!1),G.prototype.destroy.call(this)},U.prototype.setupDOMEvents=function(){var L=this;this.el.addEventListener("click",function(){L.isPiP?(L.leavePicInPic(),L.isPiP=!1):(L.enterPicInPic(),L.isPiP=!0),L.ctrlbar.emit(CTRL_EVENTS$2.CLICK_PIPBTN,L.isPiP)})},U.prototype.setupPlayerEvents=function(){var L=this;this.player.on(H5_PLAY_EVENT.VIDEO_PLAYING,function(Y){var X=Y.data;if(!!X.isFirst){var W=L.player.currentVideoElement;W instanceof HTMLVideoElement&&W.requestPictureInPicture?(L.el.classList.remove(Component.hideClassName),L.setVideoPip()):L.el.classList.add(Component.hideClassName)}}),this.player.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(Y){var X=Y.data;X.code===ErrorCode.SUC&&L.player.config.setLevelMode!=="smooth"&&L.setVideoPip()})},U.prototype.setVideoPip=function(){this.isPiP&&this.enterPicInPic(),this.setupVideoListener(!1),this.setupVideoListener(!0)},U.prototype.setupVideoListener=function(L){L===void 0&&(L=!0);var Y=this.player.currentVideoElement;if(!!Y){var X=L?Y.addEventListener:Y.removeEventListener;X.call(Y,"enterpictureinpicture",this.onEnterPiP),X.call(Y,"leavepictureinpicture",this.onLeavePiP)}},U.prototype.setDOMStatus=function(L){this.tooltip.innerText=L?"\u753B\u4E2D\u753B":"\u9000\u51FA\u753B\u4E2D\u753B",this.el.dataset.status=String(!L)},U.sel=".txp_right_controls .txp_btn_pip",U.compName="PictureInPicture",U}(Component);function showTips(G,U){var L=G.plugins.tips;typeof(L==null?void 0:L.show)=="function"&&L.show(U)}function getIsInAd(G){var U=G,L=U.flowManager,Y=U.videoNode,X=getAdPlugin(G.config.instanceId);return!!(X&&Y&&Y!==L.currentFlowNode)}var PlayBtn=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;return z.ctrlbar=X,z.onPlaySessionStart=function(){z.el.dataset.status=PlayBtnStatus$2.PLAY,z.tooltip.innerText="\u64AD\u653E"},z.onPlaySessionEnd=function(){z.el.dataset.status=z.isLive?PlayBtnStatus$2.PLAY:PlayBtnStatus$2.REPLAY,z.tooltip.innerText="\u64AD\u653E"},z.eventMap=(W={},W[PLAY_EVENT.STATE_CHANGE]=z.onPlayerStateChange.bind(z),W[H5_PLAY_EVENT.PLAY_SESSION_START]=z.onPlaySessionStart,W[H5_PLAY_EVENT.PLAY_SESSION_END]=z.onPlaySessionEnd,W),z.setEvts(),z.tooltip=z.el.querySelector(".txp_tooltip"),z.addEventListener(),z}return U.prototype.addEventListener=function(){var L=this,Y=this.player;this.el.addEventListener("click",function(){if(Y.setStateKv("ctrlbar:"+U.compName+":"+L.CLICK_EVENT_NAME,{type:LOG_TYPE.USER_ACTION}),!L.el.classList.contains(Component.disabledClassName)){L.ctrlbar.emit(CTRL_EVENTS$2.CLICK_PLAYBTN,L.el.dataset);var X=L.el.dataset.status;switch(X){case PlayBtnStatus$2.PAUSE:Y.pause(H5_PAUSE_TYPE.USER_CLICK);break;case PlayBtnStatus$2.STOP:Y.stop();break;case PlayBtnStatus$2.PLAY:if(!L.isLive)return onBtnClickPlay(Y,L.ctrlbar);L.replay();break;case PlayBtnStatus$2.REPLAY:L.ctrlbar.emit(CTRL_EVENTS$2.CLICK_REPLAY),L.replay();break}}})},U.prototype.replay=function(){var L=this.player;L.vid&&L.videoReqInfoPlugin?L.triggerAutoplay().then(function(){return L.replay()}):L.replay()},U.prototype.onVodPlaying=function(){var L=this,Y=L.el,X=L.tooltip;Y.dataset.status=PlayBtnStatus$2.PAUSE,X.innerText="\u6682\u505C"},U.prototype.onLivePlaying=function(){var L=this,Y=L.el,X=L.tooltip,W=function(){Y.dataset.status=PlayBtnStatus$2.STOP,X.innerText="\u505C\u6B62"};getIsInAd(this.player)?this.player.once(H5_PLAY_EVENT.AD_END,W):W()},U.prototype.onPlayerStateChange=function(L){var Y=L.data,X=Y.new,W=this,z=W.el,J=W.tooltip;switch(X){case VIDEO_STATE.PLAYING:this.isLive?this.onLivePlaying():this.onVodPlaying();break;case VIDEO_STATE.PAUSE:case VIDEO_STATE.CANPLAY:z.dataset.status=PlayBtnStatus$2.PLAY,J.innerText="\u64AD\u653E";break}},U.sel=".txp_left_controls .txp_btn_play",U.compName="PlayBtn",U}(Component),_a$1$1,VALID_POPUP;(function(G){G.DEFINITION="definition",G.LANGUAGE="language",G.PLAYRATE="playrate",G.AUDIO_TRACK="audiotrack"})(VALID_POPUP||(VALID_POPUP={}));var POPUP_MOD_SEL=(_a$1$1={},_a$1$1[VALID_POPUP.DEFINITION]=".mod_overlay.definition",_a$1$1[VALID_POPUP.LANGUAGE]=".mod_overlay.language",_a$1$1[VALID_POPUP.PLAYRATE]=".mod_overlay.playrate",_a$1$1),Popup=function(G){__extends$b(U,G);function U(L,Y,X,W){var z,J=G.call(this,L,Y,X)||this;return J.ctrlbar=W,J.onFirstPlaying=function(){J.el.classList.remove(Component.disabledClassName)},J.hideEl(),J.eventMap=(z={},z[PLAY_EVENT.STATE_CHANGE]=J.onPlayerStateChange.bind(J),z[PLAY_EVENT.FIRST_PLAYING]=J.onFirstPlaying,z),J.setEvts(),J.popupName=X.popupName,J.popup=J.isMobile?J.player.container.querySelector(POPUP_MOD_SEL[X.popupName]):J.el.querySelector(".txp_popup"),J.el&&(J.label=J.el.querySelector(".txp_label"),J.isMobile?J.label.addEventListener(J.CLICK_EVENT_NAME,function(){var Z=!J.popup.classList.contains(Component.hideClassName);Z?J.hideEl(J.popup):(J.showEl(J.popup),J.popup.classList.add("overlay_flex")),J.ctrlbar.emit(CTRL_EVENTS$2.TOGGLE_OVERLAY,!0),J.hideEl(J.ctrlbar.el)}):(J.label.addEventListener("mouseover",function(){return J.showEl(J.popup)}),J.el.addEventListener("mouseleave",function(){J.hideEl(J.popup)})),J.initItemClick()),J}return Object.defineProperty(U.prototype,"curClass",{get:function(){return this.isMobile?"current":Component.curClassName},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"selected",{get:function(){return this.selectedValue},set:function(L){var Y,X=(Y=this.popupOptions)===null||Y===void 0?void 0:Y.find(function(W){return String(W.value)===String(L)});if(this.selectedValue=L,!X){this.label.textContent="",this.hideEl();return}this.showEl(),this.setCurrent(X)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"popupOptions",{get:function(){return this.allValue},set:function(L){var Y=this,X=L.find(function(Z){return String(Z.value)===String(Y.selectedValue)});X?(this.setCurrent(X),this.showEl()):this.label.textContent="",this.allValue=L;var W=this.isMobile?"li":"div",z=/(<([^>]+)>)/,J=function(Z){return"<"+W+` 
      class="txp_menuitem `+(Z.value===Y.selected?Y.curClass:"")+`" 
      data-label="`+(z.test(Z.label)?"":Z.label)+`"
      data-value="`+Z.value+`" 
      data-payload="`+(Z.payload||"")+'">'+Z.label+"</"+W+">"};this.popup.querySelector(this.isMobile?".select_list":".txp_popup_content").innerHTML=L.map(J).join("")},enumerable:!1,configurable:!0}),U.prototype.setCurrent=function(L){var Y=this,X;this.label.innerHTML=(X=L==null?void 0:L.btnLabel)!==null&&X!==void 0?X:L==null?void 0:L.label,this.popup.querySelectorAll(".txp_menuitem").forEach(function(W){var z=W.getAttribute("data-value");z===String(L.value)?W.classList.add(Y.curClass):W.classList.remove(Y.curClass)})},U.prototype.onPlayerStateChange=function(L){var Y=L.data;!this.el||[VIDEO_STATE.IDLE,VIDEO_STATE.END].indexOf(Y.new)!==-1&&this.el.classList.add(Component.disabledClassName)},U.prototype.initItemClick=function(){var L=this;this.popup.addEventListener(this.CLICK_EVENT_NAME,function(Y){var X,W;L.player.setStateKv("ctrlbar:"+L.popupName+":"+L.CLICK_EVENT_NAME,{type:LOG_TYPE.USER_ACTION});for(var z=Y.target;z&&!(!((X=z.classList)===null||X===void 0)&&X.contains("txp_menuitem"));)z=z.parentNode;L.isMobile&&(L.hideEl(L.popup),L.popup.classList.remove("overlay_flex"),L.ctrlbar.emit(CTRL_EVENTS$2.TOGGLE_OVERLAY,!1));var J=z==null?void 0:z.dataset;!(J!=null&&J.value)||J.value===String(L.selected)||((W=L.onSelect)===null||W===void 0||W.call(L,J),L.config.hidePopupOnClick&&L.hideEl(L.popup))})},U}(Component),TimeArea=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;z.ctrlbar=X,z.clickCount=0,z.clickTimer=0,z.onMouseup=function(){z.isMouseDown=!1},z.onMousemove=function(te){var re=te.data;z.timeCur.innerText=comTool.formatPlayTime(re*z.ctrlbar.duration)},z.onMousedown=function(te){var re=te.data;z.isMouseDown=!0,z.timeCur.innerText=comTool.formatPlayTime(re*z.ctrlbar.duration)};var J=CTRL_EVENTS$2.MOUSE_DOWN,Z=CTRL_EVENTS$2.MOUSE_MOVE,ee=CTRL_EVENTS$2.MOUSE_UP;return z.eventMap=(W={},W[PLAY_EVENT.DURATION_CHANGE]=z.onDurationChange.bind(z),W[PLAY_EVENT.TIME_UPDATE]=z.onTimeUpdate.bind(z),W[PLAY_EVENT.STATE_CHANGE]=z.onPlayerStateChange.bind(z),W),z.setEvts(),X.on(J,z.onMousedown),X.on(Z,z.onMousemove),X.on(ee,z.onMouseup),z.timeCur=z.el.querySelector(".txp_time_current"),z.timeDur=z.el.querySelector(".txp_time_duration"),Y.disableTestEvent||z.bindClickOnMobile(),z}return U.prototype.bindClickOnMobile=function(){var L=this;if(!!this.isMobile){var Y=5,X=300;this.el.addEventListener("click",function(){L.clickCount+=1,L.clickCount>=Y&&(L.clickCount=0,L.ctrlbar.emit(CTRL_EVENTS$2.TEST_EVENT)),L.clickTimer&&clearTimeout(L.clickTimer),L.clickTimer=window.setTimeout(function(){L.clickCount=0},X)})}},U.prototype.onPlayerStateChange=function(L){var Y=L.data,X=Y.new;X===VIDEO_STATE.IDLE&&(this.timeCur.innerText="00:00")},U.prototype.onDurationChange=function(){var L=this.ctrlbar.duration;this.timeDur.innerText=comTool.formatPlayTime(L),this.el.classList.toggle("reach_hour",L>=3600)},U.prototype.onTimeUpdate=function(){if(!this.isMouseDown){var L=comTool.formatPlayTime(this.player.playtime);this.timeCur.innerText!==L&&(this.timeCur.innerText=L)}},U.sel=".txp_left_controls .txp_time_display",U.compName="TimeArea",U}(Component),VolumeStatus;(function(G){G.Mute="mute",G.Normal="normal"})(VolumeStatus||(VolumeStatus={}));var LOCAL_KEY={VOLUME:"thumbplayer-h5-volume",MUTED:"thumbplayer-h5-volume:muted"},MutedStatus;(function(G){G.muted="true",G.unmuted="false"})(MutedStatus||(MutedStatus={}));var initDragVolume=-1,Volume=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,U.sel,Y)||this;return z.ctrlbar=X,z.lastVolume=.5,z.dragVolume=initDragVolume,z.onVideoPlaying=function(J){!J.data.isFirst||z.isInLiveAd()||z.player.muted&&z.setUi(0)},z.onVolumeChange=function(){if(!z.isInLiveAd()){var J=z.player.volume,Z=z.player.muted;Z&&(J=0),z.setUi(J)}},z.onAdVolumeChange=function(J){var Z=J.data;getIsInAd(z.player)&&z.setUi(Z.volume)},z.isMobile||(z.eventMap=(W={},W[H5_PLAY_EVENT.VIDEO_VOLUME_CHANGE]=z.onVolumeChange,W[H5_PLAY_EVENT.AD_VOLUME_CHANGE]=z.onAdVolumeChange,W[H5_PLAY_EVENT.VIDEO_PLAYING]=z.onVideoPlaying,W),z.setEvts(),z.popup=z.el.querySelector(".txp_popup_volume"),z.volumeSvg=z.el.querySelector(".txp_icon_volume"),z.volumeValue=z.el.querySelector(".txp_volume_range_current"),z.volumeRange=z.el.querySelector(".txp_volume_range"),z.volumeText=z.el.querySelector(".txp_volume_text"),z.initDOMEvents(),z.config.disableCacheVolume||z.setVolumeByCache()),z}return U.prototype.setVolumeByCache=function(){var L=Number(lsTool.getData(LOCAL_KEY.VOLUME)),Y=lsTool.getData(LOCAL_KEY.MUTED);(Number.isNaN(L)||L>1)&&(L=1,lsTool.setData(LOCAL_KEY.VOLUME,"1")),L&&(this.lastVolume=L),Y===MutedStatus.muted&&(L=0),this.setVolume(L),this.setUi()},U.prototype.setUi=function(L){L===void 0&&(L=this.getCurrentNodeVolume()),this.el.dataset.status=L===0?VolumeStatus.Mute:VolumeStatus.Normal,this.volumeValue.style.height=L*100+"%",this.volumeText.innerText=String(Math.round(L*100))},U.prototype.getCurrentNodeVolume=function(){var L,Y,X=this.player;return getIsInAd(X)&&(Y=(L=getAdPlugin(X.config.instanceId))===null||L===void 0?void 0:L.getAdVolume())!==null&&Y!==void 0?Y:X.volume},U.prototype.isInLiveAd=function(){return this.isLive&&getIsInAd(this.player)},U.prototype.setPercent=function(L,Y){var X=L.clientY;this.clientY=this.volumeRange.getBoundingClientRect().top,this.clientHeight=this.volumeRange.clientHeight;var W=(X-this.clientY)/this.clientHeight;W=Math.floor((1-W)*100),W=Math.max(Math.min(W,100),0);var z=W/100;this.player.volume!==z&&(this.ctrlbar.emit(CTRL_EVENTS$2.SET_VOLUME,z),this.dragVolume=W),this.setVolume(z),this.setUi(),Y&&(lsTool.setData(LOCAL_KEY.VOLUME,z),lsTool.setData(LOCAL_KEY.MUTED,!1))},U.prototype.setVolume=function(L){var Y;this.isInLiveAd()?(Y=getAdPlugin(this.player.config.instanceId))===null||Y===void 0||Y.setAdVolume(L):this.player.volume=L},U.prototype.initDOMEvents=function(){this.setupBtnMouseEvents(),this.setupVolumeClick(),this.setupVolumeRangeMouseEvents()},U.prototype.showVolumeTips=function(){var L=this;if(this.dragVolume!==initDragVolume){this.clearTipsTimer();var Y=500;this.volumeTipsTimer=window.setTimeout(function(){showTips(L.player,"\u5F53\u524D\u97F3\u91CF: <em>"+L.dragVolume.toFixed(0)+"</em>")},Y)}},U.prototype.clearTipsTimer=function(){this.volumeTipsTimer&&(window.clearTimeout(this.volumeTipsTimer),this.volumeTipsTimer=0)},U.prototype.setupBtnMouseEvents=function(){var L=this;this.el.addEventListener("mouseenter",function(){L.showEl(L.popup),L.dragVolume=initDragVolume,L.clearTipsTimer()}),this.el.addEventListener("mouseleave",function(){L.isMouseDown||(L.hideEl(L.popup),L.showVolumeTips())})},U.prototype.setupVolumeRangeMouseEvents=function(){var L=this,Y=this,X=Y.volumeRange,W=Y.player;X.addEventListener("mousedown",function(){L.isMouseDown=!0}),X.addEventListener("mousemove",function(z){!L.isMouseDown||L.setPercent(z)}),W.container.addEventListener("mousemove",function(z){!L.isMouseDown||L.setPercent(z)}),X.addEventListener("mouseup",function(z){L.isMouseDown=!1,L.setPercent(z,!0)}),W.container.addEventListener("mouseup",function(z){!L.isMouseDown||(L.isMouseDown=!1,L.setPercent(z,!0),L.hideEl(L.popup),L.showVolumeTips())})},U.prototype.setupVolumeClick=function(){var L=this;this.volumeSvg.addEventListener(this.CLICK_EVENT_NAME,function(){var Y=L.el.dataset.status;Y===VolumeStatus.Mute?(L.el.dataset.status=VolumeStatus.Normal,L.setVolume(L.lastVolume),lsTool.setData(LOCAL_KEY.MUTED,MutedStatus.unmuted),lsTool.setData(LOCAL_KEY.VOLUME,L.lastVolume)):(L.lastVolume=L.getCurrentNodeVolume(),L.el.dataset.status=VolumeStatus.Mute,L.setVolume(0),lsTool.setData(LOCAL_KEY.MUTED,MutedStatus.muted)),(!L.player.played||[VIDEO_STATE$1.END,VIDEO_STATE$1.IDLE].indexOf(L.player.state)!==-1)&&L.setUi()})},U.compName="Volume",U.sel=".txp_btn_volume",U}(Component),THUMBPLAYER_PREFIX="thumbplayer",svgSpriteClassName="txp_svg_sprite",ctrlBarClassName="txp_controls",svgSpriteSelector="."+THUMBPLAYER_PREFIX+"."+svgSpriteClassName,ctrlBarSelector="."+THUMBPLAYER_PREFIX+"."+ctrlBarClassName,pcViewBox="0 0 28 28",svgSprite=`
<svg class="`+THUMBPLAYER_PREFIX+" "+svgSpriteClassName+`" display="none" xmlns="http://www.w3.org/2000/svg">
    <symbol id="txp_svg_play" viewBox="`+pcViewBox+`">
        <path d="M6.308 6.057S6 6.857 6 13.964c0 7.108.308 7.978.308 7.978 0 .788.827 1.299 1.526.943 0 0 1.603-.25 8.057-3.493 6.455-3.244 7.534-4.45 7.534-4.45.767-.39.767-1.493 0-1.884 0 0-1.768-1.617-7.531-4.553-5.7-2.904-8.06-3.39-8.06-3.39a1.051 1.051 0 0 0-1.526.942" fill-rule="evenodd"/>
    </symbol>
    <symbol id="txp_svg_replay" viewBox="`+pcViewBox+`">
        <path d="M14 4a9.994 9.994 0 0 1 8.5 4.731V6a1 1 0 0 1 2 0v5a1 1 0 0 1-.883.993L23.5 12h-5a1 1 0 0 1 0-2h2.43a8 8 0 1 0 .816 6.01 1 1 0 0 1 1.936.5A10.003 10.003 0 0 1 14 24C8.477 24 4 19.523 4 14S8.477 4 14 4Z" fill-rule="evenodd"/>
    </symbol>
    <symbol id="txp_svg_pause" viewBox="`+pcViewBox+`">
        <path d="M9 5a1.5 1.5 0 0 1 1.5 1.5v15A1.5 1.5 0 0 1 9 23h-.5A1.5 1.5 0 0 1 7 21.5v-15A1.5 1.5 0 0 1 8.5 5H9Zm10.5 0A1.5 1.5 0 0 1 21 6.5v15a1.5 1.5 0 0 1-1.5 1.5H19a1.5 1.5 0 0 1-1.5-1.5v-15A1.5 1.5 0 0 1 19 5h.5Z" fill-rule="evenodd"/>
    </symbol>
    <symbol id="txp_svg_stop" viewBox="`+pcViewBox+`">
      <rect x="5" y="5" width="18" height="18" rx="4" fill-rule="evenodd"/>
    </symbol>

    <symbol id="txp_svg_fake" viewBox="`+pcViewBox+`">
        <rect fill="none" stroke-width="1.75" transform="translate(0 3.5)" x="5.25" y="3.5" width="17.5" height="14" rx="2.042"/>
    </symbol>

    <symbol id="txp_svg_loop_off" viewBox="`+pcViewBox+`">
        <g fill-rule="evenodd"><path d="M16.859 14.22c2.738 0 4.958 2.164 4.958 4.834 0 2.67-2.22 4.834-4.958 4.834-2.739 0-4.959-2.164-4.959-4.834 0-2.67 2.22-4.835 4.959-4.835Zm0 .966c-2.19 0-3.967 1.732-3.967 3.868s1.776 3.867 3.967 3.867c2.19 0 3.967-1.731 3.967-3.867s-1.776-3.868-3.967-3.868Zm-1.206 2.02.069.056 2.975 2.9a.475.475 0 0 1 0 .684.506.506 0 0 1-.633.056l-.068-.056-2.975-2.9a.475.475 0 0 1 0-.684.506.506 0 0 1 .632-.056ZM12.591 4.9a.69.69 0 0 1 .456.171l3.812 3.346H11.9v-.001H8.925c-1.584 0-2.88 1.208-2.97 2.731l-.005.17v3.868c0 1.545 1.239 2.808 2.8 2.896l.175.005.992-.001v1.934h-.992c-2.664 0-4.838-2.048-4.953-4.619l-.005-.215v-3.868c0-2.597 2.101-4.717 4.737-4.83l.221-.004H11.9v-.892c0-.382.31-.691.691-.691Zm7.243 1.68c2.19.433 3.856 2.274 3.961 4.512l.006.225v3.868c0 .432-.058.85-.167 1.248l-1.817-2.215v-2.9c0-1.263-.827-2.338-1.982-2.736V6.581Z" fill-rule="nonzero"/></g>
    </symbol>
    <symbol id="txp_svg_loop" viewBox="`+pcViewBox+`">
        <g fill-rule="evenodd"><path d="M9 8.877a3 3 0 0 0-2.995 2.824L6 11.877v4a3 3 0 0 0 2.824 2.995l.176.005a1 1 0 1 1 0 2 5 5 0 0 1-4.995-4.783L4 15.877v-4a5 5 0 0 1 4.783-4.995L9 6.877h3V5.5a.5.5 0 0 1 .834-.372L17 8.878H9Zm11 10a3 3 0 0 0 2.995-2.823l.005-.177v-4a3 3 0 0 0-2.824-2.995L20 8.877a1 1 0 0 1 0-2 5 5 0 0 1 4.995 4.783l.005.217v4a5 5 0 0 1-4.783 4.996l-.217.004h-3v1.378a.5.5 0 0 1-.834.371L12 18.877h8Z" fill-rule="nonzero"/></g>
    </symbol>

    <symbol id="txp_svg_next" viewBox="`+pcViewBox+`">
        <path d="M21.5 7A1.5 1.5 0 0 1 23 8.5v11a1.5 1.5 0 0 1-3 0v-11A1.5 1.5 0 0 1 21.5 7Zm-16.261.822a.817.817 0 0 1 1.186-.732s1.835.378 6.266 2.636c4.481 2.282 5.855 3.54 5.855 3.54a.825.825 0 0 1 0 1.467s-.839.936-5.857 3.46c-5.017 2.522-6.264 2.715-6.264 2.715a.817.817 0 0 1-1.186-.732S5 19.498 5 13.97v-.326c.01-5.226.239-5.823.239-5.823Z" fill-rule="evenodd"/>
    </symbol>

    <symbol id="txp_svg_fullscreen" viewBox="`+pcViewBox+`">   
        <path d="M7.438 17.063v2.625c0 .483.391.875.875.875h2.624m0-13.125H8.312a.875.875 0 0 0-.875.875v2.624h0m13.126 6.126v2.625a.875.875 0 0 1-.875.875h-2.625 0m0-13.125h2.625c.483 0 .875.391.875.874v2.625h0" stroke-width="2.188" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>
    <symbol id="txp_svg_fullscreen_true" viewBox="`+pcViewBox+`">
        <g stroke-width="2.188" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M10.938 20.563v-2.625a.875.875 0 0 0-.875-.875H7.438h0M7.438 10.938h2.625a.875.875 0 0 0 .874-.876V7.438h0M17.063 20.562v-2.625c0-.483.391-.875.875-.875h2.625M20.563 10.938h-2.625a.875.875 0 0 1-.875-.876V7.438h0"/></g>
    </symbol>

    <symbol id="txp_svg_volume_mute" viewBox="`+pcViewBox+`">
        <g stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M8.75 10.041H5.749c-.828 0-1.499.671-1.499 1.499v4.92c0 .828.671 1.499 1.499 1.499H8.75l4.143 4.143a.502.502 0 0 0 .857-.355V6.253a.502.502 0 0 0-.857-.355L8.75 10.041ZM17.5 11l6 6M23.5 11l-6 6"/></g>
    </symbol>
    <symbol id="txp_svg_volume" viewBox="`+pcViewBox+`">
        <g stroke-width="2" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M8.75 10.041H5.749c-.828 0-1.499.671-1.499 1.499v4.92c0 .828.671 1.499 1.499 1.499H8.75l4.143 4.143a.502.502 0 0 0 .857-.355V6.253a.502.502 0 0 0-.857-.355L8.75 10.041ZM20.786 7a9.717 9.717 0 0 1 2.964 7 9.717 9.717 0 0 1-2.964 7M17.75 9.477c1.235 1.154 2 2.753 2 4.522 0 1.746-.747 3.328-1.955 4.478"/></g>
    </symbol>

    <symbol id="txp_svg_pip" viewBox="`+pcViewBox+`">
        <path d="M23.625 15.75c.966 0 1.75.784 1.75 1.75v4.375a1.75 1.75 0 0 1-1.75 1.75H17.5a1.75 1.75 0 0 1-1.75-1.75V17.5c0-.966.784-1.75 1.75-1.75h6.125ZM21 5.25a2.625 2.625 0 0 1 2.62 2.47l.005.155v5.25a.875.875 0 0 1-1.744.102l-.006-.102v-5.25a.875.875 0 0 0-.773-.87L21 7H7a.875.875 0 0 0-.87.773l-.005.102V19.25c0 .449.338.819.773.87l.102.005h6.125a.875.875 0 0 1 .102 1.744l-.102.006H7a2.625 2.625 0 0 1-2.62-2.47l-.005-.155V7.875a2.625 2.625 0 0 1 2.47-2.62L7 5.25h14Z" stroke-width=".5" fill-rule="evenodd"/>
    </symbol>

    <symbol id="txp_air_play" viewBox="0 0 1024 1024">
        <path d="M547.413333 573.866667a42.666667 42.666667 0 0 0-70.826666 0l-170.666667 256a42.666667 42.666667 0 0 0 0 42.666666A42.666667 42.666667 0 0 0 341.333333 896h341.333334a42.666667 42.666667 0 0 0 37.546666-22.613333 42.666667 42.666667 0 0 0-2.133333-42.666667zM421.12 810.666667L512 674.133333l90.88 136.533334zM810.666667 128H213.333333a128 128 0 0 0-128 128v384a128 128 0 0 0 128 128h36.266667a42.666667 42.666667 0 1 0 0-85.333333H213.333333a42.666667 42.666667 0 0 1-42.666666-42.666667V256a42.666667 42.666667 0 0 1 42.666666-42.666667h597.333334a42.666667 42.666667 0 0 1 42.666666 42.666667v384a42.666667 42.666667 0 0 1-42.666666 42.666667h-36.266667a42.666667 42.666667 0 0 0 0 85.333333H810.666667a128 128 0 0 0 128-128V256a128 128 0 0 0-128-128z"/>
    </symbol>
</svg>
`,h5SvgSprite=`
<svg class="`+THUMBPLAYER_PREFIX+" "+svgSpriteClassName+`" display="none" xmlns="http://www.w3.org/2000/svg">
	<symbol id="txp_svg_play" viewBox="0 0 56 56">
		<path d="M14.569 13.867s-.563 1.42-.563 14.059.563 14.188.563 14.188a1.925 1.925 0 0 0 2.8 1.677s2.938-.442 14.763-6.211 13.8-7.914 13.8-7.914a1.859 1.859 0 0 0 0-3.352s-3.24-2.875-13.8-8.095c-10.444-5.165-14.767-6.029-14.767-6.029a1.924 1.924 0 0 0-2.796 1.677z" style="fill:#fff" />
	</symbol>
    <symbol id="txp_svg_replay" viewBox="0 0 32 32">
      <path d="M18 30a13.956 13.956 0 0 1-9.9-4.1l2.121-2.121A11 11 0 1 0 7 16h4.006L5.5 22 0 16h4a14 14 0 1 1 14 14z">
      </path>
    </symbol>
    <symbol id="txp_svg_pause" viewBox="0 0 56 56">
      <path d="M39 49a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4zm-22 0a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4z">
      </path>
    </symbol>
    <symbol id="txp_svg_stop" viewBox="0 0 32 32">
      <path d="M24 26H12c-1.1 0-2-0.9-2-2V12c0-1.1 0.9-2 2-2h12c1.1 0 2 0.9 2 2v12C26 25.1 25.1 26 24 26z"></path>
    </symbol>

	<symbol id="txp_svg_fullscreen" viewBox="0 0 48 48">
		<path d="M9.5 37h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm0-10a1.5 1.5 0 0 1 1.5 1.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 9.5 27zM8.43 37.353L19.353 26.43a1.545 1.545 0 1 1 2.185 2.184L10.614 39.538a1.545 1.545 0 1 1-2.184-2.185zM28.5 8h10a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1 0-3zm10 0A1.5 1.5 0 0 1 40 9.5v10a1.5 1.5 0 0 1-3 0v-10A1.5 1.5 0 0 1 38.5 8zM26.43 19.354L37.353 8.43a1.545 1.545 0 0 1 2.185 2.184L28.614 21.538a1.545 1.545 0 0 1-2.184-2.184z"/>
	</symbol>
	<symbol id="txp_svg_fullscreen_true" viewBox="0 0 48 48">
		<path d="M39.538 10.615L31.153 19H37.5a1.5 1.5 0 0 1 0 3h-10a1.5 1.5 0 0 1-1.386-.937 1.52 1.52 0 0 1-.114-.735V10.5a1.5 1.5 0 0 1 3 0v6.283l8.353-8.353a1.545 1.545 0 1 1 2.185 2.185zM20.5 39a1.5 1.5 0 0 1-1.5-1.5v-6.347l-8.386 8.385a1.545 1.545 0 1 1-2.184-2.184L16.783 29H10.5a1.5 1.5 0 0 1 0-3h9.828a1.518 1.518 0 0 1 .733.113A1.5 1.5 0 0 1 22 27.5v10a1.5 1.5 0 0 1-1.5 1.5z"/>
	</symbol>
	<symbol id="txp_svg_pause" viewBox="0 0 56 56">
		<path d="M39 49a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4zm-22 0a4 4 0 0 1-4-4V11a4 4 0 0 1 4-4 4 4 0 0 1 4 4v34a4 4 0 0 1-4 4z"/>
	</symbol>
	<symbol id="txp_svg_replay" viewBox="0 0 32 32">
		<path d="M18 30a13.956 13.956 0 0 1-9.9-4.1l2.121-2.121A11 11 0 1 0 7 16h4.006L5.5 22 0 16h4a14 14 0 1 1 14 14z"/>
	</symbol>
	<symbol id="txp_svg_next" viewBox="0 0 60 60">
		<path d="M47.13825,15.0141429 C45.3628929,15.0141429 43.9239643,16.4530714 43.9239643,18.2284286 L43.9239643,41.7998571 C43.9239643,43.5752143 45.3628929,45.0141429 47.13825,45.0141429 C48.9136071,45.0141429 50.3525357,43.5752143 50.3525357,41.7998571 L50.3525357,18.2284286 C50.3525357,16.4530714 48.9136071,15.0141429 47.13825,15.0141429 M39.7389643,28.4327143 C39.7389643,28.4327143 36.7936071,25.737 27.1946786,20.8437857 C17.6986071,16.002 13.7686071,15.192 13.7686071,15.192 C12.6050357,14.5995 11.2261071,15.4502143 11.2261071,16.7637857 C11.2261071,16.7637857 10.7139643,18.0955714 10.7139643,29.9455714 C10.7139643,41.7945 11.2261071,43.2462857 11.2261071,43.2462857 C11.2261071,44.5598571 12.6050357,45.4116429 13.7686071,44.8180714 C13.7686071,44.8180714 16.4396786,44.4034286 27.1893214,38.9948571 C37.9411071,33.5852143 39.7389643,31.5762857 39.7389643,31.5762857 C41.0171786,30.9248571 41.0171786,29.0852143 39.7389643,28.4327143" id="Fill-1"></path>
	</symbol>
</svg>
`,getDomText=function(G){return`
<div class="`+gradientClassName$1.slice(1)+`"></div>
<div class="`+getRootClassName$1(G).slice(1)+`">
    <div class="`+THUMBPLAYER_PREFIX+" "+ctrlBarClassName+`">
        <div class="txp_left_controls">
            <div class="txp_none txp_btn txp_btn_play" data-status="play" aria-label="\u64AD\u653E/\u6682\u505C">
                <svg class="txp_icon txp_icon_play" viewBox="`+pcViewBox+`">
                    <use class="txp_svg_symbol txp_svg_play" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_play"></use>
                    <use class="txp_svg_symbol txp_svg_pause" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_pause"></use>
                    <use class="txp_svg_symbol txp_svg_stop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_stop"></use>
                    <use class="txp_svg_symbol txp_svg_replay" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_replay"></use>
                </svg>
                <div class="txp_tooltip">\u64AD\u653E</div>
            </div>
            <div class="txp_none txp_btn txp_btn_next txp_disabled" aria-label="\u4E0B\u4E00\u4E2A">
                <svg class="txp_icon txp_icon_next" viewBox="`+pcViewBox+`">
                    <use class="txp_svg_symbol txp_svg_next" xlink:href="#txp_svg_next"></use>
                </svg>
                <div class="txp_tooltip">\u4E0B\u4E00\u4E2A</div>
            </div>
            <div class="txp_btn txp_btn_loop txp_none" data-status="false" aria-label="\u5FAA\u73AF\u64AD\u653E">   
                <svg data-role="txp-ui-control-loop-play-btn" class="txp_icon txp_icon_loop" viewBox="`+pcViewBox+`">
                    <use class="txp_svg_symbol txp_svg_loop" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop"></use>
                    <use class="txp_svg_symbol txp_svg_loop_off" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_loop_off"></use>
                </svg>
                <div class="txp_tooltip">\u6253\u5F00\u5FAA\u73AF\u64AD\u653E</div> 
            </div>

            <div class="txp_btn txp_btn_volume txp_none" data-status="normal" aria-label="\u97F3\u91CF">     
                <svg class="txp_icon txp_icon_volume" viewBox="`+pcViewBox+`">         
                    <use class="txp_svg_symbol txp_svg_volume" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume"></use> 
                    <use class="txp_svg_symbol txp_svg_volume_mute" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_volume_mute"></use>     
                </svg>      
                <div class="txp_popup txp_popup_volume txp_none">
                    <div class="txp_popup_content">             
                        <div class="txp_volume_text">100</div>     
                        <div class="txp_volume_range">                 
                            <div class="txp_volume_range_current" style="height: 100%;">                     
                                <div class="txp_volume_handle"></div>                 
                            </div>             
                        </div>
                    </div>
                </div>
            </div>  

            <div class="txp_none txp_time_display">
                <div class="txp_time_current">00:00</div>
                <div class="txp_time_separator">/</div>
                <div class="txp_time_duration">00:00</div>
            </div>
        </div>

        <div class="txp_none txp_progress_bar_container">
            <div class="txp_progress_list">
                <div class="txp_progress_load" style="width: 0;"></div>
                <div class="txp_progress_play" style="width: 0;">
                </div>
                <div class="txp_btn_scrubber" style="left: 0">
                    <div class="txp_scrubber_indicator"></div>
                </div>
            </div>
            <div class="txp_tooltip txp_none"></div>
            <!-- \u8FDB\u5EA6\u6761\u6807\u8BB0\u6253\u70B9 -->
            <div class="txp_hotpoint"></div> 
        </div>

        <div class="txp_center_controls"></div>

        <div class="txp_right_controls">
            <div class="txp_btn txp_btn_definition txp_none" aria-label="\u6E05\u6670\u5EA6">
                <div class="txp_label">\u6E05\u6670\u5EA6</div>
                <div class="txp_popup txp_popup_definition txp_none">
                    <div class="txp_popup_content"></div>
                </div>
            </div>

            <div class="txp_btn txp_btn_playrate txp_none" aria-label="\u500D\u901F">
                <div class="txp_label">\u500D\u901F</div>
                <div class="txp_popup txp_popup_playrate txp_none">
                    <div class="txp_popup_content"></div>
                </div>
            </div>

            <div class="txp_btn txp_btn_language txp_none" aria-label="\u8BED\u8A00">
                <div class="txp_label">\u8BED\u8A00</div>
                <div class="txp_popup txp_popup_language txp_none">
                    <div class="txp_popup_content"></div>
                </div>
            </div>

            <div class="txp_btn txp_btn_audio_track txp_none" aria-label="\u591A\u97F3\u8F68">
                <div class="txp_label">\u591A\u97F3\u8F68</div>
                <div class="txp_popup txp_popup_audio_track txp_none">
                    <div class="txp_popup_content"></div>
                </div>
            </div>
            
            <div class="txp_btn plugin_ctrl_airplay_btn txp_air_play txp_none" aria-label="AirPlay">
                <svg class="txp_icon txp_icon_pip" viewBox="0 0 1024 1024">
                    <use class="txp_svg_symbol" xlink:href="#txp_air_play"></use>
                </svg>
            </div>

            <div class="txp_btn txp_btn_pip txp_none" data-status="false" aria-label="\u753B\u4E2D\u753B">   
                <svg class="txp_icon txp_icon_pip" viewBox="`+pcViewBox+`">     
                    <use class="txp_svg_symbol txp_svg_pip" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_pip"></use>   
                </svg>  
                <div class="txp_tooltip">\u753B\u4E2D\u753B</div> 
            </div>

            <div class="txp_btn txp_btn_fake txp_none" data-status="false" aria-label="\u7F51\u9875\u5168\u5C4F">   
                <svg class="txp_icon txp_icon_fake" viewBox="`+pcViewBox+`">     
                    <use class="txp_svg_symbol txp_svg_fake" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake"></use>   
                    <use class="txp_svg_symbol txp_svg_fake_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fake"></use>  
                </svg>  
                <div class="txp_tooltip">\u7F51\u9875\u5168\u5C4F</div> 
            </div>

            <div class="txp_btn txp_btn_fullscreen txp_none" data-status="false" aria-label="\u7CFB\u7EDF\u5168\u5C4F">
                <svg class="txp_icon txp_icon_fullscreen" viewBox="`+pcViewBox+`">     
                    <use class="txp_svg_symbol txp_svg_fullscreen" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen"></use>     
                    <use class="txp_svg_symbol txp_svg_fullscreen_true" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_fullscreen_true"></use>   
                </svg>
                <div class="txp_tooltip">\u5168\u5C4F</div>
            </div>
        </div>
    </div>
</div>

<div class="`+shadowClassName$1.slice(1)+`"></div>
`},h5CtrlRightDomText=`
<button class="txp_btn txp_btn_playrate txp_none" aria-label="\u500D\u901F">
    <div class="txp_label">\u500D\u901F</div>
</button>
<button class="txp_btn txp_btn_definition txp_none" data-status="false" aria-label="\u6E05\u6670\u5EA6">
    <div class="txp_label">\u6E05\u6670\u5EA6</div>
</button>
<button class="txp_btn txp_btn_fullscreen txp_none" data-status="false" aria-label="\u5168\u5C4F">
    <svg class="txp_icon txp_icon_fullscreen" viewBox="0 0 24 24">
        <use class="txp_svg_fullscreen" xlink:href="#txp_svg_fullscreen"></use>     
        <use class="txp_svg_fullscreen_true" xlink:href="#txp_svg_fullscreen_true"></use>   
    </svg>
</button>
<button class="txp_btn txp_btn_fullscreen txp_none txp_btn_fake" data-status="false" aria-label="\u4F2A\u5168\u5C4F">
    <svg class="txp_icon txp_icon_fullscreen" viewBox="0 0 24 24">
        <use class="txp_svg_fullscreen" xlink:href="#txp_svg_fullscreen"></use>     
        <use class="txp_svg_fullscreen_true" xlink:href="#txp_svg_fullscreen_true"></use>   
    </svg>
</button>
`,h5OverlayText=`<div class="plugin_ctrl_mod_overlay_wrapper">
<div class="mod_overlay definition txp_none">
    <div class="mod_speed_select">
        <div class="title">\u753B\u8D28</div>
        <ul class="select_list"></ul>
    </div>
</div>
<div class="mod_overlay language txp_none">
    <div class="mod_speed_select">
        <div class="title">\u8BED\u8A00</div>
        <ul class="select_list"></ul>
    </div>
</div>
<div class="mod_overlay playrate txp_none">
    <div class="mod_speed_select">
        <div class="title">\u64AD\u653E\u901F\u5EA6</div>
        <ul class="select_list"></ul>
    </div>
</div>
</div>
`,CtrlShow=function(G){__extends$b(U,G);function U(L,Y,X){var W,z=G.call(this,L,getRootClassName$1(Y.isMobile),Y)||this;z.ctrlbar=X,z.isMouseHoverControl=!1,z.isMouseDown=!1,z.shadowClickDisabled=!1,z.onShadowClick=function(ee){if(ee.target===z.shadow&&(z.clearClickTimer(),!z.shadowClickDisabled)){var te=300;z.clickTimer=window.setTimeout(function(){var re=z.player;re.state===VIDEO_STATE.PLAYING?re.pause(H5_PAUSE_TYPE.USER_CLICK):onBtnClickPlay(re,z.ctrlbar)},te)}},z.clearClickTimer=function(){!z.clickTimer||(clearTimeout(z.clickTimer),z.clickTimer=null)},z.clearHideTimer=function(){!z.hideTid||(clearTimeout(z.hideTid),z.hideTid=null)},z.clearTouchTimer=function(){!z.touchTid||(clearTimeout(z.touchTid),z.touchTid=null)},z.show=z.show.bind(z),z.hide=z.hide.bind(z),z.onFullscreenChange=z.onFullscreenChange.bind(z),z.eventMap=(W={},W[PLAY_EVENT.STATE_CHANGE]=z.onPlayerStateChange.bind(z),W[PLAY_EVENT.VIDEONODE_START_PLAY]=z.onStartPlay.bind(z),W),z.setEvts(),z.control=L.container.querySelector(ctrlBarSelector),z.shadow=L.container.querySelector(shadowClassName$1),z.gradientBottom=L.container.querySelector(gradientClassName$1),X.on(CTRL_EVENTS$2.FULLSCREEN_CHANGE,z.onFullscreenChange),X.on(CTRL_EVENTS$2.FAKE_FULLSCREEN_CHANGE,z.onFullscreenChange);var J=Y.showCtrlShadow,Z=J===void 0?!0:J;return Z||(z.shadow.remove(),z.shadow=null),z.addEventListener(),z.isMobile&&z.toggleControlOnClick(),z}return Object.defineProperty(U.prototype,"isShow",{get:function(){return!this.el.classList.contains(Component.hideClassName)},enumerable:!1,configurable:!0}),U.prototype.show=function(){this.autoHide(),!this.isShow&&(this.showEl(),this.showEl(this.gradientBottom),this.ctrlbar.emit(CTRL_EVENTS$2.SHOW))},U.prototype.hide=function(L){!this.isShow||!L&&(this.isMouseHoverControl||this.player.state===VIDEO_STATE.PAUSE)||(this.hideEl(),this.hideEl(this.gradientBottom),this.ctrlbar.emit(CTRL_EVENTS$2.HIDE))},U.prototype.autohide=function(){this.autoHide()},U.prototype.autoHide=function(){this.clearHideTimer(),this.hideTid=window.setTimeout(this.hide,U.hideDelay)},U.prototype.destroy=function(){this.clearHideTimer(),this.clearClickTimer(),this.clearTouchTimer(),G.prototype.destroy.call(this)},U.prototype.toggleShadowClickDisabled=function(L){this.shadowClickDisabled=L},U.prototype.addEventListener=function(){var L=this,Y=this,X=Y.ctrlbar,W=Y.player,z=Y.shadow,J=W.container;this.isMobile?(X.on(CTRL_EVENTS$2.TOGGLE_OVERLAY,function(Z){var ee=Z.data;L.isMouseHoverControl=ee,ee||L.autoHide()}),X.on(CTRL_EVENTS$2.MOUSE_DOWN,function(){return L.isMouseHoverControl=!0}),X.on(CTRL_EVENTS$2.MOUSE_UP,function(){L.autoHide(),L.isMouseHoverControl=!1})):(this.control.addEventListener("mouseenter",function(){return L.isMouseHoverControl=!0}),this.control.addEventListener("mouseleave",function(){return L.isMouseHoverControl=!1}),X.on(CTRL_EVENTS$2.MOUSE_DOWN,function(){return L.isMouseDown=!0}),X.on(CTRL_EVENTS$2.MOUSE_UP,function(){return L.isMouseDown=!1}),J.addEventListener("mouseenter",this.show),J.addEventListener("mousemove",this.show),J.addEventListener("mouseleave",function(){L.isMouseDown||L.hide()}),!this.isLive&&z&&(z.addEventListener("click",this.onShadowClick),z.addEventListener("dblclick",this.clearClickTimer)))},U.prototype.toggleControlOnClick=function(){var L=this,Y;(Y=this.shadow)===null||Y===void 0||Y.addEventListener("click",function(){L.isShow?L.hide():L.show()})},U.prototype.onFullscreenChange=function(){this.isMouseHoverControl=!1,this.hide()},U.prototype.onPlayerStateChange=function(L){var Y=L.data,X=Y.new;[VIDEO_STATE.PAUSE,VIDEO_STATE.END,VIDEO_STATE.IDLE].indexOf(X)!==-1?this.show():X===VIDEO_STATE.PLAYING&&this.autoHide()},U.prototype.onStartPlay=function(){this.autoHide()},U.hideDelay=3e3,U.compName="CtrlShow",U}(Component),hideCSS="txp_none",disableCSS="txp_disabled",shouldDisableState=[VIDEO_STATE$1.END,VIDEO_STATE$1.IDLE,VIDEO_STATE$1.LOAD_START],AirPlayBtn=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,U.sel,Y)||this;W.config=Y,W.ctrlbar=X,W.handlePlayerCanPlay=function(){W.hideDependOnKernel(),W.setBtnState(!0)},W.handleSetLevelEnd=function(){W.hideDependOnKernel()},W.handlePlayerSessionEnd=function(){W.setBtnState(!1)},W.handleClick=function(){var J;(J=W.player.currentVideoElement)===null||J===void 0||J.webkitShowPlaybackTargetPicker()};var z=!shouldDisableState.includes(W.player.state);return W.setupDOMEvents(),W.setupPlayerEvents(!0),W.show(),W.setBtnState(z),W}return U.prototype.show=function(){this.el.classList.remove(hideCSS)},U.prototype.hide=function(){this.el.classList.add(hideCSS)},U.prototype.setBtnState=function(L){if(L)return this.el.classList.remove(disableCSS);this.el.classList.add(disableCSS)},U.prototype.destroy=function(){var L;this.setupPlayerEvents(!1),(L=this.el)===null||L===void 0||L.remove()},U.prototype.setupPlayerEvents=function(L){L===void 0&&(L=!0);var Y=L?this.player.on.bind(this.player):this.player.off.bind(this.player);Y(H5_PLAY_EVENT.VIDEO_CANPLAY,this.handlePlayerCanPlay),Y(H5_PLAY_EVENT.PLAY_SESSION_END,this.handlePlayerSessionEnd),Y(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,this.handleSetLevelEnd)},U.prototype.setupDOMEvents=function(){this.el=this.player.container.querySelector(U.sel),this.el.addEventListener("click",this.handleClick)},U.prototype.hideDependOnKernel=function(){this.player.kernelName===KERNEL_NAME$1.WASM?this.hide():this.show()},U.sel=".plugin_ctrl_airplay_btn",U.compName="AirPlayBtn",U}(Component),HotKeyCode;(function(G){G.ArrowLeft="ArrowLeft",G.ArrowRight="ArrowRight",G.ArrowUp="ArrowUp",G.ArrowDown="ArrowDown",G.Space=" ",G.Escape="Escape"})(HotKeyCode||(HotKeyCode={}));var defaultSeekGap=5,defaultBackwardGap=2,defaultActivePressTime=.5,defaultBackwardTimeout=.5*1e3,liveHotKeys=[HotKeyCode.ArrowUp,HotKeyCode.ArrowDown,HotKeyCode.Escape],volumeGap=.05,HotKeys=function(){function G(U,L,Y){var X=this,W;this.player=U,this.config=L,this.comps=Y,this.isDisabled=!1,this.spyKeyUpOnBody=function(J){!X.isEvtKeyInConfig(J)||X.spyKeyUp(J)},this.spyKeyDownOnBody=function(J){!X.isEvtKeyInConfig(J)||X.spyKeyDown(J)},this.fastBackwardHandler=function(){var J=X.player,Z=J.duration;X.backwardPlaytime=J.playtime;var ee=function(){X.backwardPlaytime-=defaultBackwardGap,X.comps.progress.updateProgress(X.backwardPlaytime/Z),J.seek(X.backwardPlaytime)};X.backwardTimer=setInterval(ee,defaultBackwardTimeout),ee()},this.fastForwardHandler=function(){var J=X.config.pressFastForwardRate,Z=J===void 0?3:J,ee=X.comps.playRate,te=(ee||{}).selected;if(!(!te||Z<=te)){var re={label:Z+"X",value:Z};X.player.play(),X.lastPlaybackRate=ee.selected,X.player.playbackRate=Z,setTimeout(function(){ee.setCurrent(re)},0)}},this.spyKeyUp=this.spyKeyUp.bind(this),this.spyKeyDown=this.spyKeyDown.bind(this);var z=U.container;isMobile$1||(z.tabIndex=-1),z.addEventListener("keyup",this.spyKeyUp),z.addEventListener("keydown",this.spyKeyDown),!((W=this.config.keysListenedOnBody)===null||W===void 0)&&W.length&&(document.body.addEventListener("keyup",this.spyKeyUpOnBody),document.body.addEventListener("keydown",this.spyKeyDownOnBody))}return G.prototype.destroy=function(){var U;if(!!this.player){var L=this.player.container;this.cancelPressState(),L.removeEventListener("keyup",this.spyKeyUp),L.removeEventListener("keydown",this.spyKeyDown),!((U=this.config.keysListenedOnBody)===null||U===void 0)&&U.length&&(document.body.removeEventListener("keyup",this.spyKeyUpOnBody),document.body.removeEventListener("keydown",this.spyKeyDownOnBody)),this.player=null}},G.prototype.isEvtKeyInConfig=function(U){return this.config.keysListenedOnBody.includes(U.key)},G.prototype.prevent=function(U){var L,Y;(L=U.preventDefault)===null||L===void 0||L.call(U),(Y=U.stopPropagation)===null||Y===void 0||Y.call(U)},G.prototype.spyKeyUp=function(U){var L,Y=U.shiftKey;if(!(Y||this.isDisabled)){var X=U.key,W=this.player,z=W.state,J=this.config.seekGap,Z=J===void 0?defaultSeekGap:J;if(this.pressKey){X===this.pressKey&&this.cancelPressState();return}var ee=W.config.type===PLAY_MODE.LIVE;if(!(ee&&!liveHotKeys.includes(X)))switch(X){case HotKeyCode.ArrowLeft:W.setStateKv("ctrlbar:hotkey:"+X,{type:LOG_TYPE.USER_ACTION}),W.seek(W.playtime-Z),this.prevent(U),this.showSeekLeftTips();break;case HotKeyCode.ArrowRight:W.setStateKv("ctrlbar:hotkey:"+X,{type:LOG_TYPE.USER_ACTION}),W.seek(W.playtime+Z),this.prevent(U),this.showSeekRightTips();break;case HotKeyCode.Space:W.setStateKv("ctrlbar:hotkey:space",{type:LOG_TYPE.USER_ACTION}),z===VIDEO_STATE.PLAYING||z===VIDEO_STATE.BUFFERING?W.pause(H5_PAUSE_TYPE.USER_CLICK):W.play(),this.prevent(U);break;case HotKeyCode.Escape:!((L=this.comps.fakeFullscreen)===null||L===void 0)&&L.isFullScreen&&(this.comps.fakeFullscreen.requestFullScreen("exit"),this.prevent(U));break}}},G.prototype.enterPressMode=function(U){var L=this;if(!this.pressKey){var Y=this.config,X=Y.pressFastBackwardGap,W=X===void 0?defaultActivePressTime:X,z=Y.pressFastForwardGap,J=z===void 0?defaultActivePressTime:z,Z=U?J:W,ee=U?this.fastForwardHandler:this.fastBackwardHandler;!Z||(clearTimeout(this.pressTimer),this.pressTimer=setTimeout(function(){var te=L.player.state;![VIDEO_STATE.PAUSE,VIDEO_STATE.PLAYING].includes(te)||ee()},Z*1e3))}},G.prototype.cancelPressState=function(){var U=this.comps.playRate;U&&this.lastPlaybackRate&&(U.selected=this.lastPlaybackRate,this.player.playbackRate=this.lastPlaybackRate),this.lastPlaybackRate=NaN,this.pressKey=null,this.backwardPlaytime=NaN,this.pressKey=null,clearTimeout(this.backwardTimer),clearTimeout(this.pressTimer)},G.prototype.spyKeyDown=function(U){var L=U.shiftKey;if(L||this.isDisabled||this.pressKey){this.prevent(U);return}var Y=U.key,X=U.repeat,W=this.player,z=W.config.type===PLAY_MODE.LIVE;if(!(z&&!liveHotKeys.includes(Y)))switch(Y){case HotKeyCode.ArrowUp:W.volume=this.volumeToFixedNumber(W.volume+volumeGap),this.prevent(U),this.showVolumeTips();break;case HotKeyCode.ArrowDown:W.volume=this.volumeToFixedNumber(W.volume-volumeGap),this.prevent(U),this.showVolumeTips();break;case HotKeyCode.Space:this.prevent(U);break;case HotKeyCode.ArrowLeft:case HotKeyCode.ArrowRight:this.prevent(U),X&&(this.enterPressMode(Y===HotKeyCode.ArrowRight),this.pressKey=Y);break}},G.prototype.volumeToFixedNumber=function(U){var L=Math.max(Math.min(U,1),0);return L=Number(L.toFixed(2)),lsTool.setData(LOCAL_KEY.VOLUME,L),L},G.prototype.showSeekLeftTips=function(){if(this.player.state!==VIDEO_STATE.IDLE){var U=this.config.seekGap,L=U===void 0?defaultSeekGap:U,Y=Math.max(0,this.player.playtime-L);showTips(this.player,"\u5FEB\u9000\u81F3 "+comTool.formatPlayTime(Y))}},G.prototype.showSeekRightTips=function(){if(this.player.state!==VIDEO_STATE.IDLE){var U=this.player,L=U.playtime,Y=U.duration,X=this.config.seekGap,W=X===void 0?defaultSeekGap:X,z=Math.min(L+W,Y);showTips(this.player,"\u5FEB\u8FDB\u81F3 "+comTool.formatPlayTime(z))}},G.prototype.showVolumeTips=function(){var U,L=this.player.plugins.tips;!(L!=null&&L.show)||!(!((U=this.comps.volume)===null||U===void 0)&&U.popup.classList.contains(Component.hideClassName))||L.show("\u5F53\u524D\u97F3\u91CF: <em>"+(this.player.volume*100).toFixed(0)+"</em>")},G.compName="HotKeys",G}(),_a$4,DEFINITION=VALID_POPUP.DEFINITION,LANGUAGE=VALID_POPUP.LANGUAGE,PLAYRATE=VALID_POPUP.PLAYRATE,AUDIO_TRACK=VALID_POPUP.AUDIO_TRACK,componentMap=(_a$4={PlayBtn,NextBtn,TimeArea,Progress,Fullscreen,FakeFullscreen,Volume,CtrlShow,HotPoint,Loop,PictureInPicture,LiveProgress,CenterBtn},_a$4[AUDIO_TRACK]=Popup,_a$4[DEFINITION]=Popup,_a$4[LANGUAGE]=Popup,_a$4[PLAYRATE]=Popup,_a$4),CtrlbarPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W,z,J,Z,ee,te,re=G.call(this,L,Y,X)||this;return re.instances={},re.isInRequest=!1,re.config=__assign$a(__assign$a({},L.config.ctrlConfig),Y),(W=(Z=re.config).isMobile)!==null&&W!==void 0||(Z.isMobile=isMobile$1),(z=(ee=re.config).useH5FakeFullscreen)!==null&&z!==void 0||(ee.useH5FakeFullscreen=uaTool.os.android),(J=(te=re.config).showCenterPlayBtn)!==null&&J!==void 0||(te.showCenterPlayBtn=isMobile$1),re.setMaxListeners(20),re.insertDom(),re.createSubComponents(),re.initCtrlEvents(),adaptMobileAdPlugin(re,L),re.config.uiDuration&&(re.duration=re.config.uiDuration),re}return Object.defineProperty(U.prototype,"duration",{get:function(){var L;return(L=this.uiDuration)!==null&&L!==void 0?L:this.player.duration},set:function(L){isNaN(L)&&L!==void 0||(this.uiDuration=L,this.instances[TimeArea.compName]&&(this.instances[TimeArea.compName].timeDur.innerText=comTool.formatPlayTime(L)))},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"audio",{get:function(){var L;return(L=this.instances[AUDIO_TRACK])===null||L===void 0?void 0:L.selected},set:function(L){!this.instances[AUDIO_TRACK]||(this.instances[AUDIO_TRACK].selected=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"audioOpts",{get:function(){var L;return(L=this.instances[AUDIO_TRACK])===null||L===void 0?void 0:L.popupOptions},set:function(L){!this.instances[AUDIO_TRACK]||(this.instances[AUDIO_TRACK].popupOptions=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"level",{get:function(){var L;return(L=this.instances[DEFINITION])===null||L===void 0?void 0:L.selected},set:function(L){!this.instances[DEFINITION]||(this.instances[DEFINITION].selected=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"levelOpts",{get:function(){var L;return(L=this.instances[DEFINITION])===null||L===void 0?void 0:L.popupOptions},set:function(L){!this.instances[DEFINITION]||(this.instances[DEFINITION].popupOptions=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"lang",{get:function(){var L;return(L=this.instances[LANGUAGE])===null||L===void 0?void 0:L.selected},set:function(L){!this.instances[LANGUAGE]||(this.instances[LANGUAGE].selected=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"langOpts",{get:function(){var L;return(L=this.instances[LANGUAGE])===null||L===void 0?void 0:L.popupOptions},set:function(L){!this.instances[LANGUAGE]||(this.instances[LANGUAGE].popupOptions=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playrate",{get:function(){var L;return(L=this.instances[PLAYRATE])===null||L===void 0?void 0:L.selected},set:function(L){!this.instances[PLAYRATE]||(this.instances[PLAYRATE].selected=L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"playrateOpts",{get:function(){var L;return(L=this.instances[PLAYRATE])===null||L===void 0?void 0:L.popupOptions},set:function(L){!this.instances[PLAYRATE]||(this.instances[PLAYRATE].popupOptions=L)},enumerable:!1,configurable:!0}),U.prototype.getIsHotKeysDisabled=function(){return this.hotKeys.isDisabled},U.prototype.prependElementToLevels=function(L){var Y,X,W;(W=(X=(Y=this.instances)===null||Y===void 0?void 0:Y.definition)===null||X===void 0?void 0:X.popup)===null||W===void 0||W.firstElementChild.insertAdjacentElement("afterbegin",L)},U.prototype.show=function(L){L===void 0&&(L=!1),this.el.classList.remove(Component.hideClassName),this.instances.CtrlShow.gradientBottom.classList.remove(Component.hideClassName),L&&(this.el.style.display="",this.instances.CtrlShow.gradientBottom.style.display=""),this.emit(CTRL_EVENTS$2.SHOW)},U.prototype.hide=function(L){L===void 0&&(L=!1),this.el.classList.add(Component.hideClassName),this.instances.CtrlShow.gradientBottom.classList.add(Component.hideClassName),L&&(this.el.style.display="none",this.instances.CtrlShow.gradientBottom.style.display="none"),this.emit(CTRL_EVENTS$2.HIDE)},U.prototype.setHotKeysDisable=function(L){L===void 0&&(L=!0),this.hotKeys&&(this.hotKeys.isDisabled=!!L)},U.prototype.setCompDisable=function(L,Y){var X=this;Y===void 0&&(Y=!0);var W=Array.isArray(L)?L:[L];W.forEach(function(z){var J,Z;if(z==="CtrlShow"){X.instances.CtrlShow.toggleShadowClickDisabled(Y);return}(Z=(J=X.instances[z])===null||J===void 0?void 0:J.el)===null||Z===void 0||Z.classList.toggle(Component.disabledClassName,Y)})},U.prototype.setCompVisable=function(L,Y){var X=this;Y===void 0&&(Y=!0);var W=Array.isArray(L)?L:[L];W.forEach(function(z){var J,Z;(Z=(J=X.instances[z])===null||J===void 0?void 0:J.el)===null||Z===void 0||Z.classList.toggle(Component.hideClassName,!Y)})},U.prototype.removeComponent=function(L){var Y,X;(X=(Y=this.instances[L])===null||Y===void 0?void 0:Y.el)===null||X===void 0||X.remove()},U.prototype.destroy=function(){var L=this,Y,X;Object.keys(this.instances).forEach(function(W){try{L.instances[W].destroy()}catch(z){console.error("ctrlbar destroy err",z)}}),!((Y=this.el)===null||Y===void 0)&&Y.parentNode&&this.el.remove(),this.el=null,(X=this.hotKeys)===null||X===void 0||X.destroy(),G.prototype.destroy.call(this)},U.prototype.hookAdReqInfoStart=function(){this.isInRequest=!0},U.prototype.hookAdReqInfoEnd=function(){this.isInRequest=!1},U.prototype.hookVideoReqInfoStart=function(){this.isInRequest=!0},U.prototype.hookVideoReqInfoEnd=function(){this.isInRequest=!1},U.prototype.hookVideoRateChange=function(L){var Y,X=L.rate;!(!((Y=this.playrateOpts)===null||Y===void 0)&&Y.find(function(W){return Number(W.value)===X}))||(this.playrate=X)},U.prototype.hookVideoPlaying=function(L){var Y;L.isFirst&&((Y=this.instances.CtrlShow.shadow)===null||Y===void 0||Y.classList.remove(Component.hideClassName))},U.prototype.initCtrlEvents=function(){this.setupResizeEvent(),this.setupShowLevelsEvent()},U.prototype.configurePopup=function(){var L,Y=this,X,W=(L={},L[DEFINITION]=CTRL_EVENTS$2.SET_LEVEL,L[LANGUAGE]=CTRL_EVENTS$2.SET_LANGUAGE,L[PLAYRATE]=CTRL_EVENTS$2.SET_PLAYRATE,L[AUDIO_TRACK]=CTRL_EVENTS$2.SET_AUDIO,L);Object.keys(VALID_POPUP).forEach(function(z){var J=VALID_POPUP[z];if(J!==PLAYRATE){var Z=Y.instances[J];Z&&(Z.onSelect=function(ee){return Y.emit(W[J],ee)})}}),(!this.config.isMobile||((X=this.config)===null||X===void 0?void 0:X.enablePlayrate))&&this.setupPlayrate()},U.prototype.setupPlayrate=function(){var L=this,Y=this.instances[PLAYRATE];!Y||(this.playrateOpts=[{label:"0.5X",value:.5},{label:"1.0X",value:1,btnLabel:"\u500D\u901F"},{label:"1.25X",value:1.25},{label:"1.5X",value:1.5},{label:"2.0X",value:2}],this.playrate=1,Y.onSelect=function(X){L.emit(CTRL_EVENTS$2.SET_PLAYRATE,X);var W=L.player,z=Number(X.value);W.playbackRate!==z&&(W.playbackRate=z,L.playrate=z,showTips(L.player,"\u6B63\u5728<em>"+z+"</em>\u500D\u901F\u5EA6\u64AD\u653E"))})},U.prototype.insertDom=function(){var L=this.player.container,Y=this.config.isMobile;L.classList.add(containerClassName$1),L.insertAdjacentHTML("beforeend",getDomText(Y));var X=Y?css_248z$5:css_248z$1$1;domTool.insertStyle(X,U.styleDataTag);var W=getRootClassName$1(Y);this.el=L.querySelector(W);var z=document.querySelector(svgSpriteSelector);z||document.body.insertAdjacentHTML("afterbegin",Y?h5SvgSprite:svgSprite),Y&&(this.el.innerHTML=this.el.querySelector(ctrlBarSelector).innerHTML,L.querySelector(W+" .txp_right_controls").innerHTML=h5CtrlRightDomText,L.insertAdjacentHTML("beforeend",h5OverlayText))},U.prototype.createSubComponents=function(){if(this.initComps(),this.configurePopup(),!this.config.disableHotKey){var L=this.instances,Y=L.Volume,X=L.FakeFullscreen,W=L.playrate,z=L.Progress;this.hotKeys=new HotKeys(this.player,this.config,{volume:Y,fakeFullscreen:X,playRate:W,progress:z})}},U.prototype.initComps=function(){var L=this,Y,X=this.config,W=X.isMobile,z=X.disableNextBtn,J=X.disableFakeFullscreen,Z=X.showNextBtnUIOnly,ee=X.enableLoop,te=X.comps,re=X.showCenterPlayBtn,ie=X.showCenterReplayBtn,ne=((Y=this.player.config)===null||Y===void 0?void 0:Y.type)==="live",oe=W&&X.useH5FakeFullscreen?FakeFullscreen:Fullscreen,se=__spreadArray$2(__spreadArray$2([PlayBtn,TimeArea,Progress,oe],W?[]:[HotPoint,Loop,NextBtn,FakeFullscreen,Volume,PictureInPicture],!0),re||ie?[CenterBtn]:[],!0),ae=__spreadArray$2(__spreadArray$2([PlayBtn,oe],W?[]:[LiveProgress,Volume],!0),re||ie?[CenterBtn]:[],!0);if(te!=null&&te.length)te.forEach(function(ue){var ce=componentMap[ue];L.instances[ue]=new ce(L.player,X,L)});else{var le=ne?ae:se;uaTool.browser.safari&&!W&&le.push(AirPlayBtn),le.forEach(function(ue){var ce=ue.compName;ce===NextBtn.compName&&(W||z&&!Z)||ce===FakeFullscreen.compName&&J||ce===Loop.compName&&!ee||(L.instances[ue.compName]=new ue(L.player,X,L))})}this.instances[CtrlShow.compName]=new CtrlShow(this.player,X,this),ne&&W&&(this.el.style.justifyContent="space-between"),this.initPopup()},U.prototype.initPopup=function(){var L,Y=this,X,W=this.config,z=W.isMobile,J=((X=this.player.config)===null||X===void 0?void 0:X.type)==="live",Z=(L={},L[DEFINITION]=".txp_right_controls .txp_btn_definition",L[PLAYRATE]=".txp_right_controls .txp_btn_playrate",L[LANGUAGE]=".txp_right_controls .txp_btn_language",L[AUDIO_TRACK]=".txp_right_controls .txp_btn_audio_track",L);if(J)this.instances[DEFINITION]=new Popup(this.player,Z[DEFINITION],__assign$a(__assign$a({},W),{popupName:DEFINITION}),this);else{var ee=W.disableAudioTrack,te=W.disableLang,re=W.enablePlayrate;Object.keys(VALID_POPUP).forEach(function(ie){var ne=VALID_POPUP[ie];ne===PLAYRATE&&z&&!re||ne===LANGUAGE&&(z||te)||ne===AUDIO_TRACK&&(z||ee)||(Y.instances[ne]=new Popup(Y.player,Z[ne],__assign$a(__assign$a({},W),{popupName:ne}),Y))}),this.player.on(PLAY_EVENT$1.RESTART,function(){Y.setCompVisable(PLAYRATE,Y.player.supportPlaybackRate)})}},U.prototype.setupResizeEvent=function(){var L=this,Y=function(X){var W=X.data;L.player.container.classList.toggle(largeSizeClassName$1,W),L.emit(CTRL_EVENTS$2.RESIZE,{size:W?CTRL_SIZE$2.LARGE:CTRL_SIZE$2.NORMAL})};this.on(CTRL_EVENTS$2.FULLSCREEN_CHANGE,function(X){var W,z=X.data;!z&&((W=L.instances.FakeFullscreen)===null||W===void 0?void 0:W.isFullScreen)||Y(X)}),this.on(CTRL_EVENTS$2.FAKE_FULLSCREEN_CHANGE,function(X){var W,z=X.data;document.body.classList.toggle(bodyOverflowClassName$1,z),!(!z&&((W=L.instances.Fullscreen)===null||W===void 0?void 0:W.isFullScreen))&&Y(X)}),isMobile$1&&this.player.container.addEventListener("touchmove",function(X){var W;!((W=L.instances.FakeFullscreen)===null||W===void 0)&&W.isFullScreen&&X.preventDefault()})},U.prototype.setupShowLevelsEvent=function(){var L=this,Y;(Y=this.instances.definition)===null||Y===void 0||Y.label.addEventListener("mouseover",function(){L.emit(CTRL_EVENTS$2.SHOW_LEVELS)})},U.pluginName=CtrlbarPluginName$2,U.styleDataTag="thumb-ctrlbar-style",U}(Plugin);H5Player.registerPlugin(CtrlbarPlugin.pluginName,CtrlbarPlugin);function styleInject$4(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z$4='@charset "UTF-8";.txp_console{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;font-size:11px;color:#fff;pointer-events:none}.txp_console.txp_none,.txp_console .txp_none{display:none}.txp_console .txp_btn_close{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;border:none;background:0 0;font-family:inherit;cursor:pointer;outline:0 none;font-size:1em;color:#fff}.txp_console.mobile .txp_console_inner{margin:0;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.txp_console .txp_console_inner{position:absolute;margin:10px 0 0 10px;padding:8px 5px;background-color:rgba(28,28,28,.8);pointer-events:auto;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;border-radius:4px}.txp_console .txp_console_inner .txp_line_container{margin-top:8px}.txp_console .txp_console_inner .txp_console_header{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 8px}.txp_console .txp_console_inner .txp_console_header .txp_console_header_title{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;font-size:12px;font-weight:900}.txp_console .txp_console_inner .txp_console_header .txp_log_upload{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 2px;margin-right:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.txp_console .txp_console_inner .txp_console_header .txp_log_upload .log_upload_text:after{content:"\u4E0A\u4F20\u65E5\u5FD7"}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.txp_console .txp_console_inner .txp_console_header .txp_log_upload .reporting-icon{display:none;-webkit-animation:loading 1s infinite;animation:loading 1s infinite}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true]{cursor:not-allowed}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true] .log_upload_text:after{content:"\u4E0A\u4F20\u4E2D..."}.txp_console .txp_console_inner .txp_console_header .txp_log_upload[data-reporting=true] .reporting-icon{display:inline-block}.txp_console .txp_console_inner .txp_line{line-height:1.6}.txp_console .txp_console_inner .txp_label{display:inline-block;width:7em;padding-right:6px;text-align:right}.txp_console .txp_console_inner .txp_label:after{content:":"}.txp_console .txp_console_inner .txp_value{display:inline-block;text-align:left;vertical-align:text-top;width:30em}';styleInject$4(css_248z$4);var REPORTING_SVG_ICON$1=`<svg class="reporting-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" fill="#fff">
<path
  d="M784 902.4c9.6 19.2 6.4 41.6-12.8 54.4-19.2 9.6-41.6 3.2-51.2-12.8-9.6-19.2-6.4-41.6 12.8-54.4 16-12.8 38.4-8 51.2 12.8z m-233.6 81.6c0 22.4-16 38.4-38.4 38.4s-38.4-16-38.4-38.4V960c0-22.4 19.2-38.4 41.6-38.4 19.2 0 35.2 16 38.4 38.4v25.6h-3.2z m-240-43.2c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-16-51.2l28.8-51.2c9.6-19.2 35.2-25.6 54.4-16s25.6 35.2 12.8 54.4l-25.6 48zM121.6 784c-19.2 9.6-41.6 3.2-54.4-16-9.6-19.2-6.4-41.6 12.8-54.4l76.8-44.8c19.2-9.6 41.6-3.2 54.4 16 9.6 19.2 3.2 41.6-16 54.4L121.6 784zM38.4 552c-22.4 0-38.4-16-38.4-38.4s16-38.4 38.4-38.4H160c22.4 0 38.4 19.2 38.4 38.4 0 22.4-16 38.4-38.4 38.4H38.4z m44.8-241.6c-19.2-9.6-25.6-35.2-16-51.2 9.6-19.2 35.2-25.6 54.4-16L256 320c19.2 9.6 25.6 35.2 16 54.4s-35.2 25.6-54.4 16l-134.4-80z m160-185.6l92.8 160c9.6 19.2 35.2 25.6 54.4 12.8s25.6-35.2 12.8-54.4l-92.8-160c-12.8-19.2-35.2-22.4-54.4-12.8-16 12.8-22.4 33.6-12.8 54.4z m230.4-84.8c0-22.4 16-38.4 38.4-38.4s38.4 19.2 38.4 38.4V224c0 22.4-19.2 38.4-38.4 38.4-22.4 0-38.4-19.2-38.4-38.4V40z m240 43.2c9.6-19.2 35.2-25.6 54.4-16 19.2 9.6 25.6 35.2 16 51.2l-92.8 160c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-12.8-54.4l89.6-156.8z m188.8 160l-160 92.8c-19.2 9.6-25.6 35.2-16 54.4 12.8 19.2 35.2 25.6 54.4 12.8l160-92.8c19.2-9.6 25.6-35.2 12.8-54.4-9.6-16-32-25.6-51.2-12.8z m83.2 228.8c22.4 0 38.4 16 38.4 38.4s-16 38.4-38.4 38.4H800c-22.4 0-38.4-19.2-38.4-38.4 0-22.4 19.2-38.4 38.4-38.4h185.6z"
  />
</svg>`,InfoPanelPluginName$1="info-panel",InfoPanelEvents$1={CLICK_UPLOAD:"contextmenu:click-upload"};function getHtml(G){return`<div class="txp_console txp_none" style="z-index: 100">
    <div class="txp_console_inner">
      <div class="txp_console_header">
      <span class="txp_console_header_title">\u64AD\u653E\u4FE1\u606F</span>
      <span class="txp_log_action txp_log_upload">
        <span class="log_upload_text"></span>
        `+REPORTING_SVG_ICON$1+`
      </span>
      <button class="txp_btn_close" title="\u5173\u95ED">[x]</button>
      </div>
    <div class="txp_line_container">
      `+G.map(function(U){var L=U.key,Y=U.title,X=Y===void 0?"":Y,W=U.style,z=W===void 0?"":W,J=U.label,Z=U.value;return'<div class="txp_line" data-key="'+L+'" title="'+(X||"")+'" style="'+(z||"")+`">
            <div class="txp_label">`+J+`</div>
            <div class="txp_value">`+Z+`</div>
          </div>`}).join("")+`
    </div>
    </div>
  </div>`}var InfoPanelPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.inited=!0,W._itemDomMap={},W._showing=!1,W.isReporting=!1;var z=W.player.config.infoPanelConfig,J=z===void 0?{defaultInfo:!1,disableDefaultKey:[]}:z;return W._config=__assign$a(__assign$a({},J),Y),W.createInfoItems(),W.renderInfoItems(),W.addInfoItemEvts(),W.addUIEvts(),W}return U.prototype.start=function(L){},U.prototype.getItemDom=function(L){return this._el?this._itemDomMap[L]:null},U.prototype.show=function(){this.updateInfoItems(),this._showing=!0,this._el.classList.remove("txp_none")},U.prototype.hide=function(){this._showing=!1,this._el.classList.add("txp_none")},U.prototype.trigger=function(){this._showing?this.hide():this.show()},Object.defineProperty(U.prototype,"showing",{get:function(){return this._showing},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this._itemDomMap=null,this._el=null,this.infoItems=null,G.prototype.destroy.call(this)},U.prototype.renderInfoItems=function(){var L=this,Y=this.infoItems,X=this.player.container,W=getHtml(Y);X.insertAdjacentHTML("beforeend",W),this._el=X.querySelector(".txp_console"),this._closeBtn=this._el.querySelector(".txp_btn_close"),this._uploadBtn=this._el.querySelector(".txp_log_upload"),Y.forEach(function(z){var J={el:null,value:null};J.el=L._el.querySelector('[data-key="'+z.key+'"]'),J.value=J.el.querySelector(".txp_value"),L._itemDomMap[z.key]=J}),isMobile$2&&this._el.classList.add("mobile")},U.prototype.addUIEvts=function(){var L=this;this._closeBtn.addEventListener("click",function(){return L.hide()}),this._uploadBtn.addEventListener("click",function(){return __awaiter$6(L,void 0,void 0,function(){var Y,X;return __generator$6(this,function(W){switch(W.label){case 0:if(this.isReporting)return[2];this.isReporting=!0,this._uploadBtn.dataset.reporting="true",W.label=1;case 1:return W.trys.push([1,3,4,5]),[4,this.player.offlineLog.report(!0,"info-panel:click")];case 2:return Y=W.sent(),[3,5];case 3:return W.sent(),(X=this.player.plugins.tips)===null||X===void 0||X.show(Y!=null&&Y.status?"\u65E5\u5FD7\u4E0A\u62A5\u6210\u529F":"\u65E5\u5FD7\u4E0A\u62A5\u5931\u8D25 "+Y.msg),[3,5];case 4:return this.isReporting=!1,this._uploadBtn.dataset.reporting="false",[7];case 5:return[2]}})})}),isMobile$2&&this._el.addEventListener("click",function(){return L.hide()})},U.prototype.createInfoItems=function(){var L,Y=this;if(!this._config.defaultInfo){this.infoItems=[];return}var X=(L={},L[COMMON_DATA_KEY.vid]=this.createVidInfoItem,L.cdnInfo=this.createCdnInfoItem,L[COMMON_DATA_KEY.curcore]=this.createKernelNameInfoItem,L.codecs=this.createCodecsInfoItem,L.playerSize=this.createResolutionInfoItem,L.videoSize=this.createVideoSizeInfoItem,L[COMMON_DATA_KEY.drm]=this.createDrmInfoItem,L.keyFrame=this.createKeyFrameInfoItem,L.bufferRange=this.createBufferRangeInfoItem,L.net=this.createNetInfoItem,L.debug=this.createDebugInfoItem,L[COMMON_DATA_KEY.flowid]=this.createFlowidInfoItem,L[COMMON_DATA_KEY.guid]=this.createGuidInfoItem,L),W=this._config.disableDefaultKey,z=W===void 0?[]:W,J=Object.keys(X).filter(function(Z){var ee=z.includes(Z);return!ee});this.infoItems=J.map(function(Z){return X[Z].apply(Y,[Z])})},U.prototype.createNetInfoItem=function(L){var Y=this,X=function(){var W=Y.player.currentVideoInfo;if(!!(W!=null&&W.performance)){var z=W.performance,J=z.speed,Z=J===void 0?0:J,ee=z.p2pScore,te=z.p2pSpeed,re="";typeof te!="undefined"&&(re="[score:"+ee+" peer:"+te.toFixed(2)+"kb/s]"),Y.setItemTextByKey(L,Z.toFixed(2)+" kb/s "+re)}};return{key:L,updater:X,label:"\u7F51\u7EDC\u6D3B\u52A8",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:X}]}},U.prototype.createVidInfoItem=function(L){var Y=this,X=function(){var W=Y.player,z;W.config.type===PLAY_MODE$1.LIVE?z=W.getCommonKv(COMMON_DATA_KEY.vid)+"-"+(W.getCommonKv(COMMON_DATA_KEY.livepid)||0)||"-":z=W.getCommonKv(COMMON_DATA_KEY.vid)||"-";var J=Y.getItemDom(L);if(!z){J.el.classList.add(txpHideClass);return}J.el.classList.remove(txpHideClass);var Z=Y.player.getCommonKv(COMMON_DATA_KEY.platform)||"-";Y.setItemTextByKey(L,z+" / "+Z)};return{key:L,updater:X,label:"\u89C6\u9891ID",value:"-",listeners:[{dispatcher:this.msg,event:H5_EXT_EVENT.DATASET_UPDATE,cb:function(W){W.data.key===COMMON_DATA_KEY.vid&&X()}}]}},U.prototype.createKernelNameInfoItem=function(L){var Y=this,X=function(){var W,z,J,Z,ee,te=(J=urlTool.getFileExtension((z=(W=Y.player)===null||W===void 0?void 0:W.currentVideoInfo)===null||z===void 0?void 0:z.loadingUrl))!==null&&J!==void 0?J:"-",re=(Z=Y.player.getCommonKv(COMMON_DATA_KEY.curcore))!==null&&Z!==void 0?Z:"-",ie=(ee=Y.player.getCommonKv(COMMON_DATA_KEY.curcorever))!==null&&ee!==void 0?ee:VERSION,ne=Y.player.getCommonKv(COMMON_DATA_KEY.p2pver),oe=ne?"-p2p-"+ne:"";Y.setItemTextByKey(L,te+"/"+re+" ("+ie+oe+")")};return{key:L,label:"\u64AD\u653E\u5185\u6838",value:"-",updater:X,listeners:[{dispatcher:this.msg,event:H5_EXT_EVENT.DATASET_UPDATE,cb:function(W){var z=[COMMON_DATA_KEY.curcorever,COMMON_DATA_KEY.curcore,COMMON_DATA_KEY.p2pver];z.indexOf(W.data.key)>-1&&X()}}]}},U.prototype.createResolutionInfoItem=function(L){var Y=this,X=function(){var W,z,J=Y.player,Z=J.container,ee=J.getCommonKv,te=Z.clientWidth+"*"+Z.clientHeight,re=ee(COMMON_DATA_KEY.resolution),ie=(z=(W=window.screen)===null||W===void 0?void 0:W.isExtended)!==null&&z!==void 0?z:!1;Y.setItemTextByKey(L,te+" / "+re+" (ext:"+ie+")")};return{key:L,label:"\u663E\u793A\u5668\u4FE1\u606F",value:"-",updater:X}},U.prototype.createVideoSizeInfoItem=function(L){var Y=this,X=function(){var W,z,J=(z=(W=Y.player)===null||W===void 0?void 0:W.currentVideoInfo)!==null&&z!==void 0?z:{},Z=J.videoHeight,ee=Z===void 0?0:Z,te=J.videoWidth,re=te===void 0?0:te;Y.setItemTextByKey(L,re+"*"+ee)};return{key:L,updater:X,label:"\u89C6\u9891\u5206\u8FA8\u7387",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_METADATA_CHANGE,cb:X}]}},U.prototype.createCodecsInfoItem=function(L){var Y=this,X=function(){var W=Y.getItemDom(L),z=Y.player.currentVideoInfo;if(!z){W.el.classList.add(txpHideClass);return}W.el.classList.remove(txpHideClass);var J=z.codecs,Z=J===void 0?{video:"",audio:""}:J,ee=Z.video,te=ee===void 0?"":ee,re=Z.audio,ie=re===void 0?"":re,ne=te||ie?te+", "+ie:"",oe="("+(Y.player.getCommonKv(COMMON_DATA_KEY.codec)||"-")+")";Y.setItemTextByKey(L,(ne+" "+oe).trim())};return{key:L,updater:X,label:"\u7F16\u7801",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_METADATA_CHANGE,cb:X}]}},U.prototype.createFlowidInfoItem=function(L){var Y=this,X=function(){Y.setItemTextByKey(L,Y.player.getCommonKv(COMMON_DATA_KEY.flowid))};return{key:L,label:"\u64AD\u653E\u6D41\u6C34",value:"-",updater:X,listeners:[{dispatcher:this.msg,event:H5_EXT_EVENT.DATASET_UPDATE,cb:function(W){W.data.key===COMMON_DATA_KEY.flowid&&X()}}]}},U.prototype.createGuidInfoItem=function(L){var Y=this;return{key:L,label:"GUID",value:"-",updater:function(){Y.setItemTextByKey(L,Y.player.getCommonKv(COMMON_DATA_KEY.guid))}}},U.prototype.createKeyFrameInfoItem=function(L){var Y=this;return{key:L,label:"\u5E27\u6570",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:function(){var X,W,z=((W=(X=Y.player)===null||X===void 0?void 0:X.currentVideoInfo)===null||W===void 0?void 0:W.qualityInfo)||{},J=z.totalVideoFrames,Z=J===void 0?0:J,ee=z.droppedVideoFrames,te=ee===void 0?0:ee,re=te/Z*100;Y.setItemTextByKey(L,te+"/"+Z+"; "+(isNaN(re)?0:re.toFixed(2))+"%")}}]}},U.prototype.createCdnInfoItem=function(L){var Y=this,X=function(){var W,z=Y.getItemDom(L);if(!Y.player.getCommonKv(COMMON_DATA_KEY.vid)){z.el.classList.add(txpHideClass);return}z.el.classList.remove(txpHideClass),Y.setItemTextByKey(L,urlTool.getDomainOfURL(((W=Y.player.currentVideoInfo)===null||W===void 0?void 0:W.loadingUrl)||""))};return{key:L,label:"\u89C6\u9891CDN",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_LOAD_START,cb:X},{event:PLAY_EVENT.RETRY_BACKURL,cb:X},{event:H5_PLAY_EVENT.VIDEO_SETLEVEL_END,cb:X}]}},U.prototype.createBufferRangeInfoItem=function(L){var Y=this,X=function(){var W,z=Y.player,J=z.videoBuffered,Z=z.playtime,ee=(W=J.find(function(re){return re.start<=Z&&re.end>=Z}))===null||W===void 0?void 0:W.end,te=ee-Z;Y.setItemTextByKey(L,isNaN(te)?"-":te.toFixed(2)+"s")};return{key:L,updater:X,label:"\u7F13\u51B2\u5065\u5EB7\u5EA6",value:"-",listeners:[{event:H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:X}]}},U.prototype.createDebugInfoItem=function(L){var Y=this,X="",W=[],z=function(){var J,Z,ee,te,re,ie,ne=Y.player.getCommonKv(COMMON_DATA_KEY.sessionRetryBackUrlCount)||0,oe=Y.player.getCommonKv(COMMON_DATA_KEY.sessionRetryPlayCount)||0,se=ne||oe?"r:"+[ne,oe].join("/"):"",ae=Y.player.getCommonKv(COMMON_DATA_KEY.sessionBufferCount)||0,le=ae?"b:"+ae:"",ue=Y.player.videoBuffered.map(function(ye){return ye.start.toFixed(3)+"-"+ye.end.toFixed(3)}).join(","),ce=ue?"br:"+ue:"",he="t:"+Y.player.playtime.toFixed(2),fe="pg:"+!!(!((te=(ee=(Z=(J=Y.player.corePlayer)===null||J===void 0?void 0:J.getHls)===null||Z===void 0?void 0:Z.call(J))===null||ee===void 0?void 0:ee.config)===null||te===void 0)&&te.progressive),de="s:"+W.join("->"),_e=X?"a:"+X:"",me=(ie=(re=Y.player.currentVideoInfo)===null||re===void 0?void 0:re.performance)===null||ie===void 0?void 0:ie.latency,ve=me?"lc:"+(me/1e3).toFixed(2):"";Y.setItemTextByKey(L,[se,le,ce,he,fe,de,_e,ve].filter(Boolean).join(" "))};return{key:L,label:"Debug",value:"-",listeners:[{dispatcher:this.msg,event:H5_EXT_EVENT.DATASET_UPDATE,cb:function(J){var Z=[COMMON_DATA_KEY.sessionRetryBackUrlCount,COMMON_DATA_KEY.sessionRetryPlayCount,COMMON_DATA_KEY.sessionBufferCount];Z.indexOf(J.data.key)!==-1&&z()}},{event:PLAY_EVENT.STATE_CHANGE,cb:function(){W.push(Y.player.state),W=W.slice(-5)}},{event:H5_PLAY_EVENT.VIDEO_LOAD_PROGRESS,cb:z},{event:H5_PLAY_EVENT.VIDEO_AUTOPLAY_BLOCKED,cb:function(){X="vb"}},{event:H5_PLAY_EVENT.VIDEO_TIMEUPDATE,cb:z},{event:H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED,cb:function(){X="ab"}}]}},U.prototype.createDrmInfoItem=function(L){var Y=this,X=function(){var W=Y.player.getCommonKv(COMMON_DATA_KEY.drm),z=Y.getItemDom(L);if(!W){z.el.classList.add(txpHideClass);return}z.el.classList.remove(txpHideClass);var J=Object.keys(DRM_TYPE).find(function(Z){return DRM_TYPE[Z]===W});Y.setItemTextByKey(L,J)};return{key:L,label:"\u52A0\u5BC6\u7C7B\u578B",value:"-",updater:X,listeners:[{event:H5_PLAY_EVENT.VIDEO_PLAYING,cb:function(){X()}}]}},U.prototype.setItemTextByKey=function(L,Y){var X=this.getItemDom(L);X&&(X.value.innerText=Y!=null?Y:"-")},U.prototype.addInfoItemEvts=function(){var L=this;this.infoItems.forEach(function(Y){var X;(X=Y.listeners)===null||X===void 0||X.forEach(function(W){var z=W.dispatcher||L.player;z.on(W.event,W.cb)})})},U.prototype.updateInfoItems=function(){this.infoItems.forEach(function(L){var Y;(Y=L.updater)===null||Y===void 0||Y.call(L)})},U.pluginName=InfoPanelPluginName$1,U.Events=InfoPanelEvents$1,U}(Plugin);H5Player.registerPlugin(InfoPanelPlugin.pluginName,InfoPanelPlugin);function styleInject$3(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z$3=".txp_poster_img{position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;-o-object-fit:contain;object-fit:contain}.txp_poster_img.txp_none{display:none}";styleInject$3(css_248z$3);var PosterPluginName$1="poster",hideClass$2="txp_none";function findPoster(G){var U=G.vid,L=G.vidFirstPic,Y=L===void 0?!1:L,X=G.idx,W=X===void 0?2:X;G.fmt;var z=["496","360","228"];if(Y)return"//puui.qpic.cn/vpic_cover/"+U+"/"+U+"_first.jpg/640x360";var J="0";return uaTool.mobile&&z[W]&&(J=z[W]),"//puui.qpic.cn/vpic_cover/"+U+"/"+U+"_hz.jpg/"+J}var PosterPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.config=__assign$a(__assign$a({},L.config.poster||{}),Y),W.el=W.init(),W.tryShow(),W}return U.prototype.destroy=function(){var L;G.prototype.destroy.call(this),(L=this.el)===null||L===void 0||L.remove()},U.prototype.show=function(L){!this.el||(L&&(this.el.src=L),this.el.classList.remove(hideClass$2))},U.prototype.showByVid=function(L){var Y=L.vid,X=L.vidFirstPic,W=X===void 0?!1:X,z=L.h5Defn,J=z===void 0?2:z,Z=L.pcFmt,ee=Z===void 0?"png":Z;if(!!Y){var te=findPoster({vid:Y,vidFirstPic:W,idx:J,fmt:ee});this.show(te)}},U.prototype.hide=function(){!this.el||this.el.classList.add(hideClass$2)},U.prototype.hookAdPlaying=function(){this.hide()},U.prototype.hookVideoPlaying=function(L){L.isFirst&&this.hide()},U.prototype.hookVideoEnd=function(L){L.endState===END_STATE.NORMAL&&!this.player.config.loop&&this.tryShow()},U.prototype.init=function(){var L=this.player.container,Y=document.createElement("img");return Y.classList.add("txp_poster_img",hideClass$2),L.prepend(Y),Y},U.prototype.tryShow=function(){var L,Y;!((L=this.config)===null||L===void 0)&&L.vid?this.showByVid(this.config):!((Y=this.config)===null||Y===void 0)&&Y.src&&this.show(this.config.src)},U.pluginName=PosterPluginName$1,U}(Plugin);H5Player.registerPlugin(PosterPlugin.pluginName,PosterPlugin);function styleInject$2(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z$2='.txp_alert_info{position:absolute;left:10px;bottom:67px;padding:2px 8px;line-height:24px;font-size:13px;text-align:left;color:#fff;background:rgba(0,0,0,.6);-webkit-transition:bottom .15s ease;transition:bottom .15s ease;z-index:2}.txp_alert_info.txp_none{display:none}.txp_alert_info.ctrl_resize{bottom:107px}.txp_alert_info.ctrl_hide{bottom:20px}.txp_alert_info .txp_btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;border:none;background:0 0;font-family:inherit;cursor:pointer;outline:0 none;font-size:1em}.txp_alert_info .txp_btn.txp_btn_close{position:relative;display:inline-block;margin-left:3px;width:14px;height:24px;vertical-align:top;color:#fff;cursor:pointer}.txp_alert_info .txp_btn.txp_btn_close:hover{color:#ff6429}.txp_alert_info .txp_btn.txp_btn_close:hover:before{background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PHBhdGggZmlsbD0iI0ZGNzgwMCIgZD0iTTEwLjUgMTBsLS41LjUtNC00LTQgNC0uNS0uNSA0LTQtNC00IC41LS41IDQgNCA0LTQgLjUuNS00IDQgNCA0eiIvPjwvc3ZnPg==) 50% no-repeat}.txp_alert_info .txp_btn.txp_btn_close:before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:12px;height:12px;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMiAxMiI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEwLjUgMTBsLS41LjUtNC00LTQgNC0uNS0uNSA0LTQtNC00IC41LS41IDQgNCA0LTQgLjUuNS00IDQgNCA0eiIvPjwvc3ZnPg==) 50% no-repeat;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;text-indent:0}.txp_alert_info .txp_btn.txp_none{display:none}.txp_alert_info .txp_alert_content a,.txp_alert_info .txp_alert_content em{padding:0 1px;color:#ff6429;font-style:normal;font-weight:400}.txp_alert_info .txp_alert_content .txp_alert_text{display:inline}.txp_alert_info .txp_none{display:none}';styleInject$2(css_248z$2);var HOTPOINT_EVENTS$1;(function(G){G.HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",G.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",G.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout"})(HOTPOINT_EVENTS$1||(HOTPOINT_EVENTS$1={}));/mobile/i.test(navigator.userAgent);var CtrlbarPluginName$1="ctrlbar",CTRL_EVENTS$1=__assign$a(__assign$a({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},HOTPOINT_EVENTS$1),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),CTRL_SIZE$1;(function(G){G.LARGE="large",G.NORMAL="normal"})(CTRL_SIZE$1||(CTRL_SIZE$1={}));var PlayBtnStatus$1;(function(G){G.PAUSE="pause",G.PLAY="play",G.REPLAY="replay",G.STOP="stop"})(PlayBtnStatus$1||(PlayBtnStatus$1={}));var defaultShowTime$1=3,classNameOnCtrlHide$1="ctrl_hide",classNameOnCtrlResize$1="ctrl_resize",TipsPluginName$1="tips",TipsPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.hide=function(){W.el.removeEventListener("click",W.clickTips),W.showOptions=null,W.el.classList.add(txpHideClass),W.emit(TipsEvents.Hide)},W.clickTips=function(z){var J;if(!!W.showOptions){var Z=(J=z.target)===null||J===void 0?void 0:J.dataset.callback;!Z||typeof W.showOptions[Z]=="function"&&W.showOptions[Z]()}},W.prepareDOM(),W.initDOMVars(),Y.followCtrlbar!==!1&&W.followCtrlbar(),W}return U.prototype.destroy=function(){this.hide(),G.prototype.destroy.call(this)},U.prototype.show=function(L){var Y,X=!1,W=defaultShowTime$1;typeof L=="string"||typeof L=="number"?Y=String(L):(Y=L.text,X=!!L.showClose,W=L.time||defaultShowTime$1,this.showOptions=L),this.$text.innerHTML=Y,this.$close.classList.toggle(txpHideClass,!X),this.el.addEventListener("click",this.clickTips),this.el.classList.remove(txpHideClass),clearTimeout(this.timeoutId),W!==-1&&(this.timeoutId=window.setTimeout(this.hide,W*1e3)),this.emit(TipsEvents.Show)},U.prototype.prepareDOM=function(){var L=this.player.container,Y=`<div class="txp_alert_content">
      <div class="txp_alert_text"></div>
      <button class="txp_btn txp_btn_close" title="\u5173\u95ED"></button>
    </div>`,X=document.createElement("div");X.className="txp_alert_info "+txpHideClass,X.innerHTML=Y,L.insertAdjacentElement("beforeend",X),this.el=X},U.prototype.initDOMVars=function(){this.$text=this.el.querySelector(".txp_alert_content .txp_alert_text"),this.$close=this.el.querySelector(".txp_btn_close"),this.$close.addEventListener("click",this.hide),isMobile$2&&(this.el.style.bottom="40px")},U.prototype.followCtrlbar=function(){var L=this;this.msg.on("pluginsetup:"+CtrlbarPluginName$1,function(){var Y=L.player.plugins[CtrlbarPluginName$1];Y.on(CTRL_EVENTS$1.SHOW,function(){L.el.classList.remove(classNameOnCtrlHide$1)}),Y.on(CTRL_EVENTS$1.HIDE,function(){L.el.classList.add(classNameOnCtrlHide$1)}),Y.on(CTRL_EVENTS$1.RESIZE,function(X){var W=X.data;L.el.classList.toggle(classNameOnCtrlResize$1,W.size===CTRL_SIZE$1.LARGE)})})},U.pluginName=TipsPluginName$1,U}(Plugin),TipsEvents;(function(G){G.Show="show",G.Hide="hide"})(TipsEvents||(TipsEvents={}));H5Player.registerPlugin(TipsPlugin.pluginName,TipsPlugin);var UIContextMenuPluginName$1="context-menu";function styleInject$1(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z$1="@-webkit-keyframes txp_overlay_play{0%{-webkit-transform:scale(.5);transform:scale(.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes txp_overlay_play{0%{-webkit-transform:scale(.5);transform:scale(.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.txp_contextmenu{background:rgba(30,30,32,.9);position:fixed;width:234px;z-index:9999;padding:10px 0;color:#bbb;overflow:hidden;font-size:12px}.txp_contextmenu.txp_none,.txp_contextmenu .txp_none{display:none}.txp_contextmenu .txp_clipboard{top:0;left:100%;position:absolute;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.txp_contextmenu .txp_menuitem{padding-left:20px;height:34px;line-height:34px;cursor:pointer;max-width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.txp_contextmenu .txp_menuitem:hover{background-color:#26262b}.txp_overlay_link{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;visibility:hidden;font-size:14px}.txp_overlay_link.txp_show{display:-webkit-box;display:-ms-flexbox;display:flex;visibility:visible;-webkit-animation:txp_overlay_play 1s ease-out both;animation:txp_overlay_play 1s ease-out both;pointer-events:none}.txp_overlay_link .txp_icon_link{background:rgba(30,30,32,.9);width:60px;height:60px;border-radius:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.txp_overlay_link .txp_icon_link .txp_icon{position:relative;width:36px;height:36px;fill:#fff}";styleInject$1(css_248z$1);var UIContextMenuPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.menuConfig=[],W.show=function(){W.$el.classList.remove(txpHideClass)},W.hide=function(){W.$el.classList.add(txpHideClass)},W.config=__assign$a(__assign$a({},L.config.contextMenuConfig),Y),W.start(W.config.menus,{hideVInfo:W.config.hideVInfo}),W}return U.prototype.start=function(L,Y){if(!(!L||L.length<=0)){if((Y==null?void 0:Y.hideVInfo)!==!0&&L.unshift({role:"openvinfo",label:"\u89C6\u9891\u4FE1\u606F"}),this.menuConfig=L,this.$el){this.$el.innerHTML=`
      `+L.map(function(z){return'<div class="txp_menuitem" data-role="'+(z.role||"")+'">'+z.label+"</div>"}).join("")+`
      <textarea class="txp_clipboard" style="position: absolute; left: 100%; top: 0;"></textarea>
      `;return}var X=`
    <div class="txp_contextmenu `+txpHideClass+`" style="overflow:hidden">
      `+L.map(function(z){return'<div class="txp_menuitem" data-role="'+(z.role||"")+'">'+z.label+"</div>"}).join("")+`
      <textarea class="txp_clipboard" style="position: absolute; left: 100%; top: 0;"></textarea>
    </div>
    <div class="txp_overlay_link `+txpHideClass+`">
        <div class="txp_icon_link">
            <svg class="txp_icon" viewBox="0 0 36 36" >
              <path d="M26.5 26h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c2.5 0 4.5-2 4.5-4.5S29 14 26.5 14h-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h5c4.1 0 7.5 3.4 7.5 7.5S30.6 26 26.5 26zM12 18.5c0-.8.7-1.5 1.5-1.5h9c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-9c-.8 0-1.5-.7-1.5-1.5zm2.5-4.5h-5C7 14 5 16 5 18.5S7 23 9.5 23h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5h-5C5.4 26 2 22.6 2 18.5S5.4 11 9.5 11h5c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z"></path>
            </svg>
        </div>
    </div>
    `,W=this.player.container;W.insertAdjacentHTML("beforeend",X),this.$el=W.querySelector(".txp_contextmenu"),this.$link=W.querySelector(".txp_overlay_link"),this.bindDOMEvent()}},U.prototype.showSuccess=function(){var L,Y;if(!isMobile$2&&!(((L=this.config)===null||L===void 0?void 0:L.disableSuccessTip)||((Y=this.config)===null||Y===void 0?void 0:Y.disableSuccussTip))){var X=this.$link,W="txp_show";X.classList.remove(txpHideClass),X.classList.add(W),clearTimeout(this.sucTid),this.sucTid=setTimeout(function(){X.classList.add(txpHideClass),X.classList.remove(W)},1e3)}},U.prototype.destroy=function(){var L=function(Y){return(Y==null?void 0:Y.parentNode)&&Y.remove()};[this.$el,this.$link].forEach(L),G.prototype.destroy.call(this)},U.prototype.bindDOMEvent=function(){var L=this,Y=this.player.container;Y.addEventListener("contextmenu",function(X){if(!L.player.isPlayingAd){L.show();var W=L.player.container.getBoundingClientRect(),z=W.left,J=W.top,Z=W.width,ee=W.height,te=X.clientX,re=X.clientY,ie=L.$el,ne=ie.clientWidth,oe=ie.clientHeight,se=Z+z-ne,ae=ee+J-oe,le=Math.min(se,te),ue=Math.min(ae,re);L.$el.style.left=le+"px",L.$el.style.top=ue+"px",X.preventDefault()}}),Y.addEventListener("click",this.hide),this.$el.addEventListener("click",function(X){var W,z,J=X.target;L.showSuccess();var Z=(W=L.menuConfig)===null||W===void 0?void 0:W.find(function(ee){return ee.role===J.dataset.role});typeof(Z==null?void 0:Z.callback)=="function"&&Z.callback(L),J.dataset.role==="openvinfo"&&((z=L.player.plugins["info-panel"])===null||z===void 0||z.trigger()),L.emit("clickContextMenu",J.dataset)})},U.pluginName=UIContextMenuPluginName$1,U}(Plugin);H5Player.registerPlugin(UIContextMenuPlugin.pluginName,UIContextMenuPlugin);var WaterMarkCoverClassName$1="thumbplayer-watermark-cover",WatermarkPluginName$1="ui-watermark",MaxRequestRetry$1=3,RequestTimeout$1=5e3,WatermarkError$1;(function(G){G.ActionWatermarkRequestFailed="001"})(WatermarkError$1||(WatermarkError$1={}));function requestActionWatermark(G,U){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X;return __generator$6(this,function(W){switch(W.label){case 0:if(!G)return[2,Promise.reject(L)];Y=0,W.label=1;case 1:if(!(Y<MaxRequestRetry$1))return[3,6];W.label=2;case 2:return W.trys.push([2,4,,5]),[4,netTool.jsonp(G,{timeout:RequestTimeout$1})];case 3:return X=W.sent(),[2,parseActionWatermark(X,U)];case 4:return W.sent(),L=WatermarkError$1.ActionWatermarkRequestFailed,[3,5];case 5:return Y++,[3,1];case 6:return[2,Promise.reject(L)]}})})}function parseActionWatermark(G,U){for(var L={},Y={},X=G.start,W=G.duration,z=G.repeat,J=G.rw,Z=z===0?Math.ceil(U/W):z,ee=function(re){var ie=X+re*W;G.scenes.forEach(function(ne){var oe=ne.wi,se=ne.in,ae=ne.out,le=ne.start,ue=ne.end;oe.forEach(function(ce){Y[ce.id]=__assign$a(__assign$a({},ce),{action:!0,rw:J}),L[ce.id]||(L[ce.id]=[]),re>=le&&(re<=ue||re===0)&&L[ce.id].push({start:(ie+se)/1e3,end:(ie+ae)/1e3})})})},te=0;te<Z;te++)ee(te);return{schedules:L,watermarks:Y}}var str=`<txpdiv data-role="txp-ui-watermark-mod" class="txp-watermark">
</txpdiv>`,Watermark=function(){function G(U,L,Y){Y===void 0&&(Y=!1);var X=L.cfg,W=L.css;this.el=this.createImageNode(W),this.el.onload=X.onload,this.el.onerror=X.onerror,this.el.src=X.url,this.el.dataset.id=""+X.id,U.appendChild(this.el),Y?this.show():this.hide()}return G.prototype.destroy=function(){var U;!((U=this.el)===null||U===void 0)&&U.parentNode&&this.el.remove(),this.el=null},G.prototype.show=function(){this.el&&(this.el.style.display="block")},G.prototype.hide=function(){this.el&&(this.el.style.display="none")},G.prototype.draw=function(U){var L=U.left,Y=U.top,X=U.width,W=U.height,z=U.position,J=U.opacity;this.el&&(this.el.style.left=L,this.el.style.top=Y,this.el.style.width=X,this.el.style.height=W,this.el.style.opacity=J,this.el.style.position=z)},G.prototype.createImageNode=function(U){var L=U.left,Y=U.top,X=U.width,W=U.height,z=U.position,J=U.opacity,Z=new Image;return Z.style.left=L,Z.style.top=Y,Z.style.width=X,Z.style.height=W,Z.style.position=z,Z.style.opacity=J,Z.style.zIndex="1",Z},G}(),WatermarkPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.watermarks={},W.timeTable={},W.onResize=function(){Object.values(W.watermarks).forEach(function(J){var Z=J[0],ee=J[1],te=W.computeCss(ee);Z.draw(te)})},W.onTimeChange=function(J){var Z=J.data,ee=Z.videoInfo,te=ee.playtime;Object.entries(W.timeTable).forEach(function(re){var ie=re[0],ne=re[1],oe=W.watermarks[ie][0];!oe||(ne.some(function(se){var ae=se.start,le=se.end,ue=le===void 0?1/0:le;return te>ae&&te<ue})?oe.show():oe.hide())})},W.computeCss=function(J){var Z=J.x,ee=J.y,te=J.h,re=J.w,ie=J.a,ne=J.rw,oe=ne===void 0?0:ne,se=W.player,ae=se.container,le=se.videoSize,ue=le.width,ce=le.height;ue<=0&&(ue=ae.clientWidth),ce<=0&&(ce=ae.clientHeight);var he=oe>0?Math.min(ce,ue)/oe:1,fe=Z*he,de=ee*he,_e=te*he,me=re*he,ve=Math.min(ae.clientWidth/ue,ae.clientHeight/ce),ye=ue*ve,be=ce*ve,Te=Math.max((ae.clientWidth-ye)/2,0),Se=Math.max((ae.clientHeight-be)/2,0),Ue=me*ve,Pe=_e*ve,Ne=Te+ye-Ue-fe*ve,Ve=Se+de*ve,ze={x:Te,y:Se,w:ye,h:be},Ze={x:Ne,y:Ve,w:Ue,h:Pe},Ae={left:Ne+"px",top:Ve+"px",width:Ue+"px",height:Pe+"px",position:"absolute",display:"block",opacity:""+ie/100};return W.isInScreen(ze,Ze)||(Ae.display="none"),Ae},W.config=__assign$a(__assign$a({},W.player.config.watermarkConfig||{}),Y),W.prepareDom(),window.addEventListener("resize",W.onResize),W.player.on(PLAY_EVENT$1.TIME_UPDATE,W.onTimeChange);var z=W.config.defaultText;return z&&W.watermarkThis(z),W.initMutationObserver(),W.setupPlayerEvents(),W.listenFakeFullscreen(),W}return U.prototype.add=function(L,Y){Y===void 0&&(Y=!1);var X=L.url,W=L.id;if(!this.watermarks[W]){var z=this.computeCss(L),J={css:z,cfg:{id:W,url:X,onerror:function(){this.remove()}}},Z=new Watermark(this.$watermarkContainer,J,Y);return this.watermarks[W]=[Z,L],Z}},U.prototype.watermarkThis=function(L,Y){this.coverWatermarkParam=null;var X=this.player.container,W=X.querySelectorAll("."+WaterMarkCoverClassName$1);W.forEach(function(ie){return ie.remove()});var z=Y||{},J=z.strokeOpacity,Z=J===void 0?.3:J,ee=z.opacity,te=ee===void 0?.3:ee,re=document.createElement("div");return re.classList.add(WaterMarkCoverClassName$1),re.style.position="absolute",re.style.width="100%",re.style.height="100%",re.style.backgroundSize="30%",re.style.userSelect="none",re.style.zIndex="1",re.style.backgroundImage=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' height='200px' width='200px'><text stroke='black' stroke-width='1' stroke-opacity='`+Z+"' transform='translate(20, 120) rotate(-30)' fill='rgb(222, 222, 222)' font-size='22' opacity='"+te+"'>"+L+'</text></svg>")',X.appendChild(re),this.coverWatermarkParam=[L,Y],re},U.prototype.remove=function(L){var Y,X=((Y=this.watermarks[L])!==null&&Y!==void 0?Y:[])[0];X&&(X.destroy(),delete this.watermarks[L],delete this.timeTable[L])},U.prototype.clear=function(){Object.values(this.watermarks).forEach(function(L){var Y=L[0];return Y.destroy()}),this.watermarks={},this.timeTable={}},U.prototype.get=function(L){return this.watermarks[L]},U.prototype.schedule=function(L,Y,X){this.timeTable[L]?this.timeTable[L].push({start:Y,end:X}):this.timeTable[L]=[{start:Y,end:X}]},U.prototype.unschedule=function(L){var Y;delete this.timeTable[L];var X=((Y=this.watermarks[L])!==null&&Y!==void 0?Y:[])[0];X==null||X.hide()},U.prototype.destroy=function(){var L,Y;G.prototype.destroy.call(this),window.removeEventListener("resize",this.onResize),this.mutationObserver.disconnect(),this.mutationObserver=null,!((L=this.$watermarkContainer)===null||L===void 0)&&L.parentNode&&((Y=this.$watermarkContainer)===null||Y===void 0||Y.remove())},U.prototype.hookPlaySessionStart=function(){this.clear()},U.prototype.hookPlaySessionEnd=function(){},U.prototype.initMutationObserver=function(){var L=this;this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(function(Y){L.checkIsCoverWatermarkRemoved()}),this.mutationObserver.observe(this.player.container,{childList:!0,subtree:!0,attributes:!0})},U.prototype.checkIsCoverWatermarkRemoved=function(){if(!!this.coverWatermarkParam){var L=this.player.container,Y=L.querySelector("."+WaterMarkCoverClassName$1);Y!=null&&Y.offsetParent||this.watermarkThis.apply(this,this.coverWatermarkParam)}},U.prototype.setupPlayerEvents=function(){var L=this;this.msg.on(H5_EXT_EVENT.GETINFO_OVER,function(Y){var X=Y.data;L.watermarkLoadingDefer=new Promise(function(W){return __awaiter$6(L,void 0,void 0,function(){var z,J,Z,ee,te,re;return __generator$6(this,function(ie){switch(ie.label){case 0:if(z=X.parseData,!z)return[2];J=z.watermarkList,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,requestActionWatermark((re=J)===null||re===void 0?void 0:re.action,z.duration*1e3)];case 2:return te=ie.sent(),Z=Object.keys(te.watermarks).map(function(ne){return te.watermarks[ne]}),ee=te.schedules,[3,4];case 3:return ie.sent(),[3,4];case 4:return Z||(Z=z.watermarkList.wi),W([Z,ee]),[2]}})})})}),this.player.on(H5_PLAY_EVENT.VIDEO_PLAYING,function(Y){var X=Y.data;return __awaiter$6(L,void 0,void 0,function(){var W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:return X.isFirst?this.watermarkLoadingDefer?(z=(W=this.addPendingData).apply,J=[this],[4,this.watermarkLoadingDefer]):[3,2]:[2];case 1:z.apply(W,J.concat([Z.sent()])),Z.label=2;case 2:return[2]}})})}),this.player.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(Y){var X=Y.data;return __awaiter$6(L,void 0,void 0,function(){var W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:return X.code!==ErrorCode.SUC?[2]:(this.clear(),this.watermarkLoadingDefer?(z=(W=this.addPendingData).apply,J=[this],[4,this.watermarkLoadingDefer]):[3,2]);case 1:z.apply(W,J.concat([Z.sent()])),Z.label=2;case 2:return[2]}})})})},U.prototype.addPendingData=function(L,Y){var X=this;L&&L.forEach(function(W){return X.add(W,!W.action)}),Y&&Object.keys(Y).forEach(function(W){return Y[W].forEach(function(z){return X.schedule(W,z.start,z.end)})}),this.watermarkLoadingDefer=null},U.prototype.prepareDom=function(){var L=this.player.container;L.insertAdjacentHTML("beforeend",str),this.$watermarkContainer=L.querySelector('[data-role="txp-ui-watermark-mod"]')},U.prototype.isInScreen=function(L,Y){var X=L.x,W=L.y,z=L.w,J=L.h,Z=Y.x,ee=Y.y,te=Y.w,re=Y.h;return Z<X||ee<W||Z>X+z-te?!1:ee<=W+J-re},U.prototype.listenFakeFullscreen=function(){var L=this,Y="ctrlbar";this.msg.on("pluginsetup:"+Y,function(){var X=L.player.plugins[Y];X.on("browserFullscreenChange",L.onResize)})},U.pluginName=WatermarkPluginName$1,U}(Plugin);H5Player.registerPlugin(WatermarkPlugin.pluginName,WatermarkPlugin);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(G,U){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(L[X]=Y[X])},extendStatics(G,U)};function __extends(G,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");extendStatics(G,U);function L(){this.constructor=G}G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var __assign$1=function(){return __assign$1=Object.assign||function(U){for(var L,Y=1,X=arguments.length;Y<X;Y++){L=arguments[Y];for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&(U[W]=L[W])}return U},__assign$1.apply(this,arguments)};function __awaiter(G,U,L,Y){function X(W){return W instanceof L?W:new L(function(z){z(W)})}return new(L||(L=Promise))(function(W,z){function J(te){try{ee(Y.next(te))}catch(re){z(re)}}function Z(te){try{ee(Y.throw(te))}catch(re){z(re)}}function ee(te){te.done?W(te.value):X(te.value).then(J,Z)}ee((Y=Y.apply(G,U||[])).next())})}function __generator(G,U){var L={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},Y,X,W,z;return z={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function J(ee){return function(te){return Z([ee,te])}}function Z(ee){if(Y)throw new TypeError("Generator is already executing.");for(;L;)try{if(Y=1,X&&(W=ee[0]&2?X.return:ee[0]?X.throw||((W=X.return)&&W.call(X),0):X.next)&&!(W=W.call(X,ee[1])).done)return W;switch(X=0,W&&(ee=[ee[0]&2,W.value]),ee[0]){case 0:case 1:W=ee;break;case 4:return L.label++,{value:ee[1],done:!1};case 5:L.label++,X=ee[1],ee=[0];continue;case 7:ee=L.ops.pop(),L.trys.pop();continue;default:if(W=L.trys,!(W=W.length>0&&W[W.length-1])&&(ee[0]===6||ee[0]===2)){L=0;continue}if(ee[0]===3&&(!W||ee[1]>W[0]&&ee[1]<W[3])){L.label=ee[1];break}if(ee[0]===6&&L.label<W[1]){L.label=W[1],W=ee;break}if(W&&L.label<W[2]){L.label=W[2],L.ops.push(ee);break}W[2]&&L.ops.pop(),L.trys.pop();continue}ee=U.call(G,L)}catch(te){ee=[6,te],X=0}finally{Y=W=0}if(ee[0]&5)throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}}var DEFAULT_GETINFO_CONFIG$1={path:function(){return""}(),retryCount:3,zbtype:0,test:0,timeout:6e3};function getSpHttps$1(){return location.protocol==="https:"?1:0}function getTimeStampStr$1(G){var U=G||10,L=(+new Date).toString();return L.length>U?L.substring(0,U):("00000000000"+L).slice(-1*U)}var _a$3,STREAM_TYPE;(function(G){G[G.AUTO=0]="AUTO",G[G.FLV=1]="FLV",G[G.HLS=2]="HLS"})(STREAM_TYPE||(STREAM_TYPE={}));var ZB_TYPE;(function(G){G[G.XUEYUAN=4]="XUEYUAN",G[G.CHRISTMAS=5]="CHRISTMAS",G[G.VERIFY=50]="VERIFY",G[G.SPORTS=100]="SPORTS",G[G.MARK=200]="MARK"})(ZB_TYPE||(ZB_TYPE={}));var ZB_CGI_MAP=(_a$3={0:["//infozb6.video.qq.com/?","//bkinfozb6.video.qq.com/?"]},_a$3[ZB_TYPE.XUEYUAN]="//innerzb.video.qq.com/?",_a$3[ZB_TYPE.VERIFY]="//auth.zb.qq.com/?",_a$3[ZB_TYPE.MARK]="//infozb.pcg.com:8080/?",_a$3),ZB_CGI_TEST="//test.zb.video.qq.com",LIVE_GET_INFO_DATA_KEYS;(function(G){G.playtime="live-getinfo:playtime",G.livesid="live-getinfo:livesid",G.isuserpay="live-getinfo:isuserpay",G.cpay="live-getinfo:cpay",G.restpreviewcnt="live-getinfo:resetpreviewcnt"})(LIVE_GET_INFO_DATA_KEYS||(LIVE_GET_INFO_DATA_KEYS={}));var playErrDataMap=new Map([["videoPlayError",{name:"setErrorView",params:{msg:"\u5BF9\u4E0D\u8D77\uFF0C\u83B7\u53D6\u89C6\u9891\u4FE1\u606F\u9519\u8BEF~"}}],["areaLimit",{name:"setErrorView",params:{msg:"\u5BF9\u4E0D\u8D77\uFF0C\u60A8\u6240\u5728\u533A\u57DF\u65E0\u6CD5\u89C2\u770B\u6B64\u89C6\u9891~"}}],["bandWidthLimit",{name:"setErrorView",params:{msg:"\u6682\u65F6\u65E0\u6CD5\u89C2\u770B\u6B64\u89C6\u9891\uFF0C\u8BF7\u60A8\u7A0D\u540E\u518D\u8BD5~"}}],["msgInterrupt",{name:"setErrorView",params:{msg:"\u5BF9\u4E0D\u8D77\uFF0C\u89C6\u9891\u4FE1\u606F\u4E2D\u65AD\u4E86~"}}],["msgInterrupt",{name:"setErrorView",params:{msg:"\u5BF9\u4E0D\u8D77\uFF0C\u89C6\u9891\u4FE1\u606F\u4E2D\u65AD\u4E86~"}}],["videoNotBegin",{name:"setErrorView",params:{hideRefresh:!0,hideCode:!0,msg:"\u672C\u6B21\u76F4\u64AD\u672A\u5F00\u59CB\uFF0C\u656C\u8BF7\u5173\u6CE8\uFF01"}}],["videoIsOver",{name:"setErrorView",params:{isOver:!0,hideRefresh:!0,hideCode:!0,msg:"\u672C\u6B21\u76F4\u64AD\u5DF2\u7ED3\u675F\uFF0C\u656C\u8BF7\u5173\u6CE8\uFF01"}}],["numOfPeopleLimit",{name:"setQueueFullView"}],["mustLogin",{name:"setErrorView",params:{msg:"\u7F3A\u4E4F\u7528\u6237\u767B\u5F55\u4FE1\u606F"}}],["isNotInPlayList",{name:"setErrorView",params:{msg:"\u767B\u5F55\u7528\u6237\u4E0D\u5728\u767D\u540D\u5355"}}],["getLoginInfoFailed",{name:"setErrorView",params:{msg:"\u83B7\u53D6\u767B\u5F55\u4FE1\u606F\u5931\u8D25\uFF0C\u8BF7\u60A8\u5C1D\u8BD5\u91CD\u65B0\u767B\u5F55~"}}],["showPayTip",{name:"showPayTips",params:{cmd:1}}],["copyrightLimit",{name:"setErrorView",params:{msg:"\u7531\u4E8E\u7248\u6743\u65B9\u8981\u6C42\uFF0C\u6B64\u5185\u5BB9\u6682\u4E0D\u652F\u6301\u64AD\u653E"}}],["universalTip",{name:"setErrorView",params:{msg:"\u64AD\u653E\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5~"}}],["videoCannotFind",{name:"setErrorView",params:{msg:"\u5F53\u524D\u6CA1\u6709\u6B63\u5728\u76F4\u64AD\u7684\u8282\u76EE~"}}],["notSptDrm",{name:"setErrorView",params:{msg:"\u4E3A\u4FDD\u62A4\u7248\u6743\uFF0C\u672C\u5185\u5BB9\u5DF2\u52A0\u5BC6\uFF0C\u6B64\u6D4F\u89C8\u5668\u6682\u4E0D\u652F\u6301\u89C2\u770B"}}]]),DEFAULT_REQ_PARAMS$1={cmd:2,cnlid:"",pla:0,stream:STREAM_TYPE.HLS,system:0,appVer:"1.0.0.0",encryptVer:"",qq:0,device:"PC",guid:"",flowid:"",defn:"",host:location.host,livepid:"",logintype:1,vip_status:1,livequeue:1,livedrm:0,fntick:"",tm:"",sdtfrom:"10201",platform:"10201",cKey:"",queueStatus:0,sphttps:getSpHttps$1(),vkey:"",user:"",playbacktime:0,auth_from:"",auth_ext:"",logintoken:"",forcedefn:""},JsonpRequestor$1=function(){function G(U){this._jsonpPrefix=U}return G.prototype.start=function(U,L,Y){var X=Y.timeout,W=X===void 0?DEFAULT_GETINFO_CONFIG$1.timeout:X;return netTool.jsonp(U,{query:L,timeout:W,name:""+this._jsonpPrefix+Math.floor(Math.random()*1e6)})},G}();function isNormalCode(G){return[0,10,11,13].indexOf(G)!==-1}function isRetryCode(G){return[9,23,24,26,27,28,32,44,47,50,52,56,57,62,-80004,-80003].indexOf(G)!==-1}function getPayActionData(G){return G.ispay!==1||G.iretdetailcode===1?G.iretdetailcode===1?{name:"execVIPRight",params:{msg:"\u672C\u76F4\u64AD\u9700\u4ED8\u8D39\u89C2\u770B",type:"backplay",refer:113}}:{downgradeLevel:!0,name:"unlock1080p",params:{msg:"\u6B64\u6E05\u6670\u5EA6\u9700\u8981\u4ED8\u8D39\u89C2\u770B",type:"flash.live.1080p"}}:{name:"showPayTips",params:{msg:"\u672C\u76F4\u64AD\u9700\u4ED8\u8D39\u89C2\u770B",cmd:3}}}function getErrorData(G){var U={};U["1"]=playErrDataMap.get("videoPlayError"),U["2"]=playErrDataMap.get("areaLimit"),U["3"]=playErrDataMap.get("areaLimit"),U["4"]=playErrDataMap.get("bandWidthLimit"),U["5"]=playErrDataMap.get("areaLimit"),U["6"]=playErrDataMap.get("msgInterrupt"),U["7"]=playErrDataMap.get("videoNotBegin"),U["8"]=playErrDataMap.get("videoIsOver"),U["9"]=playErrDataMap.get("numOfPeopleLimit"),U["16"]=playErrDataMap.get("mustLogin"),U["18"]=playErrDataMap.get("isNotInPlayList");var L=getPayActionData(G);U["25"]=L,U["28"]=playErrDataMap.get("getLoginInfoFailed"),U["30"]=L,U["31"]=L,U["32"]=playErrDataMap.get("getLoginInfoFailed"),U["45"]=playErrDataMap.get("showPayTip"),U["51"]=playErrDataMap.get("videoCannotFind"),U["67"]=playErrDataMap.get("copyrightLimit"),U["97"]=playErrDataMap.get("notSptDrm");var Y=G.iretcode,X=U[String(Y)];return X=X||playErrDataMap.get("universalTip"),X}function parseCodecInfo$1(G){var U,L=CODEC.H264,Y=G==null?void 0:G.vcode;return Y===2&&(L=CODEC.H265,U=KERNEL_NAME.WASM),{codec:L,kernelName:U}}var checkResponseMiddleWare$1=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y;return __generator(this,function(X){switch(X.label){case 0:return L=G.resData.iretcode,typeof L=="undefined"?(G.throw(ErrorCode.GETINFO_PARSE,ErrorMsg.GETINFO_PARSE,getErrorData(G.resData)),[2]):isNormalCode(L)?[4,U()]:(Y=""+ErrorCode.GETINFO_LIVE_SERVER_CODE_PREFIX+("000"+L).slice(-3),G.throw(Y,ErrorMsg.GETINFO_CODE,getErrorData(G.resData)),[2]);case 1:return X.sent(),[2]}})})},parseResponseMiddleWare$1=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X;return __generator(this,function(W){switch(W.label){case 0:return L=G.resData,Y=L.formats instanceof Array?L.formats:[],G.parseData={preview:+L.playtime,urls:[{url:L.playurl}].concat(L.backurl_list),definitionList:Y.map(function(z){return{id:z.id,name:z.fn,cname:z.fnname,sname:z.defnname,resolution:z.defnrate,sl:z.fn===L.defn?1:0,lmt:z.vip||0}}),watermarkList:{wi:L.brandpos?[L.brandpos]:[]}},(X=G.parseData.definitionList)===null||X===void 0||X.reverse(),G.logger.log("parse ",G.parseData),[4,U()];case 1:return W.sent(),[2]}})})},Qvsec={};Qvsec.ha=function(G){for(var U=[],L=0;L<64;)U[L]=0|Math.abs(Math.sin(++L))*4294967296;function Y(W,z){return((W>>1)+(z>>1)<<1)+(W&1)+(z&1)}var X=function(W){for(var z,J,Z,ee,te=[],re=unescape(encodeURI(W)),ie=re.length,ne=[z=1732584193,J=-271733879,~z,~J],oe=0;oe<=ie;)te[oe>>2]|=(re.charCodeAt(oe)||128)<<8*(oe++%4);for(te[W=(ie+8>>6)*G+14]=ie*8,oe=0;oe<W;oe+=G){for(ie=ne,ee=0;ee<64;)ie=[Z=ie[3],Y(z=ie[1],(Z=Y(Y(ie[0],[z&(J=ie[2])|~z&Z,Z&z|~Z&J,z^J^Z,J^(z|~Z)][ie=ee>>4]),Y(U[ee],te[[ee,5*ee+1,3*ee+5,7*ee][ie]%G+oe])))<<(ie=[7,12,17,22,5,9,14,20,4,11,G,23,6,10,15,21][4*ie+ee++%4])|Z>>>32-ie),z,J];for(ee=4;ee;)ne[--ee]=Y(ne[ee],ie[ee])}for(W="";ee<32;)W+=(ne[ee>>3]>>(1^ee++&7)*4&15).toString(G);return W};return X}(16);Qvsec.stringToHex=function(G){for(var U="",L=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),Y=0;Y<G.length;Y++)U+=L[G.charCodeAt(Y)>>4]+L[G.charCodeAt(Y)&15];return U};Qvsec.hexToString=function(G){for(var U="",L=G.substr(0,2)=="0x"?2:0;L<G.length;L+=2)U+=String.fromCharCode(parseInt(G.substr(L,2),16));return U};Qvsec._Seed="#$#@#*ad";Qvsec.tempcalc=function(G,U){for(var L="",Y=0;Y<G.length;Y++)L+=String.fromCharCode(G.charCodeAt(Y)^U.charCodeAt(Y%4));return L};Qvsec.u1=function(G,U){for(var L="",Y=U;Y<G.length;Y+=2)L+=G.charAt(Y);return L};Qvsec._urlStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Qvsec.urlenc=function(G,U,L){for(var Y="",X,W,z,J,Z,ee,te,re=0;re<G.length;)X=G.charCodeAt(re++),W=G.charCodeAt(re++),z=G.charCodeAt(re++),re==15&&(Y=Y+"A",Y=Y+U,Y=Y+L),J=X>>2,Z=(X&3)<<4|W>>4,ee=(W&15)<<2|z>>6,te=z&63,isNaN(W)?ee=te=64:isNaN(z)&&(te=64),Y=Y+Qvsec._urlStr.charAt(J)+Qvsec._urlStr.charAt(Z)+Qvsec._urlStr.charAt(ee)+Qvsec._urlStr.charAt(te);return Y};Qvsec.$xx=function(G,U,L,ee,Z,W){var z="123456";if(W.length<3||W.substr(0,2)!="7.")return"err";var J=W.substr(2);J=="1"&&(z="06fc1464"),J=="2"&&(z="4244ce1b"),J=="3"&&(z="77de31c5"),J=="4"&&(z="e0149fa2"),J=="5"&&(z="60394ced"),J=="6"&&(z="2da639f0"),J=="7"&&(z="c2f0cf9f");var Z=Z||parseInt(+new Date/1e3),ee=(""+ee).charAt(0),te=Qvsec.ha(z+U+Z+"*#06#"+G);return te};function updateCkey$1(G,U){var L=G.cnlid,Y=G.platform,X=G.sdtfrom,W=new Date().getDay(),z="7."+(W===0?7:W),J=(U==null?void 0:U.svrtick)>0?(""+(U==null?void 0:U.svrtick)*1e3).substring(0,10):getTimeStampStr$1(),Z=Qvsec.$xx(Y,L,X,1,J,z);return G.tm=J,G.fntick=J,G.cKey=Z,G.encryptVer=z,G}var perpareRequestMiddleWare$1=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y;return __generator(this,function(X){switch(X.label){case 0:return L=G.reqParams,G.reqParams.queueStatus=((Y=G.resData)===null||Y===void 0?void 0:Y.queue_status)||0,updateCkey$1(L,G.resData),G.logger.log("request params is:",G.reqParams),[4,U()];case 1:return X.sent(),[2]}})})};function getRequestUrl$1(G,U){var L=G.test,Y=G.path,X=G.zbtype,W=X===void 0?0:X;if(L)return ZB_CGI_TEST;var z=Y||ZB_CGI_MAP[W],J;return typeof z=="string"?J=z:J=z[U%z.length],J}var sendRequestMiddleWare$1=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te;return __generator(this,function(re){switch(re.label){case 0:G.logger.log("doRequest start..."),L=G.requestor,Y=G.reqParams,X=G.config,W=X.retryCount,J=0,re.label=1;case 1:if(!(J<W+1))return[3,7];G.logger.log("retry... count is: ",J),re.label=2;case 2:return re.trys.push([2,4,,5]),z=null,G.reqPath=getRequestUrl$1(X,J),Z=G,[4,L.start(G.reqPath,Y,X)];case 3:return Z.resData=re.sent(),[3,5];case 4:return ee=re.sent(),G.resData=null,G.logger.log("the "+J+" retry err:",ee),(ee==null?void 0:ee.message)==="jsonp timeout"&&(z={code:ErrorCode.GETINFO_TIMEOUT,message:ErrorMsg.GETINFO_TIMEOUT}),[3,5];case 5:if(G.endTime=+new Date,G.alreadyRetryCount=J,G.resData){if(te=G.resData.iretcode,isNormalCode(te)||!isRetryCode(te))return[3,7];updateCkey$1(Y,G.resData)}re.label=6;case 6:return J++,[3,1];case 7:return G.endTime=+new Date,G.resData?(G.logger.log("sendRequest over... ret is: ",G.resData),[4,U()]):(G.throw((z==null?void 0:z.code)||ErrorCode.GETINFO_NET,(z==null?void 0:z.message)||ErrorMsg.GETINFO_NET),[2]);case 8:return re.sent(),[2]}})})},setPlayerDataMiddleWare$1=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W;return __generator(this,function(z){switch(z.label){case 0:return L=G.player,Y=G.resData,X=G.parseData,L.setCommonKv((W={preview:X.preview,drm:Y.drmtype},W[COMMON_DATA_KEY.cdnid]=Y.cdn_name,W[LIVE_GET_INFO_DATA_KEYS.isuserpay]=Y.isuserpay,W[LIVE_GET_INFO_DATA_KEYS.livesid]=Y.livesid,W[LIVE_GET_INFO_DATA_KEYS.playtime]=Y.playtime,W[LIVE_GET_INFO_DATA_KEYS.cpay]=Y.ispay,W[LIVE_GET_INFO_DATA_KEYS.restpreviewcnt]=Y.restpreviewcnt,W)),[4,U()];case 1:return z.sent(),[2]}})})};function compose$1(G){return function(U,L){var Y=-1;return X(0);function X(W){if(W<=Y)return Promise.reject(new Error("next() called multiple times"));Y=W;var z=G[W];if(W===G.length&&(z=L),!z)return Promise.resolve(null);try{return Promise.resolve(z(U,X.bind(null,W+1)))}catch(J){return Promise.reject(J)}}}}var GetInfoLive=function(G){__extends(U,G);function U(L,Y,X){var W,z=G.call(this,L,Y,X)||this;return z._abort=!1,z._seq=0,z._config=__assign$1(__assign$1(__assign$1({},DEFAULT_GETINFO_CONFIG$1),((W=L.config)===null||W===void 0?void 0:W.getinfoLiveConfig)||{}),Y),z.logger=new Logger(L.config.instanceId,"GetInfoLive"),z}return U.prototype.request=function(L,Y){var X=this,W=L,z=__assign$1(__assign$1(__assign$1({},DEFAULT_REQ_PARAMS$1),Y),{cnlid:W});this._abort=!1,this._seq+=1;var J={player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,config:this._config,reqParams:z,reqPath:void 0,resData:void 0,requestor:new JsonpRequestor$1("livegetinfo_callback_"),parseData:void 0,error:void 0,throw:function(ae,le,ue){var ce=new Error("getinfo err");throw ce.code=ae,ce.message=le,ce.data=ue,ce},seq:this._seq,urlConfig:null,logger:this.logger},Z=["cnlid","platform","sdtfrom","guid"],ee=Z.find(function(ae){return!z[ae]});if(ee)return J.error={code:ErrorCode.GETINFO_INNER,message:"\u7F3A\u5C11\u5FC5\u8981\u64AD\u653E\u53C2\u6570 ("+ee+") "},Promise.resolve(this.formatOutputData(J));var te=this._config.prepareRequestMiddleWare||perpareRequestMiddleWare$1,re=this._config.sendRequestMiddleWare||sendRequestMiddleWare$1,ie=this._config.checkResponseMiddleWare||checkResponseMiddleWare$1,ne=this._config.parseResponseMiddleWare||parseResponseMiddleWare$1;this._middlewares=[te,re,ie,ne,setPlayerDataMiddleWare$1];var oe=compose$1(this._middlewares),se=new Promise(function(){});return oe(J).then(function(){return X._abort||X._seq!==J.seq?se:(X.logger.log("getinfo \u6210\u529F: ",J),X.formatOutputData(J))}).catch(function(ae){if(X._abort||X._seq!==J.seq)return se;var le=ae.code,ue=ae.message;return le||(X.logger.warn("getinfo \u5185\u90E8\u9519\u8BEF: ",ae),le=ErrorCode.GETINFO_INNER,ue=ErrorMsg.GETINFO_INNER+", err ("+ae+")"),J.error={code:le,message:ue,data:ae.data},X.formatOutputData(J)})},U.prototype.abort=function(){this._abort=!0},U.prototype.destroy=function(){this.abort(),this._middlewares=null,G.prototype.destroy.call(this)},U.prototype.formatOutputData=function(L){var Y,X,W=L.resData,z=L.parseData,J=__assign$1({},L);["requestor","player","throw"].forEach(function(ce){delete J[ce]});var Z=void 0,ee=this.player.getCommonKv(COMMON_DATA_KEY.drm),te=parseCodecInfo$1(W),re=te.codec,ie=te.kernelName;if(W&&z){var ne=z==null?void 0:z.urls.map(function(ce){return ce.url}),oe=ne[0],se=ne.slice(1),ae=((Y=W==null?void 0:W.drmckc)===null||Y===void 0?void 0:Y.split("|"))||[],le=ae[0],ue=ae[1];Z={url:oe,backupUrls:se,drmConfig:le?this.prepareDRMConfig({drmType:ee,licenseUrl:le,certificateUrl:ue}):null,chachaParam:ee===DRM_TYPE.CHACHA?{cnlid:(X=L.reqParams.cnlid)===null||X===void 0?void 0:X.substring(0,L.reqParams.cnlid.length-2),baseKey:W==null?void 0:W.deckey,randoms:W==null?void 0:W.randoms}:null,p2pConfig:this.prepareP2PConfig({keyId:W.livesid,useP2P:!!W.hlsp2p,downloadMode:0}),drmType:ee,vcodec:re}}return this.player.setCommonKv(COMMON_DATA_KEY.codec,re),__assign$1(__assign$1({},J),{kernelName:ie,urlConfig:Z})},U.prototype.prepareDRMConfig=function(L){var Y,X,W=L.drmType,z=L.licenseUrl,J=L.certificateUrl,Z=this.player.getCommonKv,ee=(Y={},Y[DRM_TYPE.FAIR_PLAY]=KeySystems.FairPlayWebKit,Y[DRM_TYPE.WIDEVINE]=KeySystems.Widevine,Y),te={licenseUrl:z,certificate:{},keySystem:ee[W],licenseRequestSetup:function(re){if(W===DRM_TYPE.FAIR_PLAY){re.responseType="text";var ie={guid:Z(COMMON_DATA_KEY.guid)},ne=Object.keys(ie).map(function(oe){return oe+"="+ie[oe]}).join("&");return re.body=re.body+"&"+ne,re}return re},licenseResponseSetup:function(re){return W===DRM_TYPE.FAIR_PLAY?stringTool.base64ToUint8Array(re):re}};return W===DRM_TYPE.FAIR_PLAY&&(te.certificate=(X={},X[ee[W]]=J,X)),te},U.prototype.prepareP2PConfig=function(L){return __assign$1({flowId:this.player.getCommonKv(COMMON_DATA_KEY.flowid),playerInfo:this.getPlayerInfo()},L)},U.prototype.getPlayerInfo=function(){var L={platform:this.player.getCommonKv(COMMON_DATA_KEY.platform)||"",osVer:this.player.getCommonKv(COMMON_DATA_KEY.osver)||"",broVer:this.player.getCommonKv(COMMON_DATA_KEY.ua)||"",playerVer:this.player.getCommonKv(COMMON_DATA_KEY.playerver)||"",guid:this.player.getCommonKv(COMMON_DATA_KEY.guid)||"",qq:"",wx:"",vip:!1},Y=this.player.getCommonKv(COMMON_DATA_KEY.hc_main_login);return Y==="qq"?L.qq=this.player.getCommonKv(COMMON_DATA_KEY.hc_vuserid):Y==="wx"&&(L.wx=this.player.getCommonKv(COMMON_DATA_KEY.hc_vuserid)),L},U.pluginName="__thumbplayer-video-request",U}(Plugin),PATH={COMMON:["//h5vv6.video.qq.com/getvinfo","//bkh5vv.video.qq.com/getvinfo","//av.video.qq.com/getvinfo"],TEST:"//testvv.video.qq.com/geth5info?"},CKEY_VRE;(function(G){G.CKEY_8="8.1",G.CKEY_9="9.1"})(CKEY_VRE||(CKEY_VRE={}));var VOD_GET_INFO_DATA_KEYS;(function(G){G.videoType="vod-getinfo:videoType",G.videoCharged="vod-getinfo:videoCharged",G.userPayType="vod-getinfo:userPayType",G.vipToken="vod-getinfo:vipToken",G.ckey="vod-getinfo:ckey",G.ckeyVersion="vod-getinfo:ckeyVersion",G.cginame="vod-getinfo:cginame"})(VOD_GET_INFO_DATA_KEYS||(VOD_GET_INFO_DATA_KEYS={}));var URL_EXPIRE_TIME=2*60*60*1e3,VideoType={1:"H264",2:"H265",3:"HDR10",4:"DolbyVision",5:"None(Audio Only)",6:"SDR+",7:"SDR",8:"T265",9:"IMax",10:"SFR_HDR(60FPS)",11:"SFR4X_HDR(120FPS)",12:"SFR3X_HDR(90FPS)",13:"AVS3",14:"AV1",15:"TIE_V2",16:"SFR_TIE_V2(60FPS)",17:"SFR3X_TIE_V2(90FPS)",18:"SFR4X_TIE_V2(120FPS)",19:"CUVA-HDR",20:"VVC(O266)",21:"O264"},DEFAULT_GETINFO_CONFIG={path:function(){return""}(),retryCount:3,test:0,timeout:6e3,ckeyVer:CKEY_VRE.CKEY_8};function getRefer(){var G="";try{G=document.location.host,isInIframe()&&(G=removeUrlParams(document.referrer||""))}catch(U){}return G}function removeUrlParams(G){if(typeof G=="string"){var U=document.createElement("a");return U.href=G,U.protocol+"//"+U.host+U.pathname}}function getEhost(){var G="";try{G=location.href.replace(location.search,""),isInIframe()&&(G=removeUrlParams(top.location.href||""))}catch(U){}return G}function isTencentVideoSite(){return location.hostname==="v.qq.com"||location.hostname==="film.qq.com"}function isInIframe(){try{return window.self!==window.top}catch(G){return!0}}function getSpHttps(){return location.protocol==="https:"?1:0}function getTimeStampStr(G){var U=G||10,L=(+new Date).toString();return L.length>U?L.substring(0,U):("00000000000"+L).slice(-1*U)}function constructM3U8(G,U,L){return L.replace(U,G)}var DEFAULT_REQ_PARAMS={charge:0,otype:"json",defnpayver:isTencentVideoSite()?1:0,spau:1,spaudio:1,spwm:1,sphls:1,host:location.host,refer:getRefer(),ehost:getEhost(),sphttps:getSpHttps(),encryptVer:"",cKey:"",clip:4,guid:"",flowid:"",platform:"",sdtfrom:"",appVer:"1.0.0.0",unid:"",auth_from:"",auth_ext:"",vid:"",defn:"",fhdswitch:0,dtype:3,drm:0,spsrt:2,tm:"",lang_code:0,logintoken:""},JsonpRequestor=function(){function G(U){this._jsonpPrefix=U}return G.prototype.start=function(U,L,Y){var X=Y.timeout,W=X===void 0?DEFAULT_GETINFO_CONFIG.timeout:X;return netTool.jsonp(U,{query:L,timeout:W,name:""+this._jsonpPrefix+Math.floor(Math.random()*1e6)})},G}(),checkResponseMiddleWare=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te;return __generator(this,function(re){switch(re.label){case 0:return L=G.resData,Y=G.player,X=typeof L.em=="undefined"?0:+L.em,W=+L.exem,z=(((te=L.vl)===null||te===void 0?void 0:te.vi)||[])[0],Y.setCommonKv((Z={},Z[COMMON_DATA_KEY.uip]=L.ip,Z[COMMON_DATA_KEY.hh_ip]=L.ip,Z[VOD_GET_INFO_DATA_KEYS.vipToken]=getTokenValue(L.report||"","vip_token"),Z)),z&&Y.setCommonKv((ee={},ee[VOD_GET_INFO_DATA_KEYS.videoCharged]=z.ch,ee[VOD_GET_INFO_DATA_KEYS.userPayType]=computePayType(z.st,z.ch),ee[VOD_GET_INFO_DATA_KEYS.videoType]=z.videotype,ee)),X===0&&z&&(z.st===8||!isNaN(W)&&W!==0)&&+L.preview==0&&(X=83),X!==0?(J=""+ErrorCode.GETINFO_SERVER_CODE_PREFIX+("000"+X).slice(-3)+(isNaN(W)?"":"."+W),G.throw(J,ErrorMsg.GETINFO_CODE),[2]):L.s!=="o"||!z?(G.throw(ErrorCode.GETINFO_PARSE,ErrorMsg.GETINFO_PARSE),[2]):[4,U()];case 1:return re.sent(),[2]}})})};function computePayType(G,U){var L=0;return G===8?L=1:G===2&&(U>0?L=2:U===0&&(L=0)),L}function getTokenValue(G,U){var L=G.split("$").map(function(z){return z.split("=")}),Y=L.find(function(z){return z[0]===U})||[],X=Y[1],W=X===void 0?"0":X;return+W}function getHlsUrls(G){var U=G.vl.vi[0].ul.ui;return U.map(function(L){var Y;return L.url&&((Y=L.hls)===null||Y===void 0?void 0:Y.pt)?{url:L.url+L.hls.pt,vt:L.vt}:{url:L.url,vt:L.vt}})}function getMp4Url(G,U,L,Y,X,W){for(var z=[],J,Z,ee=G.ui.length,te=0;te<ee;te++)J=G.ui[te],Z={url:"",vt:0},J.url&&(J.url&&J.url.indexOf(U+".flv")===-1&&J.url.indexOf(U+".mp4")===-1?Z.url=J.url+L:Z.url=J.url,J.vt&&(Z.vt=parseInt(J.vt,10)),Z.url.indexOf("sdtfrom")===-1&&(Z.url.indexOf("?")>-1?Z.url+="&sdtfrom="+X:Z.url+="?sdtfrom="+X,Z.url+="&guid="+W+"&vkey="+Y),z.push(Z));return z}function getUrls(G,U,L){var Y,X,W,z,J,Z,ee,te;if(!(((W=(X=(Y=G.vl)===null||Y===void 0?void 0:Y.vi[0].ul)===null||X===void 0?void 0:X.ui)===null||W===void 0?void 0:W.length)>0))return[];var re=G.dltype,ie=((z=G.vl)===null||z===void 0?void 0:z.vi)[0],ne=ie.fn,oe=ie.fvkey;if(re===3||re===8){var se=getHlsUrls(G);if(re===8){var ae=G.vl.vi[0].ul.m3u8,le=ae&&!(ae.indexOf("#EXTINF:")>0||ae.indexOf("EXT-X-TARGETDURATION:")>0),ue=se[0].url,ce={};le?se.forEach(function(de){ce[de.url]=constructM3U8(de.url,ue,ae)}):ce[ue]=ae,se.m3u8=ce}return se}if(re===1){var he=((Z=(J=ie.cl)===null||J===void 0?void 0:J.ci)===null||Z===void 0?void 0:Z.length)||0,fe=ie.fvkey&&ie.fn&&((te=(ee=ie.ul)===null||ee===void 0?void 0:ee.ui)===null||te===void 0?void 0:te.length)>0;if(he<=0&&fe)return getMp4Url(ie.ul,ie.lnk,ne,oe,U,L)}return[]}function getDrm(G){var U,L=((U=G==null?void 0:G.fl)===null||U===void 0?void 0:U.fi)||[],Y=L.find(function(X){return+X.sl==1});return Y?+Y.drm:0}function getPreview(G){var U,L=((U=G.vl)===null||U===void 0?void 0:U.vi)[0],Y=+G.em,X=+G.exem,W=+G.preview;return isNaN(Y)||Y!==0||W===0?0:X>0||+L.st==8?W:0}function parseCodecInfo(G){var U,L,Y,X,W,z=CODEC.H264,J=(((U=G==null?void 0:G.vl)===null||U===void 0?void 0:U.vi)||[])[0],Z=(G||{}).dltype,ee=(X=(Y=(L=G==null?void 0:G.fl)===null||L===void 0?void 0:L.fi)===null||Y===void 0?void 0:Y.find(function(re){return re.sl===1}))===null||X===void 0?void 0:X.video;if(J){var te=J.hevc;te===1?(z=CODEC.H265,W=uaTool.browser.safari?KERNEL_NAME.ORIGIN:KERNEL_NAME.WASM):Z===1&&(W=KERNEL_NAME.ORIGIN)}return{vtype:VideoType[ee],codec:z,kernelName:W}}var parseResponseMiddleWare=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se;return __generator(this,function(ae){switch(ae.label){case 0:return L=G.resData,Y=G.reqParams,X=((re=L.vl)===null||re===void 0?void 0:re.vi)[0],W=X.td,z=X.ti,J=X.vh,Z=X.vw,ee=X.br,te=X.fs,G.parseData={preview:getPreview(L),vitem:X,duration:W,title:z,byteRate:ee,videoHeight:J,videoWidth:Z,fileSize:te,urls:getUrls(L,Y.sdtfrom,Y.guid),definitionList:(ie=L.fl)===null||ie===void 0?void 0:ie.fi,subtitleList:(ne=L.sfl)===null||ne===void 0?void 0:ne.fi,watermarkList:X.wl,previewList:X.pl?(oe=X.pl[0])===null||oe===void 0?void 0:oe.pd:[]},(se=G.parseData.definitionList)===null||se===void 0||se.reverse(),G.logger.log("parse ",G.parseData),[4,U()];case 1:return ae.sent(),[2]}})})},_thumbplayerCkeyWasmFactory=function(){var G=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(U){U=U||{};var L;L||(L=typeof U!="undefined"?U:{});var Y,X;L.ready=new Promise(function(xe,Re){Y=xe,X=Re});var W={},z;for(z in L)L.hasOwnProperty(z)&&(W[z]=L[z]);var J=!1,Z=!1;J=typeof window=="object",Z=typeof importScripts=="function";var ee="",te;(J||Z)&&(Z?ee=self.location.href:typeof document!="undefined"&&document.currentScript&&(ee=document.currentScript.src),G&&(ee=G),ee.indexOf("blob:")!==0?ee=ee.substr(0,ee.lastIndexOf("/")+1):ee="",Z&&(te=function(xe){try{var Re=new XMLHttpRequest;return Re.open("GET",xe,!1),Re.responseType="arraybuffer",Re.send(null),new Uint8Array(Re.response)}catch(we){if(xe=De(xe))return xe;throw we}}));var re=L.printErr||console.warn.bind(console);for(z in W)W.hasOwnProperty(z)&&(L[z]=W[z]);W=null;var ie;L.wasmBinary&&(ie=L.wasmBinary),L.noExitRuntime;var ne,oe=!1;function se(xe){var Re=L["_"+xe];return Re||Se("Assertion failed: Cannot call unknown function "+(xe+", make sure it is exported")),Re}function ae(xe,Re,we,Le){var pe={string:function(Be){var qe=0;if(Be!=null&&Be!==0){var je=(Be.length<<2)+1;qe=Ie(je),ue(Be,qe,je)}return qe},array:function(Be){var qe=Ie(Be.length);return he.set(Be,qe),qe}},ge=se(xe),Ee=[];if(xe=0,Le)for(var Ce=0;Ce<Le.length;Ce++){var Fe=pe[we[Ce]];Fe?(xe===0&&(xe=Qe()),Ee[Ce]=Fe(Le[Ce])):Ee[Ce]=Le[Ce]}return we=ge.apply(null,Ee),we=function(Be){if(Re==="string")if(Be){for(var qe=fe,je=Be+NaN,We=Be;qe[We]&&!(We>=je);)++We;if(16<We-Be&&qe.subarray&&le)Be=le.decode(qe.subarray(Be,We));else{for(je="";Be<We;){var Ge=qe[Be++];if(Ge&128){var lt=qe[Be++]&63;if((Ge&224)==192)je+=String.fromCharCode((Ge&31)<<6|lt);else{var at=qe[Be++]&63;Ge=(Ge&240)==224?(Ge&15)<<12|lt<<6|at:(Ge&7)<<18|lt<<12|at<<6|qe[Be++]&63,65536>Ge?je+=String.fromCharCode(Ge):(Ge-=65536,je+=String.fromCharCode(55296|Ge>>10,56320|Ge&1023))}}else je+=String.fromCharCode(Ge)}Be=je}}else Be="";else Be=Re==="boolean"?!!Be:Be;return Be}(we),xe!==0&&tt(xe),we}var le=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function ue(xe,Re,we){var Le=fe;if(0<we){we=Re+we-1;for(var pe=0;pe<xe.length;++pe){var ge=xe.charCodeAt(pe);if(55296<=ge&&57343>=ge){var Ee=xe.charCodeAt(++pe);ge=65536+((ge&1023)<<10)|Ee&1023}if(127>=ge){if(Re>=we)break;Le[Re++]=ge}else{if(2047>=ge){if(Re+1>=we)break;Le[Re++]=192|ge>>6}else{if(65535>=ge){if(Re+2>=we)break;Le[Re++]=224|ge>>12}else{if(Re+3>=we)break;Le[Re++]=240|ge>>18,Le[Re++]=128|ge>>12&63}Le[Re++]=128|ge>>6&63}Le[Re++]=128|ge&63}}Le[Re]=0}}function ce(xe){for(var Re=0,we=0;we<xe.length;++we){var Le=xe.charCodeAt(we);55296<=Le&&57343>=Le&&(Le=65536+((Le&1023)<<10)|xe.charCodeAt(++we)&1023),127>=Le?++Re:Re=2047>=Le?Re+2:65535>=Le?Re+3:Re+4}return Re}var he,fe,de,_e=[],me=[],ve=[];function ye(){var xe=L.preRun.shift();_e.unshift(xe)}var be=0,Te=null;L.preloadedImages={},L.preloadedAudios={};function Se(xe){throw L.onAbort&&L.onAbort(xe),re(xe),oe=!0,xe=new WebAssembly.RuntimeError("abort("+xe+"). Build with -s ASSERTIONS=1 for more info."),X(xe),xe}var Ue="data:application/octet-stream;base64,",Pe="data:application/octet-stream;base64,AGFzbQEAAAABcBFgAX8Bf2ACf38AYAN/f38AYAF/AGACf38Bf2AAAGADf39+AGAAAX9gA39/fgF/YAZ/f35/fn8Bf2AEf35/fwF/YAR/f39/AGAIf39/f39/f38AYAR/f39+AGACf34AYAN/f38Bf2AGf39/f39/AX8CGQQBYQFhAAUBYQFiAA8BYQFjAAABYQFkAAcDOTgAAQMAAQAAAgALAAECAQECBgQCAwADAQYABQMCAAAADAEAAAABAQECBQ0CAQ4AAAADBxAJCgQIBAQFAXABBgYFBgEBgAKAAgYJAX8BQbCVwAILByEIAWUCAAFmAB0BZwEAAWgANgFpADUBagA0AWsAMwFsACEJCwEAQQELBTs6OTg3CpW1AThkAQF/IwBBEGsiASAANgIMIAEgASgCDC0AADYCCCABIAEoAgggASgCDC0AAUEIdHI2AgggASABKAIIIAEoAgwtAAJBEHRyNgIIIAEgASgCCCABKAIMLQADQRh0cjYCCCABKAIIC3IBAX8jAEEQayICIAA2AgwgAiABNgIIIAIoAgwgAigCCDoAACACIAIoAghBCHY2AgggAigCDCACKAIIOgABIAIgAigCCEEIdjYCCCACKAIMIAIoAgg6AAIgAiACKAIIQQh2NgIIIAIoAgwgAigCCDoAAwsaAQF/IAAQDgRAIAAQJyEBIAAQJhogARAXCwszAQF/IwBBEGsiASQAIAEgADYCDCMAQRBrIgAgASgCDDYCDCAAKAIMIQAgAUEQaiQAIAALagEBfyMAQSBrIgIkACACIAA2AhwgAiABNgIYIAIoAhwiACACQRBqIAJBCGoQHyAAIAIoAhgCfyACKAIYIQEjAEEQayIAJAAgACABNgIMIAAoAgwQICEBIABBEGokACABCxArIAJBIGokAAuuAQEEfyMAQRBrIgQkACAEIAA2AgwgBCgCDCEBIwBBEGsiACQAIAAgATYCDCAAKAIMIQIjAEEQayIBJAAgASACNgIMAn8gASgCDCIDEA5BAXEEQCADEDIMAQsjAEEQayICJAAgAiADNgIMIAIoAgwQBxAHIQMgAkEQaiQAIAMLIQIgAUEQaiQAIAIhASMAQRBrIgIgATYCDCACKAIMIQEgAEEQaiQAIARBEGokACABCyYBAX8jAEEQayIBJAAgASAANgIMIAEoAgwQHCEAIAFBEGokACAAC4UBAQF/IwBBEGsiAyQAIAMgADYCDCADIAE2AgggAyACNgIEIAMoAgQoAgBBBGpBgAhJBEAgAygCDCADKAIEKAIAaiADKAIIIgBBCHRBgID8B3EgAEEYdHIgAEEIdkGA/gNxIABBGHZycjYCACADKAIEIgAgACgCAEEEajYCAAsgA0EQaiQAC08BAn9BlAooAgAiASAAQQNqQXxxIgJqIQACQCACQQAgACABTRsNACAAPwBBEHRLBEAgABACRQ0BC0GUCiAANgIAIAEPC0G4EUEwNgIAQX8LrwEBAX8jAEEQayIEJAAgBCAANgIMIAQgATYCCCAEIAI2AgQgBCADNgIAIAQoAgQgBCgCACgCAEECampBgAhJBEAgBCgCDCAEKAIAKAIAaiAEKAIEQf//A3EiAEEIdCAAQQh2cjsBACAEKAIAIgAgACgCAEECajYCACAEKAIMIAQoAgAoAgBqIAQoAgggBCgCBBAWIAQoAgAiACAEKAIEIAAoAgBqNgIACyAEQRBqJAALMAEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHLQALQYABcUEARyEAIAFBEGokACAAC4gBAQJ/IwBBEGsiAyQAIwBBEGsiAiADQQhqNgIMIAIoAgwaIwBBEGsiAiAANgIEIAIoAgQaAkAgARAORQRAIAEQByEBIAAQByIAIAEoAgg2AgggACABKQIANwIADAELIAACfyABEDIhACMAQRBrIgIgADYCDCACKAIMCyABEDEQKwsgA0EQaiQACw8AIAIEQCAAIAEgAhAWCwtcAQF/IwBBEGsiAiAANgIMIAIgATYCCCACIAIoAgw2AgQgAkEANgIAA0AgAigCACACKAIIT0UEQCACKAIEIQAgAiACKAIAIgFBAWo2AgAgACABakEAOgAADAELCwvWAgEBfwJAIAFFDQAgACABaiICQQFrQQA6AAAgAEEAOgAAIAFBA0kNACACQQJrQQA6AAAgAEEAOgABIAJBA2tBADoAACAAQQA6AAIgAUEHSQ0AIAJBBGtBADoAACAAQQA6AAMgAUEJSQ0AIABBACAAa0EDcSICaiIAQQA2AgAgACABIAJrQXxxIgJqIgFBBGtBADYCACACQQlJDQAgAEEANgIIIABBADYCBCABQQhrQQA2AgAgAUEMa0EANgIAIAJBGUkNACAAQQA2AhggAEEANgIUIABBADYCECAAQQA2AgwgAUEQa0EANgIAIAFBFGtBADYCACABQRhrQQA2AgAgAUEca0EANgIAIAIgAEEEcUEYciICayIBQSBJDQAgACACaiEAA0AgAEIANwMYIABCADcDECAAQgA3AwggAEIANwMAIABBIGohACABQSBrIgFBH0sNAAsLC3cBA38jAEEQayIFJAACQCACIAAQJSIEIAAQHCIDa00EQCACRQ0BIAAQGCIEIANqIAEgAhAQIAAgAiADaiIAECQgBUEAOgAPIAAgBGogBS0ADzoAAAwBCyAAIAQgAiADaiAEayADIANBACACIAEQIwsgBUEQaiQAC0UBAX8jAEEQayIDJAAgAyAANgIMIAMgATYCCCADIAI3AwAgAygCDCADKAIIIAMpAwBBhAooAgAoAgQRCAAaIANBEGokAAuDAQEBfyMAQSBrIgIgADYCHCACIAE2AhggAkGDATYCFCACQQA2AhAgAkEANgIMA0AgAigCDCACKAIYT0UEQCACKAIQIAIoAhRsIQAgAiACKAIcIgFBAWo2AhwgAiABLQAAIABqNgIQIAIgAigCDEEBajYCDAwBCwsgAigCEEH/////B3EL/wMBAn8gAkGABE8EQCAAIAEgAhABGg8LIAAgAmohAwJAIAAgAXNBA3FFBEACQCAAQQNxRQRAIAAhAgwBCyACQQFIBEAgACECDAELIAAhAgNAIAIgAS0AADoAACABQQFqIQEgAkEBaiICQQNxRQ0BIAIgA0kNAAsLAkAgA0F8cSIAQcAASQ0AIAIgAEFAaiIESw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBE0NAAsLIAAgAk0NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIABJDQALDAELIANBBEkEQCAAIQIMAQsgACADQQRrIgRLBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsLpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQdARKAIASQ0BIAAgAWohACADQdQRKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEHoEWpGGiACIAMoAgwiAUYEQEHAEUHAESgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRB8BNqIgQoAgBGBEAgBCABNgIAIAENAUHEEUHEESgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBByBEgADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVB2BEoAgBGBEBB2BEgAzYCAEHMEUHMESgCACAAaiIANgIAIAMgAEEBcjYCBCADQdQRKAIARw0DQcgRQQA2AgBB1BFBADYCAA8LIAVB1BEoAgBGBEBB1BEgAzYCAEHIEUHIESgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RB6BFqRhogAiAFKAIMIgFGBEBBwBFBwBEoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJB0BEoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEHwE2oiBCgCAEYEQCAEIAE2AgAgAQ0BQcQRQcQRKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQdQRKAIARw0BQcgRIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RB6BFqIQACf0HAESgCACICQQEgAXQiAXFFBEBBwBEgASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QfATaiEBAkACQAJAQcQRKAIAIgRBASACdCIHcUUEQEHEESAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtB4BFB4BEoAgBBAWsiAEF/IAAbNgIACwsSACAAEA4EQCAAECcPCyAAEAcLLwEBfyMAQRBrIgEkACABIAA2AgwgASgCDCIAIAFBCGogARAfIAAQHiABQRBqJAALCwAgABAHIAE2AgQL+AgBAX8jAEGAAWsiAyQAIAMgADYCfCADIAE2AnggAyACNwNwIANBAEGAgIAIIAMoAnwtAFAbNgJsIAMgAygCfCgCADYCaCADIAMoAnwoAgQ2AmQgAyADKAJ8KAIINgJgIAMgAygCfCgCDDYCXCADIAMoAnwoAhA2AlggAyADKAJkQQVsNgJUIAMgAygCYEEFbDYCUCADIAMoAlxBBWw2AkwgAyADKAJYQQVsNgJIIAMgAygCfCgCFDYCRCADIAMoAnwoAhg2AkAgAyADKAJ8KAIcNgI8IAMgAygCfCgCIDYCOCADIAMoAnwoAiQ2AjQDQCADKQNwQhBURQRAIAMgAygCeBAEQf///x9xIAMoAkRqNgJEIAMgAygCeEEDahAEQQJ2Qf///x9xIAMoAkBqNgJAIAMgAygCeEEGahAEQQR2Qf///x9xIAMoAjxqNgI8IAMgAygCeEEJahAEQQZ2IAMoAjhqNgI4IAMgAygCeEEMahAEQQh2IAMoAmxyIAMoAjRqNgI0IAMgAygCRK0gAygCaK1+IAMoAkCtIAMoAkitfnwgAygCPK0gAygCTK1+fCADKAI4rSADKAJQrX58IAMoAjStIAMoAlStfnw3AyggAyADKAJErSADKAJkrX4gAygCQK0gAygCaK1+fCADKAI8rSADKAJIrX58IAMoAjitIAMoAkytfnwgAygCNK0gAygCUK1+fDcDICADIAMoAkStIAMoAmCtfiADKAJArSADKAJkrX58IAMoAjytIAMoAmitfnwgAygCOK0gAygCSK1+fCADKAI0rSADKAJMrX58NwMYIAMgAygCRK0gAygCXK1+IAMoAkCtIAMoAmCtfnwgAygCPK0gAygCZK1+fCADKAI4rSADKAJorX58IAMoAjStIAMoAkitfnw3AxAgAyADKAJErSADKAJYrX4gAygCQK0gAygCXK1+fCADKAI8rSADKAJgrX58IAMoAjitIAMoAmStfnwgAygCNK0gAygCaK1+fDcDCCADIAMpAyhCGog+AgQgAyADKQMop0H///8fcTYCRCADIAMpAyAgAygCBK18NwMgIAMgAykDIEIaiD4CBCADIAMpAyCnQf///x9xNgJAIAMgAykDGCADKAIErXw3AxggAyADKQMYQhqIPgIEIAMgAykDGKdB////H3E2AjwgAyADKQMQIAMoAgStfDcDECADIAMpAxBCGog+AgQgAyADKQMQp0H///8fcTYCOCADIAMpAwggAygCBK18NwMIIAMgAykDCEIaiD4CBCADIAMpAwinQf///x9xNgI0IAMgAygCRCADKAIEQQVsajYCRCADIAMoAkRBGnY2AgQgAyADKAJEQf///x9xNgJEIAMgAygCBCADKAJAajYCQCADIAMoAnhBEGo2AnggAyADKQNwQhB9NwNwDAELCyADKAJ8IAMoAkQ2AhQgAygCfCADKAJANgIYIAMoAnwgAygCPDYCHCADKAJ8IAMoAjg2AiAgAygCfCADKAI0NgIkIANBgAFqJAALXAECfyMAQRBrIgIkACACIAA2AgwCfyACKAIMIgEQDkEBcQRAIAEQMQwBCyMAQRBrIgAkACAAIAE2AgwgACgCDBAHLQALIQEgAEEQaiQAIAELIQAgAkEQaiQAIAALAwABC18BAX8jAEEQayIBJAAgASAANgIMIAEgASgCDBAHNgIIIAFBADYCBANAIAEoAgRBA09FBEAgASgCCCABKAIEQQJ0akEANgIAIAEgASgCBEEBajYCBAwBCwsgAUEQaiQAC5gBAQF/IwBBIGsiAyQAIAMgADYCHCADIAE2AhggAyACNgIUIAMoAhwhASMAQRBrIgAgAygCGDYCDCAAKAIMGiMAQRBrIgAgATYCBCAAKAIEGiMAQRBrIgAgAygCFDYCDCAAKAIMGiMAQRBrIgAkACAAIAE2AgQjAEEQayIBIAAoAgQ2AgwgASgCDBogAEEQaiQAIANBIGokAAt/AQN/IAAhAQJAIABBA3EEQANAIAEtAABFDQIgAUEBaiIBQQNxDQALCwNAIAEiAkEEaiEBIAIoAgAiA0F/cyADQYGChAhrcUGAgYKEeHFFDQALIANB/wFxRQRAIAIgAGsPCwNAIAItAAEhAyACQQFqIgEhAiADDQALCyABIABrC5YtAQx/IwBBEGsiDCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBBwBEoAgAiBUEQIABBC2pBeHEgAEELSRsiCEEDdiICdiIBQQNxBEAgAUF/c0EBcSACaiIDQQN0IgFB8BFqKAIAIgRBCGohAAJAIAQoAggiAiABQegRaiIBRgRAQcARIAVBfiADd3E2AgAMAQsgAiABNgIMIAEgAjYCCAsgBCADQQN0IgFBA3I2AgQgASAEaiIBIAEoAgRBAXI2AgQMDQsgCEHIESgCACIKTQ0BIAEEQAJAQQIgAnQiAEEAIABrciABIAJ0cSIAQQAgAGtxQQFrIgAgAEEMdkEQcSICdiIBQQV2QQhxIgAgAnIgASAAdiIBQQJ2QQRxIgByIAEgAHYiAUEBdkECcSIAciABIAB2IgFBAXZBAXEiAHIgASAAdmoiA0EDdCIAQfARaigCACIEKAIIIgEgAEHoEWoiAEYEQEHAESAFQX4gA3dxIgU2AgAMAQsgASAANgIMIAAgATYCCAsgBEEIaiEAIAQgCEEDcjYCBCAEIAhqIgIgA0EDdCIBIAhrIgNBAXI2AgQgASAEaiADNgIAIAoEQCAKQQN2IgFBA3RB6BFqIQdB1BEoAgAhBAJ/IAVBASABdCIBcUUEQEHAESABIAVyNgIAIAcMAQsgBygCCAshASAHIAQ2AgggASAENgIMIAQgBzYCDCAEIAE2AggLQdQRIAI2AgBByBEgAzYCAAwNC0HEESgCACIGRQ0BIAZBACAGa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEHwE2ooAgAiASgCBEF4cSAIayEDIAEhAgNAAkAgAigCECIARQRAIAIoAhQiAEUNAQsgACgCBEF4cSAIayICIAMgAiADSSICGyEDIAAgASACGyEBIAAhAgwBCwsgASAIaiIJIAFNDQIgASgCGCELIAEgASgCDCIERwRAIAEoAggiAEHQESgCAEkaIAAgBDYCDCAEIAA2AggMDAsgAUEUaiICKAIAIgBFBEAgASgCECIARQ0EIAFBEGohAgsDQCACIQcgACIEQRRqIgIoAgAiAA0AIARBEGohAiAEKAIQIgANAAsgB0EANgIADAsLQX8hCCAAQb9/Sw0AIABBC2oiAEF4cSEIQcQRKAIAIglFDQBBHyEFQQAgCGshAwJAAkACQAJ/IAhB////B00EQCAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGohBQsgBUECdEHwE2ooAgAiAkULBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBAiAFdCIAQQAgAGtyIAlxIgBFDQMgAEEAIABrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QfATaigCACEACyAARQ0BCwNAIAAoAgRBeHEgCGsiASADSSECIAEgAyACGyEDIAAgBCACGyEEIAAoAhAiAQR/IAEFIAAoAhQLIgANAAsLIARFDQAgA0HIESgCACAIa08NACAEIAhqIgYgBE0NASAEKAIYIQUgBCAEKAIMIgFHBEAgBCgCCCIAQdARKAIASRogACABNgIMIAEgADYCCAwKCyAEQRRqIgIoAgAiAEUEQCAEKAIQIgBFDQQgBEEQaiECCwNAIAIhByAAIgFBFGoiAigCACIADQAgAUEQaiECIAEoAhAiAA0ACyAHQQA2AgAMCQsgCEHIESgCACICTQRAQdQRKAIAIQMCQCACIAhrIgFBEE8EQEHIESABNgIAQdQRIAMgCGoiADYCACAAIAFBAXI2AgQgAiADaiABNgIAIAMgCEEDcjYCBAwBC0HUEUEANgIAQcgRQQA2AgAgAyACQQNyNgIEIAIgA2oiACAAKAIEQQFyNgIECyADQQhqIQAMCwsgCEHMESgCACIGSQRAQcwRIAYgCGsiATYCAEHYEUHYESgCACICIAhqIgA2AgAgACABQQFyNgIEIAIgCEEDcjYCBCACQQhqIQAMCwtBACEAIAhBL2oiCQJ/QZgVKAIABEBBoBUoAgAMAQtBpBVCfzcCAEGcFUKAoICAgIAENwIAQZgVIAxBDGpBcHFB2KrVqgVzNgIAQawVQQA2AgBB/BRBADYCAEGAIAsiAWoiBUEAIAFrIgdxIgIgCE0NCkH4FCgCACIEBEBB8BQoAgAiAyACaiIBIANNDQsgASAESw0LC0H8FC0AAEEEcQ0FAkACQEHYESgCACIDBEBBgBUhAANAIAMgACgCACIBTwRAIAEgACgCBGogA0sNAwsgACgCCCIADQALC0EAEAwiAUF/Rg0GIAIhBUGcFSgCACIDQQFrIgAgAXEEQCACIAFrIAAgAWpBACADa3FqIQULIAUgCE0NBiAFQf7///8HSw0GQfgUKAIAIgQEQEHwFCgCACIDIAVqIgAgA00NByAAIARLDQcLIAUQDCIAIAFHDQEMCAsgBSAGayAHcSIFQf7///8HSw0FIAUQDCIBIAAoAgAgACgCBGpGDQQgASEACwJAIABBf0YNACAIQTBqIAVNDQBBoBUoAgAiASAJIAVrakEAIAFrcSIBQf7///8HSwRAIAAhAQwICyABEAxBf0cEQCABIAVqIQUgACEBDAgLQQAgBWsQDBoMBQsgACIBQX9HDQYMBAsAC0EAIQQMBwtBACEBDAULIAFBf0cNAgtB/BRB/BQoAgBBBHI2AgALIAJB/v///wdLDQEgAhAMIQFBABAMIQAgAUF/Rg0BIABBf0YNASAAIAFNDQEgACABayIFIAhBKGpNDQELQfAUQfAUKAIAIAVqIgA2AgBB9BQoAgAgAEkEQEH0FCAANgIACwJAAkACQEHYESgCACIHBEBBgBUhAANAIAEgACgCACIDIAAoAgQiAmpGDQIgACgCCCIADQALDAILQdARKAIAIgBBACAAIAFNG0UEQEHQESABNgIAC0EAIQBBhBUgBTYCAEGAFSABNgIAQeARQX82AgBB5BFBmBUoAgA2AgBBjBVBADYCAANAIABBA3QiA0HwEWogA0HoEWoiAjYCACADQfQRaiACNgIAIABBAWoiAEEgRw0AC0HMESAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBB2BEgACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRB3BFBqBUoAgA2AgAMAgsgAC0ADEEIcQ0AIAMgB0sNACABIAdNDQAgACACIAVqNgIEQdgRIAdBeCAHa0EHcUEAIAdBCGpBB3EbIgBqIgI2AgBBzBFBzBEoAgAgBWoiASAAayIANgIAIAIgAEEBcjYCBCABIAdqQSg2AgRB3BFBqBUoAgA2AgAMAQtB0BEoAgAgAUsEQEHQESABNgIACyABIAVqIQJBgBUhAAJAAkACQAJAAkACQANAIAIgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtBgBUhAANAIAcgACgCACICTwRAIAIgACgCBGoiBCAHSw0DCyAAKAIIIQAMAAsACyAAIAE2AgAgACAAKAIEIAVqNgIEIAFBeCABa0EHcUEAIAFBCGpBB3EbaiIJIAhBA3I2AgQgAkF4IAJrQQdxQQAgAkEIakEHcRtqIgUgCCAJaiIGayECIAUgB0YEQEHYESAGNgIAQcwRQcwRKAIAIAJqIgA2AgAgBiAAQQFyNgIEDAMLIAVB1BEoAgBGBEBB1BEgBjYCAEHIEUHIESgCACACaiIANgIAIAYgAEEBcjYCBCAAIAZqIAA2AgAMAwsgBSgCBCIAQQNxQQFGBEAgAEF4cSEHAkAgAEH/AU0EQCAFKAIIIgMgAEEDdiIAQQN0QegRakYaIAMgBSgCDCIBRgRAQcARQcARKAIAQX4gAHdxNgIADAILIAMgATYCDCABIAM2AggMAQsgBSgCGCEIAkAgBSAFKAIMIgFHBEAgBSgCCCIAIAE2AgwgASAANgIIDAELAkAgBUEUaiIAKAIAIgMNACAFQRBqIgAoAgAiAw0AQQAhAQwBCwNAIAAhBCADIgFBFGoiACgCACIDDQAgAUEQaiEAIAEoAhAiAw0ACyAEQQA2AgALIAhFDQACQCAFIAUoAhwiA0ECdEHwE2oiACgCAEYEQCAAIAE2AgAgAQ0BQcQRQcQRKAIAQX4gA3dxNgIADAILIAhBEEEUIAgoAhAgBUYbaiABNgIAIAFFDQELIAEgCDYCGCAFKAIQIgAEQCABIAA2AhAgACABNgIYCyAFKAIUIgBFDQAgASAANgIUIAAgATYCGAsgBSAHaiEFIAIgB2ohAgsgBSAFKAIEQX5xNgIEIAYgAkEBcjYCBCACIAZqIAI2AgAgAkH/AU0EQCACQQN2IgBBA3RB6BFqIQICf0HAESgCACIBQQEgAHQiAHFFBEBBwBEgACABcjYCACACDAELIAIoAggLIQAgAiAGNgIIIAAgBjYCDCAGIAI2AgwgBiAANgIIDAMLQR8hACACQf///wdNBEAgAkEIdiIAIABBgP4/akEQdkEIcSIDdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIANyIAByayIAQQF0IAIgAEEVanZBAXFyQRxqIQALIAYgADYCHCAGQgA3AhAgAEECdEHwE2ohBAJAQcQRKAIAIgNBASAAdCIBcUUEQEHEESABIANyNgIAIAQgBjYCACAGIAQ2AhgMAQsgAkEAQRkgAEEBdmsgAEEfRht0IQAgBCgCACEBA0AgASIDKAIEQXhxIAJGDQMgAEEddiEBIABBAXQhACADIAFBBHFqIgQoAhAiAQ0ACyAEIAY2AhAgBiADNgIYCyAGIAY2AgwgBiAGNgIIDAILQcwRIAVBKGsiA0F4IAFrQQdxQQAgAUEIakEHcRsiAGsiAjYCAEHYESAAIAFqIgA2AgAgACACQQFyNgIEIAEgA2pBKDYCBEHcEUGoFSgCADYCACAHIARBJyAEa0EHcUEAIARBJ2tBB3EbakEvayIAIAAgB0EQakkbIgJBGzYCBCACQYgVKQIANwIQIAJBgBUpAgA3AghBiBUgAkEIajYCAEGEFSAFNgIAQYAVIAE2AgBBjBVBADYCACACQRhqIQADQCAAQQc2AgQgAEEIaiEBIABBBGohACABIARJDQALIAIgB0YNAyACIAIoAgRBfnE2AgQgByACIAdrIgRBAXI2AgQgAiAENgIAIARB/wFNBEAgBEEDdiIAQQN0QegRaiECAn9BwBEoAgAiAUEBIAB0IgBxRQRAQcARIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBzYCCCAAIAc2AgwgByACNgIMIAcgADYCCAwEC0EfIQAgB0IANwIQIARB////B00EQCAEQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgBCAAQRVqdkEBcXJBHGohAAsgByAANgIcIABBAnRB8BNqIQMCQEHEESgCACICQQEgAHQiAXFFBEBBxBEgASACcjYCACADIAc2AgAgByADNgIYDAELIARBAEEZIABBAXZrIABBH0YbdCEAIAMoAgAhAQNAIAEiAigCBEF4cSAERg0EIABBHXYhASAAQQF0IQAgAiABQQRxaiIDKAIQIgENAAsgAyAHNgIQIAcgAjYCGAsgByAHNgIMIAcgBzYCCAwDCyADKAIIIgAgBjYCDCADIAY2AgggBkEANgIYIAYgAzYCDCAGIAA2AggLIAlBCGohAAwFCyACKAIIIgAgBzYCDCACIAc2AgggB0EANgIYIAcgAjYCDCAHIAA2AggLQcwRKAIAIgAgCE0NAEHMESAAIAhrIgE2AgBB2BFB2BEoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAMLQbgRQTA2AgBBACEADAILAkAgBUUNAAJAIAQoAhwiAkECdEHwE2oiACgCACAERgRAIAAgATYCACABDQFBxBEgCUF+IAJ3cSIJNgIADAILIAVBEEEUIAUoAhAgBEYbaiABNgIAIAFFDQELIAEgBTYCGCAEKAIQIgAEQCABIAA2AhAgACABNgIYCyAEKAIUIgBFDQAgASAANgIUIAAgATYCGAsCQCADQQ9NBEAgBCADIAhqIgBBA3I2AgQgACAEaiIAIAAoAgRBAXI2AgQMAQsgBCAIQQNyNgIEIAYgA0EBcjYCBCADIAZqIAM2AgAgA0H/AU0EQCADQQN2IgBBA3RB6BFqIQICf0HAESgCACIBQQEgAHQiAHFFBEBBwBEgACABcjYCACACDAELIAIoAggLIQAgAiAGNgIIIAAgBjYCDCAGIAI2AgwgBiAANgIIDAELQR8hACADQf///wdNBEAgA0EIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAMgAEEVanZBAXFyQRxqIQALIAYgADYCHCAGQgA3AhAgAEECdEHwE2ohAgJAAkAgCUEBIAB0IgFxRQRAQcQRIAEgCXI2AgAgAiAGNgIAIAYgAjYCGAwBCyADQQBBGSAAQQF2ayAAQR9GG3QhACACKAIAIQgDQCAIIgEoAgRBeHEgA0YNAiAAQR12IQIgAEEBdCEAIAEgAkEEcWoiAigCECIIDQALIAIgBjYCECAGIAE2AhgLIAYgBjYCDCAGIAY2AggMAQsgASgCCCIAIAY2AgwgASAGNgIIIAZBADYCGCAGIAE2AgwgBiAANgIICyAEQQhqIQAMAQsCQCALRQ0AAkAgASgCHCICQQJ0QfATaiIAKAIAIAFGBEAgACAENgIAIAQNAUHEESAGQX4gAndxNgIADAILIAtBEEEUIAsoAhAgAUYbaiAENgIAIARFDQELIAQgCzYCGCABKAIQIgAEQCAEIAA2AhAgACAENgIYCyABKAIUIgBFDQAgBCAANgIUIAAgBDYCGAsCQCADQQ9NBEAgASADIAhqIgBBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQMAQsgASAIQQNyNgIEIAkgA0EBcjYCBCADIAlqIAM2AgAgCgRAIApBA3YiAEEDdEHoEWohBEHUESgCACECAn9BASAAdCIAIAVxRQRAQcARIAAgBXI2AgAgBAwBCyAEKAIICyEAIAQgAjYCCCAAIAI2AgwgAiAENgIMIAIgADYCCAtB1BEgCTYCAEHIESADNgIACyABQQhqIQALIAxBEGokACAACzIBAX8gAEEBIAAbIQACQANAIAAQISIBDQFBvBEoAgAiAQRAIAERBQAMAQsLEAAACyABC6oCAQV/IwBBEGsiCCQAIAIgAUF/c0ERa00EQCAAEBghCQJ/IAFB5////wdJBEAgCCABQQF0NgIIIAggASACajYCDAJ/IwBBEGsiAiQAIAhBDGoiCigCACAIQQhqIgsoAgBJIQwgAkEQaiQAIAsgCiAMGygCACICQQtPCwR/IAJBEGpBcHEiAiACQQFrIgIgAkELRhsFQQoLDAELQW4LQQFqIgoQIiECIAQEQCACIAkgBBAQCyAGBEAgAiAEaiAHIAYQEAsgAyAEIAVqayIDBEAgAiAEaiAGaiAEIAlqIAVqIAMQEAsgAUEKRwRAIAkQFwsgACACECkgACAKECggACAEIAZqIANqIgAQGiAIQQA6AAcgACACaiAILQAHOgAAIAhBEGokAA8LECwACxYAIAAQDgRAIAAgARAaDwsgACABECoLGQEBf0EKIQEgABAOBH8gABAmQQFrBUEKCwsQACAAEAcoAghB/////wdxCwkAIAAQBygCAAsSACAAEAcgAUGAgICAeHI2AggLCwAgABAHIAE2AgALCwAgABAHIAE6AAsLkAEBA38jAEEQayIEJAAgAkFvTQRAAkAgAkEKTQRAIAAgAhAqIAAQByEDDAELIAAgAkELTwR/IAJBEGpBcHEiAyADQQFrIgMgA0ELRhsFQQoLQQFqIgUQIiIDECkgACAFECggACACEBoLIAMgASACEBAgBEEAOgAPIAIgA2ogBC0ADzoAACAEQRBqJAAPCxAsAAsFABAAAAuOHQEBfyMAQfABayIEJAAgBCAANgLsASAEIAE2AugBIAQgAjYC5AEgBCADNwPYASAEQQA2AlQgBCkD2AFQRQRAIAQpA9gBQsD/////B1YEQBAAAAsgBCAEKALsASgCADYClAEgBCAEKALsASgCBDYCkAEgBCAEKALsASgCCDYCjAEgBCAEKALsASgCDDYCiAEgBCAEKALsASgCEDYChAEgBCAEKALsASgCFDYCgAEgBCAEKALsASgCGDYCfCAEIAQoAuwBKAIcNgJ4IAQgBCgC7AEoAiA2AnQgBCAEKALsASgCJDYCcCAEIAQoAuwBKAIoNgJsIAQgBCgC7AEoAiw2AmggBCAEKALsASgCMDYCZCAEIAQoAuwBKAI0NgJgIAQgBCgC7AEoAjg2AlwgBCAEKALsASgCPDYCWANAIAQpA9gBQsAAVARAIARBEGoiAEIANwMAIABCADcDOCAAQgA3AzAgAEIANwMoIABCADcDICAAQgA3AxggAEIANwMQIABCADcDCCAEQQA2AgwDQCAEKQPYASAEKAIMrVhFBEAgBCgCDCAEQRBqaiAEKALoASAEKAIMai0AADoAACAEIAQoAgxBAWo2AgwMAQsLIAQgBEEQajYC6AEgBCAEKALkATYCVCAEIARBEGo2AuQBCyAEIAQoApQBNgLUASAEIAQoApABNgLQASAEIAQoAowBNgLMASAEIAQoAogBNgLIASAEIAQoAoQBNgLEASAEIAQoAoABNgLAASAEIAQoAnw2ArwBIAQgBCgCeDYCuAEgBCAEKAJ0NgK0ASAEIAQoAnA2ArABIAQgBCgCbDYCrAEgBCAEKAJoNgKoASAEIAQoAmQ2AqQBIAQgBCgCYDYCoAEgBCAEKAJcNgKcASAEIAQoAlg2ApgBIARBFDYCDANAIAQoAgwEQCAEIAQoAtQBIAQoAsQBajYC1AEgBCAEKAKkASAEKALUAXNBEHQgBCgCpAEgBCgC1AFzQRB2cjYCpAEgBCAEKAK0ASAEKAKkAWo2ArQBIAQgBCgCxAEgBCgCtAFzQQx0IAQoAsQBIAQoArQBc0EUdnI2AsQBIAQgBCgC1AEgBCgCxAFqNgLUASAEIAQoAqQBIAQoAtQBc0EIdCAEKAKkASAEKALUAXNBGHZyNgKkASAEIAQoArQBIAQoAqQBajYCtAEgBCAEKALEASAEKAK0AXNBB3QgBCgCxAEgBCgCtAFzQRl2cjYCxAEgBCAEKALQASAEKALAAWo2AtABIAQgBCgCoAEgBCgC0AFzQRB0IAQoAqABIAQoAtABc0EQdnI2AqABIAQgBCgCsAEgBCgCoAFqNgKwASAEIAQoAsABIAQoArABc0EMdCAEKALAASAEKAKwAXNBFHZyNgLAASAEIAQoAtABIAQoAsABajYC0AEgBCAEKAKgASAEKALQAXNBCHQgBCgCoAEgBCgC0AFzQRh2cjYCoAEgBCAEKAKwASAEKAKgAWo2ArABIAQgBCgCwAEgBCgCsAFzQQd0IAQoAsABIAQoArABc0EZdnI2AsABIAQgBCgCzAEgBCgCvAFqNgLMASAEIAQoApwBIAQoAswBc0EQdCAEKAKcASAEKALMAXNBEHZyNgKcASAEIAQoAqwBIAQoApwBajYCrAEgBCAEKAK8ASAEKAKsAXNBDHQgBCgCvAEgBCgCrAFzQRR2cjYCvAEgBCAEKALMASAEKAK8AWo2AswBIAQgBCgCnAEgBCgCzAFzQQh0IAQoApwBIAQoAswBc0EYdnI2ApwBIAQgBCgCrAEgBCgCnAFqNgKsASAEIAQoArwBIAQoAqwBc0EHdCAEKAK8ASAEKAKsAXNBGXZyNgK8ASAEIAQoAsgBIAQoArgBajYCyAEgBCAEKAKYASAEKALIAXNBEHQgBCgCmAEgBCgCyAFzQRB2cjYCmAEgBCAEKAKoASAEKAKYAWo2AqgBIAQgBCgCuAEgBCgCqAFzQQx0IAQoArgBIAQoAqgBc0EUdnI2ArgBIAQgBCgCyAEgBCgCuAFqNgLIASAEIAQoApgBIAQoAsgBc0EIdCAEKAKYASAEKALIAXNBGHZyNgKYASAEIAQoAqgBIAQoApgBajYCqAEgBCAEKAK4ASAEKAKoAXNBB3QgBCgCuAEgBCgCqAFzQRl2cjYCuAEgBCAEKALUASAEKALAAWo2AtQBIAQgBCgCmAEgBCgC1AFzQRB0IAQoApgBIAQoAtQBc0EQdnI2ApgBIAQgBCgCrAEgBCgCmAFqNgKsASAEIAQoAsABIAQoAqwBc0EMdCAEKALAASAEKAKsAXNBFHZyNgLAASAEIAQoAtQBIAQoAsABajYC1AEgBCAEKAKYASAEKALUAXNBCHQgBCgCmAEgBCgC1AFzQRh2cjYCmAEgBCAEKAKsASAEKAKYAWo2AqwBIAQgBCgCwAEgBCgCrAFzQQd0IAQoAsABIAQoAqwBc0EZdnI2AsABIAQgBCgC0AEgBCgCvAFqNgLQASAEIAQoAqQBIAQoAtABc0EQdCAEKAKkASAEKALQAXNBEHZyNgKkASAEIAQoAqgBIAQoAqQBajYCqAEgBCAEKAK8ASAEKAKoAXNBDHQgBCgCvAEgBCgCqAFzQRR2cjYCvAEgBCAEKALQASAEKAK8AWo2AtABIAQgBCgCpAEgBCgC0AFzQQh0IAQoAqQBIAQoAtABc0EYdnI2AqQBIAQgBCgCqAEgBCgCpAFqNgKoASAEIAQoArwBIAQoAqgBc0EHdCAEKAK8ASAEKAKoAXNBGXZyNgK8ASAEIAQoAswBIAQoArgBajYCzAEgBCAEKAKgASAEKALMAXNBEHQgBCgCoAEgBCgCzAFzQRB2cjYCoAEgBCAEKAK0ASAEKAKgAWo2ArQBIAQgBCgCuAEgBCgCtAFzQQx0IAQoArgBIAQoArQBc0EUdnI2ArgBIAQgBCgCzAEgBCgCuAFqNgLMASAEIAQoAqABIAQoAswBc0EIdCAEKAKgASAEKALMAXNBGHZyNgKgASAEIAQoArQBIAQoAqABajYCtAEgBCAEKAK4ASAEKAK0AXNBB3QgBCgCuAEgBCgCtAFzQRl2cjYCuAEgBCAEKALIASAEKALEAWo2AsgBIAQgBCgCnAEgBCgCyAFzQRB0IAQoApwBIAQoAsgBc0EQdnI2ApwBIAQgBCgCsAEgBCgCnAFqNgKwASAEIAQoAsQBIAQoArABc0EMdCAEKALEASAEKAKwAXNBFHZyNgLEASAEIAQoAsgBIAQoAsQBajYCyAEgBCAEKAKcASAEKALIAXNBCHQgBCgCnAEgBCgCyAFzQRh2cjYCnAEgBCAEKAKwASAEKAKcAWo2ArABIAQgBCgCxAEgBCgCsAFzQQd0IAQoAsQBIAQoArABc0EZdnI2AsQBIAQgBCgCDEECazYCDAwBCwsgBCAEKALUASAEKAKUAWo2AtQBIAQgBCgC0AEgBCgCkAFqNgLQASAEIAQoAswBIAQoAowBajYCzAEgBCAEKALIASAEKAKIAWo2AsgBIAQgBCgCxAEgBCgChAFqNgLEASAEIAQoAsABIAQoAoABajYCwAEgBCAEKAK8ASAEKAJ8ajYCvAEgBCAEKAK4ASAEKAJ4ajYCuAEgBCAEKAK0ASAEKAJ0ajYCtAEgBCAEKAKwASAEKAJwajYCsAEgBCAEKAKsASAEKAJsajYCrAEgBCAEKAKoASAEKAJoajYCqAEgBCAEKAKkASAEKAJkajYCpAEgBCAEKAKgASAEKAJgajYCoAEgBCAEKAKcASAEKAJcajYCnAEgBCAEKAKYASAEKAJYajYCmAEgBCAEKALUASAEKALoARAEczYC1AEgBCAEKALQASAEKALoAUEEahAEczYC0AEgBCAEKALMASAEKALoAUEIahAEczYCzAEgBCAEKALIASAEKALoAUEMahAEczYCyAEgBCAEKALEASAEKALoAUEQahAEczYCxAEgBCAEKALAASAEKALoAUEUahAEczYCwAEgBCAEKAK8ASAEKALoAUEYahAEczYCvAEgBCAEKAK4ASAEKALoAUEcahAEczYCuAEgBCAEKAK0ASAEKALoAUEgahAEczYCtAEgBCAEKAKwASAEKALoAUEkahAEczYCsAEgBCAEKAKsASAEKALoAUEoahAEczYCrAEgBCAEKAKoASAEKALoAUEsahAEczYCqAEgBCAEKAKkASAEKALoAUEwahAEczYCpAEgBCAEKAKgASAEKALoAUE0ahAEczYCoAEgBCAEKAKcASAEKALoAUE4ahAEczYCnAEgBCAEKAKYASAEKALoAUE8ahAEczYCmAEgBCAEKAJkQQFqNgJkIAQoAmRFBEAgBCAEKAJgQQFqNgJgCyAEKALkASAEKALUARAFIAQoAuQBQQRqIAQoAtABEAUgBCgC5AFBCGogBCgCzAEQBSAEKALkAUEMaiAEKALIARAFIAQoAuQBQRBqIAQoAsQBEAUgBCgC5AFBFGogBCgCwAEQBSAEKALkAUEYaiAEKAK8ARAFIAQoAuQBQRxqIAQoArgBEAUgBCgC5AFBIGogBCgCtAEQBSAEKALkAUEkaiAEKAKwARAFIAQoAuQBQShqIAQoAqwBEAUgBCgC5AFBLGogBCgCqAEQBSAEKALkAUEwaiAEKAKkARAFIAQoAuQBQTRqIAQoAqABEAUgBCgC5AFBOGogBCgCnAEQBSAEKALkAUE8aiAEKAKYARAFIAQpA9gBQsAAWARAIAQpA9gBQsAAVARAIARBADYCDANAIAQoAgwgBCkD2AGnT0UEQCAEKAJUIAQoAgxqIAQoAuQBIAQoAgxqLQAAOgAAIAQgBCgCDEEBajYCDAwBCwsLIAQoAuwBIAQoAmQ2AjAgBCgC7AEgBCgCYDYCNAUgBCAEKQPYAUJAfDcD2AEgBCAEKALkAUFAazYC5AEgBCAEKALoAUFAazYC6AEMAQsLCyAEQfABaiQAC5EBAQF/IwBBEGsiAyQAIAMgADYCDCADIAE2AgggAyACNgIEIAMoAgQEfyADKAIEEAQFQQALIQAgAygCDCAANgIwIAMoAgQEfyADKAIEQQRqEAQFQQALIQAgAygCDCAANgI0IAMoAggQBCEAIAMoAgwgADYCOCADKAIIQQRqEAQhACADKAIMIAA2AjwgA0EQaiQAC4cCAQF/IwBBEGsiAiQAIAIgADYCDCACIAE2AgggAigCDEHl8MGLBjYCACACKAIMQe7IgZkDNgIEIAIoAgxBstqIywc2AgggAigCDEH0yoHZBjYCDCACKAIIEAQhACACKAIMIAA2AhAgAigCCEEEahAEIQAgAigCDCAANgIUIAIoAghBCGoQBCEAIAIoAgwgADYCGCACKAIIQQxqEAQhACACKAIMIAA2AhwgAigCCEEQahAEIQAgAigCDCAANgIgIAIoAghBFGoQBCEAIAIoAgwgADYCJCACKAIIQRhqEAQhACACKAIMIAA2AiggAigCCEEcahAEIQAgAigCDCAANgIsIAJBEGokAAvaAQEBfyMAQRBrIgIgADYCDCACIAE3AwAgAigCDCACKQMAPAAAIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAEgAiACKQMAQgiINwMAIAIoAgwgAikDADwAAiACIAIpAwBCCIg3AwAgAigCDCACKQMAPAADIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAQgAiACKQMAQgiINwMAIAIoAgwgAikDADwABSACIAIpAwBCCIg3AwAgAigCDCACKQMAPAAGIAIgAikDAEIIiDcDACACKAIMIAIpAwA8AAcLKQEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHKAIEIQAgAUEQaiQAIAALKQEBfyMAQRBrIgEkACABIAA2AgwgASgCDBAHKAIAIQAgAUEQaiQAIAALEAAjACAAa0FwcSIAJAAgAAsGACAAJAALBAAjAAvKHwIGfwJ+IwBBkAJrIgYkACAGIAA2AogCIAYgATYChAIgBiACNgKAAiAGIAM2AvwBIAYgBDYC+AEgBiAFNgL0ASAGEAM2AvABAkAgBigC8AFFBEAgBkGhCTYCjAIMAQsgBkHgAWogBigC8AEQCCAGKALwARAXIAZB0AFqIAZB4AFqEA8gBkHAAWogBigChAIQCCAGQbABaiAGKAKAAhAIIAZBoAFqIAYoAvwBEAggBkGQAWogBigC+AEQCCAGQfAAaiAGQdABahAPIAYoAogCIQkgBkHgAGogBkHAAWoQDyAGQdAAaiAGQbABahAPIAYoAvQBIQogBkFAa0GkCRAIIAZBMGpBpAkQCCAGQSBqIAZBoAFqEA8gBkEQakGkCRAIIAYgBkGQAWoQDyAGQfAAaiEAIAZB4ABqIQEgBkHQAGohAyAGQTBqIQQgBkEgaiEHIAZBEGohCCMAQcAbayICJAAgAiAGQYABaiIFNgK8GyACIAk2ArgbIAJBADYCtBsgAiAKNgKwGyACQQA2AqwbIAJBADYCqBsgAkGYG2oQGSACQYAINgKUGyACQeX7lvYANgKQGyACQYAbakGFCBAIIAJB8BpqQYUIEAggAkHwEmpBgAgQEiACQfAKakGACBASIAIgBkFAayIJEAkgCRAKEBU2AuwKIAIgAkGAG2oQCSACQYAbahAKEBU2AugKIAIgAkHwGmoQCSACQfAaahAKEBU2AuQKAkAgAigCqBtBCkoEQCAFQYsIEAggAkEBNgLgCgwBCyACQQI2AtwKIAJB8BJqIAIoArQbIAJB3ApqEAsgAkHwEmogAigCkBsgAkHcCmoQCyACQfASaiACKAK4GyACQdwKahALIAJB8BJqIAIoAuwKIAJB3ApqEAsgAkHwEmogAigCsBsgAkHcCmoQCyACQfASaiAEEAkgBBAKIAJB3ApqEA0gAkHwEmogBxAJIAcQCiACQdwKahANIAJB8BJqIAEQCSABEAogAkHcCmoQDSACQfASaiADEAkgAxAKIAJB3ApqEA0gAkHwEmogABAJIAAQCiACQdwKahANIAJB8BJqIAIoAuQKIAJB3ApqEAsgAkHwEmogAigC6AogAkHcCmoQCyACQQA2AtgKIAJBADYC1AoDQCACKALUCiACKAKoG0gEQCACKAKsGyACKALUCkECdGooAgBBf0cEQCACIAIoAtgKQQEgAigC1Ap0cjYC2AoLIAIgAigC1ApBAWo2AtQKDAELCyACQfASaiACKALYCiACQdwKahALIAJBADYC0AoDQCACKALQCiACKAKoG0gEQCACKAKsGyACKALQCkECdGooAgBBf0cEQCACQfASaiACKAKsGyACKALQCkECdGooAgAgAkHcCmoQCwsgAiACKALQCkEBajYC0AoMAQsLIAJB8BJqIAgQCSAIEAogAkHcCmoQDSACQfASaiAGEAkgBhAKIAJB3ApqEA0gAiACKALcCkECa0H//wNxIgBBCHQgAEEIdnI7AfASIAIgAkHwEmogAigC3AoQFTYCzAogAkGgCmoiAEIANwMAIABCADcDGCAAQgA3AxAgAEIANwMIIAIoAtwKQYAISwRAIAVBjggQCCACQQE2AuAKDAELIAJBQGtBsAkQEiACQZgKakGVCCkAADcAACACQfAJaiIAQbYIKQAANwAYIABBrggpAAA3ABAgAEGmCCkAADcACCAAQZ4IKQAANwAAIAIoAtwKrSEMIwBB0ABrIgEkACABIAJBQGs2AkwgASACQThqNgJIIAEgAkHwEmo2AkQgASAMNwM4IAFBvwg2AjQgAUIQNwMoIAFBADYCJCABIAJBmApqNgIgIAEgAkHwCWo2AhwgAUIANwMQIAEpAzhCb1YEQBAAAAsgASgCTCEDIAEoAkwgASkDOKdqIQQgASgCRCEHIAEpAzghDCABKAI0IQggASkDKCENIAEoAiQhCSABKAIgIQogASgCHCELIwBBkANrIgAkACAAIAM2AowDIAAgBDYCiAMgAEEANgKEAyAAIAc2AoADIAAgDDcD+AIgACAINgL0AiAAIA03A+gCIAAgCTYC5AIgACAKNgLgAiAAIAs2AtwCIAAoAuACIQQgACgC3AIhByMAQSBrIgMkACADIABBEGo2AhwgA0LAADcDECADIAQ2AgwgAyAHNgIIIAMoAhwgAykDECADKAIMIAMoAghBkAooAgAoAgARCgAaIANBIGokACMAQRBrIgMkACADIABB0ABqNgIMIAMgAEEQajYCCCADKAIMIAMoAghBhAooAgAoAgARBAAaIANBEGokACAAQRBqQcAAEBEgAEHQAGogACgC9AIgACkD6AIQFCAAQQhqIAApA+gCEDAgAEHQAGogAEEIakIIEBQgACgCjAMhBCAAKAKAAyEHIAApA/gCIQwgACgC4AIhCCAAKALcAiEJIwBBMGsiAyQAIAMgBDYCLCADIAc2AiggAyAMNwMgIAMgCDYCHCADQgE3AxAgAyAJNgIMIAMoAiwgAygCKCADKQMgIAMoAhwgAykDECADKAIMQZAKKAIAKAIEEQkAGiADQTBqJAAgAEHQAGogACgCjAMgACkD+AIQFCAAQQhqIAApA/gCEDAgAEHQAGogAEEIakIIEBQgACgCiAMhBCMAQRBrIgMkACADIABB0ABqNgIMIAMgBDYCCCADKAIMIAMoAghBhAooAgAoAggRBAAaIANBEGokACAAQdAAakGAAhARIAAoAoQDBEAgACgChANCEDcDAAsgAEGQA2okACABQQA2AgwgASgCSARAIAEoAgxFBEAgASABKQM4QhB8NwMQCyABKAJIIAEpAxA3AwALIAEoAgwaIAFB0ABqJAAgAkIIIAIpAzhCB4N9PgI0IAJBADYCMANAIAIoAjAgAigCNEkEQCACKQM4pyACQUBraiACKAI0OgAAIAIgAikDOEIBfDcDOCACIAIoAjBBAWo2AjAMAQsLIAIpAzhQBEAgBUHQCBAIIAJBATYC4AoMAQsgAkEANgArIAJBADoALyACQQA2ACYgAkEAOgAqQbARIAIoArAbQQFrrTcDACACQQA2AiADQCACKAIgQQRIBEBBsBFBsBEpAwBCrf7V5NSF/ajYAH5CAXwiDDcDACACIAxCIYinQf8BcDoAHyACKAIgIAJBJmpqIAIoApQbIAIoAiBqLAAAIAItAB9zOgAAIAIoAiAgAkEramogAi0AHzoAACACIAIoAiBBAWo2AiAMAQsLIAJBEGoQGSACQRBqIAJBK2pBBBATIAJBEGogAkEmakEEEBMgAkEQaiACQUBrIAIpAzinEBMgAiACKALMCiIAQQh0QYCA/AdxIABBGHRyIABBCHZBgP4DcSAAQRh2cnI2AgwgAkEQaiACQQxqQQQQEyACQRBqEAkhASACQRBqEAohAyMAQTBrIgAgATYCLCAAIAM2AiggACACQfASajYCJCAAQYAINgIgAkAgACgCKEEASA0AIAAoAiBBAEgNACAAIAAoAiw2AhwgACAAKAIoQQNtNgIYIAAgACgCKCAAKAIYQQNsSjoAFyAAIAAoAiggACgCGEEDbEECakY6ABYgACAAKAIYIAAtABdBAXFqQQJ0NgIQAkAgACgCHARAIAAoAhAgACgCIEwNAQsgACgCJEEAOgAADAELIABBADYCDANAIAAoAgwgACgCGEgEQCAAKAIkIAAoAgxBAnRqIAAoAhwgACgCDEEDbGotAABBAnYtAOAIOgAAIAAoAiQgACgCDEECdEEBamogACgCHCAAKAIMQQNsai0AAEEDcUEEdCAAKAIcIAAoAgxBA2xBAWpqLQAAQQR2ci0A4Ag6AAAgACgCJCAAKAIMQQJ0QQJqaiAAKAIcIAAoAgxBA2xBAWpqLQAAQQJ0IAAoAhwgACgCDEEDbEECamotAABBBnZyQT9xLQDgCDoAACAAKAIkIAAoAgxBAnRBA2pqIAAoAhwgACgCDEEDbEECamotAABBP3EtAOAIOgAAIAAgACgCDEEBajYCDAwBCwsgAC0AF0EBcQRAIAAoAiQgACgCDEECdGogACgCHCAAKAIMQQNsai0AAEECdi0A4Ag6AAACQCAALQAWQQFxBEAgACgCJCAAKAIMQQJ0QQFqaiAAKAIcIAAoAgxBA2xqLQAAQQNxQQR0IAAoAhwgACgCDEEDbEEBamotAABBBHZyLQDgCDoAACAAKAIkIAAoAgxBAnRBAmpqIAAoAhwgACgCDEEDbEEBamotAABBAnRBP3EtAOAIOgAADAELIAAoAiQgACgCDEECdEEBamogACgCHCAAKAIMQQNsai0AAEEDcUEEdC0A4Ag6AAAgACAAKAIQQQFrNgIQCyAAIAAoAhBBAWs2AhALIAAoAiQgACgCEGpBADoAAAsgAhAZIAJB8BJqIQMgAkHwEmoQICEBIwBBEGsiByQAAkAgASACECUiAE0EQCACEBgiCSEEIAEiAARAAkAgAyAERg0AIAMgACAEaiIKa0EAIABBAXRrTQRAIAQgAyAAEBYMAQsgAyAEc0EDcSEIAkACQCADIARLBEAgCA0CIARBA3FFDQEDQCAARQ0EIAQgAy0AADoAACADQQFqIQMgAEEBayEAIARBAWoiBEEDcQ0ACwwBCwJAIAgNACAKQQNxBEADQCAARQ0FIAQgAEEBayIAaiIIIAAgA2otAAA6AAAgCEEDcQ0ACwsgAEEDTQ0AA0AgBCAAQQRrIgBqIAAgA2ooAgA2AgAgAEEDSw0ACwsgAEUNAgNAIAQgAEEBayIAaiAAIANqLQAAOgAAIAANAAsMAgsgAEEDTQ0AA0AgBCADKAIANgIAIANBBGohAyAEQQRqIQQgAEEEayIAQQNLDQALCyAARQ0AA0AgBCADLQAAOgAAIARBAWohBCADQQFqIQMgAEEBayIADQALCwsgB0EAOgAPIAEgCWogBy0ADzoAACACIAEQJAwBCyACIAAgASAAayACEBwiAEEAIAAgASADECMLIAdBEGokACMAQRBrIgAkACAAIAU2AgwgACACNgIIIAAoAgwiAQJ+IwBBEGsiAyAAKAIINgIMIAMoAgwiAykCAAs3AgAgASADKAIINgIIIAAoAggQHiAAQRBqJAAgAkEBNgLgCiACEAYgAkEQahAGCyACQfAaahAGIAJBgBtqEAYgAkGYG2oQBiACQcAbaiQAIAYQBiAGQRBqEAYgBkEgahAGIAZBMGoQBiAGQUBrEAYgBkHQAGoQBiAGQeAAahAGIAZB8ABqEAYgBiAGQYABahAJNgKMAiAGQYABahAGIAZBkAFqEAYgBkGgAWoQBiAGQbABahAGIAZBwAFqEAYgBkHQAWoQBiAGQeABahAGCyAGKAKMAiEAIAZBkAJqJAAgAAvKAQEBfyMAQYABayIGJAAgBiAANgJ4IAYgATYCdCAGIAI3A2ggBiADNgJkIAYgBDcDWCAGIAU2AlQCQCAGKQNoUARADAELIAYgBikDWEIgiD4CBCAGIAYpA1g+AgAgBkEIaiAGKAIAEAUgBkEMaiAGKAIEEAUgBkEQaiAGKAJUEC8gBkEQaiAGKAJkIAZBCGoQLiAGQRBqIAYoAnQgBigCeCAGKQNoEC0gBkEQakHAABARCyAGQQA2AnwgBigCfCEAIAZBgAFqJAAgAAuXAQEBfyMAQeAAayIEJAAgBCAANgJYIAQgATcDUCAEIAI2AkwgBCADNgJIAkAgBCkDUFAEQAwBCyAEQQhqIAQoAkgQLyAEQQhqIAQoAkxBABAuIAQoAlggBCkDUKcQEiAEQQhqIAQoAlggBCgCWCAEKQNQEC0gBEEIakHAABARCyAEQQA2AlwgBCgCXCEAIARB4ABqJAAgAAvVCQICfwF+IwBBEGsiAiQAIAIgADYCDCACIAE2AgggAigCDCEBIAIoAgghAyMAQdAAayIAJAAgACABNgJMIAAgAzYCSCAAKAJMKQM4QgBSBEAgACAAKAJMKQM4NwMAIAAoAkxBQGshASAAIAApAwAiBEIBfDcDACAEpyABakEBOgAAA0AgACkDAEIQVARAIAApAwCnIAAoAkxBQGtqQQA6AAAgACAAKQMAQgF8NwMADAELCyAAKAJMQQE6AFAgACgCTCAAKAJMQUBrQhAQGwsgACAAKAJMKAIUNgJEIAAgACgCTCgCGDYCQCAAIAAoAkwoAhw2AjwgACAAKAJMKAIgNgI4IAAgACgCTCgCJDYCNCAAIAAoAkBBGnY2AjAgACAAKAJAQf///x9xNgJAIAAgACgCMCAAKAI8ajYCPCAAIAAoAjxBGnY2AjAgACAAKAI8Qf///x9xNgI8IAAgACgCMCAAKAI4ajYCOCAAIAAoAjhBGnY2AjAgACAAKAI4Qf///x9xNgI4IAAgACgCMCAAKAI0ajYCNCAAIAAoAjRBGnY2AjAgACAAKAI0Qf///x9xNgI0IAAgACgCRCAAKAIwQQVsajYCRCAAIAAoAkRBGnY2AjAgACAAKAJEQf///x9xNgJEIAAgACgCMCAAKAJAajYCQCAAIAAoAkRBBWo2AiwgACAAKAIsQRp2NgIwIAAgACgCLEH///8fcTYCLCAAIAAoAkAgACgCMGo2AiggACAAKAIoQRp2NgIwIAAgACgCKEH///8fcTYCKCAAIAAoAjwgACgCMGo2AiQgACAAKAIkQRp2NgIwIAAgACgCJEH///8fcTYCJCAAIAAoAjggACgCMGo2AiAgACAAKAIgQRp2NgIwIAAgACgCIEH///8fcTYCICAAIAAoAjQgACgCMGpBgICAIGs2AhwgACAAKAIcQR92QQFrNgIMIAAgACgCDCAAKAIscTYCLCAAIAAoAgwgACgCKHE2AiggACAAKAIMIAAoAiRxNgIkIAAgACgCDCAAKAIgcTYCICAAIAAoAgwgACgCHHE2AhwgACAAKAIMQX9zNgIMIAAgACgCLCAAKAJEIAAoAgxxcjYCRCAAIAAoAiggACgCQCAAKAIMcXI2AkAgACAAKAIkIAAoAjwgACgCDHFyNgI8IAAgACgCICAAKAI4IAAoAgxxcjYCOCAAIAAoAhwgACgCNCAAKAIMcXI2AjQgACAAKAJEIAAoAkBBGnRyNgJEIAAgACgCPEEUdCAAKAJAQQZ2cjYCQCAAIAAoAjhBDnQgACgCPEEMdnI2AjwgACAAKAI0QQh0IAAoAjhBEnZyNgI4IAAgACgCRK0gACgCTCgCKK18NwMQIAAgACkDED4CRCAAIAAoAkCtIAAoAkwoAiytfCAAKQMQQiCIfDcDECAAIAApAxA+AkAgACAAKAI8rSAAKAJMKAIwrXwgACkDEEIgiHw3AxAgACAAKQMQPgI8IAAgACgCOK0gACgCTCgCNK18IAApAxBCIIh8NwMQIAAgACkDED4COCAAKAJIIAAoAkQQBSAAKAJIQQRqIAAoAkAQBSAAKAJIQQhqIAAoAjwQBSAAKAJIQQxqIAAoAjgQBSAAKAJMQdgAEBEgAEHQAGokACACQRBqJABBAAuFBAECfyMAQRBrIgMkACADIAA2AgwgAyABNgIIIAMgAjcDACADKAIMIQEgAygCCCEEIAMpAwAhAiMAQTBrIgAkACAAIAE2AiwgACAENgIoIAAgAjcDIAJAIAAoAiwpAzhCAFIEQCAAQhAgACgCLCkDOH03AxAgACkDECAAKQMgVgRAIAAgACkDIDcDEAsgAEIANwMYA0AgACkDGCAAKQMQVARAIAAoAiwpAzggACkDGHynIAAoAixBQGtqIAAoAiggACkDGKdqLQAAOgAAIAAgACkDGEIBfDcDGAwBCwsgACAAKQMgIAApAxB9NwMgIAAgACgCKCAAKQMQp2o2AiggACgCLCIBIAApAxAgASkDOHw3AzggACgCLCkDOEIQVA0BIAAoAiwgACgCLEFAa0IQEBsgACgCLEIANwM4CyAAKQMgQhBaBEAgACAAKQMgQnCDNwMIIAAoAiwgACgCKCAAKQMIEBsgACAAKAIoIAApAwinajYCKCAAIAApAyAgACkDCH03AyALIAApAyBQDQAgAEIANwMYA0AgACkDGCAAKQMgVARAIAAoAiwpAzggACkDGHynIAAoAixBQGtqIAAoAiggACkDGKdqLQAAOgAAIAAgACkDGEIBfDcDGAwBCwsgACgCLCIBIAApAyAgASkDOHw3AzgLIABBMGokACADQRBqJABBAAuCAwECfyMAQRBrIgIkACACIAA2AgwgAiABNgIIIAIoAgwhASACKAIIIQMjAEEQayIAJAAgACABNgIMIAAgAzYCCCAAKAIIEARB////H3EhASAAKAIMIAE2AgAgACgCCEEDahAEQQJ2QYP+/x9xIQEgACgCDCABNgIEIAAoAghBBmoQBEEEdkH/gf8fcSEBIAAoAgwgATYCCCAAKAIIQQlqEARBBnZB///AH3EhASAAKAIMIAE2AgwgACgCCEEMahAEQQh2Qf//P3EhASAAKAIMIAE2AhAgACgCDEEANgIUIAAoAgxBADYCGCAAKAIMQQA2AhwgACgCDEEANgIgIAAoAgxBADYCJCAAKAIIQRBqEAQhASAAKAIMIAE2AiggACgCCEEUahAEIQEgACgCDCABNgIsIAAoAghBGGoQBCEBIAAoAgwgATYCMCAAKAIIQRxqEAQhASAAKAIMIAE2AjQgACgCDEIANwM4IAAoAgxBADoAUCAAQRBqJAAgAkEQaiQAQQALC5oCAwBBgAgLUvJfTBoANG51bGwALTEAbGVuZXJyADhbO9vHjBtXAADrT+Ic05XnuxTuKB+RT4EzANhcQ63ef1cbfGq6zlKfAKn94gdxx4Wm29kgXlY+wS0ALTIAQeAIC5UBQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlfLQAtMQAAYmFzaWNfc3RyaW5nAGFsbG9jYXRvcjxUPjo6YWxsb2NhdGUoc2l6ZV90IG4pICduJyBleGNlZWRzIG1heGltdW0gc3VwcG9ydGVkIHNpemUAQfgJCx8BAAAAAgAAAAMAAAD4BAAABAAAAAUAAAAIBQAAsApQ";if(!Pe.startsWith(Ue)){var Ne=Pe;Pe=L.locateFile?L.locateFile(Ne,ee):ee+Ne}function Ve(){var xe=Pe;try{if(xe==Pe&&ie)return new Uint8Array(ie);var Re=De(xe);if(Re)return Re;if(te)return te(xe);throw"both async and sync fetching of the wasm failed"}catch(we){Se(we)}}function ze(){return ie||!J&&!Z||typeof fetch!="function"?Promise.resolve().then(function(){return Ve()}):fetch(Pe,{credentials:"same-origin"}).then(function(xe){if(!xe.ok)throw"failed to load wasm binary file at '"+Pe+"'";return xe.arrayBuffer()}).catch(function(){return Ve()})}function Ze(xe){for(;0<xe.length;){var Re=xe.shift();if(typeof Re=="function")Re(L);else{var we=Re.o;typeof we=="number"?Re.m===void 0?de.get(we)():de.get(we)(Re.m):we(Re.m===void 0?null:Re.m)}}}var Ae=typeof atob=="function"?atob:function(xe){var Re="",we=0;xe=xe.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(xe.charAt(we++)),pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(xe.charAt(we++)),ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(xe.charAt(we++)),Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(xe.charAt(we++));Le=Le<<2|pe>>4,pe=(pe&15)<<4|ge>>2;var Ce=(ge&3)<<6|Ee;Re+=String.fromCharCode(Le),ge!==64&&(Re+=String.fromCharCode(pe)),Ee!==64&&(Re+=String.fromCharCode(Ce))}while(we<xe.length);return Re};function De(xe){if(xe.startsWith(Ue)){try{var Re=Ae(xe.slice(Ue.length)),we=new Uint8Array(Re.length);for(xe=0;xe<Re.length;++xe)we[xe]=Re.charCodeAt(xe)}catch(Le){throw Error("Converting base64 string to bytes failed.")}return we}}var Ke={a:function(){Se()},b:function(xe,Re,we){fe.copyWithin(xe,Re,Re+we)},c:function(){Se("OOM")},d:function(){function xe(pe){return pe?48<pe.length?pe.substr(0,48):pe:""}var Re=function(){var pe=document.URL,ge=window.navigator.userAgent.toLowerCase(),Ee="";0<document.referrer.length&&(Ee=document.referrer);try{Ee.length==0&&0<window.opener.location.href.length&&(Ee=window.opener.location.href)}catch(qe){}var Ce=window.navigator.appCodeName,Fe=window.navigator.appName,Be=window.navigator.platform;return pe=xe(pe),Ee=xe(Ee),ge=xe(ge),pe+"|"+ge+"|"+Ee+"|"+Ce+"|"+Fe+"|"+Be}(),we=ce(Re)+1,Le=ke(we);return ue(Re,Le,we+1),Le}};(function(){function xe(pe){L.asm=pe.exports,ne=L.asm.e,pe=ne.buffer,L.HEAP8=he=new Int8Array(pe),L.HEAP16=new Int16Array(pe),L.HEAP32=new Int32Array(pe),L.HEAPU8=fe=new Uint8Array(pe),L.HEAPU16=new Uint16Array(pe),L.HEAPU32=new Uint32Array(pe),L.HEAPF32=new Float32Array(pe),L.HEAPF64=new Float64Array(pe),de=L.asm.g,me.unshift(L.asm.f),be--,L.monitorRunDependencies&&L.monitorRunDependencies(be),be==0&&Te&&(pe=Te,Te=null,pe())}function Re(pe){xe(pe.instance)}function we(pe){return ze().then(function(ge){return WebAssembly.instantiate(ge,Le)}).then(pe,function(ge){re("failed to asynchronously prepare wasm: "+ge),Se(ge)})}var Le={a:Ke};if(be++,L.monitorRunDependencies&&L.monitorRunDependencies(be),L.instantiateWasm)try{return L.instantiateWasm(Le,xe)}catch(pe){return re("Module.instantiateWasm callback failed with error: "+pe),!1}return function(){return ie||typeof WebAssembly.instantiateStreaming!="function"||Pe.startsWith(Ue)||typeof fetch!="function"?we(Re):fetch(Pe,{credentials:"same-origin"}).then(function(pe){return WebAssembly.instantiateStreaming(pe,Le).then(Re,function(ge){return re("wasm streaming compile failed: "+ge),re("falling back to ArrayBuffer instantiation"),we(Re)})})}().catch(X),{}})(),L.___wasm_call_ctors=function(){return(L.___wasm_call_ctors=L.asm.f).apply(null,arguments)},L._getckey=function(){return(L._getckey=L.asm.h).apply(null,arguments)};var Qe=L.stackSave=function(){return(Qe=L.stackSave=L.asm.i).apply(null,arguments)},tt=L.stackRestore=function(){return(tt=L.stackRestore=L.asm.j).apply(null,arguments)},Ie=L.stackAlloc=function(){return(Ie=L.stackAlloc=L.asm.k).apply(null,arguments)},ke=L._malloc=function(){return(ke=L._malloc=L.asm.l).apply(null,arguments)};L.ccall=ae,L.cwrap=function(xe,Re,we,Le){we=we||[];var pe=we.every(function(ge){return ge==="number"});return Re!=="string"&&pe&&!Le?se(xe):function(){return ae(xe,Re,we,arguments)}};var Me;Te=function xe(){Me||Ye(),Me||(Te=xe)};function Ye(){function xe(){if(!Me&&(Me=!0,L.calledRun=!0,!oe)){if(Ze(me),Y(L),L.onRuntimeInitialized&&L.onRuntimeInitialized(),L.postRun)for(typeof L.postRun=="function"&&(L.postRun=[L.postRun]);L.postRun.length;){var Re=L.postRun.shift();ve.unshift(Re)}Ze(ve)}}if(!(0<be)){if(L.preRun)for(typeof L.preRun=="function"&&(L.preRun=[L.preRun]);L.preRun.length;)ye();Ze(_e),0<be||(L.setStatus?(L.setStatus("Running..."),setTimeout(function(){setTimeout(function(){L.setStatus("")},1),xe()},1)):xe())}}if(L.run=Ye,L.preInit)for(typeof L.preInit=="function"&&(L.preInit=[L.preInit]);0<L.preInit.length;)L.preInit.pop()();return Ye(),U.ready}}(),getckey=function(){var G,U,L,Y,X,W=1836,z=-8290,J=2174,Z=-957,ee=-2285,te=3198,re=-9220,ie=5906,ne=8126,oe=-3571,se=-213,ae=2249,le=-693,ue=-327,ce=-1731,he=1765,fe=-5346,de=-4080,_e=7512,me=4359,ve=-496,ye=-4191,be=2007,Te=-1741,Se=700,Ue=-137,Pe=8366,Ne=-6006,Ve=9095,ze=2829,Ze=-6612,Ae=2907,De=-450,Ke=-4002,Qe=9852,tt=-3683,Ie=8972,ke=5031,Me=-1124,Ye=847,xe=-2667,Re=-1169,we=3738,Le=4510,pe=6428,ge=-4870,Ee=-5763,Ce=-132,Fe=9425,Be=9587,qe=-3620,je=-955,We=9508,Ge=-7940,lt=-6629,at=5513,ct=5977,ft=-4547,Et=-3840,Mt=-2175,xt=8487,Dt=-6720,Wt=6747,nr=6090,br=-9874,ur=-6246,Ir=9031,qt=2239,zt=-8467,Cr=-955,Rr=-2579,Pr=-2673,Or=-8067,Nr=-359,Dr=-7307,Lr=291,$r=-5270,Mr=-3336,Br=-1623,Fr=7936,kr=3769,Ur=-239,Vr=5156,Gr=9703,Hr=2034,Kr=4093,xr=-5537,Yr=-657,jr=6972,Qr=-517,qr=5772,Xr=-3763,Wr=8444,zr=-4631,Jr=-1401,Zr=7370,ei=-1755,ti=-2468,ri=709,ii=-7253,ni=8815,oi=-7188,ai=2123,si=1655,li=-4280,ui=-8940,Jt=Jt||function(wt,Tt){var yt={},_t=yt.a={},Lt=function(){},bt=_t.b={c:function(He){for(var st="",Oe=0;Oe<4;Oe++)st+=String.fromCharCode(W+9807-9295^"\u0945\u0942\u0945\u0958".charCodeAt(Oe));Lt.prototype=this;var $e=new Lt;return He&&$e.d(He),$e.hasOwnProperty(st)||($e.init=function(){$e.$super.init.apply(this,arguments)}),$e.init.prototype=$e,$e.$super=this,$e},create:function(){var He=this.c();return He.init.apply(He,arguments),He},init:function(){},d:function(He){for(var st="",Oe=0;Oe<8;Oe++)st+=String.fromCharCode(778^"\u037E\u0365\u0359\u037E\u0378\u0363\u0364\u036D".charCodeAt(Oe));for(var $e in He)He.hasOwnProperty($e)&&(this[$e]=He[$e]);He.hasOwnProperty(st)&&(this.toString=He.toString)},e:function(){return this.init.prototype.c(this)}},St=_t.f=bt.c({init:function(He,st){He=this.g=He||[],this.h=st!=null?st:(-2630+z+10924)*He.length},toString:function(He){return(He||It).i(this)},concat:function(He){var st=this.g,Oe=He.g,$e=this.h;if(He=He.h,this.j(),$e%(J+-269+-4213+2312))for(var Xe=0;Xe<He;Xe++)st[$e+Xe>>>2]|=(Oe[Xe>>>2]>>>24-Xe%4*8&255)<<24-($e+Xe)%(-9975+J+-4490+12295)*8;else if(65535<Oe.length)for(Xe=0;Xe<He;Xe+=4)st[$e+Xe>>>2]=Oe[Xe>>>Z+959];else st.push.apply(st,Oe);return this.h+=He,this},j:function(){var He=this.g,st=this.h;He[st>>>8517+W+-2630-7721]&=W+8309+-4849+4294961999<<32-(W+-8270+6442)*(st%4),He.length=wt.ceil(st/4)},e:function(){var He=bt.e.call(this);return He.g=this.g.slice(0),He},random:function(He){for(var st=[],Oe=0;Oe<He;Oe+=4)st.push(4294967296*wt.random()|-8555+ee+376+10464);return new St.init(st,He)}}),Pt=yt.k={},It=Pt.l={i:function(He){for(var st="",Oe=0;Oe<0;Oe++)st+=String.fromCharCode(368^"".charCodeAt(Oe));var $e=He.g;He=He.h;for(var Xe=[],it=0;it<He;it++){var gt=$e[it>>>2]>>>24-it%(te+5624-8818)*8&255;Xe.push((gt>>>4).toString(16)),Xe.push((15&gt).toString(16))}return Xe.join(st)},parse:function(He){for(var st=He.length,Oe=[],$e=0;$e<st;$e+=2)Oe[$e>>>re+9223]|=parseInt(He.substr($e,2),16)<<24-$e%8*4;return new St.init(Oe,st/2)}},Ft=Pt.m={i:function(He){for(var st="",Oe=0;Oe<0;Oe++)st+=String.fromCharCode(2238^"".charCodeAt(Oe));var $e=He.g;He=He.h;for(var Xe=[],it=0;it<He;it++)Xe.push(String.fromCharCode($e[it>>>2]>>>8383+Z-7402-it%4*8&255));return Xe.join(st)},parse:function(He){for(var st=He.length,Oe=[],$e=ie-5906;$e<st;$e++)Oe[$e>>>2]|=(255&He.charCodeAt($e))<<24-$e%4*8;return new St.init(Oe,st)}},Ct=Pt.n={i:function(He){for(var st="",Oe=0,$e="\xD8\xF4\xF9\xF3\xFA\xE7\xF8\xF0\xF1\xB5\xC0\xC1\xD3\xB8\xAD\xB5\xF1\xF4\xE1\xF4";Oe<$e.length;Oe++)st+=String.fromCharCode(149^$e.charCodeAt(Oe));try{return decodeURIComponent(escape(Ft.i(He)))}catch(Xe){throw Error(st)}},parse:function(He){return Ft.parse(unescape(encodeURIComponent(He)))}},Nt=_t.o=bt.c({p:function(){this.q=new St.init,this.r=W-1836},s:function(He){for(var st="",Oe=0;Oe<6;Oe++)st+=String.fromCharCode(4052^"\u0FA7\u0FA0\u0FA6\u0FBD\u0FBA\u0FB3".charCodeAt(Oe));st==typeof He&&(He=Ct.parse(He)),this.q.concat(He),this.r+=He.h},t:function(He){var st=this.q,Oe=st.g,$e=st.h,Xe=this.u,it=$e/(4*Xe);if(He=(it=He?wt.ceil(it):wt.max((0|it)-this.v,0))*Xe,$e=wt.min(4*He,$e),He){for(var gt=0;gt<He;gt+=Xe)this.w(Oe,gt);gt=Oe.splice(0,He),st.h-=$e}return new St.init(gt,$e)},e:function(){var He=bt.e.call(this);return He.q=this.q.e(),He},v:0});_t.x=Nt.c({y:bt.c(),init:function(He){this.y=this.y.c(He),this.p()},p:function(){Nt.p.call(this),this.z()},A:function(He){return this.s(He),this.t(),this},B:function(He){return He&&this.s(He),this.C()},u:16,D:function(He){return function(st,Oe){return new He.init(Oe).B(st)}},F:function(He){return function(st,Oe){return new Ut.HMAC.init(He,Oe).B(st)}}});var Ut=yt.G={};return yt}(Math);function Sr(wt){return gr.call(this,at+2097+8214-15822,wt)}function gr(wt){for(var Tt="",yt=-8432+ft+12979;yt<1;yt++)Tt+=String.fromCharCode(Et+Mt+xt-50^"\u090A".charCodeAt(yt));for(var _t="",Lt=0;Lt<1;Lt++)_t+=String.fromCharCode(Ne+3326+4681^"\u07AD".charCodeAt(Lt));for(var bt="",St=0;St<1;St++)bt+=String.fromCharCode(Dt+tt+te+8449^"\u04A0".charCodeAt(St));for(var Pt="",It=0;It<1;It++)Pt+=String.fromCharCode(Ue+-5316+8904^"\u0D07".charCodeAt(It));for(var Ft="",Ct=Wt+3628+nr-16465;Ct<1;Ct++)Ft+=String.fromCharCode(146+xt+-1434-5788^"\u05FF".charCodeAt(Ct));for(var Nt="",Ut=-1434+br+11308;Ut<1;Ut++)Nt+=String.fromCharCode(2260^"\u08A8".charCodeAt(Ut));for(var He="",st=0;st<1;st++)He+=String.fromCharCode(2890^"\u0B36".charCodeAt(st));for(var Oe="",$e=ur+6246;$e<10;$e++)Oe+=String.fromCharCode(-5316+qe+Ir+358^"\u01A8\u01A2\u01F6\u01A6\u01F6\u01A7\u01F5\u01F1\u01A7\u01A4".charCodeAt($e));for(var Xe="",it=qt+146+4448-6833;it<1;it++)Xe+=String.fromCharCode(2564^"\u0A78".charCodeAt(it));for(var gt="",Kt=zt+4448+4019;Kt<1;Kt++)gt+=String.fromCharCode(2096^"\u084C".charCodeAt(Kt));for(var Ht="",cr=Cr+-3155+-9555+13665;cr<1;cr++)Ht+=String.fromCharCode(Te+-3155+6442^"\u0676".charCodeAt(cr));for(var Rt="",vt=Rr+2579;vt<1;vt++)Rt+=String.fromCharCode(ze+9851-9876^"\u0A88".charCodeAt(vt));for(var $t="",Qt=0;Qt<1;Qt++)$t+=String.fromCharCode(qe+4223^"\u0227".charCodeAt(Qt));for(var Bt="",ht=0;ht<1;ht++)Bt+=String.fromCharCode(Pr+Te+9851-4347^"\u043E".charCodeAt(ht));for(var kt="",At=0;At<1;At++)kt+=String.fromCharCode(Or+ke+We-4523^"\u07E1".charCodeAt(At));for(var Vt="",Yt=-215+Ze+Se+6127;Yt<1;Yt++)Vt+=String.fromCharCode(889^"\u0305".charCodeAt(Yt));for(var Xt="",jt=Nr+-6842+7201;jt<0;jt++)Xt+=String.fromCharCode(_e+Dr+3363^"".charCodeAt(jt));for(var Gt="",rt=Fe+Lr+$r-4446;rt<0;rt++)Gt+=String.fromCharCode(Ce+de+4989^"".charCodeAt(rt));for(var tr="",Zt=-7878+ge+de+16828;Zt<0;Zt++)tr+=String.fromCharCode(3628+Mr+2321^"".charCodeAt(Zt));for(var pt="",ut=Br+Fr+kr-10082;ut<4;ut++)pt+=String.fromCharCode(Ur+5817-5364^"\xB4\xB9\xB2\xAF".charCodeAt(ut));for(var dt="",mt=pe+ue+-1665-4436;mt<4;mt++)dt+=String.fromCharCode(Vr+146+-4109+529^"\u06D8\u06D5\u06DE\u06C3".charCodeAt(mt));for(var Je="",et=Gr+9456-19159;et<4;et++)Je+=String.fromCharCode(1542^"\u0668\u0669\u0668\u0663".charCodeAt(et));for(var Ot="",or=je+lt+we+3846;or<2;or++)Ot+=String.fromCharCode(168^"\xC1\xCC".charCodeAt(or));for(var dr="",ar=Ge+7940;ar<3;ar++)dr+=String.fromCharCode(1698^"\u06C6\u06CB\u06D4".charCodeAt(ar));for(var fr="",sr=0,hr="\u0B36\u0B0B\u0B51\u0B5E\u0B08\u0B0D\u0B0D\u0B51\u0B59\u0B36";sr<hr.length;sr++)fr+=String.fromCharCode(9964+Hr+-1265-7812^hr.charCodeAt(sr));for(var pr="",lr=0;lr<6;lr++)pr+=String.fromCharCode(1454^"\u05D9\u05C7\u05C0\u05CA\u05C1\u05D9".charCodeAt(lr));switch(wt){case 0:var er=[];window[pr]===window?er.push(ie+Ae+Kr-12906):er.push(xr+5538);try{var _r=fr+Math.floor(1e7*Math.random()),rr=document.createElement(dr);rr.setAttribute(Ot,_r),rr.style.La=Je,(document.body||document.getElementsByTagName(dt)[0]).appendChild(rr),document.getElementById(_r)?er.push(0):er.push(1),(document.body||document.getElementsByTagName(pt)[Yr+W+jr-8151]).removeChild(rr)}catch(Tr){er.push(-1361+Qr+1879)}return er.join(tr);case 1:var mr=arguments[fe+5347],yr=new Jt.a.f.init([1332468387,-1641050960,qr+Ie+2136881301,-1629555948],Pr+2689),Ar=new Jt.a.f.init([Xr+he+22041281,Le+Wr+1457907509,776125350,-(-7878+Ee+-5975+1942018983)],zr+4647);return Jt.Ga.$(mr,yr,{ra:Ar,ba:Jt.ba.la,qa:Jt.na.ma}).xa.toString().toUpperCase();case Jr+Zr-5967:return(vr=arguments[ei+-1708+ti+5932])?vr.length>8011+Pe-16329?vr.substr(6968+ri-7677,48):vr:Gt;case 3:var nt=window.document.URL,ot=window.navigator.userAgent.toLowerCase(),Er=Xt;window.document.referrer.length>-11220+ii+18473&&(Er=window.document.referrer);try{Er.length==ni-8815&&opener.location.href.length>0&&(Er=opener.location.href)}catch(Tr){}var ci=window.navigator.appCodeName,di=window.navigator.appName,fi=window.navigator.platform;return nt=Sr(nt),Er=Sr(Er),nt+Vt+(ot=Sr(ot))+kt+Er+Bt+ci+$t+di+Rt+fi;case oi+Ve+Be-11490:var vr=arguments[1],ir=ai+-1434-689;if(vr.length==ae+Be+si-13491)return ir;for(z=li+1003+4059-782;z<vr.length;z++)var hi=vr.charCodeAt(z),ir=(ir<<8276+J-10445)-ir+hi,ir=ir&ir;return ir;case ui+8945:var wr=Ht+arguments[ve+z+8787]+gt+arguments[2]+Xe+Oe+He+arguments[3]+Nt+arguments[le+_e+oe-3244]+Ft+arguments[de+xr+-1658+11280]+Pt+function(){return gr.call(this,ct-5974)}()+bt+function(){return gr.call(this,0)}()+_t;return function(Tr){return gr.call(this,1,Tr)}(Tt+(ir=function(Tr){return gr.call(this,ce+1735,Tr)}(wr))+wr)}}return function(){for(var wt="",Tt=0,yt="\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9D\x9E\x9F\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8A\xB1\xB2\xB3\xB4\xB5\xB6\xB7\xB8\xB9\xBA\xBB\xBC\xBD\xBE\xBF\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xFB\xFF\xED";Tt<yt.length;Tt++)wt+=String.fromCharCode(208^yt.charCodeAt(Tt));var _t=Jt,Lt=_t.a.f;_t.k.H={i:function(bt){for(var St="",Pt=0;Pt<0;Pt++)St+=String.fromCharCode(4077^"".charCodeAt(Pt));var It=bt.g,Ft=bt.h,Ct=this.I;bt.j(),bt=[];for(var Nt=0;Nt<Ft;Nt+=3)for(var Ut=(It[Nt>>>2]>>>24-Nt%4*8&255)<<ne+-9200+1090|(It[Nt+(ee+7275-4989)>>>2]>>>24-(Nt+1)%4*8&255)<<8|It[Nt+2>>>2]>>>oe+3595-(Nt+2)%4*8&255,He=0;4>He&&Nt+.75*He<Ft;He++)bt.push(Ct.charAt(Ut>>>6*(3-He)&63));if(It=Ct.charAt(64))for(;bt.length%4;)bt.push(It);return bt.join(St)},parse:function(bt){var St=bt.length,Pt=this.I;(It=Pt.charAt(64))&&(It=bt.indexOf(It))!=-1&&(St=It);for(var It=[],Ft=0,Ct=0;Ct<St;Ct++)if(Ct%4){var Nt=Pt.indexOf(bt.charAt(Ct-1))<<Ct%(se+1860+5724-7367)*2,Ut=Pt.indexOf(bt.charAt(Ct))>>>6-Ct%4*2;It[Ft>>>ne+-6116+4162-6170]|=(Nt|Ut)<<24-Ft%4*8,Ft++}return Lt.create(It,Ft)},I:wt}}(),function(wt){var Tt=1864,yt=-6103,_t=-5750,Lt=-5616,bt=-7555,St=-458,Pt=1071,It=927,Ft=-2568,Ct=6326,Nt=-4204,Ut=4918,He=7574,st=6160,Oe=855,$e=-9137,Xe=2297,it=-9619,gt=-8866,Kt=-6091,Ht=-7050,cr=-1233,Rt=-7874,vt=5847,$t=5062,Qt=-4552,Bt=4635;function ht(pt,ut,dt,mt,Je,et,Ot){return Zt.call(this,2727+Tt+2727-7318,pt,ut,dt,mt,Je,et,Ot)}function kt(pt,ut,dt,mt,Je,et,Ot){return Zt.call(this,Tt+-3418+1555,pt,ut,dt,mt,Je,et,Ot)}function At(pt,ut,dt,mt,Je,et,Ot){return Zt.call(this,Tt+yt+-406+4647,pt,ut,dt,mt,Je,et,Ot)}function Vt(pt,ut,dt,mt,Je,et,Ot){return Zt.call(this,Z+1320+1320-1680,pt,ut,dt,mt,Je,et,Ot)}for(var Yt=Jt,Xt=(Gt=Yt.a).f,jt=Gt.x,Gt=Yt.G,rt=[],tr=Tt-1864;-12185+ee+14534>tr;tr++)rt[tr]=(yt+-7357+_t+4294986506)*wt.abs(wt.sin(tr+(-7343+ee+_t+15379)))|0;function Zt(pt){switch(pt){case 0:var ut=arguments[1],dt=arguments[Ut+7592+7592-20100],mt=arguments[st+Oe-7012],Je=arguments[He+$e+1567],et=arguments[-1789+Xe-503],Ot=arguments[it+gt+ee+20776];return((ut=ut+(dt&mt|~dt&Je)+et+arguments[7])<<Ot|ut>>>32-Ot)+dt;case Kt+Lt+11708:return ut=arguments[Ht+7051],dt=arguments[me+4673+Qe-18882],mt=arguments[Ct+Ve+re-6198],Je=arguments[tt+Ie+ke-10316],et=arguments[Me+ye+bt+12875],Ot=arguments[6],((ut=ut+(dt&Je|mt&~Je)+et+arguments[7])<<Ot|ut>>>-9475+cr+Ve+1645-Ot)+dt;case St+460:return ut=arguments[be+ce-275],dt=arguments[Ke+Ye+3157],mt=arguments[Rt+-6801+14678],Je=arguments[Ct+Pt-7393],et=arguments[Ft+vt+36-3310],Ot=arguments[ne+ze-10949],((ut=ut+(dt^mt^Je)+et+arguments[7])<<Ot|ut>>>32-Ot)+dt;case $t+Qt+xe+2160:return ut=arguments[1],dt=arguments[7592+Re+4673-11094],mt=arguments[be+It-2931],Je=arguments[5298+De+-4862+18],et=arguments[Bt-4630],Ot=arguments[ze+-6978+4155],((ut=ut+(mt^(dt|~Je))+et+arguments[se+220])<<Ot|ut>>>-8328+Nt+-2734+15298-Ot)+dt}}Gt=Gt.J=jt.c({z:function(){this.K=new Xt.init([1732584193,4023233417,2562383102,9348+oe+7556+271720545])},w:function(pt,ut){for(var dt=4921+yt+1182;16>dt;dt++){var mt=pt[Ot=ut+dt];pt[Ot]=16711935&(mt<<5017+Tt+4620-11493|mt>>>Lt+5640)|4278255360&(mt<<24|mt>>>8)}dt=this.K.g;var Je,et,Ot=pt[ut+0],or=(mt=pt[ut+1],pt[ut+(ae-2247)]),dr=pt[ut+3],ar=pt[ut+4],fr=pt[ut+5],sr=pt[ut+(Lt+ae+5624-2251)],hr=pt[ut+7],pr=pt[ut+8],lr=pt[ut+9],er=pt[ut+10],_r=pt[ut+11],rr=pt[ut+12],mr=pt[ut+(yt+J+3942)],yr=pt[ut+14],Ar=pt[ut+(14808+yt-8690)],nt=dt[-1465+W-371],ot=Vt(ot=Vt(ot=Vt(ot=Vt(ot=At(ot=At(ot=At(ot=At(ot=kt(ot=kt(ot=kt(ot=kt(ot=ht(ot=ht(ot=ht(ot=ht(ot=dt[1],et=ht(et=dt[2],Je=ht(Je=dt[3],nt=ht(nt,ot,et,Je,Ot,7,rt[-2964+ne-5162]),ot,et,mt,12,rt[1]),nt,ot,or,5903+Lt-270,rt[2]),Je,nt,dr,22,rt[3]),et=ht(et,Je=ht(Je,nt=ht(nt,ot,et,Je,ar,7,rt[4]),ot,et,fr,12,rt[5]),nt,ot,sr,17,rt[6]),Je,nt,hr,22,rt[7]),et=ht(et,Je=ht(Je,nt=ht(nt,ot,et,Je,pr,7,rt[8]),ot,et,lr,12,rt[9]),nt,ot,er,4264+Lt+1369,rt[-3423+le+4126]),Je,nt,_r,22,rt[11]),et=ht(et,Je=ht(Je,nt=ht(nt,ot,et,Je,rr,ie-5899,rt[12]),ot,et,mr,12,rt[le+-2344+3050]),nt,ot,yr,17,rt[1227+bt+6342]),Je,nt,Ar,-8569+se+8804,rt[St+-1821+806+1488]),et=kt(et,Je=kt(Je,nt=kt(nt,ot,et,Je,mt,yt+-1310+Lt+13034,rt[16]),ot,et,sr,9,rt[Tt+ue+-7697+6177]),nt,ot,_r,ce+-5305+7539-489,rt[18]),Je,nt,Ot,he+-571+6443-7617,rt[19]),et=kt(et,Je=kt(Je,nt=kt(nt,ot,et,Je,fr,5,rt[Pt-1051]),ot,et,er,9,rt[21]),nt,ot,Ar,14,rt[fe+_t+-8178+19296]),Je,nt,ar,20,rt[-11385+de+15488]),et=kt(et,Je=kt(Je,nt=kt(nt,ot,et,Je,lr,5,rt[24]),ot,et,yr,9,rt[25]),nt,ot,dr,-912+_e+me-10945,rt[It-901]),Je,nt,pr,12598+Ft-10010,rt[27]),et=kt(et,Je=kt(Je,nt=kt(nt,ot,et,Je,mr,5,rt[-4202+Ct-2096]),ot,et,or,9,rt[29]),nt,ot,hr,ve+Lt+Ct-200,rt[30]),Je,nt,rr,Ft+9955-7367,rt[7539+ne+42-15676]),et=At(et,Je=At(Je,nt=At(nt,ot,et,Je,fr,4,rt[32]),ot,et,pr,Tt-1853,rt[33]),nt,ot,_r,ve+9362-8850,rt[34]),Je,nt,yr,le+716,rt[35]),et=At(et,Je=At(Je,nt=At(nt,ot,et,Je,mt,-5345+ye+9540,rt[36]),ot,et,ar,11,rt[37]),nt,ot,hr,16,rt[38]),Je,nt,er,23,rt[39]),et=At(et,Je=At(Je,nt=At(nt,ot,et,Je,mr,Lt+St+be+4071,rt[40]),ot,et,Ot,Te+1752,rt[41]),nt,ot,dr,16,rt[42]),Je,nt,sr,23,rt[43]),et=At(et,Je=At(Je,nt=At(nt,ot,et,Je,lr,4,rt[44]),ot,et,rr,11,rt[45]),nt,ot,Ar,de+4096,rt[46]),Je,nt,or,Z+8387+-9793+2386,rt[47]),et=Vt(et,Je=Vt(Je,nt=Vt(nt,ot,et,Je,Ot,_t+Se+5056,rt[Ue+185]),ot,et,hr,_e-7502,rt[49]),nt,ot,yr,4376+Pe+3667-16394,rt[50]),Je,nt,fr,Ne+-983+7010,rt[51]),et=Vt(et,Je=Vt(Je,nt=Vt(nt,ot,et,Je,rr,42+ae+656-2941,rt[52]),ot,et,dr,10,rt[53]),nt,ot,er,2553+Ve+-8569-3064,rt[54]),Je,nt,mt,21,rt[3412+fe+1989]),et=Vt(et,Je=Vt(Je,nt=Vt(nt,ot,et,Je,pr,6,rt[56]),ot,et,Ar,2260+St-1792,rt[-6071+ze+3299]),nt,ot,sr,15,rt[-990+Nt+5252]),Je,nt,mr,4121+te-7298,rt[59]),et=Vt(et,Je=Vt(Je,nt=Vt(nt,ot,et,Je,ar,6,rt[Ze+6672]),ot,et,_r,10,rt[61]),nt,ot,or,15,rt[62]),Je,nt,lr,21,rt[63]);dt[Ae-2907]=dt[0]+nt|0,dt[1]=dt[1]+ot|0,dt[2]=dt[2]+et|0,dt[3]=dt[3]+Je|-11860+De+12310},C:function(){var pt=this.q,ut=pt.g,dt=(6876+St+-335-6075)*this.r,mt=8*pt.h;ut[mt>>>8761+Ut+1268-14942]|=128<<ye+4215-mt%32;var Je=wt.floor(dt/4294967296);for(ut[15+(mt+64>>>9<<Ke+4006)]=16711935&(Je<<8|Je>>>24)|4278255360&(Je<<24|Je>>>8),ut[14+(mt+(be+-6251+4308)>>>9<<4)]=16711935&(dt<<8|dt>>>24)|4278255360&(dt<<24|dt>>>8),pt.h=4*(ut.length+1),this.t(),ut=(pt=this.K).g,dt=0;4>dt;dt++)mt=ut[dt],ut[dt]=16711935&(mt<<8|mt>>>24)|4278255360&(mt<<24|mt>>>2244+He+2814-12624);return pt},e:function(){var pt=jt.e.call(this);return pt.K=this.K.e(),pt}}),Yt.J=jt.D(Gt),Yt.L=jt.F(Gt)}(Math),L=(G=(U=Jt).a).b,Y=G.f,X=(G=U.G).M=L.c({y:L.c({N:4,O:G.J,P:1}),init:function(wt){this.y=this.y.c(wt)},Q:function(wt,Tt){for(var yt=(St=this.y).O.create(),_t=Y.create(),Lt=_t.g,bt=St.N,St=St.P;Lt.length<bt;){Pt&&yt.A(Pt);var Pt=yt.A(wt).B(Tt);yt.p();for(var It=1;It<St;It++)Pt=yt.B(Pt),yt.p();_t.concat(Pt)}return _t.h=4*bt,_t}}),U.M=function(wt,Tt,yt){return X.create(yt).Q(wt,Tt)},Jt.a.R||function(wt){var Tt=(He=Jt).a,yt=Tt.b,_t=Tt.f,Lt=Tt.o,bt=He.k.H,St=He.G.M,Pt=Tt.R=Lt.c({y:yt.c(),S:function(Oe,$e){return this.create(this.T,Oe,$e)},U:function(Oe,$e){return this.create(this.V,Oe,$e)},init:function(Oe,$e,Xe){this.y=this.y.c(Xe),this.W=Oe,this.X=$e,this.p()},p:function(){Lt.p.call(this),this.z()},Y:function(Oe){return this.s(Oe),this.t()},B:function(Oe){return Oe&&this.s(Oe),this.C()},N:he-1761,Z:4,T:1,V:2,D:function(Oe){return{$:function($e,Xe,it){for(var gt="",Kt=0;Kt<6;Kt++)gt+=String.fromCharCode(403^"\u01E0\u01E7\u01E1\u01FA\u01FD\u01F4".charCodeAt(Kt));return(gt==typeof Xe?st:Ut).$(Oe,$e,Xe,it)},_:function($e,Xe,it){for(var gt="",Kt=0;Kt<6;Kt++)gt+=String.fromCharCode(2219^"\u08D8\u08DF\u08D9\u08C2\u08C5\u08CC".charCodeAt(Kt));return(gt==typeof Xe?st:Ut)._(Oe,$e,Xe,it)}}}});Tt.aa=Pt.c({C:function(){return this.t(!0)},u:1});var It=He.ba={},Ft=function(Oe,$e,Xe){var it=this.ca;it?this.ca=void 0:it=this.da;for(var gt=0;gt<Xe;gt++)Oe[$e+gt]^=it[gt]},Ct=(Tt.ea=yt.c({S:function(Oe,$e){return this.fa.create(Oe,$e)},U:function(Oe,$e){return this.ga.create(Oe,$e)},init:function(Oe,$e){this.ha=Oe,this.ca=$e}})).c();Ct.fa=Ct.c({ia:function(Oe,$e){var Xe=this.ha,it=Xe.u;Ft.call(this,Oe,$e,it),Xe.ja(Oe,$e),this.da=Oe.slice($e,$e+it)}}),Ct.ga=Ct.c({ia:function(Oe,$e){var Xe=this.ha,it=Xe.u,gt=Oe.slice($e,$e+it);Xe.ka(Oe,$e),Ft.call(this,Oe,$e,it),this.da=gt}}),It=It.la=Ct,Ct=(He.na={}).ma={na:function(Oe,$e){for(var Xe,it=(Xe=(Xe=4*$e)-Oe.h%Xe)<<24|Xe<<16|Xe<<8|Xe,gt=[],Kt=6180+ze+-1259-7750;Kt<Xe;Kt+=we+6428-10162)gt.push(it);Xe=_t.create(gt,Xe),Oe.concat(Xe)},oa:function(Oe){Oe.h-=255&Oe.g[Oe.h-1>>>2]}},Tt.pa=Pt.c({y:Pt.y.c({ba:It,qa:Ct}),p:function(){Pt.p.call(this);var Oe=($e=this.y).ra,$e=$e.ba;if(this.W==this.T)var Xe=$e.S;else Xe=$e.U,this.v=1;this.sa=Xe.call($e,this,Oe&&Oe.g)},w:function(Oe,$e){this.sa.ia(Oe,$e)},C:function(){var Oe=this.y.qa;if(this.W==this.T){Oe.na(this.q,this.u);var $e=this.t(!0)}else $e=this.t(!0),Oe.oa($e);return $e},u:xe+-6989+-3440+13100});var Nt=Tt.ta=yt.c({init:function(Oe){this.d(Oe)},toString:function(Oe){return(Oe||this.ua).i(this)}}),Ut=(It=(He.wa={}).va={i:function(Oe){var $e=Oe.xa;return((Oe=Oe.ya)?_t.create([1398893684,6475+be+1701068349]).concat(Oe).concat($e):$e).toString(bt)},parse:function(Oe){var $e=(Oe=bt.parse(Oe)).g;if($e[0]==1398893684&&$e[1]==1701076831){var Xe=_t.create($e.slice(2,4));$e.splice(0,4),Oe.h-=16}return Nt.create({xa:Oe,ya:Xe})}},Tt.za=yt.c({y:yt.c({wa:It}),$:function(Oe,$e,Xe,it){it=this.y.c(it);var gt=Oe.S(Xe,it);return $e=gt.B($e),gt=gt.y,Nt.create({xa:$e,Aa:Xe,ra:gt.ra,Ba:Oe,ba:gt.ba,qa:gt.qa,u:Oe.u,ua:it.wa})},_:function(Oe,$e,Xe,it){return it=this.y.c(it),$e=this.Ca($e,it.wa),Oe.U(Xe,it).B($e.xa)},Ca:function(Oe,$e){for(var Xe="",it=-8390+Le+3880;it<6;it++)Xe+=String.fromCharCode(2150^"\u0815\u0812\u0814\u080F\u0808\u0801".charCodeAt(it));return Xe==typeof Oe?$e.parse(Oe,this):Oe}})),He=(He.Da={}).va={Ea:function(Oe,$e,Xe,it){return it||(it=_t.random(Z+4678+-4737+1024)),Oe=St.create({N:$e+Xe}).Q(Oe,it),Xe=_t.create(Oe.g.slice($e),4*Xe),Oe.h=4*$e,Nt.create({Aa:Oe,ra:Xe,ya:it})}},st=Tt.Fa=Ut.c({y:Ut.y.c({Da:He}),$:function(Oe,$e,Xe,it){return Xe=(it=this.y.c(it)).Da.Ea(Xe,Oe.N,Oe.Z),it.ra=Xe.ra,(Oe=Ut.$.call(this,Oe,$e,Xe.Aa,it)).d(Xe),Oe},_:function(Oe,$e,Xe,it){return it=this.y.c(it),$e=this.Ca($e,it.wa),Xe=it.Da.Ea(Xe,Oe.N,Oe.Z,$e.ya),it.ra=Xe.ra,Ut._.call(this,Oe,$e,Xe.Aa,it)}})}(),function(){for(var wt=Jt,Tt=wt.a.pa,yt=wt.G,_t=[],Lt=[],bt=[],St=[],Pt=[],It=[],Ft=[],Ct=[],Nt=[],Ut=[],He=[],st=Ye+2043+-9216+6326;256>st;st++)He[st]=128>st?st<<1:st<<pe+4353-10780^-4619+ge+9772;var Oe=0,$e=13770+xe-11103;for(st=8146+ae+ae-12644;256>st;st++){var Xe=(Xe=$e^$e<<1^$e<<W+7286+7286-16406^$e<<3^$e<<we+2744-6478)>>>8^255&Xe^7286+Ee+-803-621;_t[Oe]=Xe,Lt[Xe]=Oe;var it=He[Oe],gt=He[it],Kt=He[gt],Ht=257*He[Xe]^16843008*Xe;bt[Oe]=Ht<<24|Ht>>>8,St[Oe]=Ht<<8146+Ze-1518|Ht>>>16,Pt[Oe]=Ht<<-7226+ve+-8993+16723|Ht>>>24,It[Oe]=Ht,Ht=16843009*Kt^65537*gt^(12950+Ce-12561)*it^(Fe+6038+Be+16817958)*Oe,Ft[Xe]=Ht<<24|Ht>>>Re+1177,Ct[Xe]=Ht<<16|Ht>>>16,Nt[Xe]=Ht<<Pe+qe-4738|Ht>>>24,Ut[Xe]=Ht,Oe?(Oe=it^He[He[He[Kt^it]]],$e^=He[He[$e]]):Oe=$e=1}var cr=[0,1,qe+1538+-9246+11330,je+-8064+-6326+15349,8,-7197+We-2295,32,64,128,27,54];yt=yt.Ga=Tt.c({z:function(){for(var Rt=($t=this.X).g,vt=$t.h/4,$t=4*((this.Ha=vt+6)+1),Qt=this.Ia=[],Bt=0;Bt<$t;Bt++)if(Bt<vt)Qt[Bt]=Rt[Bt];else{var ht=Qt[Bt-1];Bt%vt?6<vt&&Bt%vt==4&&(ht=_t[ht>>>24]<<24|_t[ht>>>16&255]<<16|_t[ht>>>8&255]<<8|_t[255&ht]):(ht=_t[(ht=ht<<8|ht>>>24)>>>24]<<24|_t[ht>>>16&255]<<16|_t[ht>>>8&Ge+8195]<<8|_t[255&ht],ht^=cr[Bt/vt|0]<<24),Qt[Bt]=Qt[Bt-vt]^ht}for(Rt=this.Ja=[],vt=0;vt<$t;vt++)Bt=$t-vt,ht=vt%4?Qt[Bt]:Qt[Bt-4],Rt[vt]=4>vt||4>=Bt?ht:Ft[_t[ht>>>24]]^Ct[_t[ht>>>16&255]]^Nt[_t[ht>>>8&255]]^Ut[_t[255&ht]]},ja:function(Rt,vt){this.Ka(Rt,vt,this.Ia,bt,St,Pt,It,_t)},ka:function(Rt,vt){var $t=Rt[vt+1];Rt[vt+1]=Rt[vt+3],Rt[vt+3]=$t,this.Ka(Rt,vt,this.Ja,Ft,Ct,Nt,Ut,Lt),$t=Rt[vt+1],Rt[vt+1]=Rt[vt+3],Rt[vt+3]=$t},Ka:function(Rt,vt,$t,Qt,Bt,ht,kt,At){for(var Vt=this.Ha,Yt=Rt[vt]^$t[0],Xt=Rt[vt+1]^$t[1],jt=Rt[vt+2]^$t[6782+se+2889-9456],Gt=Rt[vt+3]^$t[3],rt=4,tr=1;tr<Vt;tr++){var Zt=Qt[Yt>>>24]^Bt[Xt>>>16&255]^ht[jt>>>8&255]^kt[255&Gt]^$t[rt++],pt=Qt[Xt>>>24]^Bt[jt>>>16&255]^ht[Gt>>>8&255]^kt[255&Yt]^$t[rt++],ut=Qt[jt>>>24]^Bt[Gt>>>16&255]^ht[Yt>>>8&he-1510]^kt[255&Xt]^$t[rt++];Gt=Qt[Gt>>>24]^Bt[Yt>>>16&255]^ht[Xt>>>-3930+tt+7621&255]^kt[255&jt]^$t[rt++],Yt=Zt,Xt=pt,jt=ut}Zt=(At[Yt>>>24]<<24|At[Xt>>>16&255]<<16|At[jt>>>8&255]<<8|At[255&Gt])^$t[rt++],pt=(At[Xt>>>24]<<24|At[jt>>>16&255]<<16|At[Gt>>>8&255]<<8|At[255&Yt])^$t[rt++],ut=(At[jt>>>24]<<24|At[Gt>>>16&255]<<16|At[Yt>>>8&255]<<8|At[255&Xt])^$t[rt++],Gt=(At[Gt>>>24]<<9424+lt+-1219-1552|At[Yt>>>16&255]<<16|At[Xt>>>8&255]<<8|At[255&jt])^$t[rt++],Rt[vt]=Zt,Rt[vt+1]=pt,Rt[vt+(-5365+ne-2759)]=ut,Rt[vt+3]=Gt},N:8}),wt.Ga=Tt.D(yt)}(),function(wt,Tt,yt,_t,Lt){return gr.call(this,5,wt,Tt,yt,_t,Lt)}}(),getCkey9;function updateCkey(G,U){return __awaiter(this,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te;return __generator(this,function(re){switch(re.label){case 0:return L=U.tm,Y=U.vid,X=U.appVer,W=U.guid,z=U.platform,Z=L||getTimeStampStr(),G!==CKEY_VRE.CKEY_9?[3,3]:getCkey9?[3,2]:[4,_thumbplayerCkeyWasmFactory(void 0)];case 1:te=re.sent(),getCkey9=te.cwrap("getckey","string",["int","string","string","string","string","int"]),re.label=2;case 2:return ee=getCkey9(+z,X,Y,"",W,+Z),J=CKEY_VRE.CKEY_9,[3,4];case 3:ee=getckey(Y,Z,X,W,z),J=CKEY_VRE.CKEY_8,re.label=4;case 4:return U.tm=Z,U.cKey=ee,U.encryptVer=J,[2,U]}})})}var perpareRequestMiddleWare=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z;return __generator(this,function(J){switch(J.label){case 0:return L=G.reqParams,Y=G.config,X=G.player,W=Y.ckeyVer,[4,updateCkey(W,L)];case 1:return J.sent(),X.setCommonKv((z={},z[VOD_GET_INFO_DATA_KEYS.ckey]=L.cKey,z[VOD_GET_INFO_DATA_KEYS.ckeyVersion]=W,z)),G.logger.log("request params is:",G.reqParams),[4,U()];case 2:return J.sent(),[2]}})})};function getRequestUrl(G,U){var L=G.test,Y=G.path;if(L)return PATH.TEST;var X=Y||PATH.COMMON,W;return typeof X=="string"?W=X:W=X[U%X.length],W}var sendRequestMiddleWare=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te,re,ie,ne,oe,se;return __generator(this,function(ae){switch(ae.label){case 0:G.logger.log("doRequest start..."),L=G.requestor,Y=G.reqParams,X=G.config,W=X,z=W.ckeyVer,J=W.retryCount,Z=J===void 0?3:J,te=0,ae.label=1;case 1:if(!(te<Z+1))return[3,8];G.logger.log("retry... count is: ",te),ae.label=2;case 2:return ae.trys.push([2,5,,6]),ee=null,G.reqPath=getRequestUrl(X,te),re=G,ie=G.resData,ie?[3,4]:[4,L.start(G.reqPath,Y,X)];case 3:ie=ae.sent(),ae.label=4;case 4:return re.resData=ie,[3,6];case 5:return ne=ae.sent(),G.logger.log("the "+te+" retry err:",ne),(ne==null?void 0:ne.message)==="jsonp timeout"&&(ee={code:ErrorCode.GETINFO_TIMEOUT,message:ErrorMsg.GETINFO_TIMEOUT}),[3,6];case 6:if(G.alreadyRetryCount=te,G.resData)return[3,8];ae.label=7;case 7:return te++,[3,1];case 8:return G.resData&&+G.resData.em==85&&+G.resData.exem==-3?(G.reqParams.tm=G.resData.curTime,[4,updateCkey(z,Y)]):[3,13];case 9:ae.sent(),ae.label=10;case 10:return ae.trys.push([10,12,,13]),G.logger.log("retry ckey... "),G.reqPath=getRequestUrl(X,0),oe=G,[4,L.start(G.reqPath,Y,X)];case 11:return oe.resData=ae.sent(),[3,13];case 12:return se=ae.sent(),G.logger.log("retry ckey err:",se),[3,13];case 13:return G.endTime=+new Date,G.resData?(G.logger.log("sendRequest over... ret is: ",G.resData),[4,U()]):(G.throw((ee==null?void 0:ee.code)||ErrorCode.GETINFO_NET,(ee==null?void 0:ee.message)||ErrorMsg.GETINFO_NET),[2]);case 14:return ae.sent(),[2]}})})},setPlayerDataMiddleWare=function(G,U){return __awaiter(void 0,void 0,void 0,function(){var L,Y,X,W,z,J,Z,ee,te,re,ie,ne;return __generator(this,function(oe){switch(oe.label){case 0:return L=G.player,Y=G.resData,X=G.parseData,L.setCommonKv((W={},W[COMMON_DATA_KEY.status]=(z=X.vitem)===null||z===void 0?void 0:z.vst,W[COMMON_DATA_KEY.type]=(J=X.vitem)===null||J===void 0?void 0:J.type,W.videoName=X.title,W.byteRate=X.byteRate,W[COMMON_DATA_KEY.duration]=X.duration,W.preview=X.preview,W.drm=getDrm(Y),W[COMMON_DATA_KEY.p2p]=Y.fp2p?1:0,W[COMMON_DATA_KEY.fmt]=(ee=(Z=X.definitionList)===null||Z===void 0?void 0:Z.find(function(se){return se.sl}))===null||ee===void 0?void 0:ee.id,W[COMMON_DATA_KEY.testid]=Y.tstid,W[COMMON_DATA_KEY.cdnid]=(ne=(ie=(re=(te=X.vitem)===null||te===void 0?void 0:te.ul)===null||re===void 0?void 0:re.ui)===null||ie===void 0?void 0:ie[0])===null||ne===void 0?void 0:ne.vt,W[COMMON_DATA_KEY.rate]=X.byteRate,W[COMMON_DATA_KEY.dltype]=Y.dltype,W)),[4,U()];case 1:return oe.sent(),[2]}})})};function compose(G){return function(U,L){var Y=-1;return X(0);function X(W){if(W<=Y)return Promise.reject(new Error("next() called multiple times"));Y=W;var z=G[W];if(W===G.length&&(z=L),!z)return Promise.resolve(null);try{return Promise.resolve(z(U,X.bind(null,W+1)))}catch(J){return Promise.reject(J)}}}}var GetInfoVod=function(G){__extends(U,G);function U(L,Y,X){var W,z=G.call(this,L,Y,X)||this;return z._abort=!1,z._seq=0,z._externalGetInfoDataCaches={},z._config=__assign$1(__assign$1(__assign$1({},DEFAULT_GETINFO_CONFIG),((W=L.config)===null||W===void 0?void 0:W.getinfoConfig)||{}),Y),z.logger=new Logger(L.config.instanceId,"GetInfoVod"),z}return U.prototype.getReqParams=function(L,Y){return this.request(L,Y,[perpareRequestMiddleWare])},U.prototype.setVideoInfo=function(L,Y){this._externalGetInfoDataCaches[L]=Y},U.prototype.request=function(L,Y,X){var W=this,z=L,J=__assign$1(__assign$1(__assign$1({},DEFAULT_REQ_PARAMS),Y),{vid:z});this._abort=!1,this._seq+=1;var Z={player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,config:this._config,reqParams:J,reqPath:void 0,resData:void 0,requestor:new JsonpRequestor("getinfo_callback_"),parseData:void 0,error:void 0,throw:function(le,ue){var ce=new Error("getinfo err");throw ce.code=le,ce.message=ue,ce},seq:this._seq,urlConfig:null,logger:this.logger},ee=["vid","platform","sdtfrom","flowid","guid"],te=ee.find(function(le){return!J[le]});if(te)return Z.error={code:ErrorCode.GETINFO_INNER,message:"\u7F3A\u5C11\u5FC5\u8981\u64AD\u653E\u53C2\u6570 ("+te+") "},Promise.resolve(this.formatOutputData(Z));var re=this._config.prepareRequestMiddleWare||perpareRequestMiddleWare,ie=this._config.sendRequestMiddleWare||sendRequestMiddleWare,ne=this._config.checkResponseMiddleWare||checkResponseMiddleWare,oe=this._config.parseResponseMiddleWare||parseResponseMiddleWare;X?this._middlewares=X:this._externalGetInfoDataCaches[L]?(Z.resData=this._externalGetInfoDataCaches[L],this._externalGetInfoDataCaches[L]=void 0,this._middlewares=[ie,ne,oe,setPlayerDataMiddleWare]):this._middlewares=[re,ie,ne,oe,setPlayerDataMiddleWare];var se=compose(this._middlewares),ae=new Promise(function(){});return se(Z).then(function(){return W._abort||W._seq!==Z.seq?ae:(W.logger.log("getinfo \u6210\u529F: ",Z),W.formatOutputData(Z))}).catch(function(le){if(W._abort||W._seq!==Z.seq)return ae;var ue=le.code,ce=le.message;return ue||(W.logger.warn("getinfo \u5185\u90E8\u9519\u8BEF: ",le),ue=ErrorCode.GETINFO_INNER,ce=ErrorMsg.GETINFO_INNER+", err ("+le+")"),Z.error={code:ue,message:ce},W.formatOutputData(Z)})},U.prototype.abort=function(){this._abort=!0},U.prototype.destroy=function(){this.abort(),this._externalGetInfoDataCaches=null,this._middlewares=null,G.prototype.destroy.call(this)},U.prototype.formatOutputData=function(L){var Y,X,W,z,J,Z,ee,te=L.reqParams,re=L.resData,ie=L.parseData,ne=__assign$1({},L);["requestor","player","throw"].forEach(function(Te){delete ne[Te]});var oe=void 0,se=this.player.getCommonKv(COMMON_DATA_KEY.drm),ae=parseCodecInfo(re),le=ae.codec,ue=ae.kernelName,ce=ae.vtype;if(re&&ie){var he=ie==null?void 0:ie.urls.map(function(Te){return Te.url}),fe=he[0],de=he.slice(1),_e=((X=(Y=ie==null?void 0:ie.vitem)===null||Y===void 0?void 0:Y.ckc)===null||X===void 0?void 0:X.split("|"))||[],me=_e[0],ve=_e[1],ye=re.fp2p>=0&&((J=(z=(W=re.vl)===null||W===void 0?void 0:W.vi)===null||z===void 0?void 0:z[0])===null||J===void 0?void 0:J.keyid),be=re.downloadmode;oe={url:fe,backupUrls:de,m3u8:ie==null?void 0:ie.urls.m3u8,p2pConfig:ye?this.prepareP2PConfig({keyId:"hls."+ye,useP2P:re.fp2p===2,downloadMode:be}):null,drmConfig:me?this.prepareDRMConfig({drmType:se,licenseUrl:me,certificateUrl:ve}):null,chachaParam:se===DRM_TYPE.CHACHA?{linkvid:(Z=ie==null?void 0:ie.vitem)===null||Z===void 0?void 0:Z.lnk,base:(ee=ie==null?void 0:ie.vitem)===null||ee===void 0?void 0:ee.base,appVer:te.appVer,tm:re==null?void 0:re.tm,platform:te.platform}:null,drmType:se,kernelName:ue,vcodec:le,expireTimeStamp:+new Date+URL_EXPIRE_TIME}}return this.player.setCommonKv(COMMON_DATA_KEY.codec,ce||"unknown"),__assign$1(__assign$1({},ne),{kernelName:ue,urlConfig:oe})},U.prototype.prepareDRMConfig=function(L){var Y,X,W=L.drmType,z=L.licenseUrl,J=L.certificateUrl,Z=this.player.getCommonKv,ee=(Y={},Y[DRM_TYPE.FAIR_PLAY]=KeySystems.FairPlayWebKit,Y[DRM_TYPE.WIDEVINE]=KeySystems.Widevine,Y),te={licenseUrl:z,certificate:{},keySystem:ee[W],licenseRequestSetup:function(re){if(re.responseType="json",W===DRM_TYPE.FAIR_PLAY){var ie={guid:Z(COMMON_DATA_KEY.guid),fmt:Z(COMMON_DATA_KEY.fmt)},ne=Object.keys(ie).map(function(oe){return oe+"="+ie[oe]}).join("&");return re.body=re.body+"&"+ne,re}return re},licenseResponseSetup:function(re){var ie=re.code,ne=re.ckc;if(ie===0)return stringTool.base64ToUint8Array(ne)}};return W===DRM_TYPE.FAIR_PLAY&&(te.certificate=(X={},X[ee[W]]=J,X)),te},U.prototype.prepareP2PConfig=function(L){return __assign$1({flowId:this.player.getCommonKv(COMMON_DATA_KEY.flowid),playerInfo:this.getPlayerInfo()},L)},U.prototype.getPlayerInfo=function(){var L={platform:this.player.getCommonKv(COMMON_DATA_KEY.platform)||"",osVer:this.player.getCommonKv(COMMON_DATA_KEY.osver)||"",broVer:this.player.getCommonKv(COMMON_DATA_KEY.ua)||"",playerVer:this.player.getCommonKv(COMMON_DATA_KEY.playerver)||"",guid:this.player.getCommonKv(COMMON_DATA_KEY.guid)||"",qq:"",wx:"",vip:!1},Y=this.player.getCommonKv(COMMON_DATA_KEY.hc_main_login);return Y==="qq"?L.qq=this.player.getCommonKv(COMMON_DATA_KEY.hc_vuserid):Y==="wx"&&(L.wx=this.player.getCommonKv(COMMON_DATA_KEY.hc_vuserid)),L},U.pluginName="__thumbplayer-video-request",U}(Plugin),Poller=function(){function G(){var U=this;this.MAX_RETRY_TIMES=-1,this.markContext="last=0",this.pollInterval=3e4,this.reqData=null,this.timeout=5e3,this.loadInfo=function(){if(!!U.reqData){U.reqData.markContext=encodeURIComponent(U.markContext),U.reqData.tm=+new Date,U.reqData.vappid="31678259",U.reqData.vsecret="1e029a67beb2d7e7e7bb8321fb161a46fe76c7837beb2cee",U.reqData.otype="json",U.reqData.raw="1";var L="https://zbaccess.video.qq.com/fcgi/live_poll?"+urlTool.object2string(U.reqData,"&"),Y={url:L};return U.timeout!==-1&&(Y.timeout=U.timeout),netTool.xhr(Y).then(U.onCGIComplete).catch(function(X){throw U.onCGIError(X),X})}},this.onCGIComplete=function(L){var Y;U.clearTimer(),U.errorRetryTimes=0;var X;try{X=JSON.parse(L==null?void 0:L.data).data}catch(z){U.onCGIError(z)}if((X==null?void 0:X.errCode)===0){var W=Number(X.pollTimeOut);!isNaN(W)&&W>0&&(U.pollInterval=W*1e3),U.pollTimerID=window.setTimeout(U.loadInfo,U.pollInterval),(Y=U.onCallback)===null||Y===void 0||Y.call(U,null,X),X.markContext&&(U.markContext=X.markContext)}else U.onCGIError(X)}}return G.prototype.start=function(U,L){return U===void 0&&(U={}),this.reqData=U,this.errorRetryTimes=0,this.onCallback=L,this.loadInfo()},G.prototype.dispose=function(){this.clearTimer(),this.reqData=null,this.onCallback=null},G.prototype.onCGIError=function(U){var L;this.clearTimer(),this.errorRetryTimes+=1,this.MAX_RETRY_TIMES===-1||this.errorRetryTimes<=this.MAX_RETRY_TIMES?this.pollTimerID=window.setTimeout(this.loadInfo,this.pollInterval):(L=this.onCallback)===null||L===void 0||L.call(this,U,null)},G.prototype.clearTimer=function(){this.pollTimerID>0&&(clearTimeout(this.pollTimerID),this.pollTimerID=0)},G}(),LIVE_STATUS;(function(G){G[G.READY=1]="READY",G[G.PLAYING=2]="PLAYING",G[G.OVER=3]="OVER"})(LIVE_STATUS||(LIVE_STATUS={}));var LIVE_EVENTS={statusChange:"statusChange"},getUin=function(){var G=cookieTool.get("uin")||cookieTool.get("luin"),U=parseInt(G.replace(/^o0*/g,""),10);return isNaN(U)||U<=1e4?0:U},LivepollPlugin=function(G){__extends$b(U,G);function U(L,Y){var X=G.call(this,L)||this;X.status=LIVE_STATUS.READY,X.poller=new Poller,X.destory=function(){return X.poller.dispose()},X.handlerLivePollData=function(re,ie){if(!(re||!ie)){var ne=Number(ie.liveStatus);ne!==X.status&&(X.emit(LIVE_EVENTS.statusChange,{old:X.status,new:ne,raw:ie}),ne===LIVE_STATUS.OVER&&(X.player.stop(),X.destory())),X.status=ne}},X.config=__assign$a(__assign$a({},L.config.livepollConfig),Y);var W=X.config,z=W.livepid,J=W.autolisten,Z=J===void 0?!0:J,ee=W.timeout,te=ee===void 0?5e3:ee;return X.poller.timeout=te,z&&(X.livepid=z),Z&&(L.addListener(PLAY_EVENT$1.FIRST_PLAYING,function(){return X.request()}),L.addListener(PLAY_EVENT$1.STOPED,X.destory)),X}return U.prototype.request=function(L){if(L!=null&&L.livepid&&(this.livepid=L.livepid),this.poller.dispose(),!!this.livepid)return this.poller.start({pollDataKey:encodeURIComponent("pid="+this.livepid),needMarkInfo:1,qqlog:getUin(),guid:this.player.getCommonKv("guid")},this.handlerLivePollData)},U.pluginName="live-poll",U}(Plugin);H5Player.registerPlugin(LivepollPlugin.pluginName,LivepollPlugin);function styleInject(G,U){U===void 0&&(U={});var L=U.insertAt;if(!(!G||typeof document=="undefined")){var Y=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",L==="top"&&Y.firstChild?Y.insertBefore(X,Y.firstChild):Y.appendChild(X),X.styleSheet?X.styleSheet.cssText=G:X.appendChild(document.createTextNode(G))}}var css_248z="@-webkit-keyframes txp_loading{0%{background-position:0 0}to{background-position:0 -600px}}@keyframes txp_loading{0%{background-position:0 0}to{background-position:0 -600px}}.txp_overlay_loading{position:absolute;left:0;top:0;width:100%;height:100%;z-index:5;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;pointer-events:none}.txp_overlay_loading.txp_none,.txp_overlay_loading .txp_none{display:none}.txp_overlay_loading .txp_icon_loading{display:block;width:54px;height:20px;margin:0 auto 10px;background:url(https://vm.gtimg.cn/tencentvideo/txp/style/img/loading.png) 0 0 no-repeat;background-size:54px 600px;-webkit-animation:txp_loading 1s steps(30) infinite;animation:txp_loading 1s steps(30) infinite}.txp_overlay_loading .txp_icon_loading.mobile{-webkit-transform:scale(.5);transform:scale(.5);margin:0 auto}";styleInject(css_248z);var hideClass$1="txp_none",htmlStr='<div class="txp_overlay_loading '+hideClass$1+`">
<div class="txp_text" data-role="txp-ui-continue-play"></div>
<div class="txp_icon_loading" data-role="txp-ui-loading"></div>
</div>`,UILoadingPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;return W.show=function(z){z===void 0&&(z=""),W.$continuePlay.innerHTML=z,W.$el.classList.remove(hideClass$1)},W.hide=function(){W.$el.classList.add(hideClass$1)},W.insertDOM(),L.on(PLAY_EVENT$1.SET_LOADING,function(z){var J=z.data,Z=J.show;W.player.setStateKv("ui-loading:"+(Z?"show":"hide"),{type:LOG_TYPE.PLUGIN_ACTION}),Z?W.show():W.hide()}),W}return U.prototype.prependElement=function(L){var Y;(Y=this.$el)===null||Y===void 0||Y.insertAdjacentElement("afterbegin",L)},U.prototype.insertDOM=function(){var L,Y=this.player.container;Y.insertAdjacentHTML("beforeend",htmlStr),this.$el=Y.querySelector(".txp_overlay_loading"),this.$continuePlay=Y.querySelector('[data-role="txp-ui-continue-play"]'),this.$loading=Y.querySelector('[data-role="txp-ui-loading"]'),!((L=this.config)===null||L===void 0)&&L.useMobileStyle&&this.$loading.classList.add("mobile")},U.pluginName="ui-loading",U}(Plugin);H5Player.registerPlugin(UILoadingPlugin.pluginName,UILoadingPlugin);var DEFAULT_POLL_INTERVAL=6e5,PollDurationPlugin=function(G){__extends$b(U,G);function U(L,Y,X){var W=G.call(this,L,__assign$a({defaultPollInterval:DEFAULT_POLL_INTERVAL},Y),X)||this;return W.config=Y,W.abort=!1,W.seq=0,W.needPoll=!1,W.requestPollDurationTimerID=0,W.pollDurationSucc=!1,W.logger=new Logger(W.player.config.instanceId,"PollDurationPlugin"),W}return U.prototype.destroy=function(){this.stopPoll(),G.prototype.destroy.call(this)},U.prototype.stopPoll=function(){this.requestPollDurationTimerID>0&&(window.clearTimeout(this.requestPollDurationTimerID),this.requestPollDurationTimerID=0),this.abort=!0},U.prototype.startPoll=function(){var L=this;this.requestPollDuration(this.player.vid,__assign$a(__assign$a({},this.player.loadParam.videoReqInfoParam),{flowid:this.player.getCommonKv(COMMON_DATA_KEY.flowid)})).then(function(Y){L.requestPollDurationRsp(Y)}).catch(function(Y){L.requestPollDurationRsp()})},U.prototype.hookVideoReqInfoEnd=function(L){var Y,X;this.needPoll=((X=(Y=L.data.parseData)===null||Y===void 0?void 0:Y.vitem)===null||X===void 0?void 0:X.fvideo)===1},U.prototype.hookVideoPlaying=function(L){var Y=this,X=(L||{}).isFirst;if(!!X){var W=function(z){var J=Y.player.plugins.tips;typeof(J==null?void 0:J.show)=="function"&&J.show(z)};this.pollDurationSucc?(this.pollDurationSucc=!1,W({text:"\u8FDB\u5EA6\u6761\u62A2\u6551\u6210\u529F\uFF01",showClose:!0})):this.needPoll&&(W("\u606D\u559C\u89E3\u9501\u65B0\u529F\u80FD\uFF0C\u672C\u89C6\u9891\u7A0D\u540E\u5C06\u4E3A\u4F60\u6269\u5145\u4E3A\u5B8C\u6574\u7248\uFF01"),this.startPoll())}},U.prototype.hookAdPlaying=function(L){},U.prototype.hookPlaySessionEnd=function(){this.stopPoll()},U.prototype.requestPollDuration=function(L,Y){var X=this,W=__assign$a(__assign$a(__assign$a({},DEFAULT_REQ_PARAMS),Y),{vid:L});this.abort=!1,this.seq+=1;var z={player:this.player,startTime:+new Date,endTime:0,alreadyRetryCount:0,reqParams:W,reqPath:void 0,resData:void 0,requestor:new JsonpRequestor("getpollvinfo_callback_"),parseData:void 0,error:void 0,config:{path:PATH.COMMON.map(function(ee){return ee.replace("getvinfo","pollvinfo")}),ckeyVer:CKEY_VRE.CKEY_9},throw:function(ee,te){var re=new Error("getinfo err");throw re.code=ee,re.message=te,re},seq:this.seq,urlConfig:null,logger:this.logger};this.middlewares=[perpareRequestMiddleWare,sendRequestMiddleWare];var J=compose(this.middlewares),Z=new Promise(function(){});return J(z).then(function(){return X.abort||X.seq!==z.seq?Z:(X.logger.log("[poll-duration]\u8BF7\u6C42\u6210\u529F: ",z.resData),z.resData)}).catch(function(ee){if(X.abort||X.seq!==z.seq)return Z;var te=ee.code,re=ee.message;return te||X.logger.error("[poll-duration]\u5185\u90E8\u9519\u8BEF: ",ee),z.error={code:te,message:re},null})},U.prototype.requestPollDurationRsp=function(L){var Y=this;if(L){var X=L||{},W=X.hasnlink,z=X.nextpint;if(W===1){this.stopPoll(),this.pollDurationSucc=!0,this.player.replay();return}if(+z>0)this.requestPollDurationTimerID=window.setTimeout(function(){Y.startPoll()},z*1e3);else{this.stopPoll();return}}else this.requestPollDurationTimerID=window.setTimeout(function(){Y.startPoll()},this.config.defaultPollInterval)},U.pluginName="poll-duration",U}(Plugin);H5Player.registerPlugin(PollDurationPlugin.pluginName,PollDurationPlugin);var getQQFromCookie=function(){var G=cookieTool.get("luin")||cookieTool.get("uin");return G&&(G=G.replace(/\D/g,"").replace(/^0+/,"")),G},getPtag=function(){var G,U=["ptag","adtag","pgv_ref"],L=document.location.toString().toLowerCase();if(G=U.find(function(W){return urlTool.getUrlParamByKey(L,W)}),G)return G;try{G=sessionStorage.getItem("ptag")}catch(W){}if(G)return G;var Y=urlTool.getDomainOfURL(document.referrer),X=["v.qq.com","film.qq.com","m.v.qq.com"].includes(Y);return X||(G=Y.replace(/\./g,"_")),G||(G=cookieTool.get("ptag"),G)};function stringifyAndReplaceCommaInParams(G){return jsonTool.safelyStringify(G).replace(/,/g,"\\,")}function safelyConvertToNumber(G,U){return U===void 0&&(U=!1),isNaN(G)||!isFinite(G)?0:U?Math.round(+G):+G}var LoginType;(function(G){G[G.none=0]="none",G[G.wx=3]="wx",G[G.qq=1]="qq"})(LoginType||(LoginType={}));var whichBoss$1=function(){return uaTool.mobile?{id:"3101",token:"1037836152"}:{id:"3007",token:"881273072"}},DEFAULT_KEYS$1={iQQ:"",sid:COMMON_DATA_KEY.vid,pid:COMMON_DATA_KEY.pid,playno:COMMON_DATA_KEY.flowid,guid:COMMON_DATA_KEY.guid,ctime:"",sdtfrom:COMMON_DATA_KEY.sdtfrom,sUrl:"",sRef:"",flashver:"",fplayerver:COMMON_DATA_KEY.playerver,P2PVer:"",vurl:"",tpay:"",cpay:"",ptag:"",adid:"",playtime:"",error_code:"",drm:COMMON_DATA_KEY.drmtype,rest_preview_cnt:"",hc_main_login:COMMON_DATA_KEY.hc_main_login,hc_openid:COMMON_DATA_KEY.hc_openid,hc_vuserid:COMMON_DATA_KEY.hc_vuserid,hc_appid:COMMON_DATA_KEY.hc_appid},LiveFlowReporterPlugin=function(G){__extends(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.FLOW_DATA_KEY="",W.REPORT_URL="//btrace.qq.com/kvcollect?",W.step5Timer=null,W.started=!1,W.setEvtHandler=function(){W.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,W.onStateChange)},W.onStateChange=function(J){var Z,ee=J.data,te=ee.key,re=(Z={},Z[DATA_STATE.LOAD_END]=W.step6,Z[DATA_STATE.SET_LEVEL_START]=W.step8,Z[DATA_STATE.GET_INFO_END]=W.step4,Z[DATA_STATE.SESSION_END]=W.onEnd,Z[DATA_STATE.SESSION_START]=W.start,Z);re[te]&&re[te](ee)},W.start=function(){W.started=!0,W.step3()},W.step3=function(){W.report({step:"3",val:0,val1:0,val2:0}),W.step5Timer=setInterval(function(){W.step5()},6e4)},W.step4=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie={val:ee.ftime-re.ftime,val1:0,val2:0};W.reportedEvt.step4||(W.reportedEvt.step4=!0,W.report(__assign$1({step:"4"},ie))),W.report(__assign$1({step:"1100"},ie))},W.step5=function(){W.report({step:"5",val:6e4,val1:0,val2:0})},W.step6=function(J){var Z=J.newVal,ee=Z===void 0?{}:Z,te=J.startEvent,re=te===void 0?{}:te,ie={step:"6",val:ee.ftime-re.ftime,val1:0,val2:0};W.report(ie)},W.step7=function(){W.report({step:"7",val:0,val1:0,val2:0})},W.step8=function(){W.report({step:"8",val:0,val1:0,val2:0})},W.onEnd=function(){W.step5Timer&&(clearInterval(W.step5Timer),W.step5Timer=null),W.reportedEvt={}};var z=L.config.liveFlowReporterConfig;return W.config=__assign$1({paramsKey:__assign$1(__assign$1({},DEFAULT_KEYS$1),(z==null?void 0:z.paramsKey)||{})},whichBoss$1()),W.setEvtHandler(),W}return Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L,Y=this.config.paramsKey,X=Y===void 0?{}:Y,W=this.player.getCommonKv;return{BossId:this.config.id,pwd:this.config.token,iQQ:W(X.iQQ)||getQQFromCookie(),sid:W(X.sid)||"",pid:W(X.pid)||"",playno:W(X.playno),guid:W(X.guid)||"",ctime:comTool.dateFormat(void 0,void 0),sdtfrom:W(X.sdtfrom)||"",sUrl:W(X.sUrl)||location.href,sRef:W(X.sRef)||document.referrer,flashver:W(X.flashver)||"",fplayerver:W(X.fplayerver)||"",P2PVer:W(X.P2PVer)||"",vurl:W(X.vurl)||((L=this.player.currentVideoInfo)===null||L===void 0?void 0:L.loadingUrl),tpay:W(X.tpay)||0,cpay:W(X.cpay)||0,ptag:W(X.ptag)||"",adid:W(X.adid)||"",playtime:W(X.playtime)||0,error_code:W(X.error_code)||0,rest_preview_cnt:W(X.rest_preview_cnt)||-1,hc_main_login:W(X.hc_main_login)||"",hc_openid:W(X.hc_openid)||"",hc_vuserid:W(X.hc_vuserid)||"",hc_appid:W(X.hc_appid)||"",playertype:1,drm:W(X.drm)||0,kernel:this.player.kernelName}},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){G.prototype.destroy.call(this),this.step5Timer&&(clearInterval(this.step5Timer),this.step5Timer=null)},U.prototype.reportAd=function(){this.step7()},U.prototype.report=function(L){!this.started||G.prototype.report.call(this,L)},U.pluginName="live-flow-reporter",U}(BaseReporter),LiveFlyReportKeyMapping={progid:"",playno:COMMON_DATA_KEY.flowid,guid:COMMON_DATA_KEY.guid,sip:"",iqq:"",hh_ua:COMMON_DATA_KEY.ua,cdn:"",sdtfrom:COMMON_DATA_KEY.sdtfrom,loadingtime:"",blocktime:"",blockcount:"",prdlength:"",platform:COMMON_DATA_KEY.platform,errorcode:"",dsip:"",durl:"",firstreport:"",sUrl:COMMON_DATA_KEY.url,sRef:COMMON_DATA_KEY.referrer,fplayerver:COMMON_DATA_KEY.playerver,livepid:COMMON_DATA_KEY.livepid,viewid:"",seq:"",cmd:"",fullecode:"",live_type:"",geturltime:"",playtime:"",ispay:"",isuserpay:"",switch:"",lookback:"",nettype:"",freetype:"",https:"",downspeed:"",vip_type:"",playertype:"",pvid:"",login_type:"",open_id:COMMON_DATA_KEY.hc_openid,live_delay:"",use_p2p:COMMON_DATA_KEY.p2p,p2p_play:"",p2pver:COMMON_DATA_KEY.p2pver},LiveFlyReporterPlugin=function(G){__extends(U,G);function U(L,Y,X){var W,z=G.call(this,L,Y,X)||this;return z.REPORT_KEY=APP_KEY$1,z.periodTickTimer=0,z.currentPeriodStartTime=0,z.isInPlayback=0,z.lastSid=0,z.loadCost=0,z.redirectCost=0,z.bufferCount=0,z.redirectStartTime=0,z.bufferDuration=0,z.reported=!1,z.delay=0,z.seq=0,z.errCode=ErrorCode.SUC,z.cachedVideoInfo={liveChid:0,liveSid:0,liveType:0,ispay:0,isuserpay:0,previewLength:0,cdnName:""},z.keyMapping=__assign$1(__assign$1({},LiveFlyReportKeyMapping),(W=L.config.liveFlyReporterConfig)===null||W===void 0?void 0:W.paramsKey),BeaconRequest.register(APP_KEY$1),z.reporter=BeaconRequest.report,z.bindEventHandlers(),z}return Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L=this,Y=L.player,X=L.keyMapping,W=L.cachedVideoInfo,z=Y.currentVideoInfo,J=(z==null?void 0:z.loadingUrl)||"",Z=this.getAuthInfo(),ee=Z.pvid,te=Z.loginType;return{progid:W.liveSid||0,playno:Y.getCommonKv(X.playno)||"",guid:Y.getCommonKv(X.guid)||"",sip:Y.getCommonKv(X.sip)||"0.0.0.0",iqq:Y.getCommonKv(X.iqq)||0,hh_ua:Y.getCommonKv(X.hh_ua)||"",cdn:W.cdnName||"",sdtfrom:Y.getCommonKv(X.sdtfrom)||0,loadingtime:this.loadCost,blocktime:this.bufferDuration,blockcount:this.bufferCount,prdlength:0,platform:Y.getCommonKv(X.platform),errorcode:this.errCode,dsip:"0.0.0.0",durl:J,firstreport:+!this.reported,sUrl:Y.getCommonKv(X.sUrl)||"",sRef:Y.getCommonKv(X.sRef)||"",fplayerver:Y.getCommonKv(X.fplayerver)||"0.0.0",livepid:Y.getCommonKv(X.livepid)||0,viewid:W.liveChid||0,seq:this.seq,cmd:0,fullecode:this.errCode,live_type:W.liveType,geturltime:this.redirectCost,playtime:W.previewLength||-1,ispay:W.ispay||0,isuserpay:W.isuserpay||0,switch:"",lookback:this.isInPlayback,nettype:0,freetype:0,https:+(J.indexOf("https://")===0),downspeed:0,vip_type:Y.getCommonKv(X.vip_type)||0,playertype:Y.getCommonKv(X.playertype)||0,pvid:ee||0,login_type:te,open_id:Y.getCommonKv(X.open_id)||"",live_delay:this.delay,use_p2p:Y.getCommonKv(X.use_p2p)||0,p2p_play:0,p2pver:Y.getCommonKv(X.p2pver)||""}},enumerable:!1,configurable:!0}),U.prototype.report=function(L){!this.player.getCommonKv(COMMON_DATA_KEY.vid)||uaTool.spider||(G.prototype.report.call(this,__assign$1(__assign$1({},L),{stepname:REPORT_EVENT_ID$1})),this.seq+=1,this.reported=!0)},U.prototype.getAuthInfo=function(){var L=this.player;return{pvid:cookieTool.get("pgv_pvid"),loginType:LoginType[L.getCommonKv(COMMON_DATA_KEY.hc_main_login)||"none"]}},U.prototype.getVideoInfo=function(L){var Y=L.data.resData,X=0;Y.stream===1&&(X|=16),Y.vcode===2&&(X|=4),this.cachedVideoInfo={liveChid:Y.livechid,liveSid:Y.livesid,ispay:Y.ispay,isuserpay:Y.isuserpay,previewLength:Y.playtime,cdnName:Y.cdn_name,liveType:X},this.redirectCost=Date.now()-this.redirectStartTime},U.prototype.bindEventHandlers=function(){var L=this;this.msg.on(H5_EXT_EVENT.GETINFO_START,function(){L.redirectStartTime=Date.now()}),this.msg.on(H5_EXT_EVENT.GETINFO_OVER,this.getVideoInfo.bind(this)),this.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,this.onDataSetStateUpdate.bind(this)),this.player.on(H5_PLAY_EVENT.PLAY_SESSION_END,this.onSessionEnded.bind(this)),this.player.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_START,this.onSetLevelStart.bind(this))},U.prototype.onDataSetStateUpdate=function(L){var Y,X=(Y={},Y[DATA_STATE.BUFFER_END]=this.onBufferEnd,Y[DATA_STATE.LOAD_END]=this.onLoaded,Y[DATA_STATE.SET_LEVEL_END]=this.onSetLevelEnd,Y);X[L.data.key]&&X[L.data.key].call(this,L)},U.prototype.onLoaded=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=X.ftime,J=X.code,Z=W.ftime;this.loadCost=z-Z,this.errCode=J,this.report({cmd:J===ErrorCode.SUC?CMD.load:CMD.error}),this.startTick()},U.prototype.onBufferEnd=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=X.ftime,J=W.ftime;this.bufferDuration+=z-J,this.bufferCount+=1},U.prototype.onSetLevelStart=function(){this.lastSid=this.cachedVideoInfo.liveSid,this.tickImmediate()},U.prototype.onSetLevelEnd=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=X.ftime,J=X.code,Z=W.ftime;J===ErrorCode.SUC&&(this.loadCost=z-Z,this.report({cmd:CMD.load,switch:this.lastSid}),this.startTick())},U.prototype.onSessionEnded=function(L){var Y=L.data.code;this.errCode=Y,this.tickImmediate(),this.clearSessionData()},U.prototype.tick=function(){var L=this,Y=L.errCode,X=L.player,W=L.currentPeriodStartTime;X.currentVideoInfo&&(this.delay=X.currentVideoInfo.currentDelay||0),this.report({cmd:Y===ErrorCode.SUC?CMD.period:CMD.error,fullecode:Y,prdlength:Date.now()-W}),this.onTickEnd()},U.prototype.clearTick=function(){this.periodTickTimer&&(window.clearTimeout(this.periodTickTimer),this.periodTickTimer=null)},U.prototype.onTickEnd=function(){this.bufferCount=0,this.bufferDuration=0,this.currentPeriodStartTime=Date.now()},U.prototype.tickImmediate=function(){this.clearTick(),this.tick()},U.prototype.startTick=function(){this.periodTickTimer||(this.currentPeriodStartTime=Date.now(),this.periodTickTimer=window.setInterval(this.tick.bind(this),PeriodInterval))},U.prototype.clearSessionData=function(){this.redirectCost=0,this.redirectStartTime=0,this.currentPeriodStartTime=0,this.cachedVideoInfo=null,this.loadCost=0,this.reported=!1,this.seq=0,this.delay=0,this.errCode=ErrorCode.SUC},U.pluginName="live-fly-reporter",U}(BaseReporter),CMD;(function(G){G[G.load=205]="load",G[G.error=150]="error",G[G.period=263]="period"})(CMD||(CMD={}));var APP_KEY$1="0AND0F8T5N4N7QT0",REPORT_EVENT_ID$1="boss_cmd_player_hit_tap_process",PeriodInterval=60*1e3,_a$2,msUnit=.001,step8Map=(_a$2={12e4:3e4,12e5:6e4},_a$2[1/0]=3e5,_a$2),DEFAULT_KEYS={uin:"",vid:COMMON_DATA_KEY.vid,coverid:COMMON_DATA_KEY.cid,pid:COMMON_DATA_KEY.flowid,guid:COMMON_DATA_KEY.guid,cmid:COMMON_DATA_KEY.guid,unid:"",vt:COMMON_DATA_KEY.cdnid,type:"",bi:COMMON_DATA_KEY.duration,bt:"",version:COMMON_DATA_KEY.playerver,platform:COMMON_DATA_KEY.platform,format:COMMON_DATA_KEY.fmt,defn:COMMON_DATA_KEY.currentDefn,ptag:"",isvip:COMMON_DATA_KEY.vip,tpid:"",pversion:"",hc_uin:"",hc_main_login:COMMON_DATA_KEY.hc_main_login,hc_vuserid:COMMON_DATA_KEY.hc_vuserid,hc_openid:COMMON_DATA_KEY.hc_openid,hc_appid:COMMON_DATA_KEY.hc_appid,hc_access_token:COMMON_DATA_KEY.hc_access_token,hc_pvid:"",hc_ssid:"",hc_qq:"",ua:COMMON_DATA_KEY.ua,hh_ua:COMMON_DATA_KEY.ua,ckey:"",ckeyVer:"",iformat:COMMON_DATA_KEY.fmt,hh_ref:COMMON_DATA_KEY.topUrl,vurl:"",v_idx:"",rcd_info:"",extrainfo:"",bucket_id:COMMON_DATA_KEY.testid,drm:COMMON_DATA_KEY.drm,pay_type:"",pcplatform:"",drmtype:COMMON_DATA_KEY.drmtype,insert_duration_ms:"",insert_flowid:"",vip_token:"",common_rcd_info:"",common_ext_info:"",common_json_info:"",format_ua:"",triggerplay:"",tpay:"",cpay:"",dltype:COMMON_DATA_KEY.dltype,cginame:"",vtype:"",p2pVer:COMMON_DATA_KEY.p2pver,playertype:COMMON_DATA_KEY.playertype},VodFlowReporterPlugin=function(G){__extends(U,G);function U(L,Y,X){var W=G.call(this,L,Y,X)||this;W.FLOW_DATA_KEY="__thumbplayer_vod_flow_report__",W.UNSAFE_KEY=["hh_ref","vurl"],W.REPORT_URL="//btrace.qq.com/kvcollect?",W.startPlayTime=0,W.actualPlayTime=0,W.lastPlayTimeStamp=0,W.saveInterval=0,W.lastStep8PlayTime=0,W.step8Seq=0,W.setEvtHandler=function(){W.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,W.onDataStateChange),W.player.on(H5_PLAY_EVENT.VIDEO_PLAYING,W.onFirstPlay),W.player.on(H5_PLAY_EVENT.AD_PLAYING,W.onAdPlaying),W.player.on(H5_PLAY_EVENT.VIDEO_TIMEUPDATE,W.onVideoTimeUpdate),W.player.on(PLAY_EVENT$1.STATE_CHANGE,W.onCoreStateChange),document.addEventListener("visibilitychange",W.onVisibilityChange)},W.onVisibilityChange=function(){document.visibilityState==="hidden"?W.saveData():W.player&&W.removeFromLS(W.player.getCommonKv(COMMON_DATA_KEY.flowid))},W.stopSaveData=function(){W.saveInterval&&(window.clearInterval(W.saveInterval),W.saveInterval=0)},W.onAdPlaying=function(){W.step7()},W.onFirstPlay=function(J){var Z=Date.now();J.data.isFirst&&(W.startPlayTime=Z)},W.onCoreStateChange=function(J){var Z=J.data,ee=Z.new,te=Z.old,re=Date.now();ee===VIDEO_STATE$1.PLAYING?W.lastPlayTimeStamp=re:te===VIDEO_STATE$1.PLAYING&&W.lastPlayTimeStamp&&(W.actualPlayTime+=re-W.lastPlayTimeStamp)},W.onVideoTimeUpdate=function(){W.step8()},W.saveData=function(){var J=W.player.getCommonKv(COMMON_DATA_KEY.flowid);if(!(!J||W.reportedEvt.step5)){var Z=Date.now(),ee=W.startPlayTime?Z-W.startPlayTime:0,te={step:"5",val:safelyConvertToNumber(ee,!0),val1:2,bi:safelyConvertToNumber(W.actualPlayTime*msUnit,!0),bt:safelyConvertToNumber(W.player.getCommonKv(COMMON_DATA_KEY.duration),!0),heartbeat:Z};W.saveToLS(J,__assign$1(__assign$1({},W.reportHeader),te))}},W.onDataStateChange=function(J){var Z,ee=J.data,te=ee.key,re=(Z={},Z[DATA_STATE.GET_INFO_END]=W.step4,Z[DATA_STATE.LOAD_END]=W.step6,Z[DATA_STATE.SESSION_END]=W.step5,Z[DATA_STATE.SESSION_START]=W.onSessionStart,Z);re[te]&&re[te](ee)},W.onSessionStart=function(){W.actualPlayTime=0,W.lastPlayTimeStamp=0,W.startPlayTime=0,W.reportedEvt={},W.reportPrev(),W.step3(),W.stopSaveData(),W.saveInterval=window.setInterval(W.saveData,5e3)},W.step3=function(){var J=W.player.currentVideoInfoIdx,Z={step:"3",val:J===0?1:2};W.report(Z)},W.step7=function(){if(!W.reportedEvt.step7){W.reportedEvt.step7=!0;var J={step:"7",val:0,val1:0};W.report(J)}},W.step4=function(){if(!W.reportedEvt.step4){W.reportedEvt.step4=!0;var J={step:"4",val:1,val1:1,bi:H5Player.pluginExists(AdPluginName)?2:1};W.report(J)}},W.step5=function(J){if(!W.reportedEvt.step5){W.reportedEvt.step5=!0;var Z=J.newVal,ee=Z.code,te=W.startPlayTime?Date.now()-W.startPlayTime:0,re={step:"5",val:Math.round(te),val1:ee!==ErrorCode.SUC?2:1,val2:1,bi:safelyConvertToNumber(W.actualPlayTime*msUnit,!0),bt:safelyConvertToNumber(W.player.getCommonKv(COMMON_DATA_KEY.duration),!0)};W.report(re),W.step8(!0),W.removeFromLS(W.player.getCommonKv(COMMON_DATA_KEY.flowid)),W.stopSaveData()}},W.step6=function(J){if(!W.reportedEvt.step6){W.reportedEvt.step6=!0,W.startPlayTime=Date.now();var Z=J.startEvent,ee=J.newVal,te=ee.ftime-(Z==null?void 0:Z.ftime),re={step:"6",val:safelyConvertToNumber(te),val1:W.reportedEvt.step7?0:1,val2:1,bi:0,bt:safelyConvertToNumber(W.player.getCommonKv(COMMON_DATA_KEY.duration),!0)};W.report(re)}},W.step8=function(J){if(J===void 0&&(J=!1),!!W.lastPlayTimeStamp){var Z=Date.now(),ee=Z-W.lastPlayTimeStamp,te=J?W.actualPlayTime:W.actualPlayTime+ee,re=+Object.keys(step8Map).find(function(oe){return te<+oe}),ie=te-W.lastStep8PlayTime;if(J||ie>=step8Map[re]){var ne={step:"8",val:safelyConvertToNumber(Z-W.startPlayTime),val1:J?1:4,bi:safelyConvertToNumber(te*msUnit,!0),bt:safelyConvertToNumber(W.player.getCommonKv(COMMON_DATA_KEY.duration),!0),insert_duration_ms:ie};W.lastStep8PlayTime=te,W.step8Seq+=1,W.report(ne)}}};var z=L.config.vodFlowReporterConfig;return z!=null&&z.releaseDelay&&(W.RELEASE_DELAY=z.releaseDelay),W.config=__assign$1({paramsKey:__assign$1(__assign$1({},DEFAULT_KEYS),(z==null?void 0:z.paramsKey)||{}),onBeforeReport:z.onBeforeReport},whichBoss()),W.setEvtHandler(),W.reportPrev(),W}return Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L,Y=this.player,X=Y.getCommonKv,W=Y.dataset,z=Y.currentVideoInfoIdx,J=Y.videoSize,Z=J===void 0?{width:0,height:0}:J,ee=Z.width,te=Z.height,re=this.config.paramsKey,ie=W.visualStats,ne=ie.isPlayerInViewport,oe=ie.isTabFocused,se={uin:X(re.uin)||getQQFromCookie(),vid:X(re.vid)||"",coverid:X(re.coverid)||"",pid:X(re.pid)||"",guid:X(re.guid)||"",cmid:X(re.guid)||"",unid:X(re.unid)||"",vt:X(re.vt)||"",type:X(re.type)||"",bi:X(re.bi)||0,bt:X(re.bt)||0,val:0,val1:0,val2:0,version:X(re.version)||"",platform:X(re.platform)||"",format:X(re.format)||"",defn:X(re.defn)||"",ptag:X(re.ptag)||getPtag(),isvip:X(re.isvip)||-1,tpid:X(re.tpid)||"",pversion:"thumbplayer",hc_uin:X(re.hc_uin)||getQQFromCookie(),hc_main_login:X(re.hc_main_login)||"",hc_vuserid:X(re.hc_vuserid)||"",hc_openid:X(re.hc_openid)||"",hc_appid:X(re.hc_appid)||"",hc_pvid:X(re.hc_pvid)||cookieTool.get("pgv_pvid"),hc_ssid:X(re.hc_ssid)||"",hc_qq:X(re.hc_qq)||"",hc_access_token:X(re.hc_access_token)||"",ua:X(re.ua)||"",hh_ua:X(re.hh_ua)||"",ckey:X(re.ckey)||"",iformat:X(re.iformat)||"",hh_ref:X(re.hh_ref)||"",rcd_info:X(re.rcd_info)||"",extrainfo:X(re.extrainfo)||"",bucket_id:X(re.bucket_id)||"",pay_type:X(re.pay_type)||0,idx:z||0,diagonal:Math.round(Math.sqrt(Math.pow(ee,2)+Math.pow(te,2))),vurl:((L=this.player.currentVideoInfo)===null||L===void 0?void 0:L.loadingUrl)||"",v_idx:this.player.currentVideoInfoIdx||0,ctime:comTool.dateFormat(void 0,void 0),url:document.URL,BossId:this.config.id,pwd:this.config.token,isfocustab:oe,isvisible:ne,format_ua:X(re.format_ua)||getFormatUA(),pcplatform:X(re.pcplatform)||"web",drm:X(re.drm)?1:0,insert_flowid:this.step8Seq,vip_token:X(re.vip_token)||0,kernel:this.player.kernelName||"",drmtype:X(re.drmtype)||0};return this.config.id==="2865"&&(se.common_rcd_info=X(re.common_rcd_info)||"",se.common_ext_info=X(re.common_ext_info)||"",se.common_json_info=X(re.common_json_info)||""),this.config.id==="4298"&&(se.triggerplay=X(re.triggerplay)||1,se.tpay=X(re.tpay)||0,se.cpay=X(re.cpay)||0,se.dltype=X(re.dltype)||0,se.cginame=X(re.cginame)||"",se.vtype=X(re.vtype)||"",se.ckeyVer=X(re.ckeyVer)||"",se.p2pVer=X(re.p2pVer)||"",se.playertype=X(re.playertype)||""),se},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this.stopSaveData(),document.removeEventListener("visibilitychange",this.onVisibilityChange),G.prototype.destroy.call(this)},U.prototype.report=function(L){if(!!this.player.getCommonKv(COMMON_DATA_KEY.vid))return typeof this.config.onBeforeReport=="function"?G.prototype.report.call(this,this.config.onBeforeReport(L)):G.prototype.report.call(this,L)},U.pluginName="vod-flow-reporter",U}(BaseReporter);function whichBoss(){return uaTool.mobile?uaTool.os.ipad?{id:"4299",token:"694498052"}:{id:"2865",token:"1698957057"}:{id:"4298",token:"686148428"}}function getFormatUA(){var G="other",U=uaTool.browser,L=uaTool.os;return U.qqlive&&(L.iphone?G="iphone_qqlive":L.android&&(G="aphone_qqlive")),G}var VodFlyReporterPlugin=function(G){__extends(U,G);function U(L,Y,X){var W,z=G.call(this,L,Y,X)||this;return z.REPORT_KEY=APP_KEY,z.seq=0,z.bufferReportCached=[],z.seekReportCached=[],z.onDataSetStateUpdate=function(J){var Z,ee=J.data.key,te=(Z={},Z[DATA_STATE.INIT]=z.runOnce(z.step5,z),Z[DATA_STATE.LOAD_END]=z.runOnce(z.step30,z),Z[DATA_STATE.SET_LEVEL_END]=function(){z.step45(J),z.step31(J)},Z[DATA_STATE.SET_LEVEL_START]=function(){z.reportStep35and40()},Z[DATA_STATE.RETRY_PLAY]=z.step47,Z[DATA_STATE.BUFFER_END]=z.recordStep35,Z[DATA_STATE.SEEK_END]=z.recordStep40,Z[DATA_STATE.FIRST_PLAY]=z.runOnce(z.step32,z),Z[DATA_STATE.SESSION_END]=z.runOnce(z.step50,z),Z);te[ee]&&te[ee].call(z,J)},z.keyMapping=__assign$1(__assign$1({},defaultKeys),(W=L.config.vodFlyReporterConfig)===null||W===void 0?void 0:W.paramsKey),z.bindEventHandlers(),BeaconRequest.register(APP_KEY),z.reporter=BeaconRequest.report,z}return Object.defineProperty(U.prototype,"reportHeader",{get:function(){var L=this,Y=Object.keys(this.keyMapping).reduce(function(X,W){return L.keyMapping[W]&&(X[W]=L.player.getCommonKv(L.keyMapping[W])||""),X},{});return __assign$1(__assign$1(__assign$1(__assign$1(__assign$1({},Y),this.videoInfoParams),this.firstLoadVideoInfoParam),this.getAuthInfo()),{downloadkit:+this.player.config.enableP2P,seq:this.seq,stepname:REPORT_EVENT_ID})},enumerable:!1,configurable:!0}),U.prototype.report=function(L){!this.player.getCommonKv(COMMON_DATA_KEY.vid)||uaTool.spider||(G.prototype.report.call(this,L),this.seq+=1)},Object.defineProperty(U.prototype,"currentUrlInfo",{get:function(){var L,Y,X;if(!this.player.currentVideoInfo||!this.rawGetinfoData)return[-1,null];var W=((X=(Y=(L=this.rawGetinfoData.vl)===null||L===void 0?void 0:L.vi[0])===null||Y===void 0?void 0:Y.ul)===null||X===void 0?void 0:X.ui)||[],z=urlTool.getDomainOfURL(this.player.currentVideoInfo.loadingUrl),J=W==null?void 0:W.findIndex(function(Z){return urlTool.getDomainOfURL(Z.url)===z});return[J,W[J]]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"currentFmtId",{get:function(){var L,Y,X,W;return this.rawGetinfoData&&(W=(X=(Y=(L=this.rawGetinfoData.fl)===null||L===void 0?void 0:L.fi)===null||Y===void 0?void 0:Y.find(function(z){return z.sl}))===null||X===void 0?void 0:X.id)!==null&&W!==void 0?W:0},enumerable:!1,configurable:!0}),U.prototype.bindEventHandlers=function(){var L=this;this.msg.on(H5_EXT_EVENT.DATASET_STATE_UPDATE,this.onDataSetStateUpdate),this.msg.on(H5_EXT_EVENT.GETINFO_OVER,this.step15.bind(this)),this.msg.on("GETINFO_START",function(){L.getinfoStartTime=Date.now()})},U.prototype.step5=function(L){var Y=L.data.newVal,X=Y.ftime,W=Y.ext,z=W.stime;this.report({step:"5",data:stringifyAndReplaceCommaInParams({stime:z,etime:X,code:ErrorCode.SUC})})},U.prototype.step10=function(){},U.prototype.step15=function(L){var Y,X,W=L.data,z=W.parseData,J=W.resData,Z=z||{},ee=Z.definitionList,te=ee===void 0?[]:ee,re=Z.vitem,ie=re===void 0?{}:re,ne=ie.fc,oe=ne===void 0?0:ne,se=ie.br,ae=se===void 0?0:se,le=ie.vst,ue=le===void 0?0:le,ce=ie.type,he=ce===void 0?0:ce,fe=(X=(Y=te==null?void 0:te.find(function(de){return de.sl}))===null||Y===void 0?void 0:Y.id)!==null&&X!==void 0?X:-1;this.videoInfoParams={dltype:J==null?void 0:J.dltype,duration:z==null?void 0:z.duration,type:he,clip:oe,status:ue},this.firstLoadVideoInfoParam||(this.firstLoadVideoInfoParam={fmt:fe,rate:ae}),this.rawGetinfoData=J,this.report({step:"15",data:stringifyAndReplaceCommaInParams({stime:this.getinfoStartTime,etime:Date.now(),code:J.em,ip:J.ip})})},U.prototype.step25=function(){},U.prototype.step30=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=W.ftime,J=W.currentUrl,Z=X.ftime,ee=this.currentUrlInfo,te=ee[0],re=ee[1],ie=re==null?void 0:re.vt;this.report({step:"30",data:stringifyAndReplaceCommaInParams({stime:z,etime:Z,vt:ie,urlindex:te,reason:"",code:X.code,url:J})})},U.prototype.step31=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=W.ftime,J=W.ext,Z=X.ftime,ee=J.mode,te=this.currentUrlInfo,re=te[0],ie=te[1],ne=ie==null?void 0:ie.vt;this.report({step:"31",data:stringifyAndReplaceCommaInParams({stime:ee===SET_LEVEL_MODE.SMOOTH?Z:z,etime:Z,vt:ne,urlindex:re,code:X.code})})},U.prototype.step32=function(L){var Y=L.data.newVal.ftime;this.report({step:"32",data:stringifyAndReplaceCommaInParams({stime:Y,etime:Y,code:ErrorCode.SUC})})},U.prototype.step33=function(){},U.prototype.recordStep35=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=W.ftime,J=W.playbackRate,Z=W.playtime,ee=X.ftime,te=X.currentUrl,re=J!==1?2:1;this.bufferReportCached.push({stime:z,etime:ee,ptime:Z,format:this.currentFmtId,url:te,scene:re,reason:0,code:X.code})},U.prototype.recordStep40=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=W.ftime,J=W.playtime,Z=X.ftime,ee=X.playtime;this.seekReportCached.push({lstime:z,letime:Z,pstime:J,petime:ee,format:this.currentFmtId,code:X.code})},U.prototype.step45=function(L){var Y=L.data,X=Y.newVal,W=Y.startEvent,z=W.ftime,J=W.ext,Z=W.playtime,ee=X.ftime,te=X.playtime,re=X.currentUrl,ie=J.mode,ne=this.currentUrlInfo,oe=ne[0],se=ne[1],ae=se==null?void 0:se.vt;this.report({step:"45",data:stringifyAndReplaceCommaInParams({stime:ie===SET_LEVEL_MODE.SMOOTH?ee:z,etime:ee,pstime:Z,petime:te,auto:1,format:this.currentFmtId,url:re,vt:ae,urlindex:oe,code:X.code})})},U.prototype.step46=function(){},U.prototype.step47=function(L){var Y=L.data.newVal,X=Y.currentUrl,W=Y.code,z=Y.ftime,J=this.currentUrlInfo,Z=J[0],ee=J[1],te=ee==null?void 0:ee.vt;this.report({step:"47",data:stringifyAndReplaceCommaInParams({url:X,vt:te,urlindex:Z,cdnip:"",stime:z,etime:z,code:W})})},U.prototype.step50=function(L){var Y=L.data.newVal,X=Y.ftime,W=Y.code,z=this.player.dataset.getStats().playDuration;this.report({step:"50",data:stringifyAndReplaceCommaInParams({etime:X,playduration:z,code:W})}),this.reportStep35and40(),this.cleanUp()},U.prototype.reportStep35and40=function(){var L=this,Y=L.bufferReportCached,X=L.seekReportCached;if(Y.length){var W=Y.reduce(function(re,ie){return ie.etime-ie.stime<=STALLED_THRESHOLD?re:[re[0]+1,re[1]+(ie.etime-ie.stime)]},[0,0]),z=W[0],J=W[1];this.report({step:"35",data:stringifyAndReplaceCommaInParams({tcount:z,tduration:J,val:this.bufferReportCached.slice(0,BUFFER_REPORT_LIMIT)})})}if(X.length){var Z=X.reduce(function(ie,ne){return ne.letime-ne.lstime<=STALLED_THRESHOLD?[ie[0]+1,ie[1],ie[2]]:[ie[0]+1,ie[1]+1,ie[2]+(ne.letime-ne.lstime)]},[0,0,0]),z=Z[0],ee=Z[1],te=Z[2];this.report({step:"40",data:stringifyAndReplaceCommaInParams({tcount:z,tbcount:ee,tbduration:te,val:this.seekReportCached.slice(0,SEEK_REPORT_LIMIT)})})}this.bufferReportCached=[],this.seekReportCached=[]},U.prototype.cleanUp=function(){this.bufferReportCached=[],this.seekReportCached=[],this.rawGetinfoData=null,this.firstLoadVideoInfoParam=null,this.videoInfoParams=null,this.seq=0,this.getinfoStartTime=0},U.prototype.runOnce=function(L,Y){var X=this,W="";return function(){for(var z=[],J=0;J<arguments.length;J++)z[J]=arguments[J];var Z=X.player.getCommonKv(COMMON_DATA_KEY.flowid);W!==Z&&(W=Z,L.apply(Y,z))}},U.prototype.getAuthInfo=function(){var L=this.player;return{loginid:L.getCommonKv(COMMON_DATA_KEY.hc_openid),loginex:L.getCommonKv(COMMON_DATA_KEY.hc_vuserid),logintype:LoginType[L.getCommonKv(COMMON_DATA_KEY.hc_main_login)||"none"]}},U.pluginName="vod-fly-reporter",U}(BaseReporter),defaultKeys={stepname:"",seq:"",hc_main_login:COMMON_DATA_KEY.hc_main_login,hc_vuserid:COMMON_DATA_KEY.hc_vuserid,hc_openid:COMMON_DATA_KEY.hc_openid,hc_appid:COMMON_DATA_KEY.hc_appid,loginid:"",loginex:"",logintype:"",guid:COMMON_DATA_KEY.guid,longitude:"",latitude:"",vip:COMMON_DATA_KEY.vip,online:"",p2p:COMMON_DATA_KEY.p2p,downloadkit:"",resolution:COMMON_DATA_KEY.resolution,testid:COMMON_DATA_KEY.testid,osver:COMMON_DATA_KEY.osver,playerver:COMMON_DATA_KEY.playerver,playertype:COMMON_DATA_KEY.playertype,uip:COMMON_DATA_KEY.uip,confid:COMMON_DATA_KEY.confid,cdnip:COMMON_DATA_KEY.cdnip,cdnid:COMMON_DATA_KEY.cdnid,cdnuip:COMMON_DATA_KEY.uip,freetype:"",sstrength:"",network:"",speed:"",device:COMMON_DATA_KEY.device,appver:COMMON_DATA_KEY.appVer,p2pver:COMMON_DATA_KEY.p2pver,flowid:COMMON_DATA_KEY.flowid,platform:COMMON_DATA_KEY.platform,vid:COMMON_DATA_KEY.vid,url:COMMON_DATA_KEY.url,refer:COMMON_DATA_KEY.referrer,cid:COMMON_DATA_KEY.cid,ua:COMMON_DATA_KEY.ua,ptag:COMMON_DATA_KEY.ptag,dltype:"",fmt:"",rate:"",clip:"",status:"",type:"",duration:"",ext:"",drm:"",purevid:""},BUFFER_REPORT_LIMIT=20,SEEK_REPORT_LIMIT=20,STALLED_THRESHOLD=500,APP_KEY="0AND0F8T5N4N7QT0",REPORT_EVENT_ID="boss_cmd_player_quality_feitian";H5Player.registerPlugin(VodFlowReporterPlugin.pluginName,VodFlowReporterPlugin);H5Player.registerPlugin(LiveFlowReporterPlugin.pluginName,LiveFlowReporterPlugin);H5Player.registerPlugin(VodFlyReporterPlugin.pluginName,VodFlyReporterPlugin);H5Player.registerPlugin(LiveFlyReporterPlugin.pluginName,LiveFlyReporterPlugin);var adGlobalName="CreativePlayerPlugin",adVersion="2.6.4",adScriptMaxLoadTime=1e4,skipAdDomainWhiteList=["view.inews.qq.com","ssr.view.inews.qq.com","e.news.qq.com"],isInDomainWhiteList=skipAdDomainWhiteList.includes(window.location.hostname),ErrorPagePluginName="error-page",ErrorPagePluginEvents={REPORT_LOG:"error-page:report-log"},defaultErrorText="\u51FA\u9519\u5566",dataRoleMap={error:"txp-ui-error",errorMsg:"txp-ui-error-msg",errorHandler:"txp-ui-error-handler",errorRefresh:"txp-ui-error-refresh",errorCode:"txp-ui-error-code",background:"txp-ui-error-background",clientBtn:"txp-ui-error-client-btn",browserTip:"txp-ui-error-browser"};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(U){for(var L,Y=1,X=arguments.length;Y<X;Y++){L=arguments[Y];for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&(U[W]=L[W])}return U},__assign.apply(this,arguments)},HOTPOINT_EVENTS;(function(G){G.HOT_MOUSE_OVER="ctrl:hotpoint-mouseover",G.HOT_MOUSE_MOVE="ctrl:hotpoint-mousemove",G.HOT_MOUSE_OUT="ctrl:hotpoint-mouseout"})(HOTPOINT_EVENTS||(HOTPOINT_EVENTS={}));var isMobile=/mobile/i.test(navigator.userAgent),CtrlbarPluginName="ctrlbar",CTRL_EVENTS=__assign(__assign({FULLSCREEN_CHANGE:"windowFullscreenChange",FULLSCREEN_ERROR:"fullscreenError",FAKE_FULLSCREEN_CHANGE:"browserFullscreenChange",CLICK_PIPBTN:"ctrl:click-pipbtn",CLICK_NEXTBTN:"ctrl:click-nextbtn",CLICK_PLAYBTN:"ctrl:click-playbtn",CLICK_REPLAY:"ctrl:click-replay",SET_LANGUAGE:"ctrl:set-language",SET_LEVEL:"ctrl:set-level",SET_AUDIO:"ctrl:set-audio",SET_PLAYRATE:"ctrl:set-playrate",SET_VOLUME:"ctrl:set-volume",TOGGLE_OVERLAY:"ctrl:toggle-overlay",MOUSE_DONW:"ctrl:progress-mousedown",MOUSE_DOWN:"ctrl:progress-mousedown",MOUSE_MOVE:"ctrl:progress-mousemove",MOUSE_UP:"ctrl:progress-mouseup",SHOW:"ctrl:show",HIDE:"ctrl:hide"},HOTPOINT_EVENTS),{TEST_EVENT:"ctrl:inner-test-event",RESIZE:"ctrl:resize",SHOW_LEVELS:"ctrl:show-levels",HOVER_PROGRESS:"ctrl:hover-progress"}),pcRootClassName=".plugin_ctrl_txp_bottom",mobileRootClassName=".plugin_ctrl_mobile_txp_bottom",getRootClassName=function(G){return G?mobileRootClassName:pcRootClassName},shadowClassName=".plugin_ctrl_txp_shadow",gradientClassName=".plugin_ctrl_txp_gradient_bottom",containerClassName="_mod_thumbplayer_container_",largeSizeClassName="plugin_ctrl--large",bodyOverflowClassName="plugin_ctrl_fake_fullscreen",CTRL_SIZE;(function(G){G.LARGE="large",G.NORMAL="normal"})(CTRL_SIZE||(CTRL_SIZE={}));var PlayBtnStatus;(function(G){G.PAUSE="pause",G.PLAY="play",G.REPLAY="replay",G.STOP="stop"})(PlayBtnStatus||(PlayBtnStatus={}));var REPORTING_SVG_ICON=`<svg class="reporting-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" fill="#fff">
<path
  d="M784 902.4c9.6 19.2 6.4 41.6-12.8 54.4-19.2 9.6-41.6 3.2-51.2-12.8-9.6-19.2-6.4-41.6 12.8-54.4 16-12.8 38.4-8 51.2 12.8z m-233.6 81.6c0 22.4-16 38.4-38.4 38.4s-38.4-16-38.4-38.4V960c0-22.4 19.2-38.4 41.6-38.4 19.2 0 35.2 16 38.4 38.4v25.6h-3.2z m-240-43.2c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-16-51.2l28.8-51.2c9.6-19.2 35.2-25.6 54.4-16s25.6 35.2 12.8 54.4l-25.6 48zM121.6 784c-19.2 9.6-41.6 3.2-54.4-16-9.6-19.2-6.4-41.6 12.8-54.4l76.8-44.8c19.2-9.6 41.6-3.2 54.4 16 9.6 19.2 3.2 41.6-16 54.4L121.6 784zM38.4 552c-22.4 0-38.4-16-38.4-38.4s16-38.4 38.4-38.4H160c22.4 0 38.4 19.2 38.4 38.4 0 22.4-16 38.4-38.4 38.4H38.4z m44.8-241.6c-19.2-9.6-25.6-35.2-16-51.2 9.6-19.2 35.2-25.6 54.4-16L256 320c19.2 9.6 25.6 35.2 16 54.4s-35.2 25.6-54.4 16l-134.4-80z m160-185.6l92.8 160c9.6 19.2 35.2 25.6 54.4 12.8s25.6-35.2 12.8-54.4l-92.8-160c-12.8-19.2-35.2-22.4-54.4-12.8-16 12.8-22.4 33.6-12.8 54.4z m230.4-84.8c0-22.4 16-38.4 38.4-38.4s38.4 19.2 38.4 38.4V224c0 22.4-19.2 38.4-38.4 38.4-22.4 0-38.4-19.2-38.4-38.4V40z m240 43.2c9.6-19.2 35.2-25.6 54.4-16 19.2 9.6 25.6 35.2 16 51.2l-92.8 160c-9.6 19.2-35.2 25.6-54.4 16-19.2-9.6-25.6-35.2-12.8-54.4l89.6-156.8z m188.8 160l-160 92.8c-19.2 9.6-25.6 35.2-16 54.4 12.8 19.2 35.2 25.6 54.4 12.8l160-92.8c19.2-9.6 25.6-35.2 12.8-54.4-9.6-16-32-25.6-51.2-12.8z m83.2 228.8c22.4 0 38.4 16 38.4 38.4s-16 38.4-38.4 38.4H800c-22.4 0-38.4-19.2-38.4-38.4 0-22.4 19.2-38.4 38.4-38.4h185.6z"
  />
</svg>`,InfoPanelPluginName="info-panel",InfoPanelEvents={CLICK_UPLOAD:"contextmenu:click-upload"},PosterPluginName="poster",hideClass="txp_none",defaultShowTime=3,classNameOnCtrlHide="ctrl_hide",classNameOnCtrlResize="ctrl_resize",TipsPluginName="tips",UIContextMenuPluginName="context-menu",WaterMarkCoverClassName="thumbplayer-watermark-cover",WatermarkPluginName="ui-watermark",MaxRequestRetry=3,RequestTimeout=5e3,WatermarkError;(function(G){G.ActionWatermarkRequestFailed="001"})(WatermarkError||(WatermarkError={}));var PLUGINS_URL="//vm.gtimg.cn/thumbplayer/plugins/thumbplayer-plugin-super-player-plugins/".concat("1.4.106","/index.min.js"),LAZY_PLUGINS=[TipsPluginName,ErrorPagePluginName,PosterPluginName,CtrlbarPluginName,InfoPanelPluginName,WatermarkPluginName,UIContextMenuPluginName],PLAY_CODEC={AUTO:0,H264:1,H265:2},HEVC_LV_VALUE;(function(G){G[G.AUTO=void 0]="AUTO",G[G.NOT_SPT=0]="NOT_SPT",G[G.SD=11]="SD",G[G.HD=16]="HD",G[G.SHD=21]="SHD",G[G.FHD=26]="FHD"})(HEVC_LV_VALUE||(HEVC_LV_VALUE={}));var SUPER_END_STATE;(function(G){G.PREVIEW="preview"})(SUPER_END_STATE||(SUPER_END_STATE={}));var SUPER_DATA_KEY;(function(G){G.vodCGIUsed="super:cgiUsed"})(SUPER_DATA_KEY||(SUPER_DATA_KEY={}));(function(G){G.getinfoHlsAdRanges="getinfoHlsAdRanges",G.getinfoAdInfo="getinfoAdInfo",G.hlsAdRanges="hlsAdRanges"})(SUPER_DATA_KEY||(SUPER_DATA_KEY={}));var ctrlbarPluginName=CtrlbarPluginName,contextMenuPluginName=UIContextMenuPluginName,SuperPlayerEnum=Object.freeze({__proto__:null,PLAY_CODEC,get HEVC_LV_VALUE(){return HEVC_LV_VALUE},get SUPER_END_STATE(){return SUPER_END_STATE},get SUPER_DATA_KEY(){return SUPER_DATA_KEY},ctrlbarPluginName,contextMenuPluginName,adGlobalName,adVersion,adScriptMaxLoadTime,skipAdDomainWhiteList,isInDomainWhiteList,CTRL_EVENTS,get CTRL_SIZE(){return CTRL_SIZE},CtrlbarPluginName,ErrorPagePluginEvents,ErrorPagePluginName,get HOTPOINT_EVENTS(){return HOTPOINT_EVENTS},InfoPanelEvents,InfoPanelPluginName,MaxRequestRetry,get PlayBtnStatus(){return PlayBtnStatus},PosterPluginName,REPORTING_SVG_ICON,RequestTimeout,TipsPluginName,UIContextMenuPluginName,WaterMarkCoverClassName,get WatermarkError(){return WatermarkError},WatermarkPluginName,bodyOverflowClassName,classNameOnCtrlHide,classNameOnCtrlResize,containerClassName,dataRoleMap,defaultErrorText,defaultShowTime,getRootClassName,gradientClassName,hideClass,isMobile,largeSizeClassName,mobileRootClassName,pcRootClassName,shadowClassName,PLUGINS_URL,LAZY_PLUGINS}),SUPER_EVENTS;(function(G){G.DEGRADE_CODEC="degradeCodec",G.PREVIEW_START="previewStart",G.PREVIEW_END="previewEnd",G.GET_VIDEO_MARK_ALL_OVER="getVideoMarkAllOver",G.ENTER_HLS_AD="enterHlsAd",G.EXIT_HLS_AD="exitHlsAd"})(SUPER_EVENTS||(SUPER_EVENTS={}));var SuperPlayerEvt=Object.freeze({__proto__:null,get SUPER_EVENTS(){return SUPER_EVENTS}}),coreExportKeys=["PLAY_EVENT","VIDEO_STATE","KERNEL_NAME","PLAY_MODE","END_STATE","EvtEmitter","PAUSE_TYPE","commonTool","uaTool","Logger","cookieTool","lsTool","urlTool","domTool","netTool","videoTool","stringTool"],h5ExportKeys=["H5_PLAY_EVENT","COMMON_DATA_KEY","DATA_EVENTS","DRM_TYPE","DRM_VALUE","H5_EXT_EVENT","AdPluginName","Plugin"],superPlayerExportKeys=["PLAY_CODEC","CTRL_EVENTS","SUPER_END_STATE","SUPER_EVENTS","ctrlbarPluginName","contextMenuPluginName"];function bindExports(G){var U=__spreadArray$2(__spreadArray$2(__spreadArray$2([],coreExportKeys,!0),h5ExportKeys,!0),superPlayerExportKeys,!0);U=U.filter(function(L){return typeof G[L]=="undefined"}),U.forEach(function(L){[ThumbPlayerH5$1,ThumbPlayerCore$1,SuperPlayerEnum,SuperPlayerEvt].forEach(function(Y){Y!=null&&Y[L]&&(G[L]=Y[L])})})}var UrlParamKey;(function(G){G.debugSuper="__debugSuper",G.logLevel="__logLevel",G.downloadKit="__downloadKit"})(UrlParamKey||(UrlParamKey={}));function checkParams(G,U,L){if(!(!U||!L)){for(var Y=[{checker:function(){return G===PLAY_MODE$1.LIVE&&U==="load"},msg:"live mode does not support load()"},{checker:function(){return G===PLAY_MODE$1.LIVE&&U==="play"&&L.vid},msg:"vid is not supported in live mode"},{checker:function(){return G===PLAY_MODE$1.VOD&&L.cnlid},msg:"cnlid is not supported in vod mode"},{checker:function(){return L.vid&&!/^\w{11}$/.test(L.vid)},msg:"vid is illegal"}],X=0,W=Y.length;X<W;X++)if(Y[X].checker())throw new Error(Y[X].msg)}}function formatDefnName(G,U){if(U===void 0&&(U=!1),U)return formatLiveDefnName(G);var L=/(.*);\((.*)\)/,Y=G==null?void 0:G.match(L);return(Y==null?void 0:Y.length)>=3?[Y[1],Y[2]]:[G!=null?G:"",""]}function formatLiveDefnName(G){var U=G.split(" "),L=U[0],Y=U[1];return[L,Y]}function getIsOfficialScenes(){return/^http(s?):\/\/v.qq(.com)\/x\/(cover|page)\//.test(location.href)}function getTxVideoPageURLByVid(G,U,L){if(!G)return"";U!=="0"?U="_".concat(U):U="";var Y="//v.qq.com/page",X=G.substr(0,1),W=G.substr(G.length-2,1),z=G.substr(G.length-1,1),J="".concat(Y,"/").concat(X,"/").concat(W,"/").concat(z,"/").concat(G).concat(U,".html");return L&&(J+="?start=".concat(L)),J}function getEnvVals(){var G="npm";try{G="npm"}catch(X){}var U="";try{U="1.4.88"}catch(X){}var L="";try{L="1653377141490"}catch(X){}var Y=!1;try{Y={}.__LOCAL_DEV__==="1"}catch(X){}return{CHANNEL:G,VERSION:U,BUILD_TIME:L,LOCAL_DEV:Y}}function getDebugModeFromUrl(){return urlTool$1.getUrlParamByKey(location.href,UrlParamKey.debugSuper)==="1"}function getShouldUseDownloadKitFromUrl(){return urlTool$1.getUrlParamByKey(location.href,UrlParamKey.downloadKit)}function getLogLevelFromUrl(){var G=+urlTool$1.getUrlParamByKey(location.href,UrlParamKey.logLevel);return isNaN(G)?PLAYER_LOG_LEVEL$1.NONE:G}var _a$1,STATE;(function(G){G[G.enabled=0]="enabled",G[G.disabled=1]="disabled"})(STATE||(STATE={}));var AdType={MidRoll:"ZC",HlsAd:"PHLS",BeforePlay:AD_TYPE.PRE,AfterPlay:AD_TYPE.POST},AD_INFO_OP_TYPE;(function(G){G[G.HLS_AD=2]="HLS_AD"})(AD_INFO_OP_TYPE||(AD_INFO_OP_TYPE={}));var midRollAdCGI={Formal:"//mark.l.qq.com/fcgi-bin/get_video_mark_all",Test:"//testmark.l.qq.com/fcgi-bin/get_video_mark_all"},videoMarkDebugParam="debugvideomark",isVideoMarkDebugEnv=urlTool$1.getUrlParamByKey(location.href,videoMarkDebugParam)==="1",disabledCtrlBarComps=["playrate","definition","audiotrack","language","PlayBtn","NextBtn","Progress","CtrlShow","PictureInPicture"],disabledCtrlBarCompsWhenHlsAd=["playrate","definition","audiotrack","language","CtrlShow"],disabledCtrlBarCompsMap=(_a$1={},_a$1[AdType.AfterPlay]=disabledCtrlBarComps,_a$1[AdType.BeforePlay]=disabledCtrlBarComps,_a$1[AdType.MidRoll]=disabledCtrlBarComps,_a$1[AdType.HlsAd]=disabledCtrlBarCompsWhenHlsAd,_a$1),parseMidRollAdResponse=function(G){if(!G||+G.errorno!=0)return+G.errorno;var U=G.results[0],L=U.admark||{};return L.fields=U.fields||[],L};function getHlsAdRanges(G,U){if(!G||!U||G.length===0||U.length===0)return[];for(var L=[],Y=0,X=U.length;Y<X;Y++)for(var W=U[Y],z=0,J=G.length;z<J;z++){var Z=G[z];if(Math.abs(Z.start-W.start)<1&&Math.abs(Z.end-W.end)<1){L.push(Z);break}}return L}function parseGetinfoHlsAdRanges(G){var U,L=[];if(!(G!=null&&G.adpinfo))return L;var Y=null;try{Y=JSON.parse(G.adpinfo)}catch(X){}return(U=Y==null?void 0:Y.plugin_info)===null||U===void 0||U.forEach(function(X){+X.optype===AD_INFO_OP_TYPE.HLS_AD&&L.push({start:X.ad_offset_time,end:X.ad_offset_time+X.ad_dura})}),L}var AdLogic=function(){function G(U,L){var Y=this;this.player=U,this.corePlayer=L,this.isHlsAdPlaying=!1,this.logger=new Logger$1(this.player.config.instanceId,"AdLogic"),this.setEvts(!0),this.player.pluginMsg.once("pluginsetup:".concat(AdPluginName),function(){Y.setAdPluginEvts(!0)})}return G.prototype.destroy=function(){getAdPlugin(this.player.config.instanceId)&&this.setAdPluginEvts(!1),this.setEvts(!1),this.player=null,this.corePlayer=null},G.prototype.setEvts=function(U){var L,Y=this;this.evtMap||(this.evtMap={player:(L={},L[H5_PLAY_EVENT.AD_PLAYING]=this.onAdPlaying.bind(this),L[H5_PLAY_EVENT.AD_END]=this.onAdEnd.bind(this),L[H5_PLAY_EVENT.VIDEO_PLAYING]=this.onVideoPlaying.bind(this),L[H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED]=this.onAdAutoplayBlocked.bind(this),L[H5_PLAY_EVENT.VIDEO_REQ_INFO_END]=this.onVideoReqInfoEnd.bind(this),L[H5_PLAY_EVENT.VIDEO_TIMEUPDATE]=this.onVideoTimeUpdate.bind(this),L[H5_PLAY_EVENT.PLAY_SESSION_END]=this.onPlaySessionEnd.bind(this),L),corePlayer:{hlsLevelLoaded:this.onHlsLevelLoaded.bind(this)},adPlugin:{enterCountdownCompleteEvt:this.onWillPlayMidRollAd.bind(this),enterCountdownEvt:this.onEnterMidRollAdCountdown.bind(this)}});var X=U?this.player.on:this.player.off;Object.keys(this.evtMap.player).forEach(function(z){X.apply(Y.player,[z,Y.evtMap.player[z]])});var W=U?this.corePlayer.on:this.corePlayer.off;Object.keys(this.evtMap.corePlayer).forEach(function(z){W.apply(Y.corePlayer,[z,Y.evtMap.corePlayer[z]])})},G.prototype.setAdPluginEvts=function(U){var L=this,Y=getAdPlugin(this.player.config.instanceId),X=U?Y.on:Y.off;Object.keys(this.evtMap.adPlugin).forEach(function(W){X.apply(Y,[W,L.evtMap.adPlugin[W]])})},G.prototype.onAdPlaying=function(U){var L,Y=this,X,W,z,J=(L={},L[AdType.BeforePlay]=function(){return Y.setCtrlBarState(STATE.disabled,AdType.BeforePlay)},L[AdType.MidRoll]=function(){return Y.setCtrlBarState(STATE.disabled,AdType.MidRoll)},L[AdType.AfterPlay]=function(){return Y.setCtrlBarState(STATE.disabled,AdType.AfterPlay)},L),Z=(X=U.data)===null||X===void 0?void 0:X.adType;(W=J[Z])===null||W===void 0||W.apply(this),(z=this.player.loadingPlugin)===null||z===void 0||z.hide()},G.prototype.onAdEnd=function(U){var L,Y=this,X,W,z=(L={},L[AdType.BeforePlay]=function(){return Y.setCtrlBarState(STATE.enabled,AdType.BeforePlay)},L[AdType.MidRoll]=function(){Y.setCtrlBarState(STATE.enabled,AdType.MidRoll),Y.player.play()},L[AdType.AfterPlay]=function(){return Y.setCtrlBarState(STATE.enabled,AdType.AfterPlay)},L),J=(X=U.data)===null||X===void 0?void 0:X.adType;(W=z[J])===null||W===void 0||W.apply(this)},G.prototype.onVideoPlaying=function(U){!U.data.isFirst||!getIsOfficialScenes()||uaTool$1.mobile||this.player.config.type!==PLAY_MODE$1.VOD||this.requestMidRollAd()},G.prototype.onAdAutoplayBlocked=function(U){var L,Y=U.data;if(Y.adType===AdType.BeforePlay){(L=this.player.loadingPlugin)===null||L===void 0||L.hide();var X=this.player.ctrlbarPlugin;!X||(X.show(!0),X.setCompDisable("PlayBtn",!1),X.setCompDisable(["PictureInPicture","playrate"],!0))}},G.prototype.onWillPlayMidRollAd=function(){this.player.pause(),getAdPlugin(this.player.config.instanceId).playAd({adType:AdType.MidRoll})},G.prototype.onEnterMidRollAdCountdown=function(){this.setCtrlBarState(STATE.disabled,AdType.MidRoll)},G.prototype.prepareMidRollAdRequestParam=function(){var U=this.player.getCommonKv(COMMON_DATA_KEY.vid),L=getAdPlugin(this.player.config.instanceId).getAdParams({vid:U,coverId:this.player.getCommonKv(COMMON_DATA_KEY.cid),adType:AdType.MidRoll}),Y=this.player.getCommonKv(SUPER_DATA_KEY.getinfoAdInfo);Y!=null&&Y.adsid&&(L.session_id=Y.adsid);var X={pr:1,otype:"json",idlist:U,strAdParam:urlTool$1.convertUrlParam(__assign$a(__assign$a({},L),{anchor:"1"})),vuid:cookieTool$1.get("vuserid")||cookieTool$1.get("vqq_vuserid")},W=this.player.getCommonKv(SUPER_DATA_KEY.getinfoHlsAdRanges);return(W==null?void 0:W.length)>0&&(X.adsegments=JSON.stringify({ad_segments:W.map(function(z){return{start_time:z.start,duration:z.end-z.start}})})),X},G.prototype.requestMidRollAd=function(){return __awaiter$6(this,void 0,void 0,function(){var U,L,Y,X,W;return __generator$6(this,function(z){switch(z.label){case 0:if(U=getAdPlugin(this.player.config.instanceId),!U)return[2];L=isVideoMarkDebugEnv?midRollAdCGI.Test:midRollAdCGI.Formal,Y=this.prepareMidRollAdRequestParam(),X={},z.label=1;case 1:return z.trys.push([1,3,4,5]),[4,netTool$1.jsonp(L,{name:"thumbplayer_mr_ad_callback",query:Y})];case 2:return X=z.sent(),W=parseMidRollAdResponse(X),U.setAdInfo(W),[3,5];case 3:return z.sent(),[3,5];case 4:return this.player.emit(SUPER_EVENTS.GET_VIDEO_MARK_ALL_OVER,X),[7];case 5:return[2]}})})},G.prototype.setCtrlBarState=function(U,L){var Y=this.player.plugins[CtrlbarPluginName];if(!!Y){var X=disabledCtrlBarCompsMap[L];Y.setCompDisable(X,!!U),Y.setHotKeysDisable(!!U)}},G.prototype.onVideoReqInfoEnd=function(U){var L,Y=U.data,X=(((L=Y.data)===null||L===void 0?void 0:L.parseData)||{}).vitem;if(!(!X||!X.ad)){var W=parseGetinfoHlsAdRanges(X.ad);this.player.setCommonKv(SUPER_DATA_KEY.getinfoHlsAdRanges,W),this.player.setCommonKv(SUPER_DATA_KEY.getinfoAdInfo,X.ad),this.logger.log("hlsAdRanges from getinfo is ",W)}},G.prototype.onPlaySessionEnd=function(){this.player.setCommonKv(SUPER_DATA_KEY.getinfoHlsAdRanges,null),this.player.setCommonKv(SUPER_DATA_KEY.getinfoAdInfo,null),this.player.setCommonKv(SUPER_DATA_KEY.hlsAdRanges,null)},G.prototype.onHlsLevelLoaded=function(U){var L,Y,X=(Y=(L=U.data)===null||L===void 0?void 0:L.details)===null||Y===void 0?void 0:Y.discontinuityTimeRanges;if(!(!X||X.length<=0)){var W=this.player.getCommonKv(SUPER_DATA_KEY.getinfoHlsAdRanges);if(!(!W||W.length<=0)){var z=getHlsAdRanges(X,W);this.player.setCommonKv(SUPER_DATA_KEY.hlsAdRanges,z),this.logger.log("final hlsAdRanges is ",z)}}},G.prototype.onVideoTimeUpdate=function(U){var L=U.data,Y=(L||{}).playtime;Y<=0||this.checkWhetherEnterOrExitHlsAd(Y)},G.prototype.checkWhetherEnterOrExitHlsAd=function(U){var L=this.player.getCommonKv(SUPER_DATA_KEY.hlsAdRanges);if(!(!L||L.length<=0)){var Y=L.find(function(X){return X.start<=U&&U<=X.end});!this.isHlsAdPlaying&&Y?(this.isHlsAdPlaying=!0,this.enterHlsAd(U,Y)):this.isHlsAdPlaying&&!Y&&(this.isHlsAdPlaying=!1,this.exitHlsAd())}},G.prototype.enterHlsAd=function(U,L){this.logger.log("enter hlsAd, playtime=".concat(U,", range="),L),this.setCtrlBarState(STATE.disabled,AdType.HlsAd),this.player.emit(SUPER_EVENTS.ENTER_HLS_AD,{hlsAdRange:L})},G.prototype.exitHlsAd=function(){this.logger.log("exit hlsAd...."),this.setCtrlBarState(STATE.enabled,AdType.HlsAd),this.player.emit(SUPER_EVENTS.EXIT_HLS_AD)},G}(),PROXY_HTTP_PATH={COMMON:["//vd6.l.qq.com/proxyhttp","//vi.l.qq.com/proxyhttp"]},DEFAULT_CONFIG={retryCount:3},PROXY_HTTP_CODE={NET:"70015001",TIMEOUT:"70015002",RES_CODE:"70015003"},FORMAT;(function(G){G.SD="sd",G.HD="hd",G.SHD="shd",G.FHD="fhd",G.UHD="uhd",G.DOLBY="dolby"})(FORMAT||(FORMAT={}));var PAID_FORMAT;(function(G){G.FHD="fhd",G.UHD="uhd",G.DOLBY="dolby",G.HDR10="hdr10",G.SFR_HDR="sfr_hdr"})(PAID_FORMAT||(PAID_FORMAT={}));function getDefaultVodPlatform(){if(uaTool$1.mobile)return"11001";var G=isOfficialSite();return uaTool$1.os.windows&&G?"10201":uaTool$1.os.windows&&!G?"70201":uaTool$1.os.mac&&G?"10901":uaTool$1.os.mac&&!G?"70901":G?"10901":"70901"}function isOfficialSite(){var G=urlTool$1.getTopFrameUrl(),U=urlTool$1.getDomainOfURL(G),L=["v.qq.com","film.qq.com"];return L.includes(U)}function getDefautVodSdtfrom(G){if(G==="11001"){if(uaTool$1.os.iphone||uaTool$1.os.ipod)return"v3010";if(uaTool$1.os.ipad)return"v4010";if(uaTool$1.os.tablet)return"v6010";if(uaTool$1.os.android)return"v5010";if(uaTool$1.browser.IEMobile)return"v7010"}var U={70201:"v1104",70901:"v1103"};return U[G]||"v1010"}var VERSION$1=getEnvVals().VERSION,defaultVodPlatform=getDefaultVodPlatform(),defautVodSdtfrom=getDefautVodSdtfrom(defaultVodPlatform),defaultVodBusinessConfig={platform:defaultVodPlatform,sdtfrom:defautVodSdtfrom},defaultLiveBusinessConfig={platform:"10201",sdtfrom:"10201"};function getBuiltInPlugins(G,U){var L,Y;G===void 0&&(G=PLAY_MODE$1.VOD);var X=U.removeComponents,W=X===void 0?[]:X,z=W.includes(PosterPluginName)||!!U.disablePoster,J=W.includes(CtrlbarPluginName)||!!U.disableCtrlbar,Z=W.includes(ErrorPagePluginName)||!!U.disableErrorPage,ee=W.includes(TipsPluginName)||!!U.disableTips,te=W.includes(UILoadingPlugin.pluginName)||!!U.disableLoading,re=W.includes(UIContextMenuPluginName)||!!U.disableCtxMenu,ie=W.includes(WatermarkPluginName)||!!U.disableWatermark,ne=W.includes(InfoPanelPluginName),oe=W.includes(PollDurationPlugin.pluginName),se=(L={},L[PosterPluginName]={isEnabled:!z,config:U.poster},L[CtrlbarPluginName]={isEnabled:!J},L[ErrorPagePluginName]={isEnabled:!Z,config:{showOnError:!0}},L[TipsPluginName]={isEnabled:!ee},L[UILoadingPlugin.pluginName]={isEnabled:!te},L[UIContextMenuPluginName]={isEnabled:!isMobile$2&&!re,config:{menus:[{role:"version",label:VERSION$1||"1.3.0"}]}},L[InfoPanelPluginName]={isEnabled:!ne,config:{defaultInfo:!0}},L[LivepollPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.LIVE,config:{livepid:(Y=U.livepollConfig)===null||Y===void 0?void 0:Y.livepid}},L[VodFlowReporterPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.VOD},L[VodFlyReporterPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.VOD},L[LiveFlowReporterPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.LIVE},L[LiveFlyReporterPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.LIVE},L[WatermarkPluginName]={isEnabled:!ie},L[PollDurationPlugin.pluginName]={isEnabled:G===PLAY_MODE$1.VOD&&!oe},L),ae=[];return Object.keys(se).forEach(function(le){var ue=se[le],ce=ue.isEnabled,he=ue.config;ce&&ae.push(he?[le,he]:le)}),ae}function getDownloadKitConfig(G){var U=G.type,L=G.enableP2P,Y=G.platform,X=getShouldUseDownloadKitFromUrl();return X==="0"?!1:X==="1"?!0:L?!!L:U==="live"?!1:["10901","10201"].includes(Y)}var defaultDegradeConfig={maxDecodeTime:40,maxLowDecodeTimeCount:1500};function getSuperConfig(G){var U,L,Y,X,W,z,J,Z,ee,te,re,ie,ne=G.plugins,oe=ne===void 0?[]:ne,se=G.mode,ae=se===void 0?PLAY_MODE$1.VOD:se,le=G.businessConfig,ue=le===void 0?{}:le,ce=G.coreConfig,he=ce===void 0?{}:ce,fe=G.pluginConfig,de=fe===void 0?{}:fe,_e=G.dynamicConfig,me=_e===void 0?{}:_e;G.type=(U=G.type)!==null&&U!==void 0?U:ae;var ve=G.type,ye=G.lazyInitPlugins,be=ve===PLAY_MODE$1.VOD?defaultVodBusinessConfig:defaultLiveBusinessConfig,Te=__assign$a(__assign$a({},be),ue),Se=getBuiltInPlugins(ve,G),Ue=__spreadArray$2(__spreadArray$2([],Se,!0),oe,!0),Pe=Te.platform,Ne=__assign$a(__assign$a(__assign$a(__assign$a({supportedPaidFormat:isOfficialSite()?[PAID_FORMAT.FHD,PAID_FORMAT.DOLBY,PAID_FORMAT.SFR_HDR]:[],logLevel:getLogLevelFromUrl(),videoElementConfig:{playsinline:!0},maxVideoNodeCount:isMobile$2||ve===PLAY_MODE$1.LIVE?1:2,enableP2P:getDownloadKitConfig({type:ve,enableP2P:G.enableP2P,platform:Pe})},de),he),G),{businessConfig:Te,plugins:Ue,offlineConfig:__assign$a({platform:Pe},G.offlineConfig),ctrlConfig:__assign$a(__assign$a({disableNextBtn:!0,hidePopupOnClick:!0},de.ctrlConfig),G.ctrlConfig),infoPanelConfig:{defaultInfo:!0},vodQaReporterConfig:{paramsKey:__assign$a(__assign$a({},(L=de.vodQaReporterConfig)===null||L===void 0?void 0:L.paramsKey),(Y=G==null?void 0:G.vodQaReporterConfig)===null||Y===void 0?void 0:Y.paramsKey),externalBeaconDefer:(X=G==null?void 0:G.vodQaReporterConfig)===null||X===void 0?void 0:X.externalBeaconDefer},vodFlowReporterConfig:{paramsKey:__assign$a(__assign$a({tpay:VOD_GET_INFO_DATA_KEYS.videoCharged,vtype:VOD_GET_INFO_DATA_KEYS.videoType,ckeyVer:VOD_GET_INFO_DATA_KEYS.ckeyVersion,pay_type:VOD_GET_INFO_DATA_KEYS.userPayType,cginame:SUPER_DATA_KEY.vodCGIUsed},(W=de.vodFlowReporterConfig)===null||W===void 0?void 0:W.paramsKey),(z=G==null?void 0:G.vodFlowReporterConfig)===null||z===void 0?void 0:z.paramsKey),onBeforeReport:(J=G==null?void 0:G.vodFlowReporterConfig)===null||J===void 0?void 0:J.onBeforeReport},liveQaReporterConfig:{paramsKey:__assign$a(__assign$a({sid:LIVE_GET_INFO_DATA_KEYS.livesid,isuserpay:LIVE_GET_INFO_DATA_KEYS.isuserpay,playtime:LIVE_GET_INFO_DATA_KEYS.playtime},(Z=de.liveQaReporterConfig)===null||Z===void 0?void 0:Z.paramsKey),(ee=G==null?void 0:G.liveQaReporterConfig)===null||ee===void 0?void 0:ee.paramsKey),externalBeaconDefer:(te=G==null?void 0:G.liveQaReporterConfig)===null||te===void 0?void 0:te.externalBeaconDefer},liveFlowReporterConfig:{paramsKey:__assign$a(__assign$a({sid:LIVE_GET_INFO_DATA_KEYS.livesid,cpay:LIVE_GET_INFO_DATA_KEYS.cpay,tpay:LIVE_GET_INFO_DATA_KEYS.isuserpay,playtime:LIVE_GET_INFO_DATA_KEYS.playtime,rest_preview_cnt:LIVE_GET_INFO_DATA_KEYS.restpreviewcnt},(re=de.liveFlowReporterConfig)===null||re===void 0?void 0:re.paramsKey),(ie=G==null?void 0:G.liveFlowReporterConfig)===null||ie===void 0?void 0:ie.paramsKey)}}),Ve=[],ze={superPlayerConfig:mergeDynamicConfig(Ne,me),lazyPlugins:Ve};return ye&&(ze.superPlayerConfig.plugins=ze.superPlayerConfig.plugins.filter(function(Ze){var Ae=typeof Ze=="string"?Ze:Ze[0];return LAZY_PLUGINS.includes(Ae)?(Ve.push(Ze),!1):!0})),ze}function getAdInitConfig(G){var U,L=G.adInitConfig,Y=G.useSingleVideoElement,X=!!KernelFactory$3.getKernelByName(KERNEL_NAME$1.DEMUX_2_FMP4);return __assign$a(__assign$a({},L),{playerData:__assign$a(__assign$a({},L==null?void 0:L.playerData),{playerVideoDom:(Y!=null?Y:uaTool$1.mobile)?(U=G.videoElements)===null||U===void 0?void 0:U[0]:void 0}),isUseDemuxKernel:X,opencache:X})}function mergeDynamicConfig(G,U){var L=G;return Object.keys(U).forEach(function(Y){var X=L[Y];Object.prototype.toString.call(X)==="[object Object]"?L[Y]=__assign$a(__assign$a({},X),U[Y]):L[Y]=U[Y]}),L}var DegradeLogic=function(){function G(U){this.player=U,this.lowDecodeTimeCount=0,this.config=__assign$a(__assign$a({},defaultDegradeConfig),U.config.degradeConfig),this.setEvts(!0)}return G.prototype.reset=function(){this.lowDecodeTimeCount=0},G.prototype.setEvts=function(U){var L,Y=this;this.evtMap||(this.evtMap={player:(L={},L[PLAY_EVENT$1.DECODE_TIME]=this.onDecodeTimeHandler.bind(this),L[PLAY_EVENT$1.ERROR]=this.onErrorHandler.bind(this),L)});var X=U?this.player.on:this.player.off;Object.keys(this.evtMap.player).forEach(function(W){X.apply(Y.player,[W,Y.evtMap.player[W]])})},G.prototype.start=function(U){var L=this,Y;if(U.cnlid)Y={cnlid:U.cnlid,livepid:U.livepid,playCodec:PLAY_CODEC.H264};else if(U.vid)Y={vid:U.vid,playCodec:PLAY_CODEC.H264};else return;var X=function(){L.player.play(Y,{videoReqInfoParam:{defn:U.defn||""}})};this.player.log("\u964D\u7EA7\u64AD\u653E, reqParams=",U),this.reset(),this.player.played?(this.player.once(H5_PLAY_EVENT.PLAY_SESSION_END,X),this.player.stop()):X()},G.prototype.onDecodeTimeHandler=function(U){U.data.decodeTime>this.config.maxDecodeTime&&this.lowDecodeTimeCount++,this.lowDecodeTimeCount>this.config.maxLowDecodeTimeCount&&(this.lowDecodeTimeCount=0,this.player.degradeCodec())},G.prototype.onErrorHandler=function(U){var L=this,Y,X,W="70060003";((X=(Y=U.data.videoInfo)===null||Y===void 0?void 0:Y.error)===null||X===void 0?void 0:X.code)===W&&setTimeout(function(){L.player.degradeCodec()},0)},G.prototype.destroy=function(){this.setEvts(!1),this.player=null},G}(),PosterLogic=function(){function G(U){this.player=U,this.hasPostAdInPlaySession=!1,this.setEvts(!0),this.showDefaultPoster()}return G.prototype.destroy=function(){this.setEvts(!1),this.player=null},G.prototype.showDefaultPoster=function(){var U=this,L=this.player.config,Y=L.videoId,X=L.type,W=L.lazyInitPlugins,z=L.videoInitConfig,J=Y;if(z)if(typeof z=="string")J=z;else{var Z=z.vid;Z&&(J=Z)}var ee=function(){X===PLAY_MODE$1.VOD&&J&&U.showPoster(J)};W?this.player.pluginMsg.once("pluginsetup:".concat(PosterPluginName),function(){ee()}):ee()},G.prototype.showPoster=function(U){var L=this.player.config,Y=L.poster,X=L.disablePoster,W=L.type,z=this.player.getPlugin(PosterPluginName);if(!(X||!z)){if(Y!=null&&Y.src){z.show(Y.src);return}if(W===PLAY_MODE$1.VOD){U&&typeof U=="string"&&z.showByVid({vid:U,vidFirstPic:Y==null?void 0:Y.vidFirstPic});return}z.show("https://puui.qpic.cn/vupload/0/20171225_1514277750947.jpeg/0")}},G.prototype.setEvts=function(U){var L,Y=this;this.evtMap||(this.evtMap=(L={},L[H5_PLAY_EVENT.AD_AUTOPLAY_BLOCKED]=this.onAdAutoplayBlocked.bind(this),L[H5_PLAY_EVENT.AD_PLAYING]=this.onAdPlaying.bind(this),L[H5_PLAY_EVENT.PLAY_SESSION_END]=this.onPlaySessionEnd.bind(this),L));var X=U?this.player.on:this.player.off;Object.keys(this.evtMap).forEach(function(W){X.apply(Y.player,[W,Y.evtMap[W]])})},G.prototype.onAdAutoplayBlocked=function(U){var L=U.data;L.adType===AD_TYPE.PRE&&this.showPoster(this.player.vid)},G.prototype.onAdPlaying=function(U){var L=U.data;L.adType===AD_TYPE.POST&&(this.hasPostAdInPlaySession=!0)},G.prototype.onPlaySessionEnd=function(){this.hasPostAdInPlaySession&&(this.hasPostAdInPlaySession=!1,this.showPoster(this.player.vid))},G}(),PreviewLogic=function(){function G(U){var L=this;this.player=U,this.previewDuration=NO_PREVIEW_FLAG,this.isPreviewEnd=!1,this.lastHotKeysDisabled=!1,this.lastCtrlShowDisabled=!1,this.previewStartTimeOnLive=0,this.onVideoSessionStart=function(){!L.ctrlPlugin||!L.isVod||(L.ctrlPlugin.duration=void 0)},this.onVideoReqInfoEnd=function(Y){var X=Y.data,W=X.code,z=X.data;if(W===ErrorCode.SUC){var J=(z==null?void 0:z.parseData)||{},Z=J.preview,ee=J.duration;Number.isNaN(Z)||Z<=0||(L.previewDuration=Z,L.isVod?(L.showTips(),L.ctrlPlugin&&(L.player.ctrlbarPlugin.duration=uaTool$1.mobile?L.previewDuration:ee,uaTool$1.mobile||L.setCtrlMaxPercent(Z/ee))):L.showTips(),L.player.emit(SUPER_EVENTS.PREVIEW_START,{previewDuration:Z}))}},this.onVideoPlaying=function(Y){var X=Y.data;if(X.isFirst&&(L.previewStartTimeOnLive=+new Date),L.isPreviewEnd){if(L.isPreviewEnd=!1,!L.ctrlPlugin)return;L.restoreCtrlBarAction()}},this.onVideoTimeUpdate=function(Y){var X=Y.data.playtime,W=!1;L.isVod?W=L.checkPreviewOverOnVodMode(X):W=L.checkPreviewOverOnLiveMode(),W&&(L.isPreviewEnd=!0,L.player.emit(SUPER_EVENTS.PREVIEW_END,{previewDuration:L.previewDuration}))},this.onPlaySessionEnd=function(){var Y;L.previewDuration!==NO_PREVIEW_FLAG&&((Y=L.player.tipsPlugin)===null||Y===void 0||Y.hide()),L.previewDuration=NO_PREVIEW_FLAG,L.previewStartTimeOnLive=0,L.ctrlPlugin&&(L.setCtrlMaxPercent(1),L.restoreCtrlBarAction())},this.onVideoPause=function(){!L.isPreviewEnd||L.setCtrlPlayBtnStatus(PlayBtnStatus.REPLAY)},this.setPreviewListener(!0)}return G.prototype.destroy=function(){this.setPreviewListener(!1),this.player=null},G.prototype.setPreviewListener=function(U){var L=U?this.player.on.bind(this.player):this.player.off.bind(this.player);L(H5_PLAY_EVENT.PLAY_SESSION_START,this.onVideoSessionStart),L(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,this.onVideoReqInfoEnd),L(H5_PLAY_EVENT.VIDEO_PLAYING,this.onVideoPlaying),L(H5_PLAY_EVENT.VIDEO_TIMEUPDATE,this.onVideoTimeUpdate),L(H5_PLAY_EVENT.VIDEO_PAUSE,this.onVideoPause),L(H5_PLAY_EVENT.PLAY_SESSION_END,this.onPlaySessionEnd)},G.prototype.checkPreviewOverOnVodMode=function(U){var L=this;return this.previewDuration===NO_PREVIEW_FLAG||U<this.previewDuration||this.isPreviewEnd?!1:(uaTool$1.mobile?setTimeout(function(){L.player.corePlayer.stop(SUPER_END_STATE.PREVIEW)}):(this.player.pause(),this.disableCtrlAction()),!0)},G.prototype.checkPreviewOverOnLiveMode=function(){var U=this;return this.previewDuration===NO_PREVIEW_FLAG||this.previewStartTimeOnLive<=0||this.isPreviewEnd||+new Date-this.previewStartTimeOnLive<=this.previewDuration*1e3?!1:(setTimeout(function(){U.player.corePlayer.stop(SUPER_END_STATE.PREVIEW)}),!0)},G.prototype.setCtrlPlayBtnStatus=function(U){var L,Y,X=(Y=(L=this.ctrlPlugin)===null||L===void 0?void 0:L.instances)===null||Y===void 0?void 0:Y.PlayBtn;!X||(X.el.dataset.status=U)},G.prototype.setCtrlMaxPercent=function(U){var L,Y;U===void 0&&(U=1);var X=(Y=(L=this.ctrlPlugin)===null||L===void 0?void 0:L.instances)===null||Y===void 0?void 0:Y.Progress;!X||(X.maxPercent=U)},G.prototype.disableCtrlAction=function(){!this.ctrlPlugin||(this.lastHotKeysDisabled=this.ctrlPlugin.getIsHotKeysDisabled(),this.lastCtrlShowDisabled=this.ctrlShow.shadowClickDisabled,this.ctrlShow.shadowClickDisabled=!0,this.ctrlPlugin.setHotKeysDisable(!0))},G.prototype.restoreCtrlBarAction=function(){!this.ctrlPlugin||(this.ctrlPlugin.setHotKeysDisable(this.lastHotKeysDisabled),this.ctrlShow.shadowClickDisabled=this.lastCtrlShowDisabled)},G.prototype.showTips=function(){var U,L=getIsOfficialScenes();if(!L){var Y=comTool$1.formatPlayTime(this.previewDuration),X=getTxVideoPageURLByVid(this.player.vid,"0");(U=this.player.tipsPlugin)===null||U===void 0||U.show({text:"\u53EF\u8BD5\u770B ".concat(Y,'\uFF0C\u53BB\u817E\u8BAF\u89C6\u9891\u89C2\u770B\u5B8C\u6574\u7248 <a target="_blank;" href="').concat(X,'">\u7ACB\u5373\u524D\u5F80</a>'),time:-1})}},Object.defineProperty(G.prototype,"isVod",{get:function(){return this.player.config.type===PLAY_MODE$1.VOD},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"ctrlShow",{get:function(){var U,L;return(L=(U=this.ctrlPlugin)===null||U===void 0?void 0:U.instances)===null||L===void 0?void 0:L.CtrlShow},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"ctrlPlugin",{get:function(){return this.player.plugins[CtrlbarPluginName]},enumerable:!1,configurable:!0}),G}(),NO_PREVIEW_FLAG=0,MAIN_LOGIN_WX="wx",MAIN_LOGIN_QQ="qq",TxAuth=function(){function G(){}return G.readGetInfoToken=function(U){var L="",Y=G.raw();if(!Y.main_login||U&&Y.main_login===MAIN_LOGIN_QQ&&(!Y.access_token||!Y.vuserid))return"";try{L=JSON.stringify(Y)}catch(X){}return L},G.readAdToken=function(){for(var U=[["opid","openid"],["appid","appid"],["atkn","access_token"],["uid","vuserid"],["tkn","vusession"]],L=G.raw(),Y={lt:L.main_login||""},X=0,W=U.length;X<W;X++){var z=U[X];Y[z[0]]=L[z[1]]||""}return Y},G.raw=function(){var U={main_login:"",openid:"",appid:"",access_token:"",vuserid:"",vusession:""};try{var L=cookieTool$1.get("main_login");if(L===MAIN_LOGIN_WX||L===MAIN_LOGIN_QQ){U.main_login=L;for(var Y=["openid","appid","access_token","vuserid","vusession"],X=0,W=Y.length;X<W;X++){var z=Y[X];L===MAIN_LOGIN_QQ&&(z="vqq_".concat(z)),U[Y[X]]=cookieTool$1.get(z)}}}catch(J){}return U},G}(),_a;function builtDefinitionOption(G,U,L){var Y={prefix:"",suffix:""};return L!=null&&L.prefix&&(Y.prefix=typeof L.prefix=="function"?L.prefix(G):null),L!=null&&L.suffix&&(Y.suffix=typeof L.suffix=="function"?L.suffix(G):null),U?builtLiveDefinitionOption(G,Y):buildVodDefinitionOption(G,Y)}function buildVodDefinitionOption(G,U){var L=G.name;return L===PAID_FORMAT.HDR10||L===PAID_FORMAT.SFR_HDR||L===PAID_FORMAT.DOLBY?builtSpecialOption(G,L,U):builtRegularOption(G,!1,U)}function builtLiveDefinitionOption(G,U){var L=G.cname,Y=G.name,X=formatDefnName(L,!0),W=X[0],z=W===void 0?"":W,J=X[1],Z=J===void 0?"":J;return{label:uaTool$1.mobile?constructMobileOptionTemplate(Z,z):constructDesktopOptionTemplate("".concat(Z," ").concat(z),U.prefix,U.suffix),btnLabel:Z,value:Y,payload:Z}}function builtSpecialOption(G,U,L){var Y,X=G.name,W=G.resolution,z=G.cname,J=G.lmt,Z=G.sname,ee=formatDefnName(z,!1)[0],te=ee===void 0?"":ee,re=L.suffix||(J?vipIcon:null),ie=L.prefix||constructIconContainer(SpecialResolutionPrefixIcons[U],{width:"30px"}),ne=(Y={},Y[PAID_FORMAT.DOLBY]=W,Y[PAID_FORMAT.HDR10]=constructHDRBtnLabel(Z.substring(0,2)),Y[PAID_FORMAT.SFR_HDR]=W,Y);return{label:constructDesktopOptionTemplate(te,ie,re),btnLabel:ne[U],value:X,payload:W}}function builtRegularOption(G,U,L){var Y=G.cname,X=G.name,W=G.resolution,z=G.lmt,J=formatDefnName(Y,U),Z=J[0],ee=Z===void 0?"":Z,te=J[1],re=te===void 0?"":te,ie=L.suffix||(z?vipIcon:null);return{label:uaTool$1.mobile?constructMobileOptionTemplate(re,ee):constructDesktopOptionTemplate("".concat(re," ").concat(ee),L.prefix,ie),btnLabel:re,value:X,payload:W}}function constructDesktopOptionTemplate(G,U,L){var Y=createFlexDiv({alignItems:"center"});U&&Y.insertAdjacentHTML("afterbegin",U);var X=createFlexDiv();return X.innerHTML=G,Y.appendChild(X),L&&Y.insertAdjacentHTML("beforeend",L),Y.outerHTML}function constructMobileOptionTemplate(G,U){return"<div>".concat(U,"<div><div>").concat(G,"</div>")}function constructHDRBtnLabel(G){var U=createFlexDiv({alignItems:"center",width:"100%"});U.textContent=G;var L=createFlexDiv({transform:"scale(0.8)"});return L.innerHTML=hdrOptionIcon,U.insertAdjacentElement("beforeend",L),U.outerHTML}function constructIconContainer(G,U){var L=document.createElement("div");return L.className="tp-defn-option-icon-container",U&&Object.entries(U).forEach(function(Y){var X=Y[0],W=Y[1];L.style[X]=W}),L.innerHTML=G,L.outerHTML}var dolbyOptionIcon=`<svg class="tp-dolby-prefix-icon" width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0.714233 1.14282C0.714233 0.590537 1.16195 0.142822 1.71423 0.142822H20.2857C20.8379 0.142822 21.2857 0.590537 21.2857 1.14282V12.8571C21.2857 13.4094 20.8379 13.8571 20.2857 13.8571H1.71423C1.16195 13.8571 0.714233 13.4094 0.714233 12.8571V1.14282ZM2.42852 1.85711H4.99995C7.84027 1.85711 10.1428 4.15965 10.1428 6.99997C10.1428 9.84028 7.84027 12.1428 4.99995 12.1428H2.42852V1.85711ZM16.9999 1.85711C14.1596 1.85711 11.8571 4.15965 11.8571 6.99997C11.8571 9.84028 14.1596 12.1428 16.9999 12.1428H19.5714V1.85711H16.9999Z" fill="currentColor"/>
</svg>`,hdrOptionIcon=`<svg class="tp-hdr-prefix-icon" width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0 14.4449L0.02931 12.2882L8.90291 1.4655H0.271117V0H12L0 14.4449Z" fill="currentColor"/>
<path d="M11.8315 15.7615H0.102661L11.7925 1.72937L11.7778 4.04974L3.19975 14.296H11.8315V15.7615Z" fill="currentColor"/>
<path d="M11.9 12.0219H8.03349L11.9 7.40312V5.12915L4.9364 13.4874H11.9V12.0219Z" fill="currentColor"/>
</svg>`,vipIcon='<div style="margin-left: 6px; padding: 0 2px;transform: scale(0.8);border: 1px solid #fc3f4c;border-radius: 2px;color: #fc3f4c;font-size: 12px;letter-spacing: 1px;line-height: 14px;text-align: center;">VIP</div>',SpecialResolutionPrefixIcons=(_a={},_a[PAID_FORMAT.DOLBY]=dolbyOptionIcon,_a[PAID_FORMAT.HDR10]=hdrOptionIcon,_a[PAID_FORMAT.SFR_HDR]=hdrOptionIcon,_a);function createFlexDiv(G){var U=document.createElement("div");return U.style.display="flex",G&&Object.keys(G).forEach(function(L){U.style[L]=G[L]}),U}var extInfoCgi="//h5vv6.video.qq.com/getextinfo";function requestVideoExtInfo(G){return __awaiter$6(this,void 0,void 0,function(){var U,L,Y,X,W,z,J,Z,ee,te;return __generator$6(this,function(re){switch(re.label){case 0:return U=G.vid,L=G.platform,Y=L===void 0?"11001":L,X={vid:U,platform:Y,h5flag:1,otype:"json"},W="".concat(extInfoCgi,"?").concat(urlTool$1.object2string(X,"&")),[4,netTool$1.jsonp(W)];case 1:return z=re.sent(),z.s!=="o"?[2,null]:z.em&&+z.em!=0?[2,null]:(J=z.limit,Z=z.td,ee=z.preview,te=z.fs,[2,{duration:+J==0?+Z:+ee,payLimit:+J,fileSize:te}])}})})}var EnvCache=function(){function G(){}return G.get=function(U){var L;return(L=getEnvData())===null||L===void 0?void 0:L[U]},G.set=function(U,L){var Y,X=(Y=getEnvData())!==null&&Y!==void 0?Y:{};X[U]=L,lsTool$1.setData(G.CacheEntryKey,JSON.stringify(X))},G.clear=function(){lsTool$1.setData(G.CacheEntryKey,"")},G.CacheEntryKey="__thumbplayer_env_cache",G}(),EnvCacheKeys;(function(G){G.drm="drm",G.hdr="hdr"})(EnvCacheKeys||(EnvCacheKeys={}));function getEnvData(){var G=lsTool$1.getData(EnvCache.CacheEntryKey);if(G!=="")try{var U=JSON.parse(G);if(Object.prototype.toString.call(U)==="[object Object]")return U;EnvCache.clear()}catch(L){}}function getSptAdSegParam(G){return G===void 0&&(G=!1),G?3:2}function getHevcLevelRequestValue(G,U){if(G===PLAY_CODEC.H264)return HEVC_LV_VALUE.NOT_SPT;if(G===PLAY_CODEC.H265)return HEVC_LV_VALUE.FHD;var L=U||{},Y=L.reqDefn,X=L.enableTxHevc,W=L.isChrome92,z=KernelFactory$3.kernelMap[KERNEL_NAME$1.WASM],J=(z==null?void 0:z.isEnvSupport)&&W;if(!J)return HEVC_LV_VALUE.NOT_SPT;var Z=[FORMAT.SD,FORMAT.HD];return X&&(typeof Y=="undefined"||Z.includes(Y))?HEVC_LV_VALUE.HD:HEVC_LV_VALUE.NOT_SPT}function getDrmRequestValue(){return __awaiter$6(this,void 0,void 0,function(){var G,U,L,Y;return __generator$6(this,function(X){switch(X.label){case 0:return G=EnvCache.get(EnvCacheKeys.drm),typeof G=="number"?[2,G]:(U=window.WebAssembly?DRM_VALUE.CHACHA:DRM_VALUE.NONE,videoTool$1.supportFairplay()?(U=U|DRM_VALUE.FAIR_PLAY,[3,3]):[3,1]);case 1:return[4,videoTool$1.supportWidevine()];case 2:X.sent()&&(L=parseInt(uaTool$1.browser.version.split(".")[0],10),Y=L<89,U=U|(Y?DRM_VALUE.NONE:DRM_VALUE.WIDEVINE)),X.label=3;case 3:return EnvCache.set(EnvCacheKeys.drm,U),[2,U]}})})}function getPaidFormatParam(G){var U={spsfrhdr:0,spvideo:0,spaudio:0,defnpayver:0};if(G.indexOf(PAID_FORMAT.FHD)>-1&&(U.defnpayver|=1),G.indexOf(PAID_FORMAT.UHD)>-1,uaTool$1.browser.safari&&!uaTool$1.mobile){G.indexOf(PAID_FORMAT.DOLBY)>-1&&videoTool$1.isDolbyAtomsSupported()&&videoTool$1.isDolbyVisionSupported()&&(U.spaudio|=4,U.spvideo|=16,U.defnpayver|=4);var L=getIsHDRSupported();G.indexOf(PAID_FORMAT.HDR10)>-1&&L&&(U.spvideo|=4,U.defnpayver|=4),G.indexOf(PAID_FORMAT.SFR_HDR)>-1&&L&&(U.spvideo|=4,U.spaudio|=64,U.spsfrhdr=100,U.defnpayver|=4)}return U}function getBuiltInVideoReqInfoParam(G,U,L){return __awaiter$6(this,void 0,void 0,function(){var Y,X,W,z,J,Z,ee,te,re,ie,ne;return __generator$6(this,function(oe){switch(oe.label){case 0:return Y=G.businessConfig,X=G.type,W={guid:L(COMMON_DATA_KEY.guid),platform:Y.platform,sdtfrom:Y.sdtfrom,appVer:L(COMMON_DATA_KEY.appVer)},z=L(PersistedUserSettings.definition),z&&(W.defn=z),J=U,Z=J.drm,typeof Z!="undefined"?[3,4]:uaTool$1.mobile?[3,2]:[4,getDrmRequestValue()];case 1:return ee=oe.sent(),[3,3];case 2:ee=DRM_VALUE.NONE,oe.label=3;case 3:return Z=ee,[3,4];case 4:return X===PLAY_MODE$1.LIVE?(W.livedrm=Z,W.playbackdrm=Z,W.livepid=(U==null?void 0:U.livepid)||"",W.defauto=1):(uaTool$1.mobile||(W.sphls=2),W.spvvpay=1,W.drm=Z,W.spadseg=getSptAdSegParam(!0),te=L(SUPER_DATA_KEY.getinfoAdInfo),te&&(W.adsid=te.adsid||"",W.adpinfo=te.adpinfo||"")),re=getHevcLevelRequestValue(J.playCodec,{enableTxHevc:G.enableTxHevc,reqDefn:W.defn,isChrome92:uaTool$1.browser.chrome&&comTool$1.compareVersion(uaTool$1.browser.chrome.version,"92.0")>=0}),re!==void 0?W.hevclv=re:delete W.hevclv,ie=G.supportedPaidFormat,ie&&X===PLAY_MODE$1.VOD&&(ne=getPaidFormatParam(ie),Object.assign(W,ne)),W.logintoken=TxAuth.readGetInfoToken(!0),[2,W]}})})}function getIsHDRSupported(){var G=EnvCache.get(EnvCacheKeys.hdr);return typeof G!="number"&&(G=videoTool$1.isHDRSupported(),EnvCache.set(EnvCacheKeys.hdr,G)),G}var ProxyHttpRequestor=function(G){__extends$b(U,G);function U(L){var Y=G.call(this)||this;return Y.playerConfig=L,Y.destroyed=!1,Y.logger=new Logger$1(Y.playerConfig.instanceId,"ProxyHttp"),Y}return U.prototype.request=function(L,Y,X){return __awaiter$6(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$6(this,function(te){switch(te.label){case 0:W=__assign$a(__assign$a({},X||{}),DEFAULT_CONFIG).retryCount,z={},L&&Object.assign(L,TxAuth.readAdToken()),z.reqParams=this.getRequestParams(L,Y),this.logger.log("proxyhttp reqParams(ad)",jsonTool$1.safelyStringify(L)),this.logger.log("proxyhttp reqParams(vinfo)",jsonTool$1.safelyStringify(Y)),J=0,te.label=1;case 1:if(!(J<W+1))return[3,7];te.label=2;case 2:return te.trys.push([2,4,,5]),z.reqPath=this.getRequestUrl(J),this.logger.log("proxyhttp request start, num=".concat(J,", url=").concat(z.reqPath)),[4,netTool$1.xhr({responseType:"text",timeout:8e3,withCredentials:!0,method:"post",url:z.reqPath,retryCount:0,body:JSON.stringify(z.reqParams)})];case 3:return Z=te.sent(),z.resData=JSON.parse(Z.data),[3,5];case 4:return ee=te.sent(),this.logger.log("proxyhttp(num=".concat(J,") request err:"),ee),z.error=null,[3,5];case 5:if(this.destroyed)return[2,new Promise(function(){})];if(z.alreadyRetryCount=J,z.resData)return[3,7];te.label=6;case 6:return J++,[3,1];case 7:return this.parseResponseData(z),[2,z]}})})},U.prototype.destroy=function(){this.destroyed=!0,this.logger=null},U.prototype.getRequestUrl=function(L){if(this.playerConfig.proxyHttpPath)return this.playerConfig.proxyHttpPath;var Y=PROXY_HTTP_PATH.COMMON,X=Y[L%Y.length];return X},U.prototype.getRequestParams=function(L,Y){var X=Y?urlTool$1.convertUrlParam(Y):null,W=null,z=null;L!=null&&L.newAdParam?(W=L.adparam?urlTool$1.convertUrlParam(L.adparam):null,z=JSON.stringify(L.newAdParam)):W=L?urlTool$1.convertUrlParam(L):null;var J=z?{newAdParam:z,adparam:W}:{adparam:W};if(W&&X)return __assign$a({buid:"vinfoad",vinfoparam:X},J);if(W)return __assign$a({buid:"onlyad"},J);if(X)return{buid:"onlyvinfo",vinfoparam:X}},U.prototype.parseResponseData=function(L){var Y,X;if(!L.resData){L.error={code:PROXY_HTTP_CODE.NET};return}if(L.resData.errCode!==0){L.error={code:PROXY_HTTP_CODE.RES_CODE,message:"\u64AD\u653E\u540E\u53F0\u8FD4\u56DE\u9519\u8BEF\u7801\uFF08".concat(L.resData.errCode,")")};return}if(L.parseData={},L.resData.ad){this.logger.log("proxyhttp result(ad): ",(Y=L.resData)===null||Y===void 0?void 0:Y.ad);try{L.parseData.ad=JSON.parse(L.resData.ad)}catch(W){this.logger.warn("can not parse ad data, res=".concat(L.resData.ad))}}if(L.resData.vinfo){this.logger.log("proxyhttp result(vinfo): ",(X=L.resData)===null||X===void 0?void 0:X.vinfo);try{L.parseData.vinfo=JSON.parse(L.resData.vinfo)}catch(W){this.logger.warn("can not parse vinfo data, res=".concat(L.resData.vinfo))}}},U}(s$3),envVals=getEnvVals(),adInitDefer,logMethodCall=logMethodCallDecoratorCreator$1("SuperPlayer"),SuperPlayer=function(G){__extends$b(U,G);function U(L){var Y=this,X=getSuperConfig(L),W=X.superPlayerConfig,z=X.lazyPlugins;Y=G.call(this,W)||this,Y.type=PLAY_MODE$1.VOD,Y.lazyPlugins=[],Y.videoLoadParamModifier=function(ie){var ne;return!(!((ne=Y.removedAdRange)===null||ne===void 0)&&ne.length)||Y.config.keepOriginalStartTime?ie:__assign$a(__assign$a({},ie),{startTime:Y.getVVIPOffsetTime(ie.startTime)})},Y.logger=new Logger$1(Y.config.instanceId,"SuperPlayer"),Y.log("new SuperPlayer(), input config=",jsonTool$1.safelyStringify(L));var J=L.mode,Z=J===void 0?PLAY_MODE$1.VOD:J,ee=L.type,te=L.enableDegradeOnLowPerformance,re=te===void 0?!0:te;return Y.lazyPlugins=z,Y.type=ee||Z,Y.adLogic=new AdLogic(Y,Y.corePlayer),re&&(Y.degradeLogic=new DegradeLogic(Y)),Y.previewLogic=new PreviewLogic(Y),Y.posterLogic=new PosterLogic(Y),Y.createVideoReqInfoPlugin(),Y.writeGlobalCommonKvs(),Y.initPlugins(),Y.initInnerEvts(),Y.reqExtInfoOnMobile(),Y.setupRemovedAdRange(),getDebugModeFromUrl()&&(U._instances[Y.config.instanceId]=Y),(L.videoId||L.adInitConfig)&&Y.loadAdPlugin(),Y}return Object.defineProperty(U.prototype,"vinfo",{get:function(){return this.currentVideoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"ctrlbarPlugin",{get:function(){return this.plugins[CtrlbarPluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"tipsPlugin",{get:function(){return this.plugins[TipsPluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"loadingPlugin",{get:function(){return this.plugins[UILoadingPlugin.pluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"errorPagePlugin",{get:function(){return this.plugins[ErrorPagePluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"posterPlugin",{get:function(){return this.plugins[PosterPluginName]},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"config",{get:function(){return this.corePlayer.config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"previewDuration",{get:function(){return this.previewLogic.previewDuration},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"core",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"coreConfig",{get:function(){return this.config},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"getinfoPlugin",{get:function(){return this.videoReqInfoPlugin},enumerable:!1,configurable:!0}),U.prototype.log=function(){for(var L,Y=[],X=0;X<arguments.length;X++)Y[X]=arguments[X];(L=this.logger).log.apply(L,Y)},Object.defineProperty(U.prototype,"videoSize",{get:function(){var L;return this.videoSizeFromGetInfo||((L=this._kernel)===null||L===void 0?void 0:L.videoSize)||{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"cnlid",{get:function(){return this.config.type===PLAY_MODE$1.LIVE?this.vid:""},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){var L,Y,X,W,z,J;return(L=this.adLogic)===null||L===void 0||L.destroy(),this.adLogic=null,(Y=this.degradeLogic)===null||Y===void 0||Y.destroy(),this.degradeLogic=null,(X=this.previewLogic)===null||X===void 0||X.destroy(),this.previewLogic=null,(W=this.posterLogic)===null||W===void 0||W.destroy(),this.posterLogic=null,(z=this.proxyHttpRequestor)===null||z===void 0||z.destroy(),this.proxyHttpRequestor=null,((J=this.config)===null||J===void 0?void 0:J.instanceId)&&U._instances[this.config.instanceId]&&delete U._instances[this.config.instanceId],clearTimeout(this.mouseMoveTimerSuperPlayer),G.prototype.destroy.call(this)},U.prototype.play=function(L,Y){var X,W,z,J;return __awaiter$6(this,void 0,void 0,function(){var Z,ee,ee,te,re,ie,ne,oe,se,ae,le;return __generator$6(this,function(ue){switch(ue.label){case 0:return L?(Z=L,this.replayConfig=L,checkParams(this.type,"play",Z),typeof L=="string"&&(this.type===PLAY_MODE$1.LIVE?(ee=!((X=this.currentPlayItem)===null||X===void 0)&&X.cnlid?this.currentPlayItem:{},Z=__assign$a(__assign$a({},ee),{cnlid:L})):(ee=!((W=this.currentPlayItem)===null||W===void 0)&&W.vid?this.currentPlayItem:{},Z=__assign$a(__assign$a({},ee),{vid:L}))),(z=this.loadingPlugin)===null||z===void 0||z.show(),te=(J=this.ctrlbarPlugin)===null||J===void 0?void 0:J.instances.CenterBtn,te&&te.hideEl(te.playBtn),re=Z,ie=re.vid,ne=re.cnlid,oe=re.livepid,se=this.isH5PlayParam(Y)?Y:{videoLoadParam:Y},this.currentPlayItem=ie||ne||Z,this.playtimeLimiter.clearAllConfig(),this.getinfoPlugin&&(ie||ne)?(ae=this,[4,getBuiltInVideoReqInfoParam(this.config,Z,this.getCommonKv.bind(this))]):[3,3]):[2,this.playByInitConfig()];case 1:return ae.buildinVideoReqInfoParam=ue.sent(),se.videoReqInfoParam=__assign$a(__assign$a({},this.buildinVideoReqInfoParam),se.videoReqInfoParam),[4,this.loadAdPlugin()];case 2:return ue.sent(),ne?(se.videoReqInfoParam.cnlid=ne,this.getPlugin(LivepollPlugin.pluginName).livepid=oe,this.setCommonKv(COMMON_DATA_KEY.livepid,oe)):ie&&(se.videoReqInfoParam.vid=ie),[2,G.prototype.play.call(this,ie||ne,se)];case 3:return le=Z.levels,le&&this.setLevelOptions(le,Z.url),[2,G.prototype.play.call(this,Z,se)]}})})},U.prototype.replay=function(){var L,Y,X;(Y=(L=this.loadParam)===null||L===void 0?void 0:L.videoLoadParam)===null||Y===void 0||delete Y.startTime;var W=this.getCommonKv(COMMON_DATA_KEY.currentDefn);return this.vid&&W?this.play(this.replayConfig,__assign$a(__assign$a({},this.loadParam),{videoReqInfoParam:__assign$a(__assign$a({},(X=this.loadParam)===null||X===void 0?void 0:X.videoReqInfoParam),{defn:W})})):this.play(this.replayConfig,this.loadParam)},U.prototype.load=function(L,Y){return __awaiter$6(this,void 0,void 0,function(){var X,W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:return L?(this.replayConfig=L,checkParams(this.type,"load",L),X=typeof L=="string"?L:L==null?void 0:L.vid,W=this.isH5PlayParam(Y)?Y:{videoLoadParam:Y},this.currentPlayItem=X,this.playtimeLimiter.clearAllConfig(),this.getinfoPlugin&&X?(z=this,[4,getBuiltInVideoReqInfoParam(this.config,L,this.getCommonKv.bind(this))]):[3,3]):[2,G.prototype.load.call(this)];case 1:return z.buildinVideoReqInfoParam=Z.sent(),W.videoReqInfoParam=__assign$a(__assign$a({},this.buildinVideoReqInfoParam),W==null?void 0:W.videoReqInfoParam),[4,this.loadAdPlugin()];case 2:return Z.sent(),[2,G.prototype.load.call(this,X,W)];case 3:return J=L==null?void 0:L.levels,J&&this.setLevelOptions(J,L==null?void 0:L.url),[2,G.prototype.load.call(this,L,W)]}})})},U.prototype.seek=function(L){return!uaTool$1.mobile&&this.previewDuration!==NO_PREVIEW_FLAG?G.prototype.seek.call(this,Math.min(L,this.previewDuration-1)):G.prototype.seek.call(this,L)},U.prototype.setLevel=function(L,Y){return Y===void 0&&(Y={}),__awaiter$6(this,void 0,void 0,function(){var X,W,z,J,Z,ee,te,re=this;return __generator$6(this,function(ie){return typeof L!="string"?[2,Promise.reject("setLevel received illegal parameter")]:this.getinfoPlugin&&this.vid?(this.state===VIDEO_STATE$1.PAUSE&&this.type===PLAY_MODE$1.VOD&&this.play(),X=this.getCommonKv(COMMON_DATA_KEY.currentDefn),Y.userTrigger&&this.setCommonKv(PersistedUserSettings.definition,L),this.buildinVideoReqInfoParam.flowid=this.getCommonKv(COMMON_DATA_KEY.flowid),W=__assign$a(__assign$a({},this.buildinVideoReqInfoParam),{defn:L,logintoken:TxAuth.readGetInfoToken(!0)}),z=__assign$a(__assign$a({},W),{defauto:Y.userTrigger?0:1}),J=__assign$a({fhdswitch:Y.userTrigger?1:0},W),[2,G.prototype.setLevel.call(this,this.type===PLAY_MODE$1.VOD?J:z).catch(function(ne){re.log(ne),re.ctrlbarPlugin.level=X,re.setCommonKv(COMMON_DATA_KEY.currentDefn,X)})]):(Z=this.getCommonKv(COMMON_DATA_KEY.currentDefnList),ee=Z==null?void 0:Z.find(function(ne){return ne.value===L}),ee?(te=ee.url,!te&&this.defnIdToUrl&&(te=this.defnIdToUrl(L),ee.url=te),te?(this.setCommonKv(COMMON_DATA_KEY.currentDefn,L),this.levelList=Z,this.level=ee.value,this.replayConfig.url=te,[2,G.prototype.setLevel.call(this,{url:te})]):[2,Promise.reject(new Error("definition must contains url"))]):[2,Promise.reject(new Error("no definition info"))])})})},U.prototype.getPlugin=function(L){return this.plugins[L]},U.prototype.closePayTipsCallback=function(L){var Y=getAdPlugin(this.config.instanceId);L==="ad"&&typeof(Y==null?void 0:Y.resumeAd)=="function"&&Y.resumeAd()},U.prototype.createPlugin=function(L,Y){Y===void 0&&(Y={});var X=Y.pluginName,W=X===void 0?L:X;W===AdPluginName?G.prototype.createPlugin.call(this,L,__assign$a(__assign$a({},Y),{requestProxyHttp:this.requestAdProxyHttp.bind(this)})):G.prototype.createPlugin.call(this,L,Y)},U.prototype.setAdConfig=function(L){return this.waitAdPlugin().then(function(Y){return Y.setConf(L)})},U.prototype.resizeAd=function(){return this.waitAdPlugin().then(function(L){var Y;return(Y=L.resizeAd)===null||Y===void 0?void 0:Y.call(L)})},U.prototype.hideAdBeforeResize=function(){return this.waitAdPlugin().then(function(L){var Y;return(Y=L.hideAdBeforeResize)===null||Y===void 0?void 0:Y.call(L)})},U.prototype.getVVIPOffsetTime=function(L,Y){Y===void 0&&(Y=!1);var X=this.removedAdRange;if(!(X!=null&&X.length))return L;if(Y)return this.getPlusAdOffsetTime(L);for(var W=0,z=0;z<X.length;z++){var J=X[z],Z=J.start,ee=J.end;if(Z>L)break;if(ee>L){W+=L-Z;break}else W+=ee-Z}return L-W},U.prototype.getPlusAdOffsetTime=function(L){return this.removedAdRange.reduce(function(Y,X){var W=X.start,z=X.end;return W<=Y&&(Y+=z-W),Y},L)},U.prototype.waitAdPlugin=function(){var L=this,Y,X=getAdPlugin((Y=this.config)===null||Y===void 0?void 0:Y.instanceId);return X?Promise.resolve(X):new Promise(function(W){L.pluginMsg.on("pluginsetup:".concat(AdPluginName),function(){W(getAdPlugin(L.config.instanceId))})})},U.prototype.playByInitConfig=function(){var L=this.config,Y=L.videoId,X=L.videoInitConfig,W=X===void 0?Y:X;return!W||this.currentPlayItem?G.prototype.play.call(this):this.play(W)},Object.defineProperty(U.prototype,"nodeBeforePreAd",{get:function(){return this.vid?this.getProxyHttpFlowNode(__assign$a(__assign$a({},this.loadParam),{adType:AD_TYPE.PRE})):null},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"nodeBeforePostAd",{get:function(){return this.vid?this.getProxyHttpFlowNode(__assign$a(__assign$a({},this.loadParam),{adType:AD_TYPE.POST})):null},enumerable:!1,configurable:!0}),U.prototype.prepareUsageData=function(){var L=G.prototype.prepareUsageData.call(this);return __assign$a(__assign$a({},L),{from:"2",channel:envVals.CHANNEL,platform:this.config.businessConfig.platform})},Object.defineProperty(U.prototype,"isCollected",{get:function(){return U._isCollected},set:function(L){U._isCollected=L},enumerable:!1,configurable:!0}),U.prototype.setupRemovedAdRange=function(){var L=this;this.on(H5_PLAY_EVENT.VIDEO_REQ_INFO_END,function(Y){var X=Y.data;if(!(X.code!==ErrorCode.SUC||L.config.type===PLAY_MODE$1.LIVE))try{var W=X.data,z=W.parseData,J=W.reqParams,Z=z.vitem,ee=Z.purevid,te=Z.dotinfo,re=te===void 0?"":te;ee&&J.vid!==ee&&re?L.removedAdRange=JSON.parse(re).dot_time.map(function(ie){return{start:+ie.start_time/1e3,end:+ie.end_time/1e3}}):L.removedAdRange=null}catch(ie){L.log("set ad range err,",ie),L.removedAdRange=null}})},U.prototype.createVideoReqInfoPlugin=function(){var L=H5Player.getPlugin(VideoReqInfoPluginName),Y=this.type===PLAY_MODE$1.VOD?GetInfoVod:GetInfoLive;if(L&&!this.isUsingDefaultGetinfoPlugin())return this.createPlugin(VideoReqInfoPluginName,this.config);L!==Y&&(H5Player.deregisterPlugin(VideoReqInfoPluginName),H5Player.registerPlugin(VideoReqInfoPluginName,Y)),this.createPlugin(VideoReqInfoPluginName,this.config)},U.prototype.initPlugins=function(){return __awaiter$6(this,void 0,void 0,function(){return __generator$6(this,function(L){switch(L.label){case 0:return this.config.lazyInitPlugins?(this.setCacheStatus(!0),this.setReplayType(0),[4,this.loadPlayerPlugins()]):[3,2];case 1:L.sent(),L.label=2;case 2:return this.initAdPlugin(),this.initErrorPage(),this.initGetinfoPlugin(),this.initTipsPlugin(),this.initCtrlbarPlugin(),this.initLivepoll(),this.initLoadingPlugin(),this.clearCache(),[2]}})})},U.prototype.initAdPlugin=function(){var L=this,Y=this.ctrlbarPlugin;!Y||(Y.on(CTRL_EVENTS.FAKE_FULLSCREEN_CHANGE,function(){return L.resizeAd()}),Y.on(CTRL_EVENTS.FULLSCREEN_CHANGE,function(){L.hideAdBeforeResize();var X=300;setTimeout(function(){L.resizeAd()},X)}))},U.prototype.reqExtInfoOnMobile=function(){return __awaiter$6(this,void 0,void 0,function(){var L,Y,X,W,z,J;return __generator$6(this,function(Z){switch(Z.label){case 0:return L=this.config,Y=L.videoId,X=L.enableGetExtInfo,W=X===void 0?!0:X,!W||!uaTool$1.mobile||typeof Y!="string"?[2]:(z=this.getCommonKv(COMMON_DATA_KEY.platform),[4,requestVideoExtInfo({vid:Y,platform:z})]);case 1:return J=Z.sent().duration,this.state===VIDEO_STATE$1.IDLE&&!this.played&&(this.ctrlbarPlugin.duration=J),[2]}})})},U.prototype.initLoadingPlugin=function(){var L=this;this.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_START,function(){var Y;return(Y=L.loadingPlugin)===null||Y===void 0?void 0:Y.show()}),this.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(){var Y;return(Y=L.loadingPlugin)===null||Y===void 0?void 0:Y.hide()}),this.on(H5_PLAY_EVENT.PLAY_SESSION_END,function(){var Y;return(Y=L.loadingPlugin)===null||Y===void 0?void 0:Y.hide()})},U.prototype.initLivepoll=function(){var L=this,Y=this.plugins[LivepollPlugin.pluginName];!Y||Y.on(LIVE_EVENTS.statusChange,function(X){var W,z=X.data;z.new===LIVE_STATUS.OVER&&((W=L.errorPagePlugin)===null||W===void 0||W.show({text:"\u76F4\u64AD\u5DF2\u7ED3\u675F",hideRefresh:!0}))})},U.prototype.isUsingCustomGetInfo=function(){var L;return!this.isUsingDefaultGetinfoPlugin()||!!(!((L=this.config.getinfoConfig)===null||L===void 0)&&L.path)},U.prototype.isUsingDefaultGetinfoPlugin=function(){var L=H5Player.getPlugin(VideoReqInfoPluginName);return L===GetInfoLive||L===GetInfoVod},U.prototype.shouldUseProxyHttpForGetInfo=function(){var L,Y=this.type===PLAY_MODE$1.VOD&&!this.isUsingCustomGetInfo();return this.type===PLAY_MODE$1.VOD&&this.setCommonKv(SUPER_DATA_KEY.vodCGIUsed,Y?"proxyhttp":(L=this.config.getinfoConfig)===null||L===void 0?void 0:L.path),Y},U.prototype.initErrorPage=function(){var L=this;!this.errorPagePlugin||this.errorPagePlugin.on(ErrorPagePluginEvents.REPORT_LOG,function(){L.offlineLog.report(!0,"error-page:click").then(function(Y){var X,W=Y||{},z=W.status,J=W.msg;(X=L.tipsPlugin)===null||X===void 0||X.show(z?"\u65E5\u5FD7\u4E0A\u62A5\u6210\u529F":"\u65E5\u5FD7\u4E0A\u62A5\u5931\u8D25 ".concat(J))}).catch(function(Y){var X;(X=L.tipsPlugin)===null||X===void 0||X.show("\u65E5\u5FD7\u4E0A\u62A5\u5931\u8D25 ".concat(Y==null?void 0:Y.message))})})},U.prototype.initTipsPlugin=function(){var L=this;!this.tipsPlugin||this.on(H5_PLAY_EVENT.VIDEO_SETLEVEL_END,function(Y){var X,W,z=Y.data,J=L.getCommonKv(COMMON_DATA_KEY.currentDefn),Z=(W=(X=L.levelList)===null||X===void 0?void 0:X.find(function(te){return te.value===J}))===null||W===void 0?void 0:W.label,ee=L.getinfoCtx?L.getDefnNameById(J):Z;L.tipsPlugin.show(z.code!==ErrorCode.SUC?"".concat(z.message||"\u62B1\u6B49\uFF0C\u5207\u6362\u6E05\u6670\u5EA6\u5931\u8D25~"):"\u5DF2\u4E3A\u60A8\u5207\u6362\u5230\u6E05\u6670\u5EA6[".concat(ee,"]"))})},U.prototype.initGetinfoPlugin=function(){var L=this;this.pluginMsg.on(H5_EXT_EVENT.GETINFO_OVER,function(Y){var X,W,z,J=Y.data;if(!J.error){L.getinfoCtx=J;var Z=(W=(X=L.getinfoCtx)===null||X===void 0?void 0:X.parseData)===null||W===void 0?void 0:W.definitionList,ee=[],te="";Z&&(Z.forEach(function(re){var ie=re.name,ne=re.sl;ee.push(builtDefinitionOption(re,L.type===PLAY_MODE$1.LIVE,L.config.levelOptionDecorator)),ne===1&&(te=ie)}),L.setCommonKv(COMMON_DATA_KEY.currentDefnList,ee),L.setCommonKv(COMMON_DATA_KEY.currentDefn,te),L.levelList=ee,L.level=te,L.played||(z=L.ctrlbarPlugin)===null||z===void 0||z.setCompDisable("definition",!0))}})},U.prototype.initCtrlbarPlugin=function(){var L=this;if(!!this.ctrlbarPlugin){this.ctrlbarPlugin.level=this.getCommonKv(COMMON_DATA_KEY.currentDefn),this.ctrlbarPlugin.audio=this.getCommonKv(COMMON_DATA_KEY.currentAudioTrack),this.ctrlbarPlugin.lang=this.getCommonKv(COMMON_DATA_KEY.currentSubtitle),this.pluginMsg.on(H5_EXT_EVENT.DATASET_UPDATE,function(X){var W=X.data,z=W.key,J=W.newVal,Z=W.oldVal;if(J!==Z){var ee;switch(z){case COMMON_DATA_KEY.currentDefn:L.ctrlbarPlugin.level=J;break;case COMMON_DATA_KEY.currentDefnList:if((J==null?void 0:J.length)<=1)break;ee=[].concat(J),L.ctrlbarPlugin.levelOpts=ee;break}}}),this.ctrlbarPlugin.on(CTRL_EVENTS.SET_LEVEL,function(X){var W;if(!!L.checkCanSetLevel()){var z=X.data,J=z.label,Z=z.value,ee=L.getinfoCtx?L.getDefnNameById(Z):J;!ee||((W=L.tipsPlugin)===null||W===void 0||W.show({text:"\u6B63\u5728\u4E3A\u60A8\u5207\u6362\u6E05\u6670\u5EA6[".concat(ee,"]"),time:-1}),L.setLevel(Z,{userTrigger:!0}))}}),this.ctrlbarPlugin.on(CTRL_EVENTS.TEST_EVENT,function(){var X;(X=L.getPlugin(InfoPanelPluginName))===null||X===void 0||X.show()});var Y=5e3;this.container.addEventListener("mousemove",function(){clearTimeout(L.mouseMoveTimerSuperPlayer),L.mouseMoveTimerSuperPlayer=setTimeout(L.hideMouseOnSuperPlayer.bind(L),Y)})}},U.prototype.hideMouseOnSuperPlayer=function(){var L,Y;if(!!this.ctrlbarPlugin){var X=this.ctrlbarPlugin.instances.CtrlShow.isMouseHoverControl;this.config.autoHideMouse||((L=this.ctrlbarPlugin.instances.Fullscreen)===null||L===void 0?void 0:L.isFullScreen)&&this.state===VIDEO_STATE$1.PLAYING?X&&(this.container.style.cursor="auto"):((Y=this.ctrlbarPlugin.instances.FakeFullscreen)===null||Y===void 0?void 0:Y.isFullScreen)&&this.state===VIDEO_STATE$1.PLAYING&&!X&&(this.container.style.cursor="none")}},U.prototype.setLevelOptions=function(L,Y){var X,W=L.list,z=((X=W.find(function(J){return J.default||J.url===Y}))===null||X===void 0?void 0:X.value)||W[0].value;this.setCommonKv(COMMON_DATA_KEY.currentDefn,z),this.setCommonKv(COMMON_DATA_KEY.currentDefnList,W),this.levelList=W,this.level=z,this.defnIdToUrl=L.callback},U.prototype.isH5PlayParam=function(L){L===void 0&&(L={});var Y=L;return!!(Y.videoReqInfoParam||Y.videoLoadParam||Y.adParam||Y.playTimeLimit)},U.prototype.initInnerEvts=function(){var L=this;this.pluginMsg.on(H5_EXT_EVENT.GETINFO_OVER,function(Y){var X,W=Y.data,z=(W||{}).resData,J=(((X=z==null?void 0:z.vl)===null||X===void 0?void 0:X.vi)||[])[0];if(J){var Z=J.vw,ee=J.vh;L.videoSizeFromGetInfo={width:Z,height:ee}}}),uaTool$1.mobile&&this.on(H5_PLAY_EVENT.VIDEO_TIMEUPDATE,function(Y){var X=Y.data;if(L.previewDuration!==NO_PREVIEW_FLAG){var W=10;X.playtime>=L.previewDuration-W&&L.loadPostAd()}})},U.prototype.writeGlobalCommonKvs=function(){this.setCommonKv(COMMON_DATA_KEY.appVer,"3.5.57"),this.setCommonKv(this.config.businessConfig),this.writeLoginCommonKV()},U.prototype.getDefnNameById=function(L){var Y,X,W=(X=(Y=this.getinfoCtx)===null||Y===void 0?void 0:Y.parseData)===null||X===void 0?void 0:X.definitionList.find(function(re){return re.name===L});if(W){var z=formatDefnName(W.cname,this.type===PLAY_MODE$1.LIVE),J=z[0],Z=J===void 0?"":J,ee=z[1],te=ee===void 0?"":ee;return"".concat(te," ").concat(Z).trim()}return""},U.prototype.requestAdProxyHttp=function(L,Y){var X;return __awaiter$6(this,void 0,void 0,function(){var W,z,J,Z,ee;return __generator$6(this,function(te){switch(te.label){case 0:if(W=new ProxyHttpRequestor(this.config),z=getAdPlugin(this.config.instanceId),!z)return[2];J=z.getAdParams(__assign$a(__assign$a({},Y),{vid:this.vid,adType:L})),te.label=1;case 1:return te.trys.push([1,3,,4]),[4,W.request(J,null)];case 2:return Z=te.sent(),[3,4];case 3:return ee=te.sent(),this.log("proxyhttp request err: ",ee),[3,4];case 4:return!((X=Z==null?void 0:Z.parseData)===null||X===void 0)&&X.ad&&z.setAdInfo(Z.parseData.ad),[2,Z]}})})},U.prototype.requestProxyHttp=function(L,Y,X){var W,z,J,Z;return __awaiter$6(this,void 0,void 0,function(){var ee,te,re,ie,ne,oe;return __generator$6(this,function(se){switch(se.label){case 0:return(W=this.proxyHttpRequestor)===null||W===void 0||W.destroy(),this.proxyHttpRequestor=new ProxyHttpRequestor(this.config),re=getAdPlugin(this.config.instanceId),typeof(re==null?void 0:re.getAdParams)=="function"&&(ee=re.getAdParams(__assign$a(__assign$a({},Y),{vid:this.vid,adType:L}))),typeof((z=this.videoReqInfoPlugin)===null||z===void 0?void 0:z.getReqParams)!="function"?[3,2]:[4,this.getinfoPlugin.getReqParams(this.vid,__assign$a(__assign$a({},X),{flowid:this.getCommonKv(COMMON_DATA_KEY.flowid)}))];case 1:ie=se.sent(),te=ie.reqParams,te.otype="ojson",se.label=2;case 2:return se.trys.push([2,4,,5]),[4,this.proxyHttpRequestor.request(ee,te)];case 3:return ne=se.sent(),[3,5];case 4:return oe=se.sent(),this.log("proxyhttp request err: ",oe),[3,5];case 5:return ne.error?(this.log("proxyhttp request err: ",ne.error),[2]):(!((J=ne==null?void 0:ne.parseData)===null||J===void 0)&&J.vinfo&&this.getinfoPlugin.setVideoInfo(this.vid,ne.parseData.vinfo),!((Z=ne==null?void 0:ne.parseData)===null||Z===void 0)&&Z.ad&&getAdPlugin(this.config.instanceId).setAdInfo(ne.parseData.ad),[2])}})})},U.prototype.degradeCodec=function(){var L;if(!!this.videoReqParam){var Y=(this.currentPlayItem[0]||{}).url;Y||(L=this.degradeLogic)===null||L===void 0||L.start(this.videoReqParam)}},U.prototype.stop=function(L){var Y;return(Y=this.proxyHttpRequestor)===null||Y===void 0||Y.destroy(),this.videoSizeFromGetInfo=null,G.prototype.stop.call(this,L)},U.prototype.emit=function(L,Y){return G.prototype.emit.call(this,L,Y)},U.prototype.on=function(L,Y,X){return G.prototype.on.call(this,L,Y,X)},U.prototype.once=function(L,Y){return G.prototype.once.call(this,L,Y)},U.prototype.off=function(L,Y){return G.prototype.off.call(this,L,Y)},U.prototype.listeners=function(L){return G.prototype.listeners.call(this,L)},U.prototype.listenerCount=function(L){return G.prototype.listenerCount.call(this,L)},U.prototype.writeLoginCommonKV=function(){var L,Y,X,W=function(te){return cookieTool$1.get(te)},z=TxAuth.raw();this.setCommonKv((L={},L[COMMON_DATA_KEY.hc_main_login]=z.main_login,L[COMMON_DATA_KEY.hc_vuserid]=z.vuserid||W("vuserid"),L[COMMON_DATA_KEY.hc_openid]=z.openid,L[COMMON_DATA_KEY.hc_appid]=z.appid,L[COMMON_DATA_KEY.hc_access_token]=z.access_token,L));var J=z.main_login==="qq",Z=(X=W("luin")||W("uin"))===null||X===void 0?void 0:X.replace(/\D/g,"").replace(/^0+/,"");this.setCommonKv((Y={},Y[COMMON_DATA_KEY.loginid]=J?Z:W("openid"),Y[COMMON_DATA_KEY.loginex]=J?W("openid"):Z,Y));var ee={qq:1,wx:2};this.setCommonKv(COMMON_DATA_KEY.logintype,ee[z.main_login]||0),this.setCommonKv(COMMON_DATA_KEY.hc_vuession,J?W("vqq_vusession"):cookieTool$1.get("vusession"))},U.prototype.getProxyHttpFlowNode=function(L){var Y=this,X=L.adParam,W=L.videoReqInfoParam,z=L.adType,J=function(){return Y.shouldUseProxyHttpForGetInfo()?Y.requestProxyHttp(AD_TYPE.PRE,X,W):Y.requestAdProxyHttp(AD_TYPE.PRE,X)},Z=function(){return!uaTool$1.mobile&&Y.previewLogic.previewDuration!==NO_PREVIEW_FLAG?Promise.resolve():Y.requestAdProxyHttp(AD_TYPE.POST,X)},ee=z===AD_TYPE.PRE?J:Z,te=function(re){__extends$b(ie,re);function ie(){return re!==null&&re.apply(this,arguments)||this}return ie.prototype.getName=function(){return"ProxyHttpFlowNode"},ie.prototype.start=function(){return __awaiter$6(this,void 0,void 0,function(){var ne=this;return __generator$6(this,function(oe){switch(oe.label){case 0:return this.isPreload=!1,this.loadDefer?[4,this.loadDefer]:[3,2];case 1:return oe.sent(),this.emit(FLOW_NODE_EVENT.END),[3,3];case 2:this.request().then(function(){ne.emit(FLOW_NODE_EVENT.END)}),oe.label=3;case 3:return[2]}})})},ie.prototype.preload=function(){var ne=this;return this.isPreload=!0,this.loadDefer=this.request().then(function(){ne.emit(FLOW_NODE_EVENT.PRELOAD,{forcePreload:z===AD_TYPE.PRE})}),this.loadDefer},ie.prototype.request=function(){var ne=this;return ee().catch(function(oe){ne.emit(FLOW_NODE_EVENT.ABORT,oe)})},ie}(BaseFlowNode);return new te({flowid:this.getCommonKv(COMMON_DATA_KEY.flowid)})},U.prototype.loadAdPlugin=function(){var L=this,Y=this.config.enableCreativePlugin,X=Y===void 0?!0:Y;if(!X||envVals.LOCAL_DEV||isInDomainWhiteList)return Promise.resolve();var W=getAdInitConfig(this.config);if(adInitDefer)return adInitDefer.then(function(){!getAdPlugin(L.config.instanceId)&&H5Player.getPlugin(AdPluginName)&&L.createPlugin(AdPluginName,W)});var z=getIsOfficialScenes()&&this.config.adVersion?this.config.adVersion:adVersion,J="https://vm.gtimg.cn/thumbplayer/creative/".concat(z,"/creative-player-").concat(uaTool$1.mobile?"m":"v",".js");return adInitDefer=this.loadPlugin({url:J,globalName:adGlobalName,pluginName:AdPluginName,timeout:adScriptMaxLoadTime,config:W,crossOrigin:"anonymous"}).catch(function(Z){L.log("adPlugin load fail. ".concat(Z==null?void 0:Z.message))}),adInitDefer},U.prototype.loadPlayerPlugins=function(L){return L===void 0&&(L=2),__awaiter$6(this,void 0,void 0,function(){var Y,X,W;return __generator$6(this,function(z){switch(z.label){case 0:if(L<=0||!this.lazyPlugins.length)return[2];if(Y=this.lazyPlugins.map(function(J){return typeof J=="string"?J:J[0]}),X=H5Player.getPlugins(Y)||{},Object.keys(X).length===Y.length)return[2];z.label=1;case 1:return z.trys.push([1,3,,4]),[4,domTool$1.loadScript(PLUGINS_URL,void 0,1e4)];case 2:return z.sent(),[2,this.createPlugins(this.lazyPlugins)];case 3:return W=z.sent(),this.log("super-player-plugins load fail. ".concat(W==null?void 0:W.message)),[3,4];case 4:return[4,this.loadPlayerPlugins(L-1)];case 5:return z.sent(),[2]}})})},U._instances={},__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object,Object]),__metadata$7("design:returntype",Promise)],U.prototype,"play",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[]),__metadata$7("design:returntype",void 0)],U.prototype,"replay",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object,Object]),__metadata$7("design:returntype",Promise)],U.prototype,"load",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Number]),__metadata$7("design:returntype",void 0)],U.prototype,"seek",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String,Object]),__metadata$7("design:returntype",Promise)],U.prototype,"setLevel",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String]),__metadata$7("design:returntype",void 0)],U.prototype,"closePayTipsCallback",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String,Object]),__metadata$7("design:returntype",void 0)],U.prototype,"createPlugin",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Object]),__metadata$7("design:returntype",void 0)],U.prototype,"setAdConfig",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[Number,Object]),__metadata$7("design:returntype",void 0)],U.prototype,"getVVIPOffsetTime",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[]),__metadata$7("design:returntype",void 0)],U.prototype,"degradeCodec",null),__decorate$7([logMethodCall,__metadata$7("design:type",Function),__metadata$7("design:paramtypes",[String]),__metadata$7("design:returntype",void 0)],U.prototype,"stop",null),U}(H5Player);window.SuperPlayer=SuperPlayer;bindExports(SuperPlayer);function _assertThisInitialized(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function _inheritsLoose(G,U){G.prototype=Object.create(U.prototype),G.prototype.constructor=G,G.__proto__=U}/*!
 * GSAP 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function G(U){return typeof U=="string"},_isFunction=function G(U){return typeof U=="function"},_isNumber=function G(U){return typeof U=="number"},_isUndefined=function G(U){return typeof U=="undefined"},_isObject=function G(U){return typeof U=="object"},_isNotFalse=function G(U){return U!==!1},_windowExists$1=function G(){return typeof window!="undefined"},_isFuncOrString=function G(U){return _isFunction(U)||_isString(U)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function G(U){return(_installScope=_merge(U,_globals))&&gsap},_missingPlugin=function G(U,L){return console.warn("Invalid property",U,"set to",L,"Missing plugin? gsap.registerPlugin()")},_warn=function G(U,L){return!L&&console.warn(U)},_addGlobal=function G(U,L){return U&&(_globals[U]=L)&&_installScope&&(_installScope[U]=L)||_globals},_emptyFunc=function G(){return 0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function G(U){var L=U[0],Y,X;if(_isObject(L)||_isFunction(L)||(U=[U]),!(Y=(L._gsap||{}).harness)){for(X=_harnessPlugins.length;X--&&!_harnessPlugins[X].targetTest(L););Y=_harnessPlugins[X]}for(X=U.length;X--;)U[X]&&(U[X]._gsap||(U[X]._gsap=new GSCache(U[X],Y)))||U.splice(X,1);return U},_getCache=function G(U){return U._gsap||_harness(toArray(U))[0]._gsap},_getProperty=function G(U,L,Y){return(Y=U[L])&&_isFunction(Y)?U[L]():_isUndefined(Y)&&U.getAttribute&&U.getAttribute(L)||Y},_forEachName=function G(U,L){return(U=U.split(",")).forEach(L)||U},_round=function G(U){return Math.round(U*1e5)/1e5||0},_roundPrecise=function G(U){return Math.round(U*1e7)/1e7||0},_parseRelative=function G(U,L){var Y=L.charAt(0),X=parseFloat(L.substr(2));return U=parseFloat(U),Y==="+"?U+X:Y==="-"?U-X:Y==="*"?U*X:U/X},_arrayContainsAny=function G(U,L){for(var Y=L.length,X=0;U.indexOf(L[X])<0&&++X<Y;);return X<Y},_lazyRender=function G(){var U=_lazyTweens.length,L=_lazyTweens.slice(0),Y,X;for(_lazyLookup={},_lazyTweens.length=0,Y=0;Y<U;Y++)X=L[Y],X&&X._lazy&&(X.render(X._lazy[0],X._lazy[1],!0)._lazy=0)},_lazySafeRender=function G(U,L,Y,X){_lazyTweens.length&&_lazyRender(),U.render(L,Y,X),_lazyTweens.length&&_lazyRender()},_numericIfPossible=function G(U){var L=parseFloat(U);return(L||L===0)&&(U+"").match(_delimitedValueExp).length<2?L:_isString(U)?U.trim():U},_passThrough=function G(U){return U},_setDefaults=function G(U,L){for(var Y in L)Y in U||(U[Y]=L[Y]);return U},_setKeyframeDefaults=function G(U){return function(L,Y){for(var X in Y)X in L||X==="duration"&&U||X==="ease"||(L[X]=Y[X])}},_merge=function G(U,L){for(var Y in L)U[Y]=L[Y];return U},_mergeDeep=function G(U,L){for(var Y in L)Y!=="__proto__"&&Y!=="constructor"&&Y!=="prototype"&&(U[Y]=_isObject(L[Y])?G(U[Y]||(U[Y]={}),L[Y]):L[Y]);return U},_copyExcluding=function G(U,L){var Y={},X;for(X in U)X in L||(Y[X]=U[X]);return Y},_inheritDefaults=function G(U){var L=U.parent||_globalTimeline,Y=U.keyframes?_setKeyframeDefaults(_isArray(U.keyframes)):_setDefaults;if(_isNotFalse(U.inherit))for(;L;)Y(U,L.vars.defaults),L=L.parent||L._dp;return U},_arraysMatch=function G(U,L){for(var Y=U.length,X=Y===L.length;X&&Y--&&U[Y]===L[Y];);return Y<0},_addLinkedListItem=function G(U,L,Y,X,W){Y===void 0&&(Y="_first"),X===void 0&&(X="_last");var z=U[X],J;if(W)for(J=L[W];z&&z[W]>J;)z=z._prev;return z?(L._next=z._next,z._next=L):(L._next=U[Y],U[Y]=L),L._next?L._next._prev=L:U[X]=L,L._prev=z,L.parent=L._dp=U,L},_removeLinkedListItem=function G(U,L,Y,X){Y===void 0&&(Y="_first"),X===void 0&&(X="_last");var W=L._prev,z=L._next;W?W._next=z:U[Y]===L&&(U[Y]=z),z?z._prev=W:U[X]===L&&(U[X]=W),L._next=L._prev=L.parent=null},_removeFromParent=function G(U,L){U.parent&&(!L||U.parent.autoRemoveChildren)&&U.parent.remove(U),U._act=0},_uncache=function G(U,L){if(U&&(!L||L._end>U._dur||L._start<0))for(var Y=U;Y;)Y._dirty=1,Y=Y.parent;return U},_recacheAncestors=function G(U){for(var L=U.parent;L&&L.parent;)L._dirty=1,L.totalDuration(),L=L.parent;return U},_hasNoPausedAncestors=function G(U){return!U||U._ts&&G(U.parent)},_elapsedCycleDuration=function G(U){return U._repeat?_animationCycle(U._tTime,U=U.duration()+U._rDelay)*U:0},_animationCycle=function G(U,L){var Y=Math.floor(U/=L);return U&&Y===U?Y-1:Y},_parentToChildTotalTime=function G(U,L){return(U-L._start)*L._ts+(L._ts>=0?0:L._dirty?L.totalDuration():L._tDur)},_setEnd=function G(U){return U._end=_roundPrecise(U._start+(U._tDur/Math.abs(U._ts||U._rts||_tinyNum)||0))},_alignPlayhead=function G(U,L){var Y=U._dp;return Y&&Y.smoothChildTiming&&U._ts&&(U._start=_roundPrecise(Y._time-(U._ts>0?L/U._ts:((U._dirty?U.totalDuration():U._tDur)-L)/-U._ts)),_setEnd(U),Y._dirty||_uncache(Y,U)),U},_postAddChecks=function G(U,L){var Y;if((L._time||L._initted&&!L._dur)&&(Y=_parentToChildTotalTime(U.rawTime(),L),(!L._dur||_clamp(0,L.totalDuration(),Y)-L._tTime>_tinyNum)&&L.render(Y,!0)),_uncache(U,L)._dp&&U._initted&&U._time>=U._dur&&U._ts){if(U._dur<U.duration())for(Y=U;Y._dp;)Y.rawTime()>=0&&Y.totalTime(Y._tTime),Y=Y._dp;U._zTime=-_tinyNum}},_addToTimeline=function G(U,L,Y,X){return L.parent&&_removeFromParent(L),L._start=_roundPrecise((_isNumber(Y)?Y:Y||U!==_globalTimeline?_parsePosition(U,Y,L):U._time)+L._delay),L._end=_roundPrecise(L._start+(L.totalDuration()/Math.abs(L.timeScale())||0)),_addLinkedListItem(U,L,"_first","_last",U._sort?"_start":0),_isFromOrFromStart(L)||(U._recent=L),X||_postAddChecks(U,L),U},_scrollTrigger=function G(U,L){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",L))&&_globals.ScrollTrigger.create(L,U)},_attemptInitTween=function G(U,L,Y,X){if(_initTween(U,L),!U._initted)return 1;if(!Y&&U._pt&&(U._dur&&U.vars.lazy!==!1||!U._dur&&U.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(U),U._lazy=[L,X],1},_parentPlayheadIsBeforeStart=function G(U){var L=U.parent;return L&&L._ts&&L._initted&&!L._lock&&(L.rawTime()<0||G(L))},_isFromOrFromStart=function G(U){var L=U.data;return L==="isFromStart"||L==="isStart"},_renderZeroDurationTween=function G(U,L,Y,X){var W=U.ratio,z=L<0||!L&&(!U._start&&_parentPlayheadIsBeforeStart(U)&&!(!U._initted&&_isFromOrFromStart(U))||(U._ts<0||U._dp._ts<0)&&!_isFromOrFromStart(U))?0:1,J=U._rDelay,Z=0,ee,te,re;if(J&&U._repeat&&(Z=_clamp(0,U._tDur,L),te=_animationCycle(Z,J),U._yoyo&&te&1&&(z=1-z),te!==_animationCycle(U._tTime,J)&&(W=1-z,U.vars.repeatRefresh&&U._initted&&U.invalidate())),z!==W||X||U._zTime===_tinyNum||!L&&U._zTime){if(!U._initted&&_attemptInitTween(U,L,X,Y))return;for(re=U._zTime,U._zTime=L||(Y?_tinyNum:0),Y||(Y=L&&!re),U.ratio=z,U._from&&(z=1-z),U._time=0,U._tTime=Z,ee=U._pt;ee;)ee.r(z,ee.d),ee=ee._next;U._startAt&&L<0&&U._startAt.render(L,!0,!0),U._onUpdate&&!Y&&_callback(U,"onUpdate"),Z&&U._repeat&&!Y&&U.parent&&_callback(U,"onRepeat"),(L>=U._tDur||L<0)&&U.ratio===z&&(z&&_removeFromParent(U,1),Y||(_callback(U,z?"onComplete":"onReverseComplete",!0),U._prom&&U._prom()))}else U._zTime||(U._zTime=L)},_findNextPauseTween=function G(U,L,Y){var X;if(Y>L)for(X=U._first;X&&X._start<=Y;){if(X.data==="isPause"&&X._start>L)return X;X=X._next}else for(X=U._last;X&&X._start>=Y;){if(X.data==="isPause"&&X._start<L)return X;X=X._prev}},_setDuration=function G(U,L,Y,X){var W=U._repeat,z=_roundPrecise(L)||0,J=U._tTime/U._tDur;return J&&!X&&(U._time*=z/U._dur),U._dur=z,U._tDur=W?W<0?1e10:_roundPrecise(z*(W+1)+U._rDelay*W):z,J>0&&!X?_alignPlayhead(U,U._tTime=U._tDur*J):U.parent&&_setEnd(U),Y||_uncache(U.parent,U),U},_onUpdateTotalDuration=function G(U){return U instanceof Timeline?_uncache(U):_setDuration(U,U._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function G(U,L,Y){var X=U.labels,W=U._recent||_zeroPosition,z=U.duration()>=_bigNum$1?W.endTime(!1):U._dur,J,Z,ee;return _isString(L)&&(isNaN(L)||L in X)?(Z=L.charAt(0),ee=L.substr(-1)==="%",J=L.indexOf("="),Z==="<"||Z===">"?(J>=0&&(L=L.replace(/=/,"")),(Z==="<"?W._start:W.endTime(W._repeat>=0))+(parseFloat(L.substr(1))||0)*(ee?(J<0?W:Y).totalDuration()/100:1)):J<0?(L in X||(X[L]=z),X[L]):(Z=parseFloat(L.charAt(J-1)+L.substr(J+1)),ee&&Y&&(Z=Z/100*(_isArray(Y)?Y[0]:Y).totalDuration()),J>1?G(U,L.substr(0,J-1),Y)+Z:z+Z)):L==null?z:+L},_createTweenType=function G(U,L,Y){var X=_isNumber(L[1]),W=(X?2:1)+(U<2?0:1),z=L[W],J,Z;if(X&&(z.duration=L[1]),z.parent=Y,U){for(J=z,Z=Y;Z&&!("immediateRender"in J);)J=Z.vars.defaults||{},Z=_isNotFalse(Z.vars.inherit)&&Z.parent;z.immediateRender=_isNotFalse(J.immediateRender),U<2?z.runBackwards=1:z.startAt=L[W-1]}return new Tween(L[0],z,L[W+1])},_conditionalReturn=function G(U,L){return U||U===0?L(U):L},_clamp=function G(U,L,Y){return Y<U?U:Y>L?L:Y},getUnit=function G(U,L){return!_isString(U)||!(L=_unitExp.exec(U))?"":L[1]},clamp=function G(U,L,Y){return _conditionalReturn(Y,function(X){return _clamp(U,L,X)})},_slice=[].slice,_isArrayLike=function G(U,L){return U&&_isObject(U)&&"length"in U&&(!L&&!U.length||U.length-1 in U&&_isObject(U[0]))&&!U.nodeType&&U!==_win$1},_flatten=function G(U,L,Y){return Y===void 0&&(Y=[]),U.forEach(function(X){var W;return _isString(X)&&!L||_isArrayLike(X,1)?(W=Y).push.apply(W,toArray(X)):Y.push(X)})||Y},toArray=function G(U,L,Y){return _isString(U)&&!Y&&(_coreInitted||!_wake())?_slice.call((L||_doc$1).querySelectorAll(U),0):_isArray(U)?_flatten(U,Y):_isArrayLike(U)?_slice.call(U,0):U?[U]:[]},selector=function G(U){return U=toArray(U)[0]||_warn("Invalid scope")||{},function(L){var Y=U.current||U.nativeElement||U;return toArray(L,Y.querySelectorAll?Y:Y===U?_warn("Invalid scope")||_doc$1.createElement("div"):U)}},shuffle=function G(U){return U.sort(function(){return .5-Math.random()})},distribute=function G(U){if(_isFunction(U))return U;var L=_isObject(U)?U:{each:U},Y=_parseEase(L.ease),X=L.from||0,W=parseFloat(L.base)||0,z={},J=X>0&&X<1,Z=isNaN(X)||J,ee=L.axis,te=X,re=X;return _isString(X)?te=re={center:.5,edges:.5,end:1}[X]||0:!J&&Z&&(te=X[0],re=X[1]),function(ie,ne,oe){var se=(oe||L).length,ae=z[se],le,ue,ce,he,fe,de,_e,me,ve;if(!ae){if(ve=L.grid==="auto"?0:(L.grid||[1,_bigNum$1])[1],!ve){for(_e=-_bigNum$1;_e<(_e=oe[ve++].getBoundingClientRect().left)&&ve<se;);ve--}for(ae=z[se]=[],le=Z?Math.min(ve,se)*te-.5:X%ve,ue=ve===_bigNum$1?0:Z?se*re/ve-.5:X/ve|0,_e=0,me=_bigNum$1,de=0;de<se;de++)ce=de%ve-le,he=ue-(de/ve|0),ae[de]=fe=ee?Math.abs(ee==="y"?he:ce):_sqrt(ce*ce+he*he),fe>_e&&(_e=fe),fe<me&&(me=fe);X==="random"&&shuffle(ae),ae.max=_e-me,ae.min=me,ae.v=se=(parseFloat(L.amount)||parseFloat(L.each)*(ve>se?se-1:ee?ee==="y"?se/ve:ve:Math.max(ve,se/ve))||0)*(X==="edges"?-1:1),ae.b=se<0?W-se:W,ae.u=getUnit(L.amount||L.each)||0,Y=Y&&se<0?_invertEase(Y):Y}return se=(ae[ie]-ae.min)/ae.max||0,_roundPrecise(ae.b+(Y?Y(se):se)*ae.v)+ae.u}},_roundModifier=function G(U){var L=Math.pow(10,((U+"").split(".")[1]||"").length);return function(Y){var X=Math.round(parseFloat(Y)/U)*U*L;return(X-X%1)/L+(_isNumber(Y)?0:getUnit(Y))}},snap=function G(U,L){var Y=_isArray(U),X,W;return!Y&&_isObject(U)&&(X=Y=U.radius||_bigNum$1,U.values?(U=toArray(U.values),(W=!_isNumber(U[0]))&&(X*=X)):U=_roundModifier(U.increment)),_conditionalReturn(L,Y?_isFunction(U)?function(z){return W=U(z),Math.abs(W-z)<=X?W:z}:function(z){for(var J=parseFloat(W?z.x:z),Z=parseFloat(W?z.y:0),ee=_bigNum$1,te=0,re=U.length,ie,ne;re--;)W?(ie=U[re].x-J,ne=U[re].y-Z,ie=ie*ie+ne*ne):ie=Math.abs(U[re]-J),ie<ee&&(ee=ie,te=re);return te=!X||ee<=X?U[te]:z,W||te===z||_isNumber(z)?te:te+getUnit(z)}:_roundModifier(U))},random=function G(U,L,Y,X){return _conditionalReturn(_isArray(U)?!L:Y===!0?!!(Y=0):!X,function(){return _isArray(U)?U[~~(Math.random()*U.length)]:(Y=Y||1e-5)&&(X=Y<1?Math.pow(10,(Y+"").length-2):1)&&Math.floor(Math.round((U-Y/2+Math.random()*(L-U+Y*.99))/Y)*Y*X)/X})},pipe=function G(){for(var U=arguments.length,L=new Array(U),Y=0;Y<U;Y++)L[Y]=arguments[Y];return function(X){return L.reduce(function(W,z){return z(W)},X)}},unitize=function G(U,L){return function(Y){return U(parseFloat(Y))+(L||getUnit(Y))}},normalize=function G(U,L,Y){return mapRange(U,L,0,1,Y)},_wrapArray=function G(U,L,Y){return _conditionalReturn(Y,function(X){return U[~~L(X)]})},wrap=function G(U,L,Y){var X=L-U;return _isArray(U)?_wrapArray(U,G(0,U.length),L):_conditionalReturn(Y,function(W){return(X+(W-U)%X)%X+U})},wrapYoyo=function G(U,L,Y){var X=L-U,W=X*2;return _isArray(U)?_wrapArray(U,G(0,U.length-1),L):_conditionalReturn(Y,function(z){return z=(W+(z-U)%W)%W||0,U+(z>X?W-z:z)})},_replaceRandom=function G(U){for(var L=0,Y="",X,W,z,J;~(X=U.indexOf("random(",L));)z=U.indexOf(")",X),J=U.charAt(X+7)==="[",W=U.substr(X+7,z-X-7).match(J?_delimitedValueExp:_strictNumExp),Y+=U.substr(L,X-L)+random(J?W:+W[0],J?0:+W[1],+W[2]||1e-5),L=z+1;return Y+U.substr(L,U.length-L)},mapRange=function G(U,L,Y,X,W){var z=L-U,J=X-Y;return _conditionalReturn(W,function(Z){return Y+((Z-U)/z*J||0)})},interpolate=function G(U,L,Y,X){var W=isNaN(U+L)?0:function(ne){return(1-ne)*U+ne*L};if(!W){var z=_isString(U),J={},Z,ee,te,re,ie;if(Y===!0&&(X=1)&&(Y=null),z)U={p:U},L={p:L};else if(_isArray(U)&&!_isArray(L)){for(te=[],re=U.length,ie=re-2,ee=1;ee<re;ee++)te.push(G(U[ee-1],U[ee]));re--,W=function(oe){oe*=re;var se=Math.min(ie,~~oe);return te[se](oe-se)},Y=L}else X||(U=_merge(_isArray(U)?[]:{},U));if(!te){for(Z in L)_addPropTween.call(J,U,Z,"get",L[Z]);W=function(oe){return _renderPropTweens(oe,J)||(z?U.p:U)}}}return _conditionalReturn(Y,W)},_getLabelInDirection=function G(U,L,Y){var X=U.labels,W=_bigNum$1,z,J,Z;for(z in X)J=X[z]-L,J<0==!!Y&&J&&W>(J=Math.abs(J))&&(Z=z,W=J);return Z},_callback=function G(U,L,Y){var X=U.vars,W=X[L],z,J;if(!!W)return z=X[L+"Params"],J=X.callbackScope||U,Y&&_lazyTweens.length&&_lazyRender(),z?W.apply(J,z):W.call(J)},_interrupt=function G(U){return _removeFromParent(U),U.scrollTrigger&&U.scrollTrigger.kill(!1),U.progress()<1&&_callback(U,"onInterrupt"),U},_quickTween,_createPlugin=function G(U){U=!U.name&&U.default||U;var L=U.name,Y=_isFunction(U),X=L&&!Y&&U.init?function(){this._props=[]}:U,W={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},z={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),U!==X){if(_plugins[L])return;_setDefaults(X,_setDefaults(_copyExcluding(U,W),z)),_merge(X.prototype,_merge(W,_copyExcluding(U,z))),_plugins[X.prop=L]=X,U.targetTest&&(_harnessPlugins.push(X),_reservedProps[L]=1),L=(L==="css"?"CSS":L.charAt(0).toUpperCase()+L.substr(1))+"Plugin"}_addGlobal(L,X),U.register&&U.register(gsap,X,PropTween)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function G(U,L,Y){return U+=U<0?1:U>1?-1:0,(U*6<1?L+(Y-L)*U*6:U<.5?Y:U*3<2?L+(Y-L)*(2/3-U)*6:L)*_255+.5|0},splitColor=function G(U,L,Y){var X=U?_isNumber(U)?[U>>16,U>>8&_255,U&_255]:0:_colorLookup.black,W,z,J,Z,ee,te,re,ie,ne,oe;if(!X){if(U.substr(-1)===","&&(U=U.substr(0,U.length-1)),_colorLookup[U])X=_colorLookup[U];else if(U.charAt(0)==="#"){if(U.length<6&&(W=U.charAt(1),z=U.charAt(2),J=U.charAt(3),U="#"+W+W+z+z+J+J+(U.length===5?U.charAt(4)+U.charAt(4):"")),U.length===9)return X=parseInt(U.substr(1,6),16),[X>>16,X>>8&_255,X&_255,parseInt(U.substr(7),16)/255];U=parseInt(U.substr(1),16),X=[U>>16,U>>8&_255,U&_255]}else if(U.substr(0,3)==="hsl"){if(X=oe=U.match(_strictNumExp),!L)Z=+X[0]%360/360,ee=+X[1]/100,te=+X[2]/100,z=te<=.5?te*(ee+1):te+ee-te*ee,W=te*2-z,X.length>3&&(X[3]*=1),X[0]=_hue(Z+1/3,W,z),X[1]=_hue(Z,W,z),X[2]=_hue(Z-1/3,W,z);else if(~U.indexOf("="))return X=U.match(_numExp),Y&&X.length<4&&(X[3]=1),X}else X=U.match(_strictNumExp)||_colorLookup.transparent;X=X.map(Number)}return L&&!oe&&(W=X[0]/_255,z=X[1]/_255,J=X[2]/_255,re=Math.max(W,z,J),ie=Math.min(W,z,J),te=(re+ie)/2,re===ie?Z=ee=0:(ne=re-ie,ee=te>.5?ne/(2-re-ie):ne/(re+ie),Z=re===W?(z-J)/ne+(z<J?6:0):re===z?(J-W)/ne+2:(W-z)/ne+4,Z*=60),X[0]=~~(Z+.5),X[1]=~~(ee*100+.5),X[2]=~~(te*100+.5)),Y&&X.length<4&&(X[3]=1),X},_colorOrderData=function G(U){var L=[],Y=[],X=-1;return U.split(_colorExp).forEach(function(W){var z=W.match(_numWithUnitExp)||[];L.push.apply(L,z),Y.push(X+=z.length+1)}),L.c=Y,L},_formatColors=function G(U,L,Y){var X="",W=(U+X).match(_colorExp),z=L?"hsla(":"rgba(",J=0,Z,ee,te,re;if(!W)return U;if(W=W.map(function(ie){return(ie=splitColor(ie,L,1))&&z+(L?ie[0]+","+ie[1]+"%,"+ie[2]+"%,"+ie[3]:ie.join(","))+")"}),Y&&(te=_colorOrderData(U),Z=Y.c,Z.join(X)!==te.c.join(X)))for(ee=U.replace(_colorExp,"1").split(_numWithUnitExp),re=ee.length-1;J<re;J++)X+=ee[J]+(~Z.indexOf(J)?W.shift()||z+"0,0,0,0)":(te.length?te:W.length?W:Y).shift());if(!ee)for(ee=U.split(_colorExp),re=ee.length-1;J<re;J++)X+=ee[J]+W[J];return X+ee[re]},_colorExp=function(){var G="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",U;for(U in _colorLookup)G+="|"+U+"\\b";return new RegExp(G+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function G(U){var L=U.join(" "),Y;if(_colorExp.lastIndex=0,_colorExp.test(L))return Y=_hslExp.test(L),U[1]=_formatColors(U[1],Y),U[0]=_formatColors(U[0],Y,_colorOrderData(U[1])),!0},_tickerActive,_ticker=function(){var G=Date.now,U=500,L=33,Y=G(),X=Y,W=1e3/240,z=W,J=[],Z,ee,te,re,ie,ne,oe=function se(ae){var le=G()-X,ue=ae===!0,ce,he,fe,de;if(le>U&&(Y+=le-L),X+=le,fe=X-Y,ce=fe-z,(ce>0||ue)&&(de=++re.frame,ie=fe-re.time*1e3,re.time=fe=fe/1e3,z+=ce+(ce>=W?4:W-ce),he=1),ue||(Z=ee(se)),he)for(ne=0;ne<J.length;ne++)J[ne](fe,ie,de,ae)};return re={time:0,frame:0,tick:function(){oe(!0)},deltaRatio:function(ae){return ie/(1e3/(ae||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),te=_win$1.requestAnimationFrame),Z&&re.sleep(),ee=te||function(ae){return setTimeout(ae,z-re.time*1e3+1|0)},_tickerActive=1,oe(2))},sleep:function(){(te?_win$1.cancelAnimationFrame:clearTimeout)(Z),_tickerActive=0,ee=_emptyFunc},lagSmoothing:function(ae,le){U=ae||1/_tinyNum,L=Math.min(le,U,0)},fps:function(ae){W=1e3/(ae||240),z=re.time*1e3+W},add:function(ae,le,ue){var ce=le?function(he,fe,de,_e){ae(he,fe,de,_e),re.remove(ce)}:ae;return re.remove(ae),J[ue?"unshift":"push"](ce),_wake(),ce},remove:function(ae,le){~(le=J.indexOf(ae))&&J.splice(le,1)&&ne>=le&&ne--},_listeners:J},re}(),_wake=function G(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function G(U){for(var L={},Y=U.substr(1,U.length-3).split(":"),X=Y[0],W=1,z=Y.length,J,Z,ee;W<z;W++)Z=Y[W],J=W!==z-1?Z.lastIndexOf(","):Z.length,ee=Z.substr(0,J),L[X]=isNaN(ee)?ee.replace(_quotesExp,"").trim():+ee,X=Z.substr(J+1).trim();return L},_valueInParentheses=function G(U){var L=U.indexOf("(")+1,Y=U.indexOf(")"),X=U.indexOf("(",L);return U.substring(L,~X&&X<Y?U.indexOf(")",Y+1):Y)},_configEaseFromString=function G(U){var L=(U+"").split("("),Y=_easeMap[L[0]];return Y&&L.length>1&&Y.config?Y.config.apply(null,~U.indexOf("{")?[_parseObjectInString(L[1])]:_valueInParentheses(U).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(U)?_easeMap._CE("",U):Y},_invertEase=function G(U){return function(L){return 1-U(1-L)}},_propagateYoyoEase=function G(U,L){for(var Y=U._first,X;Y;)Y instanceof Timeline?G(Y,L):Y.vars.yoyoEase&&(!Y._yoyo||!Y._repeat)&&Y._yoyo!==L&&(Y.timeline?G(Y.timeline,L):(X=Y._ease,Y._ease=Y._yEase,Y._yEase=X,Y._yoyo=L)),Y=Y._next},_parseEase=function G(U,L){return U&&(_isFunction(U)?U:_easeMap[U]||_configEaseFromString(U))||L},_insertEase=function G(U,L,Y,X){Y===void 0&&(Y=function(Z){return 1-L(1-Z)}),X===void 0&&(X=function(Z){return Z<.5?L(Z*2)/2:1-L((1-Z)*2)/2});var W={easeIn:L,easeOut:Y,easeInOut:X},z;return _forEachName(U,function(J){_easeMap[J]=_globals[J]=W,_easeMap[z=J.toLowerCase()]=Y;for(var Z in W)_easeMap[z+(Z==="easeIn"?".in":Z==="easeOut"?".out":".inOut")]=_easeMap[J+"."+Z]=W[Z]}),W},_easeInOutFromOut=function G(U){return function(L){return L<.5?(1-U(1-L*2))/2:.5+U((L-.5)*2)/2}},_configElastic=function G(U,L,Y){var X=L>=1?L:1,W=(Y||(U?.3:.45))/(L<1?L:1),z=W/_2PI*(Math.asin(1/X)||0),J=function(te){return te===1?1:X*Math.pow(2,-10*te)*_sin((te-z)*W)+1},Z=U==="out"?J:U==="in"?function(ee){return 1-J(1-ee)}:_easeInOutFromOut(J);return W=_2PI/W,Z.config=function(ee,te){return G(U,ee,te)},Z},_configBack=function G(U,L){L===void 0&&(L=1.70158);var Y=function(z){return z?--z*z*((L+1)*z+L)+1:0},X=U==="out"?Y:U==="in"?function(W){return 1-Y(1-W)}:_easeInOutFromOut(Y);return X.config=function(W){return G(U,W)},X};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(G,U){var L=U<5?U+1:U;_insertEase(G+",Power"+(L-1),U?function(Y){return Math.pow(Y,L)}:function(Y){return Y},function(Y){return 1-Math.pow(1-Y,L)},function(Y){return Y<.5?Math.pow(Y*2,L)/2:1-Math.pow((1-Y)*2,L)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(G,U){var L=1/U,Y=2*L,X=2.5*L,W=function(J){return J<L?G*J*J:J<Y?G*Math.pow(J-1.5/U,2)+.75:J<X?G*(J-=2.25/U)*J+.9375:G*Math.pow(J-2.625/U,2)+.984375};_insertEase("Bounce",function(z){return 1-W(1-z)},W)})(7.5625,2.75);_insertEase("Expo",function(G){return G?Math.pow(2,10*(G-1)):0});_insertEase("Circ",function(G){return-(_sqrt(1-G*G)-1)});_insertEase("Sine",function(G){return G===1?1:-_cos(G*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function G(U,L){U===void 0&&(U=1);var Y=1/U,X=U+(L?0:1),W=L?1:0,z=1-_tinyNum;return function(J){return((X*_clamp(0,z,J)|0)+W)*Y}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(G){return _callbackNames+=G+","+G+"Params,"});var GSCache=function G(U,L){this.id=_gsID++,U._gsap=this,this.target=U,this.harness=L,this.get=L?L.get:_getProperty,this.set=L?L.getSetter:_getSetter},Animation=function(){function G(L){this.vars=L,this._delay=+L.delay||0,(this._repeat=L.repeat===1/0?-2:L.repeat||0)&&(this._rDelay=L.repeatDelay||0,this._yoyo=!!L.yoyo||!!L.yoyoEase),this._ts=1,_setDuration(this,+L.duration,1,1),this.data=L.data,_tickerActive||_ticker.wake()}var U=G.prototype;return U.delay=function(Y){return Y||Y===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+Y-this._delay),this._delay=Y,this):this._delay},U.duration=function(Y){return arguments.length?this.totalDuration(this._repeat>0?Y+(Y+this._rDelay)*this._repeat:Y):this.totalDuration()&&this._dur},U.totalDuration=function(Y){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?Y:(Y-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},U.totalTime=function(Y,X){if(_wake(),!arguments.length)return this._tTime;var W=this._dp;if(W&&W.smoothChildTiming&&this._ts){for(_alignPlayhead(this,Y),!W._dp||W.parent||_postAddChecks(W,this);W&&W.parent;)W.parent._time!==W._start+(W._ts>=0?W._tTime/W._ts:(W.totalDuration()-W._tTime)/-W._ts)&&W.totalTime(W._tTime,!0),W=W.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&Y<this._tDur||this._ts<0&&Y>0||!this._tDur&&!Y)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==Y||!this._dur&&!X||this._initted&&Math.abs(this._zTime)===_tinyNum||!Y&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=Y),_lazySafeRender(this,Y,X)),this},U.time=function(Y,X){return arguments.length?this.totalTime(Math.min(this.totalDuration(),Y+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(Y?this._dur:0),X):this._time},U.totalProgress=function(Y,X){return arguments.length?this.totalTime(this.totalDuration()*Y,X):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},U.progress=function(Y,X){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-Y:Y)+_elapsedCycleDuration(this),X):this.duration()?Math.min(1,this._time/this._dur):this.ratio},U.iteration=function(Y,X){var W=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(Y-1)*W,X):this._repeat?_animationCycle(this._tTime,W)+1:1},U.timeScale=function(Y){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===Y)return this;var X=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+Y||0,this._ts=this._ps||Y===-_tinyNum?0:this._rts,this.totalTime(_clamp(-this._delay,this._tDur,X),!0),_setEnd(this),_recacheAncestors(this)},U.paused=function(Y){return arguments.length?(this._ps!==Y&&(this._ps=Y,Y?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},U.startTime=function(Y){if(arguments.length){this._start=Y;var X=this.parent||this._dp;return X&&(X._sort||!this.parent)&&_addToTimeline(X,this,Y-this._delay),this}return this._start},U.endTime=function(Y){return this._start+(_isNotFalse(Y)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},U.rawTime=function(Y){var X=this.parent||this._dp;return X?Y&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(X.rawTime(Y),this):this._tTime:this._tTime},U.globalTime=function(Y){for(var X=this,W=arguments.length?Y:X.rawTime();X;)W=X._start+W/(X._ts||1),X=X._dp;return W},U.repeat=function(Y){return arguments.length?(this._repeat=Y===1/0?-2:Y,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},U.repeatDelay=function(Y){if(arguments.length){var X=this._time;return this._rDelay=Y,_onUpdateTotalDuration(this),X?this.time(X):this}return this._rDelay},U.yoyo=function(Y){return arguments.length?(this._yoyo=Y,this):this._yoyo},U.seek=function(Y,X){return this.totalTime(_parsePosition(this,Y),_isNotFalse(X))},U.restart=function(Y,X){return this.play().totalTime(Y?-this._delay:0,_isNotFalse(X))},U.play=function(Y,X){return Y!=null&&this.seek(Y,X),this.reversed(!1).paused(!1)},U.reverse=function(Y,X){return Y!=null&&this.seek(Y||this.totalDuration(),X),this.reversed(!0).paused(!1)},U.pause=function(Y,X){return Y!=null&&this.seek(Y,X),this.paused(!0)},U.resume=function(){return this.paused(!1)},U.reversed=function(Y){return arguments.length?(!!Y!==this.reversed()&&this.timeScale(-this._rts||(Y?-_tinyNum:0)),this):this._rts<0},U.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},U.isActive=function(){var Y=this.parent||this._dp,X=this._start,W;return!!(!Y||this._ts&&this._initted&&Y.isActive()&&(W=Y.rawTime(!0))>=X&&W<this.endTime(!0)-_tinyNum)},U.eventCallback=function(Y,X,W){var z=this.vars;return arguments.length>1?(X?(z[Y]=X,W&&(z[Y+"Params"]=W),Y==="onUpdate"&&(this._onUpdate=X)):delete z[Y],this):z[Y]},U.then=function(Y){var X=this;return new Promise(function(W){var z=_isFunction(Y)?Y:_passThrough,J=function(){var ee=X.then;X.then=null,_isFunction(z)&&(z=z(X))&&(z.then||z===X)&&(X.then=ee),W(z),X.then=ee};X._initted&&X.totalProgress()===1&&X._ts>=0||!X._tTime&&X._ts<0?J():X._prom=J})},U.kill=function(){_interrupt(this)},G}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline=function(G){_inheritsLoose(U,G);function U(Y,X){var W;return Y===void 0&&(Y={}),W=G.call(this,Y)||this,W.labels={},W.smoothChildTiming=!!Y.smoothChildTiming,W.autoRemoveChildren=!!Y.autoRemoveChildren,W._sort=_isNotFalse(Y.sortChildren),_globalTimeline&&_addToTimeline(Y.parent||_globalTimeline,_assertThisInitialized(W),X),Y.reversed&&W.reverse(),Y.paused&&W.paused(!0),Y.scrollTrigger&&_scrollTrigger(_assertThisInitialized(W),Y.scrollTrigger),W}var L=U.prototype;return L.to=function(X,W,z){return _createTweenType(0,arguments,this),this},L.from=function(X,W,z){return _createTweenType(1,arguments,this),this},L.fromTo=function(X,W,z,J){return _createTweenType(2,arguments,this),this},L.set=function(X,W,z){return W.duration=0,W.parent=this,_inheritDefaults(W).repeatDelay||(W.repeat=0),W.immediateRender=!!W.immediateRender,new Tween(X,W,_parsePosition(this,z),1),this},L.call=function(X,W,z){return _addToTimeline(this,Tween.delayedCall(0,X,W),z)},L.staggerTo=function(X,W,z,J,Z,ee,te){return z.duration=W,z.stagger=z.stagger||J,z.onComplete=ee,z.onCompleteParams=te,z.parent=this,new Tween(X,z,_parsePosition(this,Z)),this},L.staggerFrom=function(X,W,z,J,Z,ee,te){return z.runBackwards=1,_inheritDefaults(z).immediateRender=_isNotFalse(z.immediateRender),this.staggerTo(X,W,z,J,Z,ee,te)},L.staggerFromTo=function(X,W,z,J,Z,ee,te,re){return J.startAt=z,_inheritDefaults(J).immediateRender=_isNotFalse(J.immediateRender),this.staggerTo(X,W,J,Z,ee,te,re)},L.render=function(X,W,z){var J=this._time,Z=this._dirty?this.totalDuration():this._tDur,ee=this._dur,te=X<=0?0:_roundPrecise(X),re=this._zTime<0!=X<0&&(this._initted||!ee),ie,ne,oe,se,ae,le,ue,ce,he,fe,de,_e;if(this!==_globalTimeline&&te>Z&&X>=0&&(te=Z),te!==this._tTime||z||re){if(J!==this._time&&ee&&(te+=this._time-J,X+=this._time-J),ie=te,he=this._start,ce=this._ts,le=!ce,re&&(ee||(J=this._zTime),(X||!W)&&(this._zTime=X)),this._repeat){if(de=this._yoyo,ae=ee+this._rDelay,this._repeat<-1&&X<0)return this.totalTime(ae*100+X,W,z);if(ie=_roundPrecise(te%ae),te===Z?(se=this._repeat,ie=ee):(se=~~(te/ae),se&&se===te/ae&&(ie=ee,se--),ie>ee&&(ie=ee)),fe=_animationCycle(this._tTime,ae),!J&&this._tTime&&fe!==se&&(fe=se),de&&se&1&&(ie=ee-ie,_e=1),se!==fe&&!this._lock){var me=de&&fe&1,ve=me===(de&&se&1);if(se<fe&&(me=!me),J=me?0:ee,this._lock=1,this.render(J||(_e?0:_roundPrecise(se*ae)),W,!ee)._lock=0,this._tTime=te,!W&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!_e&&(this.invalidate()._lock=1),J&&J!==this._time||le!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(ee=this._dur,Z=this._tDur,ve&&(this._lock=2,J=me?ee:-1e-4,this.render(J,!0),this.vars.repeatRefresh&&!_e&&this.invalidate()),this._lock=0,!this._ts&&!le)return this;_propagateYoyoEase(this,_e)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(ue=_findNextPauseTween(this,_roundPrecise(J),_roundPrecise(ie)),ue&&(te-=ie-(ie=ue._start))),this._tTime=te,this._time=ie,this._act=!ce,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=X,J=0),!J&&ie&&!W&&(_callback(this,"onStart"),this._tTime!==te))return this;if(ie>=J&&X>=0)for(ne=this._first;ne;){if(oe=ne._next,(ne._act||ie>=ne._start)&&ne._ts&&ue!==ne){if(ne.parent!==this)return this.render(X,W,z);if(ne.render(ne._ts>0?(ie-ne._start)*ne._ts:(ne._dirty?ne.totalDuration():ne._tDur)+(ie-ne._start)*ne._ts,W,z),ie!==this._time||!this._ts&&!le){ue=0,oe&&(te+=this._zTime=-_tinyNum);break}}ne=oe}else{ne=this._last;for(var ye=X<0?X:ie;ne;){if(oe=ne._prev,(ne._act||ye<=ne._end)&&ne._ts&&ue!==ne){if(ne.parent!==this)return this.render(X,W,z);if(ne.render(ne._ts>0?(ye-ne._start)*ne._ts:(ne._dirty?ne.totalDuration():ne._tDur)+(ye-ne._start)*ne._ts,W,z),ie!==this._time||!this._ts&&!le){ue=0,oe&&(te+=this._zTime=ye?-_tinyNum:_tinyNum);break}}ne=oe}}if(ue&&!W&&(this.pause(),ue.render(ie>=J?0:-_tinyNum)._zTime=ie>=J?1:-1,this._ts))return this._start=he,_setEnd(this),this.render(X,W,z);this._onUpdate&&!W&&_callback(this,"onUpdate",!0),(te===Z&&this._tTime>=this.totalDuration()||!te&&J)&&(he===this._start||Math.abs(ce)!==Math.abs(this._ts))&&(this._lock||((X||!ee)&&(te===Z&&this._ts>0||!te&&this._ts<0)&&_removeFromParent(this,1),!W&&!(X<0&&!J)&&(te||J||!Z)&&(_callback(this,te===Z&&X>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(te<Z&&this.timeScale()>0)&&this._prom())))}return this},L.add=function(X,W){var z=this;if(_isNumber(W)||(W=_parsePosition(this,W,X)),!(X instanceof Animation)){if(_isArray(X))return X.forEach(function(J){return z.add(J,W)}),this;if(_isString(X))return this.addLabel(X,W);if(_isFunction(X))X=Tween.delayedCall(0,X);else return this}return this!==X?_addToTimeline(this,X,W):this},L.getChildren=function(X,W,z,J){X===void 0&&(X=!0),W===void 0&&(W=!0),z===void 0&&(z=!0),J===void 0&&(J=-_bigNum$1);for(var Z=[],ee=this._first;ee;)ee._start>=J&&(ee instanceof Tween?W&&Z.push(ee):(z&&Z.push(ee),X&&Z.push.apply(Z,ee.getChildren(!0,W,z)))),ee=ee._next;return Z},L.getById=function(X){for(var W=this.getChildren(1,1,1),z=W.length;z--;)if(W[z].vars.id===X)return W[z]},L.remove=function(X){return _isString(X)?this.removeLabel(X):_isFunction(X)?this.killTweensOf(X):(_removeLinkedListItem(this,X),X===this._recent&&(this._recent=this._last),_uncache(this))},L.totalTime=function(X,W){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?X/this._ts:(this.totalDuration()-X)/-this._ts))),G.prototype.totalTime.call(this,X,W),this._forcing=0,this):this._tTime},L.addLabel=function(X,W){return this.labels[X]=_parsePosition(this,W),this},L.removeLabel=function(X){return delete this.labels[X],this},L.addPause=function(X,W,z){var J=Tween.delayedCall(0,W||_emptyFunc,z);return J.data="isPause",this._hasPause=1,_addToTimeline(this,J,_parsePosition(this,X))},L.removePause=function(X){var W=this._first;for(X=_parsePosition(this,X);W;)W._start===X&&W.data==="isPause"&&_removeFromParent(W),W=W._next},L.killTweensOf=function(X,W,z){for(var J=this.getTweensOf(X,z),Z=J.length;Z--;)_overwritingTween!==J[Z]&&J[Z].kill(X,W);return this},L.getTweensOf=function(X,W){for(var z=[],J=toArray(X),Z=this._first,ee=_isNumber(W),te;Z;)Z instanceof Tween?_arrayContainsAny(Z._targets,J)&&(ee?(!_overwritingTween||Z._initted&&Z._ts)&&Z.globalTime(0)<=W&&Z.globalTime(Z.totalDuration())>W:!W||Z.isActive())&&z.push(Z):(te=Z.getTweensOf(J,W)).length&&z.push.apply(z,te),Z=Z._next;return z},L.tweenTo=function(X,W){W=W||{};var z=this,J=_parsePosition(z,X),Z=W,ee=Z.startAt,te=Z.onStart,re=Z.onStartParams,ie=Z.immediateRender,ne,oe=Tween.to(z,_setDefaults({ease:W.ease||"none",lazy:!1,immediateRender:!1,time:J,overwrite:"auto",duration:W.duration||Math.abs((J-(ee&&"time"in ee?ee.time:z._time))/z.timeScale())||_tinyNum,onStart:function(){if(z.pause(),!ne){var ae=W.duration||Math.abs((J-(ee&&"time"in ee?ee.time:z._time))/z.timeScale());oe._dur!==ae&&_setDuration(oe,ae,0,1).render(oe._time,!0,!0),ne=1}te&&te.apply(oe,re||[])}},W));return ie?oe.render(0):oe},L.tweenFromTo=function(X,W,z){return this.tweenTo(W,_setDefaults({startAt:{time:_parsePosition(this,X)}},z))},L.recent=function(){return this._recent},L.nextLabel=function(X){return X===void 0&&(X=this._time),_getLabelInDirection(this,_parsePosition(this,X))},L.previousLabel=function(X){return X===void 0&&(X=this._time),_getLabelInDirection(this,_parsePosition(this,X),1)},L.currentLabel=function(X){return arguments.length?this.seek(X,!0):this.previousLabel(this._time+_tinyNum)},L.shiftChildren=function(X,W,z){z===void 0&&(z=0);for(var J=this._first,Z=this.labels,ee;J;)J._start>=z&&(J._start+=X,J._end+=X),J=J._next;if(W)for(ee in Z)Z[ee]>=z&&(Z[ee]+=X);return _uncache(this)},L.invalidate=function(){var X=this._first;for(this._lock=0;X;)X.invalidate(),X=X._next;return G.prototype.invalidate.call(this)},L.clear=function(X){X===void 0&&(X=!0);for(var W=this._first,z;W;)z=W._next,this.remove(W),W=z;return this._dp&&(this._time=this._tTime=this._pTime=0),X&&(this.labels={}),_uncache(this)},L.totalDuration=function(X){var W=0,z=this,J=z._last,Z=_bigNum$1,ee,te,re;if(arguments.length)return z.timeScale((z._repeat<0?z.duration():z.totalDuration())/(z.reversed()?-X:X));if(z._dirty){for(re=z.parent;J;)ee=J._prev,J._dirty&&J.totalDuration(),te=J._start,te>Z&&z._sort&&J._ts&&!z._lock?(z._lock=1,_addToTimeline(z,J,te-J._delay,1)._lock=0):Z=te,te<0&&J._ts&&(W-=te,(!re&&!z._dp||re&&re.smoothChildTiming)&&(z._start+=te/z._ts,z._time-=te,z._tTime-=te),z.shiftChildren(-te,!1,-1/0),Z=0),J._end>W&&J._ts&&(W=J._end),J=ee;_setDuration(z,z===_globalTimeline&&z._time>W?z._time:W,1,1),z._dirty=0}return z._tDur},U.updateRoot=function(X){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(X,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var W=_globalTimeline._first;if((!W||!W._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;W&&!W._ts;)W=W._next;W||_ticker.sleep()}}},U}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function G(U,L,Y,X,W,z,J){var Z=new PropTween(this._pt,U,L,0,1,_renderComplexString,null,W),ee=0,te=0,re,ie,ne,oe,se,ae,le,ue;for(Z.b=Y,Z.e=X,Y+="",X+="",(le=~X.indexOf("random("))&&(X=_replaceRandom(X)),z&&(ue=[Y,X],z(ue,U,L),Y=ue[0],X=ue[1]),ie=Y.match(_complexStringNumExp)||[];re=_complexStringNumExp.exec(X);)oe=re[0],se=X.substring(ee,re.index),ne?ne=(ne+1)%5:se.substr(-5)==="rgba("&&(ne=1),oe!==ie[te++]&&(ae=parseFloat(ie[te-1])||0,Z._pt={_next:Z._pt,p:se||te===1?se:",",s:ae,c:oe.charAt(1)==="="?_parseRelative(ae,oe)-ae:parseFloat(oe)-ae,m:ne&&ne<4?Math.round:0},ee=_complexStringNumExp.lastIndex);return Z.c=ee<X.length?X.substring(ee,X.length):"",Z.fp=J,(_relExp.test(X)||le)&&(Z.e=0),this._pt=Z,Z},_addPropTween=function G(U,L,Y,X,W,z,J,Z,ee){_isFunction(X)&&(X=X(W||0,U,z));var te=U[L],re=Y!=="get"?Y:_isFunction(te)?ee?U[L.indexOf("set")||!_isFunction(U["get"+L.substr(3)])?L:"get"+L.substr(3)](ee):U[L]():te,ie=_isFunction(te)?ee?_setterFuncWithParam:_setterFunc:_setterPlain,ne;if(_isString(X)&&(~X.indexOf("random(")&&(X=_replaceRandom(X)),X.charAt(1)==="="&&(ne=_parseRelative(re,X)+(getUnit(re)||0),(ne||ne===0)&&(X=ne))),re!==X||_forceAllPropTweens)return!isNaN(re*X)&&X!==""?(ne=new PropTween(this._pt,U,L,+re||0,X-(re||0),typeof te=="boolean"?_renderBoolean:_renderPlain,0,ie),ee&&(ne.fp=ee),J&&ne.modifier(J,this,U),this._pt=ne):(!te&&!(L in U)&&_missingPlugin(L,X),_addComplexStringPropTween.call(this,U,L,re,X,ie,Z||_config.stringFilter,ee))},_processVars=function G(U,L,Y,X,W){if(_isFunction(U)&&(U=_parseFuncOrString(U,W,L,Y,X)),!_isObject(U)||U.style&&U.nodeType||_isArray(U)||_isTypedArray(U))return _isString(U)?_parseFuncOrString(U,W,L,Y,X):U;var z={},J;for(J in U)z[J]=_parseFuncOrString(U[J],W,L,Y,X);return z},_checkPlugin=function G(U,L,Y,X,W,z){var J,Z,ee,te;if(_plugins[U]&&(J=new _plugins[U]).init(W,J.rawVars?L[U]:_processVars(L[U],X,W,z,Y),Y,X,z)!==!1&&(Y._pt=Z=new PropTween(Y._pt,W,U,0,1,J.render,J,0,J.priority),Y!==_quickTween))for(ee=Y._ptLookup[Y._targets.indexOf(W)],te=J._props.length;te--;)ee[J._props[te]]=Z;return J},_overwritingTween,_forceAllPropTweens,_initTween=function G(U,L){var Y=U.vars,X=Y.ease,W=Y.startAt,z=Y.immediateRender,J=Y.lazy,Z=Y.onUpdate,ee=Y.onUpdateParams,te=Y.callbackScope,re=Y.runBackwards,ie=Y.yoyoEase,ne=Y.keyframes,oe=Y.autoRevert,se=U._dur,ae=U._startAt,le=U._targets,ue=U.parent,ce=ue&&ue.data==="nested"?ue.parent._targets:le,he=U._overwrite==="auto"&&!_suppressOverwrites,fe=U.timeline,de,_e,me,ve,ye,be,Te,Se,Ue,Pe,Ne,Ve,ze;if(fe&&(!ne||!X)&&(X="none"),U._ease=_parseEase(X,_defaults.ease),U._yEase=ie?_invertEase(_parseEase(ie===!0?X:ie,_defaults.ease)):0,ie&&U._yoyo&&!U._repeat&&(ie=U._yEase,U._yEase=U._ease,U._ease=ie),U._from=!fe&&!!Y.runBackwards,!fe||ne&&!Y.stagger){if(Se=le[0]?_getCache(le[0]).harness:0,Ve=Se&&Y[Se.prop],de=_copyExcluding(Y,_reservedProps),ae&&(_removeFromParent(ae.render(-1,!0)),ae._lazy=0),W)if(_removeFromParent(U._startAt=Tween.set(le,_setDefaults({data:"isStart",overwrite:!1,parent:ue,immediateRender:!0,lazy:_isNotFalse(J),startAt:null,delay:0,onUpdate:Z,onUpdateParams:ee,callbackScope:te,stagger:0},W))),L<0&&!z&&!oe&&U._startAt.render(-1,!0),z){if(L>0&&!oe&&(U._startAt=0),se&&L<=0){L&&(U._zTime=L);return}}else oe===!1&&(U._startAt=0);else if(re&&se){if(ae)!oe&&(U._startAt=0);else if(L&&(z=!1),me=_setDefaults({overwrite:!1,data:"isFromStart",lazy:z&&_isNotFalse(J),immediateRender:z,stagger:0,parent:ue},de),Ve&&(me[Se.prop]=Ve),_removeFromParent(U._startAt=Tween.set(le,me)),L<0&&U._startAt.render(-1,!0),U._zTime=L,!z)G(U._startAt,_tinyNum);else if(!L)return}for(U._pt=U._ptCache=0,J=se&&_isNotFalse(J)||J&&!se,_e=0;_e<le.length;_e++){if(ye=le[_e],Te=ye._gsap||_harness(le)[_e]._gsap,U._ptLookup[_e]=Pe={},_lazyLookup[Te.id]&&_lazyTweens.length&&_lazyRender(),Ne=ce===le?_e:ce.indexOf(ye),Se&&(Ue=new Se).init(ye,Ve||de,U,Ne,ce)!==!1&&(U._pt=ve=new PropTween(U._pt,ye,Ue.name,0,1,Ue.render,Ue,0,Ue.priority),Ue._props.forEach(function(Ze){Pe[Ze]=ve}),Ue.priority&&(be=1)),!Se||Ve)for(me in de)_plugins[me]&&(Ue=_checkPlugin(me,de,U,Ne,ye,ce))?Ue.priority&&(be=1):Pe[me]=ve=_addPropTween.call(U,ye,me,"get",de[me],Ne,ce,0,Y.stringFilter);U._op&&U._op[_e]&&U.kill(ye,U._op[_e]),he&&U._pt&&(_overwritingTween=U,_globalTimeline.killTweensOf(ye,Pe,U.globalTime(L)),ze=!U.parent,_overwritingTween=0),U._pt&&J&&(_lazyLookup[Te.id]=1)}be&&_sortPropTweensByPriority(U),U._onInit&&U._onInit(U)}U._onUpdate=Z,U._initted=(!U._op||U._pt)&&!ze,ne&&L<=0&&fe.render(_bigNum$1,!0,!0)},_updatePropTweens=function G(U,L,Y,X,W,z,J){var Z=(U._pt&&U._ptCache||(U._ptCache={}))[L],ee,te,re;if(!Z)for(Z=U._ptCache[L]=[],te=U._ptLookup,re=U._targets.length;re--;){if(ee=te[re][L],ee&&ee.d&&ee.d._pt)for(ee=ee.d._pt;ee&&ee.p!==L;)ee=ee._next;if(!ee)return _forceAllPropTweens=1,U.vars[L]="+=0",_initTween(U,J),_forceAllPropTweens=0,1;Z.push(ee)}for(re=Z.length;re--;)ee=Z[re],ee.s=(X||X===0)&&!W?X:ee.s+(X||0)+z*ee.c,ee.c=Y-ee.s,ee.e&&(ee.e=_round(Y)+getUnit(ee.e)),ee.b&&(ee.b=ee.s+getUnit(ee.b))},_addAliasesToVars=function G(U,L){var Y=U[0]?_getCache(U[0]).harness:0,X=Y&&Y.aliases,W,z,J,Z;if(!X)return L;W=_merge({},L);for(z in X)if(z in W)for(Z=X[z].split(","),J=Z.length;J--;)W[Z[J]]=W[z];return W},_parseKeyframe=function G(U,L,Y,X){var W=L.ease||X||"power1.inOut",z,J;if(_isArray(L))J=Y[U]||(Y[U]=[]),L.forEach(function(Z,ee){return J.push({t:ee/(L.length-1)*100,v:Z,e:W})});else for(z in L)J=Y[z]||(Y[z]=[]),z==="ease"||J.push({t:parseFloat(U),v:L[z],e:W})},_parseFuncOrString=function G(U,L,Y,X,W){return _isFunction(U)?U.call(L,Y,X,W):_isString(U)&&~U.indexOf("random(")?_replaceRandom(U):U},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(G){return _staggerPropsToSkip[G]=1});var Tween=function(G){_inheritsLoose(U,G);function U(Y,X,W,z){var J;typeof X=="number"&&(W.duration=X,X=W,W=null),J=G.call(this,z?X:_inheritDefaults(X))||this;var Z=J.vars,ee=Z.duration,te=Z.delay,re=Z.immediateRender,ie=Z.stagger,ne=Z.overwrite,oe=Z.keyframes,se=Z.defaults,ae=Z.scrollTrigger,le=Z.yoyoEase,ue=X.parent||_globalTimeline,ce=(_isArray(Y)||_isTypedArray(Y)?_isNumber(Y[0]):"length"in X)?[Y]:toArray(Y),he,fe,de,_e,me,ve,ye,be;if(J._targets=ce.length?_harness(ce):_warn("GSAP target "+Y+" not found. https://greensock.com",!_config.nullTargetWarn)||[],J._ptLookup=[],J._overwrite=ne,oe||ie||_isFuncOrString(ee)||_isFuncOrString(te)){if(X=J.vars,he=J.timeline=new Timeline({data:"nested",defaults:se||{}}),he.kill(),he.parent=he._dp=_assertThisInitialized(J),he._start=0,ie||_isFuncOrString(ee)||_isFuncOrString(te)){if(_e=ce.length,ye=ie&&distribute(ie),_isObject(ie))for(me in ie)~_staggerTweenProps.indexOf(me)&&(be||(be={}),be[me]=ie[me]);for(fe=0;fe<_e;fe++)de=_copyExcluding(X,_staggerPropsToSkip),de.stagger=0,le&&(de.yoyoEase=le),be&&_merge(de,be),ve=ce[fe],de.duration=+_parseFuncOrString(ee,_assertThisInitialized(J),fe,ve,ce),de.delay=(+_parseFuncOrString(te,_assertThisInitialized(J),fe,ve,ce)||0)-J._delay,!ie&&_e===1&&de.delay&&(J._delay=te=de.delay,J._start+=te,de.delay=0),he.to(ve,de,ye?ye(fe,ve,ce):0),he._ease=_easeMap.none;he.duration()?ee=te=0:J.timeline=0}else if(oe){_inheritDefaults(_setDefaults(he.vars.defaults,{ease:"none"})),he._ease=_parseEase(oe.ease||X.ease||"none");var Te=0,Se,Ue,Pe;if(_isArray(oe))oe.forEach(function(Ne){return he.to(ce,Ne,">")});else{de={};for(me in oe)me==="ease"||me==="easeEach"||_parseKeyframe(me,oe[me],de,oe.easeEach);for(me in de)for(Se=de[me].sort(function(Ne,Ve){return Ne.t-Ve.t}),Te=0,fe=0;fe<Se.length;fe++)Ue=Se[fe],Pe={ease:Ue.e,duration:(Ue.t-(fe?Se[fe-1].t:0))/100*ee},Pe[me]=Ue.v,he.to(ce,Pe,Te),Te+=Pe.duration;he.duration()<ee&&he.to({},{duration:ee-he.duration()})}}ee||J.duration(ee=he.duration())}else J.timeline=0;return ne===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(J),_globalTimeline.killTweensOf(ce),_overwritingTween=0),_addToTimeline(ue,_assertThisInitialized(J),W),X.reversed&&J.reverse(),X.paused&&J.paused(!0),(re||!ee&&!oe&&J._start===_roundPrecise(ue._time)&&_isNotFalse(re)&&_hasNoPausedAncestors(_assertThisInitialized(J))&&ue.data!=="nested")&&(J._tTime=-_tinyNum,J.render(Math.max(0,-te))),ae&&_scrollTrigger(_assertThisInitialized(J),ae),J}var L=U.prototype;return L.render=function(X,W,z){var J=this._time,Z=this._tDur,ee=this._dur,te=X>Z-_tinyNum&&X>=0?Z:X<_tinyNum?0:X,re,ie,ne,oe,se,ae,le,ue,ce;if(!ee)_renderZeroDurationTween(this,X,W,z);else if(te!==this._tTime||!X||z||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=X<0){if(re=te,ue=this.timeline,this._repeat){if(oe=ee+this._rDelay,this._repeat<-1&&X<0)return this.totalTime(oe*100+X,W,z);if(re=_roundPrecise(te%oe),te===Z?(ne=this._repeat,re=ee):(ne=~~(te/oe),ne&&ne===te/oe&&(re=ee,ne--),re>ee&&(re=ee)),ae=this._yoyo&&ne&1,ae&&(ce=this._yEase,re=ee-re),se=_animationCycle(this._tTime,oe),re===J&&!z&&this._initted)return this._tTime=te,this;ne!==se&&(ue&&this._yEase&&_propagateYoyoEase(ue,ae),this.vars.repeatRefresh&&!ae&&!this._lock&&(this._lock=z=1,this.render(_roundPrecise(oe*ne),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,X<0?X:re,z,W))return this._tTime=0,this;if(J!==this._time)return this;if(ee!==this._dur)return this.render(X,W,z)}if(this._tTime=te,this._time=re,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=le=(ce||this._ease)(re/ee),this._from&&(this.ratio=le=1-le),re&&!J&&!W&&(_callback(this,"onStart"),this._tTime!==te))return this;for(ie=this._pt;ie;)ie.r(le,ie.d),ie=ie._next;ue&&ue.render(X<0?X:!re&&ae?-_tinyNum:ue._dur*ue._ease(re/this._dur),W,z)||this._startAt&&(this._zTime=X),this._onUpdate&&!W&&(X<0&&this._startAt&&this._startAt.render(X,!0,z),_callback(this,"onUpdate")),this._repeat&&ne!==se&&this.vars.onRepeat&&!W&&this.parent&&_callback(this,"onRepeat"),(te===this._tDur||!te)&&this._tTime===te&&(X<0&&this._startAt&&!this._onUpdate&&this._startAt.render(X,!0,!0),(X||!ee)&&(te===this._tDur&&this._ts>0||!te&&this._ts<0)&&_removeFromParent(this,1),!W&&!(X<0&&!J)&&(te||J)&&(_callback(this,te===Z?"onComplete":"onReverseComplete",!0),this._prom&&!(te<Z&&this.timeScale()>0)&&this._prom()))}return this},L.targets=function(){return this._targets},L.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),G.prototype.invalidate.call(this)},L.resetTo=function(X,W,z,J){_tickerActive||_ticker.wake(),this._ts||this.play();var Z=Math.min(this._dur,(this._dp._time-this._start)*this._ts),ee;return this._initted||_initTween(this,Z),ee=this._ease(Z/this._dur),_updatePropTweens(this,X,W,z,J,ee,Z)?this.resetTo(X,W,z,J):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},L.kill=function(X,W){if(W===void 0&&(W="all"),!X&&(!W||W==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var z=this.timeline.totalDuration();return this.timeline.killTweensOf(X,W,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&z!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/z,0,1),this}var J=this._targets,Z=X?toArray(X):J,ee=this._ptLookup,te=this._pt,re,ie,ne,oe,se,ae,le;if((!W||W==="all")&&_arraysMatch(J,Z))return W==="all"&&(this._pt=0),_interrupt(this);for(re=this._op=this._op||[],W!=="all"&&(_isString(W)&&(se={},_forEachName(W,function(ue){return se[ue]=1}),W=se),W=_addAliasesToVars(J,W)),le=J.length;le--;)if(~Z.indexOf(J[le])){ie=ee[le],W==="all"?(re[le]=W,oe=ie,ne={}):(ne=re[le]=re[le]||{},oe=W);for(se in oe)ae=ie&&ie[se],ae&&((!("kill"in ae.d)||ae.d.kill(se)===!0)&&_removeLinkedListItem(this,ae,"_pt"),delete ie[se]),ne!=="all"&&(ne[se]=1)}return this._initted&&!this._pt&&te&&_interrupt(this),this},U.to=function(X,W){return new U(X,W,arguments[2])},U.from=function(X,W){return _createTweenType(1,arguments)},U.delayedCall=function(X,W,z,J){return new U(W,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:X,onComplete:W,onReverseComplete:W,onCompleteParams:z,onReverseCompleteParams:z,callbackScope:J})},U.fromTo=function(X,W,z){return _createTweenType(2,arguments)},U.set=function(X,W){return W.duration=0,W.repeatDelay||(W.repeat=0),new U(X,W)},U.killTweensOf=function(X,W,z){return _globalTimeline.killTweensOf(X,W,z)},U}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(G){Tween[G]=function(){var U=new Timeline,L=_slice.call(arguments,0);return L.splice(G==="staggerFromTo"?5:4,0,0),U[G].apply(U,L)}});var _setterPlain=function G(U,L,Y){return U[L]=Y},_setterFunc=function G(U,L,Y){return U[L](Y)},_setterFuncWithParam=function G(U,L,Y,X){return U[L](X.fp,Y)},_setterAttribute=function G(U,L,Y){return U.setAttribute(L,Y)},_getSetter=function G(U,L){return _isFunction(U[L])?_setterFunc:_isUndefined(U[L])&&U.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function G(U,L){return L.set(L.t,L.p,Math.round((L.s+L.c*U)*1e6)/1e6,L)},_renderBoolean=function G(U,L){return L.set(L.t,L.p,!!(L.s+L.c*U),L)},_renderComplexString=function G(U,L){var Y=L._pt,X="";if(!U&&L.b)X=L.b;else if(U===1&&L.e)X=L.e;else{for(;Y;)X=Y.p+(Y.m?Y.m(Y.s+Y.c*U):Math.round((Y.s+Y.c*U)*1e4)/1e4)+X,Y=Y._next;X+=L.c}L.set(L.t,L.p,X,L)},_renderPropTweens=function G(U,L){for(var Y=L._pt;Y;)Y.r(U,Y.d),Y=Y._next},_addPluginModifier=function G(U,L,Y,X){for(var W=this._pt,z;W;)z=W._next,W.p===X&&W.modifier(U,L,Y),W=z},_killPropTweensOf=function G(U){for(var L=this._pt,Y,X;L;)X=L._next,L.p===U&&!L.op||L.op===U?_removeLinkedListItem(this,L,"_pt"):L.dep||(Y=1),L=X;return!Y},_setterWithModifier=function G(U,L,Y,X){X.mSet(U,L,X.m.call(X.tween,Y,X.mt),X)},_sortPropTweensByPriority=function G(U){for(var L=U._pt,Y,X,W,z;L;){for(Y=L._next,X=W;X&&X.pr>L.pr;)X=X._next;(L._prev=X?X._prev:z)?L._prev._next=L:W=L,(L._next=X)?X._prev=L:z=L,L=Y}U._pt=W},PropTween=function(){function G(L,Y,X,W,z,J,Z,ee,te){this.t=Y,this.s=W,this.c=z,this.p=X,this.r=J||_renderPlain,this.d=Z||this,this.set=ee||_setterPlain,this.pr=te||0,this._next=L,L&&(L._prev=this)}var U=G.prototype;return U.modifier=function(Y,X,W){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=Y,this.mt=W,this.tween=X},G}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(G){return _reservedProps[G]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _gsap={registerPlugin:function G(){for(var U=arguments.length,L=new Array(U),Y=0;Y<U;Y++)L[Y]=arguments[Y];L.forEach(function(X){return _createPlugin(X)})},timeline:function G(U){return new Timeline(U)},getTweensOf:function G(U,L){return _globalTimeline.getTweensOf(U,L)},getProperty:function G(U,L,Y,X){_isString(U)&&(U=toArray(U)[0]);var W=_getCache(U||{}).get,z=Y?_passThrough:_numericIfPossible;return Y==="native"&&(Y=""),U&&(L?z((_plugins[L]&&_plugins[L].get||W)(U,L,Y,X)):function(J,Z,ee){return z((_plugins[J]&&_plugins[J].get||W)(U,J,Z,ee))})},quickSetter:function G(U,L,Y){if(U=toArray(U),U.length>1){var X=U.map(function(te){return gsap.quickSetter(te,L,Y)}),W=X.length;return function(te){for(var re=W;re--;)X[re](te)}}U=U[0]||{};var z=_plugins[L],J=_getCache(U),Z=J.harness&&(J.harness.aliases||{})[L]||L,ee=z?function(te){var re=new z;_quickTween._pt=0,re.init(U,Y?te+Y:te,_quickTween,0,[U]),re.render(1,re),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:J.set(U,Z);return z?ee:function(te){return ee(U,Z,Y?te+Y:te,J,1)}},quickTo:function G(U,L,Y){var X,W=gsap.to(U,_merge((X={},X[L]="+=0.1",X.paused=!0,X),Y||{})),z=function(Z,ee,te){return W.resetTo(L,Z,ee,te)};return z.tween=W,z},isTweening:function G(U){return _globalTimeline.getTweensOf(U,!0).length>0},defaults:function G(U){return U&&U.ease&&(U.ease=_parseEase(U.ease,_defaults.ease)),_mergeDeep(_defaults,U||{})},config:function G(U){return _mergeDeep(_config,U||{})},registerEffect:function G(U){var L=U.name,Y=U.effect,X=U.plugins,W=U.defaults,z=U.extendTimeline;(X||"").split(",").forEach(function(J){return J&&!_plugins[J]&&!_globals[J]&&_warn(L+" effect requires "+J+" plugin.")}),_effects[L]=function(J,Z,ee){return Y(toArray(J),_setDefaults(Z||{},W),ee)},z&&(Timeline.prototype[L]=function(J,Z,ee){return this.add(_effects[L](J,_isObject(Z)?Z:(ee=Z)&&{},this),ee)})},registerEase:function G(U,L){_easeMap[U]=_parseEase(L)},parseEase:function G(U,L){return arguments.length?_parseEase(U,L):_easeMap},getById:function G(U){return _globalTimeline.getById(U)},exportRoot:function G(U,L){U===void 0&&(U={});var Y=new Timeline(U),X,W;for(Y.smoothChildTiming=_isNotFalse(U.smoothChildTiming),_globalTimeline.remove(Y),Y._dp=0,Y._time=Y._tTime=_globalTimeline._time,X=_globalTimeline._first;X;)W=X._next,(L||!(!X._dur&&X instanceof Tween&&X.vars.onComplete===X._targets[0]))&&_addToTimeline(Y,X,X._start-X._delay),X=W;return _addToTimeline(_globalTimeline,Y,0),Y},utils:{wrap,wrapYoyo,distribute,random,snap,normalize,getUnit,clamp,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline,Animation,getCache:_getCache,_removeLinkedListItem,suppressOverwrites:function G(U){return _suppressOverwrites=U}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(G){return _gsap[G]=Tween[G]});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function G(U,L){for(var Y=U._pt;Y&&Y.p!==L&&Y.op!==L&&Y.fp!==L;)Y=Y._next;return Y},_addModifiers=function G(U,L){var Y=U._targets,X,W,z;for(X in L)for(W=Y.length;W--;)z=U._ptLookup[W][X],z&&(z=z.d)&&(z._pt&&(z=_getPluginPropTween(z,X)),z&&z.modifier&&z.modifier(L[X],U,Y[W],X))},_buildModifierPlugin=function G(U,L){return{name:U,rawVars:1,init:function(X,W,z){z._onInit=function(J){var Z,ee;if(_isString(W)&&(Z={},_forEachName(W,function(te){return Z[te]=1}),W=Z),L){Z={};for(ee in W)Z[ee]=L(W[ee]);W=Z}_addModifiers(J,W)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function G(U,L,Y,X,W){var z,J;for(z in L)J=this.add(U,"setAttribute",(U.getAttribute(z)||0)+"",L[z],X,W,0,0,z),J&&(J.op=z),this._props.push(z)}},{name:"endArray",init:function G(U,L){for(var Y=L.length;Y--;)this.add(U,Y,U[Y]||0,L[Y])}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.10.4";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_windowExists=function G(){return typeof window!="undefined"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function G(U,L){return L.set(L.t,L.p,Math.round((L.s+L.c*U)*1e4)/1e4+L.u,L)},_renderPropWithEnd=function G(U,L){return L.set(L.t,L.p,U===1?L.e:Math.round((L.s+L.c*U)*1e4)/1e4+L.u,L)},_renderCSSPropWithBeginning=function G(U,L){return L.set(L.t,L.p,U?Math.round((L.s+L.c*U)*1e4)/1e4+L.u:L.b,L)},_renderRoundedCSSProp=function G(U,L){var Y=L.s+L.c*U;L.set(L.t,L.p,~~(Y+(Y<0?-.5:.5))+L.u,L)},_renderNonTweeningValue=function G(U,L){return L.set(L.t,L.p,U?L.e:L.b,L)},_renderNonTweeningValueOnlyAtEnd=function G(U,L){return L.set(L.t,L.p,U!==1?L.b:L.e,L)},_setterCSSStyle=function G(U,L,Y){return U.style[L]=Y},_setterCSSProp=function G(U,L,Y){return U.style.setProperty(L,Y)},_setterTransform=function G(U,L,Y){return U._gsap[L]=Y},_setterScale=function G(U,L,Y){return U._gsap.scaleX=U._gsap.scaleY=Y},_setterScaleWithRender=function G(U,L,Y,X,W){var z=U._gsap;z.scaleX=z.scaleY=Y,z.renderTransform(W,z)},_setterTransformWithRender=function G(U,L,Y,X,W){var z=U._gsap;z[L]=Y,z.renderTransform(W,z)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_supports3D,_createElement=function G(U,L){var Y=_doc.createElementNS?_doc.createElementNS((L||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),U):_doc.createElement(U);return Y.style?Y:_doc.createElement(U)},_getComputedProperty=function G(U,L,Y){var X=getComputedStyle(U);return X[L]||X.getPropertyValue(L.replace(_capsExp,"-$1").toLowerCase())||X.getPropertyValue(L)||!Y&&G(U,_checkPropPrefix(L)||L,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function G(U,L,Y){var X=L||_tempDiv,W=X.style,z=5;if(U in W&&!Y)return U;for(U=U.charAt(0).toUpperCase()+U.substr(1);z--&&!(_prefixes[z]+U in W););return z<0?null:(z===3?"ms":z>=0?_prefixes[z]:"")+U},_initCore=function G(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_pluginInitted=1)},_getBBoxHack=function G(U){var L=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),Y=this.parentNode,X=this.nextSibling,W=this.style.cssText,z;if(_docElement.appendChild(L),L.appendChild(this),this.style.display="block",U)try{z=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=G}catch(J){}else this._gsapBBox&&(z=this._gsapBBox());return Y&&(X?Y.insertBefore(this,X):Y.appendChild(this)),_docElement.removeChild(L),this.style.cssText=W,z},_getAttributeFallbacks=function G(U,L){for(var Y=L.length;Y--;)if(U.hasAttribute(L[Y]))return U.getAttribute(L[Y])},_getBBox=function G(U){var L;try{L=U.getBBox()}catch(Y){L=_getBBoxHack.call(U,!0)}return L&&(L.width||L.height)||U.getBBox===_getBBoxHack||(L=_getBBoxHack.call(U,!0)),L&&!L.width&&!L.x&&!L.y?{x:+_getAttributeFallbacks(U,["x","cx","x1"])||0,y:+_getAttributeFallbacks(U,["y","cy","y1"])||0,width:0,height:0}:L},_isSVG=function G(U){return!!(U.getCTM&&(!U.parentNode||U.ownerSVGElement)&&_getBBox(U))},_removeProperty=function G(U,L){if(L){var Y=U.style;L in _transformProps&&L!==_transformOriginProp&&(L=_transformProp),Y.removeProperty?((L.substr(0,2)==="ms"||L.substr(0,6)==="webkit")&&(L="-"+L),Y.removeProperty(L.replace(_capsExp,"-$1").toLowerCase())):Y.removeAttribute(L)}},_addNonTweeningPT=function G(U,L,Y,X,W,z){var J=new PropTween(U._pt,L,Y,0,1,z?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return U._pt=J,J.b=X,J.e=W,U._props.push(Y),J},_nonConvertibleUnits={deg:1,rad:1,turn:1},_convertToUnit=function G(U,L,Y,X){var W=parseFloat(Y)||0,z=(Y+"").trim().substr((W+"").length)||"px",J=_tempDiv.style,Z=_horizontalExp.test(L),ee=U.tagName.toLowerCase()==="svg",te=(ee?"client":"offset")+(Z?"Width":"Height"),re=100,ie=X==="px",ne=X==="%",oe,se,ae,le;return X===z||!W||_nonConvertibleUnits[X]||_nonConvertibleUnits[z]?W:(z!=="px"&&!ie&&(W=G(U,L,Y,"px")),le=U.getCTM&&_isSVG(U),(ne||z==="%")&&(_transformProps[L]||~L.indexOf("adius"))?(oe=le?U.getBBox()[Z?"width":"height"]:U[te],_round(ne?W/oe*re:W/100*oe)):(J[Z?"width":"height"]=re+(ie?z:X),se=~L.indexOf("adius")||X==="em"&&U.appendChild&&!ee?U:U.parentNode,le&&(se=(U.ownerSVGElement||{}).parentNode),(!se||se===_doc||!se.appendChild)&&(se=_doc.body),ae=se._gsap,ae&&ne&&ae.width&&Z&&ae.time===_ticker.time?_round(W/ae.width*re):((ne||z==="%")&&(J.position=_getComputedProperty(U,"position")),se===U&&(J.position="static"),se.appendChild(_tempDiv),oe=_tempDiv[te],se.removeChild(_tempDiv),J.position="absolute",Z&&ne&&(ae=_getCache(se),ae.time=_ticker.time,ae.width=se[te]),_round(ie?oe*W/re:oe&&W?re/oe*W:0))))},_get=function G(U,L,Y,X){var W;return _pluginInitted||_initCore(),L in _propertyAliases&&L!=="transform"&&(L=_propertyAliases[L],~L.indexOf(",")&&(L=L.split(",")[0])),_transformProps[L]&&L!=="transform"?(W=_parseTransform(U,X),W=L!=="transformOrigin"?W[L]:W.svg?W.origin:_firstTwoOnly(_getComputedProperty(U,_transformOriginProp))+" "+W.zOrigin+"px"):(W=U.style[L],(!W||W==="auto"||X||~(W+"").indexOf("calc("))&&(W=_specialProps[L]&&_specialProps[L](U,L,Y)||_getComputedProperty(U,L)||_getProperty(U,L)||(L==="opacity"?1:0))),Y&&!~(W+"").trim().indexOf(" ")?_convertToUnit(U,L,W,Y)+Y:W},_tweenComplexCSSString=function G(U,L,Y,X){if(!Y||Y==="none"){var W=_checkPropPrefix(L,U,1),z=W&&_getComputedProperty(U,W,1);z&&z!==Y?(L=W,Y=z):L==="borderColor"&&(Y=_getComputedProperty(U,"borderTopColor"))}var J=new PropTween(this._pt,U.style,L,0,1,_renderComplexString),Z=0,ee=0,te,re,ie,ne,oe,se,ae,le,ue,ce,he,fe;if(J.b=Y,J.e=X,Y+="",X+="",X==="auto"&&(U.style[L]=X,X=_getComputedProperty(U,L)||X,U.style[L]=Y),te=[Y,X],_colorStringFilter(te),Y=te[0],X=te[1],ie=Y.match(_numWithUnitExp)||[],fe=X.match(_numWithUnitExp)||[],fe.length){for(;re=_numWithUnitExp.exec(X);)ae=re[0],ue=X.substring(Z,re.index),oe?oe=(oe+1)%5:(ue.substr(-5)==="rgba("||ue.substr(-5)==="hsla(")&&(oe=1),ae!==(se=ie[ee++]||"")&&(ne=parseFloat(se)||0,he=se.substr((ne+"").length),ae.charAt(1)==="="&&(ae=_parseRelative(ne,ae)+he),le=parseFloat(ae),ce=ae.substr((le+"").length),Z=_numWithUnitExp.lastIndex-ce.length,ce||(ce=ce||_config.units[L]||he,Z===X.length&&(X+=ce,J.e+=ce)),he!==ce&&(ne=_convertToUnit(U,L,se,ce)||0),J._pt={_next:J._pt,p:ue||ee===1?ue:",",s:ne,c:le-ne,m:oe&&oe<4||L==="zIndex"?Math.round:0});J.c=Z<X.length?X.substring(Z,X.length):""}else J.r=L==="display"&&X==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(X)&&(J.e=0),this._pt=J,J},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function G(U){var L=U.split(" "),Y=L[0],X=L[1]||"50%";return(Y==="top"||Y==="bottom"||X==="left"||X==="right")&&(U=Y,Y=X,X=U),L[0]=_keywordToPercent[Y]||Y,L[1]=_keywordToPercent[X]||X,L.join(" ")},_renderClearProps=function G(U,L){if(L.tween&&L.tween._time===L.tween._dur){var Y=L.t,X=Y.style,W=L.u,z=Y._gsap,J,Z,ee;if(W==="all"||W===!0)X.cssText="",Z=1;else for(W=W.split(","),ee=W.length;--ee>-1;)J=W[ee],_transformProps[J]&&(Z=1,J=J==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(Y,J);Z&&(_removeProperty(Y,_transformProp),z&&(z.svg&&Y.removeAttribute("transform"),_parseTransform(Y,1),z.uncache=1))}},_specialProps={clearProps:function G(U,L,Y,X,W){if(W.data!=="isFromStart"){var z=U._pt=new PropTween(U._pt,L,Y,0,0,_renderClearProps);return z.u=X,z.pr=-10,z.tween=W,U._props.push(Y),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function G(U){return U==="matrix(1, 0, 0, 1, 0, 0)"||U==="none"||!U},_getComputedTransformMatrixAsArray=function G(U){var L=_getComputedProperty(U,_transformProp);return _isNullTransform(L)?_identity2DMatrix:L.substr(7).match(_numExp).map(_round)},_getMatrix=function G(U,L){var Y=U._gsap||_getCache(U),X=U.style,W=_getComputedTransformMatrixAsArray(U),z,J,Z,ee;return Y.svg&&U.getAttribute("transform")?(Z=U.transform.baseVal.consolidate().matrix,W=[Z.a,Z.b,Z.c,Z.d,Z.e,Z.f],W.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:W):(W===_identity2DMatrix&&!U.offsetParent&&U!==_docElement&&!Y.svg&&(Z=X.display,X.display="block",z=U.parentNode,(!z||!U.offsetParent)&&(ee=1,J=U.nextSibling,_docElement.appendChild(U)),W=_getComputedTransformMatrixAsArray(U),Z?X.display=Z:_removeProperty(U,"display"),ee&&(J?z.insertBefore(U,J):z?z.appendChild(U):_docElement.removeChild(U))),L&&W.length>6?[W[0],W[1],W[4],W[5],W[12],W[13]]:W)},_applySVGOrigin=function G(U,L,Y,X,W,z){var J=U._gsap,Z=W||_getMatrix(U,!0),ee=J.xOrigin||0,te=J.yOrigin||0,re=J.xOffset||0,ie=J.yOffset||0,ne=Z[0],oe=Z[1],se=Z[2],ae=Z[3],le=Z[4],ue=Z[5],ce=L.split(" "),he=parseFloat(ce[0])||0,fe=parseFloat(ce[1])||0,de,_e,me,ve;Y?Z!==_identity2DMatrix&&(_e=ne*ae-oe*se)&&(me=he*(ae/_e)+fe*(-se/_e)+(se*ue-ae*le)/_e,ve=he*(-oe/_e)+fe*(ne/_e)-(ne*ue-oe*le)/_e,he=me,fe=ve):(de=_getBBox(U),he=de.x+(~ce[0].indexOf("%")?he/100*de.width:he),fe=de.y+(~(ce[1]||ce[0]).indexOf("%")?fe/100*de.height:fe)),X||X!==!1&&J.smooth?(le=he-ee,ue=fe-te,J.xOffset=re+(le*ne+ue*se)-le,J.yOffset=ie+(le*oe+ue*ae)-ue):J.xOffset=J.yOffset=0,J.xOrigin=he,J.yOrigin=fe,J.smooth=!!X,J.origin=L,J.originIsAbsolute=!!Y,U.style[_transformOriginProp]="0px 0px",z&&(_addNonTweeningPT(z,J,"xOrigin",ee,he),_addNonTweeningPT(z,J,"yOrigin",te,fe),_addNonTweeningPT(z,J,"xOffset",re,J.xOffset),_addNonTweeningPT(z,J,"yOffset",ie,J.yOffset)),U.setAttribute("data-svg-origin",he+" "+fe)},_parseTransform=function G(U,L){var Y=U._gsap||new GSCache(U);if("x"in Y&&!L&&!Y.uncache)return Y;var X=U.style,W=Y.scaleX<0,z="px",J="deg",Z=_getComputedProperty(U,_transformOriginProp)||"0",ee,te,re,ie,ne,oe,se,ae,le,ue,ce,he,fe,de,_e,me,ve,ye,be,Te,Se,Ue,Pe,Ne,Ve,ze,Ze,Ae,De,Ke,Qe,tt;return ee=te=re=oe=se=ae=le=ue=ce=0,ie=ne=1,Y.svg=!!(U.getCTM&&_isSVG(U)),de=_getMatrix(U,Y.svg),Y.svg&&(Ne=(!Y.uncache||Z==="0px 0px")&&!L&&U.getAttribute("data-svg-origin"),_applySVGOrigin(U,Ne||Z,!!Ne||Y.originIsAbsolute,Y.smooth!==!1,de)),he=Y.xOrigin||0,fe=Y.yOrigin||0,de!==_identity2DMatrix&&(ye=de[0],be=de[1],Te=de[2],Se=de[3],ee=Ue=de[4],te=Pe=de[5],de.length===6?(ie=Math.sqrt(ye*ye+be*be),ne=Math.sqrt(Se*Se+Te*Te),oe=ye||be?_atan2(be,ye)*_RAD2DEG:0,le=Te||Se?_atan2(Te,Se)*_RAD2DEG+oe:0,le&&(ne*=Math.abs(Math.cos(le*_DEG2RAD))),Y.svg&&(ee-=he-(he*ye+fe*Te),te-=fe-(he*be+fe*Se))):(tt=de[6],Ke=de[7],Ze=de[8],Ae=de[9],De=de[10],Qe=de[11],ee=de[12],te=de[13],re=de[14],_e=_atan2(tt,De),se=_e*_RAD2DEG,_e&&(me=Math.cos(-_e),ve=Math.sin(-_e),Ne=Ue*me+Ze*ve,Ve=Pe*me+Ae*ve,ze=tt*me+De*ve,Ze=Ue*-ve+Ze*me,Ae=Pe*-ve+Ae*me,De=tt*-ve+De*me,Qe=Ke*-ve+Qe*me,Ue=Ne,Pe=Ve,tt=ze),_e=_atan2(-Te,De),ae=_e*_RAD2DEG,_e&&(me=Math.cos(-_e),ve=Math.sin(-_e),Ne=ye*me-Ze*ve,Ve=be*me-Ae*ve,ze=Te*me-De*ve,Qe=Se*ve+Qe*me,ye=Ne,be=Ve,Te=ze),_e=_atan2(be,ye),oe=_e*_RAD2DEG,_e&&(me=Math.cos(_e),ve=Math.sin(_e),Ne=ye*me+be*ve,Ve=Ue*me+Pe*ve,be=be*me-ye*ve,Pe=Pe*me-Ue*ve,ye=Ne,Ue=Ve),se&&Math.abs(se)+Math.abs(oe)>359.9&&(se=oe=0,ae=180-ae),ie=_round(Math.sqrt(ye*ye+be*be+Te*Te)),ne=_round(Math.sqrt(Pe*Pe+tt*tt)),_e=_atan2(Ue,Pe),le=Math.abs(_e)>2e-4?_e*_RAD2DEG:0,ce=Qe?1/(Qe<0?-Qe:Qe):0),Y.svg&&(Ne=U.getAttribute("transform"),Y.forceCSS=U.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(U,_transformProp)),Ne&&U.setAttribute("transform",Ne))),Math.abs(le)>90&&Math.abs(le)<270&&(W?(ie*=-1,le+=oe<=0?180:-180,oe+=oe<=0?180:-180):(ne*=-1,le+=le<=0?180:-180)),L=L||Y.uncache,Y.x=ee-((Y.xPercent=ee&&(!L&&Y.xPercent||(Math.round(U.offsetWidth/2)===Math.round(-ee)?-50:0)))?U.offsetWidth*Y.xPercent/100:0)+z,Y.y=te-((Y.yPercent=te&&(!L&&Y.yPercent||(Math.round(U.offsetHeight/2)===Math.round(-te)?-50:0)))?U.offsetHeight*Y.yPercent/100:0)+z,Y.z=re+z,Y.scaleX=_round(ie),Y.scaleY=_round(ne),Y.rotation=_round(oe)+J,Y.rotationX=_round(se)+J,Y.rotationY=_round(ae)+J,Y.skewX=le+J,Y.skewY=ue+J,Y.transformPerspective=ce+z,(Y.zOrigin=parseFloat(Z.split(" ")[2])||0)&&(X[_transformOriginProp]=_firstTwoOnly(Z)),Y.xOffset=Y.yOffset=0,Y.force3D=_config.force3D,Y.renderTransform=Y.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,Y.uncache=0,Y},_firstTwoOnly=function G(U){return(U=U.split(" "))[0]+" "+U[1]},_addPxTranslate=function G(U,L,Y){var X=getUnit(L);return _round(parseFloat(L)+parseFloat(_convertToUnit(U,"x",Y+"px",X)))+X},_renderNon3DTransforms=function G(U,L){L.z="0px",L.rotationY=L.rotationX="0deg",L.force3D=0,_renderCSSTransforms(U,L)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function G(U,L){var Y=L||this,X=Y.xPercent,W=Y.yPercent,z=Y.x,J=Y.y,Z=Y.z,ee=Y.rotation,te=Y.rotationY,re=Y.rotationX,ie=Y.skewX,ne=Y.skewY,oe=Y.scaleX,se=Y.scaleY,ae=Y.transformPerspective,le=Y.force3D,ue=Y.target,ce=Y.zOrigin,he="",fe=le==="auto"&&U&&U!==1||le===!0;if(ce&&(re!==_zeroDeg||te!==_zeroDeg)){var de=parseFloat(te)*_DEG2RAD,_e=Math.sin(de),me=Math.cos(de),ve;de=parseFloat(re)*_DEG2RAD,ve=Math.cos(de),z=_addPxTranslate(ue,z,_e*ve*-ce),J=_addPxTranslate(ue,J,-Math.sin(de)*-ce),Z=_addPxTranslate(ue,Z,me*ve*-ce+ce)}ae!==_zeroPx&&(he+="perspective("+ae+_endParenthesis),(X||W)&&(he+="translate("+X+"%, "+W+"%) "),(fe||z!==_zeroPx||J!==_zeroPx||Z!==_zeroPx)&&(he+=Z!==_zeroPx||fe?"translate3d("+z+", "+J+", "+Z+") ":"translate("+z+", "+J+_endParenthesis),ee!==_zeroDeg&&(he+="rotate("+ee+_endParenthesis),te!==_zeroDeg&&(he+="rotateY("+te+_endParenthesis),re!==_zeroDeg&&(he+="rotateX("+re+_endParenthesis),(ie!==_zeroDeg||ne!==_zeroDeg)&&(he+="skew("+ie+", "+ne+_endParenthesis),(oe!==1||se!==1)&&(he+="scale("+oe+", "+se+_endParenthesis),ue.style[_transformProp]=he||"translate(0, 0)"},_renderSVGTransforms=function G(U,L){var Y=L||this,X=Y.xPercent,W=Y.yPercent,z=Y.x,J=Y.y,Z=Y.rotation,ee=Y.skewX,te=Y.skewY,re=Y.scaleX,ie=Y.scaleY,ne=Y.target,oe=Y.xOrigin,se=Y.yOrigin,ae=Y.xOffset,le=Y.yOffset,ue=Y.forceCSS,ce=parseFloat(z),he=parseFloat(J),fe,de,_e,me,ve;Z=parseFloat(Z),ee=parseFloat(ee),te=parseFloat(te),te&&(te=parseFloat(te),ee+=te,Z+=te),Z||ee?(Z*=_DEG2RAD,ee*=_DEG2RAD,fe=Math.cos(Z)*re,de=Math.sin(Z)*re,_e=Math.sin(Z-ee)*-ie,me=Math.cos(Z-ee)*ie,ee&&(te*=_DEG2RAD,ve=Math.tan(ee-te),ve=Math.sqrt(1+ve*ve),_e*=ve,me*=ve,te&&(ve=Math.tan(te),ve=Math.sqrt(1+ve*ve),fe*=ve,de*=ve)),fe=_round(fe),de=_round(de),_e=_round(_e),me=_round(me)):(fe=re,me=ie,de=_e=0),(ce&&!~(z+"").indexOf("px")||he&&!~(J+"").indexOf("px"))&&(ce=_convertToUnit(ne,"x",z,"px"),he=_convertToUnit(ne,"y",J,"px")),(oe||se||ae||le)&&(ce=_round(ce+oe-(oe*fe+se*_e)+ae),he=_round(he+se-(oe*de+se*me)+le)),(X||W)&&(ve=ne.getBBox(),ce=_round(ce+X/100*ve.width),he=_round(he+W/100*ve.height)),ve="matrix("+fe+","+de+","+_e+","+me+","+ce+","+he+")",ne.setAttribute("transform",ve),ue&&(ne.style[_transformProp]=ve)},_addRotationalPropTween=function G(U,L,Y,X,W){var z=360,J=_isString(W),Z=parseFloat(W)*(J&&~W.indexOf("rad")?_RAD2DEG:1),ee=Z-X,te=X+ee+"deg",re,ie;return J&&(re=W.split("_")[1],re==="short"&&(ee%=z,ee!==ee%(z/2)&&(ee+=ee<0?z:-z)),re==="cw"&&ee<0?ee=(ee+z*_bigNum)%z-~~(ee/z)*z:re==="ccw"&&ee>0&&(ee=(ee-z*_bigNum)%z-~~(ee/z)*z)),U._pt=ie=new PropTween(U._pt,L,Y,X,ee,_renderPropWithEnd),ie.e=te,ie.u="deg",U._props.push(Y),ie},_assign=function G(U,L){for(var Y in L)U[Y]=L[Y];return U},_addRawTransformPTs=function G(U,L,Y){var X=_assign({},Y._gsap),W="perspective,force3D,transformOrigin,svgOrigin",z=Y.style,J,Z,ee,te,re,ie,ne,oe;X.svg?(ee=Y.getAttribute("transform"),Y.setAttribute("transform",""),z[_transformProp]=L,J=_parseTransform(Y,1),_removeProperty(Y,_transformProp),Y.setAttribute("transform",ee)):(ee=getComputedStyle(Y)[_transformProp],z[_transformProp]=L,J=_parseTransform(Y,1),z[_transformProp]=ee);for(Z in _transformProps)ee=X[Z],te=J[Z],ee!==te&&W.indexOf(Z)<0&&(ne=getUnit(ee),oe=getUnit(te),re=ne!==oe?_convertToUnit(Y,Z,ee,oe):parseFloat(ee),ie=parseFloat(te),U._pt=new PropTween(U._pt,J,Z,re,ie-re,_renderCSSProp),U._pt.u=oe||0,U._props.push(Z));_assign(J,X)};_forEachName("padding,margin,Width,Radius",function(G,U){var L="Top",Y="Right",X="Bottom",W="Left",z=(U<3?[L,Y,X,W]:[L+W,L+Y,X+Y,X+W]).map(function(J){return U<2?G+J:"border"+J+G});_specialProps[U>1?"border"+G:G]=function(J,Z,ee,te,re){var ie,ne;if(arguments.length<4)return ie=z.map(function(oe){return _get(J,oe,ee)}),ne=ie.join(" "),ne.split(ie[0]).length===5?ie[0]:ne;ie=(te+"").split(" "),ne={},z.forEach(function(oe,se){return ne[oe]=ie[se]=ie[se]||ie[(se-1)/2|0]}),J.init(Z,ne,re)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function G(U){return U.style&&U.nodeType},init:function G(U,L,Y,X,W){var z=this._props,J=U.style,Z=Y.vars.startAt,ee,te,re,ie,ne,oe,se,ae,le,ue,ce,he,fe,de,_e;_pluginInitted||_initCore();for(se in L)if(se!=="autoRound"&&(te=L[se],!(_plugins[se]&&_checkPlugin(se,L,Y,X,U,W)))){if(ne=typeof te,oe=_specialProps[se],ne==="function"&&(te=te.call(Y,X,U,W),ne=typeof te),ne==="string"&&~te.indexOf("random(")&&(te=_replaceRandom(te)),oe)oe(this,U,se,te,Y)&&(_e=1);else if(se.substr(0,2)==="--")ee=(getComputedStyle(U).getPropertyValue(se)+"").trim(),te+="",_colorExp.lastIndex=0,_colorExp.test(ee)||(ae=getUnit(ee),le=getUnit(te)),le?ae!==le&&(ee=_convertToUnit(U,se,ee,le)+le):ae&&(te+=ae),this.add(J,"setProperty",ee,te,X,W,0,0,se),z.push(se);else if(ne!=="undefined"){if(Z&&se in Z?(ee=typeof Z[se]=="function"?Z[se].call(Y,X,U,W):Z[se],_isString(ee)&&~ee.indexOf("random(")&&(ee=_replaceRandom(ee)),getUnit(ee+"")||(ee+=_config.units[se]||getUnit(_get(U,se))||""),(ee+"").charAt(1)==="="&&(ee=_get(U,se))):ee=_get(U,se),ie=parseFloat(ee),ue=ne==="string"&&te.charAt(1)==="="&&te.substr(0,2),ue&&(te=te.substr(2)),re=parseFloat(te),se in _propertyAliases&&(se==="autoAlpha"&&(ie===1&&_get(U,"visibility")==="hidden"&&re&&(ie=0),_addNonTweeningPT(this,J,"visibility",ie?"inherit":"hidden",re?"inherit":"hidden",!re)),se!=="scale"&&se!=="transform"&&(se=_propertyAliases[se],~se.indexOf(",")&&(se=se.split(",")[0]))),ce=se in _transformProps,ce){if(he||(fe=U._gsap,fe.renderTransform&&!L.parseTransform||_parseTransform(U,L.parseTransform),de=L.smoothOrigin!==!1&&fe.smooth,he=this._pt=new PropTween(this._pt,J,_transformProp,0,1,fe.renderTransform,fe,0,-1),he.dep=1),se==="scale")this._pt=new PropTween(this._pt,fe,"scaleY",fe.scaleY,(ue?_parseRelative(fe.scaleY,ue+re):re)-fe.scaleY||0),z.push("scaleY",se),se+="X";else if(se==="transformOrigin"){te=_convertKeywordsToPercentages(te),fe.svg?_applySVGOrigin(U,te,0,de,0,this):(le=parseFloat(te.split(" ")[2])||0,le!==fe.zOrigin&&_addNonTweeningPT(this,fe,"zOrigin",fe.zOrigin,le),_addNonTweeningPT(this,J,se,_firstTwoOnly(ee),_firstTwoOnly(te)));continue}else if(se==="svgOrigin"){_applySVGOrigin(U,te,1,de,0,this);continue}else if(se in _rotationalProperties){_addRotationalPropTween(this,fe,se,ie,ue?_parseRelative(ie,ue+te):te);continue}else if(se==="smoothOrigin"){_addNonTweeningPT(this,fe,"smooth",fe.smooth,te);continue}else if(se==="force3D"){fe[se]=te;continue}else if(se==="transform"){_addRawTransformPTs(this,te,U);continue}}else se in J||(se=_checkPropPrefix(se)||se);if(ce||(re||re===0)&&(ie||ie===0)&&!_complexExp.test(te)&&se in J)ae=(ee+"").substr((ie+"").length),re||(re=0),le=getUnit(te)||(se in _config.units?_config.units[se]:ae),ae!==le&&(ie=_convertToUnit(U,se,ee,le)),this._pt=new PropTween(this._pt,ce?fe:J,se,ie,(ue?_parseRelative(ie,ue+re):re)-ie,!ce&&(le==="px"||se==="zIndex")&&L.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=le||0,ae!==le&&le!=="%"&&(this._pt.b=ee,this._pt.r=_renderCSSPropWithBeginning);else if(se in J)_tweenComplexCSSString.call(this,U,se,ee,ue?ue+te:te);else if(se in U)this.add(U,se,ee||U[se],ue?ue+te:te,X,W);else{_missingPlugin(se,te);continue}z.push(se)}}_e&&_sortPropTweensByPriority(this)},get:_get,aliases:_propertyAliases,getSetter:function G(U,L,Y){var X=_propertyAliases[L];return X&&X.indexOf(",")<0&&(L=X),L in _transformProps&&L!==_transformOriginProp&&(U._gsap.x||_get(U,"x"))?Y&&_recentSetterPlugin===Y?L==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=Y||{})&&(L==="scale"?_setterScaleWithRender:_setterTransformWithRender):U.style&&!_isUndefined(U.style[L])?_setterCSSStyle:~L.indexOf("-")?_setterCSSProp:_getSetter(U,L)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;(function(G,U,L,Y){var X=_forEachName(G+","+U+","+L,function(W){_transformProps[W]=1});_forEachName(U,function(W){_config.units[W]="deg",_rotationalProperties[W]=1}),_propertyAliases[X[13]]=G+","+U,_forEachName(Y,function(W){var z=W.split(":");_propertyAliases[z[1]]=X[z[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(G){_config.units[G]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;/*!
 * @pixi/sound - v4.2.0
 * https://github.com/pixijs/pixi-sound
 * Compiled Wed, 05 Jan 2022 14:56:00 UTC
 *
 * @pixi/sound is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var r;function s(){return r}var u=function(G,U){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(L[X]=Y[X])})(G,U)};function a(G,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function L(){this.constructor=G}u(G,U),G.prototype=U===null?Object.create(U):(L.prototype=U.prototype,new L)}var c=function(){return(c=Object.assign||function(G){for(var U,L=1,Y=arguments.length;L<Y;L++)for(var X in U=arguments[L])Object.prototype.hasOwnProperty.call(U,X)&&(G[X]=U[X]);return G}).apply(this,arguments)},l=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid","caf"],p={};function h(G){var U=c({m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"'},G||{}),L=document.createElement("audio"),Y={},X=/^no$/;l.forEach(function(W){var z=L.canPlayType("audio/".concat(W)).replace(X,""),J=U[W]?L.canPlayType(U[W]).replace(X,""):"";Y[W]=!!z||!!J}),Object.assign(p,Y)}h();var f=/\.(\{([^\}]+)\})(\?.*)?$/;function d(G){var U=f,L=typeof G=="string"?G:G.url;if(!U.test(L))return L;for(var Y=U.exec(L),X=Y[2].split(","),W=X[X.length-1],z=0,J=X.length;z<J;z++){var Z=X[z];if(p[Z]){W=Z;break}}var ee=L.replace(Y[1],W);if(typeof G!="string"){var te=G;te.extension=W,te.url=ee}return ee}var _=function(){function G(){}return G.add=function(){G.setLegacy(s().useLegacy)},G.setLegacy=function(U){var L=l;U?L.forEach(function(Y){LoaderResource.setExtensionXhrType(Y,LoaderResource.XHR_RESPONSE_TYPE.DEFAULT),LoaderResource.setExtensionLoadType(Y,LoaderResource.LOAD_TYPE.AUDIO)}):L.forEach(function(Y){LoaderResource.setExtensionXhrType(Y,LoaderResource.XHR_RESPONSE_TYPE.BUFFER),LoaderResource.setExtensionLoadType(Y,LoaderResource.LOAD_TYPE.XHR)})},G.pre=function(U,L){d(U),L()},G.use=function(U,L){U.data&&l.indexOf(U.extension)>-1?U.sound=s().add(U.name,{loaded:L,preload:!0,url:U.url,source:U.data}):L()},G}(),y=0,m=function(G){function U(L){var Y=G.call(this)||this;return Y.id=y++,Y.init(L),Y}return a(U,G),U.prototype.set=function(L,Y){if(this[L]===void 0)throw new Error("Property with name ".concat(L," does not exist."));switch(L){case"speed":this.speed=Y;break;case"volume":this.volume=Y;break;case"paused":this.paused=Y;break;case"loop":this.loop=Y;break;case"muted":this.muted=Y}return this},Object.defineProperty(U.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"paused",{get:function(){return this._paused},set:function(L){this._paused=L,this.refreshPaused()},enumerable:!1,configurable:!0}),U.prototype._onPlay=function(){this._playing=!0},U.prototype._onPause=function(){this._playing=!1},U.prototype.init=function(L){this._playing=!1,this._duration=L.source.duration;var Y=this._source=L.source.cloneNode(!1);Y.src=L.parent.url,Y.onplay=this._onPlay.bind(this),Y.onpause=this._onPause.bind(this),L.context.on("refresh",this.refresh,this),L.context.on("refreshPaused",this.refreshPaused,this),this._media=L},U.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},U.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(U.prototype,"speed",{get:function(){return this._speed},set:function(L){this._speed=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._volume},set:function(L){this._volume=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"loop",{get:function(){return this._loop},set:function(L){this._loop=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"muted",{get:function(){return this._muted},set:function(L){this._muted=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"filters",{get:function(){return null},set:function(L){},enumerable:!1,configurable:!0}),U.prototype.refresh=function(){var L=this._media.context,Y=this._media.parent;this._source.loop=this._loop||Y.loop;var X=L.volume*(L.muted?0:1),W=Y.volume*(Y.muted?0:1),z=this._volume*(this._muted?0:1);this._source.volume=z*X*W,this._source.playbackRate=this._speed*L.speed*Y.speed},U.prototype.refreshPaused=function(){var L=this._media.context,Y=this._media.parent,X=this._paused||Y.paused||L.paused;X!==this._pausedReal&&(this._pausedReal=X,X?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",X))},U.prototype.play=function(L){var Y=this,X=L.start,W=L.end,z=L.speed,J=L.loop,Z=L.volume,ee=L.muted;this._speed=z,this._volume=Z,this._loop=!!J,this._muted=ee,this.refresh(),this.loop&&W!==null&&(this.loop=!1),this._start=X,this._end=W||this._duration,this._start=Math.max(0,this._start-U.PADDING),this._end=Math.min(this._end+U.PADDING,this._duration),this._source.onloadedmetadata=function(){Y._source&&(Y._source.currentTime=X,Y._source.onloadedmetadata=null,Y.emit("progress",X,Y._duration),Ticker$1.shared.add(Y._onUpdate,Y))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},U.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},U.prototype._onComplete=function(){Ticker$1.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},U.prototype.destroy=function(){Ticker$1.shared.remove(this._onUpdate,this),this.removeAllListeners();var L=this._source;L&&(L.onended=null,L.onplay=null,L.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},U.prototype.toString=function(){return"[HTMLAudioInstance id=".concat(this.id,"]")},U.PADDING=.1,U}(n$4),g=function(G){function U(){return G!==null&&G.apply(this,arguments)||this}return a(U,G),U.prototype.init=function(L){this.parent=L,this._source=L.options.source||new Audio,L.url&&(this._source.src=L.url)},U.prototype.create=function(){return new m(this)},Object.defineProperty(U.prototype,"isPlayable",{get:function(){return!!this._source&&this._source.readyState===4},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"duration",{get:function(){return this._source.duration},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"filters",{get:function(){return null},set:function(L){},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(U.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),U.prototype.load=function(L){var Y=this._source,X=this.parent;if(Y.readyState!==4)if(X.url){Y.src=X.url;var W=function(){Z(),X.isLoaded=!0;var te=X.autoPlayStart();L&&L(null,X,te)},z=function(){Z(),L&&L(new Error("Sound loading has been aborted"))},J=function(){Z();var te="Failed to load audio element (code: ".concat(Y.error.code,")");L&&L(new Error(te))},Z=function(){Y.removeEventListener("canplaythrough",W),Y.removeEventListener("load",W),Y.removeEventListener("abort",z),Y.removeEventListener("error",J)};Y.addEventListener("canplaythrough",W,!1),Y.addEventListener("load",W,!1),Y.addEventListener("abort",z,!1),Y.addEventListener("error",J,!1),Y.load()}else L(new Error("sound.url or sound.source must be set"));else{X.isLoaded=!0;var ee=X.autoPlayStart();L&&setTimeout(function(){L(null,X,ee)},0)}},U}(n$4),b=function(){function G(U,L){this.parent=U,Object.assign(this,L),this.duration=this.end-this.start}return G.prototype.play=function(U){return this.parent.play({complete:U,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},G.prototype.destroy=function(){this.parent=null},G}(),v=function(){function G(){}return G.setParamValue=function(U,L){if(U.setValueAtTime){var Y=s().context;U.setValueAtTime(L,Y.audioContext.currentTime)}else U.value=L;return L},G}(),P=0,x=function(G){function U(L){var Y=G.call(this)||this;return Y.id=P++,Y._media=null,Y._paused=!1,Y._muted=!1,Y._elapsed=0,Y.init(L),Y}return a(U,G),U.prototype.set=function(L,Y){if(this[L]===void 0)throw new Error("Property with name ".concat(L," does not exist."));switch(L){case"speed":this.speed=Y;break;case"volume":this.volume=Y;break;case"muted":this.muted=Y;break;case"loop":this.loop=Y;break;case"paused":this.paused=Y}return this},U.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(U.prototype,"speed",{get:function(){return this._speed},set:function(L){this._speed=L,this.refresh(),this._update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"volume",{get:function(){return this._volume},set:function(L){this._volume=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"muted",{get:function(){return this._muted},set:function(L){this._muted=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"loop",{get:function(){return this._loop},set:function(L){this._loop=L,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"filters",{get:function(){return this._filters},set:function(L){var Y;this._filters&&((Y=this._filters)===null||Y===void 0||Y.filter(function(X){return X}).forEach(function(X){return X.disconnect()}),this._filters=null,this._source.connect(this._gain)),this._filters=L!=null&&L.length?L.slice(0):null,this.refresh()},enumerable:!1,configurable:!0}),U.prototype.refresh=function(){if(this._source){var L=this._media.context,Y=this._media.parent;this._source.loop=this._loop||Y.loop;var X=L.volume*(L.muted?0:1),W=Y.volume*(Y.muted?0:1),z=this._volume*(this._muted?0:1);v.setParamValue(this._gain.gain,z*W*X),v.setParamValue(this._source.playbackRate,this._speed*Y.speed*L.speed),this.applyFilters()}},U.prototype.applyFilters=function(){var L;if(!((L=this._filters)===null||L===void 0)&&L.length){this._source.disconnect();var Y=this._source;this._filters.forEach(function(X){Y.connect(X.destination),Y=X}),Y.connect(this._gain)}},U.prototype.refreshPaused=function(){var L=this._media.context,Y=this._media.parent,X=this._paused||Y.paused||L.paused;X!==this._pausedReal&&(this._pausedReal=X,X?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",X))},U.prototype.play=function(L){var Y=L.start,X=L.end,W=L.speed,z=L.loop,J=L.volume,Z=L.muted,ee=L.filters;this._paused=!1;var te=this._media.nodes.cloneBufferSource(),re=te.source,ie=te.gain;this._source=re,this._gain=ie,this._speed=W,this._volume=J,this._loop=!!z,this._muted=Z,this._filters=ee,this.refresh();var ne=this._source.buffer.duration;this._duration=ne,this._end=X,this._lastUpdate=this._now(),this._elapsed=Y,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=X,this._source.loopStart=Y,this._source.start(0,Y)):X?this._source.start(0,Y,X-Y):this._source.start(0,Y),this.emit("start"),this._update(!0),this.enableTicker(!0)},U.prototype.enableTicker=function(L){Ticker$1.shared.remove(this._updateListener,this),L&&Ticker$1.shared.add(this._updateListener,this)},Object.defineProperty(U.prototype,"progress",{get:function(){return this._progress},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"paused",{get:function(){return this._paused},set:function(L){this._paused=L,this.refreshPaused()},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){var L;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(L=this._filters)===null||L===void 0||L.forEach(function(Y){return Y.disconnect()}),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},U.prototype.toString=function(){return"[WebAudioInstance id=".concat(this.id,"]")},U.prototype._now=function(){return this._media.context.audioContext.currentTime},U.prototype._updateListener=function(){this._update()},U.prototype._update=function(L){if(L===void 0&&(L=!1),this._source){var Y=this._now(),X=Y-this._lastUpdate;if(X>0||L){var W=this._source.playbackRate.value;this._elapsed+=X*W,this._lastUpdate=Y;var z=this._duration,J=void 0;if(this._source.loopStart){var Z=this._source.loopEnd-this._source.loopStart;J=(this._source.loopStart+this._elapsed%Z)/z}else J=this._elapsed%z/z;this._progress=J,this.emit("progress",this._progress,z)}}},U.prototype.init=function(L){this._media=L,L.context.events.on("refresh",this.refresh,this),L.context.events.on("refreshPaused",this.refreshPaused,this)},U.prototype._internalStop=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(L){}this._source=null}},U.prototype._onComplete=function(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(L){}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},U}(n$4),O=function(){function G(U,L){this._output=L,this._input=U}return Object.defineProperty(G.prototype,"destination",{get:function(){return this._input},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"filters",{get:function(){return this._filters},set:function(U){var L=this;if(this._filters&&(this._filters.forEach(function(X){X&&X.disconnect()}),this._filters=null,this._input.connect(this._output)),U&&U.length){this._filters=U.slice(0),this._input.disconnect();var Y=null;U.forEach(function(X){Y===null?L._input.connect(X.destination):Y.connect(X.destination),Y=X}),Y.connect(this._output)}},enumerable:!1,configurable:!0}),G.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},G}(),j=function(G){function U(L){var Y=this,X=L.audioContext,W=X.createBufferSource(),z=X.createGain(),J=X.createAnalyser();return W.connect(J),J.connect(z),z.connect(L.destination),(Y=G.call(this,J,z)||this).context=L,Y.bufferSource=W,Y.gain=z,Y.analyser=J,Y}return a(U,G),Object.defineProperty(U.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(U.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){G.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},U.prototype.cloneBufferSource=function(){var L=this.bufferSource,Y=this.context.audioContext.createBufferSource();Y.buffer=L.buffer,v.setParamValue(Y.playbackRate,L.playbackRate.value),Y.loop=L.loop;var X=this.context.audioContext.createGain();return Y.connect(X),X.connect(this.destination),{source:Y,gain:X}},Object.defineProperty(U.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!1,configurable:!0}),U.BUFFER_SIZE=0,U}(O),w=function(){function G(){}return G.prototype.init=function(U){this.parent=U,this._nodes=new j(this.context),this._source=this._nodes.bufferSource,this.source=U.options.source},G.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(U){}this._source=null,this.source=null},G.prototype.create=function(){return new x(this)},Object.defineProperty(G.prototype,"context",{get:function(){return this.parent.context},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"filters",{get:function(){return this._nodes.filters},set:function(U){this._nodes.filters=U},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"buffer",{get:function(){return this._source.buffer},set:function(U){this._source.buffer=U},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),G.prototype.load=function(U){this.source?this._decode(this.source,U):this.parent.url?this._loadUrl(U):U&&U(new Error("sound.url or sound.source must be set"))},G.prototype._loadUrl=function(U){var L=this,Y=new XMLHttpRequest,X=this.parent.url;Y.open("GET",X,!0),Y.responseType="arraybuffer",Y.onload=function(){L.source=Y.response,L._decode(Y.response,U)},Y.send()},G.prototype._decode=function(U,L){var Y=this,X=function(W,z){if(W)L&&L(W);else{Y.parent.isLoaded=!0,Y.buffer=z;var J=Y.parent.autoPlayStart();L&&L(null,Y.parent,J)}};U instanceof AudioBuffer?X(null,U):this.parent.context.decode(U,X)},G}(),A=function(){function G(U,L){this.media=U,this.options=L,this._instances=[],this._sprites={},this.media.init(this);var Y=L.complete;this._autoPlayOptions=Y?{complete:Y}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=L.autoPlay,this.singleInstance=L.singleInstance,this.preload=L.preload||this.autoPlay,this.url=L.url,this.speed=L.speed,this.volume=L.volume,this.loop=L.loop,L.sprites&&this.addSprites(L.sprites),this.preload&&this._preload(L.loaded)}return G.from=function(U){var L={};return typeof U=="string"?L.url=U:U instanceof ArrayBuffer||U instanceof AudioBuffer||U instanceof HTMLAudioElement?L.source=U:L=U,(L=c({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},L)).url&&(L.url=d(L.url)),Object.freeze(L),new G(s().useLegacy?new g:new w,L)},Object.defineProperty(G.prototype,"context",{get:function(){return s().context},enumerable:!1,configurable:!0}),G.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},G.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(G.prototype,"paused",{get:function(){return this._paused},set:function(U){this._paused=U,this.refreshPaused()},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"speed",{get:function(){return this._speed},set:function(U){this._speed=U,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"filters",{get:function(){return this.media.filters},set:function(U){this.media.filters=U},enumerable:!1,configurable:!0}),G.prototype.addSprites=function(U,L){if(typeof U=="object"){var Y={};for(var X in U)Y[X]=this.addSprites(X,U[X]);return Y}var W=new b(this,L);return this._sprites[U]=W,W},G.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},G.prototype.removeSprites=function(U){if(U){var L=this._sprites[U];L!==void 0&&(L.destroy(),delete this._sprites[U])}else for(var Y in this._sprites)this.removeSprites(Y);return this},Object.defineProperty(G.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!1,configurable:!0}),G.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var U=this._instances.length-1;U>=0;U--)this._instances[U].stop();return this},G.prototype.play=function(U,L){var Y,X=this;if(typeof U=="string"?Y={sprite:z=U,loop:this.loop,complete:L}:typeof U=="function"?(Y={}).complete=U:Y=U,(Y=c({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},Y||{})).sprite){var W=Y.sprite,z=this._sprites[W];Y.start=z.start+(Y.start||0),Y.end=z.end,Y.speed=z.speed||1,Y.loop=z.loop||Y.loop,delete Y.sprite}if(Y.offset&&(Y.start=Y.offset),!this.isLoaded)return new Promise(function(Z,ee){X.autoPlay=!0,X._autoPlayOptions=Y,X._preload(function(te,re,ie){te?ee(te):(Y.loaded&&Y.loaded(te,re,ie),Z(ie))})});(this.singleInstance||Y.singleInstance)&&this._removeInstances();var J=this._createInstance();return this._instances.push(J),this.isPlaying=!0,J.once("end",function(){Y.complete&&Y.complete(X),X._onComplete(J)}),J.once("stop",function(){X._onComplete(J)}),J.play(Y),J},G.prototype.refresh=function(){for(var U=this._instances.length,L=0;L<U;L++)this._instances[L].refresh()},G.prototype.refreshPaused=function(){for(var U=this._instances.length,L=0;L<U;L++)this._instances[L].refreshPaused()},Object.defineProperty(G.prototype,"volume",{get:function(){return this._volume},set:function(U){this._volume=U,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"muted",{get:function(){return this._muted},set:function(U){this._muted=U,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"loop",{get:function(){return this._loop},set:function(U){this._loop=U,this.refresh()},enumerable:!1,configurable:!0}),G.prototype._preload=function(U){this.media.load(U)},Object.defineProperty(G.prototype,"instances",{get:function(){return this._instances},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"sprites",{get:function(){return this._sprites},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"duration",{get:function(){return this.media.duration},enumerable:!1,configurable:!0}),G.prototype.autoPlayStart=function(){var U;return this.autoPlay&&(U=this.play(this._autoPlayOptions)),U},G.prototype._removeInstances=function(){for(var U=this._instances.length-1;U>=0;U--)this._poolInstance(this._instances[U]);this._instances.length=0},G.prototype._onComplete=function(U){if(this._instances){var L=this._instances.indexOf(U);L>-1&&this._instances.splice(L,1),this.isPlaying=this._instances.length>0}this._poolInstance(U)},G.prototype._createInstance=function(){if(G._pool.length>0){var U=G._pool.pop();return U.init(this.media),U}return this.media.create()},G.prototype._poolInstance=function(U){U.destroy(),G._pool.indexOf(U)<0&&G._pool.push(U)},G._pool=[],G}(),F=function(G){function U(){var L=G!==null&&G.apply(this,arguments)||this;return L.speed=1,L.muted=!1,L.volume=1,L.paused=!1,L}return a(U,G),U.prototype.refresh=function(){this.emit("refresh")},U.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(U.prototype,"filters",{get:function(){return null},set:function(L){},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"audioContext",{get:function(){return null},enumerable:!1,configurable:!0}),U.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},U.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},U.prototype.destroy=function(){this.removeAllListeners()},U}(n$4),C=function(G){function U(){var L=this,Y=window,X=new U.AudioContext,W=X.createDynamicsCompressor(),z=X.createAnalyser();return z.connect(W),W.connect(X.destination),(L=G.call(this,z,W)||this)._ctx=X,L._offlineCtx=new U.OfflineAudioContext(1,2,Y.OfflineAudioContext?X.sampleRate:44100),L._unlocked=!1,L.compressor=W,L.analyser=z,L.events=new n$4,L.volume=1,L.speed=1,L.muted=!1,L.paused=!1,X.state!=="running"&&(L._unlock(),L._unlock=L._unlock.bind(L),document.addEventListener("mousedown",L._unlock,!0),document.addEventListener("touchstart",L._unlock,!0),document.addEventListener("touchend",L._unlock,!0)),L}return a(U,G),U.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},U.prototype.playEmptySound=function(){var L=this._ctx.createBufferSource();L.buffer=this._ctx.createBuffer(1,1,22050),L.connect(this._ctx.destination),L.start(0,0,0),L.context.state==="suspended"&&L.context.resume()},Object.defineProperty(U,"AudioContext",{get:function(){var L=window;return L.AudioContext||L.webkitAudioContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(U,"OfflineAudioContext",{get:function(){var L=window;return L.OfflineAudioContext||L.webkitOfflineAudioContext||null},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){G.prototype.destroy.call(this);var L=this._ctx;L.close!==void 0&&L.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(U.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"paused",{get:function(){return this._paused},set:function(L){L&&this._ctx.state==="running"?this._ctx.suspend():L||this._ctx.state!=="suspended"||this._ctx.resume(),this._paused=L},enumerable:!1,configurable:!0}),U.prototype.refresh=function(){this.events.emit("refresh")},U.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},U.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},U.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},U.prototype.decode=function(L,Y){var X=function(z){Y(new Error(z.message||"Unable to decode file"))},W=this._offlineCtx.decodeAudioData(L,function(z){Y(null,z)},X);W&&W.catch(X)},U}(O),E=function(){function G(){this.init()}return G.prototype.init=function(){return this.supported&&(this._webAudioContext=new C),this._htmlAudioContext=new F,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(G.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(U){this.useLegacy||(this._context.filters=U)},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"supported",{get:function(){return C.AudioContext!==null},enumerable:!1,configurable:!0}),G.prototype.add=function(U,L){if(typeof U=="object"){var Y={};for(var X in U){var W=this._getOptions(U[X],L);Y[X]=this.add(X,W)}return Y}if(L instanceof A)return this._sounds[U]=L,L;var z=this._getOptions(L),J=A.from(z);return this._sounds[U]=J,J},G.prototype._getOptions=function(U,L){var Y;return Y=typeof U=="string"?{url:U}:U instanceof ArrayBuffer||U instanceof AudioBuffer||U instanceof HTMLAudioElement?{source:U}:U,Y=c(c({},Y),L||{})},Object.defineProperty(G.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(U){_.setLegacy(U),this._useLegacy=U,this._context=!U&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!1,configurable:!0}),G.prototype.remove=function(U){return this.exists(U,!0),this._sounds[U].destroy(),delete this._sounds[U],this},Object.defineProperty(G.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(U){this._context.volume=U,this._context.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(G.prototype,"speedAll",{get:function(){return this._context.speed},set:function(U){this._context.speed=U,this._context.refresh()},enumerable:!1,configurable:!0}),G.prototype.togglePauseAll=function(){return this._context.togglePause()},G.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},G.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},G.prototype.toggleMuteAll=function(){return this._context.toggleMute()},G.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},G.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},G.prototype.removeAll=function(){for(var U in this._sounds)this._sounds[U].destroy(),delete this._sounds[U];return this},G.prototype.stopAll=function(){for(var U in this._sounds)this._sounds[U].stop();return this},G.prototype.exists=function(U,L){return!!this._sounds[U]},G.prototype.find=function(U){return this.exists(U,!0),this._sounds[U]},G.prototype.play=function(U,L){return this.find(U).play(L)},G.prototype.stop=function(U){return this.find(U).stop()},G.prototype.pause=function(U){return this.find(U).pause()},G.prototype.resume=function(U){return this.find(U).resume()},G.prototype.volume=function(U,L){var Y=this.find(U);return L!==void 0&&(Y.volume=L),Y.volume},G.prototype.speed=function(U,L){var Y=this.find(U);return L!==void 0&&(Y.speed=L),Y.speed},G.prototype.duration=function(U){return this.find(U).duration},G.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},G}(),S=function(){function G(U,L){this.init(U,L)}return G.prototype.init=function(U,L){this.destination=U,this.source=L||U},G.prototype.connect=function(U){this.source.connect(U)},G.prototype.disconnect=function(){this.source.disconnect()},G.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},G}();(function(G){function U(L,Y,X,W,z,J,Z,ee,te,re){L===void 0&&(L=0),Y===void 0&&(Y=0),X===void 0&&(X=0),W===void 0&&(W=0),z===void 0&&(z=0),J===void 0&&(J=0),Z===void 0&&(Z=0),ee===void 0&&(ee=0),te===void 0&&(te=0),re===void 0&&(re=0);var ie=this;if(!s().useLegacy){var ne=[{f:U.F32,type:"lowshelf",gain:L},{f:U.F64,type:"peaking",gain:Y},{f:U.F125,type:"peaking",gain:X},{f:U.F250,type:"peaking",gain:W},{f:U.F500,type:"peaking",gain:z},{f:U.F1K,type:"peaking",gain:J},{f:U.F2K,type:"peaking",gain:Z},{f:U.F4K,type:"peaking",gain:ee},{f:U.F8K,type:"peaking",gain:te},{f:U.F16K,type:"highshelf",gain:re}].map(function(ae){var le=s().context.audioContext.createBiquadFilter();return le.type=ae.type,v.setParamValue(le.Q,1),le.frequency.value=ae.f,v.setParamValue(le.gain,ae.gain),le});(ie=G.call(this,ne[0],ne[ne.length-1])||this).bands=ne,ie.bandsMap={};for(var oe=0;oe<ie.bands.length;oe++){var se=ie.bands[oe];oe>0&&ie.bands[oe-1].connect(se),ie.bandsMap[se.frequency.value]=se}return ie}ie=G.call(this,null)||this}return a(U,G),U.prototype.setGain=function(L,Y){if(Y===void 0&&(Y=0),!this.bandsMap[L])throw new Error("No band found for frequency ".concat(L));v.setParamValue(this.bandsMap[L].gain,Y)},U.prototype.getGain=function(L){if(!this.bandsMap[L])throw new Error("No band found for frequency ".concat(L));return this.bandsMap[L].gain.value},Object.defineProperty(U.prototype,"f32",{get:function(){return this.getGain(U.F32)},set:function(L){this.setGain(U.F32,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f64",{get:function(){return this.getGain(U.F64)},set:function(L){this.setGain(U.F64,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f125",{get:function(){return this.getGain(U.F125)},set:function(L){this.setGain(U.F125,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f250",{get:function(){return this.getGain(U.F250)},set:function(L){this.setGain(U.F250,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f500",{get:function(){return this.getGain(U.F500)},set:function(L){this.setGain(U.F500,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f1k",{get:function(){return this.getGain(U.F1K)},set:function(L){this.setGain(U.F1K,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f2k",{get:function(){return this.getGain(U.F2K)},set:function(L){this.setGain(U.F2K,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f4k",{get:function(){return this.getGain(U.F4K)},set:function(L){this.setGain(U.F4K,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f8k",{get:function(){return this.getGain(U.F8K)},set:function(L){this.setGain(U.F8K,L)},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"f16k",{get:function(){return this.getGain(U.F16K)},set:function(L){this.setGain(U.F16K,L)},enumerable:!1,configurable:!0}),U.prototype.reset=function(){this.bands.forEach(function(L){v.setParamValue(L.gain,0)})},U.prototype.destroy=function(){this.bands.forEach(function(L){L.disconnect()}),this.bands=null,this.bandsMap=null},U.F32=32,U.F64=64,U.F125=125,U.F250=250,U.F500=500,U.F1K=1e3,U.F2K=2e3,U.F4K=4e3,U.F8K=8e3,U.F16K=16e3,U})(S),function(G){function U(L){L===void 0&&(L=0);var Y=this;if(!s().useLegacy){var X=s().context.audioContext.createWaveShaper();return(Y=G.call(this,X)||this)._distortion=X,Y.amount=L,Y}Y=G.call(this,null)||this}return a(U,G),Object.defineProperty(U.prototype,"amount",{get:function(){return this._amount},set:function(L){this._amount=L;for(var Y,X=1e3*L,W=44100,z=new Float32Array(W),J=Math.PI/180,Z=0;Z<W;++Z)Y=2*Z/W-1,z[Z]=(3+X)*Y*20*J/(Math.PI+X*Math.abs(Y));this._distortion.curve=z,this._distortion.oversample="4x"},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this._distortion=null,G.prototype.destroy.call(this)},U}(S),function(G){function U(L){L===void 0&&(L=0);var Y=this;if(!s().useLegacy){var X,W,z,J=s().context.audioContext;return J.createStereoPanner?z=X=J.createStereoPanner():((W=J.createPanner()).panningModel="equalpower",z=W),(Y=G.call(this,z)||this)._stereo=X,Y._panner=W,Y.pan=L,Y}Y=G.call(this,null)||this}return a(U,G),Object.defineProperty(U.prototype,"pan",{get:function(){return this._pan},set:function(L){this._pan=L,this._stereo?v.setParamValue(this._stereo.pan,L):this._panner.setPosition(L,0,1-Math.abs(L))},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){G.prototype.destroy.call(this),this._stereo=null,this._panner=null},U}(S),function(G){function U(L,Y,X){L===void 0&&(L=3),Y===void 0&&(Y=2),X===void 0&&(X=!1);var W=this;if(!s().useLegacy)return(W=G.call(this,null)||this)._seconds=W._clamp(L,1,50),W._decay=W._clamp(Y,0,100),W._reverse=X,W._rebuild(),W;W=G.call(this,null)||this}return a(U,G),U.prototype._clamp=function(L,Y,X){return Math.min(X,Math.max(Y,L))},Object.defineProperty(U.prototype,"seconds",{get:function(){return this._seconds},set:function(L){this._seconds=this._clamp(L,1,50),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"decay",{get:function(){return this._decay},set:function(L){this._decay=this._clamp(L,0,100),this._rebuild()},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"reverse",{get:function(){return this._reverse},set:function(L){this._reverse=L,this._rebuild()},enumerable:!1,configurable:!0}),U.prototype._rebuild=function(){for(var L,Y=s().context.audioContext,X=Y.sampleRate,W=X*this._seconds,z=Y.createBuffer(2,W,X),J=z.getChannelData(0),Z=z.getChannelData(1),ee=0;ee<W;ee++)L=this._reverse?W-ee:ee,J[ee]=(2*Math.random()-1)*Math.pow(1-L/W,this._decay),Z[ee]=(2*Math.random()-1)*Math.pow(1-L/W,this._decay);var te=s().context.audioContext.createConvolver();te.buffer=z,this.init(te)},U}(S),function(G){function U(){var L=this;if(!s().useLegacy){var Y=s().context.audioContext,X=Y.createChannelSplitter(),W=Y.createChannelMerger();return W.connect(X),(L=G.call(this,W,X)||this)._merger=W,L}L=G.call(this,null)||this}return a(U,G),U.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,G.prototype.destroy.call(this)},U}(S),function(G){function U(){var L=this;if(!s().useLegacy){var Y=s().context.audioContext,X=Y.createMediaStreamDestination(),W=Y.createMediaStreamSource(X.stream);return(L=G.call(this,X,W)||this)._stream=X.stream,L}L=G.call(this,null)||this}return a(U,G),Object.defineProperty(U.prototype,"stream",{get:function(){return this._stream},enumerable:!1,configurable:!0}),U.prototype.destroy=function(){this._stream=null,G.prototype.destroy.call(this)},U}(S),function(G){function U(){if(!s().useLegacy){var L=s().context.audioContext,Y=L.createBiquadFilter(),X=L.createBiquadFilter(),W=L.createBiquadFilter(),z=L.createBiquadFilter();return Y.type="lowpass",v.setParamValue(Y.frequency,2e3),X.type="lowpass",v.setParamValue(X.frequency,2e3),W.type="highpass",v.setParamValue(W.frequency,500),z.type="highpass",v.setParamValue(z.frequency,500),Y.connect(X),X.connect(W),W.connect(z),G.call(this,Y,z)||this}G.call(this,null)}return a(U,G),U}(S);var I=function(G){return r=G,G}(new E);Loader.registerPlugin(_);export{Sprite as $,AnimatedSprite as A,BaseTexture$1 as B,openBlock as C,Popup$1 as D,createBlock as E,withCtx as F,resolveComponent as G,resolveDirective as H,createBaseVNode as I,renderList as J,toDisplayString as K,Loader as L,withDirectives as M,createCommentVNode as N,Fragment as O,PIXI as P,createVNode as Q,Rectangle$1 as R,pushScopeId as S,Texture$1 as T,popScopeId as U,createTextVNode as V,Overlay as W,normalizeClass as X,SuperPlayer as Y,Container$1 as Z,_default as _,axios as a,gsapWithCSS as a0,Graphics as a1,Text as a2,I as a3,setTitle as a4,setActionBtnStyle as a5,createStaticVNode as a6,createRouter as a7,createWebHashHistory as a8,createApp as a9,createPinia as aa,vueTouchEvents as ab,isWeixin as b,isLogin as c,showToast as d,getAppInfo as e,isAndroid as f,getUserInfo as g,isIos as h,isQQNews as i,isQQ as j,defineStore as k,login as l,multiFollow as m,nextTick as n,openUrl as o,defineComponent as p,ref as q,reportToDT as r,setShareInfo as s,computed as t,onMounted as u,createElementBlock as v,watch as w,renderSlot as x,normalizeStyle as y,isFocus as z};
